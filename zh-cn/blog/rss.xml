<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>Higress Blog</title>
        <link>https://higress.io/zh-cn/blog</link>
        <description>Higress Blog</description>
        <lastBuildDate>Tue, 19 Dec 2023 00:00:00 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>zh-cn</language>
        <item>
            <title><![CDATA[æ•™ç¨‹ï¼šå¦‚ä½•åœ¨æœ¬åœ°è¿›è¡Œhigressè°ƒè¯•å’Œç«¯åˆ°ç«¯æµ‹è¯•]]></title>
            <link>https://higress.io/zh-cn/blog/e2e-debug</link>
            <guid>https://higress.io/zh-cn/blog/e2e-debug</guid>
            <pubDate>Tue, 19 Dec 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[åœ¨æœ¬åœ°å¿«é€Ÿå®Œæˆe2eæµ‹è¯•å¹¶å®ç°debugåŠŸèƒ½]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="èƒŒæ™¯è¯´æ˜">èƒŒæ™¯è¯´æ˜<a href="#èƒŒæ™¯è¯´æ˜" class="hash-link" aria-label="èƒŒæ™¯è¯´æ˜çš„ç›´æ¥é“¾æ¥" title="èƒŒæ™¯è¯´æ˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æœ¬åœ°è°ƒè¯•">æœ¬åœ°è°ƒè¯•<a href="#æœ¬åœ°è°ƒè¯•" class="hash-link" aria-label="æœ¬åœ°è°ƒè¯•çš„ç›´æ¥é“¾æ¥" title="æœ¬åœ°è°ƒè¯•çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>æœ¬åœ°è°ƒè¯•æ—¨åœ¨åœ¨å¼€å‘è€…çš„æœ¬åœ°å¼€å‘ç¯å¢ƒä¸­è¯†åˆ«ã€å®šä½å’Œä¿®å¤ä»£ç ä¸­çš„é”™è¯¯ï¼ˆbugï¼‰ã€‚è¿™ä¸ªé˜¶æ®µçš„ä¸»è¦ç›®æ ‡æ˜¯ç¡®ä¿å•ä¸ªæ¨¡å—æˆ–ç»„ä»¶çš„æ­£ç¡®æ€§ï¼Œä»¥ä¾¿æ›´å®¹æ˜“ç†è§£å’Œè§£å†³é—®é¢˜ã€‚</p><p>å¼€å‘è€…é€šå¸¸ä½¿ç”¨æœ¬åœ°é›†æˆå¼€å‘ç¯å¢ƒï¼ˆIDEï¼‰æˆ–è°ƒè¯•å™¨æ¥é€æ­¥æ‰§è¡Œä»£ç ã€æŸ¥çœ‹å˜é‡çš„å€¼ã€è§‚å¯Ÿç¨‹åºçš„æµç¨‹ï¼Œå¹¶é€šè¿‡æ‰“æ–­ç‚¹æ¥æ£€æŸ¥ä»£ç çš„æ‰§è¡Œè¿‡ç¨‹ã€‚</p><p>æœ¬åœ°è°ƒè¯•æ˜¯ä¸€ä¸ªå¿«é€Ÿã€è¿…é€Ÿå®šä½é—®é¢˜å¹¶è¿›è¡Œä¿®å¤çš„é˜¶æ®µï¼Œèƒ½å¤Ÿæä¾›å®æ—¶çš„åé¦ˆã€‚å®ƒæœ‰åŠ©äºç¡®ä¿ä»£ç çš„å±€éƒ¨æ­£ç¡®æ€§ï¼Œè€Œä¸éœ€è¦è€ƒè™‘æ•´ä¸ªç³»ç»Ÿçš„äº¤äº’ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç«¯åˆ°ç«¯æµ‹è¯•">ç«¯åˆ°ç«¯æµ‹è¯•<a href="#ç«¯åˆ°ç«¯æµ‹è¯•" class="hash-link" aria-label="ç«¯åˆ°ç«¯æµ‹è¯•çš„ç›´æ¥é“¾æ¥" title="ç«¯åˆ°ç«¯æµ‹è¯•çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>e2eæµ‹è¯•æ˜¯ä¸€ç§ç«¯åˆ°ç«¯çš„æµ‹è¯•ï¼Œæ˜¯ä¸€ç§å…¨é¢çš„æµ‹è¯•æ–¹æ³•ï¼Œç”¨äºéªŒè¯æ•´ä¸ªè½¯ä»¶ç³»ç»Ÿåœ¨çœŸå®ç¯å¢ƒä¸­çš„åŠŸèƒ½å’Œæ€§èƒ½ã€‚å®ƒæ¨¡æ‹Ÿç”¨æˆ·çš„å®é™…ä½¿ç”¨æƒ…å†µï¼Œç¡®ä¿æ•´ä¸ªç³»ç»Ÿçš„å„ä¸ªéƒ¨åˆ†æ­£ç¡®ååŒå·¥ä½œï¼Œä»¥è¾¾åˆ°ç”¨æˆ·æœŸæœ›çš„åŠŸèƒ½ã€‚</p><p>ç«¯åˆ°ç«¯æµ‹è¯•å…³æ³¨æ•´ä¸ªç³»ç»Ÿçš„é›†æˆå’Œäº¤äº’ï¼Œæ—¨åœ¨å‘ç°ä¸åŒç»„ä»¶ä¹‹é—´çš„é—®é¢˜ä»¥åŠåœ¨å®é™…ä½¿ç”¨åœºæ™¯ä¸­å¯èƒ½å‡ºç°çš„ bugã€‚è¿™æœ‰åŠ©äºç¡®ä¿ç³»ç»Ÿåœ¨ç”Ÿäº§ç¯å¢ƒä¸­çš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚</p><p>åœ¨higressä¸­ï¼Œe2eæµ‹è¯•çš„ä¸»è¦æµç¨‹å¯ç”¨ä¸‹å›¾æ¥è¡¨ç¤ºï¼š</p><div class="language-mermaid codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mermaid codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">graph LR;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    åˆ é™¤kindé›†ç¾¤ --&gt; åˆ›å»ºkindé›†ç¾¤ --&gt; æ„å»ºé•œåƒ  --&gt; åŠ è½½é•œåƒ --&gt; å®‰è£…higress --&gt; è¿è¡Œe2eæµ‹è¯• --&gt; åˆ é™¤kindé›†ç¾¤</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å¼Šç«¯">å¼Šç«¯<a href="#å¼Šç«¯" class="hash-link" aria-label="å¼Šç«¯çš„ç›´æ¥é“¾æ¥" title="å¼Šç«¯çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åœ¨æœ¬åœ°å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦é¢‘ç¹çš„è¿›è¡Œe2eæµ‹è¯•ï¼Œä½†æ˜¯æ¯æ¬¡éƒ½è¦é‡æ–°æ„å»ºé•œåƒã€åŠ è½½é•œåƒã€å®‰è£…higressã€è¿è¡Œe2eæµ‹è¯•ï¼Œè¿™æ ·çš„è¿‡ç¨‹éå¸¸è€—æ—¶ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¿«é€Ÿçš„æ–¹æ³•æ¥å®Œæˆe2eæµ‹è¯•ã€‚
å¦å¤–makefileå‘½ä»¤ä¸æ”¯æŒdebugåŠŸèƒ½ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦ä¸€ä¸ªæ–¹æ³•æ¥å®ç°debugåŠŸèƒ½ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆ<a href="#è§£å†³æ–¹æ¡ˆ" class="hash-link" aria-label="è§£å†³æ–¹æ¡ˆçš„ç›´æ¥é“¾æ¥" title="è§£å†³æ–¹æ¡ˆçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>å¯åˆ†ä¸ºç«¯åˆ°ç«¯æµ‹è¯•çš„ä¼˜åŒ–å’Œåœ¨ç«¯åˆ°ç«¯æµ‹è¯•ä¸­å®ç°æœ¬åœ°è°ƒè¯•çš„åŠŸèƒ½ï¼Œç«¯åˆ°ç«¯ä¼˜åŒ–å¯é‡‡ç”¨å®ç°æµ‹è¯•ç¯å¢ƒå¤ç”¨çš„æ–¹æ³•ï¼Œé€šè¿‡ä¿®æ”¹makefileæ–‡ä»¶æ¥å‡å°‘ç¯å¢ƒçš„åˆ›å»ºç­‰å¼€é”€ã€‚</p><p>è€Œåœ¨ç«¯åˆ°ç«¯æµ‹è¯•ä¸­å®ç°æœ¬åœ°è°ƒè¯•çš„åŠŸèƒ½ï¼Œå¯é€šè¿‡Golandæ¥å®ç°ï¼Œæå‰å‡†å¤‡å¥½æµ‹è¯•ç¯å¢ƒï¼Œä¿®æ”¹e2eæµ‹è¯•çš„éƒ¨åˆ†ä»£ç æ¥å‡å°‘e2eç¯å¢ƒåˆ›å»ºçš„å¼€é”€ï¼Œæ›´åŠ æ–¹ä¾¿çš„å®ç°debugåŠŸèƒ½ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å…·ä½“å®ç°">å…·ä½“å®ç°<a href="#å…·ä½“å®ç°" class="hash-link" aria-label="å…·ä½“å®ç°çš„ç›´æ¥é“¾æ¥" title="å…·ä½“å®ç°çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç«¯åˆ°ç«¯æµ‹è¯•ä¼˜åŒ–">ç«¯åˆ°ç«¯æµ‹è¯•ä¼˜åŒ–<a href="#ç«¯åˆ°ç«¯æµ‹è¯•ä¼˜åŒ–" class="hash-link" aria-label="ç«¯åˆ°ç«¯æµ‹è¯•ä¼˜åŒ–çš„ç›´æ¥é“¾æ¥" title="ç«¯åˆ°ç«¯æµ‹è¯•ä¼˜åŒ–çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>é€šè¿‡makefileæ¥å®Œæˆï¼ŒåŒ…å«å¯åŠ¨ç³»åˆ—ç¯å¢ƒå’Œæ‰§è¡Œe2eæµ‹è¯•ã€‚</p><p>ä»¥è¿è¡Œæ’ä»¶æµ‹è¯•ä¸ºä¾‹ï¼Œå…¶makeå‘½ä»¤å¦‚ä¸‹ï¼š</p><div class="language-makefile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-makefile codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin-target builtin">.PHONY</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress-wasmplugin-test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token target symbol" style="color:#36acaa">higress-wasmplugin-test</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tools/kind</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> delete-cluster create-cluster docker-build kube-load-image install-dev-wasmplugin run-higress-e2e-test-wasmplugin delete-cluster</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¼€å‘è€…é¦–æ¬¡è¿è¡Œç¯å¢ƒå¯å…ˆåˆ é™¤æœ€åä¸€ä¸ª<code>delete-cluster</code>çš„æ“ä½œï¼Œç¬¬äºŒæ¬¡è¿è¡Œe2eæµ‹è¯•çš„æ—¶å€™å¯ä»¥åˆ é™¤å‰é¢çš„æ“ä½œï¼Œåªä¿ç•™<code>run-higress-e2e-test-wasmplugin</code>çš„æ“ä½œï¼Œè¿™æ ·å°±å¯ä»¥å‡å°‘å¾ˆå¤šæ—¶é—´ã€‚</p><p>ç„¶è€Œmakeå‘½ä»¤ä¸æ”¯æŒæ·»åŠ åˆ°golandé‡Œé¢å®ç°debugåŠŸèƒ½ï¼Œè¿è¡Œå‡ºé”™çš„æ—¶å€™ä¹Ÿä¸æ–¹ä¾¿å®šä½é—®é¢˜ï¼Œæ›´æ¨èä½¿ç”¨ä¸‹é¢è¿™ä¸ªæ–¹æ³•ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="åœ¨e2eä¸­å®ç°æœ¬åœ°è°ƒè¯•">åœ¨e2eä¸­å®ç°æœ¬åœ°è°ƒè¯•<a href="#åœ¨e2eä¸­å®ç°æœ¬åœ°è°ƒè¯•" class="hash-link" aria-label="åœ¨e2eä¸­å®ç°æœ¬åœ°è°ƒè¯•çš„ç›´æ¥é“¾æ¥" title="åœ¨e2eä¸­å®ç°æœ¬åœ°è°ƒè¯•çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>é€šè¿‡Golandæ¥å®Œæˆï¼Œæå‰å‡†å¤‡å¥½ç¯å¢ƒï¼Œä¿®æ”¹Golandå¯åŠ¨å‚æ•°æ¥å®Œæˆæœ¬åœ°è°ƒè¯•ã€‚</p><ul><li>e2eæµ‹è¯•ä¹‹å‰çš„å‡†å¤‡</li></ul><p>æ ¹æ®å„è‡ªçš„éœ€æ±‚æ¥å®šåˆ¶ç¯å¢ƒï¼Œå¦‚æœæµ‹è¯•ç¯å¢ƒä¸­éœ€è¦ç”¨åˆ°higressçš„controllerã€gatewayç­‰ç»„ä»¶ï¼Œéœ€è¦æå‰æœ¬åœ°å®‰è£…å¥½ç¯å¢ƒï¼Œå®‰è£…æ•™ç¨‹å¯å‚è€ƒ<a href="https://higress.io/zh-cn/docs/user/quickstart/" target="_blank" rel="noopener noreferrer">è¿™é‡Œ</a>ã€‚</p><p>ä½¿ç”¨helmå®‰è£…å¥½higressåï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ¥æŸ¥çœ‹higressçš„podæ˜¯å¦æ­£å¸¸è¿è¡Œï¼š</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get pods --all-namespaces</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ˜¾ç¤ºç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img loading="lazy" alt="1.png" src="/zh-cn/assets/images/e2e-debug1-6d4ad979b78fd26ceedc43b24fc18b3c.png" width="980" height="136" class="img_ev3q"></p><p>éƒ½æ˜¾ç¤ºRunningçŠ¶æ€ï¼Œè¯´æ˜higresså·²ç»æ­£å¸¸è¿è¡Œã€‚</p><ul><li>e2eçš„flagä¿®æ”¹</li></ul><p>åœ¨<code>test/e2e/conformance/utils/flags</code>ç›®å½•ä¸‹ï¼Œæœ‰ä¸€ä¸ª<code>flags.go</code>æ–‡ä»¶ï¼Œé‡Œé¢å®šä¹‰äº†e2eæµ‹è¯•çš„flagï¼š</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    IngressClassName     </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> flag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">String</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"ingress-class"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"higress"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Name of IngressClass to use for tests"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ShowDebug            </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> flag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Bool</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"debug"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Whether to print debug logs"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CleanupBaseResources </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> flag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Bool</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"cleanup-base-resources"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Whether to cleanup base test resources after the run"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SupportedFeatures    </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> flag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">String</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"supported-features"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">""</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Supported features included in conformance tests suites"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ExemptFeatures       </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> flag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">String</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"exempt-features"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">""</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Exempt Features excluded from conformance tests suites"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    IsWasmPluginTest     </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> flag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Bool</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"isWasmPluginTest"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Determine if run wasm plugin conformance test"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    WasmPluginType       </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> flag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">String</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"wasmPluginType"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"GO"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Define wasm plugin type, currently supports GO, CPP"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    WasmPluginName       </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> flag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">String</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"wasmPluginName"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">""</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Define wasm plugin name"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    IsEnvoyConfigTest    </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> flag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Bool</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"isEnvoyConfigTest"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Determine if run envoy config conformance test"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¯ä¸´æ—¶ä¿®æ”¹è¿™äº›flagçš„åˆå§‹å€¼ï¼Œä¹Ÿå¯ä»¥åœ¨Golandç¼–è¾‘å™¨ä¸­å®šä¹‰å¯åŠ¨å‚æ•°ï¼Œä¾‹å¦‚è®¾ç½®<code>IsWasmPluginTest</code>ä¸ºtrueå¯åªè¿è¡Œwasmæ’ä»¶çš„e2eæµ‹è¯•ã€‚</p><p>ä¿®æ”¹å¥½flagä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨Golandä¸­é€šè¿‡debugçš„æ–¹å¼è¿è¡Œe2eæµ‹è¯•ã€‚å¯å…ˆåœ¨å¦‚ä¸‹ä½ç½®æ·»åŠ ä¸€ä¸ªæ–­ç‚¹ï¼Œç­‰å¾…e2eç¯å¢ƒå‡†å¤‡å®Œæ¯•ï¼š</p><p><img loading="lazy" alt="2.png" src="/zh-cn/assets/images/e2e-debug2-de7c59fff6871ae104cb9f1fdbae9f65.png" width="1335" height="987" class="img_ev3q"></p><p>e2eæµ‹è¯•åœ¨å‰æœŸç¯å¢ƒå‡†å¤‡çš„è¿‡ç¨‹ä¸­ä¼šåˆ›å»ºä¸€äº›namespaceå¹¶å¯åŠ¨ä¸€äº›podï¼Œå¯ä»¥æ‰‹åŠ¨æŸ¥çœ‹ä¸€ä¸‹podçš„å¯åŠ¨æƒ…å†µã€‚</p><p><img loading="lazy" alt="img.png" src="/zh-cn/assets/images/e2e-debug3-4d25bee1f70fb8ae0a0a90deee54244d.png" width="1201" height="605" class="img_ev3q"></p><p>åœ¨è¿™å¼ å›¾é‡Œé¢ï¼Œé™¤äº†æˆ‘ä»¬æå‰å®‰è£…å¥½çš„higressç»„ä»¶ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„podï¼Œè¿™äº›podæ˜¯e2eæµ‹è¯•è¿‡ç¨‹ä¸­åˆ›å»ºçš„ï¼Œå¦‚æœæœ‰äº›podåœ¨æœ¬åœ°e2eæµ‹è¯•ä¸­ç”¨ä¸åˆ°ï¼Œå¯æ‰‹åŠ¨ä¿®æ”¹ä»£ç æ¥å‡å°‘å‰æœŸç¯å¢ƒçš„å‡†å¤‡æ—¶é—´ã€‚</p><blockquote><p>æ³¨æ„ï¼šå¦‚æœè®¾ç½®äº†cleanup-base-resourcesä¸ºfalseï¼Œé‚£ä¹ˆe2eæµ‹è¯•ç»“æŸä¹‹åï¼Œè¿™äº›podä¸ä¼šè¢«åˆ é™¤ï¼Œä½†æ˜¯é‡å¯çš„æ—¶å€™ä¼šæŠ¥é”™ï¼Œä¾‹å¦‚ï¼š</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Pod "consul-standlone" is invalid: spec: Forbidden: pod updates may not change fields other than `spec.containers[*].image`, `spec.initContainers[*].image`, `spec.activeDeadlineSeconds`, `spec.tolerations` (only additions to existing tolerations) or `spec.terminationGracePeriodSeconds` (allow it to be set to 1 if it was previously negative)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></blockquote><blockquote><p>å»ºè®®è®¾ç½®ä¸ºtrueï¼Œæ¯æ¬¡æµ‹è¯•å®Œéœ€è¦ç­‰å¾…podçš„é”€æ¯ï¼Œç„¶åé‡æ–°æµ‹è¯•ï¼Œè¿™äº›è¿‡ç¨‹ä¸€èˆ¬å¾ˆå¿«ï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹ä»£ç æ¥å‡å°‘ä¸€äº›podçš„åˆ›å»ºã€‚</p></blockquote><ul><li>e2eæµ‹è¯•ç¯å¢ƒä¼˜åŒ–</li></ul><p>ä¾‹å¦‚åªéœ€è¦higressç¯å¢ƒï¼Œè€Œä¸éœ€è¦<code>higress-conformance-infra</code>,<code>higress-conformance-app-backend</code>ç­‰namespaceç¯å¢ƒï¼Œå¯ä»¥æ‰‹åŠ¨åœ¨å¦‚ä¸‹å‡ è¡Œä»£ç é‡Œæ·»åŠ æ³¨é‡Šï¼Œæ¥è·³è¿‡è¿™äº›ç¯å¢ƒçš„åˆ›å»ºï¼Œç„¶åæµ‹è¯•ä¸­åªç”¨åˆ°äº†higressçš„ç»„ä»¶ï¼š</p><p><img loading="lazy" alt="img.png" src="/zh-cn/assets/images/e2e-debug4-263420d802513c11800de3ce76b453f8.png" width="1372" height="984" class="img_ev3q"></p><p>åœ¨è¿™é‡Œï¼Œæˆ‘åªéœ€è¦è¿è¡Œ<code>EnvoyConfigTracing</code>çš„Testæµ‹è¯•ï¼Œå®ƒåªè·Ÿhigressæœ‰å…³ï¼Œæ³¨é‡Šæ‰äº†å…¶ä»–namespaceçš„å‡†å¤‡ç¯å¢ƒï¼Œå¯ä»¥çœ‹åˆ°e2eæµ‹è¯•ä¸åˆ°1så°±ç»“æŸäº†ã€‚</p><p>å¦‚æœéœ€è¦å…¶ä»–namespaceçš„ç¯å¢ƒï¼Œè€Œä¸éœ€è¦nacos/consulç­‰ç¯å¢ƒï¼Œå¯ä»¥åœ¨suiteçš„Newæ–¹æ³•é‡Œæ‰¾åˆ°ä»¥ä¸‹ä»£ç å—ï¼Œæ ¹æ®éœ€è¦è¿›è¡Œæ³¨é‡Šï¼š</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// apply defaults</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> suite</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">BaseManifests </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    suite</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">BaseManifests </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"base/manifests.yaml"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"base/consul.yaml"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"base/eureka.yaml"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"base/nacos.yaml"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"base/dubbo.yaml"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è§£å†³å¥½e2eæµ‹è¯•çš„ç¯å¢ƒç›¸å…³é—®é¢˜ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨Golandé‡Œæ·»åŠ è‡ªå·±æƒ³è¦çš„æ–­ç‚¹ï¼Œæ¥debugæµ‹è¯•ç”¨ä¾‹äº†ã€‚</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Higress å›¢é˜Ÿæ‹›å‹Ÿå°ä¼™ä¼´åŠ å…¥ï½]]></title>
            <link>https://higress.io/zh-cn/blog/hring</link>
            <guid>https://higress.io/zh-cn/blog/hring</guid>
            <pubDate>Fri, 17 Nov 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Higress æ‹›è˜ä¿¡æ¯]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="åŠ å…¥higressçš„å•†ä¸šåŒ–team">åŠ å…¥Higressçš„å•†ä¸šåŒ–Team<a href="#åŠ å…¥higressçš„å•†ä¸šåŒ–team" class="hash-link" aria-label="åŠ å…¥Higressçš„å•†ä¸šåŒ–Teamçš„ç›´æ¥é“¾æ¥" title="åŠ å…¥Higressçš„å•†ä¸šåŒ–Teamçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>æˆ‘ä»¬å•†ä¸šåŒ–Teamæœ‰å……è¶³çš„HCï¼Œæ¬¢è¿åŠ å…¥ğŸ‘ï¼Œè”ç³»æ–¹å¼ï¼šå¾®ä¿¡(nomadao)  é‚®ç®±(<a href="mailto:zty98751@alibaba-inc.com" target="_blank" rel="noopener noreferrer">zty98751@alibaba-inc.com</a>)</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å›¢é˜Ÿä»‹ç»">å›¢é˜Ÿä»‹ç»<a href="#å›¢é˜Ÿä»‹ç»" class="hash-link" aria-label="å›¢é˜Ÿä»‹ç»çš„ç›´æ¥é“¾æ¥" title="å›¢é˜Ÿä»‹ç»çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>Higresså›¢é˜Ÿå±äºé˜¿é‡Œäº‘äº‘åŸç”Ÿä¸­é—´ä»¶å›¢é˜Ÿã€‚</p><p>é˜¿é‡Œäº‘äº‘åŸç”Ÿä¸­é—´ä»¶å›¢é˜Ÿè´Ÿè´£åˆ†å¸ƒå¼è½¯ä»¶åŸºç¡€è®¾æ–½ï¼Œä¸ºé˜¿é‡Œäº‘ä¸Šä¸‡å®¶ä¼ä¸šæä¾›å¦‚å¾®æœåŠ¡å¼•æ“ã€åˆ†å¸ƒå¼äº‹åŠ¡ã€EDASç­‰åˆ†å¸ƒå¼åŸºç¡€æœåŠ¡ï¼ŒåŠ é€Ÿä¼ä¸šä¸Šäº‘çš„è¿›ç¨‹å’Œåˆ›æ–°é€Ÿåº¦ã€‚åŒæ—¶ï¼Œäº‘åŸç”Ÿä¸­é—´ä»¶å›¢é˜Ÿä¹ŸæœåŠ¡ç€é˜¿é‡Œé›†å›¢ä¼—å¤šæ ¸å¿ƒä¸šåŠ¡å’Œåœºæ™¯ï¼Œæ˜¯æ”¯æ’‘åŒåä¸€ç‹‚æ¬¢èŠ‚çš„æ ¸å¿ƒå›¢é˜Ÿä¹‹ä¸€ã€‚</p><p>åœ¨è¿™é‡Œï¼Œæœ‰éå¸¸ä¼˜ç§€çš„ä¸­é—´ä»¶äº§å“å’Œåœºæ™¯ä»¥åŠä¼ä¸šäº’è”ç½‘æ¶æ„å¹³å°ï¼ŒæœåŠ¡ä¸Šä¸‡å®¶é˜¿é‡Œäº‘çš„ä¼ä¸šï¼Œæ”¯æŒå¤§è§„æ¨¡ç”µå•†äº¤æ˜“ä¸šåŠ¡åœºæ™¯ã€‚</p><p>åœ¨è¿™é‡Œï¼Œä½ ä¼šå‚ä¸åˆ°å…¨çƒä¼˜ç§€å¼€æºé¡¹ç›®ï¼ˆå¦‚ Apache Dubboã€RocketMQã€Nacosã€Sentinelã€Seataã€Arthasã€Tengineã€Istioã€Envoyã€OpenSergoã€Higressï¼‰å’Œé˜¿é‡Œäº‘æ ¸å¿ƒå•†ä¸šåŒ–äº§å“ï¼ˆå¾®æœåŠ¡å¼•æ“ MSEã€ä¼ä¸šçº§åˆ†å¸ƒå¼åº”ç”¨æœåŠ¡ EDASã€åº”ç”¨å®æ—¶ç›‘æ§æœåŠ¡ARMSï¼‰ç ”å‘å·¥ä½œä¸­ï¼Œä¸€åŒæ‹“å±•æŠ€æœ¯çš„è¾¹ç•Œï¼Œæ—¢èµ‹èƒ½é˜¿é‡Œå·´å·´é›†å›¢ï¼Œæ›´æœåŠ¡å¹¿æ³›çš„å¼€å‘è€…ç”¨æˆ·ã€‚</p><p>åœ¨è¿™é‡Œï¼Œä½ ä¼šå‚ä¸åˆ°ä¸­é—´ä»¶ã€å¾®æœåŠ¡ã€Serverless ç­‰å‰æ²¿çš„æŠ€æœ¯ç ”å‘ä¸æ¢ç´¢ä¸­æ¥ï¼›ä½ ä¹Ÿä¼šä¸å…¨çƒä¼˜ç§€å¼€æºäº§å“åˆ›å§‹äººç­‰ç»„æˆçš„æ˜æ˜Ÿå›¢é˜Ÿä¸€èµ·å·¥ä½œã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="è´Ÿè´£å·¥ä½œ">è´Ÿè´£å·¥ä½œ<a href="#è´Ÿè´£å·¥ä½œ" class="hash-link" aria-label="è´Ÿè´£å·¥ä½œçš„ç›´æ¥é“¾æ¥" title="è´Ÿè´£å·¥ä½œçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ol><li>å‚ä¸é˜¿é‡Œäº‘å•†ä¸šç‰ˆHigressï¼ˆMSEäº‘åŸç”Ÿç½‘å…³ï¼‰çš„äº§å“ç ”å‘</li><li>å‚ä¸Higresså¼€æºçš„äº§å“ç ”å‘å’Œç¤¾ç¾¤è¿è¥</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="èŒä½è¦æ±‚">èŒä½è¦æ±‚<a href="#èŒä½è¦æ±‚" class="hash-link" aria-label="èŒä½è¦æ±‚çš„ç›´æ¥é“¾æ¥" title="èŒä½è¦æ±‚çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ol><li>3å¹´ä»¥ä¸Šäº§å“ç ”å‘å·¥ä½œç»éªŒï¼Œç†Ÿç»ƒä½¿ç”¨Goæˆ–C++ï¼Œæœ‰äº‘åŸç”Ÿç›¸å…³äº§å“ç ”å‘ç»éªŒè€…ä¼˜å…ˆã€‚</li><li>æœ‰Higress/Envoy/Istio/Nginxå¼€æºè´¡çŒ®å’Œå¼€å‘ç»éªŒè€…ä¼˜å…ˆã€‚</li><li>å…·å¤‡å‡ºè‰²çš„é¡¹ç›®ç®¡ç†åè°ƒå’Œä¸šåŠ¡è§„åˆ’èƒ½åŠ›ï¼Œæœ‰å›¢é˜Ÿåˆä½œç²¾ç¥ï¼Œå¹¶èƒ½å€ŸåŠ©å„æ–¹åŠ›é‡æ¨åŠ¨è§„åˆ™ã€åˆ¶åº¦ç­‰è½åœ°ã€‚</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="åŠ å…¥higressçš„å¼€æºteam">åŠ å…¥Higressçš„å¼€æºTeam<a href="#åŠ å…¥higressçš„å¼€æºteam" class="hash-link" aria-label="åŠ å…¥Higressçš„å¼€æºTeamçš„ç›´æ¥é“¾æ¥" title="åŠ å…¥Higressçš„å¼€æºTeamçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>Higressä¸ºå‚ä¸è´¡çŒ®çš„åŒå­¦è®¾è®¡äº†å‡ ä¸ªå¯è®¤é¢†çš„å¤´è¡”ï¼Œè¾¾åˆ°ä¸€å®šè´¡çŒ®è¦æ±‚ï¼Œå³å¯åœ¨Higresså®˜ç½‘æ<a href="https://github.com/higress-group/higress-group.github.io/blob/main/i18n/zh-cn/docusaurus-plugin-content-docs/current/developers/developers_dev.md" target="_blank" rel="noopener noreferrer">PR</a>çš„æ–¹å¼è®¤é¢†ã€‚</p><p><strong>å¤´è¡”æœ¬èº«æ˜¯ä¸€ç§è£èª‰è±¡å¾ï¼Œæ¯ä¸€ä½å‚ä¸Higressçš„è´¡çŒ®è€…åœ¨å¼€æºç¤¾åŒºçš„åœ°ä½éƒ½æ˜¯å¹³ç­‰çš„</strong></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="member-å¤´è¡”">Member å¤´è¡”<a href="#member-å¤´è¡”" class="hash-link" aria-label="Member å¤´è¡”çš„ç›´æ¥é“¾æ¥" title="Member å¤´è¡”çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><strong>æ¡ä»¶ï¼š</strong></p><ul><li>è·å¾— 8 ä¸ªå®Œæˆ issue çš„ç§¯åˆ†ï¼ˆeasy +1ï¼Œnormal +2ï¼Œchallenge +4ï¼‰</li></ul><blockquote><p>Higresså¼€æºç¤¾åŒºä¸ºæ¯ä¸ªå¯è®¤é¢†ï¼ˆhelp wantedæ ‡ç­¾ï¼‰çš„issueéƒ½æ ‡è®°äº†éš¾åº¦æ ‡ç­¾ï¼šç®€å•(level/easy)ï¼Œæ™®é€š(level/normal)ï¼Œæœ‰æŒ‘æˆ˜(level/challenge)ï¼Œå®Œæˆissueåå¯ä»¥è·å¾—å¯¹åº”ç§¯åˆ†</p></blockquote><ul><li>è´¡çŒ®ä»£ç ï¼ˆåŒ…å«æ–‡æ¡£ï¼‰DIFF è¡Œæ•°ï¼ˆåŒ…å«å¢åˆ ï¼‰è¾¾åˆ° 500+</li></ul><blockquote><p>ä¸ä»…åªæœ‰è´¡çŒ®ä»£ç ï¼Œåœ¨Higress<a href="https://github.com/higress-group/higress-group.github.io" target="_blank" rel="noopener noreferrer">å®˜ç½‘ä»“åº“</a>è´¡çŒ®æ–‡æ¡£ï¼Œä¹Ÿå¯ä»¥æ»¡è¶³æ­¤è¦æ±‚</p></blockquote><ul><li>åœ¨ç¤¾åŒºå‘¨ä¼šè¿›è¡Œ 1 æ¬¡ä¸»é¢˜åˆ†äº«</li></ul><blockquote><p>é‡ç‚¹ä¸æ˜¯åˆ†äº«çš„å†…å®¹ï¼Œæ˜¯é€šè¿‡åˆ†äº«è®©å¤§å®¶è®¤è¯†ä½ </p></blockquote><p><strong>ç”³è¯·æ–¹å¼ï¼š</strong></p><p>ç›´æ¥æPRç”³è¯·</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reviewer-å¤´è¡”">Reviewer å¤´è¡”<a href="#reviewer-å¤´è¡”" class="hash-link" aria-label="Reviewer å¤´è¡”çš„ç›´æ¥é“¾æ¥" title="Reviewer å¤´è¡”çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><strong>æ¡ä»¶ï¼š</strong></p><ul><li>æ»¡è¶³Memberæ¡ä»¶</li><li>åœ¨SIGçš„æ ¸å¿ƒ <a href="https://github.com/alibaba/higress/issues/547" target="_blank" rel="noopener noreferrer">issue</a> ä¸­åšå‡ºè´¡çŒ®</li></ul><p><strong>ç”³è¯·æ–¹å¼ï¼š</strong></p><p>ç”±Approvers/Maintaineræååï¼ŒæPRç”³è¯·</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="approver-å¤´è¡”">Approver å¤´è¡”<a href="#approver-å¤´è¡”" class="hash-link" aria-label="Approver å¤´è¡”çš„ç›´æ¥é“¾æ¥" title="Approver å¤´è¡”çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><strong>æ¡ä»¶ï¼š</strong></p><ul><li>æ»¡è¶³Revieweræ¡ä»¶</li><li>ä¸»å¯¼ä¸€ä¸ªSIGï¼Œç»„ç»‡å¹¶æ¨è¿›æ ¸å¿ƒissueçš„tasklistå®Œæˆ</li></ul><p><strong>ç”³è¯·æ–¹å¼ï¼š</strong></p><p>ç”±Maintaineræååï¼ŒæPRç”³è¯·</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="maintainer-å¤´è¡”">Maintainer å¤´è¡”<a href="#maintainer-å¤´è¡”" class="hash-link" aria-label="Maintainer å¤´è¡”çš„ç›´æ¥é“¾æ¥" title="Maintainer å¤´è¡”çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>Maintaineræ˜¯å¯¹Higressé¡¹ç›®ï¼ˆåŒ…æ‹¬Higressä¸‹çš„é¡¹ç›®ï¼‰çš„æ¼”è¿›å’Œå‘å±•åšå‡ºæ˜¾è‘—è´¡çŒ®çš„ä¸ªäººã€‚åœ¨ç¤¾åŒºä¸­å…·æœ‰æœ‰ç›®å…±ç¹çš„å½±å“åŠ›ï¼Œèƒ½å¤Ÿä»£è¡¨Higresså‚åŠ é‡è¦çš„ç¤¾åŒºä¼šè®®å’Œæ´»åŠ¨ã€‚</p><p><strong>æ¡ä»¶ï¼š</strong></p><ul><li>æ»¡è¶³Approveræ¡ä»¶</li><li>ä¸»å¯¼å¤šä¸ªSIGï¼Œç»„ç»‡å¹¶æ¨è¿›æ ¸å¿ƒissueçš„tasklistå®Œæˆ</li><li>ç§¯æå‚ä¸å¼€æºç¤¾åŒºçš„æ—¥å¸¸å·¥ä½œï¼šå¼•å¯¼æ–°äººå¼€å‘ï¼Œç”¨æˆ·é—®é¢˜è§£ç­”ç­‰</li></ul><p><strong>ç”³è¯·æ–¹å¼ï¼š</strong></p><p>ç”±2åMaintaineræååï¼ŒæPRç”³è¯·</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å·²è·å¾—å¤´è¡”åå•">å·²è·å¾—å¤´è¡”åå•<a href="#å·²è·å¾—å¤´è¡”åå•" class="hash-link" aria-label="å·²è·å¾—å¤´è¡”åå•çš„ç›´æ¥é“¾æ¥" title="å·²è·å¾—å¤´è¡”åå•çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><strong>æ³¨ï¼šæ’åæŒ‰ github id é¦–å­—æ¯</strong></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="higress-maintainers">Higress Maintainers<a href="#higress-maintainers" class="hash-link" aria-label="Higress Maintainersçš„ç›´æ¥é“¾æ¥" title="Higress Maintainersçš„ç›´æ¥é“¾æ¥">â€‹</a></h4><table><thead><tr><th>å§“å</th><th>github</th><th>ç»„ç»‡</th></tr></thead><tbody><tr><td>è‘£è‰ºèƒ</td><td><a href="https://github.com/CH3CHO" target="_blank" rel="noopener noreferrer">CH3CHO</a></td><td>Trip.com</td></tr><tr><td>è€¿è•¾è•¾</td><td><a href="https://github.com/gengleilei" target="_blank" rel="noopener noreferrer">gengleilei</a></td><td>Alibaba</td></tr><tr><td>å¼ æ·»ç¿¼</td><td><a href="https://github.com/johnlanni" target="_blank" rel="noopener noreferrer">johnlanni</a></td><td>Alibaba</td></tr><tr><td>èŒƒæ‰¬</td><td><a href="https://github.com/SpecialYang" target="_blank" rel="noopener noreferrer">SpecialYang</a></td><td>Alibaba</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="higress-approvers">Higress Approvers<a href="#higress-approvers" class="hash-link" aria-label="Higress Approversçš„ç›´æ¥é“¾æ¥" title="Higress Approversçš„ç›´æ¥é“¾æ¥">â€‹</a></h4><table><thead><tr><th>å§“å</th><th>github</th><th>ç»„ç»‡</th></tr></thead><tbody><tr><td>å´æ–°å†›</td><td><a href="https://github.com/2456868764" target="_blank" rel="noopener noreferrer">2456868764</a></td><td>-</td></tr><tr><td>åˆ˜è®­ç¼</td><td><a href="https://github.com/Xunzhuo" target="_blank" rel="noopener noreferrer">Xunzhuo</a></td><td>Tencent</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="higress-reviewers">Higress Reviewers<a href="#higress-reviewers" class="hash-link" aria-label="Higress Reviewersçš„ç›´æ¥é“¾æ¥" title="Higress Reviewersçš„ç›´æ¥é“¾æ¥">â€‹</a></h4><table><thead><tr><th>å§“å</th><th>github</th><th>ç»„ç»‡</th></tr></thead><tbody><tr><td>å‡Œè½¶ç¾¤</td><td><a href="https://github.com/Lynskylate" target="_blank" rel="noopener noreferrer">Lynskylate</a></td><td>Pdd Holdings Inc</td></tr><tr><td>åˆ˜æ™“ç‘</td><td><a href="https://github.com/rinfx" target="_blank" rel="noopener noreferrer">rinfx</a></td><td>Alibaba</td></tr><tr><td>èµµç‚³å ƒ</td><td><a href="https://github.com/sjtuzbk" target="_blank" rel="noopener noreferrer">sjtuzbk</a></td><td>Alibaba</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="higress-members">Higress Members<a href="#higress-members" class="hash-link" aria-label="Higress Membersçš„ç›´æ¥é“¾æ¥" title="Higress Membersçš„ç›´æ¥é“¾æ¥">â€‹</a></h4><table><thead><tr><th>å§“å</th><th>github</th><th>ç»„ç»‡</th></tr></thead><tbody><tr><td>æå¼ºæ—</td><td><a href="https://github.com/Charlie17Li" target="_blank" rel="noopener noreferrer">Charlie17Li</a></td><td>ZJU-SEL</td></tr><tr><td>å°å®‡è…¾</td><td><a href="https://github.com/Fkbqf" target="_blank" rel="noopener noreferrer">Ffyyt</a></td><td>XUPT</td></tr><tr><td>ç”°äºšæ¶›</td><td><a href="https://github.com/Hinsteny" target="_blank" rel="noopener noreferrer">Hinsteny</a></td><td>Ant</td></tr><tr><td>å®‹é¹è¿œ</td><td><a href="https://github.com/songpengyuan" target="_blank" rel="noopener noreferrer">songpengyuan</a></td><td>Okki.com</td></tr><tr><td>èµµä¼ŸåŸº</td><td><a href="https://github.com/vikizhao156" target="_blank" rel="noopener noreferrer">vikizhao156</a></td><td>SJTU</td></tr><tr><td>éŸ¦é‘«</td><td><a href="https://github.com/weixinx" target="_blank" rel="noopener noreferrer">WeixinX</a></td><td>NUAA</td></tr></tbody></table>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Higress å¼€æºä¸€å‘¨å¹´ï¼šæ–°ç‰ˆæœ¬ï¼Œæ–°æ ‡å‡†ï¼Œæ–°å·¥å…·ï¼Œæ–°å¾ç¨‹]]></title>
            <link>https://higress.io/zh-cn/blog/release-1.3</link>
            <guid>https://higress.io/zh-cn/blog/release-1.3</guid>
            <pubDate>Sat, 04 Nov 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[æ”¯æŒäº† Gateway API æ ‡å‡†ï¼Œè¿˜æœ‰å…¨æ–°çš„è¿ç»´/å¼€å‘å·¥å…·ï¼Œä»¥åŠæˆ‘ä»¬æ–°çš„å¼€æºå¾ç¨‹]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="å†ç¨‹å›é¡¾">å†ç¨‹å›é¡¾<a href="#å†ç¨‹å›é¡¾" class="hash-link" aria-label="å†ç¨‹å›é¡¾çš„ç›´æ¥é“¾æ¥" title="å†ç¨‹å›é¡¾çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><img loading="lazy" src="https://github.com/johnlanni/higress-group.github.io/assets/6763318/b5f3ee1b-d53a-4fbb-8d4a-82427ebdfe40" alt="image" class="img_ev3q"></p><p>Higress å¼€æºä¸€å¹´æ—¶é—´ï¼Œä¸€å…±å‘å¸ƒäº† 18 ä¸ª release ç‰ˆæœ¬ï¼Œæ”¶è·äº† 40 å¤šä½ç¤¾åŒºè´¡çŒ®è€…å’Œ 1800+ starï¼Œä¸Šå›¾æ˜¯è¿™ä¸€å¹´è¿‡æ¥è¾¾æˆçš„ä¸€äº›å…³é”®çš„é‡Œç¨‹ç¢‘ã€‚</p><p>å‰é¢åŠå¹´é€šè¿‡é›†æˆå¼€æºç”Ÿæ€ï¼Œæ‰“ç£¨å¼€æºç‰ˆæœ¬ç¨³å®šæ€§ï¼Œå¹¶åœ¨å‘å¸ƒ 1.0 GA ç‰ˆæœ¬åï¼Œç¤¾åŒºåˆé©¬ä¸åœè¹„å‘å¸ƒäº† 1.1 å’Œ 1.2 ä¸¤ä¸ªé‡è¦ç‰ˆæœ¬ï¼Œå®ç°äº†é K8s éƒ¨ç½²ï¼ŒKnative é€‚é…ç­‰æ ¸å¿ƒèƒ½åŠ›ã€‚</p><p>Higress 1.3 ç‰ˆæœ¬å·²ç»æ­£å¼å‘å¸ƒï¼Œé™¤äº†å¢åŠ çš„æ–°åŠŸèƒ½ï¼Œå·²æœ‰èƒ½åŠ›ä¹Ÿåœ¨å¤§é‡ç¤¾åŒºç”¨æˆ·åé¦ˆçš„è¿‡ç¨‹ä¸­ä¸æ–­å®Œå–„æ”¹è¿›ï¼Œè¿™ä¸ªç‰ˆæœ¬åŒæ—¶æ ‡å¿—ç€ 1.x è¿›å…¥å¯ä»¥å¤§è§„æ¨¡ç”Ÿäº§ä½¿ç”¨çš„çŠ¶æ€ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ–°ç‰ˆæœ¬åŠŸèƒ½é€Ÿè§ˆ">æ–°ç‰ˆæœ¬ï¼šåŠŸèƒ½é€Ÿè§ˆ<a href="#æ–°ç‰ˆæœ¬åŠŸèƒ½é€Ÿè§ˆ" class="hash-link" aria-label="æ–°ç‰ˆæœ¬ï¼šåŠŸèƒ½é€Ÿè§ˆçš„ç›´æ¥é“¾æ¥" title="æ–°ç‰ˆæœ¬ï¼šåŠŸèƒ½é€Ÿè§ˆçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>è‡ªå‘å¸ƒ 1.2 ç‰ˆæœ¬è¿‡å»äº†ä¸€ä¸ªå¤šæœˆæ—¶é—´ï¼Œ1.3 ç‰ˆæœ¬æ­£å¼å‘å¸ƒï¼Œå¸¦æ¥ä¸¤ä¸ªå…¨æ–°èƒ½åŠ›ï¼š</p><ul><li>æ–°æ ‡å‡†ï¼šæ”¯æŒæœ€æ–°ç‰ˆæœ¬ Gateway API æ ‡å‡†ï¼Œå¹¶ä¸”å…·å¤‡ä» Ingress å¹³æ»‘æ¸è¿›æ¼”è¿›ï¼Œä»¥åŠå¯¹æ¥å¤šç§æœåŠ¡å‘ç°æœºåˆ¶çš„èƒ½åŠ›</li><li>æ–°å·¥å…·ï¼šæ­£å¼ release äº† hgctl (Higress Crontroller) è¿™ä¸ª "All in one" çš„æ–°å·¥å…·ï¼Œä¸ä»…å¯ä»¥æ›¿ä»£ Helm å®ç°æ›´ç®€æ˜“çš„å®‰è£…ï¼Œè¿˜æä¾›äº† WASM æ’ä»¶å¼€å‘å·¥å…·åŒ…ï¼Œä»¥åŠç½‘å…³é…ç½®æ£€æŸ¥ç­‰ä¸°å¯ŒåŠŸèƒ½</li></ul><p>é™¤äº†è¿™ä¸¤ä¸ªæ ¸å¿ƒåŠŸèƒ½å¤–ï¼Œè¿˜æœ‰ä¸€äº›å®ç”¨åŠŸèƒ½ï¼š</p><ol><li>æä¾›äº† Higress Admin Java SDKï¼Œå¯ä»¥ç»Ÿä¸€å¯¹æ¥ K8s å’Œé K8s ç¯å¢ƒï¼Œç®¡ç†åŸŸå/è·¯ç”±ç­‰é…ç½®</li><li>æä¾›äº† OIDC æ’ä»¶ï¼Œæ”¯æŒå¯¹æ¥ Keycloak/Okta ç­‰ç¬¬ä¸‰æ–¹èº«ä»½è®¤è¯ç³»ç»Ÿ</li><li>Higress Console çš„æ˜“ç”¨æ€§å’Œå®‰å…¨æ€§æå‡ï¼Œä¸å†é€šè¿‡è·¯ç”±æš´éœ²ï¼Œæ”¯æŒç•Œé¢åˆå§‹åŒ–/ä¿®æ”¹å¯†ç </li></ol><p>ä¸æ­¤åŒæ—¶ï¼ŒHigress å¼€æºç¤¾åŒºå·²ç»å¼€å§‹å‡†å¤‡è¸ä¸Šä¸€æ®µå…¨æ–°çš„å¼€æºå¾ç¨‹...</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ–°æ ‡å‡†æ”¯æŒæœ€æ–°ç‰ˆ-gateway-api">æ–°æ ‡å‡†ï¼šæ”¯æŒæœ€æ–°ç‰ˆ Gateway API<a href="#æ–°æ ‡å‡†æ”¯æŒæœ€æ–°ç‰ˆ-gateway-api" class="hash-link" aria-label="æ–°æ ‡å‡†ï¼šæ”¯æŒæœ€æ–°ç‰ˆ Gateway APIçš„ç›´æ¥é“¾æ¥" title="æ–°æ ‡å‡†ï¼šæ”¯æŒæœ€æ–°ç‰ˆ Gateway APIçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>Gateway API åœ¨ 11 æœˆ 1 æ—¥æ­£å¼å‘å¸ƒäº† 1.0.0 ç‰ˆæœ¬ï¼Œå…¶ä¸­ GatewayClass, Gateway, HTTPRoute è¿™ä¸‰ä¸ª APIæ­£å¼å®£å¸ƒ GAï¼Œå‘å¸ƒäº† v1 ç‰ˆæœ¬ï¼šgateway.networking.k8s.io/v1ã€‚</p><p>ç›®å‰ Higress å·²ç»å¯ä»¥æ”¯æŒè¿™äº›æœ€æ–°ç‰ˆæœ¬çš„ API é…ç½®ï¼Œåªéœ€åœ¨å®‰è£…/å‡çº§ Higress æ—¶é…ç½®å¼€å¯ Gateway APIï¼š</p><ul><li>ä½¿ç”¨ Helm ï¼šé€šè¿‡å‚æ•° <code>--set global.enableGatewayAPI=true</code></li><li>ä½¿ç”¨ Hgctl ï¼šé€šè¿‡å‘½ä»¤è¡Œå‚æ•°æˆ–è€… install.yaml ä¸­é…ç½® <code>global.enableGatewayAPI=true</code></li></ul><p>é¦–å…ˆåˆ›å»º GatewayClass èµ„æºï¼š</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> gateway.networking.k8s.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> GatewayClass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">gateway</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">controllerName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"higress.io/gateway-controller"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ¥ç€åœ¨å®‰è£… Higress çš„å‘½åç©ºé—´ä¸‹ï¼Œåˆ›å»º Gateway èµ„æºï¼Œé€šè¿‡ gatewayClassName å…³è”ä¸Šé¢åˆ›å»ºçš„ GatewayClass èµ„æºï¼ŒæŒ‡å®šç”± Higress æ¥ç®¡ç†æ­¤ Gateway é…ç½®ï¼Œä¸‹é¢ä¸ºåŸŸååŒæ—¶é…ç½®äº† HTTP å’Œ HTTPS å…¥å£ï¼Œå¹¶ä¸º HTTPS å…¥å£é…ç½®äº†è¯ä¹¦ï¼š</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> gateway.networking.k8s.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Gateway</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">gateway</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">gatewayClassName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">gateway</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">listeners</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> foobar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">hostname</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"*.foobar.com"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> HTTP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">allowedRoutes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">namespaces</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">from</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> All</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> foobar</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">https</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">hostname</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"*.foobar.com"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">443</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> HTTPS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">allowedRoutes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">namespaces</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">from</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> All</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">tls</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">certificateRefs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Secret</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> wildcard</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">foobar</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">mode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Terminate        </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å› ä¸ºä¸Šé¢ Gateway é€šè¿‡ allowedRoutes é…ç½®äº†å…è®¸æ‰€æœ‰å‘½åç©ºé—´çš„è·¯ç”±æ¥å…³è”ï¼Œæ‰€ä»¥è¿™é‡Œåœ¨ default å‘½åç©ºé—´ä¸‹åˆ›å»º HTTPRouteï¼Œå…³è”ä¸Šé¢åˆ›å»ºçš„ Gatewayï¼Œå³å¯å®šä¹‰åŸŸåä¸‹çš„å…·ä½“è·¯ç”±ï¼š</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> gateway.networking.k8s.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> HTTPRoute</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> foobar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">parentRefs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">gateway</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">hostnames</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"www.foobar.com"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">rules</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">matches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PathPrefix</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /foo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">backendRefs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> foo</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5678</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä»¥ä¸Šå°±æ˜¯ Gateway API çš„ä¸€ä¸ªç®€å•ç”¨æ³•ç¤ºä¾‹ï¼ŒGateway API è¿˜æœ‰å¾ˆå¤šåŠŸèƒ½å’Œç©æ³•ï¼Œåé¢ Higress å…¬ä¼—å·/åšå®¢ä¼šå‡ºä¸€ä¸ªç³»åˆ—è¿›è¡Œç³»ç»Ÿåˆ†äº«å’Œä»‹ç»ã€‚</p><p>æ¬¢è¿ç»“åˆ<a href="https://gateway-api.sigs.k8s.io/reference/spec/" target="_blank" rel="noopener noreferrer">å®˜æ–¹ API æ–‡æ¡£</a>ï¼Œå¹¶ä½¿ç”¨ hgctl ï¼ˆè·å–æ–¹å¼è§ä¸‹æ–‡ï¼‰åœ¨è‡ªå·±ç”µè„‘ä¸Šå®‰è£…ä¸€ä¸ª local-k8s æ¨¡å¼çš„ Higressï¼Œæ¥å¼€å¯å¯¹è¿™ä¸€æ–°æ ‡å‡†çš„æ¢ç´¢ï¼š</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ä¸€é”®å®‰è£…, äº¤äº’å¼å‘½ä»¤é€‰æ‹©ç¬¬ä¸€ç§å®‰è£…æ¨¡å¼ local-k8sï¼Œå°†é»˜è®¤å®‰è£… Gateway API CRD</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  hgctl </span><span class="token function" style="color:#d73a49">install</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å¤šç§æœåŠ¡å‘ç°èƒ½åŠ›">å¤šç§æœåŠ¡å‘ç°èƒ½åŠ›<a href="#å¤šç§æœåŠ¡å‘ç°èƒ½åŠ›" class="hash-link" aria-label="å¤šç§æœåŠ¡å‘ç°èƒ½åŠ›çš„ç›´æ¥é“¾æ¥" title="å¤šç§æœåŠ¡å‘ç°èƒ½åŠ›çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åœ¨ Ingress API æ ‡å‡†ä¸‹ï¼ŒHigress å¯¹æ¥å¤šç§æœåŠ¡å‘ç°èƒ½åŠ›æ˜¯ç‹¬æ ‘ä¸€å¸œçš„ï¼Œåœ¨ Gateway API æ ‡å‡†ä¸‹ï¼Œ Higress ä»å°±ä¿æŒäº†è¿™ä¸€èƒ½åŠ›ä¼˜åŠ¿ï¼š</p><p>é¦–å…ˆé€šè¿‡ McpBridge èµ„æºï¼Œå¯ä»¥å®šä¹‰å¤šç§æœåŠ¡å‘ç°æœºåˆ¶ï¼š</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> networking.higress.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> McpBridge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">registries</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">domain</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 127.0.0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">nacosGroups</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> DEFAULT_GROUP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">local</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">nacos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8848</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nacos2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">domain</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 127.0.0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">local</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">zk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2181</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> zookeeper      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">domain</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 127.0.0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">local</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">eureka</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8761</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> eureka</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">domain</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 127.0.0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">consulDatacenter</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> dc1      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">local</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">consul</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8500</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> consul</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åˆ›å»ºä¸€ä¸ª HTTPRoute èµ„æºï¼Œå¯ä»¥åŒæ—¶å¯¹æ¥ K8s æœåŠ¡ï¼Œå’Œæ³¨å†Œä¸­å¿ƒçš„æœåŠ¡ï¼Œå¹¶å®ç°ç°åº¦è·¯ç”±èƒ½åŠ›ï¼š</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> gateway.networking.k8s.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> HTTPRoute</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> http</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">parentRefs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">gateway</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">rules</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">matches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PathPrefix</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">backendRefs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> service</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">provider.DEFAULT</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">GROUP.public.nacos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">group</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> networking.higress.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8080</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">weight</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">90</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> foo</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5678</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">weight</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å’Œ K8s æœåŠ¡ä¸åŒçš„æ˜¯ï¼Œè¿™é‡Œ group ä¸º <code>networking.higress.io</code> çš„æœåŠ¡å¹¶ä¸éœ€è¦æå‰åˆ›å»º CRD èµ„æºï¼Œè¿™æ›´ç¬¦åˆä¼ ç»Ÿå¾®æœåŠ¡ç”¨æˆ·çš„ä¹ æƒ¯ï¼Œå³æœåŠ¡æ¨¡å‹ä¸éœ€è¦æå‰åˆ›å»ºï¼Œæ˜¯é€šè¿‡æœåŠ¡èŠ‚ç‚¹æ³¨å†Œè‡ªåŠ¨ç”Ÿæˆã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ingress-api-å’Œ-gateway-api-ä¹‹é—´å¦‚ä½•é€‰æ‹©">Ingress API å’Œ Gateway API ä¹‹é—´å¦‚ä½•é€‰æ‹©<a href="#ingress-api-å’Œ-gateway-api-ä¹‹é—´å¦‚ä½•é€‰æ‹©" class="hash-link" aria-label="Ingress API å’Œ Gateway API ä¹‹é—´å¦‚ä½•é€‰æ‹©çš„ç›´æ¥é“¾æ¥" title="Ingress API å’Œ Gateway API ä¹‹é—´å¦‚ä½•é€‰æ‹©çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>æœ‰äº† Gateway APIï¼Œæ˜¯å¦åº”è¯¥ç«‹å³æŠ›å¼ƒ Ingress APIï¼Ÿ</p><p>åªæœ‰æœ€åˆé€‚çš„ï¼Œæ²¡æœ‰æœ€å¥½çš„ã€‚Gateway API è™½ç„¶ä¸ºæ›´å¤šç½‘å…³èƒ½åŠ›åšäº†æ ‡å‡†åŒ–ï¼Œä½† CRD çš„ç§ç±»å’Œå¤æ‚åº¦ä¹Ÿå¢åŠ äº†ï¼Œç›¸æ¯”ä¹‹ä¸‹å¯¹äºå¤§éƒ¨åˆ†ç®€å•ç”¨ä¾‹åœºæ™¯ï¼ŒIngress API æ›´åŠ ç®€å•æ˜“ç”¨ã€‚</p><p>å¯¹äºä»¥ä¸‹åœºæ™¯ï¼Œé‡‡ç”¨ Gateway API æ›¿ä»£ Ingress API ä¼šå¸¦æ¥å¾ˆå¤§å¸®åŠ©ï¼š</p><ul><li>å¤§å‹å›¢é˜Ÿåˆ’åˆ†äº† SRE è§’è‰²å’Œä¸šåŠ¡ç ”å‘è§’è‰²ï¼Œç”± SRE é€šè¿‡ Gateway èµ„æºç»Ÿä¸€ç®¡ç†ç«™ç‚¹åŸŸåå’Œè¯ä¹¦ï¼Œç”±ä¸šåŠ¡ç ”å‘é€šè¿‡ HTTPRoute èµ„æºç®¡ç†ä¸šåŠ¡è·¯ç”±ï¼Œå®ç°èŒè´£åˆ’åˆ†ï¼Œæƒé™æ”¶æ•›</li><li>åˆ›å»ºçš„è·¯ç”±å’Œ Service æœ‰ä¸åœ¨ä¸€ä¸ªå‘½åç©ºé—´çš„éœ€æ±‚ï¼Œå¯ä»¥å€ŸåŠ© ReferenceGrant èµ„æºå®ç°</li><li>æœ‰å¤§é‡è¯ä¹¦éœ€è¦é›†ä¸­å¼ç®¡ç†ï¼Œä¸å¸Œæœ›å°†è¯ä¹¦ Secret åŒæ­¥åˆ° Ingress æ‰€åœ¨å‘½åç©ºé—´ï¼Œå¸¦æ¥å®‰å…¨é£é™©</li></ul><p>Gateway API çš„å¦ä¸€ä¸ªå¥½å¤„æ˜¯å¯¹äºæ›´å¤šåŠŸèƒ½çš„æ ‡å‡†åŒ–å®šä¹‰ï¼Œæˆ‘ä»¬å»ºè®®é‡åˆ°å®é™…éœ€è¦å†è½¬æ¢åˆ°è¿™ä¸ªæ–°çš„æ ‡å‡†ï¼Œè€Œä¸å¿…ç›²ç›®è·Ÿéšã€‚</p><p>Higress æ”¯æŒ Gateway API å’Œ Ingress API æ··åˆä½¿ç”¨ï¼ŒGateway API ä¸‹çš„åŸŸåè·¯ç”±å°†æ¯” Ingress API ä¼˜å…ˆåŒ¹é…ï¼Œå’Œ Ingress ç›¸åŒèµ„æºåç§°çš„ HTTPRoute è¿˜ä¼šç»§æ‰¿ WASM æ’ä»¶é…ç½®ï¼Œè¿™æ ·ç”¨æˆ·å¯ä»¥æŒ‰éœ€é‡‡ç”¨ Gateway APIï¼Œå¹³æ»‘åœ°å®Œæˆä» Ingress API å‘ Gateway API çš„æ¼”è¿›ï¼Œæ— éœ€ç„¦è™‘ API æ ‡å‡†å‡çº§è¿‡ç¨‹ä¸­äº§ç”Ÿä¸šåŠ¡æŸå¤±ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ–°å·¥å…·all-in-one-çš„-hgctl">æ–°å·¥å…·ï¼šAll in one çš„ hgctl<a href="#æ–°å·¥å…·all-in-one-çš„-hgctl" class="hash-link" aria-label="æ–°å·¥å…·ï¼šAll in one çš„ hgctlçš„ç›´æ¥é“¾æ¥" title="æ–°å·¥å…·ï¼šAll in one çš„ hgctlçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ›¿ä»£-helm-ç”¨äºå®‰è£…å‡çº§">æ›¿ä»£ Helm ç”¨äºå®‰è£…/å‡çº§<a href="#æ›¿ä»£-helm-ç”¨äºå®‰è£…å‡çº§" class="hash-link" aria-label="æ›¿ä»£ Helm ç”¨äºå®‰è£…/å‡çº§çš„ç›´æ¥é“¾æ¥" title="æ›¿ä»£ Helm ç”¨äºå®‰è£…/å‡çº§çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åœ¨ K8s ä¸‹ç”¨ Helm å®‰è£…/å‡çº§ç»„ä»¶å¾ˆæ–¹ä¾¿ï¼Œä½†åœ¨ Higress çš„åœºæ™¯ä¸‹ä»ç„¶å­˜åœ¨ä¸€äº›é—®é¢˜ï¼š</p><ol><li>æ— æ³•æ”¯æŒé K8s åœºæ™¯ä¸‹çš„å®‰è£…/å‡çº§</li><li>Higress æœ‰å¾ˆå¤šå®‰è£…å‚æ•°ï¼Œè¿›è¡Œå‡çº§ç­‰æ“ä½œæ—¶ä¸å¥½ç»´æŠ¤ï¼Œä½¿ç”¨<code>reuse-values</code> æœ‰ä¸€äº›å‰¯ä½œç”¨ï¼Œä¸”å®¹æ˜“è¯¯æ“ä½œ</li><li>æ— æ³•ç®¡ç† CRD è·Ÿéšç‰ˆæœ¬æ›´æ–°ï¼Œéœ€è¦æ‰‹åŠ¨æ›´æ–°</li></ol><p>Higress å€Ÿé‰´äº† istio çš„ istioctlï¼Œæä¾›äº† hgctl è¿™ä¸ªå‘½ä»¤è¡Œå·¥å…·è§£å†³äº†ä¸Šè¿°é—®é¢˜ï¼Œé€šè¿‡ä»¥ä¸‹å‘½ä»¤å³å¯å®‰è£… hgctl</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ä¸‹è½½æœ€æ–°ç‰ˆ Hgctlï¼š</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -Ls https://raw.githubusercontent.com/alibaba/higress/main/tools/hack/get-hgctl.sh </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">VERSION</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">latest </span><span class="token function" style="color:#d73a49">bash</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>hgctl é›†æˆäº†ä¸‰ç§ Higress å®‰è£…æ¨¡å¼ï¼Œå¹¶ç»Ÿä¸€äº†å‡çº§/è¿ç»´æ“ä½œï¼š</p><ol><li>æœ¬åœ° K8s ç¯å¢ƒï¼ˆä¾‹å¦‚kind/k3sï¼‰æ¨¡å¼</li><li>æ­£å¼ K8s ç¯å¢ƒæ¨¡å¼</li><li>ä¸ä¾èµ– K8s çš„çº¯ Docker ç¯å¢ƒæ¨¡å¼</li></ol><p>ç›´æ¥æ‰§è¡Œ <code>hgctl install</code> å‘½ä»¤å³å¯é€‰æ‹©ä»»æ„æ¨¡å¼è¿›è¡Œå®‰è£…</p><p>å®‰è£…é…ç½®æ–‡ä»¶å°†å­˜è‡³ <code>~/.hgctl/profiles/install.yaml</code> ç›®å½•ä¸‹ï¼ŒæŸ¥çœ‹è¯¥æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">charts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">higress</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># å®‰è£…æ–‡ä»¶çš„ helm repo åœ°å€</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//higress.io/helm</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">charts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># æ‰§è¡Œ hgctl upgrade æ—¶å°†è‡ªåŠ¨æ›´æ–°è‡³æœ€æ–°ç‰ˆæœ¬</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">console</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># å¼€å¯å¯è§‚æµ‹ç»„ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">o11YEnabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># æ§åˆ¶å°å®ä¾‹æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">controller</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># æ§åˆ¶é¢ç»„ä»¶å®ä¾‹æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">gateway</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># æ•°æ®é¢ç»„ä»¶å®ä¾‹æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">global</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># å¼€å¯ Gateway API</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">enableGatewayAPI</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># å¼€å¯ Istio API</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">enableIstioAPI</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># è®¾ç½®ç›‘å¬çš„ ingress class</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ingressClass</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># å®‰è£…æ¨¡å¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">install</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> local</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">k8s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># å®‰è£…å‘½åç©ºé—´</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># é…ç½®ä¼ é€’ç»™ helm çš„ values å‚æ•° </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">values</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">profile</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> local</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">k8s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¿®æ”¹ä¸Šé¢æ–‡ä»¶çš„å†…å®¹åï¼Œæ‰§è¡Œ<code>hgctl upgarde</code>å³å¯å®ç°å‚æ•°å˜æ›´ç”Ÿæ•ˆï¼Œå¦‚æœåªæƒ³ä¿®æ”¹å‚æ•°ï¼Œä¸æƒ³è§¦å‘ç‰ˆæœ¬å‡çº§ï¼Œå¯ä»¥å°† version å‚æ•°å›ºå®šä¸ºå½“å‰ç‰ˆæœ¬ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="wasm-æ’ä»¶å¼€å‘å·¥å…·åŒ…">WASM æ’ä»¶å¼€å‘å·¥å…·åŒ…<a href="#wasm-æ’ä»¶å¼€å‘å·¥å…·åŒ…" class="hash-link" aria-label="WASM æ’ä»¶å¼€å‘å·¥å…·åŒ…çš„ç›´æ¥é“¾æ¥" title="WASM æ’ä»¶å¼€å‘å·¥å…·åŒ…çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ä¸ºäº†æ ‡å‡†åŒ–å¹¶ç®€åŒ– WASM æ’ä»¶çš„å¼€å‘/ç¼–è¯‘/æµ‹è¯•/å‘å¸ƒï¼ŒHigress æä¾›äº† <code>hgctl plugin</code> è¿™ä¸€å­å‘½ä»¤ï¼Œä½¿ç”¨æ–¹å¼ä¸ºï¼š</p><ol><li><code>hgctl plugin init</code>: åˆå§‹åŒ– Golang WASM æ’ä»¶é¡¹ç›®ï¼ŒåŒ…æ‹¬ä¸‰ä¸ªæ–‡ä»¶ï¼›</li><li>ç”¨æˆ·ç¼–å†™ WASM æ’ä»¶é€»è¾‘ï¼›</li><li><code>hgctl plugin build --output-type files</code>: æ„å»º WASM æ’ä»¶ï¼Œåœ¨æœ¬åœ°è¾“å‡ºæ„å»ºäº§ç‰©ï¼›</li><li><code>hgctl plugin test: ä½¿ç”¨ docker compose</code> åœ¨æœ¬åœ°æµ‹è¯• WASM æ’ä»¶ï¼Œå¦‚éœ€ä¿®æ”¹æ’ä»¶é€»è¾‘ï¼Œåˆ™è¿”å›ç¬¬ 2 æ­¥ï¼›</li><li><code>hgctl plugin build --output-type image</code>: æ„å»º WASM æ’ä»¶ä½œä¸º OCI é•œåƒä¸Šä¼ è‡³é•œåƒä»“åº“ï¼›</li><li><code>hgctl plugin install</code>: å®‰è£… WASM æ’ä»¶ï¼Œå¯ä»¥é€šè¿‡æœ¬åœ°çš„ yaml æ–‡ä»¶æˆ–æ’ä»¶é¡¹ç›®è¿›è¡Œå®‰è£…ã€‚</li></ol><p>å¦å¤–ï¼Œè‹¥éœ€è¦æŸ¥çœ‹å·²å®‰è£…çš„æ’ä»¶ï¼Œåˆ™ä½¿ç”¨ <code>hgctl plugin ls</code>ï¼›è‹¥éœ€è¦æ“ä½œæ’ä»¶é…ç½®ï¼Œåˆ™ä½¿ç”¨ <code>hgctl plugin config</code></p><p>é€šè¿‡è¿™ä¸ªå·¥å…·ï¼Œå¯ä»¥åœ¨æ„å»º WASM æ’ä»¶çš„åŒæ—¶ï¼Œæ ¹æ®é…ç½®ä»£ç è‡ªåŠ¨ç”Ÿæˆæ’ä»¶çš„é…ç½®è¯´æ˜æ–‡æ¡£ï¼Œä»¥åŠåŒ…å«æ’ä»¶é…ç½®çº¦æŸçš„å…ƒä¿¡æ¯æ–‡ä»¶ï¼Œè¿™äº›å†…å®¹éƒ½å°†å’Œ WASM æ–‡ä»¶ä¸€èµ·æ”¾å…¥ OCI é•œåƒåˆ¶å“ä¸­ï¼Œé€šè¿‡é•œåƒæ–¹å¼è¿›è¡Œç‰ˆæœ¬ç®¡ç†å’Œåˆ†å‘ã€‚è¿™ä¸€æœºåˆ¶æ˜¯åç»­ Higress å»ºè®¾ WASM æ’ä»¶å¸‚åœºçš„åŸºçŸ³ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å…¶ä»–åŠŸèƒ½">å…¶ä»–åŠŸèƒ½<a href="#å…¶ä»–åŠŸèƒ½" class="hash-link" aria-label="å…¶ä»–åŠŸèƒ½çš„ç›´æ¥é“¾æ¥" title="å…¶ä»–åŠŸèƒ½çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>å¦å¤–ä»‹ç»ä¸¤ä¸ªå®ç”¨çš„å­å‘½ä»¤ï¼š</p><ol><li><code>hgctl dashboard</code>: ç”¨äºå‘¼å‡º UI ç•Œé¢ï¼Œä¾‹å¦‚ Higress æ§åˆ¶å°ï¼Œç›´æ¥é€šè¿‡ <code>hgctl dashboard console</code> å³å¯æ‰“å¼€</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  $ hgctl dashboard</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Access to Higress web UIs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Usage:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    hgctl dashboard </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">flags</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    hgctl dashboard </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">command</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Aliases:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dashboard, dash, d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Available Commands:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    console     Open Console web UI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    controller  Open Controller debug web UI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    envoy       Open Envoy admin web UI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    grafana     Open Grafana web UI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    prometheus  Open Prometheus web UI</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li><code>hgctl gateway-config</code>: ç”¨äºæŸ¥çœ‹æ•°æ®é¢çš„ envoy é…ç½®ï¼Œå¯ä»¥å¿«é€ŸéªŒè¯é…ç½®æ˜¯å¦æ­£ç¡®ä¸‹å‘</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  $ hgctl gateway-config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Retrieve information about Higress Gateway Configuration.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Usage:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    hgctl gateway-config </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">command</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Aliases:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    gateway-config, gc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Available Commands:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    all         Retrieves all Envoy xDS resources from the specified Higress Gateway</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bootstrap   Retrieves bootstrap Envoy xDS resources from the specified Higress Gateway</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cluster     Retrieves cluster Envoy xDS resources from the specified Higress Gateway</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    endpoint    Retrieves endpoint Envoy xDS resources from the specified Higress Gateway</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    listener    Retrieves listener Envoy xDS resources from the specified Higress Gateway</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    route       Retrieves route Envoy xDS resources from the specified Higress Gateway</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ–°å¾ç¨‹api-gateway">æ–°å¾ç¨‹ï¼šAPI Gateway<a href="#æ–°å¾ç¨‹api-gateway" class="hash-link" aria-label="æ–°å¾ç¨‹ï¼šAPI Gatewayçš„ç›´æ¥é“¾æ¥" title="æ–°å¾ç¨‹ï¼šAPI Gatewayçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ä¸Šé¢è¯´äº† Gateway APIï¼Œæ¥ç€æˆ‘ä»¬èŠèŠ API Gateway ğŸ˜„ï¼ŒAPI Gateway æœ‰ä¸¤å±‚å®šä¹‰ï¼š</p><ol><li>ç‹­ä¹‰ä¸Šï¼šæ»¡è¶³ç»Ÿä¸€æ¥å…¥ï¼Œå°†è·¯ç”±è½¬å‘åˆ°ä¸åŒæœåŠ¡çš„è¿ç»´éœ€æ±‚ï¼Œå³å¯ç§°ä¸º API Gatewayï¼›è¿™é‡Œ API çš„å®šä¹‰æ˜¯æœåŠ¡çš„è·¯ç”±</li><li>å¹¿ä¹‰ä¸Šï¼šåœ¨å®ç°æœåŠ¡è½¬å‘çš„åŸºç¡€ä¸Šï¼Œéœ€è¦è¯†åˆ«å¸¦ä¸šåŠ¡è¯­ä¹‰çš„æ¥å£ï¼Œå°†ä¸šåŠ¡èƒ½åŠ› API åŒ–ç®¡ç†ï¼Œç»Ÿä¸€å¯¹å¤–æä¾›æœåŠ¡ï¼›è¿™é‡Œ API çš„å®šä¹‰æ˜¯ä¸šåŠ¡åŠŸèƒ½æ¥å£</li></ol><p>Higress å·²ç»å®ç°äº†ç‹­ä¹‰ä¸Šçš„ API Gateway èƒ½åŠ›ï¼Œå¹¶ä¸”æ˜¯åŸºäº Gateway/Ingress API è¿™äº›é€šç”¨è·¯ç”±æ ‡å‡†æ¥å®ç°çš„ã€‚è€Œä¸æœåŠ¡è·¯ç”±æ ‡å‡†ä¸åŒï¼Œä¸šåŠ¡åŠŸèƒ½æ¥å£çš„æ ‡å‡†æ˜¯ Swagger/OAS3/RPC IDL ç­‰ï¼Œåšä¸º API Gateway éœ€è¦æä¾›ä»¥ä¸‹å…³é”®èƒ½åŠ›ï¼š</p><ol><li>æ”¯æŒé€šè¿‡ä¸Šä¼  Swagger ç­‰æ¥å£å®šä¹‰æ–‡ä»¶çš„æ–¹å¼å¯¼å…¥ API</li><li>å¯¹ API å®ç°ç²¾ç»†åŒ–ç­–ç•¥ç®¡ç†ï¼Œä¾‹å¦‚æ ¹æ®å‡ºå…¥å‚å®šä¹‰å®ç°å‚æ•°æ˜ å°„/è½¬æ¢</li><li>å®ç°ä»¥ API æ–¹å¼å¼€æ”¾èƒ½åŠ›æ—¶çš„è®¤è¯/é‰´æƒï¼Œè°ƒç”¨é‡æ§åˆ¶/å®¡è®¡èƒ½åŠ›</li></ol><p>Higress æ–°çš„å¼€æºå¾ç¨‹å°†å‘å…·å¤‡ä¸šåŠ¡ API ç®¡ç†èƒ½åŠ›çš„ API Gateway å½¢æ€è¿›å‘ã€‚åœ¨å®ç°æ–¹å¼ä¸Šï¼Œæˆ‘ä»¬å°†åŸºäº WASM æ’ä»¶å»æ‰©å±•è¿™ä¸€éƒ¨åˆ†èƒ½åŠ›ï¼Œè¿™å¯ä»¥é™ä½æˆ‘ä»¬å¯¹ä¸Šæ¸¸ Envoy ç¤¾åŒºçš„ä¾µå…¥æ€§æ”¹é€ ï¼ŒåŒæ—¶è®©å¯¹ API çš„ç²¾ç»†åŒ–ç­–ç•¥ç®¡ç†å…·å¤‡è‡ªå®šä¹‰æ‰©å±•èƒ½åŠ›ã€‚
ç›®å‰ç¤¾åŒºå·²ç»æœ‰ä¸€äº› Proposal ï¼Œæ¬¢è¿äº†è§£ï¼š</p><p><a href="https://github.com/alibaba/higress/issues/535" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/higress/issues/535</a></p><p><a href="https://github.com/alibaba/higress/issues/601" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/higress/issues/601</a></p><p>æ¬¢è¿æœ‰æ›´å¤šå°ä¼™ä¼´åŠ å…¥ï¼Œå’Œæˆ‘ä»¬ä¸€èµ·è¸ä¸Šæ–°çš„å¾ç¨‹ï¼Œæœ‰å…´è¶£çš„å°ä¼™ä¼´å¯ä»¥è”ç³»æˆ‘(å¾®ä¿¡ï¼šnomadao)ï¼ŒåŠ å…¥ API Gateway çš„ SIGï¼ˆå…´è¶£å°ç»„ï¼‰ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç¤¾åŒºè‡´è°¢">ç¤¾åŒºè‡´è°¢<a href="#ç¤¾åŒºè‡´è°¢" class="hash-link" aria-label="ç¤¾åŒºè‡´è°¢çš„ç›´æ¥é“¾æ¥" title="ç¤¾åŒºè‡´è°¢çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>é¦–å…ˆè¦æ„Ÿè°¢ Envoy å’Œ Istio ç¤¾åŒºï¼ŒHigress ç«™åœ¨è¿™ä¸¤ä¸ªè½¯ä»¶çš„è‚©è†€ä¸Šæ¼”è¿›èƒ½åŠ›ï¼Œå¾—ä»¥ï¼š</p><ol><li>é€šè¿‡ WASM æœºåˆ¶æ‰©å±• Envoy æ•°æ®é¢èƒ½åŠ›ï¼ŒæŒç»­ä¸æ–­åœ°æ‰©å¤§ç½‘å…³æ’ä»¶ç”Ÿæ€</li><li>é€šè¿‡ä¸“æ³¨åœ¨ç½‘å…³é¢†åŸŸï¼Œåœ¨ Istio ä¼˜ç§€çš„æ§åˆ¶é¢åŸºç¡€ä¸Šï¼Œè¿›ä¸€æ­¥åšæŠ½è±¡å’Œç®€åŒ–ï¼Œé™ä½ä¸Šæ‰‹å’Œè¿ç»´é—¨æ§›</li></ol><p>è¿˜è¦æ„Ÿè°¢å‚ä¸ Higress å¼€æºè´¡çŒ®çš„å¼€å‘è€…ä»¬ï¼Œè¿™é‡Œé‡ç‚¹æ„Ÿè°¢ä¸‹ä¸º 1.3 ç‰ˆæœ¬åšå‡ºæ ¸å¿ƒè´¡çŒ®çš„å¼€å‘è€…ï¼š</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="maintainerè‘£è‰ºèƒch3cho">Maintainerï¼šè‘£è‰ºèƒ(CH3CHO)<a href="#maintainerè‘£è‰ºèƒch3cho" class="hash-link" aria-label="Maintainerï¼šè‘£è‰ºèƒ(CH3CHO)çš„ç›´æ¥é“¾æ¥" title="Maintainerï¼šè‘£è‰ºèƒ(CH3CHO)çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>äººå¦‚å…¶åâ€œè‰ºå…¨â€ï¼Œåå…«èˆ¬æ­¦è‰ºæ ·æ ·ç²¾é€šï¼Œä¸ç®¡æ˜¯æ§åˆ¶å° TS å‰ç«¯ï¼ŒJava åå°ï¼Œè¿˜æ˜¯ Higress çš„ GO æ§åˆ¶é¢ï¼Œä»¥åŠ Standalone å®‰è£… Shell è„šæœ¬å’Œå„ç§ CICD æµç¨‹ï¼Œé€šé€šæ‰‹åˆ°æ“’æ¥ã€‚</p><p>åœ¨ 1.3 ç‰ˆæœ¬ä¸­ä¸»è¦è´Ÿè´£äº† Higress æ”¯æŒ Gateway API çš„èƒ½åŠ›ï¼Œä»¥åŠå®ç°äº† Higress Admin Java SDK å¯ä»¥æä¾›å¤–éƒ¨é›†æˆç”¨äºç®¡ç† Higress é…ç½®ï¼Œå¹¶æ”¹è¿›äº† Higress Console çš„å®‰å…¨æ€§å’Œæ˜“ç”¨æ€§ã€‚</p><p>é™¤äº†å¼€å‘è´¡çŒ®ä¹‹å¤–ï¼Œä»–è¿˜å¯¹ç¤¾åŒºç”¨æˆ·å……æ»¡å–„æ„å’Œçƒ­æƒ…ï¼Œæ— è®ºæ˜¯åœ¨ GitHub çš„ Issues/Discussionsï¼Œæˆ–æ˜¯ç¤¾åŒºäº¤æµå¾®ä¿¡/é’‰é’‰ç¾¤ï¼Œéšå¤„å¯è§ä»–å¸®åŠ©ç”¨æˆ·è§£å†³é—®é¢˜çš„èº«å½±ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="approverå´æ–°å†›junåˆ˜è®­ç¼xunzhuo">Approverï¼šå´æ–°å†›(Jun)ï¼Œåˆ˜è®­ç¼(Xunzhuo)<a href="#approverå´æ–°å†›junåˆ˜è®­ç¼xunzhuo" class="hash-link" aria-label="Approverï¼šå´æ–°å†›(Jun)ï¼Œåˆ˜è®­ç¼(Xunzhuo)çš„ç›´æ¥é“¾æ¥" title="Approverï¼šå´æ–°å†›(Jun)ï¼Œåˆ˜è®­ç¼(Xunzhuo)çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ä¸¤ä½éƒ½åœ¨å¤šä¸ª Higress ç‰ˆæœ¬ä¸ºç¤¾åŒºåšå‡ºäº†è´¡çŒ®ï¼ŒJun çš„ä¸»è¦è´¡çŒ®æœ‰ï¼šåœ¨å¤šæ³¨å†Œä¸­å¿ƒçš„æœåŠ¡å‘ç°æ”¯æŒï¼Œå…¨å±€é…ç½®ç®¡ç†æ¶æ„æŠ½è±¡ï¼›Xunzhuo çš„ä¸»è¦è´¡çŒ®æœ‰ï¼šHigress E2E æµ‹è¯•æµç¨‹çš„æ­å»ºï¼ŒGitHub CI æµç¨‹çš„å»ºè®¾ï¼Œhgctl çš„æ•´ä½“æ¶æ„è®¾è®¡ã€‚</p><p>åœ¨ 1.3 ç‰ˆæœ¬ä¸­äºŒä½åä½œå®Œæˆäº† hgctl çš„å¤šæ ·åŒ–èƒ½åŠ›å»ºè®¾ï¼Œå¸®åŠ© Higress çš„æ˜“ç”¨æ€§åˆä¸Šåˆ°äº†ä¸€ä¸ªæ–°çš„å°é˜¶ã€‚</p><p>ä¸¤ä½åŒå­¦ä½œä¸º Approver ç§¯æå‚ä¸ç¤¾åŒºè´¡çŒ® PR çš„ Reviewï¼Œç›®å‰åˆ†åˆ«æ˜¯ Higress Tools SIG å’Œ Higress GatewayAPI SIG çš„é¢†å¯¼è€…ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="memberéŸ¦é‘«weixinxå°å®‡è…¾fkbqf">Memberï¼šéŸ¦é‘«(WeixinX)ï¼Œå°å®‡è…¾(Fkbqf)<a href="#memberéŸ¦é‘«weixinxå°å®‡è…¾fkbqf" class="hash-link" aria-label="Memberï¼šéŸ¦é‘«(WeixinX)ï¼Œå°å®‡è…¾(Fkbqf)çš„ç›´æ¥é“¾æ¥" title="Memberï¼šéŸ¦é‘«(WeixinX)ï¼Œå°å®‡è…¾(Fkbqf)çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ä¸¤ä½éƒ½æ˜¯é€šè¿‡ä¸­ç§‘é™¢å¼€æºä¹‹å¤ï¼ˆOSPP 2023ï¼‰é¡¹ç›®å¼€å§‹å‚ä¸ Higress è´¡çŒ®ï¼ŒWeixinX æ˜¯ä¸€åç ”äºŒçš„å­¦ç”Ÿï¼ŒFkbqf æ˜¯ä¸€åå¤§ä¸‰çš„å­¦ç”Ÿã€‚</p><p>åœ¨ 1.3 ç‰ˆæœ¬ä¸­ï¼ŒWeixinX å®ç°äº† hgctl plugin å­å‘½ä»¤çš„èƒ½åŠ›ï¼ŒåŒæ—¶è´¡çŒ®äº† Go å®ç°çš„ Basic Auth æ’ä»¶ï¼Œä»¥åŠå¯¹æ ‡ Spring Cloud Gateway è¯·æ±‚å“åº”è½¬æ¢èƒ½åŠ›çš„ Transformer æ’ä»¶ï¼›Fkbqf åˆ™å®ç°äº†æ›´ä¸ºå¤æ‚çš„ OIDC æ’ä»¶ï¼Œå…·å¤‡æ¯” Envoy è‡ªå¸¦ OAuth2 Filter æ›´å¼ºå¤§çš„åŠŸèƒ½ï¼Œå¹¶ä¸”å…·å¤‡è‰¯å¥½çš„æ‰©å±•æ€§ã€‚</p><p>ä¸¤ä½åŒå­¦é™¤äº†å¼€å‘è´¡çŒ®ä»¥å¤–ï¼Œç”¨è¯¾ä½™æ—¶é—´ç§¯æå‚ä¸ Higress ç¤¾åŒºå‘¨ä¼šï¼Œä¸€èµ·æ¢è®¨å’Œå­¦ä¹ æŠ€æœ¯ï¼Œä¸äº¦ä¹ä¹ã€‚èƒ½å¤Ÿæˆä¸ºä½ ä»¬äººç”Ÿå­¦ä¸šè¿›é˜¶è·¯ä¸Šçš„é˜¶æ¢¯ï¼ŒHigress è£å¹¸ä¹‹è‡³ã€‚</p><p>Higress ç¤¾åŒºåç»­æ•´ä½“çš„ Roadmap è§„åˆ’å¦‚ä¸‹ï¼š</p><p><img loading="lazy" src="https://github.com/johnlanni/higress-group.github.io/assets/6763318/f646d9ad-d2d0-4496-b164-2884851e9e0c" alt="image" class="img_ev3q"></p><p>æ¬¢è¿æ›´å¤šå°ä¼™ä¼´ä¸€èµ·åŠ å…¥æˆ‘ä»¬ï¼š</p><p><img loading="lazy" src="https://github.com/johnlanni/higress-group.github.io/assets/6763318/d8e09712-0b3b-4c5a-b478-c84da139cf2f" alt="higress-comm" class="img_ev3q"></p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[é€šè¿‡ Higress Wasm æ’ä»¶ 3 å€æ€§èƒ½å®ç° Spring-cloud-gateway åŠŸèƒ½]]></title>
            <link>https://higress.io/zh-cn/blog/plugin-transformer</link>
            <guid>https://higress.io/zh-cn/blog/plugin-transformer</guid>
            <pubDate>Fri, 27 Oct 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[é€šè¿‡ Higress Wasm æ’ä»¶ 3 å€æ€§èƒ½å®ç° Spring-cloud-gateway åŠŸèƒ½]]></description>
            <content:encoded><![CDATA[<blockquote><p>å¯¼è¯»: æœ¬æ–‡å°†å’Œå¤§å®¶ä¸€åŒå›é¡¾ Spring Cloud Gateway æ˜¯å¦‚ä½•æ»¡è¶³ HTTP è¯·æ±‚/å“åº”è½¬æ¢éœ€æ±‚åœºæ™¯çš„ï¼Œå¹¶ä¸ºå¤§å®¶ä»‹ç»åœ¨è¿™ç§åœºæ™¯ä¸‹ä½¿ç”¨ Higress äº‘åŸç”Ÿç½‘å…³çš„è§£å†³æ–¹æ¡ˆï¼ŒåŒæ—¶è¿˜å¯¹æ¯”äº†ä¸¤è€…çš„æ€§èƒ½å·®å¼‚ã€‚</p></blockquote><h1>1. SCG ä¿®æ”¹è¯·æ±‚/å“åº”</h1><p>åœ¨ <a href="https://cloud.spring.io/spring-cloud-gateway/reference/html/" target="_blank" rel="noopener noreferrer">Spring Cloud Gateway</a> (ä»¥ä¸‹ç®€ç§°ä¸º SCG) ä¸­ï¼Œå½“æˆ‘ä»¬éœ€è¦å¯¹ HTTP è¯·æ±‚æˆ–å“åº”è¿›è¡Œä¿®æ”¹æ—¶ï¼ŒSCG æä¾›äº†è®¸å¤šå†…ç½®çš„ <a href="https://cloud.spring.io/spring-cloud-gateway/reference/html/#gatewayfilter-factories" target="_blank" rel="noopener noreferrer">GatewayFilter</a> æ¥æ»¡è¶³æˆ‘ä»¬å¯¹è¿™ç§åº”ç”¨åœºæ™¯çš„éœ€æ±‚ï¼Œä¾‹å¦‚ AddRequestHeader,AddRequestParameter, DedupeResponseHeader,MapRequestHeader, ModifyRequestBody ç­‰ã€‚</p><p>è€ƒè™‘ä»¥ä¸‹ç®€å•ç”¨ä¾‹ï¼š</p><ul><li>æ·»åŠ è¯·æ±‚å¤´éƒ¨ X-Firstï¼Œå€¼ä»è¯·æ±‚è·¯å¾„ä¸­è·å–ï¼Œä¾‹å¦‚ä» /response-headers?testKey=testValue ä¸­è·å– "response-headers"ï¼›</li><li>å°†è¯·æ±‚å¤´éƒ¨ X-First çš„å€¼æ˜ å°„ç»™ X-Secondï¼›</li><li>æ·»åŠ è¯·æ±‚æŸ¥è¯¢å‚æ•° k1=v1ï¼›</li><li>å‰”é™¤é‡å¤çš„å“åº”å¤´éƒ¨ X-Dedupeã€‚</li></ul><p>åœ¨ SCG ä¸­ä½¿ç”¨ GatewayFilter æˆ‘ä»¬å¯ä»¥è¿™æ ·é…ç½®ï¼š</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># application.yaml:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spring</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">cloud</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">gateway</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">routes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> test_route</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">uri</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> lb</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//httpbin</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">svc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">predicates</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> Path=/</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">api</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">/</span><span class="token important">**</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">filters</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> AddRequestHeader=X</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">First</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">api</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> MapRequestHeader=X</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">First</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> X</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">Second</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> AddRequestParameter=k1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> DedupeResponseHeader=X</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">Dedupe</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> RETAIN_FIRST</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç›¸ä¿¡æ‹¥æœ‰ SCG ä½¿ç”¨ç»éªŒçš„åŒå­¦å¯¹ä¸Šè¿°é…ç½®ä¸€å®šä¸é™Œç”Ÿï¼Œé‚£ä¹ˆæœ¬æ–‡å°†é‡ç‚¹ç»™å‡ºå¦ä¸€ç§èƒ½å¤Ÿ<strong>æ»¡è¶³ä¸Šè¿°éœ€æ±‚å¹¶ä¸”æ€§èƒ½æ›´åŠ ä¼˜è¶Šçš„è§£å†³æ–¹æ¡ˆâ€”â€”ä½¿ç”¨ Higress äº‘åŸç”Ÿç½‘å…³çš„ Transformer æ’ä»¶</strong>ã€‚</p><h1>2. Higress æ’ä»¶ä¸ SCG æ€§èƒ½æ¯”è¾ƒ</h1><p>æˆ‘ä»¬åœ¨åŒä¸€ååé‡æ°´å¹³ï¼ˆQPSï¼‰ä¸Šï¼Œå¼€å¯/å…³é—­ <a href="https://github.com/alibaba/higress/tree/main/plugins/wasm-go/extensions/transformer" target="_blank" rel="noopener noreferrer">Higress Transformer æ’ä»¶</a> å’Œ SCG ç›¸åº” GatewayFiltersï¼Œç»Ÿè®¡ä¸¤è€…åœ¨ CPU å’Œå†…å­˜èµ„æºä¸Šçš„å¼€é”€ã€‚</p><p>ç»è¿‡<a href="https://gist.github.com/WeixinX/c24f4ded37832dd7e753b2d27470f0fc" target="_blank" rel="noopener noreferrer">æµ‹è¯•</a>ï¼Œæˆ‘ä»¬å¾—åˆ°çš„ç»“è®ºæ˜¯ï¼š</p><ul><li>åœ¨ Higress æœªå¯ç”¨ Transformer æ’ä»¶ï¼ŒSCG æœªå¯ç”¨ GatewayFilters çš„æ¡ä»¶ä¸‹ï¼ŒSCG çš„ CPU, å†…å­˜èµ„æºå¼€é”€åˆ†åˆ«çº¦ä¸º Higressçš„ 3.30, 4.88å€ï¼›</li><li>åœ¨ Higress å¯ç”¨ Transformer æ’ä»¶ï¼ŒSCG å¯ç”¨ç›¸åº” GatewayFilters çš„æ¡ä»¶ä¸‹ï¼ŒSCG çš„ CPU,å†…å­˜èµ„æºå¼€é”€åˆ†åˆ«çº¦ä¸º Higress çš„ 2.98, 3.19å€ã€‚</li></ul><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/49450531/61d3ec0b-b708-41e6-9f28-96108b4b55c6" alt="ç›¸åŒ QPS ä¸‹çš„ CPU å¼€é”€" class="img_ev3q"></p><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/49450531/a60415d5-bed6-47cf-a976-b8e55a818e14" alt="ç›¸åŒ QPS ä¸‹çš„å†…å­˜å¼€é”€" class="img_ev3q"></p><p><strong>å¯è§ Higress Transformer ç›¸æ¯”äº SCG GatewayFilter æœ‰ç€ç›¸å½“ä¸é”™çš„æ€§èƒ½è¡¨ç°ï¼</strong></p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°†è¿›ä¸€æ­¥ä¸ºå¤§å®¶ä»‹ç» Higress äº‘åŸç”Ÿç½‘å…³ä»¥åŠä¸Šè¿°æåˆ°çš„ Higress Transformer æ’ä»¶ã€‚</p><h1>3. Higress ç®€ä»‹</h1><p><a href="https://higress.io/zh-cn/" target="_blank" rel="noopener noreferrer">Higress</a> æ˜¯åŸºäºé˜¿é‡Œå†…éƒ¨çš„ Envoy Gateway å®è·µæ²‰æ·€ã€ä»¥å¼€æº Istio + Envoy ä¸ºæ ¸å¿ƒæ„å»ºçš„ä¸‹ä¸€ä»£äº‘åŸç”Ÿç½‘å…³ï¼Œå®ç°äº†æµé‡ç½‘å…³+å¾®æœåŠ¡ç½‘å…³+å®‰å…¨ç½‘å…³ä¸‰åˆä¸€çš„é«˜é›†æˆèƒ½åŠ›ï¼Œæ·±åº¦é›†æˆ Dubboã€Nacosã€Sentinel ç­‰å¾®æœåŠ¡æŠ€æœ¯æ ˆï¼Œèƒ½å¤Ÿå¸®åŠ©ç”¨æˆ·æå¤§åœ°é™ä½ç½‘å…³çš„éƒ¨ç½²åŠè¿ç»´æˆæœ¬ä¸”èƒ½åŠ›ä¸æ‰“æŠ˜ï¼›åœ¨æ ‡å‡†ä¸Šå…¨é¢æ”¯æŒ Ingress ä¸ Gateway APIï¼Œç§¯ææ‹¥æŠ±äº‘åŸç”Ÿä¸‹çš„æ ‡å‡† API è§„èŒƒï¼›åŒæ—¶ï¼ŒHigress Controller ä¹Ÿæ”¯æŒ Nginx Ingress å¹³æ»‘è¿ç§»ï¼Œå¸®åŠ©ç”¨æˆ·é›¶æˆæœ¬å¿«é€Ÿè¿ç§»åˆ° Higressã€‚
Higress æä¾›äº†ä¸€å¥— <a href="https://github.com/alibaba/higress/tree/main/plugins" target="_blank" rel="noopener noreferrer">Wasm (WebAssembly) SDK</a>ï¼Œä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿè½»æ¾ä½¿ç”¨ C++ï¼ŒGolangï¼ŒRust å¼€å‘ Wasm æ’ä»¶å¢å¼ºç½‘å…³èƒ½åŠ›ã€‚ä¸‹é¢å°†ä¸ºå¤§å®¶ä»‹ç» Higress Transformer æ’ä»¶çš„åŸºæœ¬åŠŸèƒ½ï¼Œæœ€åç®€å•è¯´æ˜ Transformer æ’ä»¶çš„æ ¸å¿ƒä»£ç é€»è¾‘ã€‚</p><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/49450531/c93bc55d-8cca-47ac-8b63-64168626f9a9" alt="Higress Architecture" class="img_ev3q"></p><h1>4. Transformer æ’ä»¶ä»‹ç»</h1><p>Higress Transformer æ’ä»¶å¯ä»¥å¯¹è¯·æ±‚/å“åº”å¤´éƒ¨ã€è¯·æ±‚æŸ¥è¯¢å‚æ•°ã€è¯·æ±‚/å“åº”ä½“å‚æ•°è¿›è¡Œè½¬æ¢ï¼Œæ”¯æŒçš„è½¬æ¢æ“ä½œç±»å‹åŒ…æ‹¬åˆ é™¤ï¼ˆremoveï¼‰ã€é‡å‘½åï¼ˆrenameï¼‰ã€æ›´æ–°ï¼ˆreplaceï¼‰ã€æ·»åŠ ï¼ˆaddï¼‰ã€è¿½åŠ ï¼ˆappendï¼‰ã€æ˜ å°„ï¼ˆmapï¼‰å’Œå»é‡ï¼ˆdedupeï¼‰ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å¤ç°æœ€å¼€å§‹æåˆ°çš„ SCG GatewayFilter ç®€å•ç”¨ä¾‹ï¼Œæ¥æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨è¯¥æ’ä»¶ï¼ˆä»¥ä¸‹ä½¿ç”¨ Higress æ§åˆ¶å°å¯ä»¥å¾ˆæ–¹ä¾¿åœ°éƒ¨ç½²æ’ä»¶ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ <a href="https://github.com/higress-group/higress-demo/tree/main/wasm-demo/wasm-plugin-transformer" target="_blank" rel="noopener noreferrer">K8s YAML Manifests çš„æ–¹å¼</a>ï¼‰ï¼š</p><ol><li>é¦–å…ˆæ ¹æ®<a href="https://higress.io/zh-cn/docs/user/quickstart" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ–‡æ¡£</a> å¿«é€Ÿå®‰è£… Higressï¼Œç»“æœå¦‚ä¸‹ï¼š</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl -n higress-system get deploy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                         READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">higress-console              </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">            </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">           1d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">higress-console-grafana      </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">            </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">           1d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">higress-console-prometheus   </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">            </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">           1d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">higress-controller           </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">            </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">           1d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">higress-gateway              </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">            </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">           1d</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>é€šè¿‡ Higress æ§åˆ¶å°æ·»åŠ åŸŸåï¼ˆfoo.bar.comï¼‰ã€è·¯ç”±é…ç½®ï¼ˆfooï¼‰ï¼Œå°†æµé‡è½¬å‘è‡³åç«¯çš„ <a href="https://httpbin.org/" target="_blank" rel="noopener noreferrer">httpbin</a> æœåŠ¡ï¼š</li></ol><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/49450531/4a6b2ed0-f42b-4ffa-8b36-99f7444a9e5f" alt="image" class="img_ev3q"></p><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/49450531/151442fd-b43a-40e3-8fcf-7afa49f69af9" alt="image" class="img_ev3q"></p><ol start="3"><li>ä¸º foo è·¯ç”±æ·»åŠ  Transformer æ’ä»¶ï¼ˆå½“å‰æœªæ¨é€æ’ä»¶è‡³å®˜æ–¹é•œåƒä»“åº“ï¼Œå¯ä»¥å…ˆä½¿ç”¨ docker.io/weixinx/transformer:v0.1.0ï¼Œæˆ–åˆ°ä»£ç ä»“åº“è‡ªè¡Œæ„å»ºï¼‰ï¼š</li></ol><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/49450531/fb522095-ee88-4f77-89c2-8a8547a3a96f" alt="image" class="img_ev3q"></p><p>æ³¨ï¼šä¸ºäº†èƒ½å¤ŸåŒæ—¶å®Œæˆè¯·æ±‚å’Œå“åº”è½¬æ¢çš„éœ€æ±‚ï¼Œæˆ‘ä»¬éœ€è¦ä¸º foo è·¯ç”±å†æ·»åŠ ä¸€ä¸ª Transformer æ’ä»¶ï¼Œå‘½åä¸º transformer-respï¼Œç”¨äºå¤„ç†å“åº”æ–¹å‘ã€‚</p><ol start="4"><li>æ·»åŠ  Transformer é…ç½®å¹¶å¼€å¯è¯¥æ’ä»¶ï¼š</li></ol><ul><li>æ·»åŠ è¯·æ±‚å¤´éƒ¨ X-Firstï¼Œå€¼ä»è¯·æ±‚è·¯å¾„ä¸­è·å–ï¼Œä¾‹å¦‚ä» /response-headers?testKey=testValue ä¸­è·å– "response-headers"ï¼›</li><li>å°†è¯·æ±‚å¤´éƒ¨ X-First çš„å€¼æ˜ å°„ç»™ X-Secondï¼›</li><li>æ·»åŠ è¯·æ±‚æŸ¥è¯¢å‚æ•° k1=v1ï¼›</li><li>å‰”é™¤é‡å¤çš„å“åº”å¤´éƒ¨ X-Dedupeã€‚</li></ul><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># transformer:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> request  </span><span class="token comment" style="color:#999988;font-style:italic"># æŒ‡å®š Transformer ç±»å‹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">rules</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic"># æŒ‡å®šè½¬æ¢è§„åˆ™</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">operate</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> add </span><span class="token comment" style="color:#999988;font-style:italic"># æŒ‡å®šè½¬æ¢æ“ä½œç±»å‹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">headers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic"># æŒ‡å®šå¤´éƒ¨è½¬æ¢è§„åˆ™</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> X</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">First</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $1  </span><span class="token comment" style="color:#999988;font-style:italic"># æ­£åˆ™è¡¨è¾¾å¼æ•è·ç»„ $1ï¼Œæ”¯æŒ RE2 è¯­æ³•</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">path_pattern</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ^\/(\w+)</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">\</span><span class="token punctuation" style="color:#393A34">?</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">{</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">.</span><span class="token important">*$</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">querys</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># æŒ‡å®šæŸ¥è¯¢å‚æ•°è½¬æ¢è§„åˆ™</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> k1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">operate</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> map</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">headers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> X</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">First</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> X</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">Second</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># transformer-resp:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> response</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">rules</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">operate</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> dedupe</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">headers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> X</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">Dedupe</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> RETAIN_FIRST</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="5"><li>å‘é€è¯·æ±‚è¿›è¡Œæµ‹è¯•ï¼š</li></ol><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># éªŒè¯è¯·æ±‚æ–¹å‘è½¬æ¢</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">$ curl -v -H "host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> foo.bar.com" "127.0.0.1/get"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt; HTTP/1.1 200 OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">"args"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># æ·»åŠ äº†æŸ¥è¯¢å‚æ•° k1=v1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">"k1"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"v1"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">"headers"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">"X-First"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"get"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># æ·»åŠ äº†è¯·æ±‚å¤´éƒ¨ X-Firstï¼Œå€¼ "get" æ¥è‡ªè¯·æ±‚è·¯å¾„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">"X-Second"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"get"</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># æ˜ å°„äº†è¯·æ±‚å¤´éƒ¨ X-Second</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># æ·»åŠ äº†æŸ¥è¯¢å‚æ•° k1=v1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">"url"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"http://foo.bar.com/get?k1=v1"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># éªŒè¯å“åº”æ–¹å‘è½¬æ¢</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">$ curl -v -H "host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> foo.bar.com" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">"127.0.0.1/response</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">headers</span><span class="token punctuation" style="color:#393A34">?</span><span class="token plain">X</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">Dedupe=1</span><span class="token important">&amp;X-Dedupe=2&amp;X-Dedupe=3"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt; HTTP/1.1 200 OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">&lt; x-dedupe</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># ä¿ç•™äº†å“åº”å¤´éƒ¨ X-Dedupe çš„ç¬¬ä¸€ä¸ªå€¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># é€šè¿‡æŸ¥è¯¢å‚æ•°ä¼ ç»™ httpbin çš„è‡ªå®šä¹‰å“åº”å¤´éƒ¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">"X-Dedupe"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">"1"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">"2"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">"3"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>â—ï¸éœ€è¦æ³¨æ„çš„æ˜¯ï¼š</p><ul><li>ä¸ä¸Šè¿°ä¾‹å­ç›¸åŒï¼Œè‹¥æœ‰åŒæ—¶å¤„ç†è¯·æ±‚å’Œå“åº”è½¬æ¢çš„éœ€æ±‚ï¼Œåˆ™éœ€è¦ä¸ºç›¸åº”è·¯ç”±æ·»åŠ ä¸¤ä¸ª Transformer æ’ä»¶ï¼Œåˆ†åˆ«å¤„ç†è¯·æ±‚æ–¹å‘å’Œå“åº”æ–¹å‘ï¼ˆæ­£åœ¨ä¼˜åŒ–ï¼‰ï¼›</li><li>è¯·æ±‚ä½“æ”¯æŒçš„ Content-Type æœ‰ï¼šapplication/json, application/x-www-form-urlencoded, multipart/form-dataï¼›è€Œå“åº”ä½“ä»…æ”¯æŒ application/jsonï¼›</li><li>æ›´å¤šè¯´æ˜è¯¦è§<a href="https://github.com/alibaba/higress/tree/main/plugins/wasm-go/extensions/transformer" target="_blank" rel="noopener noreferrer">æ’ä»¶æ–‡æ¡£</a>ã€‚</li></ul><h1>5. Transformer é€»è¾‘</h1><p>æœ¬èŠ‚å°†ç®€å•è¯´æ˜ Higress Transformer æ’ä»¶çš„æ ¸å¿ƒä»£ç é€»è¾‘ï¼Œå¸Œæœ›å¯ä»¥ä¸ºæœ‰å…´è¶£ä¼˜åŒ–è¯¥æ’ä»¶æˆ–è¿›è¡ŒäºŒæ¬¡å¼€å‘çš„åŒå­¦æä¾›ä¸€äº›å¸®åŠ©ã€‚</p><p>é¦–å…ˆè¯¥æ’ä»¶ä»£ç ä½äºHigress ä»“åº“çš„ plugins/wasm-go/extensions/transformer ç›®å½•ä¸‹ï¼Œä½¿ç”¨ Higress æä¾›çš„ <a href="https://github.com/alibaba/higress/tree/main/plugins" target="_blank" rel="noopener noreferrer">Wasm SDK</a> è¿›è¡Œå¼€å‘ï¼ˆå…³äºå¦‚ä½•å¼€å‘ Wasm æ’ä»¶è¯¦è§<a href="https://higress.io/zh-cn/docs/user/wasm-go" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ–‡æ¡£</a>ï¼‰ã€‚</p><p>æ’ä»¶çš„é…ç½®æ¨¡å‹ TransformerConfigï¼š</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># æ¨¡å‹ä»¥æ’ä»¶é…ç½®çš„å½¢å¼æš´éœ²ç»™ç”¨æˆ·</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> TransformerConfig </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  typ   </span><span class="token builtin">string</span><span class="token plain">          # Transformer ç±»å‹ï¼Œ</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">request</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> response</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  rules </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">TransformRule # è½¬æ¢è§„åˆ™</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  trans Transformer # Transformer å®ä¾‹ï¼Œä¸å¯¹ç”¨æˆ·æš´éœ²é…ç½®ï¼Œç”¨äºå®é™…çš„è½¬æ¢æ“ä½œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> TransformRule </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  operate </span><span class="token builtin">string</span><span class="token plain">   # è½¬æ¢æ“ä½œç±»å‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  headers </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">Param  # header å‚æ•° </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  querys  </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">Param  # query å‚æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  body    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">Param  # body å‚æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> Param </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  key         </span><span class="token builtin">string</span><span class="token plain"> # è¡¨ç¤ºå­—æ®µçš„ key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value       </span><span class="token builtin">string</span><span class="token plain"> # è¡¨ç¤ºå­—æ®µçš„ value æˆ– key </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">map</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> æˆ– strategy </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dedupe</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  valueType   </span><span class="token builtin">string</span><span class="token plain"> # ä¸º application</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">json body æŒ‡å®š value çš„æ•°æ®ç±»å‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  hostPattern </span><span class="token builtin">string</span><span class="token plain"> # host æ­£åˆ™åŒ¹é…æ¨¡å¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  pathPattern </span><span class="token builtin">string</span><span class="token plain"> # path æ­£åˆ™åŒ¹é…æ¨¡å¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å…¶ä¸­ Transformer ä½œä¸ºæ¥å£åˆ†åˆ«æœ‰è¯·æ±‚å’Œå“åº”ä¸¤ä¸ªå®ç°ï¼ˆrequestTransformer, responseTransformerï¼‰ï¼Œä¸»è¦å®ç°äº† 3 ä¸ªæ¥å£æ–¹æ³• TransformHeaders,TransformerQuerys å’Œ TransformBodyï¼š</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> Transformer </span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token function" style="color:#d73a49">TransformHeaders</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">host</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> path </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> hs </span><span class="token keyword" style="color:#00009f">map</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token function" style="color:#d73a49">TransformQuerys</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">host</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> path </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> qs </span><span class="token keyword" style="color:#00009f">map</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token function" style="color:#d73a49">TransformBody</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">host</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> path </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> body </span><span class="token keyword" style="color:#00009f">interface</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token operator" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">_</span><span class="token plain"> Transformer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">requestTransformer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">_</span><span class="token plain"> Transformer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">responseTransformer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç”±äºå¤´éƒ¨ï¼ˆHeadersï¼‰å’ŒæŸ¥è¯¢å‚æ•°ï¼ˆQuerysï¼‰éƒ½æ˜¯ä»¥ key-value çš„å½¢å¼å­˜åœ¨ï¼Œå› æ­¤é€šè¿‡ kvHandler å¯¹ä¸¤è€…é‡‡ç”¨ç»Ÿä¸€çš„å¤„ç†é€»è¾‘ï¼›è€Œ Body ç”±äºè¯·æ±‚ã€å“åº”æ”¯æŒä¸åŒçš„ Content-Typeï¼Œå› æ­¤åˆ†åˆ«é€šè¿‡ requestBodyHandler (kvHandler, jsonHandler ç»„åˆ)å’Œ responseBodyHandler (jsonHandler) è¿›è¡Œå¤„ç†ã€‚ç»¼ä¸Šï¼Œåœ¨ä¿®æ”¹è¯¥æ’ä»¶é€»è¾‘æ—¶ï¼Œä¸»è¦å¯¹ kvHandler å’Œ jsonHandler è¿›è¡Œä¿®æ”¹å³å¯ï¼Œå…¶ä¸­ jsonHandler ä¾èµ– <a href="https://github.com/tidwall/gjson" target="_blank" rel="noopener noreferrer">GJSON</a> å’Œ <a href="https://github.com/tidwall/sjson" target="_blank" rel="noopener noreferrer">SJSON</a> å·¥å…·åº“ã€‚</p><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/49450531/fc08ff0c-12ec-4dfd-b946-4e83f8431174" alt="image" class="img_ev3q"></p><p>ç›®å‰ handler ä¸­çš„è½¬æ¢é¡ºåºæ˜¯è¢«ç¡¬ç¼–ç çš„ï¼ˆremove -&gt; rename -&gt; replace -&gt; add -&gt; append -&gt; map -&gt; dedupeï¼‰ï¼Œæˆ‘ä»¬å¯¹æ­¤æœ‰ä¼˜åŒ–çš„æ‰“ç®—ï¼Œä¹Ÿæ¬¢è¿æ„Ÿå…´è¶£çš„åŒå­¦å‚ä¸è¿›æ¥ ~</p><h1>6. æ€»ç»“</h1><p>æœ¬æ–‡å¸¦å¤§å®¶äº†è§£äº† Higress Transformer æ’ä»¶ï¼Œå¹¶ä¸ Spring Cloud Gateway è¿›è¡Œäº†æ€§èƒ½æ¯”è¾ƒï¼Œåœ¨æ–‡ç« çš„æœ€åè¿˜è¯´æ˜äº†è¯¥æ’ä»¶çš„æ ¸å¿ƒä»£ç é€»è¾‘ï¼Œå¸Œæœ›èƒ½å¤Ÿä¸ºå¤§å®¶ä» Spring Cloud Gateway è¿ç§»è‡³ Higress æä¾›å¸®åŠ©ï¼</p><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/49450531/c2a47afd-5f29-4cfc-b5c5-571d2265ec19" alt="image" class="img_ev3q"></p><p>å¦‚æœæ‚¨è§‰å¾— Higress å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œæ¬¢è¿å‰å¾€ <a href="https://github.com/alibaba/higress" target="_blank" rel="noopener noreferrer">Github: Higress</a> ä¸ºæˆ‘ä»¬ starâ­ï¸ ä¸€ä¸‹ï¼æœŸå¾…ä¸æ‚¨åœ¨ Higress ç¤¾åŒºç›¸é‡ ~</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Higressåœ¨2023 KubeCon Chinaçš„åˆ†äº«]]></title>
            <link>https://higress.io/zh-cn/blog/2023-kubecon</link>
            <guid>https://higress.io/zh-cn/blog/2023-kubecon</guid>
            <pubDate>Thu, 28 Sep 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[çœ‹K8sèµ„æ·±è¿ç»´å¦‚ä½•é€‰å‹Ingressç½‘å…³]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="åˆ†äº«ç®€ä»‹">åˆ†äº«ç®€ä»‹<a href="#åˆ†äº«ç®€ä»‹" class="hash-link" aria-label="åˆ†äº«ç®€ä»‹çš„ç›´æ¥é“¾æ¥" title="åˆ†äº«ç®€ä»‹çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>åœ¨9æœˆ26æ—¥çš„2023 KubeConé˜¿é‡Œäº‘äº‘åŸç”Ÿå¼€æ”¾æ—¥ï¼ŒHigressçš„åˆ†äº«å†…å®¹åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š</p><p>Part 1. ç”±ä¸Šæµ·è´¹èŠ®ç½‘ç»œç§‘æŠ€ç³»ç»Ÿè¿ç»´å‰¯æ€»ç›‘æˆ´å–œå†›ï¼Œå¸¦æ¥è´¹èŠ®åœ¨é€‰å‹ä¼ä¸šç‰ˆHigressä½œä¸ºK8s Ingressæ›¿ä»£Nginx Ingressçš„ä»‹ç»</p><p>Part 2. ç”±Higresså¼€æºç¤¾åŒºè´Ÿè´£äººæ¾„æ½­ï¼Œå¸¦æ¥Higresså¼€æºé¡¹ç›®çš„ä»‹ç»</p><p>å¼€æºç‰ˆå’Œä¼ä¸šç‰ˆæ˜¯Higressçš„ä¸€ä½“ä¸¤é¢ï¼Œé€šè¿‡æœ¬æ¬¡åˆ†äº«ï¼Œç›¸ä¿¡å¤§å®¶ä¼šå¯¹Higressæœ‰æ›´å…¨é¢çš„äº†è§£ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="part-1-è´¹èŠ®äº’åŠ¨ä½¿ç”¨higressä½œä¸ºkubernetes-ingresså®ç°ç¨³å®šæ€§å’Œæ€§èƒ½æå‡">Part 1. è´¹èŠ®äº’åŠ¨ä½¿ç”¨Higressä½œä¸ºKubernetes Ingresså®ç°ç¨³å®šæ€§å’Œæ€§èƒ½æå‡<a href="#part-1-è´¹èŠ®äº’åŠ¨ä½¿ç”¨higressä½œä¸ºkubernetes-ingresså®ç°ç¨³å®šæ€§å’Œæ€§èƒ½æå‡" class="hash-link" aria-label="Part 1. è´¹èŠ®äº’åŠ¨ä½¿ç”¨Higressä½œä¸ºKubernetes Ingresså®ç°ç¨³å®šæ€§å’Œæ€§èƒ½æå‡çš„ç›´æ¥é“¾æ¥" title="Part 1. è´¹èŠ®äº’åŠ¨ä½¿ç”¨Higressä½œä¸ºKubernetes Ingresså®ç°ç¨³å®šæ€§å’Œæ€§èƒ½æå‡çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>è´¹èŠ®é€šè¿‡Higressè§£å†³äº†åŸæœ¬Nginx Ingressç½‘å…³çš„è¯¸å¤šç—›ç‚¹ï¼Œæ€§èƒ½æå‡90%ï¼Œå“åº”æ—¶é—´ä¸‹é™50%ï¼Œå¹¶å¤§å¹…æå‡ä¸šåŠ¡å…¥å£çš„ç¨³å®šåŠå®‰å…¨æ€§ï¼Œé«˜æ•ˆæ”¯æ’‘æ¯æ—¥1äº¿+ç²‰ä¸äº¤äº’ï¼Œ 4ä¸‡+çº¿ä¸‹é—¨åº—ã€æ¯æœˆ3000ä¸‡+ç¬”çš„ç§»åŠ¨æ”¯ä»˜éœ€æ±‚ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="è´¹èŠ®ä¸šåŠ¡åœºæ™¯">è´¹èŠ®ä¸šåŠ¡åœºæ™¯<a href="#è´¹èŠ®ä¸šåŠ¡åœºæ™¯" class="hash-link" aria-label="è´¹èŠ®ä¸šåŠ¡åœºæ™¯çš„ç›´æ¥é“¾æ¥" title="è´¹èŠ®ä¸šåŠ¡åœºæ™¯çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/0d4f761d-1471-49b6-a03c-38b11304262d" alt="image" class="img_ev3q">
<img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/dba8ae2a-93c8-4368-af3d-739f97090d39" alt="image" class="img_ev3q"></p><p>è´¹èŠ®ä¸“æ³¨äºç§»åŠ¨è¥é”€ã€O2Oã€ç¤¾äº¤åª’ä½“ã€ç§»åŠ¨ç”µå•†é¢†åŸŸçš„åˆ›æ–°ä¸ç ”å‘ã€‚è´¹èŠ®äº’åŠ¨è‡ªä¸»ç ”å‘çš„è‡ªåª’ä½“å¹³å°è¿ç»´è¶…è¿‡2äº¿ç²‰ä¸ ï¼› æœ‰è¶…è¿‡4ä¸‡å®¶çº¿ä¸‹é—¨åº—é‡‡ç”¨è´¹èŠ®O2Oè§£å†³æ–¹æ¡ˆã€‚è´¹èŠ®çš„ä¸»è¦å®¢æˆ·åŒ…æ‹¬ä¼˜è¡£åº“ï¼Œå¿…èƒœå®¢ï¼Œè‚¯å¾·åŸºï¼Œæ˜Ÿå·´å…‹ï¼ŒSPGï¼Œæ¬§è±é›…ï¼ŒInnisfreeï¼Œè¿ªå¡ä¾¬ï¼Œé¡¶æ–°é›†å›¢ç­‰ã€‚</p><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/61791bae-b40c-4b90-bc4d-c23bc052911c" alt="image" class="img_ev3q"></p><p>è´¹èŠ®å†…éƒ¨ä¸šåŠ¡ç³»ç»Ÿçš„æ—¥å‡å‘å¸ƒæ¬¡æ•°è¾¾åˆ°100æ¬¡ä¹‹å¤šï¼Œä¼šæ¶‰åŠåˆ°400å¤šæ¡Ingressè·¯ç”±è§„åˆ™çš„æ—¥å¸¸æ›´æ–°ï¼Œä¸”ç½‘å…³æ¯å¤©éœ€è¦æ‰¿è½½çš„PVæµé‡è¾¾åˆ°äº†1ä¸ªäº¿ã€‚Ingressç½‘å…³çš„æ€§èƒ½å’Œç¨³å®šæ€§è‡³å…³é‡è¦ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="nginx-ingress-ç—›ç‚¹">Nginx Ingress ç—›ç‚¹<a href="#nginx-ingress-ç—›ç‚¹" class="hash-link" aria-label="Nginx Ingress ç—›ç‚¹çš„ç›´æ¥é“¾æ¥" title="Nginx Ingress ç—›ç‚¹çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/1d8a178e-05de-4114-96b3-7d4e11240374" alt="image" class="img_ev3q"></p><p>é…ç½®å˜æ›´é¢‘ç¹ï¼Œå¯¼è‡´Nginxè¿›ç¨‹é¢‘ç¹é‡å¯ï¼Œå¤§é‡è¿æ¥ç¬æ—¶æ–­å¼€åå¹¶å‘é‡è¿ä¼šå¯¼è‡´åç«¯æœåŠ¡äº§ç”Ÿå‹åŠ›ï¼Œä¸¥é‡æ—¶é€ æˆå¤§é‡è¯·æ±‚å¤±è´¥ã€‚</p><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/52e6ff5a-7374-4fe9-b001-ff6d3ac97744" alt="image" class="img_ev3q"></p><p>Nginx Ingressçš„Controllerç»„ä»¶å’ŒNginxç»„ä»¶è¿è¡Œåœ¨åŒä¸€ä¸ªPODä¸­ï¼Œæ§åˆ¶é¢èµ„æºä½¿ç”¨è¿˜ä¼šå½±å“åˆ°æ•°æ®é¢çš„æ€§èƒ½ã€‚</p><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/b09a3db4-465b-46b8-8e35-bd274388f143" alt="image" class="img_ev3q"></p><p>Nginx Ingressè¿˜ç¼ºå°‘é¢å‘æœåŠ¡é™æµçš„èƒ½åŠ›ï¼Œåªèƒ½å®ç°é¢å‘å•ä¸ªæ¥æºIPé™æµï¼Œå¯¹äºåç«¯æœåŠ¡ä¿æŠ¤æ¥è¯´æ²¡æœ‰æ„ä¹‰ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="higress-æ”¶ç›Š">Higress æ”¶ç›Š<a href="#higress-æ”¶ç›Š" class="hash-link" aria-label="Higress æ”¶ç›Šçš„ç›´æ¥é“¾æ¥" title="Higress æ”¶ç›Šçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/48388f01-7796-4f7d-b7d1-fb7bd1522925" alt="image" class="img_ev3q"></p><p>Higressä¼ä¸šç‰ˆé‡‡ç”¨äº†å…¨æ‰˜ç®¡æ¶æ„ï¼Œä¸ä¸šåŠ¡é›†ç¾¤åˆ†ç¦»ï¼Œæ— éœ€è‡ªå·±è¿ç»´ï¼Œç¨³å®šæ€§æœ‰æ›´å¥½ä¿éšœã€‚</p><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/5e689364-fb08-4ec1-9d71-49539da561b8" alt="image" class="img_ev3q"></p><p>é…ç½®æ›´æ–°éƒ½æ˜¯åŠ¨æ€åŠ è½½ï¼Œæ— éœ€é‡å¯æ•°æ®é¢ï¼Œä¿éšœä¸šåŠ¡å¹³ç¨³å‘å¸ƒï¼Œwebsocketè¿æ¥çš„ä¸šåŠ¡æ”¶ç›Šä¹Ÿç‰¹åˆ«æ˜æ˜¾ï¼Œé•¿è¿æ¥å¯ä»¥å§‹ç»ˆä¿æŒä¸ä¼šæ–­å¼€ã€‚</p><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/29ae8168-e84d-41fb-bb4f-a258c4200a7e" alt="image" class="img_ev3q"></p><p>å¼€å¯äº†TLSç¡¬ä»¶åŠ é€Ÿï¼ŒTLSæ¡æ‰‹æ—¶å»¶ç›´æ¥å‡åŠï¼ŒQPSååæå‡86%ã€‚</p><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/4ace2996-5b5a-4331-90cb-8448c65042d5" alt="image" class="img_ev3q"></p><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/8664f436-c058-42bc-82c9-7355d24592ad" alt="image" class="img_ev3q"></p><p>å¼€å¯WAFå¯¹ååå½±å“è¿˜æ˜¯æ¯”è¾ƒæ˜æ˜¾çš„ï¼Œä¸‹é™äº†30%ï¼Œä½†ç›¸æ¯”Ingress Nginxç›´æ¥ä¸‹é™äº†90%ï¼Œæ€§èƒ½æå‡è¿˜æ˜¯å¾ˆæ˜æ˜¾ï¼Œè€Œä¸”æ›´å¤§çš„ä¼˜åŠ¿æ˜¯åŸºäºé˜¿é‡Œäº‘WAFäº§å“ï¼Œé˜²æŠ¤è§„åˆ™æ˜¯å®æ—¶æ›´æ–°çš„ï¼Œè€ŒéModsecurityçš„é™æ€è§„åˆ™ã€‚</p><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/10fca63d-a0bb-45a1-82ee-de115bf577e7" alt="image" class="img_ev3q"></p><p>Higressé›†æˆäº†Sentinelé™æµçš„èƒ½åŠ›ï¼Œå¯ä»¥ç›´æ¥é¢å‘æœåŠ¡çš„QPSååä¸Šé™/å¹¶å‘æ•°ä¸Šçº¿è¿›è¡Œé™æµï¼Œå¹¶ä¸”ç›¸æ¯”Nginxåªèƒ½é…ç½®å•æœºé™åˆ¶é˜ˆå€¼ï¼Œéœ€è¦å…³æ³¨ç½‘å…³èŠ‚ç‚¹æ•°é‡ï¼ŒHigressè¿™é‡Œçš„é…ç½®æ˜¯å…¨å±€é˜ˆå€¼ï¼Œä¸å—ç½‘å…³æ‰©ç¼©å®¹å½±å“ã€‚</p><p>è§¦å‘é™æµåå¯ä»¥è‡ªå®šä¹‰å“åº”å†…å®¹æˆ–è€…é‡å®šå‘åˆ°æŒ‡å®šåœ°å€ï¼Œéƒ½æ˜¯å¾ˆå®ç”¨çš„èƒ½åŠ›ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="part-2-higresså¼€æºä¹‹è·¯æ‰æ ¹å¼€æºç”Ÿæ€å®šä¹‰äº‘åŸç”Ÿç½‘å…³">Part 2. Higresså¼€æºä¹‹è·¯ï¼šæ‰æ ¹å¼€æºç”Ÿæ€ï¼Œå®šä¹‰äº‘åŸç”Ÿç½‘å…³<a href="#part-2-higresså¼€æºä¹‹è·¯æ‰æ ¹å¼€æºç”Ÿæ€å®šä¹‰äº‘åŸç”Ÿç½‘å…³" class="hash-link" aria-label="Part 2. Higresså¼€æºä¹‹è·¯ï¼šæ‰æ ¹å¼€æºç”Ÿæ€ï¼Œå®šä¹‰äº‘åŸç”Ÿç½‘å…³çš„ç›´æ¥é“¾æ¥" title="Part 2. Higresså¼€æºä¹‹è·¯ï¼šæ‰æ ¹å¼€æºç”Ÿæ€ï¼Œå®šä¹‰äº‘åŸç”Ÿç½‘å…³çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>å¼€æºæ˜¯äº‘åŸç”Ÿç”Ÿæ€çš„åŸºçŸ³ï¼ŒHigressä¹Ÿæ˜¯å€ŸåŠ©äº†å¼€æºç”Ÿæ€çš„åŠ›é‡ï¼Œç«™åœ¨Istio/Envoyçš„è‚©è†€ä¸Šå¼€å‘å‡ºäº†æ›´å¤šå®ç”¨çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬é€‰æ‹©å°†MSE Higressï¼ˆä¼ä¸šç‰ˆï¼‰ä¸­çš„æ ¸å¿ƒèƒ½åŠ›å…¨éƒ¨å¼€æºï¼Œå†³å¿ƒæ‰æ ¹åœ¨å¼€æºç”Ÿæ€ä¸­ï¼Œè®©Higresså˜å¾—æ›´æ™®æƒ ï¼Œæœ‰æ›´å¤šäººä½¿ç”¨ï¼Œä»è€Œè®©Higressæ›´åŠ å¼ºå¤§ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç®€ä»‹">ç®€ä»‹<a href="#ç®€ä»‹" class="hash-link" aria-label="ç®€ä»‹çš„ç›´æ¥é“¾æ¥" title="ç®€ä»‹çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/438dcf9a-96fa-4d0d-89ed-e810746c61ab" alt="image" class="img_ev3q"></p><p>Higresså®é™…ä¸Šæœ‰ä¸‰æ¬¡è¯ç”Ÿè¿‡ç¨‹ï¼šç¬¬ä¸€æ¬¡æ˜¯åœ¨é˜¿é‡Œé›†å›¢å†…éƒ¨ä¸šåŠ¡éœ€æ±‚é©±åŠ¨ä¸‹è¯ç”Ÿï¼›ç¬¬äºŒæ¬¡æ˜¯éšç€å†…éƒ¨ä½¿ç”¨é€æ¸æˆç†Ÿæ²‰æ·€ä¸ºé˜¿é‡Œäº‘ä¸Šçš„MSE Higressäº‘åŸç”Ÿç½‘å…³äº§å“ï¼›ç¬¬ä¸‰æ¬¡æ˜¯éšç€äº‘äº§å“æˆç†Ÿï¼Œ2022å¹´11æœˆåœ¨äº‘æ –å¤§ä¼šä¸Šæ­£å¼å®£å¸ƒå¼€æºã€‚2023å¹´5æœˆReleaseäº†ç¬¬ä¸€ä¸ªGAç‰ˆæœ¬ï¼Œæ„å‘³ç€å¼€æºç‰ˆæœ¬ä¹Ÿèµ°å…¥æˆç†Ÿé˜¶æ®µã€‚</p><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/783b96cc-b628-4784-a6cf-c2cf10e11f3f" alt="image" class="img_ev3q"></p><p>ä»é…ç½®æµè½¬çš„è¿‡ç¨‹æ¥çœ‹Higressçš„æ¶æ„ï¼š</p><ol><li>é¦–å…ˆç”¨æˆ·å¯ä»¥é€šè¿‡UIæ§åˆ¶å°/å‘½ä»¤è¡Œå·¥å…·å¤šç§æ–¹å¼æ¥ä¸‹å‘é…ç½®</li><li>åˆ°äº†æ§åˆ¶é¢ï¼Œå¦‚æœæ˜¯K8sä¸‹ï¼Œé…ç½®æŒä¹…åŒ–åŸºäºCRDï¼Œå¦‚æœä¸æ˜¯K8sï¼Œé…ç½®æŒä¹…åŒ–åŸºäºNacos</li><li>é™¤äº†ç”¨æˆ·ä¸‹å‘çš„è·¯ç”±é…ç½®ï¼Œå®ç°æœåŠ¡è·¯ç”±è¿˜éœ€è¦çš„æœåŠ¡IPåœ°å€ä¿¡æ¯ï¼Œæ”¯æŒä»K8s service/Nacos/Eureka/Consul/ZooKeeper/DNS/å›ºå®šIPç­‰å¤šç§æ–¹å¼è·å–</li><li>Higressæ•°æ®é¢æ˜¯åŸºäºEnvoyï¼Œé…ç½®é€šè¿‡xDSä¸‹å‘ï¼Œè¿™é‡Œå¤ç”¨äº†Istioçš„é…ç½®ä¸‹å‘æœºåˆ¶ï¼Œå› ä¸ºæ˜¯å†…ç½®äº†è¿™ä¸ªæœºåˆ¶ï¼Œæ— éœ€å•ç‹¬éƒ¨ç½²Istio</li><li>æœ€ç»ˆé…ç½®ä¸‹å‘åˆ°æ•°æ®é¢ç”Ÿæ•ˆï¼ŒHigressåŸºäºEnvoyæ‰©å±•äº†å¾ˆå¤šèƒ½åŠ›ï¼Œè€Œä¸”åŸºäºWasmæ‰©å±•æœºåˆ¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿å¼€å‘è‡ªå®šä¹‰æ’ä»¶ï¼Œä¸”å…·å¤‡å…¨å±€/åŸŸå/è·¯ç”±ç»´åº¦çš„ç”Ÿæ•ˆç²’åº¦</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ ¸å¿ƒèƒ½åŠ›">æ ¸å¿ƒèƒ½åŠ›<a href="#æ ¸å¿ƒèƒ½åŠ›" class="hash-link" aria-label="æ ¸å¿ƒèƒ½åŠ›çš„ç›´æ¥é“¾æ¥" title="æ ¸å¿ƒèƒ½åŠ›çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/be02b599-f82f-42be-a8e5-82f69b9196b8" alt="image" class="img_ev3q">
<img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/4dc3cc2b-d6fe-4717-a53a-3e75c5f826ca" alt="image" class="img_ev3q"></p><p>é«˜é›†æˆï¼šåŒæ—¶é›†æˆç»å…¸å¾®æœåŠ¡ç”Ÿæ€å’ŒK8så¼€æºç”Ÿæ€èƒ½åŠ›ï¼Œå¯ä»¥å¸®åŠ©ä¸šåŠ¡ä»ä¼ ç»Ÿæ¶æ„è¿ç§»åˆ°äº‘åŸç”Ÿæ¶æ„ï¼ŒåŸºäºæµé‡ç°åº¦ç­‰èƒ½åŠ›ï¼Œå¯ä»¥ä¿éšœè¿™ä¸€è¿‡ç¨‹çš„å¹³æ»‘</p><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/87f8eacd-39b6-4a26-a7a1-b78f6a5abb4f" alt="image" class="img_ev3q"></p><p>æ ‡å‡†åŒ–ï¼šå…¼å®¹Nginx Ingresså¸¸ç”¨æ³¨è§£ï¼ŒåŸºäºç»Ÿä¸€çš„Ingressæ ‡å‡†å¯ä»¥è½»æ¾å®ç°Nginxåˆ°Higressè¿™ä¸€æŠ€æœ¯é¸¿æ²Ÿçš„è·¨è¶Šï¼ŒHigressä¹Ÿå·²ç»æ”¯æŒGateway APIï¼Œè·¯ç”±æ ‡å‡†æœ¬èº«ä¹Ÿèƒ½å€ŸåŠ©Higresså®ç°å¹³æ»‘å‡çº§</p><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/33776d12-baf3-4d09-ae42-a5cadb655bef" alt="image" class="img_ev3q"></p><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/b9e4a718-c985-4ac4-9b7b-46a427ccb987" alt="image" class="img_ev3q"></p><p>æ˜“æ‰©å±•ï¼šå€ŸåŠ©Higressçš„Wasm SDKï¼Œå¾ˆå°‘çš„ä¸šåŠ¡ä»£ç å°±å¯ä»¥å¼€å‘ä¸€ä¸ªçµæ´»çš„æ’ä»¶ï¼›å¹¶ä¸”æ”¯æŒåŸºäºOCIé•œåƒæ ‡å‡†åˆ†å‘ï¼Œå¯ä»¥è®©æ’ä»¶çš„æ–‡æ¡£ï¼Œé…ç½®çº¦æŸç­‰è·Ÿéšæ’ä»¶æœ¬èº«ä¸€èµ·è¢«åˆ†å‘å’Œå…±äº«ï¼›å’Œä¼ ç»ŸNginxç±»ç½‘å…³æœ€å¤§çš„å·®åˆ«ï¼Œåœ¨äºæ’ä»¶çš„åˆ†å‘é›†æˆé˜¶æ®µï¼Œå®ç°äº†æ’ä»¶ç‰ˆæœ¬æ›´æ–°è·Ÿç½‘å…³è‡ªèº«ç‰ˆæœ¬æ›´æ–°çš„è§£è€¦ã€‚</p><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/d037bd1d-89c1-4f9c-b489-857b46de31ca" alt="image" class="img_ev3q"></p><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/65f71cee-09d9-4e7b-aa6e-bd4c9a60de83" alt="image" class="img_ev3q"></p><p>çƒ­æ›´æ–°ï¼šEnvoyç›¸æ¯”Nginxæ›´åˆç†çš„é…ç½®ç³»ç»ŸæŠ½è±¡ï¼Œè®©Higresså…·å¤‡äº†Nginx Ingressæ— æ³•å®ç°çš„é…ç½®çƒ­æ›´æ–°èƒ½åŠ›</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å›é¡¾ä¸å±•æœ›">å›é¡¾ä¸å±•æœ›<a href="#å›é¡¾ä¸å±•æœ›" class="hash-link" aria-label="å›é¡¾ä¸å±•æœ›çš„ç›´æ¥é“¾æ¥" title="å›é¡¾ä¸å±•æœ›çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/f46c4d68-8e31-44bb-afc6-c02c9fccb105" alt="image" class="img_ev3q"></p><p>Higresså¼€æºçš„å‰åŠå¹´ï¼Œä¸“æ³¨äºå¼€æºç”Ÿæ€çš„æ‰“é€šå’Œæ˜“ç”¨æ€§çš„æå‡ï¼Œå¹¶åŸºäºGithub Actionæ„å»ºäº†å¼€æºçš„é›†æˆæµ‹è¯•ä½“ç³»ï¼Œæ¥ä¿éšœé¡¹ç›®è´¨é‡ï¼Œåœ¨ä»Šå¹´5æœˆä»½å‘å¸ƒç¬¬ä¸€ä¸ªGAç¨³å®šç‰ˆæœ¬åï¼Œåœ¨å¤šä¸ªæ ¸å¿ƒç¤¾åŒºå¼€å‘è€…çš„åŠªåŠ›ä¸‹ï¼Œæˆ‘ä»¬åˆå¾ˆå¿«å‘å¸ƒäº†1.1å’Œ1.2ä¸¤ä¸ªå¤§ç‰ˆæœ¬ï¼Œæ¨å‡ºäº†éK8séƒ¨ç½²/Knativeæ”¯æŒç­‰é‡é‡çº§åŠŸèƒ½ã€‚</p><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/3ba10a71-b3f0-4ede-a150-c64e0b1003c4" alt="image" class="img_ev3q"></p><p>æœªæ¥çš„RoadMapï¼ŒHigressä¼šèšç„¦åœ¨Gateway API/æ’ä»¶ç”Ÿæ€/APIç®¡ç†ä¸‰ä¸ªæ–¹å‘ä¸Šï¼Œéšç€ç¤¾åŒºå¼€å‘å›¢é˜Ÿçš„ä¸æ–­å£®å¤§ï¼ŒHigresså·²ç»å»ºç«‹äº†å¤šä¸ªä¸åŒæ–¹å‘çš„<a href="https://github.com/alibaba/higress/issues/547" target="_blank" rel="noopener noreferrer">SIG</a> å¹¶è¡Œæ¨è¿›æ ¸å¿ƒåŠŸèƒ½æ¼”è¿›ï¼Œæœªæ¥å°†ä¸æ–­æœ‰é‡é‡çº§åŠŸèƒ½æ¨å‡ºï¼Œå°½è¯·æœŸå¾…ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç›´æ’­å›çœ‹">ç›´æ’­å›çœ‹<a href="#ç›´æ’­å›çœ‹" class="hash-link" aria-label="ç›´æ’­å›çœ‹çš„ç›´æ¥é“¾æ¥" title="ç›´æ’­å›çœ‹çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><a href="https://www.aliyun.com/activity/middleware/CloudNative_Meetup" target="_blank" rel="noopener noreferrer">https://www.aliyun.com/activity/middleware/CloudNative_Meetup</a></p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[åŸºäºæ–‡ä»¶é…ç½®å®ç° Higress æç®€ç‹¬ç«‹éƒ¨ç½²]]></title>
            <link>https://higress.io/zh-cn/blog/config-with-file</link>
            <guid>https://higress.io/zh-cn/blog/config-with-file</guid>
            <pubDate>Fri, 25 Aug 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[ä»‹ç»å¦‚ä½•ä½¿ç”¨æ–‡ä»¶æ¥ç®¡ç† Higress é…ç½®ä¿¡æ¯å¹¶å®ç°ç‹¬ç«‹éƒ¨ç½²]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="å‰ç½®å‡†å¤‡">å‰ç½®å‡†å¤‡<a href="#å‰ç½®å‡†å¤‡" class="hash-link" aria-label="å‰ç½®å‡†å¤‡çš„ç›´æ¥é“¾æ¥" title="å‰ç½®å‡†å¤‡çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å®‰è£…-docker-compose">å®‰è£… Docker Compose<a href="#å®‰è£…-docker-compose" class="hash-link" aria-label="å®‰è£… Docker Composeçš„ç›´æ¥é“¾æ¥" title="å®‰è£… Docker Composeçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>è¯·å‚è€ƒ Docker å®˜æ–¹æ–‡æ¡£æ¥å®‰è£… Docker Engineï¼Œå…¶ä¸­å·²ç»å†…ç½®äº† Docker Compose ç»„ä»¶ï¼š<a href="https://docs.docker.com/engine/install/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/engine/install/</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç¯å¢ƒéªŒè¯">ç¯å¢ƒéªŒè¯<a href="#ç¯å¢ƒéªŒè¯" class="hash-link" aria-label="ç¯å¢ƒéªŒè¯çš„ç›´æ¥é“¾æ¥" title="ç¯å¢ƒéªŒè¯çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ol><li>å¯åŠ¨ç»ˆç«¯ï¼›</li><li>æ‰§è¡Œ <code>docker compose version</code> å‘½ä»¤ï¼Œç¡®è®¤å¯ä»¥æ­£å¸¸è¾“å‡º Docker Compose çš„ç‰ˆæœ¬ã€‚<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Docker Compose version v2.20.2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å®‰è£…-higrees">å®‰è£… Higrees<a href="#å®‰è£…-higrees" class="hash-link" aria-label="å®‰è£… Higreesçš„ç›´æ¥é“¾æ¥" title="å®‰è£… Higreesçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç¡®å®šé…ç½®ç›®å½•">ç¡®å®šé…ç½®ç›®å½•<a href="#ç¡®å®šé…ç½®ç›®å½•" class="hash-link" aria-label="ç¡®å®šé…ç½®ç›®å½•çš„ç›´æ¥é“¾æ¥" title="ç¡®å®šé…ç½®ç›®å½•çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ç”±äºè¿™æ¬¡æˆ‘ä»¬å‡†å¤‡ä½¿ç”¨æ–‡ä»¶æ¥ç®¡ç† Higress çš„é…ç½®æ•°æ®ï¼Œæ‰€ä»¥éœ€è¦å…ˆç¡®å®šä¿å­˜é…ç½®æ–‡ä»¶çš„ç›®å½•ã€‚ä¸‹é¢æˆ‘ä»¬å°†ä»¥ <code>~/higress/conf</code> ç›®å½•ä¸ºä¾‹è¿›è¡Œä»‹ç»ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ‰§è¡Œå®‰è£…">æ‰§è¡Œå®‰è£…<a href="#æ‰§è¡Œå®‰è£…" class="hash-link" aria-label="æ‰§è¡Œå®‰è£…çš„ç›´æ¥é“¾æ¥" title="æ‰§è¡Œå®‰è£…çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>å¯åŠ¨ç»ˆç«¯ï¼Œå¹¶æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -fsSL https://higress.io/standalone/get-higress.sh | bash -s -- -c file://~/higress/conf -p &lt;ä½ çš„å¯†ç &gt; -a</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¯·è€å¿ƒç­‰å¾…å®‰è£…è¿‡ç¨‹æ‰§è¡Œå®Œæ¯•ã€‚Higress çš„æ‰§è¡Œæ–‡ä»¶å°†è¢«å®‰è£…åœ¨å½“å‰ç›®å½•ä¸‹çš„ <code>higress</code> å­ç›®å½•å†…ã€‚é…ç½®æ•°æ®åˆ™å°†è¢«å†™å…¥ <code>~/higress/conf</code> ç›®å½•å†…ã€‚</p><p>åœ¨å®‰è£…å®Œæˆåï¼Œè„šæœ¬ä¼šè‡ªåŠ¨å¯åŠ¨ Higressã€‚å½“ç»ˆç«¯è¾“å‡ºå¦‚ä¸‹ä¿¡æ¯æ—¶ï¼Œåˆ™è¯´æ˜ Higress å·²å®‰è£…å®Œæˆå¹¶æˆåŠŸå¯åŠ¨ã€‚</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Higress is now started. You can check out its status by executing /home/ch3cho/higress/bin/status.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Higress Gateway is listening on:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  http://0.0.0.0:80</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  https://0.0.0.0:443</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Visit Higress Console: http://localhost:8080/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="higress-è·¯ç”±é…ç½®">Higress è·¯ç”±é…ç½®<a href="#higress-è·¯ç”±é…ç½®" class="hash-link" aria-label="Higress è·¯ç”±é…ç½®çš„ç›´æ¥é“¾æ¥" title="Higress è·¯ç”±é…ç½®çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ä¸ºäº†ç€é‡è¯´æ˜åŸºäºæ–‡ä»¶çš„è·¯ç”±é…ç½®æ–¹å¼ï¼Œè¿™é‡Œå°†ä¸å†å±•å¼€ä»‹ç»ä½¿ç”¨ Higress æ§åˆ¶å°æ¥è¿›è¡Œé…ç½®çš„å…·ä½“æ­¥éª¤ã€‚å¦‚æœ‰éœ€è¦ï¼Œå¤§å®¶å¯ä»¥æŸ¥é˜…å…¶ä»–æ–‡æ¡£ã€‚</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="åˆ›å»ºæœåŠ¡æ¥æº">åˆ›å»ºæœåŠ¡æ¥æº<a href="#åˆ›å»ºæœåŠ¡æ¥æº" class="hash-link" aria-label="åˆ›å»ºæœåŠ¡æ¥æºçš„ç›´æ¥é“¾æ¥" title="åˆ›å»ºæœåŠ¡æ¥æºçš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨å°†ä»¥ä¸‹å†…å®¹å†™å…¥ <code>~/higress/conf/mcpbridges/default.yaml</code> æ–‡ä»¶ä¸­ï¼š</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> networking.higress.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> McpBridge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">registries</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">domain</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> httpbin.org</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> httpbin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> dns</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="åˆ›å»ºåŸŸåé…ç½®">åˆ›å»ºåŸŸåé…ç½®<a href="#åˆ›å»ºåŸŸåé…ç½®" class="hash-link" aria-label="åˆ›å»ºåŸŸåé…ç½®çš„ç›´æ¥é“¾æ¥" title="åˆ›å»ºåŸŸåé…ç½®çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨å°†ä»¥ä¸‹å†…å®¹å†™å…¥ <code>~/higress/conf/configmaps/domain-foo.bar.com.yaml</code> æ–‡ä»¶ä¸­ï¼š</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ConfigMap</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> domain</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">foo.bar.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">domain</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> foo.bar.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">enableHttps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"off"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="åˆ›å»ºæœåŠ¡è·¯ç”±">åˆ›å»ºæœåŠ¡è·¯ç”±<a href="#åˆ›å»ºæœåŠ¡è·¯ç”±" class="hash-link" aria-label="åˆ›å»ºæœåŠ¡è·¯ç”±çš„ç›´æ¥é“¾æ¥" title="åˆ›å»ºæœåŠ¡è·¯ç”±çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨å°†ä»¥ä¸‹å†…å®¹å†™å…¥ <code>~/higress/conf/ingresses/route-foo-bar.yaml</code> æ–‡ä»¶ä¸­ï¼š</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> networking.k8s.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Ingress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">higress.io/destination</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> httpbin.dns</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">higress.io/ignore-path-case</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"false"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> route</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">foo</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">bar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ingressClassName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">rules</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> foo.bar.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">paths</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">backend</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">resource</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">apiGroup</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> networking.higress.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> McpBridge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">pathType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Prefix</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="è¯·æ±‚éªŒè¯">è¯·æ±‚éªŒè¯<a href="#è¯·æ±‚éªŒè¯" class="hash-link" aria-label="è¯·æ±‚éªŒè¯çš„ç›´æ¥é“¾æ¥" title="è¯·æ±‚éªŒè¯çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> http://localhost/get?foo</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">bar -H </span><span class="token string" style="color:#e3116c">'Host: foo.bar.com'</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¯·æ±‚åº”è¿”å›ä¸€æ®µåŒ…å«è¯·æ±‚ä¿¡æ¯çš„ JSON æ•°æ®ï¼š</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"args"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"foo"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"bar"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"headers"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"Accept"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"*/*"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"Host"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"foo.bar.com"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"Original-Host"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"foo.bar.com"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"Req-Start-Time"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"1693049173053"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"User-Agent"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"curl/8.1.2"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"X-Amzn-Trace-Id"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Root=1-11111111-111111111111111111111111"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"X-B3-Sampled"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"0"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"X-B3-Spanid"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"2222222222222222"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"X-B3-Traceid"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"33333333333333333333333333333333"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"X-Envoy-Attempt-Count"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"1"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"X-Envoy-Decorator-Operation"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"httpbin.dns:80/*"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"X-Envoy-Internal"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"true"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"origin"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"192.168.16.1, 123.123.123.123"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"url"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"http://foo.bar.com/get?foo=bar"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å·²çŸ¥é—®é¢˜">å·²çŸ¥é—®é¢˜<a href="#å·²çŸ¥é—®é¢˜" class="hash-link" aria-label="å·²çŸ¥é—®é¢˜çš„ç›´æ¥é“¾æ¥" title="å·²çŸ¥é—®é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>åœ¨ Windows æ“ä½œç³»ç»Ÿä¸­ï¼Œç›´æ¥ä¿®æ”¹æŒ‚è½½åˆ° Docker å®¹å™¨ä¸­çš„æœ¬åœ°æ–‡ä»¶åï¼Œå®¹å™¨å†…çš„è¿›ç¨‹æ— æ³•æ”¶åˆ°é€šçŸ¥ï¼ˆè¯¦æƒ…è¯·æŸ¥çœ‹ <a href="https://github.com/fsnotify/fsnotify/issues/292" target="_blank" rel="noopener noreferrer">fsnotify/fsnotify #292</a>ï¼‰ã€‚å¦‚æœè¦ä½¿ç”¨æ–‡ä»¶æ¥ä¿å­˜é…ç½®æ•°æ®çš„è¯ï¼Œåœ¨ç›´æ¥ä¿®æ”¹é…ç½®æ–‡ä»¶åï¼ŒHigress æ— æ³•ç«‹å³åŠ è½½åˆ°æ–°çš„é…ç½®ã€‚å¦‚æœéœ€è¦åœ¨ Windows ä¸Šç‹¬ç«‹éƒ¨ç½² Higress ç½‘å…³ï¼Œå¯ä»¥è€ƒè™‘é€šè¿‡ Higress Console æ¥ç®¡ç†é…ç½®ä¿¡æ¯ï¼Œæˆ–ä½¿ç”¨ Nacos ä¿å­˜ç½‘å…³é…ç½®ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å‚è€ƒæ–‡æ¡£">å‚è€ƒæ–‡æ¡£<a href="#å‚è€ƒæ–‡æ¡£" class="hash-link" aria-label="å‚è€ƒæ–‡æ¡£çš„ç›´æ¥é“¾æ¥" title="å‚è€ƒæ–‡æ¡£çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>æ›´å¤šç›¸å…³ä¿¡æ¯ä¸ Higress çš„å…¶ä»–éƒ¨ç½²æ–¹å¼å¯æŸ¥é˜…ä»¥ä¸‹æ–‡æ¡£ï¼š</p><ul><li><a href="/zh-cn/docs/user/quickstart">å¿«é€Ÿå¼€å§‹</a></li><li><a href="/zh-cn/docs/ops/deploy-by-helm">ä½¿ç”¨ Helm è¿›è¡Œäº‘åŸç”Ÿéƒ¨ç½²</a></li><li><a href="/zh-cn/docs/ops/deploy-by-docker-compose">åŸºäº Docker Compose è¿›è¡Œç‹¬ç«‹éƒ¨ç½²</a></li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Windows ä¸‹ Higress éƒ¨ç½²å®è·µ]]></title>
            <link>https://higress.io/zh-cn/blog/DeployOnWindows</link>
            <guid>https://higress.io/zh-cn/blog/DeployOnWindows</guid>
            <pubDate>Fri, 28 Jul 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Windowséƒ¨ç½²Higress]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="å‰ç½®å‡†å¤‡">å‰ç½®å‡†å¤‡<a href="#å‰ç½®å‡†å¤‡" class="hash-link" aria-label="å‰ç½®å‡†å¤‡çš„ç›´æ¥é“¾æ¥" title="å‰ç½®å‡†å¤‡çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="é…ç½®-wsl2">é…ç½® WSL2<a href="#é…ç½®-wsl2" class="hash-link" aria-label="é…ç½® WSL2çš„ç›´æ¥é“¾æ¥" title="é…ç½® WSL2çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>è¯¦æƒ…å‚çœ‹æ­¥éª¤1-5,é¡ºä¾¿åœ¨å¾®è½¯å•†åº—ä¸­ä¸‹è½½Terminalã€‚</p><p><a href="https://learn.microsoft.com/zh-cn/windows/wsl/install-manual" target="_blank" rel="noopener noreferrer">WSLæ‰‹åŠ¨å®‰è£…æ­¥éª¤</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸‹è½½-docker-desktop">ä¸‹è½½ Docker Desktop<a href="#ä¸‹è½½-docker-desktop" class="hash-link" aria-label="ä¸‹è½½ Docker Desktopçš„ç›´æ¥é“¾æ¥" title="ä¸‹è½½ Docker Desktopçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ol><li><p><strong>è®¿é—® Docker Desktop å®˜æ–¹ä¸‹è½½é¡µé¢</strong></p><p>åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ <a href="https://www.docker.com/products/docker-desktop" target="_blank" rel="noopener noreferrer">Docker Desktop çš„å®˜æ–¹ä¸‹è½½é¡µé¢</a></p></li><li><p><strong>ä¸‹è½½ Docker Desktop</strong></p><p>åœ¨ä¸‹è½½é¡µé¢ï¼Œæ‰¾åˆ°é€‚ç”¨äº Windows çš„ Docker Desktop ç‰ˆæœ¬ï¼Œç„¶åç‚¹å‡»ä¸‹è½½ã€‚</p></li><li><p><strong>è¿è¡Œå®‰è£…ç¨‹åº</strong></p><p>ä¸‹è½½å®Œæˆåï¼Œæ‰¾åˆ°ä¸‹è½½çš„å®‰è£…ç¨‹åºï¼ˆé€šå¸¸åœ¨ä½ çš„ "ä¸‹è½½" æ–‡ä»¶å¤¹ä¸­ï¼‰ï¼Œç„¶ååŒå‡»è¿è¡Œã€‚</p></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å®‰è£…-cygwin">å®‰è£… Cygwin<a href="#å®‰è£…-cygwin" class="hash-link" aria-label="å®‰è£… Cygwinçš„ç›´æ¥é“¾æ¥" title="å®‰è£… Cygwinçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><a href="http://www.cygwin.com/" target="_blank" rel="noopener noreferrer">cygwinå®˜ç½‘</a></p><p>é€‰æ‹©setup-x86_64.exeï¼Œç­‰å¾…å®‰è£…å®Œæˆã€‚</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="éªŒè¯-cygwin-å®‰è£…æ˜¯å¦æˆåŠŸ">éªŒè¯ Cygwin å®‰è£…æ˜¯å¦æˆåŠŸ<a href="#éªŒè¯-cygwin-å®‰è£…æ˜¯å¦æˆåŠŸ" class="hash-link" aria-label="éªŒè¯ Cygwin å®‰è£…æ˜¯å¦æˆåŠŸçš„ç›´æ¥é“¾æ¥" title="éªŒè¯ Cygwin å®‰è£…æ˜¯å¦æˆåŠŸçš„ç›´æ¥é“¾æ¥">â€‹</a></h4><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cygcheck -c cygwin</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="7.png" src="/zh-cn/assets/images/7-f31de94adfaa4fac24dbf1d410079a70.png" width="595" height="377" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸º-cygwin-é…ç½®ç¯å¢ƒå˜é‡">ä¸º Cygwin é…ç½®ç¯å¢ƒå˜é‡<a href="#ä¸º-cygwin-é…ç½®ç¯å¢ƒå˜é‡" class="hash-link" aria-label="ä¸º Cygwin é…ç½®ç¯å¢ƒå˜é‡çš„ç›´æ¥é“¾æ¥" title="ä¸º Cygwin é…ç½®ç¯å¢ƒå˜é‡çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p><img loading="lazy" alt="8.png" src="/zh-cn/assets/images/8-0edaba7a8d7beee2abf67ed25756fe11.png" width="776" height="627" class="img_ev3q"></p><p><img loading="lazy" alt="9.png" src="/zh-cn/assets/images/9-e13e9c70896872ee5ba92afcdb4e5c34.png" width="493" height="605" class="img_ev3q"></p><p><img loading="lazy" alt="10.png" src="/zh-cn/assets/images/10-f7ca28c3f9f21b743a80b5d989dd74ae.png" width="632" height="666" class="img_ev3q"></p><p><img loading="lazy" alt="11.png" src="/zh-cn/assets/images/11-70aebeb53894ffb9cfffd3bfade7d8ee.png" width="541" height="570" class="img_ev3q"></p><p>ç‚¹å‡»ç¡®å®šå³å¯æ·»åŠ æˆåŠŸ</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å®‰è£…-higrees">å®‰è£… Higrees<a href="#å®‰è£…-higrees" class="hash-link" aria-label="å®‰è£… Higreesçš„ç›´æ¥é“¾æ¥" title="å®‰è£… Higreesçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å‡†å¤‡-nacos">å‡†å¤‡ Nacos<a href="#å‡†å¤‡-nacos" class="hash-link" aria-label="å‡†å¤‡ Nacosçš„ç›´æ¥é“¾æ¥" title="å‡†å¤‡ Nacosçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><a href="https://nacos.io/zh-cn/docs/v2/quickstart/quick-start-docker.html" target="_blank" rel="noopener noreferrer">nacoså®˜ç½‘æ‰‹å†Œ</a></p><p>æˆ‘ä»¬è¿™é‡Œé€‰æ‹©nacos-dockerçš„æ¨¡å¼å®‰è£…</p><p><img loading="lazy" alt="A.png" src="/zh-cn/assets/images/A-321115aaea59ff9a6e4a07b9393b9207.png" width="1076" height="564" class="img_ev3q"></p><p>ä¸‹è½½è§£å‹zipæ–‡ä»¶,è¿›å…¥ nacos-docker-master æ–‡ä»¶å¤¹å³é”®é€‰æ‹©ç»ˆç«¯æ‰“å¼€ï¼Œæ‰§è¡Œå‘½ä»¤ï¼Œæˆ‘ä»¬è¿™é‡Œé€‰æ‹©å•æœºæ¨¡å¼éƒ¨ç½²</p><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    docker-compose -f example/standalone-derby.yaml up</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç­‰å¾…å‡ºç°ç•Œé¢ï¼Œå³å®‰è£…æˆåŠŸ</p><p><img loading="lazy" alt="B.png" src="/zh-cn/assets/images/B-f819ffcf4f15baa1010207f2726bb032.png" width="1731" height="1195" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ä½¿ç”¨-higrees-å¯¹æ¥-nacos">ä½¿ç”¨ Higrees å¯¹æ¥ Nacos<a href="#ä½¿ç”¨-higrees-å¯¹æ¥-nacos" class="hash-link" aria-label="ä½¿ç”¨ Higrees å¯¹æ¥ Nacosçš„ç›´æ¥é“¾æ¥" title="ä½¿ç”¨ Higrees å¯¹æ¥ Nacosçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><strong>å®‰è£…å‘½ä»¤ï¼šä½¿ç”¨ç‹¬ç«‹éƒ¨ç½²çš„ Nacos</strong></p><p>å½“è®¿é—®dockerå®¹å™¨äº’ç›¸è®¿é—®æ—¶å€™æœ¬åœ°å›ç¯åœ°å€å¹¶ä¸æ˜¯çœŸæ­£çš„åœ°å€ï¼Œæ‰€ä»¥éœ€è¦åœ¨cygwinä¸­æ‰§è¡Œè·å–æœ¬åœ°ç½‘å¡åœ°å€</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ipconfig</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="C.png" src="/zh-cn/assets/images/C-c0ee57511e3244545ceebb126834c3d3.png" width="1993" height="1209" class="img_ev3q"></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -fsSL https://higress.io/standalone/get-higress.sh | bash -s -- -c nacos://192.168.0.1:8848 --nacos-username=nacos --nacos-password=nacos</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¯·å°† <code>192.168.0.1</code> æ›¿æ¢ä¸º Nacos æœåŠ¡å™¨çš„ IPï¼ˆå¦‚æœ Nacos éƒ¨ç½²åœ¨æœ¬æœºï¼Œè¯·ä¸è¦ä½¿ç”¨å¦‚ <code>localhost</code> æˆ– <code>127.0.0.1</code> çš„ Loopback åœ°å€ï¼‰ï¼Œå¹¶æŒ‰éœ€è°ƒæ•´ <code>--nacos-username</code> å’Œ <code>--nacos-password</code> çš„å–å€¼ã€‚å¦‚æœ Nacos æœåŠ¡æœªå¼€å¯è®¤è¯åŠŸèƒ½ï¼Œåˆ™å¯ä»¥ç§»é™¤è¿™ä¸¤ä¸ªå‚æ•°ã€‚</p><p>åœ¨è¿™é‡Œæœªå¼€å¯æˆæƒæœåŠ¡ï¼Œç›´æ¥ä½¿ç”¨WLANIPæ›¿æ¢å¯¹åº”çš„IP</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -fsSL https://higress.io/standalone/get-higress.sh </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> -s -- -c nacos://10.30.0.225:8848</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¾“å…¥å‘½ä»¤ç­‰å¾…éƒ¨ç½²ï¼Œå³å¯çœ‹åˆ°ç”Ÿæˆçš„ç”¨æˆ·åä¸å¯†ç </p><p><img loading="lazy" alt="D.png" src="/zh-cn/assets/images/D-42927806049c82e382d903d50a93841b.png" width="606" height="662" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="higress-æ§åˆ¶å°é…ç½®">Higress æ§åˆ¶å°é…ç½®<a href="#higress-æ§åˆ¶å°é…ç½®" class="hash-link" aria-label="Higress æ§åˆ¶å°é…ç½®çš„ç›´æ¥é“¾æ¥" title="Higress æ§åˆ¶å°é…ç½®çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><strong>è®¿é—® <code>http://localhost:8080/</code>, ç™»å½• Higress æ§åˆ¶å°ã€‚é¦–æ¬¡è®¿é—®æ—¶éœ€è¦å…ˆè®¾ç½®ç”¨æˆ·åå¯†ç </strong></p><p><img loading="lazy" alt="13.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAhgAAAFKCAYAAABfKiZxAAAgAElEQVR4nO3dfXSU1bn+8WsYQ1IkQwokBkgiIMVJKDWGChhtjW9terSQUivVikUtFi1ITj1WpLZVawOec9pfPL5Ra5VKS2urGF+OHcViPLVDwBpi1SQCBgwhCQHiZAI0Qxye3x8zGfIyExPYdDLJ97MWy+SZ/TyzzVqSy3vfe4/NsixLAAAABg2L9gQAAMDgQ8AAAADGETAAAIBxBAwAAGAcAQMAABhHwAAAAMYRMAAAgHEEDAAAYBwBAwAAGEfAAAAgAg67Pn4EDAAAIrDZbNGeQswiYAAAAOMIGAAAwDgCBgAAMI6AAQAAjCNgAAAA4wgYAADAOAIGAAAwjoABAACMI2AAAADjCBgAAMA4AgYAADCOgAEAAIwjYAAAAOMIGAAAwDgCBgAAMI6AAQAAjCNgAAAA4wgYAADAOAIGAAAwjoABAACMI2AAAADjCBgAAMA4AgYAADCOgAEAAIwjYAAAAOMIGAAAwDgCBgAAMI6AAQAAjCNgAAAA4wgYAADAOAIGAAAwjoABAACMI2AAJ0nCVClxpvTnv4Z//Yhf+vJvLE2939Kqv1qh620+qeQlaeMbkmVZ4W8GgAGOgAGcJP42qf1Q72N8fsn3cddrTz0rfeMG6cvfkF4ptZ28CQLASUTAAAYYz+FjXx/8KHrzAIATcUq0JwCgq4VXWpJsShohXXZZtGcDAMeHgAEMMKNG2rTs+mjPAgBODAEDOElOGyvt90nbtktFVZY+2h24PvaoTTd80dL5020abrdJ6trI2eaTPtgV+PqMiVJC/LHX/H6/Pqyt0+7aPfr4qF+TJmYoPW28mpr2qc13RGPGfFpJo0ZJkpr27VNr6yElJp4qSXrn3WqNPDVeZ5wxRWPHjA49b099g2p379E/Dx9UymmpmjB+XOj1zjree+euWjU3f6SJp6dr0qTTw45taNyrD2p2qaFhr8aNO02TTk/X+PHjZLPRUwIMFQQM4CT50oXSOpf0s99Li26x6bHKQJBo+MjSskdtOsUr/fw/LP1XW9f73G8GGjwlqaJUmnZm4GvLsnTLrT/UljfLQ7tLbDabUlNP06kjPqUPanbpxhsWaNH1CyRJ9z/4K73yaqlSU09Tc/NH8vl8kqT5V8zVbd9fIkk9nidJ8fHxKrprhS64ILfLvH58z3165dXSHmMf/p/7dNb0aaFra9b+QY88ukZ+vz90zW6367prv6nFixYe748TQIyhyRM4SVLOCvzzny3S63+WbrnQplsutGlOTuD/4ts+lm7+kU3/9qm+/V/9vSt/oc1b3pJlWfp8Tra++51rdd65M9XYuFc7PtgZdkurZVlqaGiU3W7XrJkzFB8fr69/7auyLEs//EmRNm95S5J0fu4sfee6b+n0jDT5fD794M57VFVVHXrO5i1b9MqrpRo2bJgK5nxFS266QVPOmCSfz6el/75CDY17Q2PXrvuT/H6/PvvZTBUu/a5mzZwhv9+vx574nd5wbz7eHyeAGEMFAzhJyj62tOhbNv1mg/SPKqlyr5Q8wdKENOnWa21a8zup8ZD00nppzf/0HjIOHjyoDRv/T5J0zdXf0NKbbpDdbpff79fadX/SQ6sfj3hmxogRI/Tr1f9Pn5kyWZ6WFiWNGqWGxr0q/T+3JOlbV12hwiU3SpIWXP0NLV5ym6re365nnntJd2Y6JUn/ePd9WZalpKRRuuXmRXI4ElUw5ytavOQ2SdK7776rcamnydPSopYWr2w2m1be80ONSz1NV135NRXdV6z3qt7Xu+9V6fzcWUZ+vgAGNgIGcJLs/Ejyj7V067dt+u1L0gG/tL9F8gyTag5Zuv82m675nrStUvLUSsqI/KyNpW/o8OHDGjNmdCgMSIGlh4ULvqkX/vdlfVhbF/benOzp+syUyZIU6s/4oGZXaMlk3779unfVL0LjTz010LOxteKd0LXsz31WdrtdBw4061vX3azL8i/WjLPP0oPFqzRm9KdDvRVJo0ZpzJjROnCgWfOvuVFfuuQCfeHc2frO9dcoJXms7HZ7/3+QAGISAQM4iWpbpfO/ZuknC22qb5He2X2sUpE6Rpo0XtrmkUr/Ll10fuTnvL9thyQpZeyYsK+npp4WMWCMHduzCXN3XX3o65c3vBb2vsa9+0Jfn/P5s3XTjQv14CO/VkNDox574nd67InfSZLmXp6vO+/4fihk3PuT5Sq87Uc6fPiwSp7/s0qe/7Mk6fSMNP36l8WhkANgcCNgAP8i40cF/nRo73SCp/9Q4OyLSBITR0qSDv/zn2Ffb/tnW9jrkZw64lOSAssnjz7887Bj7MO6tmgtXPBN/Vv+xWpobNI771bp5Vc2qur97XruRZfS0ydo4YJvSgqEkZdf+IN2767T9g92aWPpG/rbpi36sLZOd/30v1T83/f2a64AYhNNnkAMOHf2OZICVYWanR92ea2hca+2f7CzX8/LdE6V3W7X4cOH1eptlXPqlNAfn8+nv76xSZvfLJcUaBT90zPPa/Wv1qhs81v63GezdM1VV2jNYw8o88zPSJIq3n5XkrTh1b9o9a/W6IWXNigz06k5l+er+L/v1Q+Cu1Y2bf77Cf0cAMQOKhhADDhr+jSdnpGmD2vrtHDRLSq6Z4Uy0ido7959uvPuVTp8+PAnP6ST8eNSlZKSrIaGRt2z8he6+87va+zYZNXu3qPbf/hT+Xw+Fcz5iqTAVtiKf7yrlze8JrvdLm/rQU3/bKY8zS3atqNGkjRm9KclScPsw/XrNetkWZa2bduhr152ifx+yfXKRklSSkqywZ8KgIGMgAHEiB98/yYt+fc7dfjwYRX+x51dXuvYUdJXp546Qr9e/Qt9dd4CNTQ06sbv/aDH85bcdEPo+3t+fLv+Xv62DhxoVvEDv+wy1maz6Yqvz5EkXXzhFzTznBxt3vKWXnjpFb3w0itdxi667lt9niOA2MYSCXCSXDAx8GdsL+dcXDBTuniWNPWMY2NGJ0lfuiTwZ0TisbGzZs7UM394XLNmzgg1VH4+J1u/f/KXysyc2uPZn5kyWbNmztAZkyeFfe+U5GT9ad1jmn/F3NC1ESNG6LvfuVYvv/hUl2ZMu92u3615RLcW3qwRI0aErs29PF8lf1wTWiqRpJ+vukv3/ezHGhM84dNms+ms6dP06EP/qa9e9uXefmQABhGbFWnzPIAB5dChQ7IsSyNHjuxykqckLbjuZlW9v123Ft6sq678Wr+f3VH9GDZs2Cce521Zlo4ePdqvsWxPBYYeKhhAjJj3zet18Veu0Ouvu2Wz2UK/3H0+n+qDJ2lmhalk9IXdbpfdbu/TZ4XYbLZ+jwUw9BAwgBiReeZn5Pf79aOf3qftO2rU1tYmr7dVy269Uy0tXo0ZM7rLZ4IAQDSxRALEiNrddbruxmVqafHKbrcrPj5efr8/dCLnj1fcqjmX50d5lgAQQMAAYsiePfV67Infyb357zp48JDsdruynFN1zdVX8BkfAAYUAgYAADCOHgwAAGAcAQMAABhHwAAAAMYRMAAAgHEEDAAAYBwBAwAAGEfAAAAAxhEwAACAcQQMAABgHAEDAAAYR8AAAADGETAAAIBxBAwAAGAcAQMAABhHwAAAAMYRMAAAgHEEDAAAYBwBAwAAGEfAAAAAxhEwAACAcQQMAABgHAEDAAAYd0q0JzBU+Xw+1dfXq729PdpTAYABIS4uTmlpaYqLi4v2VGCAzbIsK9qTGIp27typMWPGyuFIjPZUAGBA8HpbdeDAfk2aNCnaU4EBLJFESXt7O+ECADpxOBKp6g4iBAwAAGAcAQMAABhHwAAAAMYRMAAAgHEEDAAAYBwBAwAAGEfAAAAAxhEwAACAcQQMAABgHAEDAAAYR8CIYZu3bFFBQYHOPPNMnXnmmSooKNDmLVuiPS0AAAgYsWrDq3/RtQsWaPz48XrwoYf14EMPa/z48bp2wQJtePUvUZxZrcpLS1Veezy3luv1192q9BifFADgX4xPU42Sbdu2aerUqcd1r9fbqosuulDz5s3TihUrurxWVFSk9evXa+PG1/rwYWq1Ki+tkbc/bz48Rdm5WUrqZYin0q2390nJZ+Uqq7eBXW+Su6JJSslWbp9vAjDYnMjfjRhYTon2BNB/VdVVam1t1ZIlS3u8tmTJUv3mN79RVXWVZs2c2afnOSbnKSej04XacpXWJfQIEp5Ktyq6VBc8qnRXqOlI+Oc2VZSqqdu14eECRDBcHAncpNLuNwXZbMP7F1oAAFFDwIhB1VVVkhS2QtFxrbqq7wHjRPUIKGEFwkiP1Y+OcOGYrLxID+mobiRnES4AIEbQgxGDZs6cJUlhGzo7rnWMGcg8lW6VBpdF8sbuV2mYxo2OMQmT81g6AYAYQgUjBmVmOuV0OrWyqEgPPfSwJkwYL0nas6deK4uK5HQ6lZnp7PPzvDWlKq3pcVUV4dYqhh//vLuoLVdFU4Im5+UqQ5LHM1YpdTUqdR8MLs109Ic4QmMAALGDgBGjVq26TwsWXKO5c+coKytLklRZWSlJWrv2t/161vH3YJyAjBzldXrPpKQMJeU6JHdFKNgMT8lWHlULAIhJBIwY5PW26tln16u1tVWJiYnqvBGotTXw2oQJS/uwi8TQfMJWQMKLXADptKOlt34MAEBMIGDEGK+3Vddeu0B1dXVauXKl5s2b1+X19evXq6ioSFu2bNGTT67tQ8gYrgTHcc9GbUdOrMnTU+lWRfdtKN4alYZNLA5NzsthuQQAYgABI8YUFf1MdXV1Wrv2t2H7LObNm6fMzCwtWHCNiop+plWrVkV+mOeg2nRE3jDbSfveg9HXgJKkrNy80He15aWq8QaWQbJTKlXRltZ71cJTKXdFW1/eCAAwABAwYkhVVbWeffZZrVy5stcmzsxMp1asWKE77rhDS5feEmoC7cHbpiPhqgJ97cHwHFSbEjT2ONokMnLyQu/pqez//QCAgY1tqjHk1Vc3aMKECT2WRcKZN2+eJkyYoPXrn4k4pna/VxqeoONdIfHUe3TkBO4HAAxeBIwYsmXLFk2YMKHP4ydMmKCq4KFcPXgqVeeVHGm9H/vdQ8LI4HiP6j1HNDxpfP/uBwAMCSyRxJC1a9caG++p9+iIY7JyP6FjsnsTpmNy8IbaGjUdcWiyqW2kERs7O6NWAgCxgoAxRCVl5Sov0oudz6jIylVeVs8htfu9ckzOM7ej45O2ptLkCQAxhU9TjRI+MRAAeuLvxsGDHgwAAGAcAQMAABhHwAAAAMYRMAAAgHEEDAAAYBwBAwAAGEfAAAAAxhEwAACAcQSMKImLi5PX2xrtaQDAgOH1tiouLi7a04AhnOQZJT6fT/X19Wpvb4/2VABgQIiLi1NaWhohY5AgYAAAAONYIgEAAMYRMAAAgHEEDAAAYBwBAwAAGEfAAAAAxhEwAACAcQQMAABgHAEDAAAYR8AAAADGETAAAIBxBAwAAGAcAQMAABhHwAAAAMYRMAAAgHEEDAAAYBwBAwAAGEfAAAAAxhEwAACAcQQMAABgHAEDAAAYR8AAAADGETAAAIBxBAwAAGDcKdGewFDl8/lUX1+v9vb2aE8FAAaEuLg4paWlKS4uLtpTgQE2y7KsaE9iKNq5c6fGjBkrhyMx2lMBgAHB623VgQP7NWnSpGhPBQawRBIl7e3thAsA6MThSKSqO4gQMAAAgHEEDAAAYBwBAwAAGEfAAAAAxhEwAACAcQQMAABgHAEDAAAYR8AAAADGETAAAIBxfBZJDPN6W1VVXdXlWqYzkxNCAQBRR8CIUTfffLP+8pe/hH3t4osv1sMPP/wvnhEABPh8Pj333HPKu/BCpSQnR3s6iBICRgxav369tmzZogcferhHtcLrbdUdy2/X+vXrNW/evON4eq3KS2vUlpKt3KwkMxMGMKj4fD69V1mppr175fV6JUnx8fGaMmWK0tMz9NxzJWppaYnyLBFtBIwYtGfPHmVmZurSSy4O+/qTmZnas2fPcT49Q5NT6lTRVKParBxlRBpWW67SGm+Py8NHT1bSwRo1HQl/m2NynnIiPhTAQFe+das2ud2yLEvp6elKT0+XJLW0tOi1116Tz+dTfHy8rpw/n+rFEEfAGKo8lXJXNClCDpB0RDWlparpdtVmG67ks3KVlZGjvAxJ8qjSXaG2tM7BIUNZPd9Qle5KyWFo/gD+5Vwul9577z3l5uYqJydH8fHx8npbJUnx8cO1b98+tbS0aM7cAn2wYwcBY4gjYAxpDk3O61al8FTKXTtSuZ8LV2aoVXlpXddLnnp5jjiU1nm4p1LuijaldXm2V21HEjSWVRcgJpVv3aodO3YoPz9f06ZNk8/n09q1a9XU1CRJSkhIkGVZunL+fEmS2+1WfEKCcs4+O5rTRhSxTXWoSspSbt5kHXSXqrS8Vp5Kt0rLayV/utIS9qu0tFy1kgKVh8AYKUM5ebnq3JrhqffoiGNsj6UU/4iErsWK2v3yDk+ggAHEIK+3VZvcbuWed56mTZsmSXruueeUnJysRYtuVEpKSihcpCQnKyU5WRdedJE2ud2hCgeGHioYMaSqqlorVxZpz549amlp0bXXXhthXJXq6+v15ptv6o47Vigz0xn+gbU12tc+XClZGVJ9sDIxJlEZY3KUkVIpd3CJxDE5T3kZHm1750NNnX565weopklKye4WL7xt8n+c0OWS52CblDBWFDCA2ON2/00OhyNUjWjat0+7d+/WkiVL9Mc//lEtLS26cv58vexyacGCBZKknLPP1nvvviu3+2/Kz8+P5vQRJQSMGOJt9Wrz5s1asmRJr+POOeccSdKDDz4ob2vPRsyAWpXXeBWXkq2sJMlTL9k/PqhKd6majgR7LbLzlJUk1ZaXyr0/RQltTSp1H1J2bpaSJNWW18gryVtRqkCRNLDk4ugRJjyq9xyRI43uTmAwGOUI1CI7hwtJoeUSQCJgxKSlS5d2+b6jBNl9y+qDDz7Yy1MylJOXoUBfRYUCMaRJTY7JysvtHARqtd8rJUzOUk5GlmrLS1VZOV65I2sU2EQS7OMI9l0cm1SNSku7tYjWlKq0hp0kQKzJzT1PTz75G5Vv3RqqYiQkJHQJF6WvvaYZM2aE7infujXw+pVXRmXOiD4CxiDwve/dLElau3Zt328K7iJpD1YqcoKVippwwWB4ijpWQTJy8pQhqbbcK8eoUfK2WD0enZSVq7ye20jUccYGgNjicCQq97zz9NrGjUpMHKWyTX+TZVmaM7dAL7tcampq0pQpU3TuuedKkt577z29tnGjLrzoIsXHx0d59ogWAsYgkJmZ2e97apvalJWX16UnoiM89EVGTp4yastV2p+zdDwH1abhSqLTE4g5OWefraa9e/X8c892Oedi7twCxccPV3x8vHw+nzZt2iS3260ZM2awg2SII2AMAhdfckm/78mYmhPxtdryUtUlHOdJntvKVVrfs+/DZhuu5Em0eAKxyufzad++fYqPj9ecuQXa5HYrPj5eo0aNkhTov6irq5NlWaGtrBjaCBgxaPOWLf26Hlm4Q7IiqC1XaY16npvR3dQc5U2N9HaVcvdzhgCiz+fzdWnoHOVwaMqUKdqxY4d2794tSXI4HDo3N1fTsrJYFoEkAkZMuja4DWxg8HY68bP3tQ9PvUdHlKCRFDKAmBIfH6/09HR9OT8/dDrntGnTqFKgVwSMGDJr5kyVlDzXy9bTrhyJjshnYHTiDe7u6HqxQqU9dpyFCxARdpEEBRpHj30/PCWrz30eAAaOvLy8aE8BMcZmWVbPbQA46bZt26apUyOtJQxAfV0iAYATEHN/NyIiKhjom9CHmwEA8Mn4LBIAAGAcAQMAABhHwAAAAMYRMAAAgHEEDAAAYBwBAwAAGEfAAAAAxhEwAACAcQSMKImLi5PX2xrtaQDAgOH1tiouLi7a04AhHBUeJe3t7aqrq1N7e3u0pwIAA0JcXJzS0tIIGYMEAQMAABjHEgkAADCOgAEAAIwjYAAAAOMIGAAAwDgCBgAAMI6AAQAAjCNgAAAA4wgYAADAOAIGAAAwjoABAACMI2AAAADjCBgAAMA4AgYAADCOgAEAAIwjYAAAAOMIGAAAwDgCBgAAMI6AAQAAjCNgAAAA4wgYAADAOAIGAAAwjoABAACMI2AAAADjCBgAAMA4AgYAADCOgAEAAIw7JdoTGKp8Pp/q6+vV3t7er/vi4uKUlpamuLi4kzQzAABOnM2yLCvakxiKdu7cqTFjxsrhSOzXfV5vqw4c2K9JkyadpJkBAHDiqGBESXt7e7/DhSQ5HIlqbGw4rvesXuNUgUpUvdB5XPdLkjwuFd4l3VWcr6SuT9caZ4FWdRu+vKRMqatnq3FxtRY6JVWvkXN1qsq63B/+3h6Wn+DcgUHugful9KulguTIY0oel9Kvl2ZIUqU0bkMvD0yU3r5eSunlWTc5pIYrIgwI9/xEabmkVa09h+dPl564qJf5IKYQMAaz6jVyFnT/tV0gZ5jf5MtLggFAHrkKZ6vQ1WPAJ/xyd2phdbUWdnlvKdeZpKmLl8tZ4AwEiPxild19bu/3Rvp3KettAICll0rjXpByewkFBbOlcfdLLy6TZmRJDVkRBlZK48o6fR0piLQGntfdikulpR3P3ydd94J0X6d5Les2vmmj9FRqL/9yiDkEjMEuv7hbtaC7QKBoDH2fpPzialX39308LhXOLlR2SbUWKhBslpdUa6okOReqZPkqrU4tU3F+UmCsMzi2t1DT3fKS/s4KGJTeelq6fE/k188K8ws/VI3Ikt5ulG7f2M9qQZhqxgNPS0s7qhf7pOvWSXOvltJfl9ydxjW9I2lip3vDBA73Lil9ej/mgwGPgIG+6VYNcXUqZuQXl6k4P1/F1WVyFTrldEl33HGHVnZULUJmK3Dbcj1fHQwfkvoUaqhgACEzrpAaFAga7qxApaA/Ui6SnujPDVlSQ7J03f2BALF7nTTrKml+VtfqxYvLpN2PS7u/Ki3ttEzz1DuB+3qzu1XK7WVpB7GHgDHYuQo1uw9tC8sXf8IA50JVVy/s0UNRvcap1cEh1Wtmq9C1XM9XL9RUSd/+9re7PSRYqVBq6P9aPK5Czf7E0kWnaaxSH6oyAMIpeVy6Kdj78OKyQB9G00bprHci3NCpTeyBdZKmB/o7HpBkT5Ge+n3gtUeulgoUCCA3XSU9sk5SsBekaaNUlCi93Tk87JNcjk4hp1IqmhAITRg8CBiDXX+XSML2bQQsL4nUJ9EiV+FsufLLVFZ8l2Y7e080+csbdZfTKVd+scqKi1UdpnThcRVqduNimjoBgwquDwSBB7otoYRtruzcgyFp6bJAxSRUsQj2cTR0Gu9KlO5LkZ64VBr3ulRwgXR7MLx0LNusuFSa3yhpT8/ejXH3H+vdQOwjYKCrjkpFhN0iHleFlL04eM2jXRVS9uLTlV9crXxJHlfHkkn4SONxFeouFai4ulNUCbuzRNKqMm1b6AwtpQTuvSvis4GhqGhD4E9vjmt3RqcG0I6ejxWXBneMBJs+L+8WEFZcGuypCN771tNSzgTJpcB9JY9LuxVYomkIM5+O1zE4EDAGu+NcIqkuKVT24uoelY/GRpfyU+8yNj1JknOhyvILNdvpUnFZsY7lh1V62FWg4vykwBbbimKVGH5rIJZ19GJ0KHlc2j3bfAWg+/uot90n3e5L3ygVNZudD2IDAWOw6/cuEkkel1ZXFOuuhepWXahW2ap85Zf1XkFwFXY0c0aaUs+UkJRfrOoylwpLXFKFS43ZkpYXK981W85CBbbJFrNcAnRo2iid1Rz4RT+uMlAhKLg+EDKuawxWLII7O5YE+y36LbhM8vb1UkqYZzVtlG5X1+rIJ4acRum6DYGqRmf506WcMGdjIHYRMNBDdYlL+XcVK8njUmGwH6Okulqzywq0anmJqkP5olGNLkmdqh9J+cWqLlkjZ9nsbv0TwSDTceBW2PctlGuVlF1SrYJdhVrVOFH5xSVa7ixQn8owwFCxL9Db8MjVga876+izkAKNmZefFVjKeDFMyHhmvTR+jCX5bWHfpqlRkiPymRrHJTXycs0D70jp7CQZNAgYg11/l0g8Lq1e5ZJrlTNQ/aiuVrHHpcLZTq3Scj1f3f1h+UrtfjiOc6FKypxyFnZUT4K7R7JL1ON2BU8YXRXo3agOphfPrtDDtDC0/fXYDhVgKCt5QaEdHd0DRkhlcPdGntSQIo17uuuJm5ffHwgoZ7xjkyvCEsbuZil/dNdr3fsuJGlct10oK7oP6NTQ2eO1DvukcknpkV5HzCFgDHb9XSJJyldx920dSROVrXzllwV+uXfZWppfrLKkYyGhq27hxtXtFNH8Yj2ZXah1qR3BolprnLNDZ2csLynumEDgnAyPS4Wh3SdsU8XQ1blKoSxpxYbIp2l2brqUdCx4dBxyNV3KXxf+fiVKb3eEkmTpie7Hb4YRtlFzQtcmz84euF8q6jTuCSoYgwYfdhYlfNgZAGAwI2BECR/XDgAYzAgYAADAuGHRngAAABh8CBgAAMA4AgYAADCOgAEAAIwjYAAAAOMIGAAAwDgCBgAAMI6AAQAAjCNgAAAA4wgYAADAOAIGAAAwjoABAACMI2AAAADjCBgAAMA4AgYAADCOgAEAAIwjYAAAAOMIGAAAwDgCBgAAMI6AAQAAjCNgAAAA4wgYAADAOAIGAAAwjoABAACMI2AAAADjCBgAAMC4U6I9gaGqvkW67Gmp8WC0ZwIAA0PqSOl/r5DGj4r2TGCCzbIsK9qTGIrO/jXhAgC6Sx0pbb0h2rOACSyRRAnhAgB64u/GwYOAAQAAjCNgAAAA4wgYAADAOAIGAAAwjoABAACMI2AAAADjCBgAAMA4AgYAADCOgAEAAIwjYAAAAOMIGMAg5m/e1eV7y7crwkgAMItPUwViWpv8zY1hrn9a9tGj9MbdE2WrlL64IRA2Hlg2UTmNge97Y/k8OnrI07cpJE6UPa7fE584qvoAAASZSURBVAcwyBEwgFiWnaDtF0xUuE+33vS6pa3NNs0/rVX+5qN64+6Jmtos/XjfUfm97bI74iM+dtFVSfppelLf5tAsjVt7fNMHMHjxce1RMu7+aM8Ag0Ob/F5bp7DQpuIFCZp/6lH9+JFh+tXZUvUF0ihJ2yulL25ok3+qtP0rCXIVS4W2E3v378yTfnoqAQNmNSyL9gxgAhUMIJZlJ2j7rDb9588tPT7Sp6NfjNP80dJTxcP0K5ukCsk1XZpvteoLL/p1dHqCtn8lQar7pHARaemlK+vjDNHKBSAcAgYQ4973JujeFZacr8Rrztk2uV/dpaUfHXt96f0Opa8YrfdvtjRqpC1YyfiEh/ay9NJD8wlMHsCgxRJJlLBEAlMs3y4tumqifpoe6LuwZtuU2629oqVO2psm6Z0PdX5Jaq/9F/3BEglOBpZIBgcqGEAM8zc3q2TFROXqqO78Sa0elaSNkUY7VLLidDX94KjuLNqlR8Pu/ujb0kgH6+MMyTokf/MBdexcAQCJCkbUUMGACa8vU2Abqiw1ZH1yx6ZlWVr/uk2X5Emjwu3+yD7WFHo8Nr1uaV7FCXaOYsijgjE4UMEAYtgFHUH1Ukm+4M6RSL/fs6XqC2z6uEJyvh1hTIXkrAgsuxw9FLzWUenoCB+d3ic0LlQNIVwACCBgAIOFdURHP2qUP9Lrh1MlJfTpUfd/Z6Lmjw5+0yylPrZLNk2UJG1pGaZrLv5Qq5+29MCy4DjOwgDQDQEDGCwSEnTv3RN1r4FHvffOUY2rGBY8atyhkhUTNe5A4LWd66T0m05X092B5tFxayVlS4ssRa6eABhyCBjAYLDBpnEbAj0ZW3scoNWmG+YM121xw+R8Rn1YxWjT6o2N0injAqd/KnBIV+4+qXp8YMTXV0vPLJam+Zvlb7bLXjGKcAGgC07IAQaRrc3S/MVtWtSpdfto5jDdNqmv/6m36WjmMG2/e6KafhSvA69bSvnJLp331C75D7d1Gfn11ZIrcbSa7h6lZ6btkt/rM/cvAiDmsYskSthFAhO6NGNKCixnjNbYbR/q/Ket0PfTGpv1mce9XW8Ot0310sBulNBukG67SlrqFKiCdPPMYik3XnrKwPHjALtIBgcCRpQQMGBCxy/24xEpLADRRsAYHOjBAGLY11dHewYAEB49GAAAwDgCBgAAMI6AAQAAjCNgAAAA4wgYAADAOAIGAAAwjoABAACMI2AAAADjCBhRkpzAAaoA0B1/Nw4eBIwo+e3lh/kPCQA6SU6w9NvLD0d7GjCEzyKJkra2Nvn9/mhPAwAGFLvdroSEhGhPAwZQwYiSuLg42e32aE8DAAYMu92uuLjuH/GLWEUFAwAwIFiWJZvNFu1pwBAqGACAAYFwMbgQMAAAgHEEDAAAYBwBAwAAGEfAAAAAxhEwAACAcQQMAABgHAEDAAAYR8AAAADGETAAAIBxBAwAAGAcAQMAABhHwAAAAMYRMAAAgHEEDAAAYBwBAwAAGEfAAAAAxhEwAACAcQQMAABgHAEDAAAYR8AAAADGETAAAIBxBAwAAGAcAQMAABhHwAAAAMb9f89fh/kzukK1AAAAAElFTkSuQmCC" width="536" height="330" class="img_ev3q"></p><p><strong>ç‚¹å‡»å·¦ä¾§â€œæœåŠ¡æ¥æºâ€å¯¼èˆªæ ï¼Œç„¶åç‚¹å‡»é¡µé¢å³ä¾§çš„â€œåˆ›å»ºæœåŠ¡æ¥æºâ€æŒ‰é’®ã€‚æŒ‰ç…§ä¸‹å›¾æ‰€ç¤ºå†…å®¹å¡«å†™è¡¨å•å¹¶ç‚¹å‡»â€œç¡®å®šâ€æŒ‰é’®ã€‚</strong></p><p><img loading="lazy" alt="14.png" src="/zh-cn/assets/images/14-38328e899b78267f27be2e99f8f7cb72.png" width="970" height="435" class="img_ev3q"></p><p><strong>ç‚¹å‡»å·¦ä¾§â€œåŸŸåç®¡ç†â€å¯¼èˆªæ ï¼Œç„¶åç‚¹å‡»é¡µé¢å³ä¾§çš„â€œåˆ›å»ºåŸŸåâ€æŒ‰é’®ã€‚æŒ‰ç…§ä¸‹å›¾æ‰€ç¤ºå†…å®¹å¡«å†™è¡¨å•å¹¶ç‚¹å‡»â€œç¡®å®šâ€æŒ‰é’®ã€‚</strong></p><p><img loading="lazy" alt="15.png" src="/zh-cn/assets/images/15-a79679960f6542a80ae4626bb5741ce4.png" width="957" height="467" class="img_ev3q"></p><p><strong>ç‚¹å‡»å·¦ä¾§â€œè·¯ç”±ç®¡ç†â€å¯¼èˆªæ ï¼Œç„¶åç‚¹å‡»é¡µé¢å³ä¾§çš„â€œåˆ›å»ºè·¯ç”±â€æŒ‰é’®ã€‚æŒ‰ç…§ä¸‹å›¾ç‰‡æ‰€ç¤ºå†…å®¹å¡«å†™è¡¨å•å¹¶ç‚¹å‡»â€œç¡®å®šâ€æŒ‰é’®ã€‚</strong></p><p><img loading="lazy" alt="16.png" src="/zh-cn/assets/images/16-f68a4a744e7c6ef008ef7d0b44e03ce0.png" width="979" height="935" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="è¯·æ±‚éªŒè¯">è¯·æ±‚éªŒè¯<a href="#è¯·æ±‚éªŒè¯" class="hash-link" aria-label="è¯·æ±‚éªŒè¯çš„ç›´æ¥é“¾æ¥" title="è¯·æ±‚éªŒè¯çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># should output a JSON object containing request data </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> http://localhost/get?foo</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">bar -H </span><span class="token string" style="color:#e3116c">'host: foo.bar.com'</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="E.png" src="/zh-cn/assets/images/E-bef754877d8c43a714b121f04b4e3071.png" width="465" height="307" class="img_ev3q"></p><p>æ›´å¤šè¯¦æƒ…ä¸éƒ¨ç½²æ–¹æ¡ˆå¯å‚è€ƒ <a href="https://higress.io/zh-cn/docs/user/quickstart" target="_blank" rel="noopener noreferrer">quick start</a></p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Higress å…¨å±€é…ç½®æ§åˆ¶é¢åŸç†åˆ†æ]]></title>
            <link>https://higress.io/zh-cn/blog/configmap</link>
            <guid>https://higress.io/zh-cn/blog/configmap</guid>
            <pubDate>Sun, 23 Jul 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Higress å…¨å±€é…ç½®æ§åˆ¶é¢åŸç†åˆ†æ]]></description>
            <content:encoded><![CDATA[<p>Higress æœ‰ä¸ªå…¨å±€é…ç½® ConfigMap å¯¹è±¡ higress-configï¼Œå‚è€ƒé…ç½®å¦‚ä¸‹ï¼š</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">higress</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">tracing</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">enable</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">sampling</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">timeout</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">500</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">skywalking</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token key atrule" style="color:#00a4db">service</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> skywalking</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">oap</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">server.op</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system.svc.cluster.local</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11800</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ConfigMap</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å…·ä½“é…ç½®è¯´æ˜è¯·å‚è€ƒ <a href="https://higress.io/zh-cn/docs/user/configmap" target="_blank" rel="noopener noreferrer">Higress å…¨å±€é…ç½®è¯´æ˜æ–‡æ¡£</a>ï¼Œ
æœ¬æ–‡ä»‹ç»ä»¥ Tracing ä¸ºä¾‹ï¼Œè¯¦ç»†è¯´æ˜ Tracing å…¨å±€é…ç½®æ˜¯å¦‚ä½•è½¬æˆ EnvoyFilter å’Œå¦‚ä½•åŒæ—¶å®ç°å®æ—¶ä¸‹å‘åˆ° Higress Gatewayè¿‡ç¨‹ã€‚</p><p>æœ¬æ–‡æ¶‰åŠæ•´ä½“æ¶æ„æµç¨‹ã€åˆå§‹åŒ–è¿‡ç¨‹å’Œå¯åŠ¨ã€higress-config å˜æ›´å’Œå¤„ç†æµç¨‹ã€é€šçŸ¥ XDSUpdaterã€æ„å»º EnvoyFilter å’Œä¸‹å‘ä»¥åŠå¦‚ä½•æ‰©å±•å…¨å±€é…ç½®ç­‰å†…å®¹ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ•´ä½“æ¶æ„æµç¨‹">æ•´ä½“æ¶æ„æµç¨‹<a href="#æ•´ä½“æ¶æ„æµç¨‹" class="hash-link" aria-label="æ•´ä½“æ¶æ„æµç¨‹çš„ç›´æ¥é“¾æ¥" title="æ•´ä½“æ¶æ„æµç¨‹çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-æ•´ä½“æ¶æ„">1. æ•´ä½“æ¶æ„<a href="#1-æ•´ä½“æ¶æ„" class="hash-link" aria-label="1. æ•´ä½“æ¶æ„çš„ç›´æ¥é“¾æ¥" title="1. æ•´ä½“æ¶æ„çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><img loading="lazy" alt="img.png" src="/zh-cn/assets/images/configmap1-f2447fa1bd9826e78e29bcdf1f38a4ca.png" width="2704" height="1196" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-æ ¸å¿ƒç»„ä»¶">2. æ ¸å¿ƒç»„ä»¶<a href="#2-æ ¸å¿ƒç»„ä»¶" class="hash-link" aria-label="2. æ ¸å¿ƒç»„ä»¶çš„ç›´æ¥é“¾æ¥" title="2. æ ¸å¿ƒç»„ä»¶çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ul><li>IngressConfig</li></ul><p>IngressConfig æ˜¯ Higress ä¸€ä¸ªæ ¸å¿ƒç»“æ„ä½“, è´Ÿè´£ç›‘æ§ Ingressï¼Œ McpBridge, Http2Rpc, WasmPlugin ç­‰ k8s èµ„æºï¼Œ åŒæ—¶é›†æˆ ConfigStore Interfaceï¼Œé€šè¿‡ List æ¥å£ä¸‹å‘ VirtualService, DestinationRule, EnvoyFilter, ServiceEntry, WasmPlugin ç­‰ CR èµ„æºã€‚</p><ul><li>ConfigmapMgr</li></ul><p>ConfigmapMgr ç»“æ„ä½“è´Ÿè´£æ•´ä¸ªæ ¸å¿ƒæµç¨‹ï¼ŒåŒ…æ‹¬é€šè¿‡ Informer List/Watch æœºåˆ¶ç›‘æ§ higress-config çš„å˜æ›´ï¼ŒåŒæ—¶éå† ItemControllers ä¸‹å‘å˜æ›´é€šçŸ¥ï¼Œæä¾›æ„å»º EnvoyFilter åˆ—è¡¨ç­‰åŠŸèƒ½ã€‚</p><ul><li>TracingController</li></ul><p>TracingController ç»“æ„ä½“è´Ÿè´£å…·ä½“çš„ Tracing æ•°æ®æ ¡éªŒï¼Œæ„å»º Tracing EnvoyFilter, ä»¥åŠé€šè¿‡ ItemEventHandler ä¸‹å‘å˜æ›´é€šçŸ¥ç­‰ã€‚</p><ul><li>HigressConfig</li></ul><p>HigressConfig æ˜¯ higress-config Configmap æ‰€å¯¹åº”æ•°æ®çš„ç»“æ„ä½“ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-æ ¸å¿ƒæµç¨‹">3. æ ¸å¿ƒæµç¨‹<a href="#3-æ ¸å¿ƒæµç¨‹" class="hash-link" aria-label="3. æ ¸å¿ƒæµç¨‹çš„ç›´æ¥é“¾æ¥" title="3. æ ¸å¿ƒæµç¨‹çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ul><li>ç”¨ Informer List/Watch æœºåˆ¶ç›‘æ§ higress-config å˜æ›´ï¼Œæ ¡éªŒå˜æ›´ï¼ŒåŒæ—¶ä¿å­˜å˜æ›´åæ•°æ®ã€‚</li><li>ç”¨å˜æ›´æ•°æ®æ„å»º EnvoyFilterã€‚</li><li>é€šçŸ¥ XDSUpdaterï¼ŒEnvoyFilter æœ‰å˜æ›´ï¼Œé‡æ–°æ‹‰å–æ–°çš„ EnvoyFilter åˆ—è¡¨ã€‚</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="åˆå§‹åŒ–è¿‡ç¨‹">åˆå§‹åŒ–è¿‡ç¨‹<a href="#åˆå§‹åŒ–è¿‡ç¨‹" class="hash-link" aria-label="åˆå§‹åŒ–è¿‡ç¨‹çš„ç›´æ¥é“¾æ¥" title="åˆå§‹åŒ–è¿‡ç¨‹çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-åˆå§‹åŒ–å…¥å£">1. åˆå§‹åŒ–å…¥å£<a href="#1-åˆå§‹åŒ–å…¥å£" class="hash-link" aria-label="1. åˆå§‹åŒ–å…¥å£çš„ç›´æ¥é“¾æ¥" title="1. åˆå§‹åŒ–å…¥å£çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åˆå§‹åŒ–è¿‡ç¨‹å…¥å£åœ¨ NewIngressConfigï¼Œ åˆå§‹åŒ– IngressConfig æ—¶åŒæ—¶æ„å»º HigressConfigController å’Œ ConfigmapMgrã€‚</p><div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// pkg/ingress/config/ingress_config.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">func NewIngressConfig(localKubeClient kube.Client, XDSUpdater model.XDSUpdater, namespace, clusterId string) *IngressConfig {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // æ„å»º controller å’Œ configmapMgr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    higressConfigController := configmap.NewController(localKubeClient, clusterId, namespace)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    config.configmapMgr = configmap.NewConfigmapMgr(XDSUpdater, namespace, higressConfigController, higressConfigController.Lister())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-higressconfigcontroller-åˆå§‹åŒ–">2. HigressConfigController åˆå§‹åŒ–<a href="#2-higressconfigcontroller-åˆå§‹åŒ–" class="hash-link" aria-label="2. HigressConfigController åˆå§‹åŒ–çš„ç›´æ¥é“¾æ¥" title="2. HigressConfigController åˆå§‹åŒ–çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>é€šè¿‡ Higress æä¾› NewCommonController åˆå§‹åŒ– HigressConfigController ç”¨äºç›‘å¬ higress-system å‘½åç©ºé—´ä¸‹ Configmap çš„å˜åŒ–ã€‚</p><div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// pkg/ingress/kube/configmap/controller.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type HigressConfigController controller.Controller[listersv1.ConfigMapNamespaceLister]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">func NewController(client kubeclient.Client, clusterId string, namespace string) HigressConfigController {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    informer := client.KubeInformer().Core().V1().ConfigMaps().Informer()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return controller.NewCommonController("higressConfig", client.KubeInformer().Core().V1().ConfigMaps().Lister().ConfigMaps(namespace),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        informer, GetConfigmap, clusterId)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">func GetConfigmap(lister listersv1.ConfigMapNamespaceLister, namespacedName types.NamespacedName) (controllers.Object, error) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return lister.Get(namespacedName.Name)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-configmapmgr-åˆå§‹åŒ–">3. ConfigmapMgr åˆå§‹åŒ–<a href="#3-configmapmgr-åˆå§‹åŒ–" class="hash-link" aria-label="3. ConfigmapMgr åˆå§‹åŒ–çš„ç›´æ¥é“¾æ¥" title="3. ConfigmapMgr åˆå§‹åŒ–çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ConfigmapMgr åˆå§‹åŒ–å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li>æ„å»º ConfigmapMgr</li><li>è®¾ç½® HigressConfigController configmap æ–°å¢æˆ–è€…æ›´æ–°å›è°ƒå‡½æ•°ä¸º configmapMgr.AddOrUpdateHigressConfig</li><li>è®¾ç½® HigressConfig ç»“æ„ä½“é»˜è®¤å€¼</li><li>åˆå§‹åŒ– TracingController</li><li>æŠŠ tracingController æ·»åŠ åˆ° configmapMgr itemControllers æ•°ç»„é‡Œ</li><li>åˆå§‹åŒ– ItemEventHandlerï¼Œ åŒæ—¶éå† itemControllersï¼Œè®¾ç½® ItemEventHandler</li></ul><div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// pkg/ingress/kube/configmap/controller.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">func NewConfigmapMgr(XDSUpdater model.XDSUpdater, namespace string, higressConfigController HigressConfigController, higressConfigLister listersv1.ConfigMapNamespaceLister) *ConfigmapMgr {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //  æ„å»º ConfigmapMgr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    configmapMgr := &amp;ConfigmapMgr{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        XDSUpdater:              XDSUpdater,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Namespace:               namespace,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        HigressConfigController: higressConfigController,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        HigressConfigLister:     higressConfigLister,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        higressConfig:           atomic.Value{},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // è®¾ç½® HigressConfigController configmap æ–°å¢æˆ–è€…æ›´æ–°å›è°ƒå‡½æ•° configmapMgr.AddOrUpdateHigressConfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    configmapMgr.HigressConfigController.AddEventHandler(configmapMgr.AddOrUpdateHigressConfig)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // è®¾ç½® HigressConfig ç»“æ„ä½“é»˜è®¤å€¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    configmapMgr.SetHigressConfig(NewDefaultHigressConfig())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // åˆå§‹åŒ– TracingController</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tracingController := NewTracingController(namespace)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // æŠŠ tracingController æ·»åŠ åˆ° configmapMgr itemControllers é‡Œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    configmapMgr.AddItemControllers(tracingController)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // åˆå§‹åŒ– itemEventHandlerï¼Œ åŒæ—¶éå† itemControllersï¼Œè®¾ç½® itemEventHandler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    configmapMgr.initEventHandlers()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // è¿”å› configmapMgr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return configmapMgr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¯åŠ¨">å¯åŠ¨<a href="#å¯åŠ¨" class="hash-link" aria-label="å¯åŠ¨çš„ç›´æ¥é“¾æ¥" title="å¯åŠ¨çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>åœ¨ IngressConfig æ·»åŠ  HigressConfigController Run() å’Œ HasSynced() æ§åˆ¶æµç¨‹ã€‚</p><div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// pkg/ingress/config/ingress_config.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">func (m *IngressConfig) Run(stop &lt;-chan struct{}) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // å¯åŠ¨ HigressConfigController</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    go m.configmapMgr.HigressConfigController.Run(stop)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">func (m *IngressConfig) HasSynced() bool {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ....</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if !m.configmapMgr.HigressConfigController.HasSynced() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="higress-config-å˜æ›´å’Œå¤„ç†æµç¨‹">higress-config å˜æ›´å’Œå¤„ç†æµç¨‹<a href="#higress-config-å˜æ›´å’Œå¤„ç†æµç¨‹" class="hash-link" aria-label="higress-config å˜æ›´å’Œå¤„ç†æµç¨‹çš„ç›´æ¥é“¾æ¥" title="higress-config å˜æ›´å’Œå¤„ç†æµç¨‹çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-configmapmgr-å˜æ›´å¤„ç†">1. configmapMgr å˜æ›´å¤„ç†<a href="#1-configmapmgr-å˜æ›´å¤„ç†" class="hash-link" aria-label="1. configmapMgr å˜æ›´å¤„ç†çš„ç›´æ¥é“¾æ¥" title="1. configmapMgr å˜æ›´å¤„ç†çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ConfigmapMgr é€šè¿‡æ”¶åˆ° HigressConfigController é€šçŸ¥æ¥å¤„ç†å˜æ›´è¯·æ±‚ã€‚</p><p>å…·ä½“å˜æ›´æµç¨‹å¦‚ä¸‹ï¼š</p><ul><li>åˆ¤æ–­æ˜¯å¦ higress-system å‘½åç©ºé—´ä¸‹ name ä¸º higress-config Configmap å‘ç”Ÿäº†å˜åŒ–ï¼Œå¦‚æœä¸æ˜¯å°±è¿”å›ã€‚</li><li>è·å– higress-config å†…å®¹ã€‚</li><li>éå† ItemControllers, æ ¡éªŒ higress-config é…ç½®æ˜¯å¦åˆæ³•ï¼Œå¦‚æœæœ‰ä¸€ä¸ªè¿”å›ä¸åˆæ³•ï¼Œå°±è¿”å›ã€‚</li><li>å’Œä¸Šæ¬¡ä¿å­˜åœ¨æœ¬åœ° higressConfig æ¯”å¯¹, æ£€æŸ¥è¿™æ¬¡æ•°æ®æ˜¯å¦æœ‰å˜åŒ–ï¼Œå¦‚æœæ²¡æœ‰å˜åŒ–å°±è¿”å›ã€‚</li><li>å¦‚æœæ•°æ®æœ‰å˜åŒ–ï¼Œå°±éå† ItemControllers é€šçŸ¥æ¯ä¸ª itemController æ•°æ®æœ‰å˜åŒ–ï¼ŒåŒæ—¶ä¿å­˜è¿™æ¬¡å˜åŒ–åˆ°æœ¬åœ° higressConfigã€‚</li></ul><div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// pkg/ingress/kube/configmap/controller.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">func (c *ConfigmapMgr) AddOrUpdateHigressConfig(name util.ClusterNamespacedName) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // åªç›‘å¬ higress-system å‘½åç©ºé—´ä¸‹ name ä¸º higress-config Configmap çš„å˜åŒ–</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if name.Namespace != c.Namespace || name.Name != HigressConfigMapName {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // è·å– higress-config å†…å®¹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    higressConfigmap, err := c.HigressConfigLister.Get(HigressConfigMapName)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // é€šè¿‡ yaml.Unmarshal è½¬æˆ HigressConfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    newHigressConfig := NewDefaultHigressConfig()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if err = yaml.Unmarshal([]byte(higressConfigmap.Data[HigressConfigMapKey]), newHigressConfig); err != nil {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IngressLog.Errorf("data:%s,  convert to higress config error, error: %+v", higressConfigmap.Data[HigressConfigMapKey], err)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // éå† ItemControllers, æ ¡éªŒé…ç½®æ˜¯å¦åˆæ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for _, itemController := range c.ItemControllers {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if itemErr := itemController.ValidHigressConfig(newHigressConfig); itemErr != nil {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            IngressLog.Errorf("configmap %s controller valid higress config error, error: %+v", itemController.GetName(), itemErr)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // å’Œä¸Šæ¬¡æ¯”å¯¹è¿™æ¬¡æ•°æ®æ˜¯å¦æœ‰å˜æ›´</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    oldHigressConfig := c.GetHigressConfig()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    result, _ := c.CompareHigressConfig(oldHigressConfig, newHigressConfig)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // å¦‚æœæ•°æ®æœ‰å˜æ›´ï¼Œå°±éå† ItemControllers é€šçŸ¥æ¯ä¸ª itemController æ•°æ®æœ‰å˜æ›´ï¼ŒåŒæ—¶ä¿å­˜è¿™æ¬¡å˜æ›´åˆ°æœ¬åœ°ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if result == ResultReplace || result == ResultDelete {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for _, itemController := range c.ItemControllers {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            IngressLog.Infof("configmap %s controller AddOrUpdateHigressConfig", itemController.GetName())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if itemErr := itemController.AddOrUpdateHigressConfig(name, oldHigressConfig, newHigressConfig); itemErr != nil {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                IngressLog.Errorf("configmap %s controller AddOrUpdateHigressConfig error, error: %+v", itemController.GetName(), itemErr)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // ä¿å­˜è¿™æ¬¡å˜æ›´</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        c.SetHigressConfig(newHigressConfig)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-tracingcontroller-å˜æ›´å¤„ç†">2. TracingController å˜æ›´å¤„ç†<a href="#2-tracingcontroller-å˜æ›´å¤„ç†" class="hash-link" aria-label="2. TracingController å˜æ›´å¤„ç†çš„ç›´æ¥é“¾æ¥" title="2. TracingController å˜æ›´å¤„ç†çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>TracingController å˜æ›´å¤„ç†å°±æ¯”è¾ƒç®€å•ï¼š</p><ul><li>æ£€æŸ¥ Tracing è¿™éƒ¨åˆ†æ•°æ®æ˜¯å¦æœ‰å˜æ›´ã€‚</li><li>å¦‚æœæœ‰å˜æ›´ï¼ŒDeepCopy ä¸€ä»½ Tracing æ•°æ®ä¿å­˜åˆ°æœ¬åœ°ï¼ŒåŒæ—¶é€šè¿‡ eventHandler ä¸‹å‘å˜æ›´é€šçŸ¥ã€‚</li></ul><div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// pkg/ingress/kube/configmap/tracing.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">func (t *TracingController) AddOrUpdateHigressConfig(name util.ClusterNamespacedName, old *HigressConfig, new *HigressConfig) error {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // æ£€æŸ¥ Tracing éƒ¨åˆ†æ•°æ®æ˜¯å¦æœ‰å˜æ›´</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    result, _ := compareTracing(old.Tracing, new.Tracing)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // å¦‚æœæœ‰å˜æ›´ï¼ŒDeepCopy ä¸€ä»½ Tracing æ•°æ®ä¿å­˜åˆ°æœ¬åœ°ï¼ŒåŒæ—¶é€šè¿‡ eventHandler ä¸‹å‘å˜æ›´é€šçŸ¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    switch result {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    case ResultReplace:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if newTracing, err := deepCopyTracing(new.Tracing); err != nil {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            IngressLog.Infof("tracing deepcopy error:%v", err)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            t.SetTracing(newTracing)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            IngressLog.Infof("AddOrUpdate Higress config tracing")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            t.eventHandler(higressTracingEnvoyFilterName)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            IngressLog.Infof("send event with filter name:%s", higressTracingEnvoyFilterName)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    case ResultDelete:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t.SetTracing(NewDefaultTracing())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IngressLog.Infof("Delete Higress config tracing")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t.eventHandler(higressTracingEnvoyFilterName)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IngressLog.Infof("send event with filter name:%s", higressTracingEnvoyFilterName)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return nil</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="é€šçŸ¥-xdsupdater">é€šçŸ¥ XDSUpdater<a href="#é€šçŸ¥-xdsupdater" class="hash-link" aria-label="é€šçŸ¥ XDSUpdaterçš„ç›´æ¥é“¾æ¥" title="é€šçŸ¥ XDSUpdaterçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>åœ¨ ConfigmapMgr åˆå§‹åŒ–æ—¶å€™è°ƒç”¨ configmapMgr.initEventHandlers()ï¼Œ è¿™ä¸ª func ä¼šåˆ›å»º ItemEventHandler, åŒæ—¶éå† ItemControllers è®¾ç½® ItemEventHandlerã€‚</p><div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// pkg/ingress/kube/configmap/config.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type ItemEventHandler = func(name string)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// pkg/ingress/kube/configmap/controller.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">func (c *ConfigmapMgr) initEventHandlers() error {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    itemEventHandler := func(name string) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    c.XDSUpdater.ConfigUpdate(&amp;model.PushRequest{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Full: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ConfigsUpdated: map[model.ConfigKey]struct{}{{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Kind:      gvk.EnvoyFilter,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Name:      name,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Namespace: c.Namespace,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }: {}},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Reason: []model.TriggerReason{ModelUpdatedReason},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for _, itemController := range c.ItemControllers {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        itemController.RegisterItemEventHandler(itemEventHandler)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return nil</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¿™é‡Œ XDSUpdater æ˜¯ä» IngressConfig åˆå§‹åŒ–ä¼ å…¥ï¼Œ XDSUpdater.ConfigUpdate() ç”¨äºæ›´æ–°é€šçŸ¥ä¸‹å‘ã€‚</p><p>è¿›ä¸€æ­¥è·Ÿè¸ªå¯ä»¥å‘ç°åœ¨ Higress controller server å¯åŠ¨æ—¶æ‰§è¡Œ s.initXdsServer å‡½æ•°åˆ›å»º s.xdsServerï¼Œå…·ä½“é€»è¾‘ä¸åœ¨æœ¬æ–‡è®¨è®ºèŒƒå›´, æœ‰å…´è¶£å¯ä»¥è¿›ä¸€æ­¥é˜…è¯»æºç ã€‚</p><div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// pkg/bootstrap/server.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">func NewServer(args *ServerArgs) (*Server, error) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s := &amp;Server{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ServerArgs:      args,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        httpMux:         http.NewServeMux(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        environment:     e,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        readinessProbes: make(map[string]readinessProbe),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        server:          server.New(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s.environment.Watcher = mesh.NewFixedWatcher(&amp;v1alpha1.MeshConfig{})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s.environment.Init()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    initFuncList := []func() error{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        s.initKubeClient,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        s.initXdsServer,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        s.initHttpServer,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        s.initConfigController,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        s.initRegistryEventHandlers,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        s.initAuthenticators,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for _, f := range initFuncList {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if err := f(); err != nil {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return nil, err</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return s, nil</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// pkg/bootstrap/server.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">func (s *Server) initXdsServer() error {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    log.Info("init xds server")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s.xdsServer = xds.NewDiscoveryServer(s.environment, nil, PodName, PodNamespace, s.RegistryOptions.KubeOptions.ClusterAliases)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return s.initGrpcServer()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ„å»ºå’Œä¸‹å‘-envoyfilters">æ„å»ºå’Œä¸‹å‘ EnvoyFilters<a href="#æ„å»ºå’Œä¸‹å‘-envoyfilters" class="hash-link" aria-label="æ„å»ºå’Œä¸‹å‘ EnvoyFiltersçš„ç›´æ¥é“¾æ¥" title="æ„å»ºå’Œä¸‹å‘ EnvoyFiltersçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-ingressconfig-list-ä¸‹å‘-envoyfilters-åˆ—è¡¨">1. IngressConfig List ä¸‹å‘ EnvoyFilters åˆ—è¡¨<a href="#1-ingressconfig-list-ä¸‹å‘-envoyfilters-åˆ—è¡¨" class="hash-link" aria-label="1. IngressConfig List ä¸‹å‘ EnvoyFilters åˆ—è¡¨çš„ç›´æ¥é“¾æ¥" title="1. IngressConfig List ä¸‹å‘ EnvoyFilters åˆ—è¡¨çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>IngressConfig List ç”¨äº VirtualService, DestinationRule, EnvoyFilter, ServiceEntry, WasmPlugin ç­‰ CR èµ„æºä¸‹å‘ï¼Œ è¿™é‡Œä¸»è¦å…³æ³¨ EnvoyFilter CR èµ„æºä¸‹å‘ã€‚</p><div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// pkg/ingress/config/ingress_config.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">func (m *IngressConfig) List(typ config.GroupVersionKind, namespace string) ([]config.Config, error) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if typ != gvk.Gateway &amp;&amp;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        typ != gvk.VirtualService &amp;&amp;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        typ != gvk.DestinationRule &amp;&amp;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        typ != gvk.EnvoyFilter &amp;&amp;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        typ != gvk.ServiceEntry &amp;&amp;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        typ != gvk.WasmPlugin {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return nil, common.ErrUnsupportedOp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if typ == gvk.EnvoyFilter {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        m.mutex.RLock()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        defer m.mutex.RUnlock()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var envoyFilters []config.Config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // è°ƒç”¨ ConfigmapMgr ConstructEnvoyFilters è·å–éœ€è¦ä¸‹å‘ EnvoyFilter åˆ—è¡¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        configmapEnvoyFilters, err := m.configmapMgr.ConstructEnvoyFilters()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if err != nil {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            IngressLog.Errorf("Construct configmap EnvoyFilters error %v", err)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            for _, envoyFilter := range configmapEnvoyFilters {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                envoyFilters = append(envoyFilters, *envoyFilter)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            IngressLog.Infof("Append %d configmap EnvoyFilters", len(configmapEnvoyFilters))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if len(envoyFilters) == 0 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            IngressLog.Infof("resource type %s, configs number %d", typ, len(m.cachedEnvoyFilters))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return m.cachedEnvoyFilters, nil</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // éœ€è¦ä¸‹å‘ configmap EnvoyFilter åˆ—è¡¨ å’Œ m.cachedEnvoyFilters åˆ—è¡¨èšåˆä¸€ä¸‹ä¸‹å‘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        envoyFilters = append(envoyFilters, m.cachedEnvoyFilters...)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IngressLog.Infof("resource type %s, configs number %d", typ, len(envoyFilters))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return envoyFilters, nil</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}   </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è°ƒç”¨ ConfigmapMgr ConstructEnvoyFilters è·å–éœ€è¦ä¸‹å‘ EnvoyFilter åˆ—è¡¨ï¼Œ åŒæ—¶å’Œ m.cachedEnvoyFilters åˆ—è¡¨èšåˆä¸€ä¸‹å†ä¸‹å‘ã€‚</p><p>è¿™é‡Œ m.cachedEnvoyFilters æ˜¯åœ¨æ„å»º VirtualService æ—¶ç”Ÿæˆï¼Œæœ‰å…´è¶£å¯ä»¥è¿›ä¸€æ­¥é˜…è¯» IngressConfig æºç ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-configmapmgr-æ„å»º-envoyfilter-åˆ—è¡¨">2. ConfigmapMgr æ„å»º EnvoyFilter åˆ—è¡¨<a href="#2-configmapmgr-æ„å»º-envoyfilter-åˆ—è¡¨" class="hash-link" aria-label="2. ConfigmapMgr æ„å»º EnvoyFilter åˆ—è¡¨çš„ç›´æ¥é“¾æ¥" title="2. ConfigmapMgr æ„å»º EnvoyFilter åˆ—è¡¨çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>è¿™é‡Œæ¯”è¾ƒç®€å•ï¼Œéå†ä¸€ä¸‹ ItemControllersï¼Œèšåˆæ¯ä¸ª itemController è¿”å›çš„ EnvoyFilters.</p><div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// /pkg/ingress/kube/configmap/controller.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">func (c *ConfigmapMgr) ConstructEnvoyFilters() ([]*config.Config, error) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    configs := make([]*config.Config, 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for _, itemController := range c.ItemControllers {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IngressLog.Infof("controller %s ConstructEnvoyFilters", itemController.GetName())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if itemConfigs, err := itemController.ConstructEnvoyFilters(); err != nil {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            IngressLog.Errorf("controller %s ConstructEnvoyFilters error, error: %+v", itemController.GetName(), err)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            configs = append(configs, itemConfigs...)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return configs, nil</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-tracingcontroller-æ„å»º-envoyfilters">3. TracingController æ„å»º EnvoyFilters<a href="#3-tracingcontroller-æ„å»º-envoyfilters" class="hash-link" aria-label="3. TracingController æ„å»º EnvoyFiltersçš„ç›´æ¥é“¾æ¥" title="3. TracingController æ„å»º EnvoyFiltersçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>è¿™é‡Œå°±æ¯”è¾ƒç®€å•ï¼Œæ ¹æ®ä¿å­˜çš„ Tracing æ•°æ®æ„å»ºå¯¹åº”çš„ EnvoyFilter</p><div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// pkg/ingress/kube/configmap/tracing.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">func (t *TracingController) ConstructEnvoyFilters() ([]*config.Config, error) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tracingConfig := t.constructTracingTracer(tracing, namespace)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if len(tracingConfig) == 0 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return configs, nil</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    config := &amp;config.Config{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Meta: config.Meta{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            GroupVersionKind: gvk.EnvoyFilter,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Name:             higressTracingEnvoyFilterName,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Namespace:        namespace,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Spec: &amp;networking.EnvoyFilter{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ConfigPatches: []*networking.EnvoyFilter_EnvoyConfigObjectPatch{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    ApplyTo: networking.EnvoyFilter_NETWORK_FILTER,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    Match: &amp;networking.EnvoyFilter_EnvoyConfigObjectMatch{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        Context: networking.EnvoyFilter_GATEWAY,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        ObjectTypes: &amp;networking.EnvoyFilter_EnvoyConfigObjectMatch_Listener{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            Listener: &amp;networking.EnvoyFilter_ListenerMatch{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                FilterChain: &amp;networking.EnvoyFilter_ListenerMatch_FilterChainMatch{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    Filter: &amp;networking.EnvoyFilter_ListenerMatch_FilterMatch{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                        Name: "envoy.filters.network.http_connection_manager",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    Patch: &amp;networking.EnvoyFilter_Patch{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        Operation: networking.EnvoyFilter_Patch_MERGE,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        Value:     util.BuildPatchStruct(tracingConfig),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    ApplyTo: networking.EnvoyFilter_HTTP_FILTER,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    Match: &amp;networking.EnvoyFilter_EnvoyConfigObjectMatch{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        Context: networking.EnvoyFilter_GATEWAY,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        ObjectTypes: &amp;networking.EnvoyFilter_EnvoyConfigObjectMatch_Listener{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            Listener: &amp;networking.EnvoyFilter_ListenerMatch{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                FilterChain: &amp;networking.EnvoyFilter_ListenerMatch_FilterChainMatch{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    Filter: &amp;networking.EnvoyFilter_ListenerMatch_FilterMatch{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                        Name: "envoy.filters.network.http_connection_manager",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                        SubFilter: &amp;networking.EnvoyFilter_ListenerMatch_SubFilterMatch{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            Name: "envoy.filters.http.router",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    Patch: &amp;networking.EnvoyFilter_Patch{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        Operation: networking.EnvoyFilter_Patch_MERGE,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        Value: util.BuildPatchStruct(`{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            "name":"envoy.filters.http.router",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            "typed_config":{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                "@type": "type.googleapis.com/envoy.extensions.filters.http.router.v3.Router",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                "start_child_span": true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        }`),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    configs = append(configs, config)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return configs, nil</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¦‚ä½•æ‰©å±•å…¨å±€é…ç½®">å¦‚ä½•æ‰©å±•å…¨å±€é…ç½®<a href="#å¦‚ä½•æ‰©å±•å…¨å±€é…ç½®" class="hash-link" aria-label="å¦‚ä½•æ‰©å±•å…¨å±€é…ç½®çš„ç›´æ¥é“¾æ¥" title="å¦‚ä½•æ‰©å±•å…¨å±€é…ç½®çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-higressconfig-ç»“æ„ä½“æ·»åŠ å¯¹åº”çš„æ‰©å±•é…ç½®">1. HigressConfig ç»“æ„ä½“æ·»åŠ å¯¹åº”çš„æ‰©å±•é…ç½®<a href="#1-higressconfig-ç»“æ„ä½“æ·»åŠ å¯¹åº”çš„æ‰©å±•é…ç½®" class="hash-link" aria-label="1. HigressConfig ç»“æ„ä½“æ·»åŠ å¯¹åº”çš„æ‰©å±•é…ç½®çš„ç›´æ¥é“¾æ¥" title="1. HigressConfig ç»“æ„ä½“æ·»åŠ å¯¹åº”çš„æ‰©å±•é…ç½®çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">type HigressConfig struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Tracing *Tracing `json:"tracing,omitempty"`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // åœ¨è¿™é‡Œæ·»åŠ å¯¹åº”çš„æ•°æ®ç»“æ„æ¥æ‰©å±•é…ç½®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-å¢åŠ æ‰©å±•é…ç½®é»˜è®¤å€¼">2. å¢åŠ æ‰©å±•é…ç½®é»˜è®¤å€¼<a href="#2-å¢åŠ æ‰©å±•é…ç½®é»˜è®¤å€¼" class="hash-link" aria-label="2. å¢åŠ æ‰©å±•é…ç½®é»˜è®¤å€¼çš„ç›´æ¥é“¾æ¥" title="2. å¢åŠ æ‰©å±•é…ç½®é»˜è®¤å€¼çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// pkg/ingress/kube/configmap/config.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">func NewDefaultHigressConfig() *HigressConfig {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    higressConfig := &amp;HigressConfig{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Tracing: NewDefaultTracing(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // åœ¨è¿™é‡Œå¢åŠ æ‰©å±•é…ç½®é»˜è®¤å€¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return higressConfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-å®ç°-itemcontroller-interface">3. å®ç° ItemController interface<a href="#3-å®ç°-itemcontroller-interface" class="hash-link" aria-label="3. å®ç° ItemController interfaceçš„ç›´æ¥é“¾æ¥" title="3. å®ç° ItemController interfaceçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">type ItemController interface {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    GetName() string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AddOrUpdateHigressConfig(name util.ClusterNamespacedName, old *HigressConfig, new *HigressConfig) error</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ValidHigressConfig(higressConfig *HigressConfig) error</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ConstructEnvoyFilters() ([]*config.Config, error)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    RegisterItemEventHandler(eventHandler ItemEventHandler)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-åˆå§‹åŒ–æ‰©å±•é…ç½®åŒæ—¶æ·»åŠ åˆ°-itemcontrollers">4. åˆå§‹åŒ–æ‰©å±•é…ç½®ï¼ŒåŒæ—¶æ·»åŠ åˆ° ItemControllers<a href="#4-åˆå§‹åŒ–æ‰©å±•é…ç½®åŒæ—¶æ·»åŠ åˆ°-itemcontrollers" class="hash-link" aria-label="4. åˆå§‹åŒ–æ‰©å±•é…ç½®ï¼ŒåŒæ—¶æ·»åŠ åˆ° ItemControllersçš„ç›´æ¥é“¾æ¥" title="4. åˆå§‹åŒ–æ‰©å±•é…ç½®ï¼ŒåŒæ—¶æ·»åŠ åˆ° ItemControllersçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">func NewConfigmapMgr(XDSUpdater model.XDSUpdater, namespace string, higressConfigController HigressConfigController, higressConfigLister listersv1.ConfigMapNamespaceLister) *ConfigmapMgr {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tracingController := NewTracingController(namespace)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    configmapMgr.AddItemControllers(tracingController)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // åœ¨è¿™é‡Œåˆå§‹åŒ–æ‰©å±•é…ç½®ï¼ŒåŒæ—¶æ·»åŠ åˆ° ItemControllers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    configmapMgr.initEventHandlers()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return configmapMgr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å‚ä¸ç¤¾åŒºè´¡çŒ®">å‚ä¸ç¤¾åŒºè´¡çŒ®<a href="#å‚ä¸ç¤¾åŒºè´¡çŒ®" class="hash-link" aria-label="å‚ä¸ç¤¾åŒºè´¡çŒ®çš„ç›´æ¥é“¾æ¥" title="å‚ä¸ç¤¾åŒºè´¡çŒ®çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>Higress å¼€æºè´¡çŒ®å°ç»„æ­£åœ¨ç«çƒ­æ‹›å‹Ÿè´¡çŒ®è€…ã€‚æ—©æœŸå‚ä¸å¼€æºæ›´å®¹æ˜“æˆä¸ºé¡¹ç›® Committerï¼Œå¹¶æœ‰æ›´å¤šæœºä¼šæˆä¸º Higress PMC(Project Management Committee) çš„ä¸€å‘˜ï¼Œå‚ä¸ä¸»å¯¼ Higress ç¤¾åŒºçš„å‰è¿›æ–¹å‘ã€‚
æ¬¢è¿åŠ å…¥ Higress ç¤¾åŒºç¾¤ï¼š</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i1/O1CN0166Gkdt1cRTVjJ2skL_!!6000000003597-2-tps-720-405.png" class="img_ev3q"></p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[HigressåŠ©åŠ›AIå¤§æ¨¡å‹ä¼ä¸šçº§åº”ç”¨è½åœ°]]></title>
            <link>https://higress.io/zh-cn/blog/ai_plugin</link>
            <guid>https://higress.io/zh-cn/blog/ai_plugin</guid>
            <pubDate>Wed, 12 Jul 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[ä»‹ç»Higresså¦‚ä½•é€šè¿‡AI proxy pluginå¯¹æ¥AIå¤§æ¨¡å‹å¹¶å®ç°ç½‘å…³çº§APIç®¡ç†]]></description>
            <content:encoded><![CDATA[<p>ä»¥ ChatGPT ä¸ºä»£è¡¨çš„ AIGC æŠ€æœ¯ä¸ºä¼ä¸šç”Ÿäº§å¸¦æ¥äº†å·¨å¤§çš„å˜åŒ–ï¼Œå¹¶åœ¨ä¼ä¸šåº”ç”¨å¼€å‘é¢†åŸŸå æ®ä¸€å¸­ä¹‹åœ°ã€‚AI å¤§æ¨¡å‹å‡­å€Ÿå…¶å¼ºå¤§çš„å­¦ä¹ èƒ½åŠ›ï¼Œå¯ä»¥å¸®åŠ©äººä»¬å®Œæˆå„ç§å¤æ‚çš„ä»»åŠ¡ï¼Œä¾‹å¦‚å¸®åŠ©å¼€å‘äººå‘˜ç¼–å†™ä¸è°ƒè¯•ä»£ç ã€ç ”ç©¶äººå‘˜å¿«é€Ÿäº†è§£ç§‘ç ”é¢†åŸŸã€è¥é”€äººå‘˜æ’°å†™äº§å“æè¿°ã€è®¾è®¡äººå‘˜è®¾è®¡æ–°ä½œå“ç­‰ç­‰ã€‚è®¸å¤šä¼ä¸šæ¢ç´¢å¦‚ä½•é™ä½ AI å¤§æ¨¡å‹çš„ä½¿ç”¨æˆæœ¬ã€‚é€šè¿‡ç½‘å…³è¿›è¡Œ AI å¤§æ¨¡å‹çš„ API ç®¡ç†æˆä¸ºäº†å¾ˆå¸¸è§„çš„éœ€æ±‚ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="higress-å¦‚ä½•é™ä½-ai-å¤§æ¨¡å‹ä½¿ç”¨æˆæœ¬">Higress å¦‚ä½•é™ä½ AI å¤§æ¨¡å‹ä½¿ç”¨æˆæœ¬ï¼Ÿ<a href="#higress-å¦‚ä½•é™ä½-ai-å¤§æ¨¡å‹ä½¿ç”¨æˆæœ¬" class="hash-link" aria-label="Higress å¦‚ä½•é™ä½ AI å¤§æ¨¡å‹ä½¿ç”¨æˆæœ¬ï¼Ÿçš„ç›´æ¥é“¾æ¥" title="Higress å¦‚ä½•é™ä½ AI å¤§æ¨¡å‹ä½¿ç”¨æˆæœ¬ï¼Ÿçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>Higress GitHubï¼š <a href="https://github.com/alibaba/higress" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/higress</a></p><p>ä»¥ OpenAI ä¸ºä¾‹ï¼ŒOpenAI çš„ API è°ƒç”¨å¹¶ä¸æ˜¯åŸºäºè¯·æ±‚é‡æˆ–è€…è®¢é˜…æ—¶é—´æ¥è®¡è´¹ï¼Œè€Œæ˜¯åŸºäºæ¯ä¸ªè¯·æ±‚çš„ä½¿ç”¨é‡æ¥è®¡è´¹ã€‚å¯¹äº AI å¤§æ¨¡å‹æ¥è¯´ï¼Œæ¨¡å‹è¾“å…¥ä¸è¾“å‡ºçš„ token æ•°å¯ä»¥æ¯”è¾ƒå¥½çš„è¡¡é‡å½“å‰æ¨¡å‹è¿›è¡Œæ¨ç†ä»»åŠ¡çš„å¤æ‚åº¦ã€‚å› æ­¤åŸºäº token ä½œä¸ºè¯·æ±‚ä½¿ç”¨é‡è¿›è¡Œè®¡è´¹æ˜¯ OpenAI-API çš„æ ‡å‡†è®¡è´¹ç­–ç•¥ã€‚å¯¹äºä¸åŒçš„æ¨¡å‹ token çš„è®¡è´¹æ ‡å‡†ä¹Ÿä¸åŒï¼Œè¶Šå¤æ‚çš„æ¨¡å‹ä¼šç”Ÿæˆè¶Šå¥½çš„ç»“æœï¼Œä½†ä¹Ÿä¼šå¸¦æ¥æ›´é«˜çš„è®¡è´¹ã€‚OpenAI é€šè¿‡ä¸ºç”¨æˆ·åˆ†å‘ API å¯†é’¥æ¥å®Œæˆç”¨æˆ·çš„é‰´æƒä¸æ”¶è´¹ç­‰åŠŸèƒ½ã€‚</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i1/O1CN01U3c6nD1grokneioDi_!!6000000004196-2-tps-3392-1436.png" alt="image.png" class="img_ev3q"></p><p>å¯¹äºç»„ç»‡æ¥è¯´ï¼Œä¸ºæ¯ä½æˆå‘˜ç”³è¯· AI å¤§æ¨¡å‹çš„è®¿é—®æƒé™ï¼ˆ API-Key ï¼‰æ˜¾ç„¶æ˜¯ä¸ç°å®çš„ã€‚åˆ†æ•£çš„ API å¯†é’¥å°†ä¸åˆ©äºç»„ç»‡è¿›è¡Œ API çš„ç”¨é‡è®¡ç®—ã€ç®¡ç†ä¸ä»˜è´¹ï¼Œä»è€Œå¢åŠ  AI å¤§æ¨¡å‹çš„ä½¿ç”¨æˆæœ¬ã€‚å…¶æ¬¡ï¼Œå¯¹äºç»„ç»‡æ¥è¯´ï¼ŒAI æ¨¡å‹çš„é€‰å‹ã€ä½¿ç”¨é¢‘ç‡å’Œæˆå‘˜ä½¿ç”¨æƒé™ã€ä»¥åŠå‘ AI å¤§æ¨¡å‹æš´éœ²å“ªäº›æ•°æ®éƒ½æ˜¯åœ¨ç®¡ç†ä¸­éœ€è¦ç€é‡å…³æ³¨çš„åŠŸèƒ½ã€‚</p><p>Higress åŸºäºä¸°å¯Œçš„æ’ä»¶èƒ½åŠ›ï¼Œæä¾›äº†è®¤è¯é‰´æƒã€è¯·æ±‚è¿‡æ»¤ã€æµé‡æ§åˆ¶ã€ç”¨é‡ç›‘æµ‹å’Œå®‰å…¨é˜²æŠ¤ç­‰åŠŸèƒ½ï¼Œèƒ½å¤Ÿå¸®åŠ©ç»„ç»‡ä¸ AI å¤§æ¨¡å‹çš„ API äº¤äº’å˜å¾—æ›´åŠ å®‰å…¨ã€å¯é å’Œå¯è§‚å¯Ÿï¼šåŸºäº Higress æä¾›çš„è®¤è¯é‰´æƒèƒ½åŠ›ï¼Œç»„ç»‡å¯ä»¥å®ç°é€šè¿‡ç»Ÿä¸€çš„ API å¯†é’¥è¿›è¡Œ AI æ¨¡å‹çš„è°ƒç”¨é‡ç®¡ç†å’Œä»˜è´¹ï¼Œå¹¶ä¸ºå›¢é˜Ÿæˆå‘˜æˆäºˆä¸åŒçš„ AI æ¨¡å‹è®¿é—®æƒé™ï¼›åŸºäº Higress æä¾›çš„æµé‡æ§åˆ¶èƒ½åŠ›ï¼Œç»„ç»‡èƒ½ä¸ºä¸åŒçš„æ¨¡å‹ä¸ç”¨æˆ·è®¾ç½®å·®å¼‚åŒ–çš„è®¿é—®é€Ÿç‡é™åˆ¶ï¼Œæœ‰æ•ˆé™ä½ AI æ¨¡å‹çš„ä½¿ç”¨æˆæœ¬ï¼›åŸºäº Higress æä¾›çš„è¯·æ±‚æ‹¦æˆªèƒ½åŠ›ï¼Œç»„ç»‡èƒ½å¤Ÿæœ‰æ•ˆè¿‡æ»¤å«æ•æ„Ÿä¿¡æ¯çš„è®¿é—®è¯·æ±‚ï¼Œé˜²æŠ¤éƒ¨åˆ†å†…éƒ¨ç«™ç‚¹èµ„æºä¸å¯¹å¤–æš´éœ²ï¼Œä»è€Œæœ‰æ•ˆä¿éšœå†…éƒ¨æ•°æ®å®‰å…¨ï¼›åŸºäº<a href="https://www.alibabacloud.com/product/microservices-engine?spm=higress-website.topbar.0.0.0" target="_blank" rel="noopener noreferrer">å•†ä¸šç‰ˆ Higress</a>æä¾›çš„å¼€ç®±å³ç”¨çš„æŒ‡æ ‡æŸ¥è¯¢å’Œæ—¥å¿—è®°å½•çš„èƒ½åŠ›ï¼Œç»„ç»‡èƒ½å¤Ÿå®Œæˆå¯¹ä¸åŒç”¨æˆ·çš„ AI æ¨¡å‹è°ƒç”¨çš„ç”¨é‡è§‚æµ‹ä¸åˆ†æï¼Œä»è€Œåˆ¶å®šæ›´åŠ åˆç†çš„ AI æ¨¡å‹ä½¿ç”¨ç­–ç•¥ã€‚</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i4/O1CN01439pNf1OX3ia9UQ4Z_!!6000000001714-2-tps-2962-1688.png" alt="image.png" class="img_ev3q">                           </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="higress-å¯¹æ¥-openai-å¤§è¯­è¨€æ¨¡å‹å®æˆ˜">Higress å¯¹æ¥ OpenAI å¤§è¯­è¨€æ¨¡å‹å®æˆ˜<a href="#higress-å¯¹æ¥-openai-å¤§è¯­è¨€æ¨¡å‹å®æˆ˜" class="hash-link" aria-label="Higress å¯¹æ¥ OpenAI å¤§è¯­è¨€æ¨¡å‹å®æˆ˜çš„ç›´æ¥é“¾æ¥" title="Higress å¯¹æ¥ OpenAI å¤§è¯­è¨€æ¨¡å‹å®æˆ˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ä¸‹é¢æˆ‘ä»¬å°†ä»¥ Higress å¯¹æ¥ OpenAI å¤§è¯­è¨€æ¨¡å‹ä¸ºä¾‹ï¼Œä»‹ç» Higress å¦‚ä½•æ— ç¼å¯¹æ¥ AI å¤§æ¨¡å‹ã€‚æ•´ä½“æ–¹æ¡ˆå¦‚å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬åŸºäº WASM æ‹“å±•äº† Higress æ’ä»¶ï¼Œå®ç°äº†å¯¹ OpenAI è¯­è¨€æ¨¡å‹çš„è¯·æ±‚ä»£ç†è½¬å‘ã€‚åŸºäº Higress æä¾›çš„ Key-Auth è®¤è¯æ’ä»¶çš„èƒ½åŠ›ï¼Œæˆ‘ä»¬å®ç°ç»Ÿä¸€ API-Key ä¸‹çš„å¤šç§Ÿæˆ·è®¤è¯ã€‚åŸºäº Higress æä¾›çš„ Request-Block è¯·æ±‚è¿‡æ»¤çš„èƒ½åŠ›ï¼Œæˆ‘ä»¬å°†å®ç°å«æ•æ„Ÿä¿¡æ¯çš„è¯·æ±‚æ‹¦æˆªï¼Œä¿éšœç”¨æˆ·æ•°æ®å®‰å…¨ã€‚</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i2/O1CN01WjbLBi23A451Ip2xp_!!6000000007214-2-tps-1544-368.png" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å‰ææ¡ä»¶">å‰ææ¡ä»¶ï¼š<a href="#å‰ææ¡ä»¶" class="hash-link" aria-label="å‰ææ¡ä»¶ï¼šçš„ç›´æ¥é“¾æ¥" title="å‰ææ¡ä»¶ï¼šçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ol><li>å®‰è£… Higress ï¼Œå‚è€ƒ<a href="https://higress.io/zh-cn/docs/ops/deploy-by-helm/#%E6%94%AF%E6%8C%81-istio-crd%E5%8F%AF%E9%80%89" target="_blank" rel="noopener noreferrer">Higress å®‰è£…éƒ¨ç½²æ–‡æ¡£</a>ã€‚</li><li>å‡†å¤‡ Go è¯­è¨€å¼€å‘ WASM æ’ä»¶çš„å¼€å‘ç¯å¢ƒï¼Œå‚è€ƒ<a href="https://higress.io/zh-cn/docs/user/wasm-go" target="_blank" rel="noopener noreferrer">ä½¿ç”¨ GO è¯­è¨€å¼€å‘ WASM æ’ä»¶</a>ã€‚</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="åŸºäº-wasm-çš„-ai-proxy-plugin">åŸºäº WASM çš„ AI Proxy Plugin<a href="#åŸºäº-wasm-çš„-ai-proxy-plugin" class="hash-link" aria-label="åŸºäº WASM çš„ AI Proxy Pluginçš„ç›´æ¥é“¾æ¥" title="åŸºäº WASM çš„ AI Proxy Pluginçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ä¸‹æ–‡å°†ç»™å‡ºåŸºäº Higress ä¸ WASM å®ç°çš„ AI å¤§æ¨¡å‹ API ä»£ç†æ’ä»¶æ–¹æ¡ˆã€‚Higress æ”¯æŒåŸºäº WASM å®ç°å¯¹å¤–æ‰©å±•çš„èƒ½åŠ›ã€‚WASM æ’ä»¶æä¾›çš„å¤šè¯­è¨€ç”Ÿæ€å’Œçƒ­æ’æ‹”æœºåˆ¶ä¸ºæ’ä»¶çš„å®ç°å’Œéƒ¨ç½²æä¾›äº†ä¾¿åˆ©ã€‚Higress åŒæ—¶æ”¯æŒåœ¨æ’ä»¶ä¸­è¯·æ±‚å¤–éƒ¨æœåŠ¡ï¼Œä¸º AI ä»£ç†æ’ä»¶çš„å®ç°æä¾›äº†é«˜æ•ˆçš„è§£å†³è·¯å¾„ã€‚</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="å®ç°ç¤ºä¾‹">å®ç°ç¤ºä¾‹ï¼š<a href="#å®ç°ç¤ºä¾‹" class="hash-link" aria-label="å®ç°ç¤ºä¾‹ï¼šçš„ç›´æ¥é“¾æ¥" title="å®ç°ç¤ºä¾‹ï¼šçš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>æˆ‘ä»¬ç»™å‡º OpenAI-API çš„ä»£ç†æ’ä»¶çš„å®ç°ç¤ºä¾‹ï¼Œè¯¦æƒ…è¯·å‚è€ƒ<a href="https://github.com/alibaba/higress/tree/main/plugins/wasm-go/extensions/chatgpt-proxy" target="_blank" rel="noopener noreferrer">AI proxy plugin</a>ã€‚ä¸‹åˆ—ä»£ç å®ç°äº†æ’ä»¶ç›¸å…³é…ç½®å®Œæˆä¹‹åï¼ŒåŸºäº HTTP è‡ªåŠ¨å°†è¯·æ±‚ä»£ç†è½¬å‘åˆ° OpenAI-API ï¼Œå¹¶æ¥æ”¶æ¥è‡ª OpenAI-API çš„å“åº”ï¼Œä»è€Œå®Œæˆ AI æ¨¡å‹çš„è°ƒç”¨ï¼Œå…·ä½“å®ç°æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>é€šè¿‡ RouteCluster æ–¹æ³•æŒ‡å®šå…·ä½“çš„ OpenAI-API çš„ host ï¼Œç¡®è®¤ç”¨æˆ·è¯·æ±‚è½¬å‘çš„å…·ä½“è·¯å¾„ï¼Œå¹¶æ–°å»ºç”¨äºè¯·æ±‚ä»£ç†è½¬å‘çš„ HTTP Client ã€‚</li></ol><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">parseConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">json gjson</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Result</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> config </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">MyConfig</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> log wrapper</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Log</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    chatgptUri </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> json</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"chatgptUri"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">String</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> chatgptHost </span><span class="token builtin">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> chatgptUri </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">""</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ChatgptPath </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/v1/completions"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        chatgptHost </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"api.openai.com"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//è¯·æ±‚é»˜è®¤è½¬å‘åˆ° OpenAI-API</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">client </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> wrapper</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">NewClusterClient</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">wrapper</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">RouteCluster</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> chatgptHost</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//é€šè¿‡ RouteCluster æ–¹æ³•ç¡®è®¤è¯·æ±‚è½¬å‘çš„å…·ä½“ host</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token operator" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>å¯¹ç”¨æˆ·è¯·æ±‚è¿›è¡Œ OpenAI-API çš„æ ¼å¼å°è£…ï¼Œé€šè¿‡ HTTP Client è¿›è¡Œè¯·æ±‚è½¬å‘ä¸å“åº”æ¥å—ï¼Œå¹¶å°†å“åº”è½¬å‘ç»™ç”¨æˆ·ã€‚</li></ol><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">//OpenAI API æ¥æ”¶çš„è¯·æ±‚ä½“æ¨¡ç‰ˆï¼Œè¯¦è§ï¼š https://platform.openai.com/docs/api-reference/chat</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> bodyTemplate </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">`</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">"model":"%s",</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">"prompt":"%s",</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">"temperature":0.9,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">"max_tokens": 150,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">"top_p": 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">"frequency_penalty": 0.0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">"presence_penalty": 0.6,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">"stop": ["%s", "%s"]</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">onHttpRequestHeaders</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx wrapper</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">HttpContext</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> config MyConfig</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> log wrapper</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Log</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> types</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Action </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">//æ ¹æ®ç”¨æˆ·çš„è¯·æ±‚å†…å®¹è¿›è¡Œ OpenAI-API è¯·æ±‚ä½“å°è£… </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    body </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Sprintf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">bodyTemplate</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Model</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> prompt</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">HumanId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AIId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">//é€šè¿‡ HTTP Client è¿›è¡Œè½¬å‘</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    err </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Post</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ChatgptPath</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">"Content-Type"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"application/json"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">"Authorization"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Bearer "</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ApiKey</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token function" style="color:#d73a49">byte</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">body</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">statusCode </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> responseHeaders http</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Header</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> responseBody </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">byte</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> headers </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> key</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> value </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">range</span><span class="token plain"> responseHeaders </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                headers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">headers</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">//æ¥æ”¶æ¥è‡ªäº OpenAI-API çš„å“åº”å¹¶è½¬å‘ç»™ç”¨æˆ·</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            proxywasm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SendHttpResponse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">uint32</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">statusCode</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> headers</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> responseBody</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åœ¨ Higress ä¸­å¯ç”¨è‡ªå®šä¹‰çš„ AI-Proxy-Wasm æ’ä»¶æµç¨‹å¦‚ä¸‹ï¼š
<img loading="lazy" src="https://img.alicdn.com/imgextra/i1/O1CN012qI5vq1gOVPEwxqRr_!!6000000004132-2-tps-2000-1064.png" class="img_ev3q"></p><p>æœ¬ç¤ºä¾‹æä¾›å·²ç»ç¼–è¯‘å¥½çš„ AI-proxy-plugin-wasm æ–‡ä»¶å¹¶å®Œæˆå¯¹åº” docker é•œåƒçš„æ„å»ºå’Œæ¨é€ï¼Œæ¨èé…ç½®å¦‚ä¸‹æ‰€ç¤ºï¼š</p><table><thead><tr><th>åç§°</th><th>æ¨èé…ç½®</th></tr></thead><tbody><tr><td>é•œåƒåœ°å€</td><td>oci://registry.cn-hangzhou.aliyuncs.com/zwj_test/chatgpt-proxy:1.0.0</td></tr><tr><td>æ’ä»¶æ‰§è¡Œé˜¶æ®µ</td><td>é‰´æƒé˜¶æ®µ</td></tr><tr><td>æ’ä»¶æ‰§è¡Œä¼˜å…ˆçº§</td><td>1</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="æ’ä»¶é…ç½®è¯´æ˜">æ’ä»¶é…ç½®è¯´æ˜ï¼š<a href="#æ’ä»¶é…ç½®è¯´æ˜" class="hash-link" aria-label="æ’ä»¶é…ç½®è¯´æ˜ï¼šçš„ç›´æ¥é“¾æ¥" title="æ’ä»¶é…ç½®è¯´æ˜ï¼šçš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>æ’ä»¶é…ç½®ç®€å•ï¼Œæ”¯æŒå…¨å±€/åŸŸåçº§/è·¯ç”±çº§çš„ä»£ç†è½¬å‘ã€‚æ¨èè¿›è¡Œè·¯ç”±çº§é…ç½®ï¼šé€‰ä¸­å¯¹åº”çš„<strong>è·¯ç”±é…ç½®</strong>-é€‰ä¸­<strong>å¯¹åº”è·¯ç”±</strong>-<strong>ç­–ç•¥</strong>-<strong>å¯ç”¨æ’ä»¶</strong>ã€‚é…ç½®å­—æ®µåŒ…æ‹¬ï¼š</p><table><thead><tr><th>åç§°</th><th>æ•°æ®ç±»å‹</th><th>å¡«å†™è¦æ±‚</th><th>é»˜è®¤å€¼</th><th>æè¿°</th></tr></thead><tbody><tr><td>model</td><td>string</td><td>é€‰å¡«</td><td>text-davinci-003</td><td>è°ƒç”¨çš„æ¨¡å‹åç§°</td></tr><tr><td>apiKey</td><td>string</td><td>å¿…å¡«</td><td>-</td><td>OpenAI-API å¯†é’¥ï¼Œè¯¦æƒ…å¯å‚è€ƒ</td></tr><tr><td>promptParam</td><td>string</td><td>é€‰å¡«</td><td>prompt</td><td>prompt çš„æ¥æºå­—æ®µåç§°ï¼ŒURL å‚æ•°</td></tr><tr><td>chatgptUri</td><td>string</td><td>é€‰å¡«</td><td>api.openai.com/v1/completions</td><td>è°ƒç”¨ AI æ¨¡å‹æœåŠ¡çš„ URL è·¯å¾„ï¼Œé»˜è®¤å€¼ä¸º OpenAI çš„ API è°ƒç”¨è·¯å¾„</td></tr></tbody></table><p>ç¤ºä¾‹é…ç½®å¦‚ä¸‹ï¼š</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiKey</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"xxxxxxxxxxxxxxxxxx"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">model</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"curie"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">promptParam</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"text"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ ¹æ®è¯¥é…ç½®ï¼Œç½‘å…³ä»£ç†åˆ° OpenAI-API ä¸‹çš„ curie æ¨¡å‹ï¼Œç”¨æˆ·é€šè¿‡ text å…³é”®å­—åœ¨ url ä¸­è¾“å…¥æ–‡æœ¬ã€‚</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"http://{GatewayIP}/?text=Say,hello"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¾—åˆ° OpenAI-API çš„å“åº”ï¼š
<img loading="lazy" src="https://img.alicdn.com/imgextra/i1/O1CN010ZHdxO1ZOmKXfjVaV_!!6000000003185-2-tps-3170-520.png" alt="image.png" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="åŸºäº-key-auth-çš„å¤šç§Ÿæˆ·è®¤è¯">åŸºäº Key Auth çš„å¤šç§Ÿæˆ·è®¤è¯<a href="#åŸºäº-key-auth-çš„å¤šç§Ÿæˆ·è®¤è¯" class="hash-link" aria-label="åŸºäº Key Auth çš„å¤šç§Ÿæˆ·è®¤è¯çš„ç›´æ¥é“¾æ¥" title="åŸºäº Key Auth çš„å¤šç§Ÿæˆ·è®¤è¯çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ä¸åŒäºä¸ºæ¯ä½æˆå‘˜é¢å‘ OpenAI-API å¯†é’¥çš„å½¢å¼ï¼Œä¼ä¸šå¯ä»¥åŸºäº Higress ç½‘å…³æä¾›çš„è®¤è¯é‰´æƒèƒ½åŠ›ï¼Œä¾é å†…éƒ¨æˆæƒï¼ˆå¦‚ Key Auth ç­‰ï¼‰æ¥ç®¡ç†æˆå‘˜å¯¹ AI æ¨¡å‹å¯¹è®¿é—®æƒé™ï¼Œä»è€Œé™åˆ¶æˆå‘˜å¯ä»¥ä½¿ç”¨çš„æœåŠ¡å’Œæ¨¡å‹ï¼Œå¹¶ä¾é ç»Ÿä¸€çš„ AI-API å¯†é’¥è¿›è¡Œè¯·æ±‚ä»£ç†è½¬å‘å®ç°å¯¹ API ç”¨é‡çš„ç»Ÿä¸€ç®¡ç†ã€‚æ¥ä¸‹æ¥ä»¥ Key Auth ä¸ºä¾‹ä»‹ç» Higress çš„å¤šç§Ÿæˆ·è®¤è¯èƒ½åŠ›ã€‚</p><p>Key Auth æ’ä»¶å®ç°äº†åŸºäºç½‘å…³å†… API Key è¿›è¡Œè®¤è¯å’Œé‰´æƒçš„åŠŸèƒ½ï¼Œæ”¯æŒä» HTTP è¯·æ±‚çš„ URL å‚æ•°æˆ–è€…è¯·æ±‚å¤´è§£æ API Key ï¼ŒåŒæ—¶éªŒè¯è¯¥ API æ˜¯å¦æœ‰æƒé™è®¿é—®ã€‚é€šè¿‡åœ¨<strong>Higress æ§åˆ¶å°</strong>-<strong>æ’ä»¶å¸‚åœº</strong>-<strong>Key Auth</strong>è¿›è¡Œ<strong>å…¨å±€é…ç½®</strong>å’Œ<strong>è·¯ç”±çº§é…ç½®</strong>ï¼Œå³å¯å®ç° Higress ç½‘å…³çš„å¤šç§Ÿæˆ·è®¤è¯ã€‚</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i1/O1CN01qaQxNw1DIthKfowWi_!!6000000000194-2-tps-2773-1350.png" class="img_ev3q"></p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">consumers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">credential</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"xxxxxx"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"consumer1"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">credential</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"yyyyyy"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"consumer2"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">global_auth</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">in_header</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">keys</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"apikey"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i4/O1CN01Or1jY41SYDAyTJ6ve_!!6000000002258-2-tps-2018-951.png" class="img_ev3q"></p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">allow</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">consumer1</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä»¥ä¸Šé…ç½®å®šä¹‰äº†æŒ‡å‘ AI æ¨¡å‹æœåŠ¡çš„æ¶ˆè´¹è€…ç»„<code>consumers</code>ï¼Œå¹¶ä¸”åªæœ‰<code>consumer1</code>å…·å¤‡è®¿é—®å½“å‰è·¯ç”±ä¸‹ AI æ¨¡å‹æœåŠ¡çš„æƒé™ã€‚</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl "http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">GatewayIP</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">/</span><span class="token punctuation" style="color:#393A34">?</span><span class="token plain">text=Say</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">hello"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#è¯·æ±‚æœªæä¾› API-Key ï¼Œè¿”å› 401</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl "http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">GatewayIP</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">/</span><span class="token punctuation" style="color:#393A34">?</span><span class="token plain">text=Say</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">hello" </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">H "apikey</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">zzzzzz"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#è¯·æ±‚æä¾›çš„ API-Key æœªåœ¨æ¶ˆè´¹è€…ç»„å†…ï¼Œæ— æƒè®¿é—®ï¼Œè¿”å› 401</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl  "http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">GatewayIP</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">/</span><span class="token punctuation" style="color:#393A34">?</span><span class="token plain">text=Say</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">hello" </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">H "apikey</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">yyyyyy"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#æ ¹æ®è¯·æ±‚æä¾›çš„ API-Keyy åŒ¹é…åˆ°çš„è°ƒç”¨è€…æ—  AI æ¨¡å‹æœåŠ¡çš„è®¿é—®æƒé™ï¼Œè¿”å› 403</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl "http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">GatewayIP</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">/</span><span class="token punctuation" style="color:#393A34">?</span><span class="token plain">text=Say</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">hello" </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">H "apikey</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">xxxxxx"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#è¯·æ±‚åˆæ³•ä¸”æœ‰ AI æ¨¡å‹æœåŠ¡è®¿é—®æƒé™ï¼Œè¯·æ±‚å°†è¢«ä»£ç†åˆ° AI æ¨¡å‹ï¼Œæ­£å¸¸å¾—åˆ° OpenAI-API çš„å“åº”</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Higress é™¤äº†æä¾›ç½‘å…³çº§å¤šç§Ÿæˆ·è®¤è¯å¤–ï¼Œè¿˜èƒ½æä¾›é™æµç­‰èƒ½åŠ›ã€‚Key Rate Limit æ’ä»¶å¯ä»¥æ ¹æ®ç”¨æˆ·åœ¨æ¶ˆè´¹ç»„ä¸­çš„æˆå‘˜èµ„æ ¼å¯¹ç”¨æˆ·è¯·æ±‚é€Ÿç‡è¿›è¡Œé™åˆ¶ï¼Œä»è€Œé™åˆ¶åº”ç”¨ç¨‹åºå¯¹é«˜æˆæœ¬ AI å¤§æ¨¡å‹æœåŠ¡çš„æ¶ˆè€—ã€‚åŸºäºå¤šç§Ÿæˆ·è®¤è¯ä¸é™æµç­‰åŠŸèƒ½ï¼ŒHigress å¯ä»¥å®Œå…¨æ§åˆ¶ AI å¤§æ¨¡å‹ API çš„è®¿é—®æƒé™ã€è®¿é—®æ•°é‡ä¸è°ƒç”¨æˆæœ¬ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="åŸºäº-request-block-ä¿éšœæ•°æ®å®‰å…¨">åŸºäº Request Block ä¿éšœæ•°æ®å®‰å…¨<a href="#åŸºäº-request-block-ä¿éšœæ•°æ®å®‰å…¨" class="hash-link" aria-label="åŸºäº Request Block ä¿éšœæ•°æ®å®‰å…¨çš„ç›´æ¥é“¾æ¥" title="åŸºäº Request Block ä¿éšœæ•°æ®å®‰å…¨çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>å¯¹äº AI å¤§æ¨¡å‹å°¤å…¶æ˜¯è¯­è¨€æ¨¡å‹æ¥è¯´ï¼Œè¦å¾—åˆ°è‰¯å¥½çš„è¿”å›å¾€å¾€éœ€è¦ç”¨æˆ·æä¾›è¶³å¤Ÿçš„æç¤ºï¼ˆ prompt ï¼‰ä½œä¸ºæ¨¡å‹è¾“å…¥ã€‚è¿™ä¹Ÿæ„å‘³ç€ç»„ç»‡å’Œä¸ªäººå¯èƒ½ä¼šåœ¨æä¾›æç¤ºçš„è¿‡ç¨‹ä¸­é¢ä¸´æ•°æ®æ³„æ¼çš„é£é™©ã€‚å› æ­¤å¦‚ä½•åœ¨ä½¿ç”¨ AI æ¨¡å‹çš„è¿‡ç¨‹ä¸­ä¿éšœæ•°æ®å®‰å…¨ä¹Ÿæ˜¯ API è°ƒç”¨æ–¹é¢ä¸´é‡è¦é—®é¢˜ã€‚ä¿æŠ¤æ•°æ®å®‰å…¨æ¶‰åŠåˆ°å¯¹ AI æ¨¡å‹çš„ API è°ƒç”¨æ¸ é“è¿›è¡Œä¸¥æ ¼çš„æ§åˆ¶ã€‚ä¸€ç§æ–¹å¼æ˜¯ä½¿ç”¨ç‰¹å®šçš„ç»æ‰¹å‡†çš„æ¨¡å‹ä¸å…¶å‘å¸ƒçš„ API ã€‚å¦ä¸€ç§æ–¹å¼æ˜¯å¯¹å«æ•æ„Ÿä¿¡æ¯çš„ç”¨æˆ·è¯·æ±‚è¿›è¡Œæ‹¦æˆªã€‚è¿™å¯ä»¥é€šè¿‡åœ¨ç½‘å…³çº§åˆ«è®¾ç½®ç‰¹å®šçš„è¯·æ±‚æ‹¦æˆªæ¥å®ç°ã€‚Higress åŸºäº Request Block æ’ä»¶æä¾›è¯·æ±‚æ‹¦æˆªèƒ½åŠ›ï¼Œæ—¢èƒ½é˜²æ­¢æœªç»æˆæƒçš„æ¨¡å‹è®¿é—®ç”¨æˆ·ä¿¡æ¯ï¼Œåˆèƒ½é˜²æ­¢å«æ•æ„Ÿä¿¡æ¯çš„ç”¨æˆ·è¯·æ±‚æš´éœ²åˆ°å¤–ç½‘ã€‚</p><p>Request Block æ’ä»¶åŸºäº URL ã€è¯·æ±‚å¤´ç­‰ç‰¹å¾å±è”½ HTTP è¯·æ±‚ï¼Œå¯ä»¥ç”¨äºé˜²æŠ¤ç«™ç‚¹èµ„æºä¸å¯¹å¤–æš´éœ²ã€‚ é€šè¿‡åœ¨<strong>Higress æ§åˆ¶å°</strong>-<strong>æ’ä»¶å¸‚åœº-Request Block</strong>è¿›è¡Œå±è”½å­—æ®µé…ç½®ï¼Œå³å¯é˜²æ­¢å«æ•æ„Ÿå­—æ®µçš„è¯·æ±‚å¯¹å¤–å‘é€ã€‚</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i3/O1CN01mqWHos1XDD5yRxOeX_!!6000000002889-2-tps-2905-914.png" class="img_ev3q"></p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">blocked_code</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">404</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">block_urls</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> password</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> pw</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">case_sensitive</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä»¥ä¸Šé…ç½®å®šä¹‰äº†å½“å‰è·¯ç”±ä¸‹åŸºäº URL çš„å±è”½å­—æ®µï¼Œå…¶ä¸­å«æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚ password ã€pw ï¼‰çš„è¯·æ±‚å°†è¢«å±è”½ã€‚</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl "http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">GatewayIP</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">/</span><span class="token punctuation" style="color:#393A34">?</span><span class="token plain">text=Mypassword=xxxxxx" </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">H "apikey</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">xxxxxx"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl "http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">GatewayIP</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">/</span><span class="token punctuation" style="color:#393A34">?</span><span class="token plain">text=pw=xxxxxx" </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">H "apikey</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">xxxxxx"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#ä¸Šè¿°è¯·æ±‚å°†è¢«ç¦æ­¢è®¿é—®ï¼Œè¿”å› 404</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="åŸºäºå•†ä¸šç‰ˆ-higress-çš„ç”¨é‡è§‚æµ‹ä¸åˆ†æ">åŸºäºå•†ä¸šç‰ˆ Higress çš„ç”¨é‡è§‚æµ‹ä¸åˆ†æ<a href="#åŸºäºå•†ä¸šç‰ˆ-higress-çš„ç”¨é‡è§‚æµ‹ä¸åˆ†æ" class="hash-link" aria-label="åŸºäºå•†ä¸šç‰ˆ Higress çš„ç”¨é‡è§‚æµ‹ä¸åˆ†æçš„ç›´æ¥é“¾æ¥" title="åŸºäºå•†ä¸šç‰ˆ Higress çš„ç”¨é‡è§‚æµ‹ä¸åˆ†æçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>å¯¹äºç»„ç»‡æ¥è¯´ï¼Œå¯¹å„ç”¨æˆ·è¿›è¡Œ AI æ¨¡å‹è°ƒç”¨çš„ç”¨é‡è§‚æµ‹å’Œåˆ†ææœ‰åŠ©äºäº†è§£å…¶ä½¿ç”¨æƒ…å†µä¸äº§ç”Ÿçš„æˆæœ¬ã€‚å¯¹äºä¸ªäººç”¨æˆ·ï¼Œäº†è§£è‡ªå·±çš„è°ƒç”¨é‡å’Œå¼€é”€ä¹Ÿæ˜¯å¿…è¦çš„ã€‚å› æ­¤ï¼Œåœ¨ç½‘å…³å±‚è¿›è¡Œè°ƒç”¨çš„è§‚æµ‹å’Œåˆ†æå¯¹äº AI å¤§æ¨¡å‹çš„ API ç®¡ç†æ˜¯å¿…è¦çš„èƒ½åŠ›ã€‚<a href="https://www.alibabacloud.com/product/microservices-engine?spm=higress-website.topbar.0.0.0" target="_blank" rel="noopener noreferrer">å•†ä¸šç‰ˆ Higress</a>ä¸å„ç§æŒ‡æ ‡ä¸æ—¥å¿—ç³»ç»Ÿè¿›è¡Œäº†æ·±åº¦é›†æˆï¼Œæä¾›äº†å¼€ç®±å³ç”¨çš„ç”¨é‡è§‚æµ‹åˆ†ææŠ¥å‘Šæ„å»ºæœºåˆ¶ï¼Œå¯ä»¥å®æ—¶æŸ¥çœ‹å„ç§ API çš„ä½¿ç”¨æƒ…å†µï¼Œå¹¶æ ¹æ®å„ç±»å‚æ•°è¿›è¡Œè¿‡æ»¤ï¼Œä»è€Œæ›´å¥½çš„äº†è§£ API ä½¿ç”¨æƒ…å†µã€‚</p><p>ä»¥è§‚å¯Ÿå„ç”¨æˆ·å¯¹ OpenAI-Curie æ¨¡å‹çš„è°ƒç”¨é‡ä¸ºä¾‹ï¼Œç”¨æˆ·å¯é€šè¿‡<strong>MSE ç®¡ç†æ§åˆ¶å°</strong>-<strong>äº‘åŸç”Ÿç½‘å…³</strong>-<strong>ç½‘å…³å®ä¾‹</strong>-<strong>å‚æ•°é…ç½®-æ—¥å¿—æ ¼å¼è°ƒæ•´</strong>ä¸­è®¾ç½®åŒºåˆ†ç”¨æˆ·çš„å¯è§‚æµ‹æ€§å‚æ•°è¯·æ±‚å¤´ï¼š<code>x-mse-consumer</code>ï¼Œå°†å…¶åˆ—å…¥è§‚æµ‹åˆ—è¡¨ã€‚ä¹‹åè¿›å…¥<strong>è§‚æµ‹åˆ†æ-æ—¥å¿—ä¸­å¿ƒ</strong>ä¸­è®¾ç½®ä½¿ç”¨ç»Ÿè®¡å›¾è¡¨åŠŸèƒ½å³å¯å®Œæˆå¯¹ API çš„ç”¨é‡è§‚æµ‹å’Œåˆ†æã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œç”¨æˆ·<code>consumer1</code>ä¸ç”¨æˆ·<code>consumer2</code>çš„å¯¹ OpenAI-Curie æ¨¡å‹çš„è°ƒç”¨é‡ä»¥é¥¼çŠ¶å›¾å½¢å¼å‘ˆç°ã€‚
<img loading="lazy" src="https://img.alicdn.com/imgextra/i1/O1CN01OuAcQD24P0cStcIJE_!!6000000007382-2-tps-2362-864.png" alt="image.png" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="åŠ å…¥-higress-ç¤¾åŒº">åŠ å…¥ Higress ç¤¾åŒº<a href="#åŠ å…¥-higress-ç¤¾åŒº" class="hash-link" aria-label="åŠ å…¥ Higress ç¤¾åŒºçš„ç›´æ¥é“¾æ¥" title="åŠ å…¥ Higress ç¤¾åŒºçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i2/O1CN01Ahr6qi1vL2e1xPJEy_!!6000000006155-2-tps-1685-1091.png" alt="image.png" class="img_ev3q"></p><p>å¦‚æœæ‚¨è§‰å¾— Higress å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œæ¬¢è¿å‰å¾€<a href="https://github.com/alibaba/higress" target="_blank" rel="noopener noreferrer">github: Higress</a>ä¸ºæˆ‘ä»¬ star ä¸€ä¸‹ï¼</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[ç¾æ´½æ™ºèƒ½å®¢æœä½¿ç”¨ Higress ç»Ÿä¸€ç½‘å…³è½åœ°å®è·µ]]></title>
            <link>https://higress.io/zh-cn/blog/user-mq</link>
            <guid>https://higress.io/zh-cn/blog/user-mq</guid>
            <pubDate>Mon, 10 Jul 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[ç¾æ´½åœ¨é˜¿é‡Œäº‘ä¸Šé‡‡ç”¨Higressä¼ä¸šç‰ˆï¼Œåœ¨å…¶ä»–äº‘é‡‡ç”¨Higresså¼€æºç‰ˆï¼Œç»Ÿä¸€äº†ç½‘å…³æ¶æ„]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="å…³äºç¾æ´½">å…³äºç¾æ´½<a href="#å…³äºç¾æ´½" class="hash-link" aria-label="å…³äºç¾æ´½çš„ç›´æ¥é“¾æ¥" title="å…³äºç¾æ´½çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ç¾æ´½æ˜¯ä¸€å®¶å…¨çƒæ™ºèƒ½äº‘å®¢æœæœåŠ¡å•†ï¼Œæä¾›ä¸€ç«™å¼æ™ºèƒ½å®¢æœè§£å†³æ–¹æ¡ˆï¼Œæ——ä¸‹æ‹¥æœ‰åœ¨çº¿å®¢æœã€å·¥å•ç³»ç»Ÿã€å‘¼å«ä¸­å¿ƒã€å®¢æœæœºå™¨äººã€è¯­éŸ³æœºå™¨äººã€è¥é”€æœºå™¨äººç­‰äº§å“åŠæœåŠ¡ã€‚ç¾æ´½æˆç«‹äº2014å¹´ï¼Œæ€»éƒ¨ä½äºæˆéƒ½ï¼Œç›®å‰æœåŠ¡ä¼ä¸šç”¨æˆ·å·²è¶…è¿‡40ä¸‡å®¶ï¼Œè¦†ç›–å¤šä¸ªè¡Œä¸šé¢†åŸŸã€‚ç¾æ´½çš„å®¢æœç³»ç»Ÿæ”¯æŒå¤šå¹³å°ä½¿ç”¨ï¼ŒåŒ…æ‹¬Web ç½‘é¡µç«¯ã€æ‰‹æœºå®¢æˆ·ç«¯ã€PC å®¢æˆ·ç«¯ï¼ŒåŒæ—¶ç¾æ´½ä¹Ÿæä¾›äº†å¼€æ”¾ API å¹³å°ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="éœ€æ±‚èƒŒæ™¯">éœ€æ±‚èƒŒæ™¯<a href="#éœ€æ±‚èƒŒæ™¯" class="hash-link" aria-label="éœ€æ±‚èƒŒæ™¯çš„ç›´æ¥é“¾æ¥" title="éœ€æ±‚èƒŒæ™¯çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ol><li>å¤šæ¡ä¸šåŠ¡çº¿ä½¿ç”¨äº†äº†ä¸åŒç¼–ç¨‹è¯­è¨€ï¼Œåœ¨å¾®æœåŠ¡åŒ–æ¼”è¿›çš„è·¯ä¸Šå›°éš¾é‡é‡ï¼›</li><li>å†å²æ¶æ„ä½¿ç”¨å¤šä¸ªæµé‡è½¬å‘ä¸­é—´ä»¶å¯¼è‡´æµé‡è·¯å¾„å†—é•¿ã€å¤æ‚ä¸”æ•…éšœæ’æŸ¥å›°éš¾ï¼ˆLB + OpenResty + Nginx + Caddy + SpringCloud-Gatewayï¼‰ï¼›</li><li>WebSocket é•¿è¿æ¥æœåŠ¡åœ¨å¤šé‡è·¯ç”±å±‚ä¸Šä¸æ”¯æŒçƒ­æ›´æ–°ï¼Œç»´æŠ¤æˆæœ¬é«˜ã€‚</li></ol><p><strong>å†å²æ¶æ„çš„æµé‡æ‹“æ‰‘å›¾å¦‚ä¸‹ï¼š</strong></p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i4/O1CN01AJitLM1kgbW6yGLmV_!!6000000004713-0-tps-627-517.jpg" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="éœ€æ±‚ç›®æ ‡">éœ€æ±‚ç›®æ ‡<a href="#éœ€æ±‚ç›®æ ‡" class="hash-link" aria-label="éœ€æ±‚ç›®æ ‡çš„ç›´æ¥é“¾æ¥" title="éœ€æ±‚ç›®æ ‡çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ol><li>æ‰¾åˆ°ä¸€ä¸ªç»Ÿä¸€ç½‘å…³ï¼Œèƒ½å¤Ÿä¸€æ¬¡æ€§è§£å†³æµé‡ç½‘å…³å’Œä¸šåŠ¡ç½‘å…³çš„è·¯ç”±è½¬å‘éœ€æ±‚ï¼›</li><li>æ”¯æŒè·¯ç”±è§„åˆ™çƒ­æ›´æ–°ï¼Œè§£å†³ WebSocket è¿æ¥åœ¨è·¯ç”±æ›´æ–°æˆ–ç½‘ç»œæŠ–åŠ¨æ—¶äº§ç”Ÿçš„é‡è¿é£æš´ï¼›</li><li>å‰ç½®API è¯·æ±‚æƒé™æ ¡éªŒã€ç­¾åæ ¡éªŒã€WAF æ‹¦æˆªã€CC æ‹¦æˆªï¼›</li><li>å¯è§†åŒ–ç»Ÿä¸€ç½‘å…³çš„åå°æ“ä½œï¼Œè®©æ™®é€šå‘˜å·¥ä¹Ÿèƒ½ä¸Šæ‰‹ï¼›</li><li>å¤šäº‘æ¶æ„ä¸‹ç§æœ‰åŒ–éƒ¨ç½²æ”¯æŒã€‚</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ–¹æ¡ˆæ¨ªå‘å¯¹æ¯”">æ–¹æ¡ˆæ¨ªå‘å¯¹æ¯”<a href="#æ–¹æ¡ˆæ¨ªå‘å¯¹æ¯”" class="hash-link" aria-label="æ–¹æ¡ˆæ¨ªå‘å¯¹æ¯”çš„ç›´æ¥é“¾æ¥" title="æ–¹æ¡ˆæ¨ªå‘å¯¹æ¯”çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>é€šè¿‡å¯¹ç›®å‰å¸‚é¢ä¸Šæµè¡Œçš„ç½‘å…³äº§å“è¿›è¡Œè¯¦ç»†çš„æ¨ªå‘å¯¹æ¯”ï¼Œå†ç»“åˆç¾æ´½å¯¹ç»Ÿä¸€ç½‘å…³çš„éœ€æ±‚ç›®æ ‡ï¼Œæˆ‘ä»¬ä»å¯¹æ¯”çš„è¡¨æ ¼å½“ä¸­ï¼Œçœ‹åˆ°äº† Higress æ‰€å¸¦æ¥çš„æœ€ä½³å¯¹æ¯”ç»“æœã€‚</p><p>åŒæ—¶ç¾æ´½é‡ç‚¹å…³æ³¨çš„å‡ ä¸ªç‚¹ï¼šK8S Ingress æ”¯æŒã€WebSocketæ”¯æŒã€Nacos æœåŠ¡å‘ç°ã€è·¯ç”±é…ç½®çƒ­æ›´æ–°ã€WASM æ’ä»¶éƒ½å¾—åˆ°äº†å¾ˆå¥½çš„æ”¯æŒã€‚</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i1/O1CN01bjoMSi1arSkPgWvVV_!!6000000003383-0-tps-750-470.jpg" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸ºä»€ä¹ˆé€‰æ‹©-higress">ä¸ºä»€ä¹ˆé€‰æ‹© Higress<a href="#ä¸ºä»€ä¹ˆé€‰æ‹©-higress" class="hash-link" aria-label="ä¸ºä»€ä¹ˆé€‰æ‹© Higressçš„ç›´æ¥é“¾æ¥" title="ä¸ºä»€ä¹ˆé€‰æ‹© Higressçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="é¢å‘å¤šäº‘æ¶æ„å‹å¥½">é¢å‘å¤šäº‘æ¶æ„å‹å¥½<a href="#é¢å‘å¤šäº‘æ¶æ„å‹å¥½" class="hash-link" aria-label="é¢å‘å¤šäº‘æ¶æ„å‹å¥½çš„ç›´æ¥é“¾æ¥" title="é¢å‘å¤šäº‘æ¶æ„å‹å¥½çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>Higress åœ¨é˜¿é‡Œäº‘ä¸Šæœ‰æˆç†Ÿçš„ä¼ä¸šç‰ˆäº§å“ï¼šMSE äº‘åŸç”Ÿç½‘å…³ï¼Œæˆ‘ä»¬ä» 2021 å¹´å¼€å§‹ä½¿ç”¨è¿™æ¬¾äº§å“ï¼Œè¿™æ˜¯ä¸€æ¬¾å…¨æ‰˜ç®¡ï¼Œå®Œå…¨å…è¿ç»´çš„ SaaS ç½‘å…³äº§å“ï¼Œå¹¶ä¸”å…·å¤‡å¼ºåŠ²çš„æ€§èƒ½å’Œä¸°å¯Œçš„åŠŸèƒ½ï¼Œç›¸æ¯”è‡ªå»ºåŒååçš„ç½‘å…³ï¼Œæ•´ä½“æˆæœ¬æ˜¯æ›´ä½çš„ï¼Œå› æ­¤æˆ‘ä»¬åœ¨é˜¿é‡Œäº‘ä¸Šç›´æ¥ä½¿ç”¨äº†è¿™æ¬¾äº§å“ã€‚</p><p>ç¾æ´½é™¤äº†é˜¿é‡Œäº‘ï¼Œåœ¨å…¶ä»–äº‘ä¸Šä¹Ÿæœ‰éƒ¨ç½²ä¸šåŠ¡ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½ç»Ÿä¸€å¤šäº‘çš„ç»Ÿä¸€ç½‘å…³æŠ€æœ¯æ¶æ„ï¼Œå¼€æºç‰ˆ Higress æ­£å¥½ç¬¦åˆæˆ‘ä»¬çš„éœ€æ±‚ï¼Œç›¸æ¯”å•†ä¸šç‰ˆï¼Œåœ¨æ§åˆ¶å°åŠŸèƒ½ä¸Šï¼Œå¼€æºç‰ˆç›®å‰çš„èƒ½åŠ›ç›¸å¯¹è¾ƒå°‘ï¼Œä½†å¤§éƒ¨åˆ†åŠŸèƒ½ä¹Ÿéƒ½å¯ä»¥é€šè¿‡è‡ªå·±å®šä¹‰ K8s CRD é…ç½®çš„æ–¹å¼æ¥å®ç°ï¼Œå®Œå…¨æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="åŸç”Ÿæ”¯æŒ-k8s-ingress">åŸç”Ÿæ”¯æŒ K8s Ingress<a href="#åŸç”Ÿæ”¯æŒ-k8s-ingress" class="hash-link" aria-label="åŸç”Ÿæ”¯æŒ K8s Ingressçš„ç›´æ¥é“¾æ¥" title="åŸç”Ÿæ”¯æŒ K8s Ingressçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ç¾æ´½ä» 2021 å¹´ä¾¿å·²ç»å…¨é¢è¿ç§»åˆ° Kubernetes è¿›è¡Œèµ„æºè°ƒåº¦ï¼Œé‡åˆ°æœ€å¤§çš„å›°éš¾æ˜¯å†å²çš„ç½‘å…³ä¸­é—´ä»¶ï¼Œåœ¨å®¹å™¨åŒ–çš„æ¶æ„é‡Œé¢ï¼Œå„ç§æ°´åœŸä¸æœï¼Œè¦ä¹ˆéœ€è¦å€ŸåŠ© Nginx-Ingress-Controllerï¼Œè¦ä¹ˆéœ€è¦å¤–éƒ¨çš„ SLB è¿›è¡ŒæœåŠ¡ä¹‹é—´çš„è´Ÿè½½å‡è¡¡ä¸ç½‘ç»œé€šä¿¡ã€‚è¿™å¯¼è‡´äº†æ¯”å®¹å™¨åŒ–ä¹‹å‰æ›´åŠ å¤æ‚çš„æµé‡è·¯å¾„ï¼Œä¸€åº¦è®©æˆ‘ä»¬ä¸‹å®šå†³å¿ƒï¼Œå¿…é¡»ã€å¿…é¡»ã€å¿…é¡»è¦è§£å†³ç»Ÿä¸€ç½‘å…³çš„é—®é¢˜ï¼Œè¿˜å¿…é¡»äº‘åŸç”Ÿçš„ã€‚</p><p>2021 å¹´åº•å¼€å§‹ï¼Œæˆ‘ä»¬å¼€å§‹å°è¯•ä½¿ç”¨é˜¿é‡Œäº‘ MSE ç½‘å…³ SaaS äº§å“ï¼Œå¼€å§‹å°†éƒ¨åˆ†æœåŠ¡ä» Nginx è·¯ç”±è¿ç§»åˆ° MSE ç½‘å…³ä¸Šï¼Œå¾ˆå¿«è§£å†³äº†Ngxin Configuration é…ç½®ç»´æŠ¤å¤æ‚ï¼Œæ•…éšœé¢‘å‘çš„é—®é¢˜ï¼Œå°åˆ°ç”œå¤´åï¼Œæˆ‘ä»¬ä¾¿å¼€å§‹è®¡åˆ’è¿›ä¸€æ­¥æ‰©å¤§ MSE ç½‘å…³çš„ä½¿ç”¨ï¼Œç»“åˆ Nacos å’Œ K8S çš„æœåŠ¡å‘ç°ï¼Œå°† 80% å¤§éƒ¨åˆ†å®¹å™¨åŒ–æœåŠ¡è·¯ç”±è½¬å‘å…¨éƒ¨è¿ç§»åˆ°äº†äº‘åŸç”Ÿç½‘å…³ä¸Šã€‚</p><p>è¿™å¸¦æ¥çš„æ”¶ç›Šå°±åŒ…æ‹¬ï¼š</p><ol><li>ç®€åŒ–äº†æµé‡è·¯å¾„ï¼Œå…¬ç½‘æµé‡é€šè¿‡ SLB ç›´æ¥åˆ°è¾¾ç½‘å…³ï¼Œç½‘å…³è·¯ç”±ç›´è¾¾å®¹å™¨ Podï¼›</li><li>é‡Šæ”¾äº†ä½¿ç”¨ ECS è‡ªå»ºçš„ Nginx ã€OpenResty ã€Caddy æœåŠ¡ï¼Œé™ä½äº†å¤§é‡æœåŠ¡å™¨æˆæœ¬ï¼›</li><li>æœåŠ¡å‘ç°å’ŒæœåŠ¡æ²»ç†ï¼Œä»¥åŠå„ä¸ªæœåŠ¡å½“å‰çš„å¥åº·çŠ¶æ€éƒ½ä»¥å¯è§†åŒ–çš„ Dashborad å‘ˆç°å‡ºæ¥ï¼›</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ§åˆ¶é¢å’Œæ•°æ®é¢è§£è€¦çš„æ¶æ„">æ§åˆ¶é¢å’Œæ•°æ®é¢è§£è€¦çš„æ¶æ„<a href="#æ§åˆ¶é¢å’Œæ•°æ®é¢è§£è€¦çš„æ¶æ„" class="hash-link" aria-label="æ§åˆ¶é¢å’Œæ•°æ®é¢è§£è€¦çš„æ¶æ„çš„ç›´æ¥é“¾æ¥" title="æ§åˆ¶é¢å’Œæ•°æ®é¢è§£è€¦çš„æ¶æ„çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>æ§åˆ¶é¢å’Œæ•°æ®é¢è§£è€¦æ˜¯ä¸€ç§å¾ˆå¥½çš„è®¾è®¡æ¨¡å¼ï¼ŒæŠŠç®¡ç†æ§åˆ¶é€»è¾‘å’Œè¿è¡Œå¤„ç†é€»è¾‘åˆ†å¼€ï¼Œè¿™æ ·å¯ä»¥æ›´å¥½åœ°ç®¡ç†å’Œæ‰©å±•ç³»ç»Ÿã€‚</p><ol><li>Console è´Ÿè´£ç®¡ç† å’Œ Gateway è´Ÿè´£å¤„ç†è¯·æ±‚ï¼Œçµæ´»å¯æ‰©å±•ï¼Œäº’è¡¥å¹²æ‰°ï¼›</li><li>æ•´ä¸ªç³»ç»Ÿçš„æ€§èƒ½å’Œå¯ç”¨æ€§å¯ä»¥å¾—åˆ°å¾ˆå¥½çš„ä¿éšœï¼›</li><li>å³ä½¿æ§åˆ¶é¢å‡ºç°é—®é¢˜ï¼Œæ•°æ®é¢ä»ç„¶å¯ä»¥ç»§ç»­å¤„ç†è¯·æ±‚ï¼Œåä¹‹äº¦ç„¶ã€‚</li></ol><p>åœ¨ç¾æ´½å®¢æœè‡ªå·±çš„äº§å“ä¸­ï¼Œä¹Ÿå¤§é‡è¯•ç”¨äº†æ§åˆ¶é¢å’Œæ•°æ®é¢åˆ†ç¦»çš„è¿™ç§æ¶æ„è®¾è®¡æ¨¡å¼ï¼Œåœ¨é€‰æ‹© Higress ç»Ÿä¸€ç½‘å…³çš„è½åœ°å®è·µä¸­ï¼Œä¹Ÿæ›´å¥½çš„å¯ä»¥å’Œç¾æ´½äº§å“çš„æ¶æ„è¿›è¡Œé…åˆï¼Œä¾‹å¦‚æ§åˆ¶å°é‡‡ç”¨å¾®å‰ç«¯æŠ€æœ¯ç»Ÿä¸€ç¾æ´½è¿ç»´æ§åˆ¶å°ï¼ŒHigress æ§åˆ¶å°ï¼ŒNacos æ§åˆ¶å°ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å®¹æ˜“ä¸Šæ‰‹çš„åå°-dashboard">å®¹æ˜“ä¸Šæ‰‹çš„åå° Dashboard<a href="#å®¹æ˜“ä¸Šæ‰‹çš„åå°-dashboard" class="hash-link" aria-label="å®¹æ˜“ä¸Šæ‰‹çš„åå° Dashboardçš„ç›´æ¥é“¾æ¥" title="å®¹æ˜“ä¸Šæ‰‹çš„åå° Dashboardçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åœ¨æ—©æœŸï¼Œç¾æ´½åœ¨ 2021 å¹´å¼€å§‹ä½¿ç”¨é˜¿é‡Œäº‘ MSE äº‘åŸç”Ÿç½‘å…³æ—¶ï¼Œå°±å·²ç»å¯¹ç½‘å…³çš„æ§åˆ¶å°ä½¿ç”¨æœ‰äº†å¾ˆå¤šçš„ç»éªŒåŸºç¡€ï¼Œå›¢é˜Ÿä¸­ QA åŒå­¦ä¹Ÿèƒ½ç†Ÿç»ƒä½¿ç”¨äº†ã€‚ç›®å‰åœ¨å…¶ä»–äº‘ä¸Šçš„é¡¹ç›®ï¼Œç§æœ‰åŒ–éƒ¨ç½²çš„å¼€æºç‰ˆHigressï¼Œåœ¨æ§åˆ¶å°æ–¹é¢åŠŸèƒ½ä¸æ“ä½œå’Œé˜¿é‡Œäº‘ MSE äº§å“çš„äº¤äº’ä¿æŒä¸€è‡´ï¼Œå›¢é˜Ÿä½¿ç”¨å¾ˆå¿«ä¾¿ä¸Šæ‰‹äº†ã€‚</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i4/O1CN01SgNYtt1NcizsTgB5w_!!6000000001591-0-tps-750-300.jpg" class="img_ev3q"></p><p>æ’ä»¶æ–¹é¢ï¼Œç¾æ´½ä½¿ç”¨äº† JWT Auth é‰´æƒï¼ŒKey Rate Limit é™æµï¼ŒHMAC Auth è¯·æ±‚ç­¾åï¼ŒBot Detect å’Œ WAF åŠŸèƒ½æœ‰æ¶‰åŠã€‚</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i1/O1CN015fP9mx1lv5ewluuvs_!!6000000004880-0-tps-750-420.jpg" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç¾æ´½çš„è½åœ°å®è·µ">ç¾æ´½çš„è½åœ°å®è·µ<a href="#ç¾æ´½çš„è½åœ°å®è·µ" class="hash-link" aria-label="ç¾æ´½çš„è½åœ°å®è·µçš„ç›´æ¥é“¾æ¥" title="ç¾æ´½çš„è½åœ°å®è·µçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="é‡‡ç”¨-helm-åœ¨-k8s-node-ä¸Š-ä¸€é”®éƒ¨ç½²">é‡‡ç”¨ Helm åœ¨ K8s node ä¸Š ä¸€é”®éƒ¨ç½²<a href="#é‡‡ç”¨-helm-åœ¨-k8s-node-ä¸Š-ä¸€é”®éƒ¨ç½²" class="hash-link" aria-label="é‡‡ç”¨ Helm åœ¨ K8s node ä¸Š ä¸€é”®éƒ¨ç½²çš„ç›´æ¥é“¾æ¥" title="é‡‡ç”¨ Helm åœ¨ K8s node ä¸Š ä¸€é”®éƒ¨ç½²çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">helm repo </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> higress.io </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">https://higress.io/helm-charts</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> higress higress.io/higress -n higress-system --create-namespace</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å®Œå…¨æ›¿ä»£äº†-nginx-openrestycaddy-slb-intranet">å®Œå…¨æ›¿ä»£äº† Nginx ã€OpenRestyã€Caddy ã€SLB-Intranet<a href="#å®Œå…¨æ›¿ä»£äº†-nginx-openrestycaddy-slb-intranet" class="hash-link" aria-label="å®Œå…¨æ›¿ä»£äº† Nginx ã€OpenRestyã€Caddy ã€SLB-Intranetçš„ç›´æ¥é“¾æ¥" title="å®Œå…¨æ›¿ä»£äº† Nginx ã€OpenRestyã€Caddy ã€SLB-Intranetçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i4/O1CN01ElAB4A1ijgxDUXf9g_!!6000000004449-0-tps-630-532.jpg" class="img_ev3q">
<img loading="lazy" src="https://img.alicdn.com/imgextra/i4/O1CN011wDPMy1vpGmaT06Tq_!!6000000006221-0-tps-631-532.jpg" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å½»åº•è§£å†³-websocket-æ–­çº¿é‡è¿é—®é¢˜">å½»åº•è§£å†³ WebSocket æ–­çº¿é‡è¿é—®é¢˜<a href="#å½»åº•è§£å†³-websocket-æ–­çº¿é‡è¿é—®é¢˜" class="hash-link" aria-label="å½»åº•è§£å†³ WebSocket æ–­çº¿é‡è¿é—®é¢˜çš„ç›´æ¥é“¾æ¥" title="å½»åº•è§£å†³ WebSocket æ–­çº¿é‡è¿é—®é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ç¾æ´½çš„æ™ºèƒ½å®¢æœäº§å“ä¾§è¯•ç”¨äº† WebSocket è¿›è¡Œé•¿è¿æ¥ä¿æŒå’Œæ¶ˆæ¯é€šä¿¡ï¼Œæ‰€ä»¥éå¸¸ä¾èµ–ç½‘ç»œçš„ç¨³å®šï¼Œä»¥åŠæ›´æ–°ç½‘å…³é…ç½®æ‰€å¸¦æ¥çš„å‰¯ä½œç”¨ã€‚åœ¨ä½¿ç”¨ Nginx + OpenResty æ–¹æ¡ˆçš„æœŸé—´ï¼Œæ¯ä¸€æ¬¡çš„é…ç½®å˜æ›´éƒ½ä¼šå¸¦æ¥æå¤§çš„ä»£ä»·ï¼Œæ–­çº¿é‡è¿é£æš´æ—¶å¸¸å‘ç”Ÿã€‚ä¸€æ¬¡é…ç½®å˜æ›´ Pendding æˆ–è€…å˜æ›´å¤±è´¥å¸¦æ¥çš„ç¬æ—¶æ–­è”æ˜¯åŠå…¶ç—›è‹¦çš„ã€‚</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i1/O1CN01rvv5Mc1hoRRlBhdO2_!!6000000004324-0-tps-750-440.jpg" class="img_ev3q"></p><p>åœ¨è¿ç§»åˆ° Higress ä¸Šä¹‹åï¼Œè·¯ç”±é…ç½®çƒ­æ›´æ–°ç‰¹æ€§ï¼Œä¸åœ¨éœ€è¦åƒ Nginx ä¸€æ ·éœ€è¦ Reload Gatewayï¼Œè§£å†³é…ç½®æ›´æ–° reload å¸¦æ¥çš„æ–­çº¿é‡è¿é£æš´é—®é¢˜ã€‚</p><p>å¦å¤–ï¼Œåœ¨ WebSocket Server æœåŠ¡å‡çº§è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡ç»™ Pod æ‰“ä¸Š stage æ ‡ç­¾ï¼Œåœ¨ Higress ä¾§é€šè¿‡æ ‡ç­¾è·¯ç”±è¿›è¡Œæ–°è€ç‰ˆæœ¬æ— æŸæµé‡åˆ‡æ¢ï¼Œç»™äº§å“å¿«é€Ÿè¿­ä»£å‡çº§å¸¦äº†å·¨å¤§çš„æ æ†æ•ˆåº”ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç†”æ–­é™æµ">ç†”æ–­é™æµ<a href="#ç†”æ–­é™æµ" class="hash-link" aria-label="ç†”æ–­é™æµçš„ç›´æ¥é“¾æ¥" title="ç†”æ–­é™æµçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åœ¨é¢å‘ 2B çš„ SaaS äº§å“ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œç»å¸¸ä¼šå‘ç”ŸæŸä¸€ä¸ªå®¢æˆ·çªå‘æµ·é‡æµé‡ï¼Œå æ®å¤§é‡å¸¦å®½ï¼Œå½±å“å…¶ä»–å®¢æˆ·æ­£å¸¸ä½¿ç”¨çš„æƒ…å†µï¼Œè¿™æ—¶æˆ‘ä»¬éœ€è¦é’ˆå¯¹å®¢æˆ·è§„æ¨¡å¯¹å•ä¸ªå®¢æˆ·çš„ API å¹¶å‘ä¸Šé™åšçµæ´»çš„åŠ¨æ€é™æµï¼Œä½¿ç”¨ Higress çš„æ’ä»¶Key Rate Limit å°±å¾ˆå¥½çš„è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œæ ¹æ®æµé‡å¤§ç›˜éšæ—¶è°ƒæ•´é™æµæ°´ä½çº¢çº¿ï¼Œåšåˆ°ç²¾å‡†ï¼Œçµæ´»çš„é™æµã€‚</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i3/O1CN01QhTG261lZZ2kbT1qe_!!6000000004833-0-tps-750-467.jpg" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç»éªŒæ€»ç»“">ç»éªŒæ€»ç»“<a href="#ç»éªŒæ€»ç»“" class="hash-link" aria-label="ç»éªŒæ€»ç»“çš„ç›´æ¥é“¾æ¥" title="ç»éªŒæ€»ç»“çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>Higress ç½‘å…³çš„è½åœ°ï¼Œç»™ä¼ä¸šå…¨é¢è½åœ°äº‘åŸç”Ÿå¾®æœåŠ¡æ¶æ„æä¾›å¼ºæœ‰åŠ›çš„æ”¯æŒï¼Œå¯¹æˆ‘ä»¬æŠ€æœ¯äººå‘˜æ¥è¯´ï¼Œè¿™ç»å¯¹æ˜¯ä¸€ä¸ªæ æ†çº§åˆ«çš„å¼€æºäº§å“ï¼Œå¦å¤–ï¼Œåœ¨é˜¿é‡Œäº‘ä¸Šåˆæœ‰å¯¹ç­‰çš„ SaaS äº§å“ï¼Œè¿™æ ·çš„é…åˆï¼Œå°†å…¬æœ‰äº‘å’Œç§æœ‰åŒ–éƒ¨ç½²çš„ç»Ÿä¸€ç½‘å…³ä¸€æ¬¡æ€§å…¨éƒ¨è§£å†³ï¼Œå¯¹ä¼ä¸šæ¥è¯´æ˜¯ç»å¯¹çš„åˆ©å¥½ã€‚</p><ol><li>ç»Ÿä¸€æµé‡ç½‘å…³+ä¸šåŠ¡ç½‘å…³èƒ½åŠ›ï¼Œå®ç°äº†ç»™ä¼ä¸šé™æœ¬ï¼Œä¸ºç ”å‘å¢æ•ˆï¼›</li><li>ä¸ºäº‘åŸç”Ÿæ¶æ„æä¾›å¾ˆå¥½çš„åŸºåº§ï¼Œåœ¨å¼‚æ„è¯­è¨€æœåŠ¡åŒ–å±‚é¢æ’é™¤äº†ç½‘ç»œé€šä¿¡éš¾é¢˜ï¼›</li><li>è·¯ç”±çƒ­æ›´æ–°ã€æ— æŸå‡çº§ã€å¯è§†åŒ– Consoleã€å¼€æ”¾çš„æ’ä»¶ã€åŸºäº Kubernetes å’Œ Istioï¼Œç»™æŠ€æœ¯æ¼”è¿›å¸¦æ¥äº†æ›´å¤šçš„å¯èƒ½æ€§ã€‚</li></ol><p>æœ€åï¼Œæˆ‘ä»¬ç¥æ„¿ Higress åœ¨äº‘åŸç”Ÿçš„é“è·¯ä¸Šè¶Šèµ°è¶Šè¿œï¼Œå¤§å®¶ä¸€èµ·ç”¨å¼€æºã€å¼€æ”¾ã€åˆ†äº«çš„å¿ƒæ€å°† Higress å»ºè®¾åœ°è¶Šæ¥è¶Šå¥½ã€‚</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Higress é›†æˆ Skywalking å¯è§‚æµ‹æ€§æ¢ç´¢]]></title>
            <link>https://higress.io/zh-cn/blog/skywalking</link>
            <guid>https://higress.io/zh-cn/blog/skywalking</guid>
            <pubDate>Tue, 20 Jun 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Higress é›†æˆ Skywalking å¯è§‚æµ‹æ€§æ¢ç´¢]]></description>
            <content:encoded><![CDATA[<p><a href="https://higress.io/zh-cn/" target="_blank" rel="noopener noreferrer">Higress</a> ä¸€ä¸ªéµå¾ªå¼€æºIngress/Gateway APIæ ‡å‡†ï¼Œæä¾›æµé‡è°ƒåº¦ã€æœåŠ¡æ²»ç†ã€å®‰å…¨é˜²æŠ¤ä¸‰åˆä¸€çš„é«˜é›†æˆã€æ˜“ä½¿ç”¨ã€æ˜“æ‰©å±•ã€çƒ­æ›´æ–°çš„ä¸‹ä¸€ä»£äº‘åŸç”Ÿç½‘å…³ã€‚</p><p><a href="https://skywalking.apache.org/" target="_blank" rel="noopener noreferrer">Skywalking</a> æ˜¯ä¸€ä¸ªå¼€æºçš„å¯è§‚æµ‹å¹³å°ï¼Œç”¨äºä»æœåŠ¡å’Œäº‘åŸç”ŸåŸºç¡€è®¾æ–½æ”¶é›†ï¼Œåˆ†æï¼Œ èšåˆåŠå¯è§†åŒ–æ•°æ®ã€‚</p><p><a href="https://github.com/2456868764/httpbin" target="_blank" rel="noopener noreferrer">Httpbin</a> æ˜¯åŸºäº Gin å¼€å‘ï¼Œç”¨äºå¿«é€Ÿæµ‹è¯•åŸºäºäº‘åŸç”Ÿå¾®æœåŠ¡å¯è§‚æµ‹æ€§å’Œæµé‡ç®¡ç†ç­‰åŠŸèƒ½ã€‚</p><p>æœ¬æ–‡ä»‹ç» Higress é›†æˆ Skywalking å®ç°å¯è§‚æµ‹æ€§ï¼Œä¸»è¦å†…å®¹æ¶‰åŠæ•´ä½“æ¶æ„ã€Skywalking è°ƒç”¨é“¾è·¯è·Ÿè¸ªåŸç†ã€Higress æ¶æ„ã€ä¸šåŠ¡åº”ç”¨é›†æˆ Skywalkingã€æœ¬åœ°æµ‹è¯•ç¯å¢ƒæ­å»ºã€Higress é…ç½®ã€åº”ç”¨å®‰è£…ã€è°ƒç”¨é“¾è·¯è·Ÿè¸ªé…ç½®ä»¥åŠ Higress gateway æŒ‡æ ‡å’Œç›‘æ§é¢æ¿ã€‚</p><p>è¿™æ¬¡å¯è§‚æµ‹æ€§æ¢ç´¢ç›¸å…³ manifests <a href="https://gitcode.net/-/snippets/3612" target="_blank" rel="noopener noreferrer">ä¸‹è½½åœ°å€</a> </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸€æ•´ä½“æ¶æ„å›¾">ä¸€ã€æ•´ä½“æ¶æ„å›¾<a href="#ä¸€æ•´ä½“æ¶æ„å›¾" class="hash-link" aria-label="ä¸€ã€æ•´ä½“æ¶æ„å›¾çš„ç›´æ¥é“¾æ¥" title="ä¸€ã€æ•´ä½“æ¶æ„å›¾çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><img loading="lazy" alt="img.png" src="/zh-cn/assets/images/higress-d2e17031336b9178c2668d80ff818c5b.png" width="2855" height="1318" class="img_ev3q"></p><p>æ•´ä½“åŒ…å«å››å¤§å—å†…å®¹ï¼š</p><ul><li>Higress ç»„ä»¶ï¼š    higress-gateway, higress-console, higress-controller</li><li>Skywalking ç»„ä»¶ï¼š skywalking dashboard ui, skywalking aop server</li><li>ä¸šåŠ¡åº”ç”¨ç»„ä»¶ï¼š     bff, middle service, backend service</li><li>Ingress ç»„ä»¶ï¼š    skywalking.higress.io, httpbin.example.com</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="äºŒskywalking-è°ƒç”¨é“¾è·¯è·Ÿè¸ªåŸç†">äºŒã€Skywalking è°ƒç”¨é“¾è·¯è·Ÿè¸ªåŸç†<a href="#äºŒskywalking-è°ƒç”¨é“¾è·¯è·Ÿè¸ªåŸç†" class="hash-link" aria-label="äºŒã€Skywalking è°ƒç”¨é“¾è·¯è·Ÿè¸ªåŸç†çš„ç›´æ¥é“¾æ¥" title="äºŒã€Skywalking è°ƒç”¨é“¾è·¯è·Ÿè¸ªåŸç†çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>SkyWalkingä¸ºæœåŠ¡(service)ï¼ŒæœåŠ¡å®ä¾‹(service instance)ï¼Œä»¥åŠç«¯ç‚¹(endpoint)æä¾›äº†å¯è§‚æµ‹èƒ½åŠ›ã€‚</p><ul><li>æœåŠ¡(service)ï¼šè¡¨ç¤ºå¯¹è¯·æ±‚æä¾›ç›¸åŒè¡Œä¸ºçš„ä¸€ç»„å·¥ä½œè´Ÿè½½ã€‚åœ¨ä½¿ç”¨æ‰“ç‚¹ä»£ç†æˆ– SDK çš„æ—¶å€™ï¼Œå¯ä»¥å®šä¹‰æœåŠ¡çš„åå­—ã€‚</li><li>æœåŠ¡å®ä¾‹(Service Instance)ï¼šä¸€ç»„å·¥ä½œè´Ÿè½½ä¸­çš„æ¯ä¸€ä¸ªå·¥ä½œè´Ÿè½½ç§°ä¸ºä¸€ä¸ªå®ä¾‹ã€‚</li><li>ç«¯ç‚¹(Endpoint)ï¼š å¯¹äºç‰¹å®šæœåŠ¡æ‰€æ¥æ”¶çš„è¯·æ±‚è·¯å¾„ï¼Œå¦‚ HTTP çš„ URI è·¯å¾„å’Œ gRPC æœåŠ¡çš„ç±»å + æ–¹æ³•ç­¾åã€‚</li><li>è¿›ç¨‹ï¼ˆProcessï¼‰ï¼š æ“ä½œç³»ç»Ÿè¿›ç¨‹. åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œä¸€ä¸ªæœåŠ¡å®ä¾‹å’Œè¿›ç¨‹ä¸æ˜¯ä¸€ä¸€å¯¹åº”ï¼Œ åœ¨k8séƒ¨ç½²ä¸‹ï¼Œä¸€ä¸ªPODå¯¹åº”å¤šä¸ªè¿›ç¨‹ã€‚</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="skywalking-æ•´ä½“æ¶æ„">Skywalking æ•´ä½“æ¶æ„<a href="#skywalking-æ•´ä½“æ¶æ„" class="hash-link" aria-label="Skywalking æ•´ä½“æ¶æ„çš„ç›´æ¥é“¾æ¥" title="Skywalking æ•´ä½“æ¶æ„çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><img loading="lazy" alt="img.png" src="/zh-cn/assets/images/skywalking1-b2464b380f61dc6e13853ec4ad648e8a.png" width="2160" height="721" class="img_ev3q"></p><p>ä¸»è¦ç”±å››ä¸ªæ ¸å¿ƒç»„ä»¶ç»„æˆï¼š</p><ul><li>æ¢é’ˆ: æ¢é’ˆç”¨äºæ”¶é›†ç›‘æµ‹æ•°æ®åŒ…æ‹¬æŒ‡æ ‡ï¼Œé“¾è·¯è·Ÿè¸ªï¼Œæ—¥å¿—å’Œäº‹ä»¶</li><li>æ•°æ®æ¥æ”¶å’Œèšåˆ: å¹³å°åç«¯æ”¯æŒæ•°æ®èšåˆï¼Œæ•°æ®åˆ†æä»¥åŠé©±åŠ¨æ•°æ®æµä»æ¢é’ˆåˆ°ç”¨æˆ·ç•Œé¢çš„å¤„ç†</li><li>å­˜å‚¨: é€šè¿‡å¼€æ”¾æ¥å£æ”¯æŒåç«¯å­˜å‚¨ç³»ç»Ÿæ”¯æŒElasticSearch, H2, MySQL, TiDB, BanyanDBç­‰</li><li>UI:  ä¸€ä¸ªå®šåˆ¶åŒ–çš„Webç³»ç»Ÿï¼Œç”¨æˆ·å¯ä»¥å¯è§†åŒ–æŸ¥çœ‹å’Œç®¡ç† SkyWalking æ•°æ®</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªåŸç†åˆ†æ">åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªåŸç†åˆ†æ<a href="#åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªåŸç†åˆ†æ" class="hash-link" aria-label="åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªåŸç†åˆ†æçš„ç›´æ¥é“¾æ¥" title="åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªåŸç†åˆ†æçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ol><li>åˆ†å¸ƒå¼é“¾è·¯ä»‹ç»</li></ol><p>åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªæ˜¯è®°å½•æ¥æºäºç”¨æˆ·è¯·æ±‚åœ¨å„ä¸ªç³»ç»Ÿæˆ–è€…æœåŠ¡ä¸­æ‰€ä¼ æ’­çš„è·¯å¾„ã€‚</p><blockquote><p>A distributed trace, more commonly known as a trace, records the paths taken by requests (made by an application or end-user) as they propagate through multi-service architectures, like microservice and serverless applications.</p></blockquote><p>åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªå›¾ç¤ºå¦‚ä¸‹ï¼š</p><p><img loading="lazy" alt="img.png" src="/zh-cn/assets/images/higress13-213da6eb6d44a461df9b933067002f4e.png" width="910" height="240" class="img_ev3q"></p><ol start="2"><li>Skywalking åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ª</li></ol><p>ä¸»è¦åŒ…å«å››ä¸ªå†…å®¹ï¼š</p><ul><li>Trace: ä¸€ä¸ªå®Œæ•´çš„é“¾è·¯ç”±å¤šä¸ª Segment ç»„æˆ</li><li>Segment: ä¸€ä¸ªè¯·æ±‚åœ¨ä¸€ä¸ªè¿›ç¨‹å†…çš„è½¨è¿¹</li><li>Span: ä¸€ä¸ªè¯·æ±‚åœ¨æŸä¸ªè¿›ç¨‹é‡Œçš„ä¸€ä¸ªç»„ä»¶é€»è¾‘å†…çš„è½¨è¿¹, æœ‰ Entry Spanï¼Œ Local Span å’Œ Exit Span ä¸‰ç±»</li><li>Span context: è·¨è¿›ç¨‹æˆ–è€…æœåŠ¡ Trace ä¼ é€’ï¼Œè¿™é‡Œè®¨è®º http ä¼ é€’å¤´ sw8</li></ul><p>åŸºæœ¬ç»„ä»¶å›¾ç¤ºå¦‚ä¸‹ï¼š</p><p><img loading="lazy" alt="img.png" src="/zh-cn/assets/images/skywalking_trace-ae4a862a6abced391f00069e9ed32f26.png" width="2370" height="929" class="img_ev3q"></p><p>ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼š</p><ul><li>ä¸€ä¸ª Trace å†…çš„æ‰€æœ‰ span çš„ Trace ID æ˜¯ç›¸åŒçš„</li><li>ä¸€ä¸ª Segment ä¸­æœ‰ä¸€ä¸ª EntrySpanï¼Œæ˜¯ Segment å†…å…¶ä»– Span çš„æ ¹ Parent</li><li>åä¸€ä¸ª Segmentçš„ Entryspan æ€»æ˜¯ä¸å‰ä¸€ä¸ª Segment ä¸­çš„æŸä¸ª ExitSpan å…³è”</li></ul><ol start="3"><li>Skywalking Trace çš„æ•°æ®åè®®</li></ol><p>å…·ä½“æ•°æ®åè®®å‚è€ƒ <a href="https://skywalking.apache.org/docs/main/next/en/api/trace-data-protocol-v3/" target="_blank" rel="noopener noreferrer">Skywalking Trace Data Protocol</a>, è¿™é‡Œä¸»è¦è®²ä¸€ä¸‹ sw8 æ ¼å¼å’Œç»„æˆã€‚</p><p>sw8 æ ¼å¼: XXXXX-XXXXX-XXXX-XXXXï¼Œä»¥ - åˆ†å‰²ã€‚
æ ·ä¾‹: 1-MzYzMzM1NDctNTc0YS00MzZlLTgzNWEtNTY1YTQyNzk3YTY3-ZWQ3ODA2ZjYwNTI0MTFlZWE5ZDdmZTFhNTA5YTRmYTk=-1-bWlkZGxl-bWlkZGxlLTZmNGRkN2JmNmMtcWJ4cm0=-L0dFVC9zZXJ2aWNl-aHR0cDovL2JhY2tlbmQv</p><p>å…·ä½“å†…å®¹å¦‚ä¸‹ï¼š</p><ul><li>é‡‡æ ·æ ‡è®°(Sample):  0 æˆ–è€… 1ï¼Œ 0 è¡¨ç¤ºä¸é‡‡æ · 1 è¡¨ç¤ºé‡‡æ ·</li><li>è·Ÿè¸ªID(Trace ID): å­—ç¬¦(BASE64 ç¼–ç )</li><li>çˆ¶Sengment ID (Parent trace segment ID): å­—ç¬¦(BASE64 ç¼–ç )</li><li>çˆ¶ Span IDï¼ˆParent span ID): æ•´å‹</li><li>çˆ¶æœåŠ¡åç§°(Parent service): å­—ç¬¦(BASE64 ç¼–ç )</li><li>çˆ¶æœåŠ¡å®ä¾‹(Parent service instance): å­—ç¬¦(BASE64 ç¼–ç )</li><li>çˆ¶Endpoint(Parent endpoint): å­—ç¬¦(BASE64 ç¼–ç )</li><li>ç›®æ ‡åœ°å€ï¼šå­—ç¬¦(BASE64 ç¼–ç )</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸‰higress-æ¶æ„">ä¸‰ã€Higress æ¶æ„<a href="#ä¸‰higress-æ¶æ„" class="hash-link" aria-label="ä¸‰ã€Higress æ¶æ„çš„ç›´æ¥é“¾æ¥" title="ä¸‰ã€Higress æ¶æ„çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>Higressæ˜¯åŸºäºé˜¿é‡Œå†…éƒ¨çš„Envoy Gatewayå®è·µæ²‰æ·€ã€ä»¥å¼€æº Istio + Envoy ä¸ºæ ¸å¿ƒæ„å»ºçš„ä¸‹ä¸€ä»£äº‘åŸç”Ÿç½‘å…³ï¼Œå®ç°äº†æµé‡ç½‘å…³ + å¾®æœåŠ¡ç½‘å…³ + å®‰å…¨ç½‘å…³ä¸‰åˆä¸€çš„é«˜é›†æˆèƒ½åŠ›ï¼Œæ·±åº¦é›†æˆDubboã€Nacosã€Sentinelç­‰å¾®æœåŠ¡æŠ€æœ¯æ ˆï¼Œèƒ½å¤Ÿå¸®åŠ©ç”¨æˆ·æå¤§çš„é™ä½ç½‘å…³çš„éƒ¨ç½²åŠè¿ç»´æˆæœ¬ä¸”èƒ½åŠ›ä¸æ‰“æŠ˜ï¼›</p><p>åœ¨æ ‡å‡†ä¸Šå…¨é¢æ”¯æŒ Ingressä¸ Gateway APIï¼Œç§¯ææ‹¥æŠ±äº‘åŸç”Ÿä¸‹çš„æ ‡å‡†APIè§„èŒƒï¼›</p><p>åŒæ—¶ï¼ŒHigress Controllerä¹Ÿæ”¯æŒNginx Ingresså¹³æ»‘è¿ç§»ï¼Œå¸®åŠ©ç”¨æˆ·é›¶æˆæœ¬å¿«é€Ÿè¿ç§»åˆ°Higressã€‚</p><p><img loading="lazy" alt="img.png" src="/zh-cn/assets/images/higress12-cfd41d730d22a7648fcc1f6d06765fb8.png" width="2483" height="2024" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å››ä¸šåŠ¡åº”ç”¨é›†æˆ-skywalking">å››ã€ä¸šåŠ¡åº”ç”¨é›†æˆ Skywalking<a href="#å››ä¸šåŠ¡åº”ç”¨é›†æˆ-skywalking" class="hash-link" aria-label="å››ã€ä¸šåŠ¡åº”ç”¨é›†æˆ Skywalkingçš„ç›´æ¥é“¾æ¥" title="å››ã€ä¸šåŠ¡åº”ç”¨é›†æˆ Skywalkingçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ä¸šåŠ¡åº”ç”¨é€šè¿‡ä¸ <a href="https://github.com/SkyAPM/go2sky" target="_blank" rel="noopener noreferrer">go2sky</a> é¡¹ç›®é›†æˆ SkyWalking ç›‘æ§ Golang åº”ç”¨ç¨‹åºï¼Œä¸»è¦é€šè¿‡ Gin middleware å’Œ Http è¯·æ±‚æ‰‹åŠ¨åŸ‹ç‚¹ã€‚</p><p>1ã€é›†æˆ Gin middleware</p><div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">func middleware(engine *gin.Engine, tracer *go2sky.Tracer) gin.HandlerFunc {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if engine == nil || tracer == nil {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return func(c *gin.Context) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            c.Next()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return func(c *gin.Context) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if strings.HasPrefix(c.Request.URL.String(), skipProbPrefix) || strings.HasPrefix(c.Request.URL.String(), skipMetricsPrefix) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            c.Next()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        span, ctx, err := tracer.CreateEntrySpan(c.Request.Context(), getOperationName(c), func(key string) (string, error) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return c.Request.Header.Get(key), nil</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if err != nil {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            c.Next()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        span.SetComponent(componentIDGINHttpServer)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        span.Tag(go2sky.TagHTTPMethod, c.Request.Method)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        span.Tag(go2sky.TagURL, c.Request.Host+c.Request.URL.Path)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        span.SetSpanLayer(agentv3.SpanLayer_Http)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        c.Request = c.Request.WithContext(ctx)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        c.Next()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if len(c.Errors) &gt; 0 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            span.Error(time.Now(), c.Errors.String())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        span.Tag(go2sky.TagStatusCode, strconv.Itoa(c.Writer.Status()))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        span.End()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">func getOperationName(c *gin.Context) string {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return fmt.Sprintf("/%s%s", c.Request.Method, c.FullPath())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>2ã€Httpè¯·æ±‚æ‰‹åŠ¨åŸ‹ç‚¹</p><div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">func traceHttpCall(c *gin.Context, req *http.Request, url string, fn func(req *http.Request) (*http.Response, error)) (*http.Response, error) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tracer := go2sky.GetGlobalTracer()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if tracer == nil {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        resp, err := fn(req)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return resp, err</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    reqSpan, err := go2sky.GetGlobalTracer().CreateExitSpan(c.Request.Context(), "invoke", url, func(headerKey, headerValue string) error {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        req.Header.Set(headerKey, headerValue)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return nil</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    reqSpan.SetComponent(2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    reqSpan.SetSpanLayer(v3.SpanLayer_Http)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    resp, err2 := fn(req)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    reqSpan.Tag(go2sky.TagHTTPMethod, http.MethodGet)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    reqSpan.Tag(go2sky.TagURL, url)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    reqSpan.End()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return resp, err2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="äº”æœ¬åœ°æµ‹è¯•ç¯å¢ƒæ­å»º">äº”ã€æœ¬åœ°æµ‹è¯•ç¯å¢ƒæ­å»º<a href="#äº”æœ¬åœ°æµ‹è¯•ç¯å¢ƒæ­å»º" class="hash-link" aria-label="äº”ã€æœ¬åœ°æµ‹è¯•ç¯å¢ƒæ­å»ºçš„ç›´æ¥é“¾æ¥" title="äº”ã€æœ¬åœ°æµ‹è¯•ç¯å¢ƒæ­å»ºçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ol><li>æœ¬åœ°å®‰è£… kubectl, kind, helm</li></ol><p>å¯ä»¥å‚è€ƒ Higress <a href="https://higress.io/zh-cn/docs/user/quickstart" target="_blank" rel="noopener noreferrer">å¿«é€Ÿå¼€å§‹</a>å®‰è£… kubectl, kindã€‚
helm å®‰è£…å‚è€ƒ<a href="https://helm.sh/zh/docs/intro/install/" target="_blank" rel="noopener noreferrer">å®‰è£…æ–‡æ¡£</a></p><ol start="2"><li>å®‰è£… higress å’Œ istio CRD</li></ol><p>å¯ä»¥å‚è€ƒ higress <a href="https://higress.io/zh-cn/docs/user/quickstart" target="_blank" rel="noopener noreferrer">å¿«é€Ÿå¼€å§‹</a> å’Œ <a href="https://higress.io/zh-cn/docs/ops/deploy-by-helm" target="_blank" rel="noopener noreferrer">å®‰è£…éƒ¨ç½²</a> æ¥éƒ¨ç½²ï¼Œè¿™é‡Œéœ€è¦å®‰è£…  Istio CRDã€‚</p><p>è¿™é‡Œæä¾›ä¸€é”®å®‰è£…è„šæœ¬ local-env-setup.shï¼Œè¿è¡Œ local-env-setup.sh å®‰è£… Higress</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./local-env-setup.sh --crd</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>éƒ¨ç½² Skywalkingï¼Œä¸šåŠ¡åº”ç”¨å’Œ Ingress</li></ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">KUBECONFIG</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">${</span><span class="token variable environment constant" style="color:#36acaa">HOME</span><span class="token variable" style="color:#36acaa">}</span><span class="token plain">/.kube/config_higress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl apply -f skywalking.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl apply -f app.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl apply -f ingress.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ£€æŸ¥ POD è¿è¡ŒçŠ¶æ€å’Œ Ingress çŠ¶æ€</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">KUBECONFIG</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">${</span><span class="token variable environment constant" style="color:#36acaa">HOME</span><span class="token variable" style="color:#36acaa">}</span><span class="token plain">/.kube/config_higress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get pods -n higress-system </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                         READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">higress-console-6f554978dc-cclg7             </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          100m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">higress-console-grafana-7495766db4-4flq5     </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          131m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">higress-console-prometheus-6d7bdccfb-hxtsq   </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          131m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">higress-controller-689c5b965f-7wsmt          </span><span class="token number" style="color:#36acaa">2</span><span class="token plain">/2     Running   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          131m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">higress-gateway-59966b45d9-z7ltd             </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          131m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get pods -n op-system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                        READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">skywalking-oap-dashboard-65f496ccc9-dr96l   </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          99m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">skywalking-oap-server-859694656b-p8vcq      </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          99m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get pods -n app-system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                       READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">backend-6b9549bc64-f98tr   </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          99m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">backend-6b9549bc64-x2btl   </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          99m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bff-766967f8db-8ght7       </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          99m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bff-766967f8db-gflbh       </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          99m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">middle-6f4dd7bf6c-qdjqj    </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          99m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">middle-6f4dd7bf6c-stzf4    </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          99m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get svc -n app-system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME      TYPE        CLUSTER-IP      EXTERNAL-IP   PORT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">backend   ClusterIP   </span><span class="token number" style="color:#36acaa">10.96</span><span class="token plain">.179.140   </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">        </span><span class="token number" style="color:#36acaa">80</span><span class="token plain">/TCP    99m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bff       ClusterIP   </span><span class="token number" style="color:#36acaa">10.96</span><span class="token plain">.121.62    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">        </span><span class="token number" style="color:#36acaa">80</span><span class="token plain">/TCP    99m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">middle    ClusterIP   </span><span class="token number" style="color:#36acaa">10.96</span><span class="token plain">.55.8      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">        </span><span class="token number" style="color:#36acaa">80</span><span class="token plain">/TCP    99m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get ingress -n higress-system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                         CLASS     HOSTS                   ADDRESS   PORTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">httpbin                      higress   httpbin.example.com               </span><span class="token number" style="color:#36acaa">80</span><span class="token plain">      8s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">skywalking-dashboard         higress   skywalking.higress.io             </span><span class="token number" style="color:#36acaa">80</span><span class="token plain">      8s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="4"><li>æµ‹è¯• Higress Console, Skywalking Dashboard, Bff æœåŠ¡</li></ol><p>1ï¼‰ç¼–è¾‘ /etc/hosts æ–‡ä»¶æ·»åŠ ä»¥ä¸‹ä¸‰ä¸ªåŸŸå</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token number" style="color:#36acaa">127.0</span><span class="token plain">.0.1 skywalking.higress.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">127.0</span><span class="token plain">.0.1 httpbin.example.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>2ï¼‰æ‰“å¼€ higress-gateway ç«¯å£è½¬å‘</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">KUBECONFIG</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">${</span><span class="token variable environment constant" style="color:#36acaa">HOME</span><span class="token variable" style="color:#36acaa">}</span><span class="token plain">/.kube/config_higress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl -n higress-system port-forward service/higress-gateway </span><span class="token number" style="color:#36acaa">8080</span><span class="token plain">:80</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl -n higress-system port-forward service/higress-console </span><span class="token number" style="color:#36acaa">18080</span><span class="token plain">:8080</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>3ï¼‰é€šè¿‡æµè§ˆå™¨æ‰“å¼€è®¿é—®ä¸Šé¢ä¸‰ä¸ªåŸŸå</p><p>Higress æ§åˆ¶å°: <a href="http://127.0.0.1:18080" target="_blank" rel="noopener noreferrer">http://127.0.0.1:8080</a>ã€‚é¦–æ¬¡è®¿é—®æ§åˆ¶å°æ—¶éœ€è¦å…ˆåˆå§‹åŒ–ç®¡ç†å‘˜ç”¨æˆ·ã€‚åˆå§‹åŒ–å®Œæˆåä½¿ç”¨å¯¹åº”çš„ç”¨æˆ·åå¯†ç ç™»å½•å³å¯ã€‚</p><p><img loading="lazy" alt="img.png" src="/zh-cn/assets/images/higress1-67659805b3a2379e1b1763bded3a578f.png" width="2698" height="1142" class="img_ev3q"></p><p>Skywalking Dashboard: <a href="http://skywalking.higress.io:8080" target="_blank" rel="noopener noreferrer">http://skywalking.higress.io:8080</a></p><p><img loading="lazy" alt="img.png" src="/zh-cn/assets/images/higress2-c487b42954d302305876710cc8b52dce.png" width="2814" height="1420" class="img_ev3q"></p><p>Bff æœåŠ¡ï¼š <a href="http://httpbin.example.com:8080/hostname" target="_blank" rel="noopener noreferrer">http://httpbin.example.com:8080/hostname</a></p><p><img loading="lazy" alt="img.png" src="/zh-cn/assets/images/higress3-be62e59d28067affe19a9bad51bca50a.png" width="2708" height="1156" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å…­higress-é›†æˆ-skywalking-è°ƒç”¨é“¾è·¯è·Ÿè¸ªé…ç½®">å…­ã€Higress é›†æˆ Skywalking è°ƒç”¨é“¾è·¯è·Ÿè¸ªé…ç½®<a href="#å…­higress-é›†æˆ-skywalking-è°ƒç”¨é“¾è·¯è·Ÿè¸ªé…ç½®" class="hash-link" aria-label="å…­ã€Higress é›†æˆ Skywalking è°ƒç”¨é“¾è·¯è·Ÿè¸ªé…ç½®çš„ç›´æ¥é“¾æ¥" title="å…­ã€Higress é›†æˆ Skywalking è°ƒç”¨é“¾è·¯è·Ÿè¸ªé…ç½®çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>é€šè¿‡ä¿®æ”¹ Higress configmap å…¨å±€é…ç½® higress-config æ¥æ¿€æ´» Higress é›†æˆ Skywalking è°ƒç”¨é“¾è·¯è·Ÿè¸ªã€‚</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">KUBECONFIG</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">${</span><span class="token variable environment constant" style="color:#36acaa">HOME</span><span class="token variable" style="color:#36acaa">}</span><span class="token plain">/.kube/config_higress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl edit configmap higgress-config -n higress-system</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åœ¨ data ä¸‹å¢åŠ  higress é…ç½®é¡¹ç„¶åä¿å­˜ï¼Œå…·ä½“é…ç½®å†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">data:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  higress: </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">-</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tracing:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      enable: </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      sampling: </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      timeout: </span><span class="token number" style="color:#36acaa">500</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      skywalking:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       service: skywalking-oap-server.op-system.svc.cluster.local</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       port: </span><span class="token number" style="color:#36acaa">11800</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸ƒskywalking-é“¾è·¯è·Ÿè¸ª">ä¸ƒã€Skywalking é“¾è·¯è·Ÿè¸ª<a href="#ä¸ƒskywalking-é“¾è·¯è·Ÿè¸ª" class="hash-link" aria-label="ä¸ƒã€Skywalking é“¾è·¯è·Ÿè¸ªçš„ç›´æ¥é“¾æ¥" title="ä¸ƒã€Skywalking é“¾è·¯è·Ÿè¸ªçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="è¿è¡Œå‹æµ‹è„šæœ¬">è¿è¡Œå‹æµ‹è„šæœ¬<a href="#è¿è¡Œå‹æµ‹è„šæœ¬" class="hash-link" aria-label="è¿è¡Œå‹æµ‹è„šæœ¬çš„ç›´æ¥é“¾æ¥" title="è¿è¡Œå‹æµ‹è„šæœ¬çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token for-or-select variable" style="color:#36acaa">i</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable function" style="color:#d73a49">seq</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable number" style="color:#36acaa">1</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable number" style="color:#36acaa">1000</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -v -H </span><span class="token string" style="color:#e3116c">"Host:httpbin.example.com"</span><span class="token plain"> http://127.0.0.1:8080/hostname</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -v -H </span><span class="token string" style="color:#e3116c">"Host:httpbin.example.com"</span><span class="token plain"> http://127.0.0.1:8080/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -v -H </span><span class="token string" style="color:#e3116c">"Host:httpbin.example.com"</span><span class="token plain"> http://127.0.0.1:8080/service?services</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">middle,backend</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">done</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="è°ƒç”¨-bff-æœåŠ¡-service-æ¥å£æ¥æ¨¡æ‹Ÿè°ƒç”¨é“¾è·¯">è°ƒç”¨ bff æœåŠ¡ /service æ¥å£æ¥æ¨¡æ‹Ÿè°ƒç”¨é“¾è·¯<a href="#è°ƒç”¨-bff-æœåŠ¡-service-æ¥å£æ¥æ¨¡æ‹Ÿè°ƒç”¨é“¾è·¯" class="hash-link" aria-label="è°ƒç”¨ bff æœåŠ¡ /service æ¥å£æ¥æ¨¡æ‹Ÿè°ƒç”¨é“¾è·¯çš„ç›´æ¥é“¾æ¥" title="è°ƒç”¨ bff æœåŠ¡ /service æ¥å£æ¥æ¨¡æ‹Ÿè°ƒç”¨é“¾è·¯çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -v -H </span><span class="token string" style="color:#e3116c">"Host:httpbin.example.com"</span><span class="token plain"> http://127.0.0.1:8080/service?services</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">middle,backend</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>éƒ¨åˆ†è¿”å›å“åº”ä½“æƒ…å†µå¦‚ä¸‹ï¼š</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"args"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"form"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"headers"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"accept-encoding"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"gzip"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"sw8"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"1-MzYzMzM1NDctNTc0YS00MzZlLTgzNWEtNTY1YTQyNzk3YTY3-ZWQ3ODA2ZjYwNTI0MTFlZWE5ZDdmZTFhNTA5YTRmYTk=-1-bWlkZGxl-bWlkZGxlLTZmNGRkN2JmNmMtcWJ4cm0=-L0dFVC9zZXJ2aWNl-aHR0cDovL2JhY2tlbmQv"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"sw8-correlation"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">""</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"user-agent"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Go-http-client/1.1"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"x-httpbin-trace-host"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"bff-766967f8db-jwn2g/middle-6f4dd7bf6c-qbxrm/backend-6b9549bc64-8twnx"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"x-httpbin-trace-service"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"bff/middle/backend"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"x-request-id"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"e5a1b250-ebe3-931d-91d7-90e3ee2fc867"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"method"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"GET"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"origin"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">""</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"url"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"envs"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"NODE_NAME"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"higress-worker2"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"PATH"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"POD_IP"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"10.244.1.7"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"POD_NAME"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"backend-6b9549bc64-8twnx"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"POD_NAMESPACE"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"app-system"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"SERVICE_ACCOUNT"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"backend"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"SERVICE_NAME"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"backend"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"VERSION"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"v1"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"host_name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"backend-6b9549bc64-8twnx"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"body"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">""</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å“åº”å¤´ä¸­å’Œè°ƒç”¨é“¾è·¯è·Ÿè¸ªç›¸å…³æœ‰å¦‚ä¸‹ï¼š</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">"sw8"</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"1-MzYzMzM1NDctNTc0YS00MzZlLTgzNWEtNTY1YTQyNzk3YTY3-ZWQ3ODA2ZjYwNTI0MTFlZWE5ZDdmZTFhNTA5YTRmYTk=-1-bWlkZGxl-bWlkZGxlLTZmNGRkN2JmNmMtcWJ4cm0=-L0dFVC9zZXJ2aWNl-aHR0cDovL2JhY2tlbmQv"</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">"x-httpbin-trace-host"</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"bff-766967f8db-jwn2g/middle-6f4dd7bf6c-qbxrm/backend-6b9549bc64-8twnx"</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">"x-httpbin-trace-service"</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"bff/middle/backend"</span><span class="token plain">,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å…¶ä¸­ï¼š</p><ul><li>sw8:  Skywalking ç”¨äºè·Ÿè¸ªçš„ Http Header</li><li>x-httpbin-trace-host: è°ƒç”¨é“¾è·¯ç»è¿‡ POD_NAME</li><li>x-httpbin-trace-service: è°ƒç”¨é“¾è·¯ç»è¿‡ SERVICE_NAME</li></ul><p>åœ¨ Skywalking dashboard ä¸­æŸ¥çœ‹å¦‚ä¸‹ï¼š</p><ul><li>æœåŠ¡æˆªå›¾</li></ul><p><img loading="lazy" alt="img.png" src="/zh-cn/assets/images/higress4-1-240819472e8b9f06168eaa65df92e264.png" width="2808" height="1422" class="img_ev3q"></p><ul><li>è°ƒç”¨é“¾è·¯æˆªå›¾</li></ul><p><img loading="lazy" alt="img.png" src="/zh-cn/assets/images/higress4-a208c269e0dbade2c394ae0cce089e17.png" width="2876" height="1492" class="img_ev3q"></p><ul><li>è°ƒç”¨é“¾è·¯æ‹“æ‰‘æˆªå›¾</li></ul><p><img loading="lazy" alt="img.png" src="/zh-cn/assets/images/higress5-76307325468b090967c1bfaecf84af64.png" width="2800" height="1424" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å…«higress-gateway-æŒ‡æ ‡å’Œç›‘æ§é¢æ¿">å…«ã€Higress gateway æŒ‡æ ‡å’Œç›‘æ§é¢æ¿<a href="#å…«higress-gateway-æŒ‡æ ‡å’Œç›‘æ§é¢æ¿" class="hash-link" aria-label="å…«ã€Higress gateway æŒ‡æ ‡å’Œç›‘æ§é¢æ¿çš„ç›´æ¥é“¾æ¥" title="å…«ã€Higress gateway æŒ‡æ ‡å’Œç›‘æ§é¢æ¿çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>å¯ä»¥é€šè¿‡åº¦é‡å„ä¸ªç»„ä»¶çš„æ€§èƒ½æŒ‡æ ‡ï¼Œä¾‹å¦‚å“åº”æ—¶é—´ã€ååé‡ã€é”™è¯¯ç‡ã€èµ„æºä½¿ç”¨ç‡ç­‰æŒ‡æ ‡æ¥äº†è§£ç³»ç»Ÿçš„çŠ¶æ€å’Œæ€§èƒ½ã€‚</p><p>æŒ‡æ ‡æ•°æ®åŒ…å«æŒ‡æ ‡åç§°ï¼ŒæŒ‡æ ‡æ ‡ç­¾ï¼Œå’ŒæŒ‡æ ‡å€¼ï¼Œä¸‹é¢æ˜¯ envoy_cluster_upstream_cx_total upstreamï¼ˆæ€»è¿æ¥æ•°ï¼‰éƒ¨åˆ†æŒ‡æ ‡æ•°æ®ï¼Œ</p><p>å…¶ä¸­ envoy_cluster_upstream_cx_total æ˜¯æŒ‡æ ‡åç§°ï¼Œcluster_name æ˜¯æŒ‡æ ‡æ ‡ç­¾ï¼Œ16 æ˜¯æŒ‡æ ‡å€¼ã€‚</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_cluster_upstream_cx_total counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">envoy_cluster_upstream_cx_total</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">cluster_name</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"outbound|80||bff.app-system.svc.cluster.local"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">16</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Higress æŒ‡æ ‡æ•°æ®å¤§ä½“å¯ä»¥åˆ†ä¸ºä¸‰ç±»:</p><ul><li>Downstream ä¸‹æ¸¸: æŒ‡æ ‡ä¸å¤–æ¥çš„è¿æ¥/è¯·æ±‚æœ‰å…³ï¼Œä¸»è¦ç”±ä¾¦å¬å™¨ï¼ŒHTTPè¿æ¥ç®¡ç†å™¨ç­‰</li><li>UpStream ä¸Šæ¸¸: æŒ‡æ ‡ä¸å¤–å‘çš„è¿æ¥/è¯·æ±‚æœ‰å…³ï¼Œä¸»è¦ç”±è¿æ¥æ± ï¼Œè·¯ç”±å™¨ï¼Œè¿‡æ»¤å™¨ï¼Œç†”æ–­ç­‰</li><li>Server è´Ÿè½½: æŒ‡æ ‡ä¿¡æ¯è®°å½• Higress gateway æœåŠ¡å™¨å®ä¾‹çš„è´Ÿè½½ç­‰</li></ul><p>Higress æŒ‡æ ‡æ•°æ®ç±»å‹ä¸»è¦æœ‰ä¸‰ç±»:</p><ul><li>Counter: æ— ç¬¦å·æ•´æ•°ï¼Œåªä¼šå¢åŠ è€Œä¸ä¼šå‡å°‘ã€‚ä¾‹å¦‚ï¼Œæ€»è¯·æ±‚</li><li>Gauge: å¢åŠ å’Œå‡å°‘çš„æ— ç¬¦å·æ•´æ•°ã€‚ä¾‹å¦‚ï¼Œå½“å‰æ´»åŠ¨çš„è¯·æ±‚</li><li>Histogram: ä½œä¸ºæŒ‡æ ‡æµçš„ä¸€éƒ¨åˆ†çš„æ— ç¬¦å·æ•´æ•°ï¼Œç„¶åç”±æ”¶é›†å™¨èšåˆä»¥æœ€ç»ˆäº§ç”Ÿæ±‡æ€»çš„ç™¾åˆ†ä½å€¼(percentileï¼Œå³å¹³å¸¸è¯´çš„ P99/P50/Pxx)ã€‚ä¾‹å¦‚ï¼ŒUpstream å“åº”æ—¶é—´</li></ul><p>é€šè¿‡ä»¥ä¸‹å‘½ä»¤å¯ä»¥è·å– Higress gateway æ”¯æŒçš„æŒ‡æ ‡å’Œç±»å‹</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">HIGRESS_GATEWAY_POD</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">kubectl get pods -l </span><span class="token variable assign-left variable" style="color:#36acaa">app</span><span class="token variable operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">higress-gateway -o </span><span class="token variable string" style="color:#e3116c">'jsonpath={.items[0].metadata.name}'</span><span class="token variable" style="color:#36acaa"> -n higress-system</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl </span><span class="token builtin class-name">exec</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"</span><span class="token string variable" style="color:#36acaa">$HIGRESS_GATEWAY_POD</span><span class="token string" style="color:#e3116c">"</span><span class="token plain">  -n higress-system  -- </span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -sS http://127.0.0.1:15020/stats/prometheus </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"# TYPE"</span><span class="token plain">  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>éƒ¨åˆ†æŒ‡æ ‡å†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_cluster_upstream_cx_total counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_cluster_upstream_cx_tx_bytes_total counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_cluster_upstream_flow_control_backed_up_total counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_cluster_upstream_flow_control_drained_total counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_cluster_upstream_flow_control_paused_reading_total counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_cluster_upstream_flow_control_resumed_reading_total counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_cluster_upstream_internal_redirect_failed_total counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_cluster_upstream_internal_redirect_succeeded_total counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_cluster_upstream_rq counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_cluster_upstream_rq_101 counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_cluster_upstream_rq_200 counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_cluster_upstream_rq_201 counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_cluster_upstream_rq_301 counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_cluster_upstream_rq_302 counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_cluster_upstream_rq_304 counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_cluster_upstream_rq_401 counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_cluster_upstream_rq_404 counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_cluster_upstream_rq_cancelled counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_cluster_upstream_rq_completed counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_cluster_upstream_rq_maintenance_mode counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_cluster_upstream_rq_max_duration_reached counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_cluster_upstream_rq_pending_failure_eject counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_cluster_upstream_rq_pending_overflow counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_cluster_upstream_rq_pending_total counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_cluster_upstream_rq_per_try_idle_timeout counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_cluster_upstream_rq_per_try_timeout counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_cluster_upstream_rq_retry counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_cluster_upstream_rq_retry_backoff_exponential counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_cluster_upstream_rq_retry_backoff_ratelimited counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_cluster_upstream_rq_retry_limit_exceeded counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_cluster_upstream_rq_retry_overflow counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_cluster_upstream_rq_retry_success counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_cluster_upstream_rq_rx_reset counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_cluster_upstream_rq_timeout counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_cluster_upstream_rq_total counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_cluster_upstream_rq_tx_reset counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_http_downstream_cx_total counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_http_downstream_cx_tx_bytes_total counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_http_downstream_cx_upgrades_total counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_http_downstream_flow_control_paused_reading_total counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_http_downstream_flow_control_resumed_reading_total counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_http_downstream_rq counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_http_downstream_rq_completed counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_http_downstream_rq_failed_path_normalization counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_http_downstream_rq_header_timeout counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_http_downstream_rq_http1_total counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_http_downstream_rq_http2_total counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_http_downstream_rq_http3_total counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_http_downstream_rq_idle_timeout counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_http_downstream_rq_max_duration_reached counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_http_downstream_rq_non_relative_path counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_http_downstream_rq_overload_close counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_http_downstream_rq_redirected_with_normalized_path counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_http_downstream_rq_rejected_via_ip_detection counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_http_downstream_rq_response_before_rq_complete counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_http_downstream_rq_rx_reset counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_http_downstream_rq_timeout counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_http_downstream_rq_too_large counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_http_downstream_rq_total counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_http_downstream_rq_tx_reset counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># TYPE envoy_http_downstream_rq_ws_on_non_ws_route counter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å…·ä½“æŒ‡æ ‡å®šä¹‰å‚è€ƒå¦‚ä¸‹ï¼š</p><ul><li><a href="https://www.envoyproxy.io/docs/envoy/latest/configuration/upstream/cluster_manager/cluster_stats" target="_blank" rel="noopener noreferrer">cluster manager</a></li><li><a href="https://www.envoyproxy.io/docs/envoy/latest/configuration/http/http_conn_man/stats" target="_blank" rel="noopener noreferrer">http connection manager</a></li><li><a href="https://www.envoyproxy.io/docs/envoy/latest/configuration/listeners/stats" target="_blank" rel="noopener noreferrer">listeners</a></li><li><a href="https://www.envoyproxy.io/docs/envoy/latest/configuration/observability/statistics" target="_blank" rel="noopener noreferrer">server</a></li></ul><p>å¦‚ä½•æŸ¥çœ‹ Higress æŒ‡æ ‡æ•°æ®ï¼š</p><ul><li>é€šè¿‡ <a href="http://127.0.0.1:18080/dashboard" target="_blank" rel="noopener noreferrer">http://127.0.0.1:18080/dashboard</a> æŸ¥çœ‹ Higress gateway ç›‘æ§é¢æ¿</li><li>é€šè¿‡ Skywalking Dashboard æŸ¥çœ‹ Higress gateway ç›‘æ§æ•°æ®</li></ul><p>é€šè¿‡ Skywalking Dashboard æŸ¥çœ‹ Higress gateway ç›‘æ§æ•°æ®éƒ¨åˆ†æˆªå›¾å¦‚ä¸‹ï¼š</p><p><img loading="lazy" alt="img.png" src="/zh-cn/assets/images/higress14-274da38a0b0af5a8fa09d20ab5a7bbb5.png" width="2176" height="854" class="img_ev3q">
<img loading="lazy" alt="img.png" src="/zh-cn/assets/images/higress15-63b1535591a4393a1b9a030856749790.png" width="2176" height="904" class="img_ev3q">
<img loading="lazy" alt="img.png" src="/zh-cn/assets/images/higress16-8236b7f058860b440ab64c2ec997f6d5.png" width="2170" height="1092" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å‚è€ƒæ–‡æ¡£">å‚è€ƒæ–‡æ¡£<a href="#å‚è€ƒæ–‡æ¡£" class="hash-link" aria-label="å‚è€ƒæ–‡æ¡£çš„ç›´æ¥é“¾æ¥" title="å‚è€ƒæ–‡æ¡£çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ul><li><a href="https://istio.io/latest/docs/tasks/observability/distributed-tracing/skywalking/" target="_blank" rel="noopener noreferrer">https://istio.io/latest/docs/tasks/observability/distributed-tracing/skywalking/</a></li><li><a href="http://peter.bourgon.org/blog/2017/02/21/metrics-tracing-and-logging.html" target="_blank" rel="noopener noreferrer">http://peter.bourgon.org/blog/2017/02/21/metrics-tracing-and-logging.html</a></li><li><a href="https://skywalking.apache.org/docs/main/next/en/api/x-process-propagation-headers-v3/" target="_blank" rel="noopener noreferrer">https://skywalking.apache.org/docs/main/next/en/api/x-process-propagation-headers-v3/</a></li><li><a href="https://skywalking.apache.org/docs/main/next/en/api/trace-data-protocol-v3/" target="_blank" rel="noopener noreferrer">https://skywalking.apache.org/docs/main/next/en/api/trace-data-protocol-v3/</a></li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Higress å¼€æºä¹‹å¤é¡¹ç›®æŠ¥å]]></title>
            <link>https://higress.io/zh-cn/blog/ospp-2023</link>
            <guid>https://higress.io/zh-cn/blog/ospp-2023</guid>
            <pubDate>Tue, 09 May 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Higress æ˜¯åŸºäºé˜¿é‡Œå†…éƒ¨ä¸¤å¹´å¤šçš„å®è·µæ²‰æ·€ï¼Œä»¥å¼€æº Istio ä¸ Envoy ä¸ºæ ¸å¿ƒæ„å»ºçš„ä¸‹ä¸€ä»£äº‘åŸç”Ÿç½‘å…³]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¼€æºä¹‹å¤ä»‹ç»">å¼€æºä¹‹å¤ä»‹ç»<a href="#å¼€æºä¹‹å¤ä»‹ç»" class="hash-link" aria-label="å¼€æºä¹‹å¤ä»‹ç»çš„ç›´æ¥é“¾æ¥" title="å¼€æºä¹‹å¤ä»‹ç»çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>å¼€æºä¹‹å¤æ˜¯ç”±ä¸­ç§‘é™¢è½¯ä»¶æ‰€â€œå¼€æºè½¯ä»¶ä¾›åº”é“¾ç‚¹äº®è®¡åˆ’â€å‘èµ·å¹¶é•¿æœŸæ”¯æŒçš„ä¸€é¡¹æš‘æœŸå¼€æºæ´»åŠ¨ï¼Œæ—¨åœ¨é¼“åŠ±åœ¨æ ¡å­¦ç”Ÿç§¯æå‚ä¸å¼€æºè½¯ä»¶çš„å¼€å‘ç»´æŠ¤ï¼ŒåŸ¹å…»å’Œå‘æ˜æ›´å¤šä¼˜ç§€çš„å¼€å‘è€…ï¼Œä¿ƒè¿›ä¼˜ç§€å¼€æºè½¯ä»¶ç¤¾åŒºçš„è“¬å‹ƒå‘å±•ï¼ŒåŠ©åŠ›å¼€æºè½¯ä»¶ä¾›åº”é“¾å»ºè®¾ã€‚</p><p>ç›®å‰<a href="https://summer-ospp.ac.cn" target="_blank" rel="noopener noreferrer">å¼€æºä¹‹å¤å®˜ç½‘</a>å·²ç»å¼€å¯äº†å­¦ç”ŸæŠ¥åï¼Œåªè¦ä½ æ»¡è¶³ä»¥ä¸‹è¦æ±‚å³å¯è¿›è¡Œé¡¹ç›®ç”³è¯·ï¼š</p><ul><li>æœ¬æ´»åŠ¨é¢å‘å¹´æ»¡ 18 å‘¨å²åœ¨æ ¡å­¦ç”Ÿã€‚</li><li>æš‘æœŸå³å°†æ¯•ä¸šçš„å­¦ç”Ÿï¼Œåªè¦åœ¨ç”³è¯·æ—¶å­¦ç”Ÿè¯å¤„åœ¨æœ‰æ•ˆæœŸå†…ï¼Œå°±å¯ä»¥æäº¤ç”³è¯·ã€‚</li><li>ä¸­å›½ç±å­¦ç”Ÿå‚ä¸æ´»åŠ¨éœ€æä¾›èº«ä»½è¯ã€å­¦ç”Ÿè¯ã€æ•™è‚²éƒ¨å­¦ç±åœ¨çº¿éªŒè¯æŠ¥å‘Šï¼ˆå­¦ä¿¡ç½‘ï¼‰æˆ–åœ¨è¯»è¯æ˜ã€‚</li><li>å¤–ç±å­¦ç”Ÿå‚ä¸æ´»åŠ¨éœ€æä¾›æŠ¤ç…§ï¼ŒåŒæ—¶æä¾›å½•å–é€šçŸ¥ä¹¦ã€å­¦ç”Ÿå¡ã€åœ¨è¯»è¯æ˜ç­‰æ–‡ä»¶ç”¨äºè¯æ˜å­¦ç”Ÿèº«ä»½ã€‚</li></ul><p>å‚ä¸é¡¹ç›®ä¸ä»…å¯ä»¥ä¸ºå¼€æºä¸–ç•Œåšå‡ºè‡ªå·±çš„è´¡çŒ®ï¼Œè¿˜èƒ½è·å¾—ä¸°åšçš„ç»“é¡¹å¥–é‡‘ï¼ˆåŸºç¡€éš¾åº¦8000 RMB/è¿›é˜¶éš¾åº¦12000 RMBï¼‰ï¼Œé¡¹ç›®ç»éªŒä¹Ÿä¼šæˆä¸ºä½ æ¯•ä¸šç®€å†ä¸Šçš„äº®ç‚¹ï¼Œå¿«æ¥æŠ¥åå§ï¼</p><p>æŠ¥åæˆªæ­¢æ—¶é—´ä¸º 6 æœˆ 3 æ—¥ 15 ç‚¹ï¼Œå…·ä½“å‚è€ƒå®˜ç½‘æ´»åŠ¨æµç¨‹å’Œå‚ä¸æŒ‡å—ä»‹ç»ï¼š</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i4/O1CN01gxAj9N27FL4twpxbV_!!6000000007767-0-tps-2768-1114.jpg" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="higress-ä»‹ç»">Higress ä»‹ç»<a href="#higress-ä»‹ç»" class="hash-link" aria-label="Higress ä»‹ç»çš„ç›´æ¥é“¾æ¥" title="Higress ä»‹ç»çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>Higress æ˜¯åŸºäºé˜¿é‡Œå†…éƒ¨ä¸¤å¹´å¤šçš„å®è·µæ²‰æ·€ï¼Œä»¥å¼€æº Istio ä¸ Envoy ä¸ºæ ¸å¿ƒæ„å»ºçš„ä¸‹ä¸€ä»£äº‘åŸç”Ÿç½‘å…³ã€‚Higress å®ç°äº†å®‰å…¨é˜²æŠ¤ç½‘å…³ã€æµé‡ç½‘å…³ã€å¾®æœåŠ¡ç½‘å…³ä¸‰å±‚ç½‘å…³åˆä¸€ï¼Œå¯ä»¥æ˜¾è‘—é™ä½ç½‘å…³çš„éƒ¨ç½²å’Œè¿ç»´æˆæœ¬ã€‚</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i1/O1CN01iO9ph825juHbOIg75_!!6000000007563-2-tps-2483-2024.png" class="img_ev3q"></p><p>Higress åœ¨é˜¿é‡Œå†…éƒ¨çš„è¯ç”Ÿå’Œæ¼”è¿›å†ç¨‹å¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« :</p><p><a href="https://mp.weixin.qq.com/s/dgvd9TslzhX1ZuUNIH2ZXg" target="_blank" rel="noopener noreferrer">é˜¿é‡Œå·´å·´é‡ç£…å¼€æºäº‘åŸç”Ÿç½‘å…³: Higress</a></p><p>Higress å¼€æºåŠå¹´æ—¶é—´ï¼ŒGitHub star æ•°å·²ç»ç ´åƒï¼Œåœ¨ä¸Šä¸ªæœˆ Higress å·²ç» Release å‡ºäº†ç¬¬ä¸€ä¸ª RC ç‰ˆæœ¬ï¼Œä½œä¸ºæ­£å¼ GA çš„å€™é€‰å‘å¸ƒç‰ˆæœ¬ï¼Œè¯¦æƒ…å¯ä»¥æŸ¥çœ‹è¿™ç¯‡æ–‡ç« :</p><p><a href="https://mp.weixin.qq.com/s/ogy-xXXLEgzw6otaIAT6Dw" target="_blank" rel="noopener noreferrer">ä¸Šçº¿æ§åˆ¶å°ï¼Œé™ä½ä½¿ç”¨é—¨æ§›ï½œHigress 1.0.0 RC ç‰ˆæœ¬å‘å¸ƒ</a></p><p>åœ¨æœ¬æ¬¡å¼€æºä¹‹å¤æ´»åŠ¨ä¸­ï¼ŒHigress æœ‰ä¸¤ä¸ªè¿›é˜¶éš¾åº¦çš„é¡¹ç›®å¯ä»¥ç”³è¯·ï¼Œæ¬¢è¿å„ä½åŒå­¦è¸Šè·ƒæŠ¥åã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="é¡¹ç›®ä»‹ç»">é¡¹ç›®ä»‹ç»<a href="#é¡¹ç›®ä»‹ç»" class="hash-link" aria-label="é¡¹ç›®ä»‹ç»çš„ç›´æ¥é“¾æ¥" title="é¡¹ç›®ä»‹ç»çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="é¡¹ç›®ä¸€higress-wasm-æ’ä»¶æ„å»ºè°ƒè¯•éƒ¨ç½²çš„å‘½ä»¤è¡Œå®ç°">é¡¹ç›®ä¸€ï¼šHigress Wasm æ’ä»¶æ„å»º/è°ƒè¯•/éƒ¨ç½²çš„å‘½ä»¤è¡Œå®ç°<a href="#é¡¹ç›®ä¸€higress-wasm-æ’ä»¶æ„å»ºè°ƒè¯•éƒ¨ç½²çš„å‘½ä»¤è¡Œå®ç°" class="hash-link" aria-label="é¡¹ç›®ä¸€ï¼šHigress Wasm æ’ä»¶æ„å»º/è°ƒè¯•/éƒ¨ç½²çš„å‘½ä»¤è¡Œå®ç°çš„ç›´æ¥é“¾æ¥" title="é¡¹ç›®ä¸€ï¼šHigress Wasm æ’ä»¶æ„å»º/è°ƒè¯•/éƒ¨ç½²çš„å‘½ä»¤è¡Œå®ç°çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>Higress æä¾›äº†å¾ˆæ–¹ä¾¿çš„ Wasm æ’ä»¶æ‰©å±•æ¡†æ¶ï¼Œå…·ä½“å¯ä»¥æŸ¥çœ‹è¿™ç¯‡æ–‡ç« ï¼š <a href="https://higress.io/zh-cn/blog/30-line-wasm" target="_blank" rel="noopener noreferrer">30è¡Œä»£ç å†™ä¸€ä¸ªWasm Goæ’ä»¶</a></p><p>æ›´è¯¦ç»†çš„æ’ä»¶å¼€å‘å’Œè°ƒè¯•æµç¨‹å¯ä»¥æŸ¥çœ‹è¿™ç¯‡æ–‡ç« ï¼š<a href="https://higress.io/zh-cn/docs/user/wasm-go" target="_blank" rel="noopener noreferrer">ä½¿ç”¨ Go è¯­è¨€å¼€å‘ WASM æ’ä»¶</a></p><p>è¿™é‡Œå¯¹æ’ä»¶çš„ç”Ÿæ•ˆæœºåˆ¶ç®€å•åšä¸ªè¯´æ˜ï¼š</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i4/O1CN01PO4HYC1h7qYHonHHZ_!!6000000004231-2-tps-1100-537.png" class="img_ev3q"></p><ol><li>ç”¨æˆ·å°†ä»£ç ç¼–è¯‘æˆ wasm æ–‡ä»¶</li><li>ç”¨æˆ·å°† wasm æ–‡ä»¶æ„å»ºæˆ oci é•œåƒ</li><li>ç”¨æˆ·å°† oci é•œåƒæ¨é€è‡³é•œåƒä»“åº“</li><li>ç”¨æˆ·åˆ›å»º WasmPlugin èµ„æº</li><li>Istio watch åˆ° WasmPlugin èµ„æºçš„å˜åŒ–</li><li>Higress Gateway ä¸­çš„ xDS proxy è¿›ç¨‹ä» Istio è·å–åˆ°é…ç½®ï¼Œå‘ç°æ’ä»¶çš„é•œåƒåœ°å€</li><li>xDS proxy ä»é•œåƒä»“åº“æ‹‰å–é•œåƒ</li><li>xDS proxy ä»é•œåƒä¸­æå–å‡º wasm æ–‡ä»¶</li><li>Higress Gateway ä¸­çš„ envoy è¿›ç¨‹ä» xDS proxy è·å–åˆ°é…ç½®ï¼Œå‘ç° wasm æ–‡ä»¶çš„æœ¬åœ°è·¯å¾„</li><li>envoy ä»æœ¬åœ°æ–‡ä»¶ä¸­åŠ è½½ wasm æ–‡ä»¶</li></ol><p>è¿™é‡Œ envoy è·å–é…ç½®å¹¶åŠ è½½ wasm æ–‡ä»¶ä½¿ç”¨åˆ°äº† ECDS (Extension Config Discovery Service)çš„æœºåˆ¶ï¼Œå®ç°äº† wasm æ–‡ä»¶æ›´æ–°ï¼Œç›´æ¥çƒ­åŠ è½½ï¼Œä¸ä¼šå¯¼è‡´ä»»ä½•è¿æ¥ä¸­æ–­ï¼Œä¸šåŠ¡æµé‡å®Œå…¨æ— æŸã€‚</p><p>è¿™ä¸ªé¡¹ç›®çš„åˆè¡·æ˜¯å¸Œæœ›èƒ½åŸºäº Higress çš„ CLI å‘½ä»¤è¡Œå·¥å…·(hgctl) æ¥è¿›ä¸€æ­¥ç®€åŒ– Higress Wasm æ’ä»¶çš„å¼€å‘è°ƒè¯•å’Œå®‰è£…éƒ¨ç½²æ­¥éª¤ï¼Œä½¿ä¹‹æ›´å®¹æ˜“ä¸Šæ‰‹ä½¿ç”¨ã€‚</p><p>éœ€è¦å®ç°çš„ hgctl å‘½ä»¤å¦‚ä¸‹ï¼š</p><ul><li>hgctl plugin buildï¼šæ„å»º wasm OCI é•œåƒå¹¶æ¨é€åˆ°æŒ‡å®šä»“åº“</li><li>hgctl plugin testï¼šå¯åŠ¨ docker compose æµ‹è¯•æ’ä»¶åŠŸèƒ½</li><li>hgctl plugin install/uninstall ï¼šåœ¨å½“å‰higressé›†ç¾¤ä¸­å®‰è£…æˆ–å¸è½½æ’ä»¶</li><li>hgctl plugin configï¼šä¿®æ”¹åˆ¶å®šæ’ä»¶çš„é…ç½®</li></ul><p>Higress Wasm æ’ä»¶é…ç½®åŸºäº Openapi Specification ï¼ˆOAS 3.0ï¼‰è¿›è¡Œçº¦æŸï¼Œéœ€è¦èƒ½ä»ä»£ç ä¸­è§£æå‡ºæ’ä»¶é…ç½®å­—æ®µæ ¼å¼ï¼Œè‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„ OAS çº¦æŸï¼Œç”¨äºæ·»åŠ åˆ° OCI é•œåƒä¸­ï¼Œå¹¶åŒæ—¶ç”¨äº install/uninstall/config ç­‰å‘½ä»¤çš„å‚æ•°é…ç½®æ ¡éªŒ</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="é¡¹ç›®äºŒåŸºäº-wasm-å®ç°-oidc-è®¤è¯æ’ä»¶">é¡¹ç›®äºŒï¼šåŸºäº Wasm å®ç° OIDC è®¤è¯æ’ä»¶<a href="#é¡¹ç›®äºŒåŸºäº-wasm-å®ç°-oidc-è®¤è¯æ’ä»¶" class="hash-link" aria-label="é¡¹ç›®äºŒï¼šåŸºäº Wasm å®ç° OIDC è®¤è¯æ’ä»¶çš„ç›´æ¥é“¾æ¥" title="é¡¹ç›®äºŒï¼šåŸºäº Wasm å®ç° OIDC è®¤è¯æ’ä»¶çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>Higress ä½œä¸ºä¸€ä¸ªäº‘åŸç”Ÿç½‘å…³ï¼Œéœ€è¦å®ç° OIDC è®¤è¯çš„èƒ½åŠ›ï¼Œæ–¹ä¾¿ç”¨æˆ·å¯¹æ¥å¤–éƒ¨è®¤è¯æœåŠ¡ã€‚</p><p>OIDC ï¼ˆOpenID Connectï¼‰ æ˜¯åŸºäº OAuth 2.0 çš„èº«ä»½è®¤è¯åè®®ï¼Œå¯ä»¥ç”¨äºå®ç° SSOï¼ˆSingle Sign Onï¼‰å•ç‚¹ç™»å½•ï¼Œå³é€šè¿‡ç½‘å…³ç»Ÿä¸€å®Œæˆç”¨æˆ·çš„èº«ä»½è®¤è¯ï¼Œåœ¨èº«ä»½è®¤è¯æˆåŠŸåï¼Œå†å°†èµ„æºè¯·æ±‚è½¬å‘ç»™åç«¯æœåŠ¡ã€‚</p><p><img loading="lazy" src="https://summer-resource.obs.cn-north-4.myhuaweicloud.com/image_1682322347641.png?AccessKeyId=PVWAQ81YUWFDVEUNOSXR&amp;Expires=1768722347&amp;Signature=uaKg4CAupPRGPdz%2BtRT1qcc5SeI%3D" class="img_ev3q"></p><p>æµç¨‹ç®€ä»‹å¦‚ä¸‹ï¼š</p><ol><li>å®¢æˆ·ç«¯å‘ç½‘å…³å‘èµ·è®¤è¯è¯·æ±‚ã€‚</li><li>ç½‘å…³å°†è®¤è¯è¯·æ±‚ç›´æ¥è½¬å‘åˆ°ç»™è®¤è¯æœåŠ¡ã€‚</li><li>è®¤è¯æœåŠ¡è¯»å–è¯·æ±‚ä¸­çš„éªŒè¯ä¿¡æ¯ï¼ˆä¾‹å¦‚ç”¨æˆ·åã€å¯†ç ï¼‰è¿›è¡ŒéªŒè¯ï¼ŒéªŒè¯é€šè¿‡åè¿”å›Codeç»™ç½‘å…³ã€‚</li><li>ç½‘å…³å°†æºå¸¦Codeçš„åº”ç­”è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</li><li>å®¢æˆ·ç«¯å‘ç½‘å…³è¯·æ±‚å›è°ƒæ¥å£ï¼Œè¯·æ±‚ä¸­æºå¸¦Codeã€‚</li><li>ç½‘å…³è¯·æ±‚è®¤è¯æœåŠ¡é¢å‘Tokenï¼Œè¯·æ±‚ä¸­æºå¸¦Codeã€Client IDã€Client Secretã€‚</li><li>è®¤è¯æœåŠ¡éªŒè¯åˆæ³•æ€§ï¼Œå¹¶è¿”å›ID Tokenã€‚</li><li>è®¤è¯æˆåŠŸï¼Œç½‘å…³å°†æºå¸¦ID Tokençš„åº”ç­”è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</li><li>å®¢æˆ·ç«¯å‘ç½‘å…³å‘èµ·ä¸šåŠ¡è¯·æ±‚ï¼Œè¯·æ±‚ä¸­æºå¸¦ID Tokenï¼Œç½‘å…³æ ¡éªŒè¯·æ±‚ä¸­æ˜¯å¦æºå¸¦ID Tokenå’Œåˆæ³•æ€§ã€‚</li><li>ç½‘å…³æ ¡éªŒå®¢æˆ·ç«¯çš„ä¸šåŠ¡è¯·æ±‚åˆæ³•ï¼Œå°†è¯·æ±‚é€ä¼ ç»™ä¸šåŠ¡æœåŠ¡ã€‚</li><li>ä¸šåŠ¡æœåŠ¡è¿›è¡Œä¸šåŠ¡å¤„ç†ååº”ç­”ã€‚</li><li>ç½‘å…³å°†ä¸šåŠ¡åº”ç­”è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</li></ol><p>ç›®å‰ Higress ä¹Ÿå¯ä»¥åŸºäº Envoy çš„ Ext Authz æœºåˆ¶å¯¹æ¥å¤–ç½®çš„ oauth2-proxy æ¥å®ç°é‰´æƒï¼Œä¸è¿‡è¿™ä¸ªæ–¹æ¡ˆä¸€æ–¹é¢æœ‰é¢å¤–çš„è¯·æ±‚å¼€é”€ï¼Œå¦ä¸€æ–¹é¢ oauth2-proxy åªèƒ½ä½œä¸€ç»„ OIDC é…ç½®ï¼Œæ— æ³•å¯¹æ¥å¤šä¸ªä¸åŒçš„è®¤è¯æœåŠ¡</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="åŠ å…¥ç¤¾åŒº">åŠ å…¥ç¤¾åŒº<a href="#åŠ å…¥ç¤¾åŒº" class="hash-link" aria-label="åŠ å…¥ç¤¾åŒºçš„ç›´æ¥é“¾æ¥" title="åŠ å…¥ç¤¾åŒºçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>GitHubï¼š<a href="https://github.com/alibaba/higress" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/higress</a></p><p>å®˜ç½‘: <a href="https://higress.io" target="_blank" rel="noopener noreferrer">https://higress.io</a></p><p>å¯¹äºæŠ¥åæ–¹å¼æœ‰ä»»ä½•ç–‘é—®ï¼Œæˆ–è€…å¯¹æŸä¸€ä¸ªä»»åŠ¡éå¸¸æ„Ÿå…´è¶£ï¼Œå¹¶ä¸”æƒ³è¦æ·±å…¥äº†è§£çš„åŒå­¦ï¼Œæ¬¢è¿æ‰«ç æ·»åŠ å¾®ä¿¡ï¼Œå¤‡æ³¨å¼€æºä¹‹å¤</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i3/O1CN01bkpHik1yZBhbnhyTf_!!6000000006592-2-tps-500-500.png" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç›¸å…³é¡¹ç›®æ¨è">ç›¸å…³é¡¹ç›®æ¨è<a href="#ç›¸å…³é¡¹ç›®æ¨è" class="hash-link" aria-label="ç›¸å…³é¡¹ç›®æ¨èçš„ç›´æ¥é“¾æ¥" title="ç›¸å…³é¡¹ç›®æ¨èçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ul><li>å¯¹äº<strong>å¾®æœåŠ¡æ³¨å†Œå‘ç°å’Œé…ç½®ç®¡ç†</strong>æœ‰å…´è¶£çš„åŒå­¦ï¼Œå¯ä»¥å°è¯•å¡«æŠ¥ <a href="https://nacos.io/zh-cn/blog/iscas2023.html" target="_blank" rel="noopener noreferrer">Nacos</a> å¼€æºä¹‹å¤ï¼›</li><li>å¯¹äº<strong>å¾®æœåŠ¡åˆ†å¸ƒå¼äº‹åŠ¡</strong>æœ‰å…´è¶£çš„åŒå­¦ï¼Œå¯ä»¥å°è¯•å¡«æŠ¥ <a href="https://summer-ospp.ac.cn/org/orgdetail/064c15df-705c-483a-8fc8-02831370db14?lang=zh" target="_blank" rel="noopener noreferrer">Seata</a> å¼€æºä¹‹å¤ï¼›</li><li>å¯¹äº<strong>å¾®æœåŠ¡æ¡†æ¶å’ŒRPCæ¡†æ¶</strong>æœ‰å…´è¶£çš„åŒå­¦ï¼Œå¯ä»¥å°è¯•å¡«æŠ¥ <a href="https://summer-ospp.ac.cn/org/orgdetail/41d68399-ed48-4d6d-9d4d-3ff4128dc132?lang=zh" target="_blank" rel="noopener noreferrer">Spring Cloud Alibaba</a> å’Œ <a href="https://summer-ospp.ac.cn/org/orgdetail/a7f6e2ad-4acc-47f8-9471-4e54b9a166a6?lang=zh" target="_blank" rel="noopener noreferrer">Dubbo</a> å¼€æºä¹‹å¤ï¼›</li><li>å¯¹äº<strong>åˆ†å¸ƒå¼é«˜å¯ç”¨é˜²æŠ¤</strong>æœ‰å…´è¶£çš„åŒå­¦ï¼Œå¯ä»¥å°è¯•å¡«æŠ¥ <a href="https://summer-ospp.ac.cn/org/orgdetail/5e879522-bd90-4a8b-bf8b-b11aea48626b?lang=zh" target="_blank" rel="noopener noreferrer">Sentinel</a> å¼€æºä¹‹å¤ï¼›</li><li>å¯¹äº<strong>å¾®æœåŠ¡æ²»ç†</strong>æœ‰å…´è¶£çš„åŒå­¦ï¼Œå¯ä»¥å°è¯•å¡«æŠ¥ <a href="https://summer-ospp.ac.cn/org/orgdetail/aaff4eec-11b1-4375-997d-5eea8f51762b?lang=zh" target="_blank" rel="noopener noreferrer">OpenSergo</a> å¼€æºä¹‹å¤ã€‚</li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[ä¸Šçº¿æ§åˆ¶å°ï¼Œé™ä½ä½¿ç”¨é—¨æ§› ï½œ Higress 1.0.0 RC ç‰ˆæœ¬å‘å¸ƒ]]></title>
            <link>https://higress.io/zh-cn/blog/release-100</link>
            <guid>https://higress.io/zh-cn/blog/release-100</guid>
            <pubDate>Mon, 10 Apr 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[å†æ—¶ 5 ä¸ªå¤šæœˆï¼ŒHigress äº‘åŸç”Ÿç½‘å…³å¼€æºçš„ç¬¬ä¸€ä¸ªé‡è¦é‡Œç¨‹ç¢‘è¾¾æˆäº†]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="å‰è¨€">å‰è¨€<a href="#å‰è¨€" class="hash-link" aria-label="å‰è¨€çš„ç›´æ¥é“¾æ¥" title="å‰è¨€çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>å†æ—¶ 5 ä¸ªå¤šæœˆï¼ŒHigress æ¨å‡ºäº†é¦–ä¸ª RC ï¼ˆRelease Candidateï¼Œå³æ­£å¼å‘å¸ƒçš„å€™é€‰ï¼‰ç‰ˆæœ¬ 1.0.0-rcï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡æ§åˆ¶å°ï¼Œå¼€ç®±å³ç”¨åœ°ä½¿ç”¨äº‘åŸç”Ÿç½‘å…³ã€‚</p><p>é€‰ç”¨ Higress ä½œä¸ºäº‘åŸç”Ÿç½‘å…³çš„æ ¸å¿ƒä¼˜åŠ¿å¦‚ä¸‹ï¼š</p><ul><li><p><strong>æ˜“ç”¨æ€§</strong></p><p>â€œäº‘åŸç”Ÿâ€å·²ç»ä¸å†æ˜¯ä¸€ä¸ªæ–°é²œè¯ï¼Œä½†ä¼ä¸šå¯¹äº‘åŸç”ŸæŠ€æœ¯çš„å­¦ä¹ ä½¿ç”¨æˆæœ¬ä»æœ‰è®¸å¤šé¡¾è™‘ï¼Œå¯¹äº‘åŸç”Ÿæ–°æ ‡å‡†çš„è¿½èµ¶åˆæœ‰å¾ˆå¤šç„¦è™‘ï¼›</p><p>Higress åŒæ—¶æä¾›äº†æœ¬åœ°å®‰è£…/ç”Ÿäº§éƒ¨ç½²çš„ <a href="https://higress.io/zh-cn/docs/user/quickstart" target="_blank" rel="noopener noreferrer">quickstart</a>ï¼Œå¯ä»¥ä¸€é”®éƒ¨ç½²ï¼Œå¹¶é€šè¿‡æ§åˆ¶å°æ“ä½œå¿«é€Ÿä¸Šæ‰‹ï¼›åŸºäºç®€å•æ˜“ç”¨çš„æ§åˆ¶å°ï¼ŒHigress å¯ä»¥å°è£… Ingress/Gateway API çš„æ ‡å‡†ç»†èŠ‚ï¼Œæ ¹æ²»æŠ€æœ¯è¿½èµ¶ç„¦è™‘ã€‚</p></li><li><p><strong>æ ‡å‡†åŒ–</strong></p><p>K8s å¸¦æ¥äº†äº‘åŸç”Ÿçš„è·¯ç”±æ ‡å‡† Ingress/Gateway APIï¼Œå¦‚åŒ POSIX å®šä¹‰ Unix å¯ç§»æ¤æ“ä½œç³»ç»Ÿæ ‡å‡†ï¼Œå†æ—¶ 35 å¹´ç»ä¹…ä¸è¡°ï¼Œäº‘åŸç”Ÿçš„è·¯ç”±æ ‡å‡†çš„ç”Ÿå‘½å‘¨æœŸä¸€å®šä¼šè¿œè¶…è¿‡ K8s æœ¬èº«ï¼›</p><p>Higress ç»“åˆé˜¿é‡Œå†…éƒ¨å®è·µä»¥åŠé˜¿é‡Œäº‘äº§å“æ²‰æ·€ï¼Œç§¯ç´¯äº†åŸºäº Ingress API çš„ä¸°å¯Œçš„è·¯ç”±ç­–ç•¥æ‰©å±•èƒ½åŠ›ï¼ŒåŒæ—¶è¿˜å…¼å®¹å¤§éƒ¨åˆ† Nginx Ingress èƒ½åŠ›ï¼Œè¿™äº›èƒ½åŠ›åç»­ä¹Ÿå°†åœ¨ Gateway API ä¸Šæ”¯æŒã€‚</p></li><li><p><strong>é«˜é›†æˆ</strong></p><p>ä¼ä¸šå†…æœ‰å¤§é‡ä¼ ç»Ÿæ¶æ„éƒ¨ç½²çš„æœåŠ¡ï¼Œä¼šæˆä¸ºå‘äº‘åŸç”Ÿæ¶æ„æ¼”è¿›çš„æŠ€æœ¯è´Ÿæ‹…ï¼Œè¦æ±‚äº‘åŸç”Ÿç½‘å…³å…·å¤‡å¯¹æ¥å¼‚æ„æœåŠ¡æ¶æ„çš„èƒ½åŠ›ï¼›</p><p>åŸºäº Higress æä¾›çš„å¤šç§æœåŠ¡å‘ç°æœºåˆ¶ï¼Œç½‘å…³è·¯ç”±ä¸ä»…å¯ä»¥è½¬å‘åˆ° K8s æœåŠ¡ï¼Œä¹Ÿå¯ä»¥ç›´æ¥é…ç½® IP è½¬å‘åˆ°åˆ°ç‰©ç†æœºä¸Šçš„æœåŠ¡ï¼›åŸºäº Nacos/ZooKeeper ç­‰æ³¨å†Œä¸­å¿ƒå¯¹æ¥ï¼Œè¿˜å¯ä»¥è½»æ¾å®ç° <a href="https://higress.io/zh-cn/docs/user/spring-cloud" target="_blank" rel="noopener noreferrer">Spring Cloud</a> å’Œ <a href="https://higress.io/zh-cn/docs/user/dubbo" target="_blank" rel="noopener noreferrer">Dubbo</a> å¾®æœåŠ¡çš„è·¯ç”±ï¼Œæ— è®ºå…¶æ˜¯å¦éƒ¨ç½²åœ¨ K8s å†…ã€‚</p></li><li><p><strong>æ˜“æ‰©å±•</strong></p><p>åŸºäºæ‰©å±•æœºåˆ¶è¿›è¡ŒäºŒæ¬¡å¼€å‘çš„èƒ½åŠ›ï¼Œæ˜¯äº‘åŸç”Ÿç½‘å…³åœ¨ä¸åŒä¸šåŠ¡åœºæ™¯ä¸‹éƒ½èƒ½é€‚é…è½åœ°çš„å…³é”®ï¼›</p><p>Higressæä¾›äº†çµæ´»çš„æ’ä»¶æ‰©å±•æœºåˆ¶ï¼Œç›®å‰æ’ä»¶å¸‚åœºå·²ç»æ¨å‡ºå¤šä¸ªå®˜æ–¹æ’ä»¶ï¼Œå¹¶æ”¯æŒç”¨æˆ·é€šè¿‡æ§åˆ¶å°ç›´æ¥ä¸Šä¼ è‡ªå·±å¼€å‘çš„æ’ä»¶ï¼ŒåŒæ—¶å¼€æºç¤¾åŒºçš„æ’ä»¶å¸‚åœºç”Ÿæ€ä¹Ÿåœ¨ä¸æ–­å»ºè®¾ä¸­ã€‚</p></li><li><p><strong>çƒ­æ›´æ–°</strong></p><p>ä¼ ç»Ÿ Nginx æ›´æ–°è§„åˆ™éœ€è¦ reload ä¼šå¯¼è‡´é“¾æ¥æŠ–åŠ¨ï¼Œå¯¼è‡´æµé‡æŸå¤±ï¼Œå¯¹å®æ—¶é€šä¿¡ã€è§†é¢‘ã€IOTæ— æ³•å®¹å¿ï¼›</p><p>å¯¹äºè·¯ç”±è§„åˆ™ï¼ŒWasm æ’ä»¶é€»è¾‘æ›´æ–°ï¼Œä»¥åŠè¯ä¹¦æ”¹åŠ¨ç­‰ç­‰ï¼ŒHigress å…¨éƒ¨æ”¯æŒçƒ­æ›´æ–°ï¼Œä¸ä¼šé€ æˆä»»ä½•è¿æ¥æŠ–åŠ¨ã€‚</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ä¼ä¸šè½åœ°æ”¯æŒ">ä¼ä¸šè½åœ°æ”¯æŒ<a href="#ä¼ä¸šè½åœ°æ”¯æŒ" class="hash-link" aria-label="ä¼ä¸šè½åœ°æ”¯æŒçš„ç›´æ¥é“¾æ¥" title="ä¼ä¸šè½åœ°æ”¯æŒçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åœ¨ RC ç‰ˆæœ¬é˜¶æ®µä½¿ç”¨ Higress çš„ä¼ä¸šç”¨æˆ·ï¼Œç¤¾åŒºä¼šåœ¨è½åœ°é˜¶æ®µæä¾›æ›´å¤šå¸®åŠ©ï¼Œæˆ‘ä»¬å»ºç«‹äº† Higress ä¼ä¸šè½åœ°ç¾¤ï¼Œå¯ä»¥è”ç³»æˆ‘(å¾®ä¿¡:nomadao é’‰é’‰:chengtanzty)ï¼Œä¼šå°†ä½ åŠ è¿›ç¾¤ï¼Œç¾¤é‡Œæœ‰ç¤¾åŒºæ ¸å¿ƒç ”å‘åŒå­¦ï¼Œå¯ä»¥æä¾›æ›´åŠæ—¶çš„å“åº”å’Œå¸®åŠ©ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å®‰è£…å‡çº§æ–¹å¼">å®‰è£…å‡çº§æ–¹å¼<a href="#å®‰è£…å‡çº§æ–¹å¼" class="hash-link" aria-label="å®‰è£…å‡çº§æ–¹å¼çš„ç›´æ¥é“¾æ¥" title="å®‰è£…å‡çº§æ–¹å¼çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>å®‰è£… RC ç‰ˆæœ¬ï¼Œéœ€è¦ helm <a href="https://higress.io/zh-cn/docs/user/quickstart" target="_blank" rel="noopener noreferrer">å®‰è£…</a>æˆ–<a href="https://higress.io/zh-cn/docs/ops/upgrade" target="_blank" rel="noopener noreferrer">å‡çº§</a>æ—¶éœ€è¦æŒ‡å®š<code>--devel</code>å‚æ•°ï¼Œä¾‹å¦‚ï¼š<code>helm upgrade higress -n higress-system --devel</code></p><p>1.0.0 RC ç‰ˆæœ¬å·²ç»åœ¨ç¤¾åŒºå°ä¼™ä¼´çš„åä½œä¸‹å®Œæˆäº†å¤šè½®æµ‹è¯•å’Œä¿®å¤å·¥ä½œï¼Œæ¬¢è¿å¤§å®¶ä½¿ç”¨ã€‚æœ€ç»ˆçš„æ­£å¼ç‰ˆæœ¬ï¼Œä¹Ÿå°†åœ¨è¿‘æœŸå¾ˆå¿«æ¨å‡ºã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ§åˆ¶å°åŠŸèƒ½é€Ÿè§ˆ">æ§åˆ¶å°åŠŸèƒ½é€Ÿè§ˆ<a href="#æ§åˆ¶å°åŠŸèƒ½é€Ÿè§ˆ" class="hash-link" aria-label="æ§åˆ¶å°åŠŸèƒ½é€Ÿè§ˆçš„ç›´æ¥é“¾æ¥" title="æ§åˆ¶å°åŠŸèƒ½é€Ÿè§ˆçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ul><li><p><strong>ä¸°å¯Œçš„å¯è§‚æµ‹</strong></p><p>æä¾›å¼€ç®±å³ç”¨çš„å¯è§‚æµ‹ï¼ŒGrafana&amp;Prometheus å¯ä»¥ä½¿ç”¨å†…ç½®çš„ä¹Ÿå¯å¯¹æ¥è‡ªå»ºçš„ï¼Œå…·ä½“å¯ä»¥å‚è€ƒ<a href="https://higress.io/zh-cn/docs/user/prometheus" target="_blank" rel="noopener noreferrer">æ–‡æ¡£</a></p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i1/O1CN016n7gBU1UCnrfOBOZC_!!6000000002482-1-tps-1778-1012.gif" class="img_ev3q">
</p></li></ul><ul><li><p><strong>æ’ä»¶æ‰©å±•æœºåˆ¶</strong></p><p>å®˜æ–¹æä¾›äº†å¤šç§æ’ä»¶ï¼Œç”¨æˆ·ä¹Ÿå¯ä»¥<a href="https://higress.io/zh-cn/docs/user/wasm-go" target="_blank" rel="noopener noreferrer">å¼€å‘</a>è‡ªå·±çš„æ’ä»¶ï¼Œæ„å»ºæˆ docker/oci <a href="https://higress.io/zh-cn/docs/plugins/custom" target="_blank" rel="noopener noreferrer">é•œåƒ</a>ååœ¨æ§åˆ¶å°é…ç½®ï¼Œå¯ä»¥å®æ—¶å˜æ›´æ’ä»¶é€»è¾‘ï¼Œå¯¹æµé‡å®Œå…¨æ— æŸã€‚</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i2/O1CN01t7XqQB1s6R8cM5ZRS_!!6000000005717-1-tps-1778-1012.gif" class="img_ev3q"></p></li></ul><ul><li><p><strong>å¤šç§æœåŠ¡å‘ç°</strong></p><p>é»˜è®¤æä¾› K8s Service æœåŠ¡å‘ç°ï¼Œé€šè¿‡é…ç½®å¯ä»¥å¯¹æ¥ Nacos/ZooKeeper ç­‰æ³¨å†Œä¸­å¿ƒå®ç°æœåŠ¡å‘ç°ï¼Œä¹Ÿå¯ä»¥åŸºäºé™æ€ IP æˆ–è€… DNS æ¥å‘ç°</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i2/O1CN0142CxRS1of0ZKg5soq_!!6000000005251-1-tps-1778-1012.gif" class="img_ev3q">
</p></li></ul><ul><li><p><strong>åŸŸåå’Œè¯ä¹¦</strong></p><p>å¯ä»¥åˆ›å»ºç®¡ç† TLS è¯ä¹¦ï¼Œå¹¶é…ç½®åŸŸåçš„ HTTP/HTTPS è¡Œä¸ºï¼ŒåŸŸåç­–ç•¥é‡Œæ”¯æŒå¯¹ç‰¹å®šåŸŸåç”Ÿæ•ˆæ’ä»¶</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i4/O1CN01eQhgZD1ggMonjdj9u_!!6000000004171-1-tps-1778-1012.gif" class="img_ev3q"></p></li></ul><ul><li><p><strong>ä¸°å¯Œçš„è·¯ç”±èƒ½åŠ›</strong></p><p>åŸºäºä¸Šé¢é…ç½®çš„æœåŠ¡å‘ç°æœºåˆ¶ï¼Œå‘ç°çš„æœåŠ¡ä¼šå‡ºç°åœ¨æœåŠ¡åˆ—è¡¨ä¸­ï¼›åˆ›å»ºè·¯ç”±æ—¶ï¼Œé€‰æ‹©åŸŸåï¼Œå®šä¹‰è·¯ç”±åŒ¹é…æœºåˆ¶ï¼Œå†é€‰æ‹©ç›®æ ‡æœåŠ¡è¿›è¡Œè·¯ç”±ï¼›è·¯ç”±ç­–ç•¥é‡Œæ”¯æŒå¯¹ç‰¹å®šè·¯ç”±ç”Ÿæ•ˆæ’ä»¶</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i3/O1CN01lExhus1IvR4Q8kGmY_!!6000000000955-1-tps-1778-1012.gif" class="img_ev3q"></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="è¿›é˜¶ä½¿ç”¨">è¿›é˜¶ä½¿ç”¨<a href="#è¿›é˜¶ä½¿ç”¨" class="hash-link" aria-label="è¿›é˜¶ä½¿ç”¨çš„ç›´æ¥é“¾æ¥" title="è¿›é˜¶ä½¿ç”¨çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>Higress æ§åˆ¶å°çš„åŠŸèƒ½è¿˜åœ¨ä¸æ–­ä¸°å¯Œå’Œæ¼”è¿›ä¸­ï¼Œå½“å‰è¿˜æœ‰å¾ˆå¤š Higress Ingress æ³¨è§£çš„èƒ½åŠ›æ²¡æœ‰æ”¯æŒï¼Œå¦‚æœæœ‰è¿™éƒ¨åˆ†æ·±åº¦ä½¿ç”¨çš„éœ€æ±‚ï¼Œå¯ä»¥å‚è€ƒ<a href="https://higress.io/zh-cn/docs/user/annotation-use-case" target="_blank" rel="noopener noreferrer">è¿™ç¯‡æ–‡æ¡£</a>è¿›è¡Œè¿›é˜¶é…ç½®</p><p>å¦‚æœå¸Œæœ›ä½¿ç”¨ Istio çš„èƒ½åŠ›è¿›è¡Œæµé‡æ²»ç†ï¼Œå¯ä»¥å‚è€ƒ<a href="https://higress.io/zh-cn/docs/ops/deploy-by-helm" target="_blank" rel="noopener noreferrer">è¿™ç¯‡æ–‡æ¡£</a>çš„æ”¯æŒ Istio CRD ä¸€èŠ‚ã€‚åŸºäº Istio çš„ <a href="https://istio.io/latest/docs/reference/config/networking/envoy-filter/" target="_blank" rel="noopener noreferrer">EnvoyFilter API</a> å¯ä»¥å®ç°æ›´å¤šç»†ç²’åº¦çš„ç®¡æ§èƒ½åŠ›ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç¤¾åŒº">ç¤¾åŒº<a href="#ç¤¾åŒº" class="hash-link" aria-label="ç¤¾åŒºçš„ç›´æ¥é“¾æ¥" title="ç¤¾åŒºçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>æ¬¢è¿è®¤é¢† Higress Issue ä»»åŠ¡ï¼š<a href="https://github.com/alibaba/higress/issues?q=is%3Aopen+is%3Aissue+label%3A%22help+wanted%22" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/higress/issues?q=is%3Aopen+is%3Aissue+label%3A%22help+wanted%22</a></p><p>å®Œæˆä¸€å®šæ•°é‡çš„ Issues å°±å¯ä»¥æˆä¸º Higress Committerï¼Œä¹Ÿæœ‰æœºä¼šè·å¾—å¼€æºç¤¾åŒºçš„ç¤¼ç‰©å’Œè£èª‰ğŸ†</p><p>æ¬¢è¿åŠ å…¥ Higress ç¤¾åŒºç¾¤ï¼ŒåŠæ—¶äº†è§£æ›´å¤š Higress åŠ¨å‘ï¼š</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i2/O1CN0171Hg8d1XMMz4eFo3b_!!6000000002909-0-tps-720-405.jpg" class="img_ev3q"></p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[UUè·‘è…¿åŸºäºHigressçš„äº‘åŸç”Ÿç½‘å…³å®è·µ]]></title>
            <link>https://higress.io/zh-cn/blog/user-uu</link>
            <guid>https://higress.io/zh-cn/blog/user-uu</guid>
            <pubDate>Thu, 30 Mar 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[ä»‹ç»UUè·‘è…¿çš„äº‘åŸç”Ÿç½‘å…³æ¢ç´¢ä¹‹è·¯]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="uuè·‘è…¿ä»‹ç»">UUè·‘è…¿ä»‹ç»<a href="#uuè·‘è…¿ä»‹ç»" class="hash-link" aria-label="UUè·‘è…¿ä»‹ç»çš„ç›´æ¥é“¾æ¥" title="UUè·‘è…¿ä»‹ç»çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>UUè·‘è…¿éš¶å±äºéƒ‘å·æ—¶ç©ºéš§é“ä¿¡æ¯æŠ€æœ¯æœ‰é™å…¬å¸ï¼Œæ˜¯æ›´ä¸“ä¸šçš„åŒåŸå³æ—¶ç”Ÿæ´»æœåŠ¡å¹³å°ï¼Œä»¥å…±äº«åŠ³åŠ¨åŠ›ä¸æ—¶é—´ä¸ºä¼—åŒ…ç†å¿µï¼Œäººäººéƒ½å¯æ³¨å†Œæˆä¸ºè·‘è…¿å¸ˆå‚…ï¼Œå¹¶ä¸ºé™„è¿‘çš„äººæä¾›å¸®å–é€ã€å¸®ä¹°ã€å…¨èƒ½å¸®ã€å¸®æ’é˜Ÿç­‰å¤šæ ·åŒ–åŒåŸå³æ—¶æœåŠ¡ï¼Œä¸ºä¸­å°ä¼ä¸šã€ç”µå•†ã€æœ¬åœ°å•†æˆ·æä¾›å®‰å…¨ä¸“ä¸šçš„é«˜ç«¯é…é€æœåŠ¡ã€‚UUè·‘è…¿ç§‰æ‰¿â€œè®©ç”Ÿæ´»æ›´ç¾å¥½â€çš„ç†å¿µï¼Œä¸æ–­åˆ›æ–°ã€ä¸æ–­è¿›æ­¥ï¼Œä¸ºç”¨æˆ·æä¾›æ›´åŠ ä¼˜è´¨çš„æœåŠ¡ä½“éªŒã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="èƒŒæ™¯éœ€æ±‚">èƒŒæ™¯éœ€æ±‚<a href="#èƒŒæ™¯éœ€æ±‚" class="hash-link" aria-label="èƒŒæ™¯éœ€æ±‚çš„ç›´æ¥é“¾æ¥" title="èƒŒæ™¯éœ€æ±‚çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>UUè·‘è…¿å¯¹äºäº‘åŸç”Ÿç½‘å…³çš„è¦æ±‚æ˜¯ï¼Œèƒ½åŒæ—¶æ»¡è¶³æµé‡ç½‘å…³ï¼Œå¾®æœåŠ¡ç½‘å…³ï¼Œä»¥åŠå®‰å…¨ç½‘å…³çš„åœºæ™¯è¯‰æ±‚ï¼Œç”¨ä¸€ä¸ªç½‘å…³æ¥è§£å†³ä¹‹å‰éœ€è¦éƒ¨ç½²å¤šä¸ªç½‘å…³æ‰èƒ½è§£å†³çš„é—®é¢˜ï¼š</p><ol><li>å…·å¤‡é«˜å¯é æ€§å’Œé«˜æ€§èƒ½ï¼Œå¯ä»¥æ›¿ä»£ä¹‹å‰éƒ¨ç½²çš„ <strong>Nginx Ingress æµé‡ç½‘å…³</strong></li><li>åŒæ—¶æ”¯æŒ K8s ç”Ÿæ€å’Œä¼ ç»Ÿå¾®æœåŠ¡ç”Ÿæ€æ¥å…¥ï¼Œæ”¯æŒï¼ˆHTTPè½¬Dubboï¼‰åè®®è½¬æ¢ï¼Œå¯ä»¥æ›¿ä»£ä¹‹å‰éƒ¨ç½²çš„ <strong>Spring Cloud Gateway å¾®æœåŠ¡ç½‘å…³</strong></li><li>èƒ½å¤Ÿæ”¯æŒåœ¨ç½‘å…³å…¥å£å¤„å®Œæˆé‰´æƒï¼Œé¿å…æ¯ä¸ªåç«¯æœåŠ¡é‡å¤å®ç°é‰´æƒåŠŸèƒ½ï¼Œå®ç°<strong>å®‰å…¨ç½‘å…³</strong>çš„èƒ½åŠ›</li><li>å…·å¤‡æ˜“ç”¨çš„æ§åˆ¶å°è¿›è¡Œ API çš„æ²»ç†ï¼Œä»¥åŠå…·å¤‡ä¸°å¯Œçš„å¯è§‚æµ‹æŒ‡æ ‡</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="è¿ç§»-higress-å‰çš„æ¶æ„">è¿ç§» Higress å‰çš„æ¶æ„<a href="#è¿ç§»-higress-å‰çš„æ¶æ„" class="hash-link" aria-label="è¿ç§» Higress å‰çš„æ¶æ„çš„ç›´æ¥é“¾æ¥" title="è¿ç§» Higress å‰çš„æ¶æ„çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i1/O1CN016p6RZz21KwDVA9Gz5_!!6000000006967-2-tps-1014-431.png" alt="old-arch" class="img_ev3q"></p><p>ä¹‹å‰å­˜åœ¨çš„ä¸»è¦ç—›ç‚¹ï¼š</p><ol><li>Spring Cloud Gateway è‡ªèº«å‚æ•°è°ƒæ•´æ”¹åŠ¨éœ€è¦é‡æ–°éƒ¨ç½²å½±å“æµé‡ï¼Œä¸”åŠ¨æ€è·¯ç”±éœ€è¦è¿›è¡Œå¤æ‚çš„é…ç½®ï¼ŒåŒ…æ‹¬è·¯ç”±è§„åˆ™ï¼Œå®¹æ˜“å‡ºç°é…ç½®é”™è¯¯å¯¼è‡´ç³»ç»Ÿå¼‚å¸¸</li><li>è¿ç»´éœ€è¦åŒæ—¶ç»´æŠ¤ Nginx Ingress å’Œ Spring Cloud Gatewayï¼Œé¢å¯¹æµé‡é«˜å³°è¿›è¡Œè¿›è¡Œæ‰©å®¹ç›¸å…³æ“ä½œæ—¶ï¼Œè¿ç»´è´Ÿæ‹…æ¯”è¾ƒé‡ï¼Œè€Œä¸”è¿™æ ·ä¸¤å±‚ç½‘å…³çš„è¯·æ±‚çš„é“¾è·¯è¾ƒé•¿ï¼Œå¯ç”¨æ€§ä½ã€æˆæœ¬é«˜</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="è¿ç§»-higress-åçš„æ¶æ„">è¿ç§» Higress åçš„æ¶æ„<a href="#è¿ç§»-higress-åçš„æ¶æ„" class="hash-link" aria-label="è¿ç§» Higress åçš„æ¶æ„çš„ç›´æ¥é“¾æ¥" title="è¿ç§» Higress åçš„æ¶æ„çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i3/O1CN01tCWvwN22sCbD7DmqA_!!6000000007175-2-tps-1014-420.png" alt="new-arch" class="img_ev3q"></p><p>Higressäº‘åŸç”Ÿç½‘å…³å®ç°è´Ÿè½½å‡è¡¡ã€è·¯ç”±ã€å®‰å…¨è®¤è¯ç­‰åŠŸèƒ½ã€‚é€šè¿‡ç½‘å…³å¯¹å¤–æä¾›æœåŠ¡ç»Ÿä¸€å…¥å£ï¼Œå¹¶å¯¹è¯·æ±‚è¿›è¡Œé‰´æƒã€é™æµå’Œç›‘æ§ç­‰æ“ä½œï¼Œç”¨ç®€å•çš„æ¶æ„ä¿è¯äº†æ•´ä½“ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚</p><ol><li>åˆå¹¶æµé‡ç½‘å…³ï¼ˆK8s Nginx Ingressï¼‰å’Œå¾®æœåŠ¡ç½‘å…³ï¼ˆSpring Cloud Gateway ï¼‰ï¼Œé™ä½ç½‘å…³æˆæœ¬ï¼Œé«˜æ€§èƒ½æœåŠ¡ï¼›</li><li>åŒæ—¶æ”¯æŒ K8s service å’Œ Nacos æœåŠ¡æ³¨å†Œå‘ç°ï¼Œæ»¡è¶³æŠ€æœ¯éœ€æ±‚å¯¹ K8s ç”Ÿæ€å’Œä¼ ç»Ÿå¾®æœåŠ¡ç”Ÿæ€æ¥å…¥ã€‚</li><li>Nginx Ingress å®Œç¾è¿ç§»åˆ° Higressï¼Œååˆ†ä¸æ»‘</li></ol>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Higress 0.7.0 ç‰ˆæœ¬å‘å¸ƒï¼šGA è¿›å…¥å€’è®¡æ—¶]]></title>
            <link>https://higress.io/zh-cn/blog/release-070</link>
            <guid>https://higress.io/zh-cn/blog/release-070</guid>
            <pubDate>Mon, 20 Mar 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Higress 0.7.0 ç‰ˆæœ¬ä»‹ç»]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="è¿›å±•æ¦‚è¦">è¿›å±•æ¦‚è¦<a href="#è¿›å±•æ¦‚è¦" class="hash-link" aria-label="è¿›å±•æ¦‚è¦çš„ç›´æ¥é“¾æ¥" title="è¿›å±•æ¦‚è¦çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ol><li>Higress æ§åˆ¶å°æ­£å¼ releaseï¼Œæ¶µç›– Higress çš„æœåŠ¡/è·¯ç”±/åŸŸå/è¯ä¹¦ç®¡ç†èƒ½åŠ›ï¼Œå¹¶æä¾›å¼€ç®±å³ç”¨çš„å¯è§‚æµ‹åŠŸèƒ½</li><li>å®‰è£…/å‡çº§ Higress æ—¶æ”¯æŒè‡ªåŠ¨å®‰è£…å¯¹åº”ç‰ˆæœ¬çš„ Higress Consoleï¼Œé¿å…ç‰ˆæœ¬ä¸é€‚é…çš„é—®é¢˜</li><li>æ”¯æŒå¼€å¯ Istio APIï¼Œå®ç°æ›´å¤šå¤æ‚çš„åŠŸèƒ½ï¼Œå¹¶ä¸”ä¹Ÿå¯ä»¥ç”¨äºå¹³æ»‘æ›¿æ¢ Istio Ingress Gateway</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç‰ˆæœ¬ç‰¹æ€§">ç‰ˆæœ¬ç‰¹æ€§<a href="#ç‰ˆæœ¬ç‰¹æ€§" class="hash-link" aria-label="ç‰ˆæœ¬ç‰¹æ€§çš„ç›´æ¥é“¾æ¥" title="ç‰ˆæœ¬ç‰¹æ€§çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="higress-æ§åˆ¶å°">Higress æ§åˆ¶å°<a href="#higress-æ§åˆ¶å°" class="hash-link" aria-label="Higress æ§åˆ¶å°çš„ç›´æ¥é“¾æ¥" title="Higress æ§åˆ¶å°çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ç°åœ¨é€šè¿‡ helm å‘½ä»¤å®‰è£… Higress æ—¶å°†è‡ªåŠ¨å®‰è£…å¯¹åº”ç‰ˆæœ¬çš„ Higress Console, è¿™é‡Œé€šè¿‡ <code>higress-console.domain</code> å‚æ•°ï¼Œå¯ä»¥æŒ‡å®šæ§åˆ¶å°çš„åŸŸåã€‚</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># å·²ç»æ·»åŠ è¿‡ repo çš„ï¼Œè¯·æ‰§è¡Œ helm repo update</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm repo </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> higress.io https://higress.io/helm-charts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> higress -n higress-system higress.io/higress --create-namespace --render-subchart-notes --set higress-console.domain</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">console.higress.io</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="image" src="/zh-cn/assets/images/console-credentials-3f846851a9dfeed79cf5e782173eb20a.png" width="1240" height="250" class="img_ev3q"></p><p>æ³¨æ„ï¼šå®‰è£…å®Œæˆåä¼šè¾“å‡ºä¸€æ®µæ–‡æœ¬ï¼Œå…¶ä¸­åŒ…å«è·å–æ§åˆ¶å°ç™»å½•ä¿¡æ¯çš„å‘½ä»¤ã€‚è¯·æ‰§è¡Œè¯¥å‘½ä»¤å¹¶è®°å½•ç”¨æˆ·åå’Œå¯†ç ã€‚</p><p><img loading="lazy" alt="image" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfQAAAFeCAMAAABEjx0wAAAABGdBTUEAALGPC/xhBQAAAwBQTFRF0tTyFs78b5+fn9fvt29vb7fg8Pf3n59vJydvb5+3J5+36dX/kr3/xc3VerL/Jm3+O2n/gJ//YXL/QYn+P3r/1eHVsMr/zcW/H37+159vGzH/RaD/z9P/1+/v7+/h1tja9PT1zb/N1cXFyZ8nuL7/r7X/JZD+RqD+//f3xbvfkqv/F4nv8PP+fcD98ODtFrn5rL//wsnVe37fK3z+El7+d6H/FUT/JFX/PJn+e979xdHhj5OZX2VtbIX/rK3/Tk5OXaz+QkJCd3d3QUFB0eT0orj+YJ3/3uX//+zyyen/oKCgfOL/nydv//j9DUD/Fm/+hLD/4dnN2dLgFbb3uNP/gIOKxb/Fio2T0Ob/FX7wSlz/YmZvQkhSoKf/3N3f5fD/GNX+EVL/FX7tqqyxgoWMfY//zb/FkJ3/b2+39/j/BB3/nycnFYL4Jyef2tX/FYv/t+//F4nfeoT+xsD+MJz/XGBpo6arDDX/2tvdtsL/V1xlvN3+pqmun6KnZ2t0P53+1NTUvL7C+vv/+fz/3d7gqO3/19nbLZj+aWlp9/f38OP/UldgsLCwsbO3LU//bycn5ufolJSUTFJc6+zthYWFra2tT09Pl5qfysvOByr//+3/0NLUByX/7/Dwqamp///XxsbGb3N7qI//xfj/GJD34eLjh8L+am93GMD/2f//5OTlw8XIRkxWxb+/zKv/uru8b7fv158nvcP/1Nj//++3J5/X77dvr+r/XV1dPUNOt7e3wMDFg4eN4c2//+r/8P//YJD/jIyMOkBLNjxHen6F/Pz81tbXt28noqKizP//mp2iGJ3/+vr6xb/N1e//zc7OYL3/GKv/8/Pz6f//zb+/kpD/r53/XFxcHoz+/v7+J2+3/9efv83hMzMzk5OT+Pj46erq6b3/NDpFn9f/BBj//9X/xdXvv7/N///hkpKSktX/1cW/8fHyzeH/3t7e/+/V/+HNv8XV79XF///v4f//FX7fJiYm7///yMnJJycnMzlEv7+/9PT02dnZGJD/////t6OdDwAADKFJREFUeNrt3QlUFdcBgOF03/d939vsS7Pve6NJs5mk2Rej1qYxJsa41KrRVhrXuAsGJRikihCBRFEQg/AEwaQB06ABhceixOWpBOLjOSTc3ntn3kaqx0bSw9z5/3OUefPgHA7fu3fuDIc3JwhydzX/+5ecwE/Ne4EOOoFOoBPoBDqBTqAT6AQ6gU6gE+gEOoFOoBPoBDroBDqBTqAT6AQ6gU6gE+gEOoFOoBPoBDp5EX3RqL/oj3//za//KcQjv3qpBmPj0f+80EF/+i2Jfv/Onb/E2GPog3fuvAxjj6GfOvj+RzD2GDp5Av37CwdfcPbZ37z2uh8o9EdeflmN9NJJ6yZOem3FA4uFaHigoWFiaK7cl56ZnTxXf03ppIkDkuzNWZkDMlfUgO6uvr7wvC/ffPM5/c+79hmJ/tLOnS/Ld1pb1mRZTXPGNG0WYmPTnBLLulMItc8qWae+ZqPeTJZb43xyy5cIurs6d+Gor95yy4b+N406N4I+0LLGb14iZRW6ZeUvK5lUs9FqWpI4zfKVCRFq8hWOG2PlzxLiPuuSkcssKxN0V/X0pTfd1P8r37jl/FHP7nfQ38i3Li4VpeOabPT80WKxmFViXSzEeyOsQiE2W1kBsXjMmGyx2GqaJUoHjkkE3VW9dcHXzu9/zs3f/faoRS856DOsLP3UNBt9idrOtKyNhYWF461pQiT5rDmJSXPVkTzLyi9cN6uU6d1l6G/9VTx4++233/XsokEO+p3WCP3UMhu9UG2PtZxK1JFcbw2U6kklamvaYtBdh67627OLnnTQE9Vwlt0bgz7Dyv+HbrR61JA8coRljZNbb5TNkAf/JaC7HT3ZKpmkzsbyY9BH+6wk+SF580hRMyBxRo0oHSGpsxPHyp0DLB/obkeXB/P8zPSkLCsG/adzrDmV6Zkl6tFGyzcyeZ3PGigmNll3VCbda80B3fXooSZ90PbFoIsGn71PHr5Ls/Rm00/UYV83A3RXdcUVd9nol95zvxA/vOee6+SDdHklZvzoSxT6uGVj7U9Mv1OesW/WS7a5Y/Mt38AVcmvKxCyr6d7KGtBd33tviBrpOMIaG7e7tDSCWxO7af4PxAvoWT51tdV/n5UsyCvoS+RVuCmB8c41GvIEevp9li+/xPz1GeixrbgjqyR/fCbaXkIn0EHnRwA6gU6gE+gEOoFOoBPoBDqBTqAT6AQ6gU6gE+gEOugEOoFOoB81/4H36bg78Jqr0A8EGE/HX+CAq9DfR6wX/xhBBx100EEHHXTQQQcddNAJdAKdQCcT0UMLgsEFIRi9hJ4dnJydPTmYffSv2v3m/tiHreteB9296IG6eerDvLpA1Lcz2jsdzt62WOaDL7Yw0l2MHgpq7UAwFD+oWzV3m/y/fV/Mi6DFNg8/9O6AdzX69UH7Y/D6I6NHZvb2fS3afAcD3tXoZfYQDwXLjhW9rbOlVau3de5nenfnQu7yBfLt1FcsuFwc6ZjeDb317XfFj/e907H7TbkBujvRy+rq1q6tqysTxzy96w3n8A66K1fv84J127bVBecFjn0hpyaDHazeXYseWFA3X32cX7cgrL77j6/HocecotsjvS36GvDuDO9m9KvC83pZ3VWRk/D4Y7r9Ioi0vrOlLTzMD/4LdPehlwXnhzfnB1fYG616+EZH+gdlQXc1+p6ro9tX73GGsuaOordFrsqBbgT6tm0x25Od2V0fwh30HdEVO+jmnLIdQVSiqwXbfme2j/8UFnKG/z59/X7BSPcaOoFOoIMOOuiggw466KCDDjrooIPeg/FGQz2Ry95oiLcU8+BbilFvDnTQCXQCnUAn0Al0Ap1AJ9AJdAKdQCfQCXQCnUAn0EEn0Al0Ap1AJ9D5Ywfun04fKu6f7sX4q1XQQQcddNBBBx100EEHHXTQQQcddNA/7HcbCMm4Nusp9MlB3WQcj54/pcEY9Pl12WqkZ9fNj9u9+80WnG3syoKUlOkTAuX15qDvcW7ds21P/P628O1ZWvXNWi5ybsPouVvqVs6un56aWlBfHG9uGHrcvfj0DdKjN1tt/7nX7pdeUJzqF4GAv7w+PdVkdH0znoMX2bO8uvui3qP/2/0zj92op7J+gvCXFxfPrm9oKK40eHpv37ejbUefW99+V27YM736cPCsjvDN2rxTYLaETimwj+eVswNmoJetvVLeSFtVd+Va566rreteV8xymt/f3k/E3XC3zWP3Ui4oF6KhWM7tDXJDlBeYgR4K7okUDEXW7W1n7VNH8/Vf+o6kXq9vuqe8Y+6k7h10f3G5mtuNQtezmJ63HHR9d3R9e3R1D+31La1SXB7Qw3dd9BR7oL5S+NXxPKVTHd/9JqHbd1x10A++qMZ4+D7a8g6MlRo9/Hrw1livLB4t1+3lxdP9YoIxCzkbfd68GPRbu6/VWmPQD/7BY+dsBer8POAX/tTiTmEUeigUN73r1rfEod9qn7V/y2Po6vx8ekFq6vTZ8tzNHPRQpDC6vVzT6PqOyh4e6Wrd7p8wPSWloNIvDEKP6UjoMbfMbvPYvbM7G47xcoerLs6URUd6WeTiTGfc/dEjI12t7vg1jAHoR6/17Xfh9Ro6gU6ggw466KCDDjrooIMOOuigg97D8UZDPZHL3mjoNd5SjPunU28KdNAJdAKdQCfQCXQCnUAn0Al0Ap1AJ9AJdAKdQCfQQSfQCXQCnUAn0Al0Ap2MRPcf+H/8TRb1KvT4v1r9qP76knoV+vtHe5i7uttnr/qTelPo5x89LPvEpmaxvbYj/FC12pQfdvUaZ2NrhdjVZffqv51dW+yPev+rg/VzVYagbz8cqVm0b7JNbXT99GMZ8jNqF8e+M/h2Y9B3hYV3dVVEd4X5dXuFeOV3zmc17jUFvdbxbJcjOn6kr5rZvF2+EkRujtp0XhGGjPSVsbCSvrEqBl2/FE6W2hvWrJTO6jkNv3WNuejO4M9RzNfb249lGDfSV+494uCX2NV9vyBfDRWaWR0ENHp1hYnTe+wrQY7vXMe6fZN8nHc4ptoOo9C3Sl/RGBn21VXSt7przSsb+m5YIxrVwN+1xf5n4Eh3XgHNGv1Tm3Ii0B+f6XxanjHH8/iRLgexPcPruV1N/hX2VL/llQ3qyN4YOcIbOL3bR3NJqx/m5djP6Y/6M/PU4A/vNuSoXhWLrp/Z66zllfHKk7eIrQ72VlPQ46f3XD3H5+b8F3SR99kn5CQvZ/3aHxky2qOIsejdajQQPW6ky4Eudzz/+ycc9PDrwcZf9blPfubzm8w4TW/cog7RW6vkqq0iDl3O6XqXfqiUFfoXN+gpodpI9O89sWrm4WZ1seb5R5vDC/XIuj73cHPeavsJtycX6M66rPpMdfiurrhseFV4YH8QfW+3izkmTe9SvLZj1Ux13FajXTnXdrRvWu2Q5zhH+7gTOJdO7FXOYlwv1iRn15pG+0WwUg3+2GszjZEFnHylmHqerrjz1FlZbtxJ2i9y9IVYvdqbWWvCfZarowty++w87jJs5CAeHuny0z+qczZ+4eLB+NUq6AQ6gU6gE+gEOoFOoBPoBDqBTqAT6AQ6gU6gE+igE+gEOoFOoBPoBDqBTqAT6ORS9Aef6qLj7qkHXYWOec+ouwodr54JdNBBBx100EEHHXTQQQcddNBBBx100EEH3XXoh+S/YaB7A33pIdXdXRlDuw4lDA3vPeVQpMdBNw59eZH+xoYn9Lk747nThjh7b4h+y8+Bbt5Il85LE24cJPGHLr2t6IXuz98AuoEj/dNPLv2YkNYJfU65rWhq3KSvuhB0A9H71lxbdJLUfTjtVDG026TP9G7o6n3YDWJ4mvrepmb0G/LBp5neDUR/OO3G3zozudp8PH5yl9N7H7m0B90s9IyhD0W+u5ozi57rNrnbS3vQTbs489CNg8IH8sjafZg6P19eJJ8Z1itP1EE/XvQTnfk95oQtQS7ghi0v6tvvUEKvXMmBfrzo0W8vgn5alzzCX1f0QpqY2rV8EOgGXnvPUNhLL5wac212SIYYqqb7tNPv7mKkm4iecKIczGdErsx0LT2jSAx3pvsEcdIQ0A1DH6bP1frJf6dHfr3ykFyvqxW8/SpIEy+AbhZ6Wvw3OLXLFYHuwUAHHXTQQQcddNBBBx100EEHHXTQP1TP4NUTPeMq9GtQ7wnza1yFPuU96oGmuAq9FPWeMC91FTr1RDUCdAKdQCfQCXQCHXQCnUAn0Al0Ap1AJ9AJdAKdQCfQCXQCnUAn0Al00PkRgE6gE+gEOoFOoBPoBDqBTqAT6AQ6gU6gE+gEOoEOOoFOoBPoBDqBTqAT6AQ6gU6gE+gEOoFOx9B/ACrRkgiipIxYAAAAAElFTkSuQmCC" width="500" height="350" class="img_ev3q"></p><p>æ­£å¼ç¯å¢ƒéƒ¨ç½²æ—¶ï¼Œå»ºè®®æ§åˆ¶å°å¼€å¯å¼ºåˆ¶ HTTPS è®¿é—®ï¼Œå…·ä½“æ“ä½œæ–¹å¼æ˜¯ï¼Œåœ¨ higress-system å‘½åç©ºé—´ä¸‹å…ˆåˆ›å»ºå¥½ TLS è¯ä¹¦å’Œç§é’¥å¯¹åº”çš„ secretï¼Œä¾‹å¦‚ï¼š</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Secret</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kubernetes.io/tls</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">tls.crt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">---</span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">BEGIN CERTIFICATE</span><span class="token punctuation" style="color:#393A34">---</span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">tls.key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">---</span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">BEGIN RSA PRIVATE KEY</span><span class="token punctuation" style="color:#393A34">---</span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">tls</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">secret</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç„¶åé€šè¿‡ä¸‹é¢ helm å‘½ä»¤å¼€å¯å¼ºåˆ¶ HTTPS è®¿é—®</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">helm upgrade higress -n higress-system higress.io/higress --set higress-console.tlsSecretName</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">my-tls-secret</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¦‚æœå¸Œæœ›å¯ç”¨ Higress è‡ªå¸¦çš„ Prometheus&amp;Grafanaï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢ helm å‘½ä»¤è¿›è¡Œå®‰è£…ï¼š</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">helm upgrade higress -n higress-system higress.io/higress --set higress-console.o11y.enabled</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¿™æ · Higress æ§åˆ¶å°å°±å¯ä»¥çœ‹åˆ°è‡ªå¸¦çš„å¯è§‚æµ‹å¤§ç›˜äº†ï¼š</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i3/O1CN01bUCXjy275GLq7ralt_!!6000000007745-0-tps-3532-2022.jpg" alt="image" class="img_ev3q"></p><p>å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥å¯¹æ¥å·²æœ‰çš„ Prometheus&amp;Grafanaï¼Œä½¿ç”¨è¿™ä»½ Higress å®˜æ–¹æä¾›çš„ Dashboard é…ç½®å³å¯ï¼š<a href="https://higress.io/grafana/dashboard.json" target="_blank" rel="noopener noreferrer">https://higress.io/grafana/dashboard.json</a></p><p>å¯ä»¥ç™»é™† Higress æ§åˆ¶å° Demo è¯•ç”¨ç°æœ‰æ‰€æœ‰åŠŸèƒ½: <a href="http://demo.higress.io" target="_blank" rel="noopener noreferrer">http://demo.higress.io</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å¼€å¯-istio-api">å¼€å¯ Istio API<a href="#å¼€å¯-istio-api" class="hash-link" aria-label="å¼€å¯ Istio APIçš„ç›´æ¥é“¾æ¥" title="å¼€å¯ Istio APIçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>é€šè¿‡å¼€å¯ Istio APIï¼Œå¯ä»¥å®ç°ä½¿ç”¨ Higress å¹³æ»‘æ›¿æ¢ Istio Ingress Gatewayï¼Œå…·ä½“ helm å‘½ä»¤å¦‚ä¸‹ï¼š</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">helm upgrade higress -n higress-system higress.io/higress --set global.enableIstioAPI</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åŸºäº Istio APIï¼Œå¯ä»¥å®ç°ç›®å‰ Higress è¿˜æœªæä¾›ç›¸åº” Ingress æ³¨è§£çš„èƒ½åŠ›ï¼Œä¾‹å¦‚åŸºäº Istio EnvoyFilter æ¥å®ç° HTTP to Dubbo çš„åè®®è½¬æ¢é…ç½®æ–¹å¼ï¼š</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> networking.istio.io/v1alpha3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> EnvoyFilter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> http</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">dubbo</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">transcoder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">configPatches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">applyTo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> HTTP_FILTER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">match</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">context</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> GATEWAY</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">listener</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">filterChain</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">filter</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> envoy.filters.network.http_connection_manager</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">subFilter</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> envoy.filters.http.router</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">patch</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">operation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> INSERT_BEFORE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> envoy.filters.http.http_dubbo_transcoder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">typed_config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">'@type'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> type.googleapis.com/udpa.type.v1.TypedStruct</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">type_url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> type.googleapis.com/envoy.extensions.filters.http.http_dubbo_transcoder.v3.HttpDubboTranscoder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">applyTo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> HTTP_ROUTE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">match</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">context</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> GATEWAY</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">routeConfiguration</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">vhost</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">route</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">patch</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">operation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> MERGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">route</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">upgrade_configs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">connect_config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">allow_post</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">upgrade_type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> CONNECT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">typed_per_filter_config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">envoy.filters.http.http_dubbo_transcoder</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">'@type'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> type.googleapis.com/udpa.type.v1.TypedStruct</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">type_url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> type.googleapis.com/envoy.extensions.filters.http.http_dubbo_transcoder.v3.HttpDubboTranscoder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">request_validation_options</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token key atrule" style="color:#00a4db">reject_unknown_method</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token key atrule" style="color:#00a4db">reject_unknown_query_parameters</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">services_mapping</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">group</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> dev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token key atrule" style="color:#00a4db">method_mapping</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> sayName</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token key atrule" style="color:#00a4db">parameter_mapping</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">extract_key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> p</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token key atrule" style="color:#00a4db">extract_key_spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ALL_QUERY_PARAMETER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token key atrule" style="color:#00a4db">mapping_type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> java.lang.String</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token key atrule" style="color:#00a4db">passthrough_setting</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token key atrule" style="color:#00a4db">passthrough_all_headers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token key atrule" style="color:#00a4db">path_matcher</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token key atrule" style="color:#00a4db">match_http_method_spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ALL_GET</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token key atrule" style="color:#00a4db">match_pattern</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /dubbo/hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> com.alibaba.nacos.example.dubbo.service.DemoService</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 1.0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">url_unescape_spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ALL_CHARACTERS_EXCEPT_RESERVED</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¸Šè¿°é…ç½®æ¯”è¾ƒå¤æ‚ï¼ŒåŸå› æ˜¯ä¸ºäº†æ–¹ä¾¿ Envoy æ•°æ®é¢ç¨‹åºé€»è¾‘å¤„ç†è€Œè®¾è®¡çš„ Schemaã€‚ç›®å‰ Higress ç¤¾åŒºå·²ç»åœ¨è®¾è®¡æ›´æ–¹ä¾¿ Ingress é…ç½®ä½¿ç”¨çš„ CRDï¼Œåç»­ä¹Ÿä¼šåœ¨ Higress æ§åˆ¶å°ä¸Šæä¾›å¯¹åº”çš„é…ç½®åŠŸèƒ½ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ga-ç‰ˆæœ¬è§„åˆ’">GA ç‰ˆæœ¬è§„åˆ’<a href="#ga-ç‰ˆæœ¬è§„åˆ’" class="hash-link" aria-label="GA ç‰ˆæœ¬è§„åˆ’çš„ç›´æ¥é“¾æ¥" title="GA ç‰ˆæœ¬è§„åˆ’çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>Higress é¢„è®¡å°†åœ¨3æœˆåº•/4æœˆåˆå‘å¸ƒé¦–ä¸ª GA ç‰ˆæœ¬, è¿™ä¸ªç‰ˆæœ¬çš„ä¸»è¦è§„åˆ’å¦‚ä¸‹ï¼š</p><ol><li>å®ç° HTTP to Dubbo åè®®è½¬æ¢çš„æ§åˆ¶é¢é…ç½®ç®€åŒ–</li><li>Higress æ§åˆ¶å°æä¾› Wasm æ’ä»¶èƒ½åŠ›ï¼Œæ”¯æŒé…ç½®è‡ªå®šä¹‰æ’ä»¶</li><li>æ¨å‡ºç¬¬ä¸€ç‰ˆ Higress Admin APIï¼Œå¯ä»¥è¢«å…¶ä»–å¹³å°/å·¥å…·é›†æˆ</li><li>å…¨é¢å®Œå–„ Higress å®˜ç½‘æ–‡æ¡£ï¼Œè¦†ç›– Higress å…¨éƒ¨åŠŸèƒ½çš„è¯¦ç»†è¯´æ˜</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="higress-ç¤¾åŒº">Higress ç¤¾åŒº<a href="#higress-ç¤¾åŒº" class="hash-link" aria-label="Higress ç¤¾åŒºçš„ç›´æ¥é“¾æ¥" title="Higress ç¤¾åŒºçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>æ¬¢è¿è®¤é¢† Higress Issue ä»»åŠ¡ï¼š<a href="https://github.com/alibaba/higress/issues?q=is%3Aopen+is%3Aissue+label%3A%22help+wanted%22" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/higress/issues?q=is%3Aopen+is%3Aissue+label%3A%22help+wanted%22</a></p><p>å®Œæˆä¸€å®šæ•°é‡çš„ Issues å°±å¯ä»¥æˆä¸º Higress Committerï¼Œä¹Ÿæœ‰æœºä¼šè·å¾—å¼€æºç¤¾åŒºçš„ç¤¼ç‰©å’Œè£èª‰ğŸ†</p><p>æ¬¢è¿åŠ å…¥ Higress ç¤¾åŒºç¾¤ï¼ŒåŠæ—¶äº†è§£æ›´å¤š Higress åŠ¨å‘ï¼š</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i4/O1CN01xutJV11aSGvdgBHpC_!!6000000003328-0-tps-720-405.jpg" class="img_ev3q"></p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Higress + Nacos å¾®æœåŠ¡ç½‘å…³æœ€ä½³å®è·µ]]></title>
            <link>https://higress.io/zh-cn/blog/nacos</link>
            <guid>https://higress.io/zh-cn/blog/nacos</guid>
            <pubDate>Tue, 10 Jan 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Higressï¼šNacosçš„æœ€ä½³æ‹æ¡£]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="å‰è¨€">å‰è¨€<a href="#å‰è¨€" class="hash-link" aria-label="å‰è¨€çš„ç›´æ¥é“¾æ¥" title="å‰è¨€çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>åœ¨å»å¹´11æœˆçš„äº‘æ –å¤§ä¼šä¸Šï¼Œæˆ‘ä»¬å¼€æºäº†äº‘åŸç”Ÿç½‘å…³ Higressï¼Œæ—¶éš”æ•°æœˆï¼ŒHigress çš„ Github é¡¹ç›®(<a href="https://github.com/alibaba/higress" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/higress</a>)å·²ç»æ”¶è·äº†è¿‘ 1k+ starï¼Œä»¥åŠå¤§é‡ç¤¾åŒºå°ä¼™ä¼´çš„å…³æ³¨ã€‚</p><p>åœ¨ç¤¾åŒºçš„äº¤æµä¸­æˆ‘ä»¬å‘ç°æœ‰ä¸å°‘å¾®æœåŠ¡å¼€å‘è€…åœ¨ä½¿ç”¨å¦‚ Spring Cloud Gateway/Zuul ç­‰å¾®æœåŠ¡ç½‘å…³å¯¹æ¥ Nacos æ³¨å†Œä¸­å¿ƒå®ç°å¾®æœåŠ¡çš„è·¯ç”±ï¼Œå¹¶ä¸”å¸Œæœ›äº†è§£è¿ç§»åˆ° Higress ç½‘å…³èƒ½å¸¦æ¥å“ªäº›å¥½å¤„ã€‚
æœ¬æ–‡å°†ä»‹ç» Higress ç»„åˆ Nacos ä½œä¸ºå¾®æœåŠ¡ç½‘å…³èƒ½åŠ›ï¼Œå¹¶ä»‹ç»å¾®æœåŠ¡ç½‘å…³å‘å±•çš„ä¸¤ä¸ªè¶‹åŠ¿ï¼Œä¸ºç½‘å…³çš„é€‰å‹æŒ‡æ˜é“è·¯ï¼š</p><ul><li>è¶‹åŠ¿ä¸€ï¼šç»Ÿä¸€ API æ ‡å‡†ï¼Œå‘äº‘åŸç”Ÿå¾®æœåŠ¡æ¶æ„æ¼”è¿›</li><li>è¶‹åŠ¿äºŒï¼šåˆå¹¶å®‰å…¨&amp;æµé‡ç½‘å…³ï¼Œå‘ DevSecOps æ¼”è¿›</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="higressnacosçš„æœ€ä½³æ‹æ¡£">Higressï¼šNacosçš„æœ€ä½³æ‹æ¡£<a href="#higressnacosçš„æœ€ä½³æ‹æ¡£" class="hash-link" aria-label="Higressï¼šNacosçš„æœ€ä½³æ‹æ¡£çš„ç›´æ¥é“¾æ¥" title="Higressï¼šNacosçš„æœ€ä½³æ‹æ¡£çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i2/O1CN01Ww9gDw1PwXJUlwwRy_!!6000000001905-2-tps-1200-475.png" alt="image.png" class="img_ev3q">
Higress å’Œ Nacos å…¶å®æ˜¯å¸ˆå‡ºåŒé—¨â€”â€”é˜¿é‡Œä¸­é—´ä»¶å›¢é˜Ÿã€‚åœ¨ Higress æ”¯æ’‘é˜¿é‡Œå†…éƒ¨ä¸šåŠ¡çš„é˜¶æ®µï¼ŒHigress å°±å·²ç»æ­é… Nacos ä½œä¸ºå¾®æœåŠ¡ç½‘å…³ä½¿ç”¨ï¼Œå‡­å€Ÿé«˜æ€§èƒ½æ”¯æ’‘äº†åŒåä¸€çš„æ´ªå³°æµé‡ï¼›åˆ°äº†äº‘äº§å“å•†ä¸šåŒ–é˜¶æ®µï¼ŒHigress å’Œ Nacos ç»§ç»­åŸºäºé˜¿é‡Œäº‘ MSEï¼ˆMicroservices Engineï¼‰äº§å“ï¼Œç´§å¯†åä½œæ¼”è¿›äº§å“åŠŸèƒ½ï¼›Higress å¼€æºä¹‹åï¼Œå¦‚æœæƒ³è¦è‡ªå»ºå¾®æœåŠ¡ç½‘å…³ï¼Œé€‰æ‹© Higress é…åˆ Nacos ä½¿ç”¨ï¼Œå…·å¤‡ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p><ol><li>å¯¹æ¯” Spring Cloud Gateway/Zuul ç­‰ä¼ ç»Ÿ Java å¾®æœåŠ¡ç½‘å…³æ€§èƒ½é«˜å‡º 2-4 å€ï¼Œå¯ä»¥æ˜¾è‘—é™ä½èµ„æºæˆæœ¬</li><li>ä½œä¸ºäº‘åŸç”Ÿç½‘å…³ï¼Œå®ç°äº† Ingress/Gateway API æ ‡å‡†ï¼Œå…¼å®¹ Nginx Ingress å¤§éƒ¨åˆ†æ³¨è§£ï¼Œæ”¯æŒä¸šåŠ¡æ¸è¿›å¼å‘åŸºäº K8s çš„å¾®æœåŠ¡æ¶æ„æ¼”è¿›</li><li>ä¸ Dubbo/OpenSergo/Sentinel ç­‰å¼€æºå¾®æœåŠ¡ç”Ÿæ€æ·±åº¦æ•´åˆï¼Œæä¾›æœ€ä½³å®è·µ</li></ol><p>è¿™é‡Œé»˜è®¤å·²ç»å®‰è£…å¥½ Higressï¼Œæ­é… Nacos ä½¿ç”¨çš„å…·ä½“æ–¹å¼å¦‚ä¸‹ï¼š</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="é…ç½®æœåŠ¡æ¥æº">é…ç½®æœåŠ¡æ¥æº<a href="#é…ç½®æœåŠ¡æ¥æº" class="hash-link" aria-label="é…ç½®æœåŠ¡æ¥æºçš„ç›´æ¥é“¾æ¥" title="é…ç½®æœåŠ¡æ¥æºçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> networking.higress.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> McpBridge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">registries</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># å®šä¹‰ä¸€ä¸ªåä¸º â€œproductionâ€ çš„æœåŠ¡æ¥æº</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> production</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># æ³¨å†Œä¸­å¿ƒç±»å‹æ˜¯ Nacos 2.xï¼Œæ”¯æŒ gRPC åè®®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nacos2  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># æ³¨å†Œä¸­å¿ƒçš„è®¿é—®åœ°å€ï¼Œå¯ä»¥æ˜¯åŸŸåæˆ–è€…IP</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">domain</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 192.xxx.xx.32</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># æ³¨å†Œä¸­å¿ƒçš„è®¿é—®ç«¯å£ï¼ŒNacos é»˜è®¤éƒ½æ˜¯ 8848</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8848</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Nacos å‘½åç©ºé—´ ID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">nacosNamespaceId</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> d8ac64f3</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">xxxx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">xxxx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">xxxx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">47a814ecf358    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Nacos æœåŠ¡åˆ†ç»„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">nacosGroups</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> DEFAULT_GROUP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># å®šä¹‰ä¸€ä¸ªåä¸º â€œuatâ€ çš„æœåŠ¡æ¥æº</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> uat</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># æ³¨å†Œä¸­å¿ƒç±»å‹æ˜¯ Nacos 1.xï¼Œåªæ”¯æŒ HTTP åè®®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nacos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># æ³¨å†Œä¸­å¿ƒçš„è®¿é—®åœ°å€ï¼Œå¯ä»¥æ˜¯åŸŸåæˆ–è€…IP</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">domain</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 192.xxx.xx.31</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># æ³¨å†Œä¸­å¿ƒçš„è®¿é—®ç«¯å£ï¼ŒNacos é»˜è®¤éƒ½æ˜¯ 8848</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8848</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Nacos å‘½åç©ºé—´ ID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">nacosNamespaceId</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 98ac6df3</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">xxxx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">xxxx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">xxxx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ab98115dfde4    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Nacos æœåŠ¡åˆ†ç»„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">nacosGroups</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> DEFAULT_GROUP    </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æˆ‘ä»¬é€šè¿‡ McpBridge èµ„æºé…ç½®äº†ä¸¤ä¸ªæœåŠ¡æ¥æºï¼Œåˆ†åˆ«å–å â€œproductionâ€å’Œâ€œuatâ€ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ Higress å¯¹æ¥ Nacos åŒæ—¶æ”¯æŒ HTTP å’Œ gRPC ä¸¤ç§åè®®ï¼Œå»ºè®®å°† Nacos å‡çº§åˆ° 2.x ç‰ˆæœ¬ï¼Œè¿™æ ·å¯ä»¥åœ¨ä¸Šè¿°é…ç½®çš„ type ä¸­æŒ‡å®š â€œnacos2â€ ä½¿ç”¨ gRPC åè®®ï¼Œä»è€Œæ›´å¿«é€Ÿåœ°æ„ŸçŸ¥åˆ°æœåŠ¡å˜åŒ–ï¼Œå¹¶æ¶ˆè€—æ›´å°‘çš„ Nacos æœåŠ¡ç«¯èµ„æºã€‚
åŸºäº McpBridge ä¸­çš„ registries æ•°ç»„é…ç½®ï¼ŒHigress å¯ä»¥è½»æ¾å¯¹æ¥å¤šä¸ªä¸”ä¸åŒç±»å‹çš„æœåŠ¡æ¥æºï¼ˆNacos/Zookeeper/Eureka/Consul/...ï¼‰ï¼Œè¿™é‡Œå¯¹äº Nacos ç±»å‹çš„æœåŠ¡æ¥æºï¼Œæ”¯æŒé…ç½®å¤šä¸ªä¸åŒå‘½åç©ºé—´ï¼Œä»è€Œå®ç°ä¸åŒå‘½åç©ºé—´çš„å¾®æœåŠ¡å¯ä»¥å…±ç”¨ä¸€ä¸ªç½‘å…³ï¼Œé™ä½è‡ªå»ºå¾®æœåŠ¡ç½‘å…³çš„èµ„æºæˆæœ¬å¼€é”€ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="é…ç½®-ingress">é…ç½® Ingress<a href="#é…ç½®-ingress" class="hash-link" aria-label="é…ç½® Ingressçš„ç›´æ¥é“¾æ¥" title="é…ç½® Ingressçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> networking.k8s.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Ingress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">higress.io/destination</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> service</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">provider.DEFAULT</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">GROUP.d8ac64f3</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">xxxx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">xxxx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">xxxx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">47a814ecf358.nacos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">rules</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">paths</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">backend</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">resource</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">apiGroup</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> networking.higress.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> McpBridge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">pathType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Prefix</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å’Œå¸¸è§çš„ Ingress åœ¨ backend ä¸­å®šä¹‰ service ä¸åŒï¼Œè¿™é‡ŒåŸºäº Ingress çš„ resource backend å°†ä¸Šé¢å®šä¹‰æœåŠ¡æ¥æºçš„ McpBridge è¿›è¡Œå…³è”ã€‚å¹¶é€šè¿‡æ³¨è§£<code>higress.io/destination</code>æŒ‡å®šè·¯ç”±æœ€ç»ˆè¦è½¬å‘åˆ°çš„ç›®æ ‡æœåŠ¡ã€‚å¯¹äº Nacos æ¥æºçš„æœåŠ¡ï¼Œè¿™é‡Œçš„ç›®æ ‡æœåŠ¡æ ¼å¼ä¸ºï¼šâ€œæœåŠ¡åç§°.æœåŠ¡åˆ†ç»„.å‘½åç©ºé—´ID.nacosâ€ï¼Œæ³¨æ„è¿™é‡Œéœ€è¦éµå¾ª DNS åŸŸåæ ¼å¼ï¼Œå› æ­¤æœåŠ¡åˆ†ç»„ä¸­çš„ä¸‹åˆ’çº¿'_'è¢«è½¬æ¢æˆäº†æ¨ªæ '-'ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸°å¯Œçš„å¾®æœåŠ¡ç½‘å…³èƒ½åŠ›">ä¸°å¯Œçš„å¾®æœåŠ¡ç½‘å…³èƒ½åŠ›<a href="#ä¸°å¯Œçš„å¾®æœåŠ¡ç½‘å…³èƒ½åŠ›" class="hash-link" aria-label="ä¸°å¯Œçš„å¾®æœåŠ¡ç½‘å…³èƒ½åŠ›çš„ç›´æ¥é“¾æ¥" title="ä¸°å¯Œçš„å¾®æœåŠ¡ç½‘å…³èƒ½åŠ›çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>Higress åœ¨å¾®æœåŠ¡å‘ç°çš„åŸºç¡€ä¸Šï¼Œæä¾›äº†å¤šç§å®ç”¨çš„å¾®æœåŠ¡ç½‘å…³èƒ½åŠ›ï¼Œè¿™é‡Œä»¥â€œç°åº¦å‘å¸ƒâ€å’Œâ€œè‡ªå®šä¹‰æ‰©å±•â€è¿›è¡Œä¸¾ä¾‹ï¼Œæ›´å¤šèƒ½åŠ›å¯ä»¥ç‚¹å‡»åŸæ–‡å‚è€ƒ Higress å®˜ç½‘æ–‡æ¡£è¿›è¡Œäº†è§£ã€‚</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ç°åº¦å‘å¸ƒ">ç°åº¦å‘å¸ƒ<a href="#ç°åº¦å‘å¸ƒ" class="hash-link" aria-label="ç°åº¦å‘å¸ƒçš„ç›´æ¥é“¾æ¥" title="ç°åº¦å‘å¸ƒçš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>Higress å®Œå…¨å…¼å®¹äº† Nginx Ingress çš„é‡‘ä¸é›€ï¼ˆCanaryï¼‰ç›¸å…³æ³¨è§£ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œå¯ä»¥å°†å¸¦æœ‰HTTP Headerä¸ºx-user-id: 100çš„è¯·æ±‚æµé‡è·¯ç”±åˆ°ç°åº¦æœåŠ¡ä¸­ã€‚</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> networking.k8s.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Ingress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">higress.io/destination</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> service</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">provider.DEFAULT</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">GROUP.98ac6df3</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">xxxx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">xxxx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">xxxx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ab98115dfde4.nacos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">nginx.ingress.kubernetes.io/canary</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'true'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">nginx.ingress.kubernetes.io/canary-by-header</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">user</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">nginx.ingress.kubernetes.io/canary-by-header-value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'100'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> demo</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">uat</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">rules</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">paths</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">backend</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">resource</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">apiGroup</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> networking.higress.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> McpBridge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">pathType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Prefix</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ‚¨è¿˜å¯ä»¥åŸºäº OpenKruise Rollout è®©ç°åº¦å‘å¸ƒå’ŒæœåŠ¡éƒ¨ç½²è¿‡ç¨‹è”åŠ¨ï¼Œä»è€Œå®ç°æ¸è¿›å¼äº¤ä»˜ï¼Œå…·ä½“å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« <a href="https://mp.weixin.qq.com/s/vqwAUITNq9_twYHWX_5ZDg" target="_blank" rel="noopener noreferrer">ã€ŠHigress &amp; Kruise Rollout: æ¸è¿›å¼äº¤ä»˜ä¸ºåº”ç”¨å‘å¸ƒä¿é©¾æŠ¤èˆªã€‹</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="è‡ªå®šä¹‰æ‰©å±•">è‡ªå®šä¹‰æ‰©å±•<a href="#è‡ªå®šä¹‰æ‰©å±•" class="hash-link" aria-label="è‡ªå®šä¹‰æ‰©å±•çš„ç›´æ¥é“¾æ¥" title="è‡ªå®šä¹‰æ‰©å±•çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>ä½œä¸ºå¾®æœåŠ¡ç½‘å…³ï¼Œéœ€è¦åœ¨å¾®æœåŠ¡æ¶æ„ä¸­æ‰¿æ‹…éƒ¨åˆ†é€šç”¨é€»è¾‘çš„å¤„ç†ï¼Œä¾‹å¦‚è®¤è¯é‰´æƒï¼Œå®‰å…¨é˜²æŠ¤ç­‰ã€‚é€šç”¨çš„é€»è¾‘æ— æ³•æ»¡è¶³å¤šæ ·æ€§çš„ä¸šåŠ¡åœºæ™¯ï¼ŒHigress å¯ä»¥æ”¯æŒå¼€å‘è€…æ·»åŠ è‡ªå®šä¹‰å¤„ç†é€»è¾‘ã€‚ä¸ Spring Cloud Gateway ç­‰ä¼ ç»Ÿå¾®æœåŠ¡ç½‘å…³éœ€è¦å¼€å‘è€…è‡ªå·±åœ¨ Gateway ä»£ç ä¸­åŠ  Filter ä¸åŒï¼ŒHigress æ”¯æŒå¼€å‘è€…ä½¿ç”¨å¤šç§è¯­è¨€ç¼–å†™ Wasm æ’ä»¶ï¼Œå¹¶åŠ¨æ€åŠ è½½ç”Ÿæ•ˆï¼Œæ’ä»¶ç”Ÿæ•ˆè¿‡ç¨‹æ— éœ€é‡å¯ç½‘å…³ï¼Œå˜æ›´æ’ä»¶é€»è¾‘å¯¹æµé‡å®Œå…¨æ— æŸã€‚
ä¸‹ä¾‹æ˜¯ä¸€ä¸ªå±è”½ç‰¹å®šè¯·æ±‚çš„ Wasm æ’ä»¶ï¼Œå½“è¯·æ±‚ url ä¸­å‡ºç° â€œswagger.htmlâ€ æ—¶å°†è¢«ç›´æ¥æ‹’ç»è®¿é—®ï¼Œæ’ä»¶å®ç°ä»£ç å‚è€ƒï¼š<a href="https://github.com/alibaba/higress/tree/main/plugins/wasm-go/extensions/request-block" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/higress/tree/main/plugins/wasm-go/extensions/request-block</a></p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> extensions.higress.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> WasmPlugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> request</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">block</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">defaultConfig</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">block_urls</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"swagger.html"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> oci</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">registry.cn</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">hangzhou.cr.aliyuncs.com/plugins/demo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">1.0.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Wasm æ’ä»¶çš„å¼€å‘&amp;ç¼–è¯‘&amp;é•œåƒæ¨é€æ–¹å¼å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« <a href="https://mp.weixin.qq.com/s/eoPlaOgRm7u5wJAxhbVGGg" target="_blank" rel="noopener noreferrer">ã€ŠHigress å®æˆ˜ï¼š30 è¡Œä»£ç å†™ä¸€ä¸ª Wasm Goæ’ä»¶ã€‹</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¾®æœåŠ¡ç½‘å…³å‘å±•è¶‹åŠ¿">å¾®æœåŠ¡ç½‘å…³å‘å±•è¶‹åŠ¿<a href="#å¾®æœåŠ¡ç½‘å…³å‘å±•è¶‹åŠ¿" class="hash-link" aria-label="å¾®æœåŠ¡ç½‘å…³å‘å±•è¶‹åŠ¿çš„ç›´æ¥é“¾æ¥" title="å¾®æœåŠ¡ç½‘å…³å‘å±•è¶‹åŠ¿çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="è¶‹åŠ¿ä¸€ç»Ÿä¸€-api-æ ‡å‡†å‘äº‘åŸç”Ÿå¾®æœåŠ¡æ¶æ„æ¼”è¿›">è¶‹åŠ¿ä¸€ï¼šç»Ÿä¸€ API æ ‡å‡†ï¼Œå‘äº‘åŸç”Ÿå¾®æœåŠ¡æ¶æ„æ¼”è¿›<a href="#è¶‹åŠ¿ä¸€ç»Ÿä¸€-api-æ ‡å‡†å‘äº‘åŸç”Ÿå¾®æœåŠ¡æ¶æ„æ¼”è¿›" class="hash-link" aria-label="è¶‹åŠ¿ä¸€ï¼šç»Ÿä¸€ API æ ‡å‡†ï¼Œå‘äº‘åŸç”Ÿå¾®æœåŠ¡æ¶æ„æ¼”è¿›çš„ç›´æ¥é“¾æ¥" title="è¶‹åŠ¿ä¸€ï¼šç»Ÿä¸€ API æ ‡å‡†ï¼Œå‘äº‘åŸç”Ÿå¾®æœåŠ¡æ¶æ„æ¼”è¿›çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åŸºäºä¸€å¥— API å¯ä»¥æœ‰ä¸åŒçš„å®ç°ï¼Œæ—¢è®©ç”¨æˆ·ä¸è¢«å…·ä½“å®ç°é”å®šï¼Œåˆæ¡¥æ¥äº†æŠ€æœ¯æ¼”è¿›çš„é¸¿æ²Ÿã€‚API å¯ä»¥è¯´æ˜¯æ•´ä¸ªäº‘åŸç”Ÿæ¶æ„çš„åŸºçŸ³ï¼Œæˆ–è®¸æœ‰ä¸€å¤© K8s ä¼šæ¶ˆå¤±ï¼Œä½†æ˜¯é¢å‘æŠ½è±¡çš„ API æ ‡å‡†å®šä¼šé•¿å­˜ã€‚åœ¨æµé‡ç½‘å…³é¢†åŸŸï¼ŒIngress API å·²ç»æˆä¸ºæ ‡å‡†ã€‚è€Œå¯¹äºå¾®æœåŠ¡ç½‘å…³ç­‰æ›´å¤æ‚çš„ä½¿ç”¨åœºæ™¯ï¼ŒIngress å—é™äºå…¶ç®€å•çš„åè®®å­—æ®µï¼Œéœ€è¦é€šè¿‡ Ingress æ³¨è§£ç­‰æ–¹å¼è¿›è¡Œèƒ½åŠ›æ‰©å±•ï¼Œéš¾ä»¥è¢«æ ‡å‡†åŒ–ã€‚å› æ­¤è¯¸å¦‚ Contourã€Emissaryã€Kongã€APISIX ç­‰éƒ½å®šä¹‰äº†è‡ªå·±çš„ HTTP è·¯ç”±ç­‰ CRDï¼Œç½‘å…³çš„ API å®šä¹‰å¼€å§‹å‘ˆç°ç¢ç‰‡åŒ–ã€‚
è¿™ä¸€èƒŒæ™¯ä¹‹ä¸‹ï¼ŒGateway API åº”è¿è€Œç”Ÿï¼Œå¹¶ä¸”åœ¨è¿‡å»çš„ä¸€å¹´é‡Œä» alpha æ¼”è¿›åˆ°äº† beta é˜¶æ®µã€‚è™½ç„¶ç›®å‰ Gateway API è¿˜æœªå®šç¨¿ï¼Œåè®®ä»ä¼šå‘ç”Ÿå˜åŠ¨ï¼Œä¸å»ºè®®ç”¨äºç”Ÿäº§ï¼Œä½† API ç»Ÿä¸€è¶‹åŠ¿å·²ç»ä¸å¯é˜»æŒ¡ï¼Œåªæ˜¯æ—¶é—´çš„é—®é¢˜ã€‚ä¸‹å›¾æ˜¯ Gateway API çš„ä¸€ä¸ªç”¨ä¾‹åœºæ™¯ï¼Œä¸åŒäº Ingress APIï¼Œå°†é›†ç¾¤è¿ç»´å’Œä¸šåŠ¡è¿ç»´çš„èŒè´£è¿›è¡Œäº†åˆ’åˆ†ï¼Œè¿™æ ·ä¸šåŠ¡å¼€å‘äººå‘˜ä¸å†éœ€è¦å…³å¿ƒç½‘ç«™è¯ä¹¦ç­‰é›†ç¾¤çº§çš„ç»†èŠ‚ï¼Œåªä¸“æ³¨äºä¸šåŠ¡æœ¬èº«çš„ DevOpsï¼Œé›†ç¾¤è¿ç»´ä»»åŠ¡å¯ä»¥äº¤ç»™ SRE äººå‘˜è¿›è¡Œç»Ÿä¸€å¤„ç†ã€‚
<img loading="lazy" src="https://img.alicdn.com/imgextra/i3/O1CN01jDsDrv1zaqj82YkYP_!!6000000006731-2-tps-2735-1519.png" alt="image.png" class="img_ev3q">
Higress ç›®å‰é‡‡ç”¨ Ingress æ³¨è§£çš„èƒ½åŠ›æ¥å®ç°èƒ½åŠ›æ‰©å±•ï¼Œå¹¶å…¼å®¹äº† Nginx Ingress å¤§éƒ¨åˆ†å¸¸ç”¨æ³¨è§£ï¼Œä¸”å…·å¤‡å¹³æ»‘è¿ç§»åˆ° Gateway API çš„èƒ½åŠ›ã€‚
Higress ä¸ºä¼ ç»Ÿå¾®æœåŠ¡æ¶æ„ï¼Œæä¾›äº†æ¸è¿›å¼çš„æ–¹å¼ï¼Œå‘åŸºäº K8s çš„äº‘åŸç”Ÿå¾®æœåŠ¡æ¶æ„æ¼”è¿›ï¼šå¯ä»¥é€šè¿‡ Nacos å‘ç°éƒ¨ç½²åœ¨ K8s ä¹‹å¤–çš„æœåŠ¡ï¼Œä»è€Œå®ç°äº†ç½‘å…³åç«¯å¾®æœåŠ¡å¯ä»¥å’Œ K8s è§£è€¦ï¼Œä¸šåŠ¡å›¢é˜Ÿå¯ä»¥å°†å¾®æœåŠ¡é€ä¸ªè¿ç§»è‡³ K8sï¼Œè€Œä¸ç”¨æ‹…å¿ƒç½‘å…³å±‚çš„æµé‡å½±å“ã€‚
ä»ä¼ ç»Ÿå¾®æœåŠ¡ç½‘å…³è¿ç§»åˆ° Higressï¼Œå†æ¸è¿›å¼å®Œæˆæ•´ä¸ªå¾®æœåŠ¡æ¶æ„çš„äº‘åŸç”ŸåŒ–ï¼Œæ˜¯ä¸€ä¸ªæ˜æ™ºçš„é€‰æ‹©ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="è¶‹åŠ¿äºŒåˆå¹¶å®‰å…¨æµé‡ç½‘å…³å‘-devsecops-æ¼”è¿›">è¶‹åŠ¿äºŒï¼šåˆå¹¶å®‰å…¨&amp;æµé‡ç½‘å…³ï¼Œå‘ DevSecOps æ¼”è¿›<a href="#è¶‹åŠ¿äºŒåˆå¹¶å®‰å…¨æµé‡ç½‘å…³å‘-devsecops-æ¼”è¿›" class="hash-link" aria-label="è¶‹åŠ¿äºŒï¼šåˆå¹¶å®‰å…¨&amp;æµé‡ç½‘å…³ï¼Œå‘ DevSecOps æ¼”è¿›çš„ç›´æ¥é“¾æ¥" title="è¶‹åŠ¿äºŒï¼šåˆå¹¶å®‰å…¨&amp;æµé‡ç½‘å…³ï¼Œå‘ DevSecOps æ¼”è¿›çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>Higress æå‡ºäº†å°†å®‰å…¨ã€æµé‡ã€å¾®æœåŠ¡ç½‘å…³ä¸‰åˆä¸€çš„æ¦‚å¿µï¼Œé¦–å…ˆæ¥çœ‹ä¸€ä¸ªå…¸å‹çš„å¤šå±‚ç½‘å…³æ¶æ„ï¼š
<img loading="lazy" src="https://img.alicdn.com/imgextra/i2/O1CN0178hdNj25QDDnqmISC_!!6000000007520-2-tps-1318-198.png" class="img_ev3q">
åœ¨è¿™ä¸ªæ¶æ„ä¸­ï¼Œç”¨ WAF ç½‘å…³å®ç°å®‰å…¨èƒ½åŠ›ï¼ŒIngress ç½‘å…³å®ç°é›†ç¾¤å…¥å£ç½‘å…³èƒ½åŠ›ï¼ˆé K8s åœºæ™¯æˆ–ä¼šéƒ¨ç½²ä¸€å±‚ Nginxï¼‰ï¼ŒSCGï¼ˆSpring Cloud Gatewayï¼‰ å®ç°å¾®æœåŠ¡ç½‘å…³èƒ½åŠ›ã€‚è¿™æ ·çš„æ¶æ„ä¸‹ï¼Œéœ€è¦å¯¹æ¯ä¸€å±‚ç½‘å…³éƒ½è¿›è¡Œå®¹é‡è¯„ä¼°ï¼Œæ¯ä¸€å±‚ç½‘å…³éƒ½æ˜¯æ½œåœ¨çš„ç“¶é¢ˆç‚¹ï¼Œéƒ½å¯èƒ½éœ€è¦è¿›è¡Œæ‰©å®¹ã€‚è¿™æ ·é€ æˆçš„èµ„æºæˆæœ¬å’Œè¿ç»´äººåŠ›æˆæœ¬éƒ½æ˜¯å·¨å¤§çš„ã€‚å¹¶ä¸”æ¯å¤šä¸€å±‚ç½‘å…³ï¼Œå°±å¤šä¸€å±‚å¯ç”¨æ€§é£é™©ã€‚ä¸€æ—¦å‡ºç°å¯ç”¨æ€§é—®é¢˜ï¼Œå¤šå±‚ç½‘å…³ä¼šå¯¼è‡´é—®é¢˜å®šä½å¤æ‚åº¦æ˜¾è‘—ä¸Šå‡ï¼Œå¯¹åº”çš„å¹³å‡æ•…éšœæ¢å¤æ—¶é—´ï¼ˆMTTRï¼‰å°†å¤§å¹…å¢åŠ ã€‚
<img loading="lazy" src="https://img.alicdn.com/imgextra/i1/O1CN01BnAVqH1SCE73I5l85_!!6000000002210-2-tps-1318-198.png" class="img_ev3q">
é‡‡ç”¨ä¸‰åˆä¸€çš„æ¶æ„ä¸­ï¼Œå¯ä»¥æ˜¾è‘—é™ä½æˆæœ¬ï¼Œå¹¶æé«˜ç³»ç»Ÿæ•´ä½“å¯ç”¨æ€§ã€‚åŒæ—¶è¿™ä¹Ÿç¬¦åˆ DevSecOps çš„å¾®æœåŠ¡æ¼”è¿›è¶‹åŠ¿ï¼Œå¾®æœåŠ¡å¼€å‘è€…å¯ä»¥æ›´å¤šåœ°ä»ä¸šåŠ¡æ¥å£è§†è§’å…³æ³¨å®‰å…¨æ€§ï¼Œè€Œä¸æ˜¯é‡‡ç”¨æ‰€æœ‰è·¯ç”±ä¸€åˆ€åˆ‡çš„ WAF é˜²æŠ¤æ¨¡å¼ã€‚
æŠ€æœ¯æ¶æ„æ¼”è¿›çš„èƒŒåæ˜¯ç»„ç»‡æ¶æ„æ¼”è¿›ï¼Œè¿™ä¹Ÿæ˜¯å¾®æœåŠ¡ DevOps ä¸€ç›´åœ¨å¼ºè°ƒçš„ï¼Œè¦å›´ç»•å¼€å‘è€…ä¸ºæ ¸å¿ƒï¼Œä»è€Œæå‡å¾®æœåŠ¡å¼€å‘æ•ˆç‡ã€‚å‘ DevSecOps æ¼”è¿›å¹¶æ²¡æœ‰æ·å¾„ï¼Œä¾ç„¶éœ€è¦å¼€å‘è§’è‰²å’Œè¿ç»´è§’è‰²ä¹‹é—´çš„åŒå‘å¥”èµ´ï¼Œæ‰“ç ´ä¼ ç»Ÿå¼€å‘ä¸è¿ç»´ä¹‹é—´çš„å£å’ï¼Œå½¢æˆä»å¼€å‘ã€éƒ¨ç½²ã€å®‰å…¨è¿è¥è¿™æ ·ä¸€ä¸ªå…¨åŠŸèƒ½åŒ–çš„æ•æ·å›¢é˜Ÿã€‚
é€šè¿‡ Higress å°†ç½‘å…³åˆå¹¶ä½œä¸ºå‘ DevSecOps æ¼”è¿›çš„æŠ“æ‰‹ï¼Œæ˜¯ä¸€ä¸ªæ˜æ™ºçš„é€‰æ‹©ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å‚ä¸-higress-ç¤¾åŒº">å‚ä¸ Higress ç¤¾åŒº<a href="#å‚ä¸-higress-ç¤¾åŒº" class="hash-link" aria-label="å‚ä¸ Higress ç¤¾åŒºçš„ç›´æ¥é“¾æ¥" title="å‚ä¸ Higress ç¤¾åŒºçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>Higress å¼€æºè´¡çŒ®å°ç»„æ­£åœ¨ç«çƒ­æ‹›å‹Ÿè´¡çŒ®è€…ã€‚å¦‚æœæ‚¨æœ‰æ—¶é—´ï¼Œæœ‰çƒ­æƒ…ï¼Œæœ‰æ„æ„¿ï¼Œæ¬¢è¿è”ç³»ç¤¾åŒºåŠ å…¥å¼€æºè´¡çŒ®å°ç»„ï¼Œä¸€èµ·å…±åŒå®Œå–„ Higressï¼Œä¸€èµ·ä¸»å¯¼ä¸‹ä¸€ä»£äº‘åŸç”Ÿç½‘å…³çš„è®¾è®¡å’Œå®ç°ã€‚
ç¤¾åŒºå®˜ç½‘ï¼ˆç‚¹å‡»â€œé˜…è¯»åŸæ–‡â€è·³è½¬ï¼‰: <a href="https://higress.io" target="_blank" rel="noopener noreferrer">https://higress.io</a>
ç¤¾åŒºå¼€å‘è€…ç¾¤ï¼š
<img loading="lazy" src="https://img.alicdn.com/imgextra/i1/O1CN01Zc7yGt1p0zYq3OCwj_!!6000000005299-2-tps-979-1280.png" alt="image.png" class="img_ev3q">
ç¤¾åŒºäº¤æµç¾¤ï¼š
<img loading="lazy" src="https://img.alicdn.com/imgextra/i2/O1CN01Ebh7P021yKGBaP35B_!!6000000007053-2-tps-720-405.png" alt="higress-comm.png" class="img_ev3q"></p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[30è¡Œä»£ç å†™ä¸€ä¸ªWasm Goæ’ä»¶]]></title>
            <link>https://higress.io/zh-cn/blog/30-line-wasm</link>
            <guid>https://higress.io/zh-cn/blog/30-line-wasm</guid>
            <pubDate>Tue, 22 Nov 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[å¯¹ã€ŠHigress å¼€æºèƒŒåçš„å‘å±•å†ç¨‹å’Œä¸Šæ‰‹ Demo æ¼”ç¤ºã€‹ç›´æ’­æ¼”ç¤º demo çš„è¯¦ç»†è¯´æ˜]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="å‰è¨€">å‰è¨€<a href="#å‰è¨€" class="hash-link" aria-label="å‰è¨€çš„ç›´æ¥é“¾æ¥" title="å‰è¨€çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>åœ¨11æœˆ15å·çš„ç›´æ’­ ã€ŠHigress å¼€æºèƒŒåçš„å‘å±•å†ç¨‹å’Œä¸Šæ‰‹ Demo æ¼”ç¤ºã€‹ä¸­ï¼Œä¸ºå¤§å®¶æ¼”ç¤ºäº† Higress çš„ Wasm æ’ä»¶å¦‚ä½•é¢å‘ Ingress èµ„æºè¿›è¡Œé…ç½®ç”Ÿæ•ˆï¼Œæœ¬æ–‡å¯¹å½“å¤©çš„ Demo è¿›è¡Œä¸€ä¸ªå›é¡¾ï¼Œå¹¶è¯´æ˜èƒŒåçš„åŸç†æœºåˆ¶ã€‚</p><p>æœ¬æ–‡ä¸­ Demo è¿è¡Œçš„å‰æï¼Œéœ€è¦åœ¨ K8s é›†ç¾¤ä¸­å®‰è£…äº† Higressï¼Œå¹¶ç”Ÿæ•ˆäº†ä¸‹é¢è¿™ä»½ quickstart é…ç½®ï¼š
<a href="https://higress.io/samples/quickstart.yaml" target="_blank" rel="noopener noreferrer">https://higress.io/samples/quickstart.yaml</a>
è¿™ä¸ª Demo è¦å®ç°çš„åŠŸèƒ½æ˜¯ä¸€ä¸ª Mock åº”ç­”çš„åŠŸèƒ½ï¼Œéœ€è¦å®ç°æ ¹æ®é…ç½®çš„å†…å®¹ï¼Œè¿”å› HTTP åº”ç­”ã€‚
æœ¬æ–‡ä¼šæŒ‰ä»¥ä¸‹æ–¹å¼è¿›è¡Œä»‹ç»ï¼š</p><ul><li>ç¼–å†™ä»£ç ï¼šä»£ç é€»è¾‘è§£æ</li><li>ç”Ÿæ•ˆæ’ä»¶ï¼šè¯´æ˜ä»£ç å¦‚ä½•è¿›è¡Œç¼–è¯‘æ‰“åŒ…å¹¶éƒ¨ç½²ç”Ÿæ•ˆ</li><li>æµ‹è¯•æ’ä»¶åŠŸèƒ½ï¼šè¯´æ˜å…¨å±€ç²’åº¦ï¼Œè·¯ç”±/åŸŸåçº§ç²’åº¦å¦‚ä½•ç”Ÿæ•ˆ</li><li>æ’ä»¶ç”Ÿæ•ˆåŸç†ï¼šå¯¹æ•´ä½“æµç¨‹è¿›è¡Œå›é¡¾ï¼Œè¯´æ˜æ’ä»¶ç”Ÿæ•ˆçš„åŸç†</li><li>ä¸‰ä¸ªé©å‘½æ€§çš„ç‰¹æ€§ï¼šä»‹ç» Wasm æ’ä»¶æœºåˆ¶ä¸ºç½‘å…³æ’ä»¶å¼€å‘å¸¦æ¥çš„å˜é©</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç¼–å†™ä»£ç ">ç¼–å†™ä»£ç <a href="#ç¼–å†™ä»£ç " class="hash-link" aria-label="ç¼–å†™ä»£ç çš„ç›´æ¥é“¾æ¥" title="ç¼–å†™ä»£ç çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    . "github.com/alibaba/higress/plugins/wasm-go/pkg/wrapper"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "github.com/tetratelabs/proxy-wasm-go-sdk/proxywasm"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "github.com/tetratelabs/proxy-wasm-go-sdk/proxywasm/types"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "github.com/tidwall/gjson"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">func main() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SetCtx(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        "my-plugin",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ParseConfigBy(parseConfig),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ProcessRequestHeadersBy(onHttpRequestHeaders),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type MyConfig struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    content string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">func parseConfig(json gjson.Result, config *MyConfig, log Log) error {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    config.content = json.Get("content").String()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return nil</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">func onHttpRequestHeaders(ctx HttpContext, config MyConfig, log Log) types.Action {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    proxywasm.SendHttpResponse(200, nil, []byte(config.content), -1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return types.ActionContinue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¸Šé¢ä»£ç ä¸­å¯ä»¥çœ‹åˆ°ä¸‰ä¸ªå‡½æ•°ï¼š</p><ul><li><p>mainï¼šæ’ä»¶é€šè¿‡ main å‡½æ•°å®šä¹‰æ’ä»¶ä¸Šä¸‹æ–‡ï¼ŒåŒ…æ‹¬æ’ä»¶åç§°ï¼Œç”¨äºè§£æé…ç½®çš„å‡½æ•°ï¼Œä»¥åŠç”¨äºå¤„ç†è¯·æ±‚/åº”ç­”çš„å‡½æ•°</p></li><li><p>parseConfigï¼šè¿™ä¸ªå‡½æ•°é€šè¿‡åœ¨ SetCtx ä¸­æŒ‡å®šçš„ ParseConfigBy è¢«æŒ‚è½½åˆ°æ’ä»¶é…ç½®è§£æé˜¶æ®µï¼Œä¼ å…¥çš„ä¸‰ä¸ªå‚æ•°åˆ†åˆ«æ˜¯ï¼š</p><ul><li>jsonï¼šä¼ å…¥æ’ä»¶çš„é…ç½®ï¼Œå°†ç»Ÿä¸€åºåˆ—åŒ–ä¸ºä¸€ä¸ª json å­—å…¸å¯¹è±¡ï¼Œæä¾› parseConfig è¿›è¡Œè§£æ</li><li>configï¼šparseConfig å°†è§£æåçš„æ’ä»¶é…ç½®è¾“å‡ºåˆ°è¿™ä¸ª MyConfig å¯¹è±¡</li><li>logï¼šæä¾›æ—¥å¿—è¾“å‡ºæ¥å£</li></ul></li><li><p>onHttpRequestHeadersï¼šå‡½æ•°ä¸­è°ƒç”¨çš„ proxywasm.SendHttpResponseï¼Œç”¨äºå®ç°ç›´æ¥è¿”å› HTTP åº”ç­”ï¼Œè¿™ä¸ªå‡½æ•°é€šè¿‡åœ¨ SetCtx ä¸­æŒ‡å®šçš„ ProcessRequestHeadersBy è¢«æŒ‚è½½åˆ°è§£æè¯·æ±‚ Header çš„æ‰§è¡Œé˜¶æ®µï¼Œå…¶ä»–çš„æŒ‚è½½æ–¹å¼è¿˜æœ‰ï¼š</p><ul><li><p>ProcessRequestBodyByï¼šæŒ‚è½½åˆ°è§£æè¯·æ±‚ Body çš„æ‰§è¡Œé˜¶æ®µ</p></li><li><p>ProcessResponseHeadersByï¼šæŒ‚è½½åˆ°æ„é€ åº”ç­” Header çš„æ‰§è¡Œé˜¶æ®µ</p></li><li><p>ProcessResponseBodyByï¼šæŒ‚è½½åˆ°æ„é€ åº”ç­” Body çš„æ‰§è¡Œé˜¶æ®µ</p><p> ä¼ å…¥çš„ä¸‰ä¸ªå‚æ•°åˆ†åˆ«æ˜¯ï¼š</p></li><li><p>ctxï¼šç”¨äºè·å–è¯·æ±‚ä¸Šä¸‹æ–‡ï¼Œå¦‚ scheme/method/path ç­‰ï¼Œé€šè¿‡ ctx å¯ä»¥è®¾ç½®è‡ªå®šä¹‰ä¸Šä¸‹æ–‡ï¼Œèƒ½è·¨æ‰§è¡Œé˜¶æ®µè®¿é—®</p></li><li><p>configï¼šæä¾› parseConfig è§£æå¥½çš„è‡ªå®šä¹‰é…ç½®</p></li><li><p>logï¼šæä¾›æ—¥å¿—è¾“å‡ºæ¥å£</p></li></ul></li></ul><p>è¿™ä¸ª 30 è¡Œä»£ç å®ç°çš„æ’ä»¶åŠŸèƒ½æ¯”è¾ƒç®€å•ï¼Œè¿™é‡Œæœ‰ä¸€äº›åŠŸèƒ½ç›¸å¯¹å¤æ‚çš„ä¾‹å­ï¼š<a href="https://github.com/alibaba/higress/tree/main/plugins/wasm-go/extensions" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/higress/tree/main/plugins/wasm-go/extensions</a>
è¿™é‡Œæœ‰æ’ä»¶ sdk çš„è¯¦ç»†ä½¿ç”¨æ–‡æ¡£ï¼š
<a href="https://higress.io/zh-cn/docs/user/wasm-go.html" target="_blank" rel="noopener noreferrer">https://higress.io/zh-cn/docs/user/wasm-go.html</a>
è¿™ä¸ªæ’ä»¶ sdk æ˜¯åŸºäº Tetrate ç¤¾åŒºçš„ proxy-wasm-go-sdk å®ç°çš„ï¼Œå¦‚æœå…³æ³¨æ›´åº•å±‚çš„ç»†èŠ‚ï¼Œå¯ä»¥æŸ¥çœ‹ï¼š
<a href="https://github.com/tetratelabs/proxy-wasm-go-sdk" target="_blank" rel="noopener noreferrer">https://github.com/tetratelabs/proxy-wasm-go-sdk</a>
<a href="https://github.com/alibaba/higress/blob/main/plugins/wasm-go/pkg/wrapper/plugin_wrapper.go" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/higress/blob/main/plugins/wasm-go/pkg/wrapper</a>
å¯ä»¥çœ‹åˆ°ï¼ŒHigress çš„ wasm-go sdk æ˜¯é€šè¿‡ Go 1.18 å¼•å…¥çš„æ³›å‹ç‰¹æ€§å°è£…äº†æ’ä»¶ä¸Šä¸‹æ–‡å¤„ç†ç»†èŠ‚ï¼Œä»è€Œé™ä½æ’ä»¶å¼€å‘æ‰€éœ€ä»£ç é‡ï¼Œå¼€å‘è€…åªç”¨å…³å¿ƒé…ç½®è§£æå’Œè¯·æ±‚åº”ç­”å¤„ç†çš„é€»è¾‘ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç”Ÿæ•ˆæ’ä»¶">ç”Ÿæ•ˆæ’ä»¶<a href="#ç”Ÿæ•ˆæ’ä»¶" class="hash-link" aria-label="ç”Ÿæ•ˆæ’ä»¶çš„ç›´æ¥é“¾æ¥" title="ç”Ÿæ•ˆæ’ä»¶çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ç¼–å†™å®Œæˆä»£ç åï¼Œä¸€å…±æœ‰ä¸‰ä¸ªæ­¥éª¤ï¼Œå®ç°æ’ä»¶é€»è¾‘çš„ç”Ÿæ•ˆï¼š</p><ol><li>ç¼–è¯‘ï¼šå°† go ä»£ç ç¼–è¯‘æˆ Wasm æ ¼å¼æ–‡ä»¶</li><li>é•œåƒæ¨é€ï¼šå°† Wasm æ–‡ä»¶æ‰“åŒ…æˆ docker é•œåƒï¼Œå¹¶æ¨é€è‡³é•œåƒä»“åº“</li><li>ä¸‹å‘é…ç½®ï¼šåœ¨ K8s ä¸Šåˆ›å»º WasmPlugin èµ„æº</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç¼–è¯‘">ç¼–è¯‘<a href="#ç¼–è¯‘" class="hash-link" aria-label="ç¼–è¯‘çš„ç›´æ¥é“¾æ¥" title="ç¼–è¯‘çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>å°†ä¸Šé¢çš„ Go æ–‡ä»¶ main.go ç¼–è¯‘æˆ plugin.wasm</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tinygo build -o plugin.wasm -scheduler</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">none -target</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">wasi main.go</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="é•œåƒæ¨é€">é•œåƒæ¨é€<a href="#é•œåƒæ¨é€" class="hash-link" aria-label="é•œåƒæ¨é€çš„ç›´æ¥é“¾æ¥" title="é•œåƒæ¨é€çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ç¼–å†™ Dockerfile</p><div class="language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">FROM scratch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY plugin.wasm ./</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ„å»ºå¹¶æ¨é€ Docker é•œåƒ ï¼ˆè¿™é‡Œç¤ºä¾‹ç”¨çš„æ˜¯ Higress çš„å®˜æ–¹é•œåƒä»“åº“ï¼‰</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> build -t higress-registry.cn-hangzhou.cr.aliyuncs.com/plugins/demo:1.0.0 </span><span class="token builtin class-name">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> push higress-registry.cn-hangzhou.cr.aliyuncs.com/plugins/demo:1.0.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸‹å‘é…ç½®">ä¸‹å‘é…ç½®<a href="#ä¸‹å‘é…ç½®" class="hash-link" aria-label="ä¸‹å‘é…ç½®çš„ç›´æ¥é“¾æ¥" title="ä¸‹å‘é…ç½®çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ç¼–å†™ wasmplugin.yamlï¼Œé…ç½®è¯´æ˜ï¼š</p><ul><li>selectorï¼š é€‰ä¸­äº†é»˜è®¤å®‰è£…åœ¨ higress-system å‘½åç©ºé—´ä¸‹çš„ higress-gateway ç”Ÿæ•ˆè¿™ä»½æ’ä»¶</li><li>pluginConfigï¼šæ’ä»¶é…ç½®ï¼Œæœ€ç»ˆä¼šè¢«è½¬æ¢æˆä¸Šé¢ä»£ç ä¸­çš„ MyConfig å¯¹è±¡</li><li>urlï¼šå¡«å†™é•œåƒåœ°å€ï¼Œéœ€è¦ä»¥"oci://"å¼€å¤´</li></ul><p>é™¤äº†è¿™äº›é…ç½®å¤–ï¼Œè¿˜å¯ä»¥å®šä¹‰æ’ä»¶çš„æ‰§è¡Œé˜¶æ®µå’Œä¼˜å…ˆçº§ç­‰è¿›é˜¶é…ç½®ï¼Œå¯ä»¥å‚è€ƒ Istio API å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://istio.io/latest/docs/reference/config/proxy_extensions/wasm-plugin/" target="_blank" rel="noopener noreferrer">https://istio.io/latest/docs/reference/config/proxy_extensions/wasm-plugin/</a></p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># wasmplugin.yaml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> extensions.higress.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> WasmPlugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> request</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">block</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">defaultConfig</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">block_urls</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"swagger.html"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> oci</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">registry.cn</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">hangzhou.cr.aliyuncs.com/plugins/demo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">1.0.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>é€šè¿‡ kubectl åˆ›å»ºè¿™ä¸ªèµ„æº</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f wasmplugin.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æµ‹è¯•æ’ä»¶åŠŸèƒ½">æµ‹è¯•æ’ä»¶åŠŸèƒ½<a href="#æµ‹è¯•æ’ä»¶åŠŸèƒ½" class="hash-link" aria-label="æµ‹è¯•æ’ä»¶åŠŸèƒ½çš„ç›´æ¥é“¾æ¥" title="æµ‹è¯•æ’ä»¶åŠŸèƒ½çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>åŸºäºä¹‹å‰ç”Ÿæ•ˆçš„ quickstart.yamlï¼Œç›®å‰é›†ç¾¤ä¸­çš„ Ingress è®¿é—®æ‹“æ‰‘å¦‚ä¸‹æ‰€ç¤ºï¼š</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ing-topopng"><img loading="lazy" src="https://img.alicdn.com/imgextra/i3/O1CN0178hYAV1sBTSczmfAf_!!6000000005728-2-tps-646-605.png" alt="ing-topo.png" class="img_ev3q"><a href="#ing-topopng" class="hash-link" aria-label="ing-topopngçš„ç›´æ¥é“¾æ¥" title="ing-topopngçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>æœªç”Ÿæ•ˆæ’ä»¶çš„æƒ…å†µä¸‹ï¼š</p><ul><li>è¯·æ±‚<code>/foo</code> å°†è¿”å› HTTP åº”ç­” <code>"foo"</code></li><li>è¯·æ±‚<code>/bar</code> å°†è¿”å› HTTP åº”ç­” <code>"bar"</code></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å…¨å±€ç”Ÿæ•ˆ">å…¨å±€ç”Ÿæ•ˆ<a href="#å…¨å±€ç”Ÿæ•ˆ" class="hash-link" aria-label="å…¨å±€ç”Ÿæ•ˆçš„ç›´æ¥é“¾æ¥" title="å…¨å±€ç”Ÿæ•ˆçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åŸºäºä¸Šæ–‡ç”Ÿæ•ˆæ’ä»¶é˜¶æ®µï¼Œä¸‹å‘çš„ wasmplugin.yamlï¼Œç”Ÿæ•ˆæ’ä»¶åæ•ˆæœå¦‚ä¸‹ï¼š</p><ul><li>è¯·æ±‚<code>/foo</code> å°†è¿”å› HTTP åº”ç­” <code>"hello higress"</code></li><li>è¯·æ±‚<code>/bar</code> å°†è¿”å› HTTP åº”ç­” <code>"hello higress"</code></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="åŸŸåè·¯ç”±çº§ç”Ÿæ•ˆ">åŸŸå&amp;è·¯ç”±çº§ç”Ÿæ•ˆ<a href="#åŸŸåè·¯ç”±çº§ç”Ÿæ•ˆ" class="hash-link" aria-label="åŸŸå&amp;è·¯ç”±çº§ç”Ÿæ•ˆçš„ç›´æ¥é“¾æ¥" title="åŸŸå&amp;è·¯ç”±çº§ç”Ÿæ•ˆçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>å°† wasmplugin.yaml é…ç½®ä¿®æ”¹å¦‚ä¸‹ï¼š</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># wasmplugin.yaml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> extensions.higress.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> WasmPlugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> request</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">block</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">defaultConfig</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># è·Ÿä¸Šé¢ä¾‹å­ä¸€æ ·ï¼Œè¿™ä¸ªé…ç½®ä¼šå…¨å±€ç”Ÿæ•ˆï¼Œä½†å¦‚æœè¢«ä¸‹é¢è§„åˆ™åŒ¹é…åˆ°ï¼Œåˆ™ä¼šæ”¹ä¸ºæ‰§è¡Œå‘½ä¸­è§„åˆ™çš„é…ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token key atrule" style="color:#00a4db">block_urls</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"swagger.html"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token key atrule" style="color:#00a4db">matchRules</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># è·¯ç”±çº§ç”Ÿæ•ˆé…ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">ingress</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> default/foo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic"># default å‘½åç©ºé—´ä¸‹åä¸º foo çš„ ingress ä¼šæ‰§è¡Œä¸‹é¢è¿™ä¸ªé…ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">block_bodies</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"foo"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">ingress</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> default/bar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># default å‘½åç©ºé—´ä¸‹åä¸º bar çš„ ingress ä¼šæ‰§è¡Œä¸‹é¢è¿™ä¸ªé…ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">block_bodies</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"bar"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># åŸŸåçº§ç”Ÿæ•ˆé…ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">domain</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"*.example.com"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># è‹¥è¯·æ±‚åŒ¹é…äº†ä¸Šé¢çš„åŸŸå, ä¼šæ‰§è¡Œä¸‹é¢è¿™ä¸ªé…ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">block_bodies</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"foo"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"bar"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> oci</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">registry.cn</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">hangzhou.cr.aliyuncs.com/plugins/demo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">1.0.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åœ¨ pluginConfig ä¸­å¢åŠ äº† <code>_rules_</code>  è§„åˆ™åˆ—è¡¨ï¼Œè§„åˆ™ä¸­å¯ä»¥æŒ‡å®šåŒ¹é…æ–¹å¼ï¼Œå¹¶å¡«å†™å¯¹åº”ç”Ÿæ•ˆçš„é…ç½®:</p><ul><li><em>match_route</em>ï¼šåŒ¹é… Ingress ç”Ÿæ•ˆï¼ŒåŒ¹é…æ ¼å¼ä¸ºï¼šIngress æ‰€åœ¨å‘½åç©ºé—´ + "/" + Ingress åç§°</li><li><em>match_domain</em>ï¼šåŒ¹é…åŸŸåç”Ÿæ•ˆï¼Œå¡«å†™åŸŸåå³å¯ï¼Œæ”¯æŒé€šé…ç¬¦</li></ul><p>ç”Ÿæ•ˆè¿™ä»½ä¿®æ”¹åçš„é…ç½®ï¼š</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">f wasmplugin.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¯ä»¥çœ‹åˆ°æ•ˆæœå¦‚ä¸‹ï¼š</p><ul><li>è¯·æ±‚<code>/foo</code> å°†è¿”å› HTTP åº”ç­” <code>"hello foo"</code> (åŒ¹é…åˆ°ç¬¬ä¸€æ¡ rule)</li><li>è¯·æ±‚<code>/bar</code> å°†è¿”å› HTTP åº”ç­” <code>"hello bar"</code> (åŒ¹é…åˆ°ç¬¬äºŒæ¡ rule)</li><li>è¯·æ±‚<code>www.example.com</code> å°†è¿”å› HTTP åº”ç­” <code>"hello world"</code> ï¼ˆåŒ¹é…åˆ°ç¬¬ä¸‰æ¡ ruleï¼‰</li><li>è¯·æ±‚<code>www.abc.com</code> å°†è¿”å› HTTP åº”ç­” <code>"hello higress"</code> ï¼ˆæ²¡æœ‰åŒ¹é…çš„ ruleï¼Œä½¿ç”¨å…¨å±€é…ç½®ï¼‰</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ’ä»¶ç”Ÿæ•ˆåŸç†">æ’ä»¶ç”Ÿæ•ˆåŸç†<a href="#æ’ä»¶ç”Ÿæ•ˆåŸç†" class="hash-link" aria-label="æ’ä»¶ç”Ÿæ•ˆåŸç†çš„ç›´æ¥é“¾æ¥" title="æ’ä»¶ç”Ÿæ•ˆåŸç†çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i4/O1CN01PO4HYC1h7qYHonHHZ_!!6000000004231-2-tps-1100-537.png" alt="wasm.png" class="img_ev3q"></p><p>è¿™é‡Œå¯¹æ’ä»¶çš„ç”Ÿæ•ˆæœºåˆ¶ç®€å•åšä¸ªè¯´æ˜ï¼š</p><ol><li>ç”¨æˆ·å°†ä»£ç ç¼–è¯‘æˆ wasm æ–‡ä»¶</li><li>ç”¨æˆ·å°† wasm æ–‡ä»¶æ„å»ºæˆ docker é•œåƒ</li><li>ç”¨æˆ·å°† docker é•œåƒæ¨é€è‡³é•œåƒä»“åº“</li><li>ç”¨æˆ·åˆ›å»º WasmPlugin èµ„æº</li><li>Istio watch åˆ° WasmPlugin èµ„æºçš„å˜åŒ–</li><li>Higress Gateway ä¸­çš„ xDS proxy è¿›ç¨‹ä» Istio è·å–åˆ°é…ç½®ï¼Œå‘ç°æ’ä»¶çš„é•œåƒåœ°å€</li><li>xDS proxy ä»é•œåƒä»“åº“æ‹‰å–é•œåƒ</li><li>xDS proxy ä»é•œåƒä¸­æå–å‡º wasm æ–‡ä»¶</li><li>Higress Gateway ä¸­çš„ envoy è¿›ç¨‹ä» xDS proxy è·å–åˆ°é…ç½®ï¼Œå‘ç° wasm æ–‡ä»¶çš„æœ¬åœ°è·¯å¾„</li><li>envoy ä»æœ¬åœ°æ–‡ä»¶ä¸­åŠ è½½ wasm æ–‡ä»¶</li></ol><p>è¿™é‡Œ envoy è·å–é…ç½®å¹¶åŠ è½½ wasm æ–‡ä»¶ä½¿ç”¨åˆ°äº† ECDS (Extension Config Discovery Service)çš„æœºåˆ¶ï¼Œå®ç°äº† wasm æ–‡ä»¶æ›´æ–°ï¼Œç›´æ¥çƒ­åŠ è½½ï¼Œä¸ä¼šå¯¼è‡´ä»»ä½•è¿æ¥ä¸­æ–­ï¼Œä¸šåŠ¡æµé‡å®Œå…¨æ— æŸã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸‰ä¸ªé©å‘½æ€§çš„ç‰¹æ€§">ä¸‰ä¸ªé©å‘½æ€§çš„ç‰¹æ€§<a href="#ä¸‰ä¸ªé©å‘½æ€§çš„ç‰¹æ€§" class="hash-link" aria-label="ä¸‰ä¸ªé©å‘½æ€§çš„ç‰¹æ€§çš„ç›´æ¥é“¾æ¥" title="ä¸‰ä¸ªé©å‘½æ€§çš„ç‰¹æ€§çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ä¸Šé¢çš„ Wasm æ’ä»¶æœºåˆ¶ä¸ºç½‘å…³è‡ªå®šä¹‰æ’ä»¶å¼€å‘å¸¦æ¥äº†ä¸‰ä¸ªé©å‘½æ€§çš„ç‰¹æ€§ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç‰¹æ€§ä¸€æ’ä»¶ç”Ÿå‘½å‘¨æœŸå’Œç½‘å…³è§£è€¦">ç‰¹æ€§ä¸€ï¼šæ’ä»¶ç”Ÿå‘½å‘¨æœŸå’Œç½‘å…³è§£è€¦<a href="#ç‰¹æ€§ä¸€æ’ä»¶ç”Ÿå‘½å‘¨æœŸå’Œç½‘å…³è§£è€¦" class="hash-link" aria-label="ç‰¹æ€§ä¸€ï¼šæ’ä»¶ç”Ÿå‘½å‘¨æœŸå’Œç½‘å…³è§£è€¦çš„ç›´æ¥é“¾æ¥" title="ç‰¹æ€§ä¸€ï¼šæ’ä»¶ç”Ÿå‘½å‘¨æœŸå’Œç½‘å…³è§£è€¦çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>è¿™ä¸ªç‰¹æ€§ä¸»è¦å¾—ç›Šäº Istio çš„ WasmPlugin æœºåˆ¶è®¾è®¡ã€‚å¯ä»¥å’Œ K8s Nginx Ingress çš„æ’ä»¶æœºåˆ¶åšä¸ªå¯¹æ¯”ï¼š</p><blockquote><p>reference: <a href="https://github.com/kubernetes/ingress-nginx/blob/main/rootfs/etc/nginx/lua/plugins/README.md" target="_blank" rel="noopener noreferrer">https://github.com/kubernetes/ingress-nginx/blob/main/rootfs/etc/nginx/lua/plugins/README.md</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="installing-a-plugin">Installing a plugin<a href="#installing-a-plugin" class="hash-link" aria-label="Installing a pluginçš„ç›´æ¥é“¾æ¥" title="Installing a pluginçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>There are two options:</p><ul><li>mount your plugin into /etc/nginx/lua/plugins/<your></your> in the ingress-nginx pod</li><li>build your own ingress-nginx image like it is done in the <a href="https://github.com/ElvinEfendi/ingress-nginx-openidc/tree/master/rootfs/etc/nginx/lua/plugins/openidc" target="_blank" rel="noopener noreferrer">example</a> and install your plugin during image build</li></ul></blockquote><p>å¯ä»¥çœ‹åˆ° Nginx Ingress åŠ è½½è‡ªå®šä¹‰æ’ä»¶ï¼Œéœ€è¦å°† lua æ–‡ä»¶æŒ‚è½½è¿› podï¼Œæˆ–è€…åœ¨æ„å»ºé•œåƒæ—¶è£…å…¥ã€‚è¿™æ ·å°±å°†æ’ä»¶çš„ç”Ÿå‘½å‘¨æœŸè·Ÿç½‘å…³ç»‘å®šåœ¨ä¸€èµ·ï¼Œæ’ä»¶é€»è¾‘æ›´æ–°ï¼Œéœ€è¦å‘å¸ƒæ–°ç‰ˆæœ¬ï¼Œç½‘å…³ä¹Ÿéœ€è¦å‘å¸ƒæ–°ç‰ˆæœ¬æˆ–è€…é‡æ–°éƒ¨ç½²ã€‚
ä½¿ç”¨ WasmPlugin çš„æœºåˆ¶ï¼Œæ’ä»¶éœ€è¦å‘å¸ƒæ–°ç‰ˆæœ¬ï¼Œåªéœ€æ„å»ºæ’ä»¶è‡ªèº«çš„é•œåƒå¹¶è¿›è¡Œä¸‹å‘ç”Ÿæ•ˆï¼Œè€Œä¸”å¯ä»¥åŸºäºé•œåƒçš„ tag è¿›è¡Œæ’ä»¶çš„ç‰ˆæœ¬ç®¡ç†ã€‚è¿™æ ·æ’ä»¶å˜æ›´ï¼Œä¸ä»…æ— éœ€é‡æ–°éƒ¨ç½²ç½‘å…³ï¼Œç»“åˆ Envoy çš„ ECDS æœºåˆ¶å¯¹æµé‡ä¹Ÿæ˜¯å®Œå…¨æ— æŸã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç‰¹æ€§äºŒé«˜æ€§èƒ½çš„å¤šè¯­è¨€æ”¯æŒ">ç‰¹æ€§äºŒï¼šé«˜æ€§èƒ½çš„å¤šè¯­è¨€æ”¯æŒ<a href="#ç‰¹æ€§äºŒé«˜æ€§èƒ½çš„å¤šè¯­è¨€æ”¯æŒ" class="hash-link" aria-label="ç‰¹æ€§äºŒï¼šé«˜æ€§èƒ½çš„å¤šè¯­è¨€æ”¯æŒçš„ç›´æ¥é“¾æ¥" title="ç‰¹æ€§äºŒï¼šé«˜æ€§èƒ½çš„å¤šè¯­è¨€æ”¯æŒçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åŸºäº Wasm çš„èƒ½åŠ›ï¼Œå¯ä»¥ç”¨å¤šç§è¯­è¨€ç¼–å†™æ’ä»¶ï¼Œå¯¹å¼€å‘äººå‘˜æ›´åŠ å‹å¥½ã€‚å®ç°å¤šè¯­è¨€å¼€å‘æ’ä»¶çš„å¦ä¸€ç§æ–¹å¼æ˜¯åŸºäº RPC å’Œç½‘å…³è¿›ç¨‹é€šä¿¡çš„å¤–ç½®è¿›ç¨‹/æœåŠ¡æ’ä»¶ï¼Œè¿™ç§æ¨¡å¼ä¼šæœ‰é¢å¤–çš„ IO å¼€é”€ï¼Œå¹¶ä¸”é™„åŠ çš„è¿›ç¨‹/æœåŠ¡ä¹Ÿå¸¦æ¥é¢å¤–çš„è¿ç»´å¤æ‚åº¦ã€‚ç›®å‰å¤§å®¶å¯¹ Wasm æ’ä»¶çš„æ€§èƒ½æ¯”è¾ƒå…³å¿ƒï¼Œä»æˆ‘ä»¬çš„æµ‹è¯•æ•°æ®æ¥çœ‹ï¼ŒæŒ‡ä»¤æ‰§è¡Œæ€§èƒ½ç›¸æ¯”åŸç”Ÿçš„ C++ è¯­è¨€ç¡®å®æœ‰å·®è·ï¼Œä½†æ€§èƒ½å’Œ Lua æŒå¹³ï¼Œä¸”è¿œå¥½äºå¤–ç½®æ’ä»¶ã€‚
å¯¹äºä¸€æ®µé€»è¾‘ï¼š<code>å¾ªç¯æ‰§è¡Œ20æ¬¡è¯·æ±‚å¤´è®¾ç½®ï¼Œå¾ªç¯æ‰§è¡Œ20æ¬¡è¯·æ±‚å¤´è·å–ï¼Œå¾ªç¯æ‰§è¡Œ20æ¬¡è¯·æ±‚å¤´ç§»é™¤ã€‚</code>æˆ‘ä»¬å¯¹æ¯”äº†åˆ†åˆ«ç”¨ Lua å’Œä¸åŒè¯­è¨€å®ç°çš„ Wasm çš„å¤„ç†æ€§èƒ½ï¼Œä¸‹é¢æ˜¯å¯¹å•ä¸ªè¯·æ±‚å»¶æ—¶çš„å½±å“å¯¹æ¯”ï¼š</p><table><thead><tr><th><strong>å®ç°è¯­è¨€</strong></th><th><strong>è¯·æ±‚å»¶æ—¶å¢åŠ </strong></th></tr></thead><tbody><tr><td>Lua</td><td>0.20æ¯«ç§’</td></tr><tr><td>Wasm (C++)</td><td>0.19æ¯«ç§’</td></tr><tr><td>Wasm (Go)</td><td>0.20æ¯«ç§’</td></tr><tr><td>Wasm (Rust)</td><td>0.21æ¯«ç§’</td></tr><tr><td>Wasm (AssemblyScript)</td><td>0.21æ¯«ç§’</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç‰¹æ€§ä¸‰å®‰å…¨æ²™ç®±">ç‰¹æ€§ä¸‰ï¼šå®‰å…¨æ²™ç®±<a href="#ç‰¹æ€§ä¸‰å®‰å…¨æ²™ç®±" class="hash-link" aria-label="ç‰¹æ€§ä¸‰ï¼šå®‰å…¨æ²™ç®±çš„ç›´æ¥é“¾æ¥" title="ç‰¹æ€§ä¸‰ï¼šå®‰å…¨æ²™ç®±çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>Envoy ç›®å‰æ”¯æŒå¤šç§ Wasm çš„è¿è¡Œæ—¶ï¼Œä¾‹å¦‚ V8ï¼ŒWAMRï¼Œwasmtime ç­‰ç­‰ï¼Œè¿™äº›è¿è¡Œæ—¶å‡æä¾›äº†å®‰å…¨æ²™ç®±èƒ½åŠ›ï¼Œå³ Wasm æ’ä»¶ä¸­å‡ºç°äº†è®¿é—®ç©ºæŒ‡é’ˆã€å¼‚å¸¸æœªæ•è·ç­‰é€»è¾‘ï¼Œä¹Ÿä¸ä¼šä»¤ Envoy å®¿ä¸»è¿›ç¨‹ Crashã€‚å¹¶ä¸”å¯ä»¥é€šè¿‡é…ç½®ï¼Œåœ¨æ’ä»¶é€»è¾‘å‡ºç°å¼‚å¸¸åè¿›è¡Œ Fail Open å¤„ç†ï¼Œè·³è¿‡æ’ä»¶çš„æ‰§è¡Œé€»è¾‘ï¼Œå°†å¯¹ä¸šåŠ¡çš„å½±å“é™è‡³æœ€ä½ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¼€æºç¤¾åŒº">å¼€æºç¤¾åŒº<a href="#å¼€æºç¤¾åŒº" class="hash-link" aria-label="å¼€æºç¤¾åŒºçš„ç›´æ¥é“¾æ¥" title="å¼€æºç¤¾åŒºçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ç‰¹åˆ«æ„Ÿè°¢ Istio/Envoy ç¤¾åŒºçš„å‰ç½®å·¥ä½œï¼Œè®© Higress å¯ä»¥å®ç°å¯¹ Ingress èµ„æºå¯ç”¨ WasmPlugin ï¼Œå¢å¼ºäº† Ingress Controller çš„è‡ªå®šä¹‰æ‰©å±•èƒ½åŠ›ã€‚
ç‰¹åˆ«æ„Ÿè°¢ Tetrate ç¤¾åŒºå®ç°çš„ proxy-wasm-go-sdkï¼ŒHigress åœ¨è¿™ä¸ªåŸºç¡€ä¸Šå°è£…äº† wasm-go sdkï¼Œé™ä½äº†å¼€å‘æ’ä»¶çš„ä¸Šæ‰‹é—¨æ§›ã€‚
Higress å¯¹ Istio/Envoy çš„ Wasm èƒ½åŠ›åšäº†ä¸€äº› Bugfix çš„å·¥ä½œï¼Œç›®å‰å·²ç»éƒ½åˆå¹¶è¿›äº†ä¸Šæ¸¸ç¤¾åŒºã€‚åç»­çš„ä¸€äº› Feature èƒ½åŠ›ï¼Œä¹Ÿä¼šæŒç»­åå“ºä¸Šæ¸¸ç¤¾åŒºã€‚
åŒæ—¶æ¬¢è¿å¤§å®¶ä¸€èµ·ä¸º Higress çš„æ’ä»¶ä»¥åŠå…¶ä»–ç¤¾åŒºç”Ÿæ€æ·»ç –åŠ ç“¦ï¼Œä¸º Higress è´¡çŒ®è¯·å‚è€ƒæ–‡æ¡£ï¼š
<a href="https://higress.io/zh-cn/docs/developers/guide_dev.html" target="_blank" rel="noopener noreferrer">https://higress.io/zh-cn/docs/developers/guide_dev.html</a></p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[æ¬¢è¿æŠ¥åHigressé¦–æ¬¡çº¿ä¸‹Meetup]]></title>
            <link>https://higress.io/zh-cn/blog/first-meetup</link>
            <guid>https://higress.io/zh-cn/blog/first-meetup</guid>
            <pubDate>Tue, 22 Nov 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[çº¿ä¸‹MeetupæŠ¥å]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="https://img.alicdn.com/imgextra/i4/O1CN013pqDug1iTf1wdYIat_!!6000000004414-2-tps-800-8358.png" class="img_ev3q"></p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[é˜¿é‡Œå·´å·´é‡ç£…å¼€æºäº‘åŸç”Ÿç½‘å…³]]></title>
            <link>https://higress.io/zh-cn/blog/higress</link>
            <guid>https://higress.io/zh-cn/blog/higress</guid>
            <pubDate>Fri, 04 Nov 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[ä»‹ç»Higressçš„è¯ç”ŸèƒŒæ™¯ä¸å‘å±•å†ç¨‹]]></description>
            <content:encoded><![CDATA[<p>Higress æ˜¯ä¸€æ¬¾æ ‡å‡†åŒ–ã€é«˜é›†æˆã€æ˜“æ‰©å±•ã€çƒ­æ›´æ–°çš„äº‘åŸç”Ÿç½‘å…³ã€‚</p><p>Higress æºè‡ªé˜¿é‡Œå·´å·´å†…éƒ¨ç”µå•†ã€äº¤æ˜“ç­‰æ ¸å¿ƒç”Ÿäº§åœºæ™¯çš„å®è·µæ²‰æ·€ï¼Œéµå¾ª Ingress/Gateway API æ ‡å‡†ï¼Œå°†æµé‡ç½‘å…³ã€å¾®æœåŠ¡ç½‘å…³ã€å®‰å…¨ç½‘å…³ä¸‰åˆä¸€ï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šæ‰©å±•äº†æœåŠ¡ç®¡ç†æ’ä»¶ã€å®‰å…¨ç±»æ’ä»¶å’Œè‡ªå®šä¹‰æ’ä»¶ï¼Œé«˜åº¦é›†æˆ K8s å’Œå¾®æœåŠ¡ç”Ÿæ€ï¼ŒåŒ…æ‹¬ Nacos æ³¨å†Œå’Œé…ç½®ã€Sentinel é™æµé™çº§ç­‰èƒ½åŠ›ï¼Œå¹¶æ”¯æŒè§„åˆ™å˜æ›´æ¯«ç§’çº§ç”Ÿæ•ˆç­‰çƒ­æ›´æ–°èƒ½åŠ›ã€‚</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i1/O1CN01VYKTu922ZsiibaCml_!!6000000007135-2-tps-2178-1198.png" alt="image.png" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="higressçš„å‰ä¸–ä»Šç”Ÿ">Higressçš„å‰ä¸–ä»Šç”Ÿ<a href="#higressçš„å‰ä¸–ä»Šç”Ÿ" class="hash-link" aria-label="Higressçš„å‰ä¸–ä»Šç”Ÿçš„ç›´æ¥é“¾æ¥" title="Higressçš„å‰ä¸–ä»Šç”Ÿçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="è¯ç”ŸèƒŒæ™¯">è¯ç”ŸèƒŒæ™¯<a href="#è¯ç”ŸèƒŒæ™¯" class="hash-link" aria-label="è¯ç”ŸèƒŒæ™¯çš„ç›´æ¥é“¾æ¥" title="è¯ç”ŸèƒŒæ™¯çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>Higress çš„åˆ›å»ºæºäºé˜¿é‡Œå†…éƒ¨çš„â€œæœ¬åœ°ç”Ÿæ´»æˆ˜å½¹â€ï¼Œè¯¥æˆ˜å½¹å§‹äºâ€œæ”¯ä»˜å®2020åˆä½œä¼™ä¼´å¤§ä¼šâ€ï¼Œåœ¨æ­¤å¤§ä¼šä¸Šæ”¯ä»˜å®å®£å¸ƒå‡çº§ä¸ºæ•°å­—ç”Ÿæ´»å¼€æ”¾å¹³å°ã€‚è¯¥æˆ˜å½¹çš„æ ¸å¿ƒæŠ€æœ¯ç›®æ ‡ï¼Œæ˜¯å®ç°é˜¿é‡Œå·´å·´ä¸šåŠ¡åŸŸä¸èš‚èšä¸šåŠ¡åŸŸä¹‹é—´ RPC ç›´æ¥è°ƒç”¨ï¼Œä½†å› é˜¿é‡Œå·´å·´ä¸èš‚èšä¸šåŠ¡åŸŸç½‘ç»œæ˜¯éš”ç¦»çš„ï¼Œå³ç½‘ç»œæ˜¯ä¸é€šçš„ï¼Œå¾ˆè‡ªç„¶æƒ³åˆ°åˆ©ç”¨ç½‘å…³æ¥è§£å†³æ­¤é—®é¢˜ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æŠ€æœ¯é€‰å‹">æŠ€æœ¯é€‰å‹<a href="#æŠ€æœ¯é€‰å‹" class="hash-link" aria-label="æŠ€æœ¯é€‰å‹çš„ç›´æ¥é“¾æ¥" title="æŠ€æœ¯é€‰å‹çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åˆ©ç”¨ç½‘å…³æ¥è§£å†³é˜¿é‡Œå·´å·´ä¸èš‚èšè·¨ä¸šåŠ¡åŸŸ RPC äº’é€šé—®é¢˜ï¼Œé¦–å…ˆè¦å¯¹ç½‘å…³åšæŠ€æœ¯é€‰å‹ã€‚</p><p>ç›¸ä¿¡å¤§å®¶ä¹Ÿéƒ½æˆ–å¤šæˆ–å°‘çŸ¥é“ï¼Œé˜¿é‡Œå·´å·´å¼€æºçš„åå‘ä»£ç†ç¨‹åº Tengineã€‚Tengine åœ¨é˜¿é‡Œå†…éƒ¨ç»Ÿä¸€æ¥å…¥ç½‘å…³ AServer ä¸­è¢«ä½¿ç”¨ï¼Œæˆ‘ä»¬å›¢é˜Ÿå°±æ˜¯è´Ÿè´£å…¶å¼€å‘è¿ç»´ï¼ŒåŒæ—¶æˆ‘ä»¬å›¢é˜Ÿä¹Ÿåœ¨è´Ÿè´£é˜¿é‡Œå·´å·´ Service Mesh çš„è½åœ°ï¼Œä¸ç®¡æ˜¯å¯¹ Tengine è¿˜æ˜¯å¯¹ Istio + Envoy è¿™å¥—æ¶æ„éƒ½æ¯”è¾ƒç†Ÿæ‚‰ã€‚</p><p>åœ¨é€‰å‹æ—¶ï¼Œè™½ç„¶ä¹Ÿè°ƒç ”è¿‡ä¸€äº›å…¶ä»–çš„è½¯ä»¶ï¼Œä½†è€ƒè™‘åˆ°ç½‘å…³å¯¹æ€§èƒ½ã€å¯é æ€§çš„é«˜è¦æ±‚ï¼Œåœ¨ç»“åˆæˆ‘ä»¬è‡ªèº«çš„ç½‘å…³è¿ç»´ç»éªŒï¼Œå†³å®šçœ‹çœ‹ Tengine ä¸ Envoy æ˜¯å¦å¯ä»¥æ»¡è¶³æˆ‘ä»¬çš„ä¸šåŠ¡éœ€æ±‚ï¼Œåœ¨å¯¹æ¯”æ—¶æˆ‘ä»¬ç½—åˆ—äº†å››ä¸ªå…³é”®è¦ç‚¹ï¼Œå…¶å¯¹æ¯”å¦‚ä¸‹ï¼š</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i3/O1CN0154SFHA1geXCJT8KIm_!!6000000004167-2-tps-2568-888.png" alt="image.png" class="img_ev3q">
è¿™é‡Œæä¸€ä¸‹â€œä¸ºä»€ä¹ˆæˆ‘ä»¬è®¤ä¸ºé…ç½®çš„çƒ­æ›´æ–°ï¼Œæ˜¯éå¸¸é‡è¦çš„â€ï¼Ÿ</p><p>Tengine/Nginx çš„é…ç½®æ›´æ–°éœ€è¦ reloadï¼Œreload éœ€è¦é‡å¯ worker è¿›ç¨‹ï¼Œé‡å¯æ—¶ä¼šå¼•èµ·æµé‡æŠ–åŠ¨ï¼Œå¯¹é•¿è¿æ¥å½±å“å°¤ä¸ºæ˜æ˜¾ã€‚åœ¨ç½‘å…³çš„é›†ç¾¤è§„æ¨¡éå¸¸å¤§æ—¶ï¼Œæ›´æ˜¯ä¸èƒ½éšæ„çš„åš reloadï¼Œè¿™æ—¶å°±ä¼šå¼•å‘ä¸€ä¸ªçŸ›ç›¾ç‚¹ï¼šä¸šåŠ¡å‘ç½‘å…³æäº¤é…ç½®åï¼Œå¸Œæœ›èƒ½å¿«é€ŸéªŒè¯ï¼Œä½†å—é™äº reload æœºåˆ¶å’Œç¨³å®šæ€§è¦æ±‚ï¼Œæ— æ³•æ»¡è¶³ä¸šåŠ¡å¿«é€ŸéªŒè¯ä¸å¿«é€Ÿè¯•é”™çš„è¯‰æ±‚ã€‚</p><p>ç°åœ¨å·²ç»æœ‰å¾ˆå¤šä¸»æµåº”ç”¨é€‰æ‹©é‡‡ç”¨é•¿è¿æ¥ï¼ŒHTTP 1.1ä¸€èˆ¬é»˜è®¤ä¼šä½¿ç”¨Keep-Aliveå»ä¿æŒé•¿è¿æ¥ï¼Œåç»­HTTP 2ä»¥åŠHTTP 3ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œéšç€ç½‘ç»œåè®®çš„å‘å±•ï¼Œæœªæ¥ä½¿ç”¨é•¿è¿æ¥ä¼šå˜å¾—æ›´åŠ æ™®éã€‚è€Œé…ç½®çƒ­æ›´æ–°å¤©ç„¶å¯¹é•¿è¿æ¥éå¸¸å‹å¥½ã€‚</p><p>å¦‚ä½•è§£å†³è¿™ç‚¹å‘¢ï¼Ÿ</p><p>ä¸€æ˜¯é‡‡ç”¨ä¸¤å±‚ç½‘å…³ï¼Œå³æµé‡ç½‘å…³ + ä¸šåŠ¡ç½‘å…³ï¼›äºŒæ˜¯å®ç°ç½‘å…³åŸç”Ÿæ”¯æŒé…ç½®çƒ­æ›´æ–°ã€‚é™¤äº†å¯¹æ¯”ä¸åŒæ–¹æ¡ˆçš„ä¼˜åŠ£åŠ¿ï¼Œæˆ‘ä»¬ä¹Ÿè°ƒç ”äº† Envoy ä½œä¸ºç½‘å…³åœ¨ä¸šç•Œçš„è¶‹åŠ¿ï¼Œç»“è®ºæ˜¯ç›®å‰ Envoy ä½œä¸º K8s ä¸­çš„ Ingress Provider å¢é•¿æœ€å¿«çš„äº‹å®ï¼ˆIngress Provider æŒ‡ K8s Ingress è§„èŒƒå…·ä½“å®ç°ï¼Œå›  K8s Ingress è‡ªèº«åªæ˜¯è§„èŒƒå®šä¹‰ï¼Œæ˜¯ K8s ä¸‹å¤–éƒ¨æµé‡è¿›å…¥é›†ç¾¤å†…éƒ¨çš„ç½‘å…³è§„èŒƒå®šä¹‰ï¼‰ï¼Œæˆ‘ä»¬æœ€ç»ˆé€‰æ‹©äº† Envoy æ¥å®ç°ä¸¤å±‚ç½‘å…³ã€‚</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i1/O1CN01noxgsq1izikgjVavA_!!6000000004484-2-tps-2948-1054.png" alt="image.png" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å‘å±•å†ç¨‹">å‘å±•å†ç¨‹<a href="#å‘å±•å†ç¨‹" class="hash-link" aria-label="å‘å±•å†ç¨‹çš„ç›´æ¥é“¾æ¥" title="å‘å±•å†ç¨‹çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>Higressä»æœ€åˆç¤¾åŒºçš„ Istio + Envoyï¼Œåˆ°ç»å†é˜¿é‡Œå·´å·´å†…éƒ¨çš„è‡ªç ”æ‰©å±•ï¼Œå†åˆ°å¤§è§„æ¨¡ç”ŸæˆéªŒè¯ï¼Œæœ€åå®Œæˆå•†ä¸šåŒ–äº§å“çš„å‘å¸ƒï¼Œå…¶æ•´ä¸ªè¿‡ç¨‹ä»‹ç»å¦‚ä¸‹ï¼š</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i1/O1CN01ZzyYWg1mJoyzwgeoC_!!6000000004934-2-tps-2296-908.png" alt="image.png" class="img_ev3q">
ä¸‹é¢çš„ç« èŠ‚ä¼šå¯¹Higressçš„å„ä¸ªé˜¶æ®µåšè¿›ä¸€æ­¥çš„è¯¦ç»†è¯´æ˜ã€‚</p><h1>Higress (2020.05~2020.11)</h1><p>æ­¤é˜¶æ®µçš„å¤§ç›®æ ‡æ˜¯ä¸ºäº†æ»¡è¶³é›†å›¢ä¸èš‚èšRPCäº’é€šï¼Œé™ä½å…¨é“¾è·¯çš„RTï¼Œè§£å†³åŸs2sé“¾è·¯å› RTè¿‡é«˜å¸¦æ¥çš„ç”¨æˆ·ä½“éªŒå·®åŠæ— æ³•æ»¡è¶³æ›´å¤šé›†å›¢ä¸èš‚èšååŒåœºæ™¯è¦æ±‚ã€‚s2sé“¾è·¯æ˜¯èµ°å…¬ç½‘é“¾è·¯ï¼Œåè®®é‡‡ç”¨HTTPã€‚ä¸èš‚èšäº’é€šç½‘å…³çš„æ¶æ„å›¾å¦‚ä¸‹ï¼Œè¿™é‡Œä»¥ä¸Šæµ·äº‘å•å…ƒä¸ºèƒŒæ™¯è¯´æ˜ã€‚</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i2/O1CN01uEUUkR1Er4nkwYiOW_!!6000000000404-2-tps-2036-1088.png" alt="image.png" class="img_ev3q"></p><p>ä¸Šå›¾ä¸»è¦å±•ç¤ºçš„æ˜¯é›†å›¢ä¾§çš„æ¶æ„ï¼Œæœ€ç»ˆé‡‡ç”¨äº†Istio+Envoyçš„æ–¹æ¡ˆï¼Œåœ¨éƒ¨ç½²çš„æ—¶å€™åˆåˆ†æˆäº†å‡ºå£é›†ç¾¤å’Œå…¥å£é›†ç¾¤ã€‚ä¹‹æ‰€ä»¥æ‹†æˆä¸¤ä¸ªé›†ç¾¤ï¼Œä¸€æ–¹é¢æ˜¯å½“æ—¶ä¸¤è¾¹äº’è®¿ï¼Œèš‚èšè°ƒé›†å›¢çš„æµé‡è¦è¿œè¿œå¤§äºé›†å›¢è°ƒèš‚èšçš„æµé‡ï¼Œä¸Šä¸‹è¡Œç‰¹åˆ«ä¸å‡ç­‰ï¼›å¦ä¸€æ–¹é¢æ˜¯åˆ†å¼€ä¹‹åä¸¤ä¸ªé›†ç¾¤å¯ä»¥å„è‡ªç»´æŠ¤ï¼Œç¨³å®šæ€§ä¼šæ›´å¥½ã€‚</p><p>Higress ä»å¼€å§‹ç«‹é¡¹åˆ°å®Œæˆç¬¬ä¸€æœŸç ”å‘ï¼Œç½‘å…³æ”¹é€ çš„æ ¸å¿ƒå·¥ä½œå·®ä¸å¤šä¸¤ä¸ªäººæŠ•å…¥äº†ä¸€ä¸ªåŠæœˆå·¦å³ï¼Œå…¶ä¸­è¿˜æ¶‰åŠåˆ°å¤§é‡ç½‘ç»œã€å®‰å…¨ç­‰åè°ƒéƒ¨é—¨çš„å·¥ä½œã€‚Higressæ¶æ„å¹¶æ²¡æœ‰å®Œå…¨æŒ‰ç…§ç¤¾åŒºæ–¹æ¡ˆæ¥è®¾è®¡ï¼Œç¤¾åŒºç‰ˆæœ¬ä¸­é…ç½®å˜æ›´å’ŒæœåŠ¡å‘ç°ä½¿ç”¨çš„æ˜¯K8sï¼Œåœ¨é˜¿é‡Œå†…éƒ¨åºå¤§çš„æœåŠ¡è§„æ¨¡åŠé…ç½®é‡ä¸‹ç¤¾åŒºåŸç”Ÿæ–¹æ¡ˆä¸ç®¡åœ¨ç¨³å®šæ€§åŠæ€§èƒ½ä¸Šéƒ½æ— æ³•æ»¡è¶³è¦æ±‚ï¼Œå› æ­¤é˜¿é‡Œè¿™å¥—æ–¹æ¡ˆé‡ç‚¹å¯¹æœåŠ¡å‘ç°ã€é…ç½®å­˜å‚¨ç»„ä»¶åšäº†æ›¿æ¢ï¼ŒåŠä¼˜åŒ–xDSæ¨é€æ€§èƒ½ã€‚</p><p>Higress ä¸Šçº¿åï¼Œé¡ºåˆ©è¾¾æˆäº†æœ€åˆçš„ä¸šåŠ¡è¯‰æ±‚ï¼Œç›®å‰èš‚èšäº’é€šç½‘å…³é“¾è·¯å·²ç»æˆä¸ºé›†å›¢ä¸èš‚èšäº’é€šçš„é¦–é€‰æ–¹æ¡ˆï¼Œä¸€äº›æ”¯ä»˜é“¾è·¯ä¹Ÿè¿ç§»åˆ°äº†è¯¥æ–¹æ¡ˆï¼Œä¾‹å¦‚å……å€¼ä¸­å¿ƒç­‰ï¼Œå…·ä½“è¾¾åˆ°çš„æˆæœç®€è¿°å¦‚ä¸‹ï¼š</p><ul><li>èš‚èšè°ƒç”¨é›†å›¢é“¾è·¯ç›¸æ¯”åŸé“¾è·¯RTé™ä½50%ï¼Œç½‘å…³è‡ªèº«RT 0.3msã€‚</li><li>HigressæˆåŠŸå¤åˆ¶åˆ°é›†å›¢ä¸èš‚èšçš„æ¶ˆæ¯äº’é€šï¼Œç›®å‰é›†å›¢ä¸èš‚èšçš„æ¶ˆæ¯äº’é€šä¹Ÿæ˜¯èµ°çš„Higress Tripleé“¾è·¯ã€‚</li><li>å¾®æœåŠ¡ç½‘å…³ä»5æœˆä»½ä¸Šçº¿ï¼Œç›®å‰å·²ç»æˆä¸ºé›†å›¢ä¸èš‚èšä¸œè¥¿å‘æµé‡çš„æ ¸å¿ƒé“¾è·¯ï¼Œé£çŒªã€æ‰‹æ·˜ã€å£ç¢‘ã€é¥¿äº†ä¹ˆã€1688ã€éƒ¨åˆ†å¯¼è´­åº”ç”¨ã€å•†å“åº“ã€è¯„ä»·ç­‰ä¸šåŠ¡å·²æˆåŠŸä¸Šçº¿ï¼Œè€Œä¸”åœ†æ»¡æ”¯æ’‘äº†618å¤§ä¿ƒã€æ”¯ä»˜å®717å¤è‡³å¤§ä¿ƒã€‚</li><li>åœ¨2020åŒ11å¤§ä¿ƒæ¯ç§’ æ•°åä¸‡ çš„è¯·æ±‚æµé‡ï¼Œåœ†æ»¡æ”¯æ’‘äº†åŒ11åŸå¸‚ç”Ÿæ´»ç‹‚æ¬¢èŠ‚çš„äº’åŠ¨ä¼šåœºã€‚</li><li>åœ¨æŠ€æœ¯ä¾§å®Œæˆäº†Higressåœ¨ä¸œè¥¿å‘æµé‡åˆ†å‘çš„æ¢ç´¢ã€‚</li></ul><h1>Higress (2020.12~2021.10)</h1><p>éšç€é˜¿é‡Œå·´å·´ä¸Šäº‘æˆ˜å½¹çš„æ¨è¿›ï¼Œè¶Šæ¥è¶Šå¤šçš„åœºæ™¯æ‰¾åˆ°æˆ‘ä»¬ã€‚æ¯”å¦‚äº‘ä¸Šäº‘ä¸‹ä¸šåŠ¡äº’é€šï¼Œç”±äº Tengine æœåŠ¡ç®¡ç†å¼±å¯¼è‡´é˜¿é‡Œå†…éƒ¨å¤§é‡äºŒå±‚å¾®æœåŠ¡ç½‘å…³éœ€è¦æ”¶æ•›ï¼Œè¿™å°±éœ€è¦ä»ä¸šåŠ¡ä¸Šåš Tengine+Envoy ä¸¤å±‚ç½‘å…³çš„æ¼”è¿›ï¼Œæ‰¿æ‹…å—åŒ—å‘ç½‘å…³æµé‡ã€‚åœ¨ 2020 å¹´ 12 æœˆä»½ï¼Œå›¢é˜Ÿå¼€å§‹äº†Higress æ¶æ„çš„ç»§ç»­æ¼”è¿›ï¼Œä»¥ä¼˜é…·åœºæ™¯ä¸ºä¾‹çš„æ¼”è¿›è¿‡ç¨‹å¦‚ä¸‹å›¾ï¼š</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i1/O1CN01t1RGjj1RpKIIm5zQU_!!6000000002160-2-tps-1614-1194.png" alt="image.png" class="img_ev3q"></p><p>Higress  å—åŒ—å‘çš„æ¶æ„å›¾å¦‚ä¸‹ï¼š</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i1/O1CN01B2guUL1Q8RauU7pCo_!!6000000001931-2-tps-2390-1242.png" alt="image.png" class="img_ev3q"></p><p>åœ¨ä¸¤å±‚æ¶æ„ä¸­ï¼ŒHigress ç½‘å…³æ›´å¤šæ‰¿æ‹…äº†å¾®æœåŠ¡ç½‘å…³å’Œå¾®æœåŠ¡æ²»ç†çš„éœ€æ±‚ï¼Œå’Œ Tengine æµé‡ç½‘å…³å®Œæˆäº†æ•´åˆã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹é‡Œï¼Œå›¢é˜Ÿæ”¯æ’‘ä¼˜é…·å†…éƒ¨å¤šä¸ªäºŒå±‚å¾®æœåŠ¡ç½‘å…³ç»Ÿä¸€çš„å·¥ä½œï¼Œå¤§å¹…æå‡äº†æ€§èƒ½å’Œè¿ç»´æ•ˆç‡ã€‚</p><p>åœ¨è¿™ä¸€é˜¶æ®µï¼ŒHigress Gateway å®ç°äº†ä¸œè¥¿å‘ã€å—åŒ—å‘å…¨åŸŸæµé‡çš„è°ƒåº¦åˆ†å‘ï¼Œä¸œè¥¿å‘ä¸Šä¸ä»…æ”¯æŒè·¨ä¸šåŠ¡åŸŸçš„èš‚èš RPC äº’é€šï¼Œä¹Ÿæ‰©å±•åˆ°äº†æ··åˆäº‘çš„äº‘ä¸Šäº‘ä¸‹ RPC äº’é€šåœºæ™¯ï¼Œè¦†ç›–é’‰é’‰æ–‡æ¡£ã€é˜¿é‡Œè§†é¢‘äº‘ã€è¾¾æ‘©é™¢çš„åº—å°èœœã€æ™ºæ…§æ•°å­—äººç­‰ã€‚è¯¥é˜¶æ®µçš„ä¸šåŠ¡å¤§å›¾å¦‚ä¸‹ï¼ˆäº‘ä¸Šäº‘ä¸‹äº’é€šåœºæ™¯ï¼Œä»¥é’‰é’‰ä¸ºä¾‹è¯´æ˜ï¼‰ï¼š</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i4/O1CN01VQ51BO2A5D7oqbLG6_!!6000000008151-2-tps-2370-1200.png" alt="image.png" class="img_ev3q"></p><p>éšç€ Higress Gateway è¦†ç›–çš„ä¸šåŠ¡åœºæ™¯è¶Šæ¥å¤šï¼Œåœ¨è·Ÿä¼˜é…·æŒç»­åˆä½œçš„è¿‡ç¨‹ä¸­ï¼ŒåŒæ–¹å›¢é˜Ÿä¸çº¦è€ŒåŒæå‡ºäº†ä¸€ä¸ªè®¾æƒ³ï¼šTengine Gatewayï¼ˆæ‰¿æ‹…æµé‡ç½‘å…³è§’è‰²ï¼‰ + Higress Gatewayï¼ˆæ‰¿æ‹…å¾®æœåŠ¡ç½‘å…³è§’è‰²ï¼‰çš„ä¸¤å±‚ç½‘å…³æ˜¯å¦å¯ä»¥åˆå¹¶ä¸ºä¸€å±‚ Higress Gatewayï¼Ÿ</p><p>æˆ‘ä»¬å¯¹è¿™ä¸€æƒ³æ³•åšäº†è°ƒç ”ï¼Œç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œå¹¶ä¸”å½“æ—¶å¤§å®¶ä¹Ÿåˆä½œè®¾è®¡äº†æ–°çš„æ¶æ„æ–¹æ¡ˆï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i2/O1CN01DMqpay1COYubY2QrN_!!6000000000071-2-tps-2394-1250.png" alt="image.png" class="img_ev3q"></p><p>è™½ç„¶ç”±äºå„ç§å„æ ·çš„åŸå› ï¼Œè¿™ä¸ªæ–¹æ¡ˆæœ€ç»ˆæ²¡æœ‰è·Ÿä¼˜é…·ç»§ç»­å¾€ä¸‹æ¨è¿›ã€‚ä½†è¿™ä¸ªæ¼”è¿›æ–¹å‘è®©å›¢é˜Ÿæ˜ç¡®äº†ç½‘å…³æ–°çš„å‘å±•è¶‹åŠ¿ï¼š<strong>åœ¨ä»¥ K8s ä¸»å¯¼çš„å®¹å™¨åŒ–èƒŒæ™¯ä¸‹ï¼Œç”±äºK8s é›†ç¾¤å†…å¤–ç½‘ç»œçš„å¤©ç„¶éš”ç¦»æ€§ï¼Œç”¨æˆ·éœ€è¦ä¸€æ¬¾å…¼é¡¾é«˜æ€§èƒ½ä¸å®‰å…¨æ€§ï¼Œä»¥åŠå¼ºå¤§æœåŠ¡æ²»ç†èƒ½åŠ›çš„å…¥å£ç½‘å…³ã€‚è¿™ä¹Ÿä¸ºåç»­å›¢é˜Ÿå°†æŠ€æœ¯æ²‰æ·€å˜æˆäº‘äº§å“ã€æ¨è¿›Higressçš„è¯ç”Ÿæ‰“ä¸‹äº†åŸºç¡€ã€‚</strong></p><p>2021 å¹´ï¼Œé˜¿é‡Œå·´å·´å¼€å¯äº†ä¸­é—´ä»¶ä¸‰ä½ä¸€ä½“æˆ˜å½¹ï¼Œç›®æ ‡æ˜¯ç”¨äº‘äº§å“æ”¯æ’‘é›†å›¢ä¸šåŠ¡ã€‚<strong>æˆ‘ä»¬å¼€å§‹å°†å­µåŒ–æˆç†Ÿçš„HigressæŠ€æœ¯æ²‰æ·€ä¸ºäº‘äº§å“ï¼Œå³ç›®å‰é˜¿é‡Œäº‘ä¸Šæä¾›çš„ MSE äº‘åŸç”Ÿç½‘å…³</strong>ï¼Œä¸€æ–¹é¢é¢å‘å¹¿å¤§çš„å…¬æœ‰äº‘ç”¨æˆ·æä¾›æ‰˜ç®¡çš„ç½‘å…³æœåŠ¡ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿå¯¹å†…æœåŠ¡é›†å›¢ã€‚MSE äº‘åŸç”Ÿç½‘å…³çš„æŠ€æœ¯æ¶æ„ç®€å›¾å¦‚ä¸‹ï¼š</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i1/O1CN01jCUMA11It93SO68gE_!!6000000000950-2-tps-1570-1262.png" alt="image.png" class="img_ev3q"></p><h1>Higress (2021.11~2022.11)</h1><p>éšç€Higressæˆä¸ºäº‘äº§å“æœåŠ¡äºæ›´å¤šå¤–éƒ¨ç”¨æˆ·ï¼Œæˆ‘ä»¬é€æ­¥å‘ç°ç”¨æˆ·å¯¹Higressæå‡ºäº†æ›´é«˜çš„è¦æ±‚ï¼Œå…¶ä¸­åé¦ˆè¾ƒå¤šçš„å¤§çš„éœ€æ±‚ç‚¹æ˜¯æ’ä»¶æ‰©å±•ã€Wafé˜²æŠ¤ã€å¤šæ³¨å†Œä¸­å¿ƒã€Nginx Ingressæ³¨è§£å…¼å®¹ä»¥åŠHTTPè½¬Dubboåè®®ï¼Œå½“ç„¶ä¹Ÿæœ‰å¾ˆå¤šå°çš„éœ€æ±‚ç‚¹åœ¨æ­¤å°±ä¸ä¸€ä¸€åˆ—å‡ºï¼Œå› æ­¤è¯¥é˜¶æ®µæˆ‘ä»¬é‡ç‚¹å‘åŠ›åœ¨ä¸Šè¿°ç”¨æˆ·åé¦ˆçš„é«˜é¢‘éœ€æ±‚ã€‚</p><p>Higress æä¾›çš„æ’ä»¶å¸‚åœºï¼Œå…¶ä¸€é˜¶æ®µæ”¯æŒWasmæ’ä»¶ï¼Œæ»¡è¶³è¿½æ±‚é«˜æ€§èƒ½ã€é«˜å®‰å…¨çš„ç”¨æˆ·å¯¹ç½‘å…³çš„æ‰©å±•è¯‰æ±‚ï¼ŒäºŒé˜¶æ®µä¼šæ”¯æŒLuaæ’ä»¶ï¼Œæ»¡è¶³ä¼ ç»Ÿç”¨æˆ·ä½¿ç”¨Luaçš„æ‰©å±•çš„è¯‰æ±‚ï¼Œå¦‚Nginxç”¨æˆ·ï¼Œä¸‰é˜¶æ®µä¼šæ”¯æŒè¿›ç¨‹å¤–æ’ä»¶ï¼Œæ»¡è¶³å¤šè¯­è¨€ç”¨æˆ·è¯‰æ±‚ï¼Œå°¤å…¶æ˜¯Javaç”¨æˆ·å› ç°é˜¶æ®µJavaç¤¾åŒºå¯¹WebAssemblyæ”¯æŒå°šä¸å®Œå–„ä½†åˆå¸Œæœ›å¯¹ç½‘å…³è¿›è¡Œæ‰©å±•çš„è¯‰æ±‚ã€‚</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i3/O1CN01j4BOm725DO7A6PdWS_!!6000000007492-2-tps-1424-1282.png" alt="image.png" class="img_ev3q"></p><p>Higress ä¹Ÿæ”¯æŒäº†Nginx Ingressæ³¨è§£å¹³æ»‘è¿ç§»çš„èƒ½åŠ›ï¼Œæ»¡è¶³éƒ¨åˆ†ç”¨æˆ·æœŸæœ›è¿ç§»åˆ°Higressä½†åˆä¸å¸Œæœ›é‡æ–°é…ç½®ç½‘å…³çš„è¯‰æ±‚ï¼ŒåŒæ—¶<strong>Higressæ‰“ç ´äº†Nginx Ingressåªèƒ½å…³è”å•ä¸ªK8sé›†ç¾¤çš„é™åˆ¶ï¼Œæ”¯æŒå…³è”å¤šä¸ªK8sé›†ç¾¤ï¼Œå³å¯ä»¥å°†Higressä½œä¸ºç»Ÿä¸€æ¥å…¥ç½‘å…³ä½¿ç”¨ï¼ŒåŒæ—¶åˆå¯ä»¥äº«å—Ingressçš„çº¢åˆ©</strong>ã€‚</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i2/O1CN01M65eMf1PZB6HdQsOt_!!6000000001854-2-tps-2480-1126.png" alt="image.png" class="img_ev3q"></p><p>å¯¹äºä¼ ç»Ÿä½¿ç”¨Dubboçš„å¾®æœåŠ¡ç”¨æˆ·å¸Œæœ›ä½¿ç”¨åŸç”ŸRPCæ–¹å¼æš´éœ²å¯¹å¤–æœåŠ¡ï¼Œä½†é€šå¸¸æä¾›å¤–éƒ¨è®¿é—®çš„æœåŠ¡ä»¥ä½¿ç”¨HTTPä¸ºä¸»ï¼Œä¸ºäº†å¸®åŠ©Dubboç”¨æˆ·é™ä½æœåŠ¡æš´éœ²çš„å¼€å‘æˆæœ¬ï¼ŒHigressæä¾›äº†HTTPè½¬Dubboåè®®åŠŸèƒ½ï¼Œä¸”é€šè¿‡Consoleä¸ºç”¨æˆ·æä¾›ç™½å±åŒ–çš„é…ç½®æ–¹å¼ï¼Œ<strong>æŸå®¢æˆ·ä½¿ç”¨ååé¦ˆâ€œè¿™æ˜¯ä¸šç•Œå®Œæˆåº¦æœ€é«˜çš„HTTPè½¬Dubboåè®®â€åŠŸèƒ½</strong>ã€‚</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i3/O1CN013yp9rz202KTX6AkAa_!!6000000006791-2-tps-2356-1280.png" alt="image.png" class="img_ev3q"></p><p>åœ¨äº‘åŸç”Ÿçš„æµªæ½®ä¸‹ï¼Œå¼€æºå·²ç»æˆä¸ºè½¯ä»¶å‘å±•çš„å¿…ç„¶è¶‹åŠ¿ä¸å¿«é€Ÿè·¯å¾„ï¼Œå› ä¸ºç¤¾åŒºçš„åŠ›é‡æ˜¯éå¸¸å¼ºå¤§çš„ã€‚å› æ­¤æˆ‘ä»¬å°†
è¿™å¥—ç»è¿‡å†…éƒ¨å®è·µæ²‰æ·€ä¸‹æ¥çš„ç½‘å…³æ–¹æ¡ˆHigressæ­£å¼å¯¹å¤–å¼€æºï¼Œä»¥Kubernetes Ingressç½‘å…³ä¸ºå¥‘æœºå¸¦æ¥äº†æµé‡ç½‘å…³ä¸å¾®æœåŠ¡ç½‘å…³èåˆçš„å¯èƒ½æ€§ï¼Œç»“åˆé˜¿é‡Œå†…éƒ¨å®è·µæ²‰æ·€Higresså®ç°äº†æµé‡ç½‘å…³ + å¾®æœåŠ¡ç½‘å…³ + å®‰å…¨ç½‘å…³ä¸‰åˆä¸€çš„é«˜é›†æˆèƒ½åŠ›ï¼ŒåŒæ—¶æ·±åº¦é›†æˆäº†Dubboã€Nacosã€Sentinelç­‰ï¼Œèƒ½å¤Ÿå¸®åŠ©ç”¨æˆ·æå¤§çš„é™ä½ç½‘å…³çš„éƒ¨ç½²åŠè¿ç»´æˆæœ¬ï¼Œè€Œä¸”èƒ½åŠ›ä¸æ‰“æŠ˜ã€‚</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i2/O1CN01ad1fKt1toEafyw0GN_!!6000000005948-2-tps-1734-1360.png" alt="image.png" class="img_ev3q"></p><h1>Higress æœªæ¥å±•æœ›</h1><p>è™½ç„¶ç›®å‰äº‘åŸç”Ÿå·²ç»æˆä¸ºå¿…ç„¶è¶‹åŠ¿ï¼Œä½†ç°å®æ˜¯æœ‰å¾ˆå¤§ä¸€éƒ¨åˆ†ç”¨æˆ·å¤„äºè¿ç§»ä¸Šäº‘çš„è¿‡ç¨‹ä¸­ï¼Œåœ¨ä»ä¼ ç»Ÿæ¶æ„å‘ä»¥Kubernetes ä¸ºä»£è¡¨çš„å®¹å™¨åŒ–äº‘åŸç”Ÿæ¶æ„è¿ç§»ï¼Œå¯é¢„è§è¿™åœ¨æœªæ¥å¾ˆé•¿ä¸€æ®µæ—¶é—´ä¼šä¸€ç›´æŒç»­ï¼Œå› æ­¤ Higress åç»­ä¼šé‡ç‚¹æ”¯æŒé Kubernetes éƒ¨ç½²æ¶æ„ï¼Œä»¥ Higress + Nacos çš„ç»„åˆå½¢å¼ä¸ºç”¨æˆ·æä¾›æœ€å°é›†è¿è¡Œç¯å¢ƒï¼ŒåŒæ—¶æ»¡è¶³ç”¨æˆ·æœåŠ¡æ³¨å†Œã€é…ç½®ç®¡ç†ã€å¾®æœåŠ¡æ²»ç†çš„è¯‰æ±‚ã€‚</p><p>åœ¨ä»¥ Kubernetes ä¸ºä»£è¡¨çš„å®¹å™¨åŒ–äº‘åŸç”Ÿæ–¹å‘ï¼Œæˆ‘ä»¬åœ¨å…¼å®¹å¥½ç°æœ‰ Ingress æ ‡å‡†çš„åŸºç¡€ä¸Šï¼Œä¼šé‡ç‚¹å‘åŠ›ä¸‹ä¸€ä»£çš„Ingress æ ‡å‡† Gateway APIï¼Œåˆ©ç”¨ Gateway API å¸¦æ¥çš„å¥‘æœºæ‰“é€šå—åŒ—å‘ä¸ä¸œè¥¿å‘çš„å…¨åŸŸæµé‡è°ƒåº¦ï¼Œå¸®åŠ©ç”¨æˆ·ä½¿ç”¨ä¸€å¥—æ¶æ„æ¶æ„åŒæ—¶ç®¡ç†å¤–éƒ¨ä¸å†…éƒ¨æµé‡ï¼Œé™ä½éƒ¨ç½²è¿ç»´æˆæœ¬ã€æå‡å¼€å‘åŠè¿ç»´æ•ˆç‡ã€‚</p>]]></content:encoded>
        </item>
    </channel>
</rss>