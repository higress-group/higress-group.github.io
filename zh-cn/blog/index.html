<!doctype html>
<html lang="zh-CN" dir="ltr" class="blog-wrapper blog-list-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Blog | Higress</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://higress.io/zh-cn/img/higress_logo_small.png"><meta data-rh="true" name="twitter:image" content="https://higress.io/zh-cn/img/higress_logo_small.png"><meta data-rh="true" property="og:url" content="https://higress.io/zh-cn/blog"><meta data-rh="true" name="docusaurus_locale" content="zh-cn"><meta data-rh="true" name="docsearch:language" content="zh-cn"><meta data-rh="true" name="keywords" content="higress,higresså®˜ç½‘,äº‘åŸç”Ÿç½‘å…³"><meta data-rh="true" property="og:title" content="Blog | Higress"><meta data-rh="true" name="description" content="Blog"><meta data-rh="true" property="og:description" content="Blog"><meta data-rh="true" name="docusaurus_tag" content="blog_posts_list"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_posts_list"><link data-rh="true" rel="icon" href="/zh-cn/img/higress_logo_small.png"><link data-rh="true" rel="canonical" href="https://higress.io/zh-cn/blog"><link data-rh="true" rel="alternate" href="https://higress.io/en-us/blog" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://higress.io/zh-cn/blog" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://higress.io/blog" hreflang="default"><link data-rh="true" rel="alternate" href="https://higress.io/blog" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/zh-cn/blog/rss.xml" title="Higress RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/zh-cn/blog/atom.xml" title="Higress Atom Feed">





<link rel="stylesheet" href="//g.alicdn.com/mamba/assets/0.0.19/mse-arc-ui.min.css">
<script src="//g.alicdn.com/mamba/assets/0.0.19/mse-arc-ui.min.js"></script>
<script src="https://www.googletagmanager.com/gtag/js?id=G-YHS75WKFBR" async></script><link rel="stylesheet" href="/zh-cn/assets/css/styles.e4fbdaa0.css">
<link rel="preload" href="/zh-cn/assets/js/runtime~main.08db1247.js" as="script">
<link rel="preload" href="/zh-cn/assets/js/main.7c0a88af.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="è·³åˆ°ä¸»è¦å†…å®¹"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">è·³åˆ°ä¸»è¦å†…å®¹</a></div><nav aria-label="ä¸»å¯¼èˆª" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="åˆ‡æ¢å¯¼èˆªæ " aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/zh-cn/"><div class="navbar__logo"><img src="//img.alicdn.com/imgextra/i1/O1CN01I7WjVs1K33EQjInid_!!6000000001107-2-tps-960-290.png" alt="Higress logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="//img.alicdn.com/imgextra/i1/O1CN01I7WjVs1K33EQjInid_!!6000000001107-2-tps-960-290.png" alt="Higress logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/zh-cn/">é¦–é¡µ</a><a class="navbar__item navbar__link" href="/zh-cn/docs/overview/what-is-higress">æ–‡æ¡£</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Higress ä¼ä¸šç‰ˆ</a><ul class="dropdown__menu"><li><a href="https://www.aliyun.com/product/aliware/mse?spm=higress-website.topbar.0.0.0" target="_blank" rel="noopener noreferrer" class="dropdown__link">ä¼ä¸šç‰ˆè¯´æ˜</a></li><li><a href="https://free.aliyun.com/?searchKey=äº‘åŸç”Ÿç½‘å…³&amp;spm=higress-website.topbar.0.0.0" target="_blank" rel="noopener noreferrer" class="dropdown__link">å…è´¹è¯•ç”¨</a></li></ul></div><a href="https://survey.aliyun.com/apps/zhiliao/SmDQwdihe" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">æ¡ˆä¾‹å¾é›†</a><a class="navbar__item navbar__link" href="/zh-cn/docs/developers/developers_dev">å¼€å‘è€…</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/zh-cn/blog">åšå®¢</a><a class="navbar__item navbar__link" href="/zh-cn/community">ç¤¾åŒº</a><a href="https://github.com/alibaba/higress/releases" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">ä¸‹è½½</a><a href="http://demo.higress.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">æ§åˆ¶å°æ ·ä¾‹</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_DSK9"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>ä¸­</a><ul class="dropdown__menu"><li><a href="/en-us/blog" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en-US">En</a></li><li><a href="/zh-cn/blog" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh-CN">ä¸­</a></li></ul></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="æœ€è¿‘åšæ–‡å¯¼èˆª"><div class="sidebarItemTitle_pO2u margin-bottom--md">æ‰€æœ‰æ–‡ç« </div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-cn/blog/pilot-debug">æ•™ç¨‹ï¼šå¦‚ä½•åœ¨æœ¬åœ°å¼€å‘å’Œè°ƒè¯• Higress Pilot</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-cn/blog/console-dev">æ•™ç¨‹ï¼šå¦‚ä½•åœ¨æœ¬åœ°å¼€å‘å’Œè°ƒè¯• Higress æ§åˆ¶å°</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-cn/blog/admin-sdk-intro">å¦‚ä½•ä½¿ç”¨ Higress Admin SDK è¿›è¡Œé…ç½®ç®¡ç†</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-cn/blog/higress-code">higress-coreæºç åˆ†æ</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-cn/blog/e2e-debug">æ•™ç¨‹ï¼šå¦‚ä½•åœ¨æœ¬åœ°è¿›è¡Œhigressè°ƒè¯•å’Œç«¯åˆ°ç«¯æµ‹è¯•</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-cn/blog/hring">Higress å›¢é˜Ÿæ‹›å‹Ÿå°ä¼™ä¼´åŠ å…¥ï½</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-cn/blog/release-1.3">Higress å¼€æºä¸€å‘¨å¹´ï¼šæ–°ç‰ˆæœ¬ï¼Œæ–°æ ‡å‡†ï¼Œæ–°å·¥å…·ï¼Œæ–°å¾ç¨‹</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-cn/blog/plugin-transformer">é€šè¿‡ Higress Wasm æ’ä»¶ 3 å€æ€§èƒ½å®ç° Spring-cloud-gateway åŠŸèƒ½</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-cn/blog/2023-kubecon">Higressåœ¨2023 KubeCon Chinaçš„åˆ†äº«</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-cn/blog/config-with-file">åŸºäºæ–‡ä»¶é…ç½®å®ç° Higress æç®€ç‹¬ç«‹éƒ¨ç½²</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-cn/blog/DeployOnWindows">Windows ä¸‹ Higress éƒ¨ç½²å®è·µ</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-cn/blog/configmap">Higress å…¨å±€é…ç½®æ§åˆ¶é¢åŸç†åˆ†æ</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-cn/blog/ai_plugin">HigressåŠ©åŠ›AIå¤§æ¨¡å‹ä¼ä¸šçº§åº”ç”¨è½åœ°</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-cn/blog/user-mq">ç¾æ´½æ™ºèƒ½å®¢æœä½¿ç”¨ Higress ç»Ÿä¸€ç½‘å…³è½åœ°å®è·µ</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-cn/blog/skywalking">Higress é›†æˆ Skywalking å¯è§‚æµ‹æ€§æ¢ç´¢</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-cn/blog/ospp-2023">Higress å¼€æºä¹‹å¤é¡¹ç›®æŠ¥å</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-cn/blog/release-100">ä¸Šçº¿æ§åˆ¶å°ï¼Œé™ä½ä½¿ç”¨é—¨æ§› ï½œ Higress 1.0.0 RC ç‰ˆæœ¬å‘å¸ƒ</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-cn/blog/user-uu">UUè·‘è…¿åŸºäºHigressçš„äº‘åŸç”Ÿç½‘å…³å®è·µ</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-cn/blog/release-070">Higress 0.7.0 ç‰ˆæœ¬å‘å¸ƒï¼šGA è¿›å…¥å€’è®¡æ—¶</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-cn/blog/nacos">Higress + Nacos å¾®æœåŠ¡ç½‘å…³æœ€ä½³å®è·µ</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-cn/blog/30-line-wasm">30è¡Œä»£ç å†™ä¸€ä¸ªWasm Goæ’ä»¶</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-cn/blog/first-meetup">æ¬¢è¿æŠ¥åHigressé¦–æ¬¡çº¿ä¸‹Meetup</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/zh-cn/blog/higress">é˜¿é‡Œå·´å·´é‡ç£…å¼€æºäº‘åŸç”Ÿç½‘å…³</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="description" content="ä»‹ç»å¦‚ä½•åœ¨æœ¬åœ°å¼€å‘å’Œè°ƒè¯• Higress ä¸­çš„ Pilot ç»„ä»¶"><meta itemprop="keywords" content="higress,pilot"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/zh-cn/blog/pilot-debug">æ•™ç¨‹ï¼šå¦‚ä½•åœ¨æœ¬åœ°å¼€å‘å’Œè°ƒè¯• Higress Pilot</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-03-16T00:00:00.000Z" itemprop="datePublished">2024å¹´3æœˆ16æ—¥</time> Â· <!-- -->é˜…è¯»éœ€ 6 åˆ†é’Ÿ</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><span itemprop="name">CH3CHO</span></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="èƒŒæ™¯è¯´æ˜">èƒŒæ™¯è¯´æ˜<a href="#èƒŒæ™¯è¯´æ˜" class="hash-link" aria-label="èƒŒæ™¯è¯´æ˜çš„ç›´æ¥é“¾æ¥" title="èƒŒæ™¯è¯´æ˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>å‰é¢ SJC åœ¨<a href="/zh-cn/blog/e2e-debug">è¿™ç¯‡åšå®¢</a>ä¸­ä»‹ç»äº†å¦‚ä½•åœ¨æœ¬åœ°å¼€å‘å’Œè°ƒè¯• Higress Controllerã€‚è€Œ Higress æ§åˆ¶é¢é™¤äº† Controller ä¹‹å¤–è¿˜æœ‰ä¸€ä¸ªç»„ä»¶ï¼Œé‚£å°±æ˜¯ Pilotã€‚æœ¬æ–‡å°±å°†ä»‹ç»å¦‚ä½•åœ¨æœ¬åœ°å¼€å‘å’Œè°ƒè¯• Higress Pilotã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç¯å¢ƒå‡†å¤‡">ç¯å¢ƒå‡†å¤‡<a href="#ç¯å¢ƒå‡†å¤‡" class="hash-link" aria-label="ç¯å¢ƒå‡†å¤‡çš„ç›´æ¥é“¾æ¥" title="ç¯å¢ƒå‡†å¤‡çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ­¥éª¤ä¸€å…‹éš†ä»£ç ä»“åº“">æ­¥éª¤ä¸€ï¼šå…‹éš†ä»£ç ä»“åº“<a href="#æ­¥éª¤ä¸€å…‹éš†ä»£ç ä»“åº“" class="hash-link" aria-label="æ­¥éª¤ä¸€ï¼šå…‹éš†ä»£ç ä»“åº“çš„ç›´æ¥é“¾æ¥" title="æ­¥éª¤ä¸€ï¼šå…‹éš†ä»£ç ä»“åº“çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>Pilot çš„ä»£ç ç›®å‰æ˜¯ä»¥ Istio ä¸Šæ¸¸ä»“åº“ submodule åŠ è¡¥ä¸æ–‡ä»¶çš„å½¢å¼å­˜åœ¨äº Higress çš„ä¸»ä»“åº“ä¸­çš„ï¼Œæ‰€ä»¥ç›´æ¥å…‹éš† Higress çš„ä»£ç ä¸»ä»“åº“ <a href="https://github.com/alibaba/higress" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/higress</a> å³å¯ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ­¥éª¤äºŒå‡†å¤‡é¡¹ç›®ä»£ç ">æ­¥éª¤äºŒï¼šå‡†å¤‡é¡¹ç›®ä»£ç <a href="#æ­¥éª¤äºŒå‡†å¤‡é¡¹ç›®ä»£ç " class="hash-link" aria-label="æ­¥éª¤äºŒï¼šå‡†å¤‡é¡¹ç›®ä»£ç çš„ç›´æ¥é“¾æ¥" title="æ­¥éª¤äºŒï¼šå‡†å¤‡é¡¹ç›®ä»£ç çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>Higress Pilot æ˜¯åœ¨ Istio Pilot çš„åŸºç¡€ä¸Šï¼ŒåŸºäº Higress è‡ªèº«çš„åŠŸèƒ½éœ€æ±‚è¿›è¡Œäº†äºŒæ¬¡å¼€å‘è€Œæ„å»ºè€Œæˆçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™é‡Œéœ€è¦ä¸‹è½½ä¸Šæ¸¸ä»£ç ä»“åº“å¹¶åº”ç”¨ç°æœ‰çš„è¡¥ä¸ã€‚æˆ‘ä»¬åªéœ€è¦æ‰§è¡Œä¸‹é¢è¿™æ¡å‘½ä»¤ï¼š</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">make</span><span class="token plain"> prebuild</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Windows ç”¨æˆ·æ³¨æ„äº†ï¼</strong></p><p>å¦‚æœä½ æ˜¯åœ¨ Windows ä¸Šè¿›è¡Œå¼€å‘ï¼Œå¹¶ä¸”æ‰§è¡Œ <code>make</code> å‘½ä»¤æœ‰å›°éš¾çš„è¯ï¼Œä¸è¦æ€•ï¼Œæˆ‘ä»¬ä¹Ÿæœ‰åŠæ³•ã€‚å› ä¸ºæ•´ä¸ª prebuild å…¶å®ä¹Ÿåªåšäº†ä¸¤ä»¶äº‹æƒ…ã€‚</p><p>ç¬¬ä¸€ä»¶äº‹æƒ…æ˜¯åˆå§‹åŒ–æ‰€æœ‰çš„ä¸Šæ¸¸å­æ¨¡å—ï¼Œåªéœ€è¦æ‰§è¡Œè¿™æ ·ä¸€æ¡å‘½ä»¤ï¼š</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> submodule update --init</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç¬¬äºŒä»¶äº‹æƒ…æ˜¯åˆå§‹åŒ–å¼€å‘ç›®å½•ã€‚è¿™ä¸€æ­¥éª¤æ‰§è¡Œçš„å°±æ˜¯ <code>tools/hack/prebuild.sh</code>ã€‚å¤§å®¶å¯ä»¥ç›´æ¥åœ¨ Cygwin æˆ–è€… Git Bash ç­‰ç±» Linux ç»ˆç«¯ä¸‹æ‰§è¡Œè¿™ä¸ªè„šæœ¬æ–‡ä»¶ã€‚</p><p>å¦‚æœåœ¨åº”ç”¨è¡¥ä¸çš„æ—¶å€™å‡ºç°äº†å’Œæ¢è¡Œç¬¦æœ‰å…³çš„æŠ¥é”™ï¼Œé‚£ä¹ˆå¯ä»¥ç¼–è¾‘ <code>prebuild.sh</code>ï¼Œç»™ä¸¤å¤„ <code>patch</code> å‘½ä»¤å¢åŠ  <code>--binary</code> å‚æ•°å³å¯ã€‚</p><p><img loading="lazy" alt="img.png" src="/zh-cn/assets/images/patch-binary-0a2e0fe071efb18bdf0d5d7aecb07e6b.png" width="862" height="651" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ­¥éª¤ä¸‰å®‰è£…-higress">æ­¥éª¤ä¸‰ï¼šå®‰è£… Higress<a href="#æ­¥éª¤ä¸‰å®‰è£…-higress" class="hash-link" aria-label="æ­¥éª¤ä¸‰ï¼šå®‰è£… Higressçš„ç›´æ¥é“¾æ¥" title="æ­¥éª¤ä¸‰ï¼šå®‰è£… Higressçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>æ—¢ç„¶åªæ˜¯è°ƒè¯• pilotï¼Œé‚£ä¹ˆå…¶ä»–ç»„ä»¶è¿˜æ˜¯è¦å¤ç”¨ç°æœ‰ Higress é›†ç¾¤é‡Œçš„ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨æœ¬åœ°é…ç½®ä¸€ä¸ª Higress é›†ç¾¤ã€‚å¤§å®¶å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡æ¡£ï¼š<a href="/zh-cn/docs/user/quickstart">é“¾æ¥</a>ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¼€å‘ä¸è°ƒè¯•">å¼€å‘ä¸è°ƒè¯•<a href="#å¼€å‘ä¸è°ƒè¯•" class="hash-link" aria-label="å¼€å‘ä¸è°ƒè¯•çš„ç›´æ¥é“¾æ¥" title="å¼€å‘ä¸è°ƒè¯•çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æœ¬åœ°å¼€å‘">æœ¬åœ°å¼€å‘<a href="#æœ¬åœ°å¼€å‘" class="hash-link" aria-label="æœ¬åœ°å¼€å‘çš„ç›´æ¥é“¾æ¥" title="æœ¬åœ°å¼€å‘çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>æœ¬åœ°å¼€å‘æ¨èä½¿ç”¨ IDE JetBrains GoLandã€‚æˆ‘ä»¬ç›´æ¥åœ¨ GoLand ä¸­æ‰“å¼€ <code>external/istio</code> ç›®å½•ï¼Œæ­£å¸¸è¿›è¡Œå¼€å‘å³å¯ã€‚</p><p><img loading="lazy" alt="img.png" src="/zh-cn/assets/images/goland-project-9e47f05886a80bb1ac0a6113d4f4966f.png" width="1419" height="722" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="è°ƒè¯•è¿è¡Œ">è°ƒè¯•è¿è¡Œ<a href="#è°ƒè¯•è¿è¡Œ" class="hash-link" aria-label="è°ƒè¯•è¿è¡Œçš„ç›´æ¥é“¾æ¥" title="è°ƒè¯•è¿è¡Œçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><strong>ç¯å¢ƒå‡†å¤‡</strong></p><p>ç¬¬ä¸€æ­¥ï¼šæå–é…ç½®æ–‡ä»¶</p><p>åœ¨æœ¬åœ°ä»»æ„ä¸€ä¸ªä½ç½®åˆ›å»ºä¸€ä¸ªç›®å½•ï¼Œç„¶ååœ¨è¯¥ç›®å½•ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œç”Ÿæˆé…ç½®æ–‡ä»¶ï¼š</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get configmap higress-config -n higress-system -o</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">jsonpath</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;{.data.mesh}&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> ./mesh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get configmap higress-config -n higress-system -o</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">jsonpath</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;{.data.meshNetworks}&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> ./meshNetworks</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç¬¬äºŒæ­¥ï¼šè½¬å‘ controller ç«¯å£</p><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå°† controller çš„ xDS æœåŠ¡ç«¯å£è½¬å‘è‡³æœ¬åœ°ï¼š</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl port-forward deployment/higress-controller -n higress-system </span><span class="token number" style="color:#36acaa">15051</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>ä»£ç è°ƒæ•´</strong></p><p>å¦‚æœè¦è°ƒè¯•ä¸ TLS è¯ä¹¦ä¸‹å‘çš„ç›¸å…³åŠŸèƒ½ï¼Œåˆ™éœ€è¦åœ¨ <code>pilot/pkg/xds/ads.go</code> çš„ <code>initConnection</code> å‡½æ•°ä¸­æ·»åŠ ä»£ç ï¼Œç»•è¿‡è¯ä¹¦ä¸‹å‘è¿‡ç¨‹çš„è®¤è¯è¦æ±‚ã€‚ä»£ç ä¿®æ”¹æ–¹æ³•è¯·å‚è€ƒä¸‹æ–¹ç¤ºä¾‹ã€‚</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> features</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">EnableXDSIdentityCheck </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> con</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Identities </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// TODO: allow locking down, rejecting unauthenticated requests.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">checkConnectionIdentity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">con</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            log</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Warnf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Unauthorized XDS: %v with identity %v: %v&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> con</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PeerAddr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> con</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Identities</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> status</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Newf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">codes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PermissionDenied</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;authorization failed: %v&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Err</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        con</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">proxy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">VerifiedIdentity </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Start - Auth bypassing for local debug</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    con</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">proxy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">VerifiedIdentity </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">spiffe</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Identity</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        TrustDomain</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;cluster.local&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;higress-system&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ServiceAccount</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;higress-gateway&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// End - Auth bypassing for local debug</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>è¿è¡Œé…ç½®</strong></p><p>é…ç½®ä¸€ï¼šç¯å¢ƒå˜é‡</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">CUSTOM_CA_CERT_NAME</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">higress-ca-root-cert</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">JWT_POLICY</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">none</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">PILOT_ENABLE_CROSS_CLUSTER_WORKLOAD_ENTRY</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">PILOT_ENABLE_GATEWAY_API</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">true</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">PILOT_ENABLE_GATEWAY_API_DEPLOYMENT_CONTROLLER</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">PILOT_ENABLE_GATEWAY_API_STATUS</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">PILOT_ENABLE_METADATA_EXCHANGE</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">PILOT_SCOPE_GATEWAY_TO_NAMESPACE</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">true</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">POD_NAME</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">higress-controller</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">POD_NAMESPACE</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">higress-system</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">REVISION</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">default</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">VALIDATION_ENABLED</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">false</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>é…ç½®äºŒï¼šå‘½ä»¤è¡Œå‚æ•°</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">discovery --monitoringAddr</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">:15014 --log_output_level</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">default:info --domain cluster.local --keepaliveMaxServerConnectionAge 30m --meshConfig </span><span class="token variable" style="color:#36acaa">${configDir}</span><span class="token plain">/mesh --networksConfig </span><span class="token variable" style="color:#36acaa">${configDir}</span><span class="token plain">/meshNetworks</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ³¨æ„ï¼šå…¶ä¸­çš„ <code>${configDir}</code> ä¸ºåœ¨<strong>ç¯å¢ƒå‡†å¤‡</strong>ä¸€æ­¥åˆ›å»ºçš„é…ç½®ç›®å½•ã€‚</p><p><strong>å¯åŠ¨è°ƒè¯•</strong></p><p>åœ¨å®Œæˆä»¥ä¸Šå·¥ä½œä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¯åŠ¨ Pilot äº†ã€‚å®ƒçš„ main å‡½æ•°å®šä¹‰åœ¨ <code>pilot/cmd/pilot-discovery/main.go</code> æ–‡ä»¶ä¸­ã€‚</p><p><img loading="lazy" alt="img.png" src="/zh-cn/assets/images/debug-run-b2c3f7a50afb761c6fb1e0182a190044.png" width="1501" height="435" class="img_ev3q"></p><p><strong>ç½‘å…³å¯¹æ¥</strong></p><p>å¦‚æœæƒ³è¦éªŒè¯ pilot ä¸‹å‘é…ç½®åˆ° gateway çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹ gateway çš„é…ç½®ï¼Œä½¿ä¹‹è¿æ¥åˆ°å¤„äºå¼€å‘çŠ¶æ€çš„ pilot å®ä¾‹ã€‚</p><p>ç¬¬ä¸€æ­¥ï¼šä¿®æ”¹ <code>higress-config</code> ConfigMap</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl edit configmap higress-config -n higress-system</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¿®æ”¹ä¸¤ä¸ªåœ°æ–¹ï¼š</p><ol><li>å°† <code>discoveryAddress</code> ä¿®æ”¹ä¸º<code>æœ¬æœºIP:15010</code>ï¼›<br>æ³¨æ„ï¼šæ­¤å¤„çš„æœ¬æœº IP ä¸å¯ä»¥ä½¿ç”¨ 127.0.0.1 ç­‰ loopback IPã€‚éœ€è¦ä½¿ç”¨æœ¬æœºæœ‰çº¿æˆ–æ— çº¿ç½‘å¡çš„ IPã€‚</li><li>åœ¨ <code>discoveryAddress</code> ä¸‹é¢æ·»åŠ ä¸€ä¸ªæ–°å±æ€§ï¼š<code>controlPlaneAuthPolicy: NONE</code>ã€‚</li></ol><p>ä¿®æ”¹åé…ç½®ç¤ºä¾‹ï¼š</p><p><img loading="lazy" alt="img.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAiUAAAD6CAMAAABJRMcKAAAABGdBTUEAALGPC/xhBQAAAHJQTFRFQkJCU1NTb29vUlJSW1tbLi4uGxsbbm5uYmJifn5+EhISa2trYGBgNDQ0WlpaFRUVY2NjampqQ0NDVVVVVlZWYWFhgICAS0tLX19fGhoadXV1Z2dnVFRUbW1tpKSkk5OTg4ODMzMzt7e3/wAAzMzMDAwMmkWcsAAAFFhJREFUeNrtnWmDs7ixhSf7cpNM9txk0IIC//8vBm1VJanA7m7bje1TH2Z4ZYRo67HWw+GHlWJeptWHdV3M2oRZlsXFg8WXFLelGGvjR/P2z7AdTUuMOZ0eM+Rr1DSRV1xPRHDdlVNWOjFmmXIhJpYmrxezLLa9nPIpXZnvlO+P/w4Zvp7Wfx2h5p3y3yvLqv+yS/7DQvnXZMpfNNty1RBsKOV0xfR5F8oRlnILsyjNiBoL5WQul68nq9rVkuqV13J/vn5D6bD8lT+stw6jfbWIpw5QgvgkJQvFfDdKvlTGA6732HjE3X+hDLQliO+gBAFKEKAEgfgsJf7MI41ZrMQgvo+SuV9mO1eYZaR6u+G09DWVFTDE7Sipq4PxOPCEyaeEKa9vTs3XPpcck8gR6mSrLoj69HE+iT/NR6YtN4jFy6vKSDM8v0tJ/NShkm9MCVVQXKx2dfXWiU9DaGvQDTnSGXFl2BZK3JJJSKfSp+loTiRxuZx2ZRnp+rSQ7RVKrEUl34mS8vN3ufUwXIWm/aVzDXKOzNFW1a7WU0hVmf9Jn+ajdPGWEi7wijLybcdkHy9pFErQ5dyLkvzV5k0iGrvG2gt7v3POESoNPnUhc/41B2fELlT8Lx91lOy2V0oZPH612zW8AyUPpCTDkLscR6NDu/SzHa5BzkG/84hFHE7EHmtaplyZXVuS6rynpN3CPCyDhx7UlkztHwhK7jN6tfX7zy08f83z0g8UZyVHqkG3HWxkbENen0aXsV3JbUr9tNR0rHMul9OuLEPQk8clYemmPA6U3Kst0SnZqmBad9oSUYNVFrLNoI31Lk2kIyFprkSfEhHT0Ja4ppjDMgQlGSg3TpQNavn+lHCP4/PqQ52abjWi1mCoNRu8cyZMW8swZ3GLWeWnoi3pKZmvLkNMds2iA+GwZnL/cQmNRbZq6aYf+2OGBJh11mwtyUJ9WZ2deO5xvjAu8aXJyQMet+S+KwxtCdZmHzDHmaRGzy1XznHiBy7q5ZJsLw8OXJCffn2OQ21IpGVOp25CP4txyWPXS2y7quabJa7jtYz4i/dxJGnTuNPV6uRPy9qIV9ZL/PVlNBwYG0/HHOexa69TqRzxO/c7I8tuXTR1A2ZJY1ZXm6OYxp9+ee21bvQxVLEt8RaUPGImTDslNJY1Yn7T6OFk0zKqt6c8ZvVSqc2fjvs4884+zlEZ7W6fMi7BCv2NKelrJ1BL/8TKAez23ZWSrRV4+i94WpYFdXxXShAIUIIAJQhQggAlCFCCACUpAq1uYa8NlOzE4Q7boqyvIt6QkrC/HFe2+UEJKDmgBBv570PJTC5VwnOqiAzL3l0oh54y+AiPFOFrflWLNySIrGVY6qICPazlFxhgnJySrACJHGRtQNqZXaoeqGlLMiVpXzfE/1hWHoi8gpL0Py/LiBvAWXuQrutAyXNQQg2Cp/o1XI0KJUnilnYPvWgNOK+gZNHLiFeQekpQcnZKpk756JbO5XCgpBDg1oJJPFnPW/ehp06Duz22IbQMiPNTYqjXCLb+2o8pKc9WsF2n3ctb11e4jIWfJrfPapsGSj5OSbYZvZoSJ1uxYj6AeO0eh8YaOz2O13scgShWc5949HpECY9ea58j805CsU8MiDLawvMZGL0+50z4iBIxE3bUHlDedOQ6StqZ8DrF6bAlMEHJs66qjZSwl/ycHORd69VOY1HVX57LqF7y0kEelJyfks9FgJwdlFxugLDHB0oOm5EVG32g5FLU/T8EKEGAEgQoQSBACeKElPDayK1XSbDqAkq+SklY2qPqPmpolhWE2z6HVdwJtLTRzZTTJnHhmlemaXlByTdQMpGuYKLXG+T9RrtKW7/O+SttUFvFa6tPo+tpaVw45xVpWl5Q8h2UsD+WzRZtTrrg8HFr/JXrsvNz09Pc4KrDaR2ixQpqOsj7bpSInTja2RNHQhuvKeKPtPG5uU6qanE9PQerUuioqRmybOvc1lw2LA6X0uT1RLkDJZx3kjiCEnJgZZUAHwltvKaIP9bGZ1F1c+W9HLwJQEdtW+L06orQbDaBy6W0S5TUsQ/nneSq84wep/YGrDiS2qM6DtQU8Re08Zs8P1cvX28nB9eCdhQvYORdiPsO0WOw9b/X0i5QMtU/lPNyGiih35+V6kWpY6y/Yk0Rf0kbvwmUAufNrZSawy/jkaiZiTqc0GXfrrwNb1t2tLSdmpZpaTTS5Z3o2bX3oUR4xDe/+PrmCVJCS010/X5URfwlbXxRRIvr6Tn4jvhI1AzNa6e+tkJyy+/bkjHtCkoSy33eos56+7YkvbkotSUXKFEV8cfa+LkMd+X1tBz8uxctANdMoMSh6m3Y3tCy9uOSMe0qSsKYt3nf0xtTUmYe+z2Ob35V3AL54Wi8tvXKc11jDnX2TTXj2mdP69pXNilPzUz1ud9Pu7YtkXnRlnQ1NGeZszp69f2AoVSYb4+U0SuZ1vdK/C4HP8JjRCtTa8bzgFe8lYGEt4aud5R2PHrl3kzmfdNxyc4IM9rDL3Z3Juxl49sq4o+18ekbn+lVCel6ag72Epeu4nNdoecKsuIdczVvoA7iMO2QkjDz8k7NK9JASRa6m1Q95EIhjkSbMSriD7Xxpr47yYnraTnUmbWtDveW3usmpjqi9nnP5jDNslO/H9ICqf45r0gTed97Jvyd0S3OI0DJejCCnPGMKChBgBIEKEGAEgQoQYASBOIelIzKwrD/lOfymVejwc3+BSk5flqcNki9WNg+fHoYT5+/IiXHMuiREkNuR9c2Voj3o+TSK0ZByXNTIrTsVRHP7vO8E9e4aBVKAsnc5Pb+R93s4Zh1fkqklj3wFmz57bOaXqOE2xKhAvuwmz0oOT8l0lV+Fs2E67qLY0p45/bjbvag5PyU9JrF8mRSQ4m1lygJ3U7/x72FEWemROifWRHPtUpq+mvbks/6lCOehBI3zklYTX/tuASUvEOP01LCavqmzn1PCT/QjR7n1UevO5TMS+cvz6eaYb3kM272GL0+2Uw4z32pVllNL/3l2RN45pebfNrNHpScnxK5uuVYIy5eklTU9MJfPg9qp3rg6mXyPs5H3exByRNQ8q2B0SsouaIdg5v9U1LyX8SjApQgXpwStMkPCVCCACXPF7+K8fMYf43xlxj8Kaf9OcbfYvCnnPaLGL+MAUpACSj5wM3TQtgdNe/38xsGJY+l5MbROKjdkhJ2hh885+9KyZFz/cFdgZKDMI0d5A0pYWf40XP+npQcOtcf3BUoOQgX5KM5t6Okc5Bv/T1/HeN3MdI//xGjy5/S/hXjPzH4A077KcZvYuyXu7Z3cHBXz08J78Sx5l24xQ/vqS5u31npyt70xa++fDoVO3FzF4f7lTaoFc/5O1BynXP9wV09PSVyV59Gr+wWr7zzPrcPrr6jvijxq199VrL58vKQ/LXd3OGe6kPxnH8QJaNz/cFdPT0lrctm/Q5oY45EbVJxlDRKnRK/jtZEdUdUkhDh5g737K44es4/hhLFuf7grp6eklZtWFVDYagtVi+mkxIqUolP49RALyWwtjQqt3e4p/oYPefvOC5ZLznX793V01PSKpfrGJ3VRVPTqKS/PHY2qcORSnz69iJIiY2ZbHbv4HBPv9rOc/6nn/4d4/9i/DPG32P8f4xU8ZyWzktE8Kec9vsYv42xT8noXL93V69JCbnFq5TEIWnKJue5wm/ZrEE8C+ru4XDPI4DOc/6xlPTO9Xt39ZI9Tlns8Ds9znZWebmeVSjZGMif8ij39g73PJvoPOcf3pY0zvXKXb3u6FUcK6PX+PdnAqQSn3P6TVrLLMTW6OYO92Ku0XnO34WSq53rlbt63ZmwcItXZsJiTVUo8fk7KevUpRmKX9ytHe5FbfWe8w+iRHOu1+/qhVbVsq6eNO/SLX5YVWv2Z1iJL345IX1qxWPFt3W4b5zhO8/5H3/8Q4yfxfhTjFT76fMfY3DaH2N0n3JausoPMdZrnev1u3qlFfobL8yv3xZ3oeSsX/RTU/Kdlnug5Eko8XgsC5RcZORglQOUgBIEKEGAEgQoASWg5PtuXnOp/5RzfR/meJ7UlPEEXvcvT8mFeW1ZhzZ1+1ekXcHYtFcaU9JceSj3w1F2B/LCcMgrpSKt7GMvoOQ+lBh+k+uVNWiUytcoMc07Yr9MSVlBn+uW7izTzH3sM0AJ12XdDLyyBluF/SElwvHv65S4QoSvGjuRBkr2bn7cz2NXeXafl5p3se/XUDIJCXnna0+9htDLF4U9u21Jr3v2tecrj+VK3X/5OxoV/7BTGJYkVIhEVFWKTAMlOzc/aV567CrPbQlp3oWG4JAS4WtP12O9PCnspScbtyU1h7iyUq4YvdLfIVT8GiWp0EhELnHrckQaKNm5eVUlz67ygpKlP++aHif72tfrCdU9Kex1SkyTN17Zq17F/HRI/Tum5u4HSlLWSMRSSpxEWhm9WlDS3rymWdTqjVWPUtvYjV7DOGZovaiF6p4U9jolDbHpylq5TIl8OsS1j2p0lESDt56Smoa2RL95Tf+8Q4nvz7swE1Z87Vkvzwr7S5TUK2vl8n2Jt/aQil+nJOLWU1LTQMl9KTHD/EPztee5r5Ej1UttyW65KiWk4t+hZGvKunEJpYGSL/c4XulxvEKJl6/dCUqPk+fB9b/XUqKVq/Y4pOLfoWQjt5vjUBoo+cjolevNDJR45V0Gu5TMbY/DlcsKe+l6bw4o8eo7FMbRK6v49dFrbsea9RJKAyUfmQlzffCjBXwgZqTF67f5dksa+9qL61W9vFDYS9f7WppGiVauNhOWbjM6JWW1lddeKQ2UfGhVjX+chlfVqF7E05nZpb79dotzPfnay+sVvbxU2EvXe9OPVeSVx3KF1734O4qKf58Ss7T7OJRW93FmUPL9N3/vONt7r0HJGeNsYgJQcsI4nYoflJyQkdOp+EEJ4uUpQeCdFqAElCAQ70iJwRPGL0RJWp40e3POIc0uWWzUpY95QcnrUJL3WtxHKIlL4A6UvBMlcvn7OkpCiHaeFpQ8LSXb3n3vJb/yvlqxDotCZlKm8xY9a95ZLy9V98VL3ga/uXCFSIV+3syaNkVrz3eFN1Z/HyW8Ya6o5LOR+CSV6VYsbdb2gPXyoo2oXvJ2M8ldnUuUaOfRnr+qtee7AiXfSIlfqw5MUclv/ORmZBI6eN5ab3uNVnVP6rHt4mGrez63U+dT46Rq7Vd+HhOUfGOPQzWmqeQ3eVCgqp3KYw/irSSy2myjSiQv+e0Cfmsb+Nz2PNYiqlr7dXGo7e+nhP3mVf3zIp6TIh2hW5ZWFWv4ORZKq17yNqTxTHEnH85jXbOmtX8KT4G3p2Sug8hOmZ5nLJ48Wc3QRpCXfGmMfNKajueplGgO94hz9DiKSn4z3q/iw0aZ7htKWC/f9UJx2CMo0c7b73FAySlHr6NKPqmHay17sVLiFrnCwXr5ftVDoaQ/T4xeR61963CP0esJZsKDSj79zuf6bqXyVgBHcJHmnfXynEZe8oIS7Tw5Ex609qDkJJQYsX5Fv9887jR1nFkWycrD4rSNwwp70stzGq2gCUq085pVtbXT2oOSE41er4qzKdMRZ6QEw0hQcjHgLw9KLjMCf/n3pQQBShCgBIEAJYizU3Iw7b1owY0pM9qS9fPOzUXHiBk1KDmkJC7fWsypQclFStabu+4ivoMScneXqnbhSEX+nbw7F9hui1zNFF/7wKyQSl68ibqmkXa/0fgHoaREt3We0atQtQt3O4WSqpeXo1fF1160JaSSF2+1Z+U8afeFskGUAUrORQlVj5SPDZS0ht45r+ZrnyhxsfZZJZ8uNi2tcp60+6ySkmWAknNRonIwUEJ6eZFXcxkO/EQXqeTzUWpQhHK+avdZcdmWgTgjJUZOTMYex8oZbs6rOZbHtmSmpwezeLpQ41rlfNXuC/W2xSz6ySmpevkrKMnjDVbJC0qEcr5q96XGX5aBOH2P40dKaAhx3OOEtndhmto01u5Ljb8sA3FGSpoq9PWda1Oz+tFSovnah0LOLFTycvQqWqui3Zcaf3ltdD2npETOhKsLPDnIk15+ZybcUpLU86SS72bCKY21+zwTlmWAkhNQQu7u7XsL+F1lxQWeHOTZcUI6w4++9uXRHltt6tP15nQVl5uQlCa0+6zxF2WAkpO0JY+OvdcewfkGlIgpjQEloOSoGVkPnvUBJaCERkG7y6qgBJQgQAkClCBACQKUIEDJ3cNDuApKQAko+SohS6bEghRQsh9ucd5OkBeCkuOwUBaCkitaE7QkoOQ4NvGH3+SGGJa8NyXzIpREyuh1TqPXAEzQlmAmDEo+OWadQQkouZoSBCgBJaAElIASBAKUIEAJApQgQAkClCBACQKUIEDJAwM+RO9LCd60BkpACSgBJYhHUBKELG3x+UXQ0puKfLI0b3rhIA8Pq3dpS5akUvT5zfF+cJ8fvOmFbx4oeR9KmheaDO7zgzc9e3CCkjeipJFD2523EAjHRTvmQrw8JXU9xCxlNNL4ig+UsDc44v0o8akFsaAElBxQEujdJOhxQEntXlRK5sXujV4rJRi9vg8lMw1H6kF8VcA2w7V7M2F+dxJmwu9CyWp4VW2tmGzW77Z1n9e86YWDPCh5cUq+GBi9gpIrOiyD2gAlR83IeuAgjwAleTi7wO8GlCBACQKUIBCgBHEqSgblfJMAXT0ouQ4bBCgBJaAElICSz8XMunqhnJ/K258zJSEea7p67Pu9U1tiapNByvnyJvmUEJa1+5SEbaDkjSghC/HKQfyfDTmBIBl09aDknShxnYItNxRJ/bh4yxz0yiTEG1FiWA8gOUisxDHLBEpAySpeWaFQsoYASkCJXdaBEtHjVEk0KHlnSozUn2mj123YMu1RgtHru6yXSCmrOhOmWQ4oeVdKDK+qCeW8aVbVprhCounqQck7rZcM5KDqQQkoASWgBJSAEsQ5KEGAEgQoQbxr/A88gZjEJEvXagAAAABJRU5ErkJggg==" width="549" height="250" class="img_ev3q"></p><p>ç¬¬äºŒæ­¥ï¼šé‡å¯ Higress Gateway</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl rollout restart deployment higress-gateway -n higress-system</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>é‡å¯åæˆ‘ä»¬å¯ä»¥åœ¨ pilot çš„æ§åˆ¶å°è¾“å‡ºä¸­çœ‹åˆ° gateway è¿æ¥ä¸Šæ¥çš„å¹¶è·å–é…ç½®çš„æ—¥å¿—ã€‚</p><p><img loading="lazy" alt="img.png" src="/zh-cn/assets/images/gateway-connected-7884dc4a25d714a194c1605ba474d1a8.png" width="1494" height="462" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ€»ç»“">æ€»ç»“<a href="#æ€»ç»“" class="hash-link" aria-label="æ€»ç»“çš„ç›´æ¥é“¾æ¥" title="æ€»ç»“çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>æœ¬åœ°è°ƒè¯•å’Œæµ‹è¯•æ˜¯å¼€å‘è¿‡ç¨‹ä¸­å¿…ä¸å¯å°‘çš„ç¯èŠ‚ã€‚é€šè¿‡æœ¬æ–‡çš„ä»‹ç»ï¼Œå¸Œæœ›å¤§å®¶å¯ä»¥æ›´åŠ æ–¹ä¾¿çš„å¯¹ pilot è¿›è¡Œæœ¬åœ°è°ƒè¯•å’Œe2eæµ‹è¯•ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚åŒæ—¶ä¹Ÿå¸Œæœ›èƒ½å¤Ÿæœ‰è¶Šæ¥è¶Šå¤šçš„å¼€å‘è€…åŠ å…¥åˆ° Higress ç ”å‘é˜Ÿä¼ä¸­ï¼Œä¸ºäº§å“çš„å‡çº§è¿­ä»£è´¡çŒ®ä¸€ä»½åŠ›é‡ã€‚</p><p><a href="https://github.com/alibaba/higress/issues/480" target="_blank" rel="noopener noreferrer">æ¬¢è¿å‚ä¸é˜¿é‡Œå¼€æºè´¡çŒ®ğŸ‘</a></p></div><footer class="row docusaurus-mt-lg"></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="description" content="ä»‹ç»å¦‚ä½•åœ¨æœ¬åœ°ä½¿ç”¨IDEç­‰å¼€å‘å·¥å…·è¿›è¡ŒHigressæ§åˆ¶å°ç›¸å…³çš„å¼€å‘å’Œè°ƒè¯•å·¥ä½œã€‚"><meta itemprop="keywords" content="higress,console"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/zh-cn/blog/console-dev">æ•™ç¨‹ï¼šå¦‚ä½•åœ¨æœ¬åœ°å¼€å‘å’Œè°ƒè¯• Higress æ§åˆ¶å°</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-03-02T00:00:00.000Z" itemprop="datePublished">2024å¹´3æœˆ2æ—¥</time> Â· <!-- -->é˜…è¯»éœ€ 8 åˆ†é’Ÿ</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><span itemprop="name">CH3CHO</span></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ¦‚è¿°">æ¦‚è¿°<a href="#æ¦‚è¿°" class="hash-link" aria-label="æ¦‚è¿°çš„ç›´æ¥é“¾æ¥" title="æ¦‚è¿°çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>æœ¬æ–‡æ—¨åœ¨ä»‹ç»å¦‚ä½•åœ¨æœ¬åœ°ä½¿ç”¨ IDE æ¥è¿›è¡Œ Higress æ§åˆ¶å°ï¼ˆä»¥ä¸‹ç®€ç§°æ§åˆ¶å°ï¼‰çš„å¼€å‘å’Œè°ƒè¯•å·¥ä½œã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä»£ç ç»“æ„">ä»£ç ç»“æ„<a href="#ä»£ç ç»“æ„" class="hash-link" aria-label="ä»£ç ç»“æ„çš„ç›´æ¥é“¾æ¥" title="ä»£ç ç»“æ„çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>æ§åˆ¶å°çš„ä»£ç ä»“åº“åœ°å€ä¸º <a href="https://github.com/higress-group/higress-console" target="_blank" rel="noopener noreferrer">https://github.com/higress-group/higress-console</a>ã€‚</p><p>æ§åˆ¶å°é¡¹ç›®ä½¿ç”¨äº†å‰åç«¯åˆ†ç¦»çš„æ¶æ„ã€‚åœ¨å°†ä»£ç ä¸‹è½½åˆ°æœ¬åœ°åï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ•´ä¸ªé¡¹ç›®ä¸»è¦ç”±ä»¥ä¸‹ä¸‰ä¸ªç›®å½•ç»„æˆï¼šbackendã€frontend å’Œ helmã€‚å®ƒä»¬ä¹Ÿåˆ†åˆ«å¯¹åº”äº†é¡¹ç›®çš„ä¸‰ä¸ªéƒ¨åˆ†ï¼šåç«¯ã€å‰ç«¯å’Œéƒ¨ç½²ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="backendåç«¯éƒ¨åˆ†">Backendï¼šåç«¯éƒ¨åˆ†<a href="#backendåç«¯éƒ¨åˆ†" class="hash-link" aria-label="Backendï¼šåç«¯éƒ¨åˆ†çš„ç›´æ¥é“¾æ¥" title="Backendï¼šåç«¯éƒ¨åˆ†çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åç«¯éƒ¨åˆ†æ˜¯ä¸€ä¸ªä½¿ç”¨ Maven æ„å»ºé…ç½®çš„ Java é¡¹ç›®ï¼Œå…¶ä¸­å…±æœ‰ä¸¤ä¸ªæ¨¡å—ï¼šsdk å’Œ consoleã€‚</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="sdk">SDK<a href="#sdk" class="hash-link" aria-label="SDKçš„ç›´æ¥é“¾æ¥" title="SDKçš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>sdk ä¸­åŒ…å«äº†å®šä¹‰äº† Higress æ²»ç†å¹³é¢çš„æ ¸å¿ƒæ•°æ®æ¨¡å‹å’Œä¸šåŠ¡é€»è¾‘ï¼Œå¦‚è·¯ç”±æ¨¡å‹ã€Wasm æ’ä»¶æ¨¡å‹ã€é…ç½®æ¨¡å‹è½¬æ¢å’Œè¯»å†™é€»è¾‘ç­‰ã€‚å®ƒä¹ŸåŒæ ·ä½œä¸ºä¸€ä¸ªç‹¬ç«‹äº§å“å‘å¸ƒåˆ°äº† Maven ä¸­å¤®ä»“åº“ã€‚å¼€å‘è€…å¯ä»¥ä¸–ç•Œä½¿ç”¨è¿™ä¸ª SDK æ¥è¿›è¡Œé¢å‘ Higress çš„æ²»ç†åŠŸèƒ½å¼€å‘ï¼ˆ<a href="/zh-cn/blog/admin-sdk-intro">å‚è€ƒæ–‡æ¡£</a>ï¼‰ã€‚</p><p>é¡¹ç›®ä¸­çš„æ ¸å¿ƒåŒ…å¦‚ä¸‹ï¼š</p><ul><li>configï¼šSDK åˆå§‹åŒ–é…ç½®æ¨¡å‹</li><li>constantï¼šå„ç±»å¸¸é‡</li><li>modelï¼šå„ç±»é…ç½®æ¨¡å‹</li><li>serviceï¼šæ ¸å¿ƒä¸šåŠ¡é€»è¾‘æœåŠ¡<ul><li>kubernetesï¼šä¸ K8s æ¨¡å‹å’Œ API ç›¸å…³çš„æœåŠ¡</li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="console">Console<a href="#console" class="hash-link" aria-label="Consoleçš„ç›´æ¥é“¾æ¥" title="Consoleçš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>console ä¸­å®šä¹‰äº†æ§åˆ¶å°æ‰€ä½¿ç”¨çš„ Restful API å’Œä¸€äº›ç•Œé¢ç›¸å…³çš„éæ ¸å¿ƒåŠŸèƒ½ï¼Œä¾‹å¦‚ç›‘æ§çœ‹æ¿ç®¡ç†ã€ç”¨æˆ·é…ç½®ç®¡ç†ç­‰ã€‚</p><p>é¡¹ç›®ä¸­çš„æ ¸å¿ƒåŒ…å¦‚ä¸‹ï¼š</p><ul><li>clientï¼šå°è£…è®¿é—®å¤–éƒ¨ API çš„å®¢æˆ·ç«¯ </li><li>constantï¼šå„ç±»å¸¸é‡</li><li>controllerï¼šRestful API æ§åˆ¶å™¨</li><li>serviceï¼šä¸šåŠ¡æœåŠ¡é€»è¾‘</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="frontendå‰ç«¯éƒ¨åˆ†">Frontendï¼šå‰ç«¯éƒ¨åˆ†<a href="#frontendå‰ç«¯éƒ¨åˆ†" class="hash-link" aria-label="Frontendï¼šå‰ç«¯éƒ¨åˆ†çš„ç›´æ¥é“¾æ¥" title="Frontendï¼šå‰ç«¯éƒ¨åˆ†çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>å‰ç«¯éƒ¨åˆ†æ˜¯ä¸€ä¸ª NodeJS é¡¹ç›®ï¼Œä½¿ç”¨åŸºäº React çš„åº”ç”¨ç ”å‘æ¡†æ¶<a href="https://v3.ice.work/" target="_blank" rel="noopener noreferrer">é£å†°ï¼ˆICEï¼‰</a>æ­å»ºã€‚</p><p>æ•´ä¸ªé¡¹ç›®çš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p><ul><li>publicï¼šé¡¹ç›®ä¸­ä½¿ç”¨åˆ°çš„é™æ€èµ„æº</li><li>srcï¼šæ ¸å¿ƒä»£ç éƒ¨åˆ†<ul><li>componentsï¼šåœ¨é¡¹ç›®ä¸­è¢«å¤ç”¨çš„å°å‹ç»„ä»¶</li><li>interfacesï¼šä¸ API äº¤äº’è¿‡ç¨‹ä¸­éœ€è¦ä½¿ç”¨åˆ°çš„æ•°æ®æ¨¡å‹</li><li>localesï¼šå›½é™…åŒ–èµ„æºæ–‡ä»¶</li><li>modelsï¼šå‰ç«¯é¡µé¢ä¸Šä¸‹æ–‡ä¸­éœ€è¦ä½¿ç”¨åˆ°çš„æ•°æ®æ¨¡å‹</li><li>pagesï¼šå„ä¸ªå‰ç«¯é¡µé¢åŠå…¶å†…éƒ¨ç»„ä»¶</li><li>servicesï¼šä¸ API è¿›è¡Œäº¤äº’é€»è¾‘å°è£…</li></ul></li><li>ice.config.mtsï¼šé£å†°çš„é¡¹ç›®é…ç½®æ–‡ä»¶</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="helméƒ¨ç½²éƒ¨åˆ†">Helmï¼šéƒ¨ç½²éƒ¨åˆ†<a href="#helméƒ¨ç½²éƒ¨åˆ†" class="hash-link" aria-label="Helmï¼šéƒ¨ç½²éƒ¨åˆ†çš„ç›´æ¥é“¾æ¥" title="Helmï¼šéƒ¨ç½²éƒ¨åˆ†çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>æ§åˆ¶å°ä½¿ç”¨ Helm Chart è¿›è¡Œéƒ¨ç½²ã€‚è¿™ä¸€éƒ¨åˆ†å°±æ˜¯ Helm Chart çš„ä»£ç ã€‚æ•´ä½“ä»£ç ç»“æ„éµå¾ª Helm çš„å®˜æ–¹è§„èŒƒï¼Œå¯å‚è€ƒ <a href="https://helm.sh/" target="_blank" rel="noopener noreferrer">Helm å®˜ç½‘</a>ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æœ¬åœ°è¿è¡Œ">æœ¬åœ°è¿è¡Œ<a href="#æœ¬åœ°è¿è¡Œ" class="hash-link" aria-label="æœ¬åœ°è¿è¡Œçš„ç›´æ¥é“¾æ¥" title="æœ¬åœ°è¿è¡Œçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="åç«¯éƒ¨åˆ†">åç«¯éƒ¨åˆ†<a href="#åç«¯éƒ¨åˆ†" class="hash-link" aria-label="åç«¯éƒ¨åˆ†çš„ç›´æ¥é“¾æ¥" title="åç«¯éƒ¨åˆ†çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ç¯å¢ƒå‡†å¤‡">ç¯å¢ƒå‡†å¤‡<a href="#ç¯å¢ƒå‡†å¤‡" class="hash-link" aria-label="ç¯å¢ƒå‡†å¤‡çš„ç›´æ¥é“¾æ¥" title="ç¯å¢ƒå‡†å¤‡çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>æ§åˆ¶å°çš„æ­£å¸¸è¿è¡Œä¾èµ– Higress æ ¸å¿ƒç»„ä»¶ï¼Œæ‰€ä»¥éœ€è¦å…ˆå‡†å¤‡ä¸€ä¸ªå®‰è£…å¥½çš„ Higress é›†ç¾¤ã€‚å¤§å®¶å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡æ¡£ï¼š<a href="/zh-cn/docs/user/quickstart">é“¾æ¥</a>ã€‚è€ƒè™‘åˆ°æœ¬åœ°è°ƒè¯•çš„ä¾¿åˆ©åº¦ï¼Œå»ºè®®å¤§å®¶ä½¿ç”¨æœ¬åœ° K8s ç¯å¢ƒçš„æ–¹æ³•è¿›è¡Œå®‰è£…ã€‚</p><p>æ§åˆ¶å°çš„åç«¯é¡¹ç›®è¦æ±‚ Java ç‰ˆæœ¬ä¸ä½äº 17ï¼Œæ‰€ä»¥è¯·ç¡®è®¤æœ¬åœ°å®‰è£…çš„ JDK ç‰ˆæœ¬æ»¡è¶³è¦æ±‚ã€‚</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="å¯åŠ¨é¡¹ç›®">å¯åŠ¨é¡¹ç›®<a href="#å¯åŠ¨é¡¹ç›®" class="hash-link" aria-label="å¯åŠ¨é¡¹ç›®çš„ç›´æ¥é“¾æ¥" title="å¯åŠ¨é¡¹ç›®çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>æ§åˆ¶å°çš„å¤–éƒ¨æœåŠ¡ä¾èµ–ä¸»è¦æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯ K8s APIï¼Œå¦ä¸€ä¸ªæ˜¯ Higress Controllerã€‚</p><p>è®¿é—® K8s APIï¼Œæ§åˆ¶å°é»˜è®¤ä½¿ç”¨çš„æ˜¯æœ¬åœ°é»˜è®¤çš„ kubeconfig ï¼ˆå³ <code>~/.kube/config</code>ï¼‰ã€‚å¦‚æœéœ€è¦ä½¿ç”¨å…¶ä»–é…ç½®æ–‡ä»¶ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ <code>HIGRESS_CONSOLE_KUBE_CONFIG</code> ç¯å¢ƒå˜é‡æ¥æŒ‡å®šå¯¹åº”çš„æ–‡ä»¶è·¯å¾„ã€‚</p><p>æ§åˆ¶å°åœ¨æœ¬åœ°è¿è¡ŒçŠ¶æ€ä¸‹ï¼Œæ¥è®¿é—® K8s é›†ç¾¤ï¼Œä½¿ç”¨æœ¬åœ°çš„ 15014 ç«¯å£æ¥è®¿é—® Higress Controllerã€‚å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å°†å‰é¢å®‰è£…å¥½çš„ Higress å®ä¾‹ä¸­ controller çš„ 15014 ç«¯å£æ˜ å°„åˆ°æœ¬åœ°ï¼š</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl port-forward deployment/higress-controller -n higress-system </span><span class="token number" style="color:#36acaa">15014</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="img.png" src="data:image/png;base64,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" width="646" height="76" class="img_ev3q"></p><p>ç„¶åä½¿ç”¨é¡¹ç›®çš„ä¸»ç±» <code>com.alibaba.higress.console.HigressConsoleApplication</code> è¿›è¡Œå¯åŠ¨å³å¯ã€‚ç­‰å¾…å¯åŠ¨å®Œæˆåï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ <code>http://localhost:8080/</code> æ¥è®¿é—®äº†ã€‚</p><p><img loading="lazy" alt="img.png" src="/zh-cn/assets/images/backend-start-d3b6bc3a48ad899c0062afb5011466ea.png" width="1377" height="584" class="img_ev3q"></p><p>å¦‚æœä½ æ˜¯ç¬¬ä¸€æ¬¡å¯åŠ¨ï¼Œé‚£ä¹ˆè®¿é—®ä¸Šè¿°åœ°å€çš„æ—¶å€™ä¼šå‘ç°å¹¶æ²¡æœ‰é¡µé¢å‡ºç°ã€‚å¦‚æœåªæ˜¯è¦è°ƒè¯• APIï¼Œè¿™æ ·ä¹Ÿæ˜¯å¯ä»¥æ­£å¸¸è¿›è¡Œçš„ã€‚ä½†å¦‚æœè¦ç»“åˆç½‘é¡µè¿›è¡Œè°ƒè¯•ï¼Œé‚£ä¹ˆéœ€è¦ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ‰§è¡Œä¸€æ¬¡ Maven æ„å»ºï¼Œç”Ÿæˆå‰ç«¯é¡µé¢èµ„æºï¼š</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./mvnw clean package -Dmaven.test.skip</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="img.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAuMAAAEaCAMAAACM1qnaAAAABGdBTUEAALGPC/xhBQAAAwBQTFRFiqV4l0xzPD13Sh1ycVh4io2rcXG8C2ZQC2ZnSIInNEkiSJUnBo5nu7zeS3GZS3G8ZB5GcUyZu7z/l3FNu42Rl93ecXFNu93eS0xNHThQDU5QcVgh3ZhzS3FNilh4/7y8FU45SIIpPl4nD46PPVh4iqWR3d28u5hNFmZ6GTghir2RBnpQW3AmPB1bPT54u6WrPoIoPkklcZiZC6KPNF4p3d3/ilhcBHpn/93eBmY5HUxNB456BqJ6oqWrcaWRD045Gzg5cVhc3bxzu5hzAKKPPnApPkkicUxNinRATqoWinR4FTghV1hAPT5cHpneiqWr3byZAHpQEnqPHW3eoqXDAI56inRcNpEWLpEW3ZiZPVhcR6oTS5i8SF4lR5EaKTYiBqKiPT5AcXSRKUkml7zeNDYhHE56HTYjSIIqonRcilhADY6iJlocF2aPLncYPqoTFXqiUZUnAKJ6W4InUYInV3Sr/7yZBqKPu93/Ploeu3FNNqoToo14/928AI5nUXAlPncdW5UpC04hcbzeJncWoqWRHT5AW3AkDzghu414HpmZHThncY2rcUwhPT4hcaWrC6KiFR4hHUxzHm1NHpm8HjohPXSRHT8aLh4hLj8eHR5QPoIqTsMYR8MTcVhAHR45PViRNHAqHTpzHR4hl0whGR4hoqV4UV4i///eiqXDLpETR3cdTqoZTpEdir2rHUknHYT/Vz4hPjYhW5Unl93/KV4oPlohoo1cAKOjHT5cHTYmHT8dUZUpu6WRPsMT/92ZV42rNj8hHR4iW4ImJh4hNB4hHXG8cR4hTsMWu41c3ZhNS5jeu3EhHoRzSEkhHUyZ//+8Sx4hor2R3f//HVoYKR4hHTohHR4kHq//HR4dSJUqXJYsu///HVMhHq/eu72rHZn/V43DHTqZHVO8or3DHR5NonRAPXSrilghHa//HR5zHh4hHq+8HViRir3Du6V4HR5ccbz/caXDT8QU/7xzor2ru72RH7D/PR4hHR5AcT4hVx4hHT54vL7E////Hh8iCXAkVQAAHwFJREFUeNrtnQl8HNV9x9P7zJ22SdM2PZKSm9whpOQkR0lSICW0oaQ0BkJsSEMToMTBIYRi4uAD3JY0pPhIfAZqR2DHFthBMbaMLMW2EC4YKVFEpF1FsNJKFmbX1u7k/47/mzdvdnZnD0m7q9/vY+tp3rxjju/85z9v5q/3LK+YnvSaXk9iB+rgyJTd154yyj7Lg6DmFhiHwDgEgXEIqn/GpwZzueMnS5VNj+Zy/Sdq0u3ae/dFr3z08YPTus97vt3be8M95W9XzbX95thFT7+xpytu2ZG+w/uLrW/f9L7uYuvvuPVr/OuVX7ht+nZ/9eU7d5759Rlj/GmB7hOPPSP0k58/843veiO/+MnIL+Tyj70nfvbMM//1337BadZ0M066b9c95bC4q/eGTwU2sLe392DwsnnwyHQyfqhn0TKvVox7K6/dtC6QsWYw17+gEOPTrVv+fYYZ97yhn/30/z3v58S5YvwpOabzxGM//u531O+zzPjWSkiqnvGLj1CFg8U2cPtV08r4SN8D3V7tGPeGtgVKJHe3eFMPn5xjjD/1pMX491Xmf5bN+KOfJXt3PSHxqc/2fvEewcYbH++9d58wgwIJmX8D4bLnA2Qn/22fj9AbVXnK773+iEnv20XN9frexNYHP9C7cS11cPFVcr26AtYelIb3i/v89k27ejs04xLV7VRJ9x/aLjLPpre1G4swvvV61bcur/czsB2iX72dMr/3qn2S8e3X+/nmOKh6vjrzXSp5/7V5+nXoknx+0Toy7tdckt9Eizf25PPn0EUgf1m0TjB+qMfKP0S1rHrCXckfsHzQLSfSmy0v9I43//HlO8/8GrG+c+dX1gun4uM7z/ztv7lNrLh1p/BeXvkvOz9ByR3kbOx8jZ8a0fqdv3+bqLfz7eupnd+S7ZlyOt9nXLc3k4w/9f1nfmwxLhMy5mUzvvZm4uciOsf3Xuptv1ec7N6Ne94gTt52xdINH5S/rX3tkT2WJ8zl93z7Zsp/8Ainrh3f2ruR/t131ZGLLvIuI+wkerRIbV66Z+3NfvtOuyHG/f6D22UxHsCa9uOLH7TvClcdcRhX+2m2Q/ert9PbTu17Fx0RjG+lzTX5vB26XsjsduY3LRzp66LFZSLrUE9+4dC2TeuG3rTMuzA/ScXyCz3vxd3E+PO2TVI1nU/Ly1b25U096ftYN4ZUh9e2ILvCZ/zWM9/tfU7SrX5e+fb1q4VnTtC/Y/U7b6Pcj6y+8lzKP3e9t/pVfsr6HNX33rN+9eXnUr2vrDft6XKcbxjn9maU8Sce++l32B9/6knN+DfKZ1yRIPl49PF76D8bQ80S5W8Vdp2Au8+246q8BJF+cBpi/EGBloBa0LVR3fu3b9SsC7us2nfbdRm3+g9sl+1v22Zcui/WQ+ujv7MvuGV6PwPbofqV2ym3VfkqxmcSebwdXC/kfHSS9SXG24lbYdoP9UwaEy+glcuq+AsYYZEvy4/nTT3XnUkl0s/KkDEP+CqfkU+bkvE73kwg3iLs+K3vMOvF8pWfeLd6MtWpeZZ8h++I0A/Tni7H+fyraW9GGX/y75/5u8dK2/FxcQucDKc+GbvEPVqf44OWMQywpBimc7pW+CI3m/ISMys1jOtyhvHL/oKWN0pyH/29fcanMaw67bqMm/4jGd/zho2h63ejdT8RsqFX+xnYDvFDb6c5DNtfqy4Gnc/b4fpkAcaloyF1QDN+wLuQfJK8ZlkWz+flQ6XJP6AZV/UKMP7q5604I5JxxaRkXDrqt5AnslP4LKs/Tj7G1z2TXinyzzX+vGyCFkx7uhznG9y5vbhc1YbxIRpJqd4fF6dvrbCTBxVVpRi3EbHsd0k7/vjGI8o2rt0oTLk2mV5BO64sZ3mMG8NbmPHQ07Dez8B2iOtPb6dlx7ffIPFX+bwdXK+Ar6IZn9Q2mu3zNd3KjivrTQA/X/zK+T7jkwUfYqc2ZJL9CybM4HEpxqVd13rPx6XPYdKidlyXC9nxN0/vg2cE43JspdpxlT2/S+74WwTjDyp/OoJx4W9f9lmbxQcDfrjljweGtX3GD3r3SYu49Yar7pE+0qXC3w0zrrdDMy64uniXal/37zCu/eu1DLBevuyI9lV8f93xxw9qX01vh+r3Ud5O6Y9fJv1xATnnm+3Q9Qo8cx5QyAu/e+WHDvUIP/vwfsFuJ9lryqeB79OFP75/nIpyvgD6Oc8W/riq5z5zegMdGW9xxouy48J/fsnlXzCMk8/xEelv/zm511SC02h/XLVnyrv+uG5vRsfHBc7f9xmvdHx8zxvE8MGlYlxhlxw3iGDcu4+GHf7SGVexxlNMSs6P7RMYxmkY4vqLd200w9R73iI7DjOut4Ot+VZapGvQ6r8g43I4XPhCzDDVU08aJRg326H7Ndt5MeUTx/L5gSDnfN4OXS80dqgZVwMmpy08JFwRGicZulH7INa4ykgfPYtyfnvPplPG811cLzR2mG0bzNHwYRTj3i2X7/zEK307TqCSd/HOj6z+K5l4nPr6DGUQt2ZcRTPO5dxxFd3ezNjxkqpofDzWO52aDX1XuB3T2H9Z77QKb0fBd0D8jBlL49Zrn9A7oBj6zFfWew2qmXiXX/IcX3ZRQZd3xlib5v5jM15kO4YKvMuPzfiFLwwMFpZ6lx/SS15lfOzGZXwW7acciNulfZFZ2o5p7j8242VuR3zG30ouzLLKd0C4Hq9ZD8YhCIxDEBiHIDAOQWAcgsA4BMYhqAkZr+07oOxEZLmB0r3UpHyKdmgsU2E/6dHhyg5msqN0mVSc4zxc6f5D0YxXFM8pWM7tLngSZiQmrhglC6qqXTeMQzVmvNx4zuzEMP3vqAPGU47Njuo+VcK2q/VgfE4wHiueUzCuzuvtg8Kep0fP2pzbfcJvcM15udx1GbU+t+Gk8HUEROnR8yl8kOpml+b6z/JjZVNjS3Pz23I7uF6oPIvbTW957yj5WMLTEr6WX14s069O/1yOm5mQTU5teJ2uZ9rZ8rZgf7qf0H467ctjkdzh55v9U/Xk8jyLcWc/zHHS/fP+qCtvYNi0A1XPeMx4TsH4ywcF52Mt2YEOOifHW7ykPIeq3MeWe63CJiX7V3nep8WJSioGaVn8NrAkk7U8zlQuQf/oi32u55Zn8XqCIJF910nLPutSejND/Qft+EDCGxjLpDr8emzHnf64H3c/3faJ8dSGjN8v75+uJ5cnLMbd/dDtWP3r/R+WgQymHagGjMeL5+RnS3UOHj4pUxUXaMplJxLyv2cxKMulhL084dl/84AIo3/iZHpcJ1A++FybECsSjg8SZDzUf5DxZEf6FWefSCbCjDv96X4K7Gew/WRHYL95/0w9sVxkP7gdq39Nurg/JEz/oLYWjMeL5yQ7Ls+O7ysMszOpyrWeTfkJ278MMCsLFWJc14tknNebhiMYD/UfZDw1tiaR7BA+QEnGh3n0KbCfbvvJFylYdT7vH9eTy0X2g9sJMU4V068+6bm+FlQV47HiOYWvkiJDziHdys48bex4enR+ppgdj2L8dbpeFOPcbinGw/07jB//jRNTT58Xm3F3P0PtJzuS/cN+v7x/XM9l3N2PSDtOXpUw5VboPFQ947HiOeUz54Dwq0WglPAjx8j/ZMujRvCmhGWTfubijMssjclkWjcfL8C4rhfJuF7vM87D8Q7jbv+pwLD91CBt74TMYsb7TxRh3N3PUPsEYlI+K6p8s3+6nmC4dbTIfuh2woyn+mXUvG4H1NZgfDxmPKdkXHgr2avpLnpTS3rLWYNqnEGXo2GAHWsGE/Lv6amAwSCzUzQ8Ma+Ar2LqRfgqvN4wnm3Tb52Cvkqof1POd7OTNktqfSTj7n667Uu/mSDnfN4/XU8tF9sP1U6Y8eyETLkdqAo7XlJFC1Y0rpsaazi7VNZ+NuD+NSnjNXmXXzbjrcttX735GG/Q/WtOxmfBvvGteUemeRlv0P0D4xAExiEIjEMQGIcgMA5BYByCwDg0dxif8fk5IWimGa+r+TkhaLoYr5f5OSFoBhivzfycEFSvjNdqfk4IqlvGazQ/JwTVLeNVzs+JFGmcdHYZr9n8nBBUp3a8JvNzQlC9MV7r+TkhqP7seEmBcahRGce7fKjJGYcgMA5BYByCwDgEgXEIAuMQBMYhCIxDc5Hxhn0HdGFPPr9of8TKkb7DvOpQT7WfuY3nu6yl6tuDZprxiuI5R/roE8lNpxRpvTN/oFjnh66lBs7prnzr2/PXdHunew3HuHNchi7J59/XHb3cSYepK3zc2vMPdNNO0pqhbWK9PB/ieJr1k2q7xfJfL/Pk6pn8qLUOGS83nnOk74HukWs3rauU8UM9dI6G/tSrhvFi7VuMV68g41UqeFyGth1etrJvMnLZ7Z2PW7sgXzJ+qEeQK/eXmvbXK8bpguxeKY+FXOOB8fjxnILxoW3EuLA7iyi5sUeZZfnLonXKrtCxXUl2ZNEycWrff61lkaQd0udMnJ++T/b9yTY6+Zya9nS9TnHOhrYd8FmQdqkrqn3avkvym7rUN/mTbP9oPZfT2+2N/AFln+Kn3D73r+vxdnF7pn3D3jVy2d1u7ofLm+Ni3xTGfVvhLruM83FrF41IxsdfJhCWjBPY/nrFuGxKmgNm/FBPDa/+xmQ8ZjynYPy5ecH54WX0f//Qm5Z5F9JxJfYWet6Lu9leiSMrr4XO/KaF8pwYX2fT+7stxl/Wd802Oi2ccntcb6SP2mi3z317qfYXim1kbKgPso+ScVnObLeoe/qHPE4N47p/WY+8Ad4uvz3Tvs7MLxRtuNvN/fjlg3Zc7kWnfe0Hl13G+bi1H35BflLs70jfwnFp0g/vF9tp1mvGtQmfBOM24/HiOaU9ooPWrs5nF9tk31lV51KuEidOLFoMksEjf36hbccV4580LKmzwvXIkA9tmwz5KlHtiza1vyI3yfinuhxvN12T5yxT9wWZuv6UYeWTLuOmfT/TOg5uP375IOOdDtOdJRjn49Z++Pk9m36F9rf98P522RWdj9MW+uuV/93luynwVcqN5ySb9Ny8vD1KHZCjHHnNhMX4uGJwsoB7vpJu3usiGdftmXpU6DcDt/D2ou2HGT/gM67u9Wq72dfhlOMNzf4cKM64Lq8ZP+BuN/cTxXhsO+7HQcrjRmh35k/r6VL56hjaxzXajoPxuPGc4r47TueDmRajHMqO85EsYMcLPH5FMc7t+fU6nVGB9qLtl2Z80rrW5DZzGtifkowH/Oh8l7vd3E8U4+X643zc2oWblRf3hy7pZwWescX6SH8cjMeN5xSMC89O+d8rP6RMqfCNxcjX6coj7B7qtvzlAIMryfVdKc/NA92d+UKMq/b8euTxdoUZj2rfZVz085xn+4zzdg/9Id3FxfOzTv3WVf9qP+MwLvx94TcEt5v78cur4xIeR1F+srvsMs7HrV3dQ7va9WXD22LWR46rzF1/vNx4Tvn8JAY75EDCaQuFGyjv/XpcRTmGh9dZ4x4BBtvfmlfFyDyfc22YcdOeX288aIf02GFE+y7jXnvPplMsO87bPfJHeTl+zKnt9sr+23vy51wSh/G8Hl9ytpv7MeX1cQmNh2v23GUxPp737TofN8m2sNPqcnjg1/S2mPXO+DgYj6VZjue0H1grHecuNp5fnfDys64Zb5B3+Z3VuZMXvnBaPVIwXs+MN4bapWNTDeNvVT4NGAfjEATGIQiMQxAYhyAwDkFgHILAOATG5U/8TU+o6RnH/JzQnGAc83NCc4hxzM8JNTfjmJ8TanrGMT8n1OyMx5yfE4Ial3HMzwk1O+OYnxNqSsYxPyfU/Ha8pMA41KiM410+1OSMQxAYhyAwDkFgHILAOASBcQgC4xAExqG5yHhl74DSo8P860Dp2iWUCrRQfXtQDRWPj7ia6XeJ1cRzWoxXrxSonjZ98/PHjh37572PHPs/z3vk2A+8o/96J2V8ldOjP6Sfxx76EZczqc944U84shcsfdg+a9m2XG5HxkkLXzRPzxLj5cZz1i/jqbEMyPYRv/Puvd7RKzxm/Oj3jt2117v/Wyb94f/+j12O01JIZlec//oA48mxTHYgYaVLMq0TiXplPFY8Z3rL2zbn+oflvUdClV2a6z+L9jq95b2j8t52+2BuNyXpzTl5QXPKWnNeLnddRtWbd/xkamxpbn5bbge3lx49X7bvX1Nnbc7tPuHXc/rh8uLOWst7a6PrkWN371WpYlymvExixv1yd++NieSUzXh2YljmcJreciJobvzzP/uMx4znTI/2rxLXrLqChRe9hK7f4wK2XCL7rpOU25Id6KD8joyXXe6nrI8t91rFvUDUmyDGcwn6N7Uho9uz2tf9HW/xktQ+13P68cvDjtsiX+Shr+71Gf8euStCnDLjXI7TchmX93UqyqlcaZfwz38dMB4vnlPui/IxFJPiuhX7lB5N+PtMywO7V6l91Kl9v6N7mbrehR3P0D+b8eGADyOXZWFVz+3HLw/Gg5D/I7nbX/IZJ9dbMq5T5Y/fZcqZtEzGvQHyUdroaVKn8lTYVf3zXweMx4vndBmXKxXjw/w0Ln2GbNug9DE4HRD5ZN9bz6Y0oeoVY1yXV4zTD13P7QeMR+r+f6BnylJ2nMtZaXmMC5/zz159ktOQHefzXx+Mx4rnLMW4NrlSi9sUdpyq+vMzwh6XZDx0L1T13H7AeBH9x7G7vnmnYFyzXsAf53KBtBzG7cd9SkP+uH/+64HxWPGcLuPZiY5M6+bjhnG6N7V43qcz2Y+SG3b1mEn9+gu8KXI3BK+to3EYF8/rdOx0Pbcfi3Fn+FV4+3Mx1cb5W/T/yw/9iFimsRTiWY+neM64CpfjND7jur/FGfWcxKkzrmKd/1ljvNx4Tpdxb4qGPeb5dpx2iLyIm1qyK2TicWpEwyE71gwmVL0YjG85a1COp3A9px+/vBiYtTGf24w/8k/kbt9NyN7/eZXKcfG//RKnyh8/dheXM+VLjR1OCB9ROI26PzG8tcpKnfFx6/zPoh0vqdIFp9FNqOl4PFSGao7kbDBem3jO1uVqvAOMNxvjTfAuv0ZaM6je4YJxqI6E7w4hMA5BYByCwDgEgXEIAuMQBMYhKJrxBoznFOWTHTiBMyLEc9ZE5ca6gfH4qnU8Z3Iw1/9hLxzP6bVSoM98P57Ta4uCGfGcYLy2iNc6nvOCDFn24XA859TT9CXWcj+eM3W8JdtW8PslxHNGxHOa+rq8ZDy5AxCX0LTEcw7I75KcOCD1rRLHc8qvR5OI5ywnntNvR5UXjKc2IBqilKYjnpNDsAIxyyt+fbOKHVexLMT07nk3WQUQz1ny+3Guz+WJcczdEgvymsdzZtuUyXZillUMi4nrzC49Y/A6ywYhnrNkPCfX5/Je8kWjCRAcRzWO58yu0Me9YFy+iesk36V1wroPI56ztB3X9X3GO5L9+Nw2nmoZz+kHCRT8+ypqTGAsY5h3zp+HeM5Ixk07urzwx4OQz9WYthmO5xww5zAYz5nSz186njM7sSTwzIl4zhiMc31dXo2r2JCD7ZmI5xTjXsLHDMVzihOq422l551ekcvtbvFC5w/xnFDdCfGcRtMczwnNGuOI52RNczwnBM064xAExiEIjEMQGIcgMA5BYBwC4xDUZIzXQTxnEYl3xv34hnYWVfU7oAAfczaes8RBxnfiVahW8Zz898TdOE75AYtgoS0uvHMznhOMTx/itYrn1PNChOI4GYTo+M16ZHxm4jnF+twGOUeS+F7NxG9acZs5FUei+9XtQWWpVvGc1vw+wW9qmXEnfrNIfO7ciedMUn3xfTl9d67m+dHt6XKcb/rl9qCyVKt4TmueNpfx3KnyW9pg/GaR+Nw5E8/J3yiq+CE9d6mMbVPlOJ9/Ne1BZUJem3hOa77N0FlYI/xwJ36zSDzAnInn9N24k7Ix054ux/kGd8wRXqlqEs8ZtuP2yEnCc+M365zxGYnnjLTjnhW3advxLXjwrFg1iOcM++NBxt34zTpnfEbiOZU/vtjyx1V7ftym44/r9mxvBzFtxVJtnGsVz+nPtxmal1P4Km78Zj0yPuPxnDKogrg14yqacS7njqvo9sD4LMVz6vHxUBxnajB36ku9UPxmfdrxGoxrIp6zCYV4TiPEczYr44jntF0PxHNCdSZ8dwiBcQgC4xAExiEIjEMQGIcgMA5B0YzX6B0QBNUv4xXFc0JQozFebjwnBDUw47HiOSGoYRmPGc8JQY3LeLx4TghqXMbjxXN643nSJFKklaWzy3iseE4IamA7HiueE4IajfFy4zkhqPHseEmBcahRGce7fKjJGYcgMA5BYByCwDgEgXEIAuMQBMYhCIxDc5FxvAOCmp7xiuI55d+tfuirZp6Zb94p/471D2gOAjkJxyPHnL9jXfU8kRBUHePlxnMe/eHde++nOQgMs95RNfuAYfwu74pj/jwc1c8TCUE1YzxWPKdg/OiXizMu5uPg8tXPEwlBNWI8ZjynYPwKQrgo4wywV4t5IiGoVozHi+dU/viPYjNe/TyREFQrxuPFcyp/3J/3MYJxaw68aueJhKCaMR4rnlMwbs/7WJBx/btRVfNEQlDNGI8Vz6meOWl8hOd9LDSucqf/3Fj9PJEQVB3j5cZz8vg4z/tojY/LkfErjgWHt6ufJxKCqrXjJYV4TqhRGce7fKjJGYcgMA5BYByCwDgEgXEIAuMQBMYhCIxDc5FxvAOCmp5xzM8JzQnGMT8nNIcYx/ycUHMzjvk5oaZnHPNzQs3OOObnRIr5OSGowe045ueEmpJxzM8JNb8dLykwDjUq43iXDzU54xAExiEIjEMQGIcgMA5BYByCwDgEgXFoLjI+Pe+AshOR5QdK91YTzVQ/UP0zXlE8JyEsNJaJbr427/6zbbncDkqTg7n+D1v5vOzmQ1AE4xXEcw50BBZTLu9O+VSx6yFaySWZ1omE512QoTvOsJ/Py24+BJVmPG48p2I8uzSXuy4jPR7p86w5Ty675Xm98HkE7Kmxpbn5bcJC3z6Y231SejeFfIv0lhP+5TGQCJaTy1bq+e1yP+nR8zfn+nENgHGL8fjxnJLx7ERHJjugqJUgfmy51zo6XMyOJ2XpXIL+TW3IJMdasrqlQoxPPXxS/xC8DgfKqWU/lb1wu7qf9Gj/KvUbBMbLjueUZMpM+cP3RbITidKMj2Xo39SG1wk+NcOFlBJAq5aybQnHU08EUu5FtuszPqwbgcB4mfGcmnGJjwJJMdx6Nvkk8Rn/VfZxoh5cjR3PrnAQ18vBfDAOxWA8bjxnQTueHp2fKcuObyk++GL8cd2oj7hedvLBOBSD8bjxnK4/LofD06MLvKnRgozzcHmA8czA7hbP+3Qmyh834yoDfInocrw8EPS1wTgUxXgF8ZyBcRU1kE0Y0zDJjjWDiXB5vd5lPHs1eSs3tUQyrsfHxTiJ8oFUOV7288E4VMqOlxTiOaFGZRzxnFCTMw5BYByCwDgEgXEIAuMQBMYhCIxDEBiH5iLjVb8DcuMmA8v2t91GeLcOzSzjlc3PmcoFPxSJvDaqZJzjNcNxndkJ+3MsXr+GLtkd0fkmDjV7wVL51Xo4HpTbDbbP5eQHMsPh9r22oBHgfLMemm3Gy47njBmeGZ/xiAY5XjMc15k8I8CgXr9YxCEliuWr7yVXnP96yXg4HpTbDbbP5dwd4vZTx1uybVYFzucUqifG48VzaiTduEle9tKbc8KApbe8TcdT6rhN+k6xf57FuI7/NPGghb4/pHjNcFxnaod9VYTXR+ZzrLUffRSIE+V2OXXiR33Gkwm7/aT+z99F6vxA/1B9MB43ntM/b27cpPo50EFxDcv9fI7bHFiSCVBs4j+5wTDjAqtQXCd9PmujY69/+U0ni+WHGA/EiXK7pn0nfpQu4lNX+Yyb9tObd8+7yY+95ny7f6heGI8Zz5kyf17F/U5bM757leEiJeLxVdymsmtBilUoT6Sxk/Gablxn+hUnAzX89QO5/gVesXyX8UA8KLfrtm+XW6P8bsm4aT+79IzB68LbY203VDeMx4znDNlxh/FsG/kmJ0w++yIqLM5i3MR/RjGu4jXduE71yEuwDYi0I2CvWzeLuKGI/BDjTjyobte072wH+yxJ9ew6bNqnvFbrIRV2vK4ZjxfPWYpx0mJ6BjN2XMdtuoz78Z8RjOt4zUJxnZH+uPW3JgrkBxnPhh8IuXhgi+xyyq8P+OPqPuUfIfjjdc14vHjOEoxnP0o4Xu0z7um4TYFK66jNOMd/cryn449zvGYortNBx4yfZMiedhTLDzLuxomGGHfiR6kd21fh9rMTSwLPnBhXqePx8bjxnKUYX6HCNE0+x21Obc7ttsdVTPwnx3sGGTfxmqG4TtfO6nHo23OFx8f9fB1rrcb33TjRKMZNudRg7tSX+s+cpv30ilxOXMbcDsbH69COlxSenKBGZRzxnFCTMw5BYByCwDgEgXEIAuMQBMYhCIxDEBiH5iLjeAcENT3jlcVzQlCDMV7B/JwQ1KiMx52fE4Iak/H483NCUIMyHnt+TghqUMZjxnOO50mTSJFWls4u43Hn54SgRrXjcefnhKCGYryC+TkhqMHseEmBcahRGce7fKjJGYcgMA5BYByCwDgEgXEIqr1+CZCw3u4cV09VAAAAAElFTkSuQmCC" width="739" height="282" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å‰ç«¯éƒ¨åˆ†">å‰ç«¯éƒ¨åˆ†<a href="#å‰ç«¯éƒ¨åˆ†" class="hash-link" aria-label="å‰ç«¯éƒ¨åˆ†çš„ç›´æ¥é“¾æ¥" title="å‰ç«¯éƒ¨åˆ†çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ä¾èµ–å®‰è£…">ä¾èµ–å®‰è£…<a href="#ä¾èµ–å®‰è£…" class="hash-link" aria-label="ä¾èµ–å®‰è£…çš„ç›´æ¥é“¾æ¥" title="ä¾èµ–å®‰è£…çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>æ§åˆ¶å°çš„å‰ç«¯é¡¹ç›®è¦æ±‚ NodeJS çš„ç‰ˆæœ¬ä¸ä½äº 16ï¼Œæ‰€ä»¥è¯·ç¡®è®¤æœ¬åœ°å®‰è£…çš„ NodeJS ç‰ˆæœ¬æ»¡è¶³è¦æ±‚ã€‚</p><p>ç„¶åä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…é¡¹ç›®æ‰€éœ€çš„å„ä¸ªä¾èµ–åŒ…ï¼š</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="é¡¹ç›®å¯åŠ¨">é¡¹ç›®å¯åŠ¨<a href="#é¡¹ç›®å¯åŠ¨" class="hash-link" aria-label="é¡¹ç›®å¯åŠ¨çš„ç›´æ¥é“¾æ¥" title="é¡¹ç›®å¯åŠ¨çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¥‘åˆå¯åŠ¨å‰ç«¯é¡µé¢é¡¹ç›®ï¼š</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> start</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="img.png" src="data:image/png;base64,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" width="876" height="263" class="img_ev3q"></p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå‰ç«¯é¡µé¢ä¼šè®¿é—® Higress å®˜æ–¹æä¾›çš„æ¼”ç¤ºç‰ˆæ§åˆ¶å° APIã€‚å¦‚æœä¸å¸Œæœ›å½±å“çº¿ä¸Šæ¼”ç¤ºæ•°æ®ï¼Œæˆ–éœ€è¦ä¸åç«¯ API è¿›è¡Œè”è°ƒçš„è¯ï¼Œå¯ä»¥ä¿®æ”¹é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ <code>ice.config.mts</code> æ–‡ä»¶ï¼Œå°†å…¶ä¸­çš„ <code>http://demo.higress.io/</code> æ›¿æ¢ä¸ºæœ¬åœ°çš„æœåŠ¡åœ°å€ï¼ˆä¾‹å¦‚ï¼š<code>http://127.0.0.1:8080/</code>ï¼‰ï¼Œç„¶åé‡æ–°å¯åŠ¨å‰ç«¯é¡¹ç›®ã€‚è¿™æ ·é¡µé¢ä¸Šè®¿é—®çš„å°±æ˜¯æœ¬åœ°çš„æµ‹è¯•æœåŠ¡äº†ã€‚</p><p><img loading="lazy" alt="img.png" src="data:image/png;base64,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" width="433" height="145" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="é•œåƒæ„å»º">é•œåƒæ„å»º<a href="#é•œåƒæ„å»º" class="hash-link" aria-label="é•œåƒæ„å»ºçš„ç›´æ¥é“¾æ¥" title="é•œåƒæ„å»ºçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>åœ¨å‘½ä»¤è¡Œä¸‹è¿›å…¥ <code>backend</code> ç›®å½•å¹¶æ‰§è¡Œ <code>build.sh</code> å³å¯å¯åŠ¨é•œåƒæ„å»ºã€‚æ„å»ºç”Ÿæˆçš„é•œåƒåç§°ä¸º <code>higress-console:0.0.1</code>ã€‚</p><p>æ³¨æ„ï¼šå¦‚æœå°è¯•åœ¨ Windows ä¸‹æ„å»ºï¼Œè¯·åŠ¡å¿…ç¡®è®¤è¯¥ç›®å½•ä¸‹çš„ <code>start.sh</code> ä½¿ç”¨çš„æ˜¯ Linux çš„æ¢è¡Œç¬¦ï¼ˆå³ <code>LF</code>ï¼‰ã€‚å¦åˆ™ï¼Œæ„å»ºç”Ÿæˆçš„é•œåƒå°†æ— æ³•æ­£å¸¸è¿è¡Œã€‚</p><p><img loading="lazy" alt="img.png" src="/zh-cn/assets/images/image-build-f640299dc16ddf34dc5cdc5fd7aa2bde.png" width="994" height="399" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ€»ç»“">æ€»ç»“<a href="#æ€»ç»“" class="hash-link" aria-label="æ€»ç»“çš„ç›´æ¥é“¾æ¥" title="æ€»ç»“çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>æ§åˆ¶å°ä¸ºç”¨æˆ·æä¾›äº† Higress æ²»ç†ä¾§çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œä¸ºç”¨æˆ·æä¾›äº†åŸºç¡€çš„å¼€ç®±å³ç”¨ä½“éªŒã€‚ç¤¾åŒºä¹Ÿä¼šåœ¨æ§åˆ¶å°æ–¹é¢æŒç»­å‘åŠ›ï¼Œä¸ºç”¨æˆ·æä¾›æ›´ä¸°å¯Œçš„ã€æ›´ä¾¿æ·çš„ç½‘å…³æ²»ç†ä½“éªŒã€‚å¸Œæœ›æœ¬æ–‡å¯ä»¥è®©æ›´å¤šçš„å¼€å‘è€…åŠ å…¥æ§åˆ¶å°çš„ç ”å‘é˜Ÿä¼ä¸­ï¼Œä¸ºæ§åˆ¶å°çš„å‡çº§è¿­ä»£è´¡çŒ®ä¸€ä»½åŠ›é‡ã€‚</p><p><a href="https://github.com/alibaba/higress/issues/480" target="_blank" rel="noopener noreferrer">æ¬¢è¿å‚ä¸é˜¿é‡Œå¼€æºè´¡çŒ®ğŸ‘</a></p></div><footer class="row docusaurus-mt-lg"></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="description" content="ä»‹ç»å¦‚ä½•ä½¿ç”¨ Higress Admin SDK æ¥ç®¡ç† Higress çš„æœåŠ¡æ¥æºã€æœåŠ¡è·¯ç”±ç­‰å„é¡¹é…ç½®ã€‚"><meta itemprop="keywords" content="Higress,SDK,Config"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/zh-cn/blog/admin-sdk-intro">å¦‚ä½•ä½¿ç”¨ Higress Admin SDK è¿›è¡Œé…ç½®ç®¡ç†</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-02-08T00:00:00.000Z" itemprop="datePublished">2024å¹´2æœˆ8æ—¥</time> Â· <!-- -->é˜…è¯»éœ€ 5 åˆ†é’Ÿ</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><span itemprop="name">CH3CHO</span></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>Higress ä¸€ä¸ªéµå¾ªå¼€æº Ingress/Gateway API æ ‡å‡†ï¼Œæä¾›æµé‡è°ƒåº¦ã€æœåŠ¡æ²»ç†ã€å®‰å…¨é˜²æŠ¤ä¸‰åˆä¸€çš„é«˜é›†æˆã€æ˜“ä½¿ç”¨ã€æ˜“æ‰©å±•ã€çƒ­æ›´æ–°çš„ä¸‹ä¸€ä»£äº‘åŸç”Ÿç½‘å…³ã€‚è€Œé…ç½®ç®¡ç†ç½‘å…³çš„è¿ç»´å·¥ä½œä¸­æ‰®æ¼”è€…é‡è¦çš„è§’è‰²ã€‚å¦‚ä½•è®©é…ç½®ç®¡ç†è‡ªåŠ¨åŒ–ï¼Œå°¤å…¶æ˜¯ä¸å…¶ä»–çš„è¿ç»´ç³»ç»Ÿè¿›è¡Œå¯¹æ¥ï¼Œå°±æˆä¸ºäº†ä¸€ä¸ªéå¸¸è¿«åˆ‡çš„éœ€æ±‚ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨ Higress Admin SDK æ¥ç®¡ç† Higress ç³»ç»Ÿå†…çš„å„ç±»é…ç½®ã€‚å¸Œæœ›èƒ½å¤Ÿå¯¹å­˜åœ¨æ­¤ç±»éœ€æ±‚çš„æœ‹å‹æœ‰æ‰€å¸®åŠ©ã€‚</p><h1>2. Higress Admin SDK</h1><p>Higress Admin SDK è„±èƒäº Higress Consoleã€‚èµ·åˆï¼Œå®ƒæ˜¯ä½œä¸º Higress Console çš„ä¸€éƒ¨åˆ†ï¼Œä¸ºå‰ç«¯ç•Œé¢æä¾›å®é™…çš„åŠŸèƒ½æ”¯æŒã€‚åæ¥è€ƒè™‘åˆ°å¯¹æ¥å¤–éƒ¨ç³»ç»Ÿç­‰éœ€æ±‚ï¼Œæˆ‘ä»¬å°†é…ç½®ç®¡ç†çš„éƒ¨åˆ†å‰¥ç¦»å‡ºæ¥ï¼Œå½¢æˆä¸€ä¸ªç‹¬ç«‹çš„é€»è¾‘ç»„ä»¶ï¼Œä¾¿äºå„ä¸ªç³»ç»Ÿè¿›è¡Œå¯¹æ¥ã€‚ç›®å‰æ”¯æŒæœåŠ¡æ¥æºç®¡ç†ã€æœåŠ¡ç®¡ç†ã€è·¯ç”±ç®¡ç†ã€åŸŸåç®¡ç†ã€è¯ä¹¦ç®¡ç†ã€æ’ä»¶ç®¡ç†ç­‰åŠŸèƒ½ã€‚</p><p>Higress Admin SDK ç°åœ¨åªæä¾› Java ç‰ˆæœ¬ï¼Œä¸”è¦æ±‚ JDK ç‰ˆæœ¬ä¸ä½äº 17ã€‚</p><h1>3. å¼€å‘å®æ“</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="31-ç¯å¢ƒå‡†å¤‡">3.1 ç¯å¢ƒå‡†å¤‡<a href="#31-ç¯å¢ƒå‡†å¤‡" class="hash-link" aria-label="3.1 ç¯å¢ƒå‡†å¤‡çš„ç›´æ¥é“¾æ¥" title="3.1 ç¯å¢ƒå‡†å¤‡çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>è¿™é‡Œæˆ‘ä»¬ä»¥æœ¬åœ°åŸºäº Kind æ­å»ºçš„ K8s é›†ç¾¤ä½œä¸ºå®éªŒç¯å¢ƒã€‚æ‰€ä»¥é¦–å…ˆï¼Œè¯·å¤§å®¶å‚è€ƒè¿™ç¯‡<a href="https://higress.io/zh-cn/docs/user/quickstart#%E5%9C%BA%E6%99%AF%E4%BA%8C%E5%9C%A8%E6%9C%AC%E5%9C%B0-k8s%E7%8E%AF%E5%A2%83%E4%B8%AD%E4%BD%BF%E7%94%A8" target="_blank" rel="noopener noreferrer">æ–‡æ¡£</a>åœ¨æœ¬åœ°å®Œæˆ K8s é›†ç¾¤çš„æ­å»ºå’Œ Higress çš„å®‰è£…ã€‚</p><p>ç„¶åï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªæµ‹è¯•ç”¨çš„ K8s æœåŠ¡ã€‚å¤§å®¶å¯ä»¥å°†ä¸‹æ–¹çš„ YAML ä¿å­˜ä¸º <code>test.yaml</code>ï¼Œç„¶åæ‰§è¡Œ <code>kubectl apply -f test.yaml</code> å‘½ä»¤åœ¨ K8s ä¸­åˆ›å»ºå¯¹åº”çš„èµ„æºã€‚</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">demo</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">demo</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mendhak/http</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">https</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">echo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">29</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">demo</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8080</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="32-ä»£ç ç¼–å†™">3.2 ä»£ç ç¼–å†™<a href="#32-ä»£ç ç¼–å†™" class="hash-link" aria-label="3.2 ä»£ç ç¼–å†™çš„ç›´æ¥é“¾æ¥" title="3.2 ä»£ç ç¼–å†™çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>è¿™é‡Œçš„ç›®æ ‡æ˜¯åˆ›å»ºä¸€ä¸ªè·¯ç”±ï¼Œä½¿ <code>http://www.test.com/</code> è¿™ä¸ª URL æŒ‡å‘æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„ <code>higress-demo-service</code>ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç¬¬ä¸€æ­¥é…ç½®ä¾èµ–">ç¬¬ä¸€æ­¥ï¼šé…ç½®ä¾èµ–<a href="#ç¬¬ä¸€æ­¥é…ç½®ä¾èµ–" class="hash-link" aria-label="ç¬¬ä¸€æ­¥ï¼šé…ç½®ä¾èµ–çš„ç›´æ¥é“¾æ¥" title="ç¬¬ä¸€æ­¥ï¼šé…ç½®ä¾èµ–çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>æ ¹æ®é¡¹ç›®æ‰€ä½¿ç”¨çš„æ„å»ºå·¥å…·æ¥æ·»åŠ  Higress Admin SDK ä¾èµ–ï¼š</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">io.higress.api</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">higress-admin-sdk</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">0.0.2</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-gradle codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gradle codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">implementation</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;io.higress.api:higress-admin-sdk:0.0.2&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç¬¬äºŒæ­¥åˆ›å»º-higress-sdk-å®ä¾‹">ç¬¬äºŒæ­¥ï¼šåˆ›å»º Higress SDK å®ä¾‹<a href="#ç¬¬äºŒæ­¥åˆ›å»º-higress-sdk-å®ä¾‹" class="hash-link" aria-label="ç¬¬äºŒæ­¥ï¼šåˆ›å»º Higress SDK å®ä¾‹çš„ç›´æ¥é“¾æ¥" title="ç¬¬äºŒæ­¥ï¼šåˆ›å»º Higress SDK å®ä¾‹çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">String</span><span class="token plain"> kubeConfigFile </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">Paths</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getProperty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;user.home&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/.kube/config&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">toString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">HigressServiceConfig</span><span class="token plain"> config </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">HigressServiceConfig</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">builder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">withKubeConfigPath</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">kubeConfigFile</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">HigressServiceProvider</span><span class="token plain"> provider </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">HigressServiceProvider</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ K8s é›†ç¾¤å¤–çš„é…ç½®æ–¹å¼ï¼Œæ‰€ä»¥éœ€è¦è®¾ç½® kubeConfig æ–‡ä»¶çš„è·¯å¾„ï¼Œä»¥ä¾¿ SDK æ“ä½œ K8s å†…çš„å„ç±»èµ„æºã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç¬¬äºŒæ­¥åˆ›å»ºåŸŸå">ç¬¬äºŒæ­¥ï¼šåˆ›å»ºåŸŸå<a href="#ç¬¬äºŒæ­¥åˆ›å»ºåŸŸå" class="hash-link" aria-label="ç¬¬äºŒæ­¥ï¼šåˆ›å»ºåŸŸåçš„ç›´æ¥é“¾æ¥" title="ç¬¬äºŒæ­¥ï¼šåˆ›å»ºåŸŸåçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ SDK ä¸­çš„ <code>DomainService</code> æ¥åˆ›å»ºä¸€ä¸ª <code>www.test.com</code> åŸŸåï¼Œå¹¶å°†è¯¥åŸŸåè®¾ç½®ä¸ºåªå¼€æ”¾ HTTP è®¿é—®ã€‚</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">Domain</span><span class="token plain"> domain </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">Domain</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">builder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;www.test.com&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">enableHttps</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Domain</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">EnableHttps</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">OFF</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">provider</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">domainService</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">domain</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç¬¬ä¸‰æ­¥åˆ›å»ºè·¯ç”±">ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºè·¯ç”±<a href="#ç¬¬ä¸‰æ­¥åˆ›å»ºè·¯ç”±" class="hash-link" aria-label="ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºè·¯ç”±çš„ç›´æ¥é“¾æ¥" title="ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºè·¯ç”±çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ SDK ä¸­çš„ <code>DomainService</code> æ¥åˆ›å»ºä¸€ä¸ªåä¸º <code>higress-demo</code> çš„è·¯ç”±ã€‚è·¯ç”±ç»‘å®š <code>www.test.com</code> åŸŸåï¼ŒåŒ¹é…æ‰€æœ‰ä»¥ <code>/</code> å¼€å¤´çš„è¯·æ±‚ï¼Œå¹¶å°†è¯·æ±‚è½¬å‘è‡³ <code>higress-demo-service.default.svc.cluster.local</code> æœåŠ¡çš„ 8080 ç«¯å£ã€‚</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">Route</span><span class="token plain"> route </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">Route</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">builder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;higress-demo&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">domains</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Collections</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">singletonList</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;www.test.com&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">path</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">RoutePredicate</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">builder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">matchType</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">RoutePredicateTypeEnum</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">PRE</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">matchValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;/&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">services</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Collections</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">singletonList</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token class-name">UpstreamService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">builder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;higress-demo-service.default.svc.cluster.local:8080&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">provider</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">routeService</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">route</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="33-æµ‹è¯•éªŒè¯">3.3 æµ‹è¯•éªŒè¯<a href="#33-æµ‹è¯•éªŒè¯" class="hash-link" aria-label="3.3 æµ‹è¯•éªŒè¯çš„ç›´æ¥é“¾æ¥" title="3.3 æµ‹è¯•éªŒè¯çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>æ‰§è¡Œç¼–å†™å¥½çš„ä»£ç ï¼šç¡®è®¤ä¸€åˆ‡æ­£å¸¸ã€‚ç„¶ååœ¨ Shell ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œæ£€æŸ¥è¯·æ±‚è·¯ç”±æƒ…å†µã€‚</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -svk http://localhost/ -H </span><span class="token string" style="color:#e3116c">&quot;Host: www.test.com&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>èƒ½å¤Ÿä»¥ JSON æ ¼å¼è¿”å›è¯·æ±‚çš„è¯¦ç»†ä¿¡æ¯å°±è¯´æ˜è·¯ç”±é…ç½®å·²ç»å¯ä»¥æ­£å¸¸å·¥ä½œã€‚</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;path&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;headers&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;host&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;www.test.com&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;user-agent&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;curl/8.4.0&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;accept&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;*/*&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;x-forwarded-for&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;10.42.0.230&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;x-forwarded-proto&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;http&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;x-envoy-internal&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;true&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;x-request-id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;4a3db96b-c46c-4c8a-a60f-a513f258736d&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;x-envoy-decorator-operation&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;higress-demo-service.default.svc.cluster.local:8080/*&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;x-envoy-attempt-count&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;x-b3-traceid&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;a426d189c027371957f008c2cb2e9e8f&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;x-b3-spanid&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;57f008c2cb2e9e8f&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;x-b3-sampled&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;req-start-time&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1707363093608&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;original-host&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;www.test.com&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;method&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;GET&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;body&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;fresh&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;hostname&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;www.test.com&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;ip&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;10.42.0.230&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;ips&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;10.42.0.230&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;protocol&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;http&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;query&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;subdomains&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;www&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;xhr&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;os&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;hostname&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;higress-demo-app&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;connection&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-æ€»ç»“">4. æ€»ç»“<a href="#4-æ€»ç»“" class="hash-link" aria-label="4. æ€»ç»“çš„ç›´æ¥é“¾æ¥" title="4. æ€»ç»“çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ç›®å‰ Higress Admin SDK æ”¯æŒçš„åŠŸèƒ½è¿˜æ¯”è¾ƒç®€å•ã€‚æœªæ¥ç¤¾åŒºä¹Ÿä¼šåœ¨è¿›ä¸€æ­¥ç€åŠ›å¢å¼º Higress çš„æ²»ç†ä¾§åŠŸèƒ½ï¼ŒSDK çš„èƒ½åŠ›ä¹Ÿä¼šä¸æ–­å®Œå–„ã€‚å¤§å®¶å¯¹ SDK å’Œ Console æœ‰ä»»ä½•ç–‘é—®å’Œå»ºè®®ï¼Œéƒ½æ¬¢è¿åœ¨ <a href="https://github.com/higress-group/higress-console" target="_blank" rel="noopener noreferrer">GitHub</a> ä¸Šæå‡ºã€‚æ„Ÿè°¢å¤§å®¶çš„æ”¯æŒï¼</p><p>ä»¥ä¸Šå®æ“è¿‡ç¨‹çš„é¡¹ç›®ä»£ç å¯ä»¥åœ¨è¿™é‡Œä¸‹è½½ï¼š<a target="_blank" href="/zh-cn/assets/files/20240208_higress-admin-sdk-demo-f1a76d3b8534c6c881dd6404e406ee4e.zip">ä¸‹è½½é“¾æ¥</a></p></div><footer class="row docusaurus-mt-lg"></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="description" content="é€šè¿‡åˆ†æhigress-coreæºç ï¼Œäº†è§£higress-coreè‡ªå¯åŠ¨ä»¥æ¥åšäº†å“ªäº›äº‹æƒ…"><meta itemprop="keywords" content="higress"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/zh-cn/blog/higress-code">higress-coreæºç åˆ†æ</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-01-25T00:00:00.000Z" itemprop="datePublished">2024å¹´1æœˆ25æ—¥</time> Â· <!-- -->é˜…è¯»éœ€ 27 åˆ†é’Ÿ</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><span itemprop="name">SJC</span></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¼•è¨€">å¼•è¨€<a href="#å¼•è¨€" class="hash-link" aria-label="å¼•è¨€çš„ç›´æ¥é“¾æ¥" title="å¼•è¨€çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>åœ¨å¼€æºç¤¾åŒºä¸­ï¼Œæºç åˆ†ææ˜¯æ·±å…¥ç†è§£é¡¹ç›®å†…éƒ¨æœºåˆ¶çš„å…³é”®æ­¥éª¤ã€‚é€šè¿‡ä»”ç»†ç ”ç©¶é¡¹ç›®çš„æºä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥æ­ç¤ºèƒŒåçš„è®¾è®¡åŸç†ã€ç®—æ³•å’Œå·¥ä½œæµç¨‹ã€‚è¿™ä¸ä»…æœ‰åŠ©äºæé«˜æˆ‘ä»¬çš„ç¼–ç¨‹æŠ€èƒ½ï¼Œè¿˜å¯ä»¥ä¸ºå¼€å‘è€…ç¤¾åŒºæä¾›å®è´µçš„å­¦ä¹ èµ„æºã€‚</p><p>æœ¬æ–‡å°†èšç„¦äºåˆ†æ<a href="https://github.com/alibaba/higress" target="_blank" rel="noopener noreferrer">Higress</a>çš„æºç ï¼Œè¯¥é¡¹ç›®åœ¨å¼€æºç•Œå¤‡å—ç©ç›®ã€‚é€šè¿‡æµè§ˆé˜…è¯»å…¶ä»£ç ï¼Œæˆ‘ä»¬å°†åˆæ­¥å±•ç°å…¶æ ¸å¿ƒç‰¹æ€§ã€æ¶æ„è®¾è®¡å’Œå®ç°ç»†èŠ‚ã€‚å¸Œæœ›å„ä½ç”¨æˆ·ä»¥åŠå¼€å‘è€…åœ¨æœ¬æ–‡ä¸­èƒ½å¤Ÿæ‰¾åˆ°æœ‰ä»·å€¼çš„è§è§£ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å…³äºhigress">å…³äºHigress<a href="#å…³äºhigress" class="hash-link" aria-label="å…³äºHigressçš„ç›´æ¥é“¾æ¥" title="å…³äºHigressçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>Higressæ˜¯åŸºäºé˜¿é‡Œå†…éƒ¨çš„Envoy Gatewayå®è·µæ²‰æ·€ã€ä»¥å¼€æºIstio + Envoyä¸ºæ ¸å¿ƒæ„å»ºçš„ä¸‹ä¸€ä»£äº‘åŸç”Ÿç½‘å…³ï¼Œå®ç°äº†æµé‡ç½‘å…³ + å¾®æœåŠ¡ç½‘å…³ + å®‰å…¨ç½‘å…³ä¸‰åˆä¸€çš„é«˜é›†æˆèƒ½åŠ›ï¼Œæ·±åº¦é›†æˆDubboã€Nacosã€Sentinelç­‰å¾®æœåŠ¡æŠ€æœ¯æ ˆï¼Œèƒ½å¤Ÿå¸®åŠ©ç”¨æˆ·æå¤§çš„é™ä½ç½‘å…³çš„éƒ¨ç½²åŠè¿ç»´æˆæœ¬ä¸”èƒ½åŠ›ä¸æ‰“æŠ˜ï¼›åœ¨æ ‡å‡†ä¸Šå…¨é¢æ”¯æŒIngressä¸Gateway APIï¼Œç§¯ææ‹¥æŠ±äº‘åŸç”Ÿä¸‹çš„æ ‡å‡†APIè§„èŒƒï¼›åŒæ—¶ï¼ŒHigress Controllerä¹Ÿæ”¯æŒNginx Ingresså¹³æ»‘è¿ç§»ï¼Œå¸®åŠ©ç”¨æˆ·é›¶æˆæœ¬å¿«é€Ÿè¿ç§»åˆ°Higressã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä»£ç ç›®å½•è¯´æ˜">ä»£ç ç›®å½•è¯´æ˜<a href="#ä»£ç ç›®å½•è¯´æ˜" class="hash-link" aria-label="ä»£ç ç›®å½•è¯´æ˜çš„ç›´æ¥é“¾æ¥" title="ä»£ç ç›®å½•è¯´æ˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ul><li>cmd: å‘½ä»¤è¡Œå‚æ•°è§£æç­‰å¤„ç†ä»£ç </li><li>pkg/ingress: Ingress èµ„æºè½¬æ¢ä¸º Istio èµ„æºç­‰ç›¸å…³ä»£ç </li><li>pkg/bootstrap: åŒ…æ‹¬å¯åŠ¨ gRPC/xDS/HTTP server ç­‰çš„ä»£ç </li><li>registry: å®ç°å¯¹æ¥å¤šç§æ³¨å†Œä¸­å¿ƒè¿›è¡ŒæœåŠ¡å‘ç°çš„ä»£ç </li><li>envoy: ä¾èµ–çš„ envoy å®˜æ–¹ä»“åº“ commitï¼Œä»¥åŠå¯¹åº”çš„è¡¥ä¸ä»£ç </li><li>istio: ä¾èµ–çš„ istio å®˜æ–¹ä»“åº“ commitï¼Œä»¥åŠå¯¹åº”çš„è¡¥ä¸ä»£ç </li><li>plugins: Higress æ’ä»¶ sdkï¼Œä»¥åŠå®˜æ–¹å†…ç½®æ’ä»¶ä»£ç </li><li>script: ç¼–è¯‘ç›¸å…³è„šæœ¬</li><li>docker: docker é•œåƒæ„å»ºç›¸å…³è„šæœ¬</li></ul><p>æœ¬æ–‡ä¸»è¦å›´ç»•ç€higress-coreç»„ä»¶çš„æºç ï¼Œç ”ç©¶higress-coreè‡ªå¯åŠ¨ä»¥æ¥åšäº†å“ªäº›äº‹æƒ…ã€‚higress-coreçš„ä»£ç ä¸»è¦ä½äº<code>pkg</code>ç›®å½•ä¸‹ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="higress-coreæºç æ•´ä½“åˆ†æ">higress-coreæºç æ•´ä½“åˆ†æ<a href="#higress-coreæºç æ•´ä½“åˆ†æ" class="hash-link" aria-label="higress-coreæºç æ•´ä½“åˆ†æçš„ç›´æ¥é“¾æ¥" title="higress-coreæºç æ•´ä½“åˆ†æçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å¯åŠ¨å…¥å£pkgcmdservergo">å¯åŠ¨å…¥å£ï¼špkg/cmd/server.go<a href="#å¯åŠ¨å…¥å£pkgcmdservergo" class="hash-link" aria-label="å¯åŠ¨å…¥å£ï¼špkg/cmd/server.goçš„ç›´æ¥é“¾æ¥" title="å¯åŠ¨å…¥å£ï¼špkg/cmd/server.goçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åœ¨è¯¥æ–‡ä»¶ä¸‹ï¼Œä¸»è¦è¿›è¡Œäº†å‘½ä»¤å‚æ•°çš„è§£æï¼Œå¹¶è°ƒç”¨<code>NewServer</code>æ¥åˆ›å»ºä¸€ä¸ªServerå®ä¾‹ï¼Œè°ƒç”¨è¯¥å®ä¾‹çš„<code>Start</code>æ–¹æ³•æ¥å¯åŠ¨å®ä¾‹Serverï¼Œè°ƒç”¨<code>waitForMonitorSignal</code>æ–¹æ³•æ¥ç›‘å¬è¿›ç¨‹çš„é€€å‡ºã€‚</p><p>æ˜¾ç„¶è¿™é‡Œæœ‰ä¸¤ä¸ªå¾ˆé‡è¦çš„æ–¹æ³•å‡½æ•°ï¼š<code>NewServer</code>å’Œ<code>Start</code>ï¼Œæ¥ä¸‹æ¥é’ˆå¯¹è¿™ä¸¤ä¸ªå‡½æ•°è¿›è¡Œå…·ä½“åˆ†æã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="åˆ›å»ºå®ä¾‹newserver">åˆ›å»ºå®ä¾‹ï¼šNewServer<a href="#åˆ›å»ºå®ä¾‹newserver" class="hash-link" aria-label="åˆ›å»ºå®ä¾‹ï¼šNewServerçš„ç›´æ¥é“¾æ¥" title="åˆ›å»ºå®ä¾‹ï¼šNewServerçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="åˆå§‹åŒ–pilotçš„ç¯å¢ƒ-apimodelenvironment">åˆå§‹åŒ–Pilotçš„ç¯å¢ƒ API<code>model.Environment</code><a href="#åˆå§‹åŒ–pilotçš„ç¯å¢ƒ-apimodelenvironment" class="hash-link" aria-label="åˆå§‹åŒ–pilotçš„ç¯å¢ƒ-apimodelenvironmentçš„ç›´æ¥é“¾æ¥" title="åˆå§‹åŒ–pilotçš„ç¯å¢ƒ-apimodelenvironmentçš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p><code>model.Environment</code>ä¸ºPilot ä¸­çš„æ ¸å¿ƒç¯å¢ƒå¯¹è±¡ï¼Œé›†æˆäº†è®¸å¤šä¸åŒçš„ç»„ä»¶ï¼ŒåŒ…æ‹¬æœåŠ¡å‘ç°ã€é…ç½®å­˜å‚¨ã€ç½‘ç»œè§‚å¯Ÿç­‰ï¼Œä»¥æä¾›ä¸€ä¸ªå®Œæ•´çš„ç¯å¢ƒ APIã€‚</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">e </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Environment</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PushContext</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">  model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">NewPushContext</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DomainSuffix</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> constants</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DefaultKubernetesDomain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MCPMode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">      </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸ºmodelenvironmentè®¾ç½®ledger">ä¸º<code>model.Environment</code>è®¾ç½®<code>Ledger</code><a href="#ä¸ºmodelenvironmentè®¾ç½®ledger" class="hash-link" aria-label="ä¸ºmodelenvironmentè®¾ç½®ledgerçš„ç›´æ¥é“¾æ¥" title="ä¸ºmodelenvironmentè®¾ç½®ledgerçš„ç›´æ¥é“¾æ¥">â€‹</a></h4><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">e</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SetLedger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">buildLedger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">args</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">RegistryOptions</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>Ledger</code> æ˜¯ä¸€ä¸ªè¡¨ç¤ºç»è¿‡ä¿®æ”¹çš„ map çš„æ¥å£ã€‚è¿™ä¸ª map å…·æœ‰ä¸‰ä¸ªç‹¬ç‰¹çš„ç‰¹å¾ï¼š</p><ol><li>æ¯ä¸ª map çš„å”¯ä¸€çŠ¶æ€éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„å“ˆå¸Œå€¼ã€‚</li><li>map çš„å…ˆå‰çŠ¶æ€åœ¨å›ºå®šçš„æ—¶é—´å†…è¢«ä¿ç•™ã€‚</li><li>ç»™å®šå…ˆå‰çš„å“ˆå¸Œå€¼ï¼Œæˆ‘ä»¬å¯ä»¥ä» map ä¸­æ£€ç´¢å…ˆå‰çš„çŠ¶æ€ï¼ˆå¦‚æœä»ç„¶è¢«ä¿ç•™ï¼‰ã€‚</li></ol><p><code>Ledger</code>æä¾›äº†ä¸ªæ¥å£æ¥è·å–ä¹‹å‰ç‰ˆæœ¬çš„Valueï¼Œæ¥å£è¯¦æƒ…å¦‚ä¸‹ï¼š</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// GetPreviousValue executes a get against a previous version of the ledger, using that version&#x27;s root hash.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">GetPreviousValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">previousRootHash</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> key </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸ºmodelenvironmentè®¾ç½®æœåŠ¡å‘ç°çš„æ¥å£servicediscoveryç”¨äºåˆ—ä¸¾æœåŠ¡å’Œå®ä¾‹">ä¸º<code>model.Environment</code>è®¾ç½®æœåŠ¡å‘ç°çš„æ¥å£<code>ServiceDiscovery</code>ï¼Œç”¨äºåˆ—ä¸¾æœåŠ¡å’Œå®ä¾‹ã€‚<a href="#ä¸ºmodelenvironmentè®¾ç½®æœåŠ¡å‘ç°çš„æ¥å£servicediscoveryç”¨äºåˆ—ä¸¾æœåŠ¡å’Œå®ä¾‹" class="hash-link" aria-label="ä¸ºmodelenvironmentè®¾ç½®æœåŠ¡å‘ç°çš„æ¥å£servicediscoveryç”¨äºåˆ—ä¸¾æœåŠ¡å’Œå®ä¾‹çš„ç›´æ¥é“¾æ¥" title="ä¸ºmodelenvironmentè®¾ç½®æœåŠ¡å‘ç°çš„æ¥å£servicediscoveryç”¨äºåˆ—ä¸¾æœåŠ¡å’Œå®ä¾‹çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ac </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> aggregate</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">NewController</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">aggregate</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Options</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MeshHolder</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">e</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ServiceDiscovery </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ac</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="åˆå§‹åŒ–serverå®ä¾‹">åˆå§‹åŒ–<code>Server</code>å®ä¾‹<a href="#åˆå§‹åŒ–serverå®ä¾‹" class="hash-link" aria-label="åˆå§‹åŒ–serverå®ä¾‹çš„ç›´æ¥é“¾æ¥" title="åˆå§‹åŒ–serverå®ä¾‹çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">s </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">Server</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ServerArgs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">      args</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    httpMux</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">         http</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">NewServeMux</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">     e</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    readinessProbes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">make</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">map</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">readinessProbe</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">          server</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">New</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">environment</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Watcher </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mesh</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">NewFixedWatcher</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">v1alpha1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">MeshConfig</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">environment</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¿™é‡Œè¯´æ˜ä¸€ä¸‹<code>Server</code>ç»“æ„ä½“çš„å„ä¸ªå­—æ®µçš„å«ä¹‰ï¼š</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> Server </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">ServerArgs  </span><span class="token comment" style="color:#999988;font-style:italic">// Serverå‚æ•°é…ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    environment      </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Environment  </span><span class="token comment" style="color:#999988;font-style:italic">// Pilotç¯å¢ƒé…ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    kubeClient       higresskube</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Client  </span><span class="token comment" style="color:#999988;font-style:italic">// ä¸ Kubernetes é›†æˆçš„å®¢æˆ·ç«¯</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    configController model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ConfigStoreCache  </span><span class="token comment" style="color:#999988;font-style:italic">// é…ç½®å­˜å‚¨æ§åˆ¶å™¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    configStores     </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ConfigStoreCache  </span><span class="token comment" style="color:#999988;font-style:italic">// å¤šä¸ªé…ç½®å­˜å‚¨çš„ç¼“å­˜</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    httpServer       </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">http</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Server  </span><span class="token comment" style="color:#999988;font-style:italic">// HTTP è¯·æ±‚å¤„ç†å™¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    httpMux          </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">http</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ServeMux  </span><span class="token comment" style="color:#999988;font-style:italic">// HTTP è¯·æ±‚å¤šè·¯å¤ç”¨å™¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    grpcServer       </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">grpc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Server  </span><span class="token comment" style="color:#999988;font-style:italic">// grpcæœåŠ¡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    xdsServer        </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">xds</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DiscoveryServer  </span><span class="token comment" style="color:#999988;font-style:italic">// xdsæœåŠ¡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server           server</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Instance  </span><span class="token comment" style="color:#999988;font-style:italic">// Pilot Serverå®ä¾‹é…ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    readinessProbes  </span><span class="token keyword" style="color:#00009f">map</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">readinessProbe  </span><span class="token comment" style="color:#999988;font-style:italic">// serverå†…éƒ¨æœåŠ¡è®°å½•è¡¨ï¼Œè®°å½•æœåŠ¡æ˜¯å¦å‡†å¤‡å¥½</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>åœ¨è¿™é‡Œï¼Œ<code>server.Instance</code>ç»´æŠ¤äº†ä¸€ä¸ªchanå˜é‡<code>components chan Component</code>ï¼Œ<code>Component</code>åˆ™å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°æ–¹æ³•æ¨¡æ¿ã€‚å½“æˆ‘ä»¬è°ƒç”¨<code>Instance</code>çš„<code>RunComponent(t Component)</code>æ–¹æ³•ï¼Œåˆ™ä¼šå°†å˜é‡<code>t</code>å‘é€ç»™<code>components</code>ç®¡é“ï¼Œè€Œæˆ‘ä»¬è°ƒç”¨<code>Instance</code>çš„<code>Start(stop &lt;-chan struct{}) error</code>æ–¹æ³•ï¼Œåˆ™ä¼šä»<code>components</code>ç®¡é“å»æ¥æ”¶<code>Component</code>å¯¹è±¡ï¼Œå¹¶æ‰§è¡Œè¯¥å¯¹è±¡çš„å‡½æ•°æ–¹æ³•ã€‚</p></blockquote><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">type Component func(stop &lt;-chan struct{}) error</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="åˆ›å»ºåˆå§‹å¯åŠ¨å‡½æ•°åˆ—è¡¨">åˆ›å»ºåˆå§‹å¯åŠ¨å‡½æ•°åˆ—è¡¨<a href="#åˆ›å»ºåˆå§‹å¯åŠ¨å‡½æ•°åˆ—è¡¨" class="hash-link" aria-label="åˆ›å»ºåˆå§‹å¯åŠ¨å‡½æ•°åˆ—è¡¨çš„ç›´æ¥é“¾æ¥" title="åˆ›å»ºåˆå§‹å¯åŠ¨å‡½æ•°åˆ—è¡¨çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">initFuncList </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">initKubeClient</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">initXdsServer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">initHttpServer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">initConfigController</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">initRegistryEventHandlers</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">initAuthenticators</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><p><code>initKubeClient</code>å‡½æ•°</p><ol><li><p>é¦–å…ˆåˆ¤æ–­<code>kubeClient</code>æ˜¯å¦ä¸ºç©ºï¼Œä¸ä¸ºç©ºè¿›è¡Œä¸‹ä¸€æ­¥ï¼›</p></li><li><p>è°ƒç”¨<code>istiokube.DefaultRestConfig</code>æ–¹æ³•ï¼Œåˆ›å»ºä¸€ä¸ªå…·æœ‰ RESTful é£æ ¼çš„<code>Kubernetes Config</code>ï¼›</p></li><li><p>ä»¥<code>Kubernetes Config</code>ä¸ºå…¥å‚ï¼Œè°ƒç”¨<code>istiokube.NewClientConfigForRestConfig</code>æ–¹æ³•åˆ›å»ºä¸€ä¸ªå…·æœ‰ RESTful é£æ ¼çš„<code>Kubernetes Client Config</code>ï¼›</p></li><li><p>è°ƒç”¨higresså®šä¹‰çš„<code>NewClient</code>æ–¹æ³•ï¼Œé›†æˆ Istio å®¢æˆ·ç«¯ã€Higress å®¢æˆ·ç«¯å’Œå¯èƒ½çš„ Kingress å®¢æˆ·ç«¯ï¼Œå¹¶ä¸ºæ¯ä¸ªå®¢æˆ·ç«¯è®¾ç½®äº†ç›¸åº”çš„ SharedInformerFactoryã€‚</p></li></ol></li><li><p><code>initXdsServer</code>å‡½æ•°</p><ol><li>è°ƒç”¨<code>pliot xds</code>çš„<code>NewDiscoveryServer</code>æ–¹æ³•ï¼Œåˆ›å»ºä¸€ä¸ª<code>xdsServer</code>å®ä¾‹ï¼Œå¹¶åˆå§‹åŒ–ä¸€äº›èµ„æºã€‚<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">xdsServer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> xds</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">NewDiscoveryServer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">environment</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> PodName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> PodNamespace</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">RegistryOptions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">KubeOptions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ClusterAliases</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">xdsServer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">McpGenerators</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">gvk</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">WasmPlugin</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">String</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">mcp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">WasmpluginGenerator</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">Server</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">xdsServer</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">xdsServer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">McpGenerators</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">gvk</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DestinationRule</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">String</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">mcp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DestinationRuleGenerator</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">Server</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">xdsServer</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">xdsServer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">McpGenerators</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">gvk</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">EnvoyFilter</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">String</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">mcp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">EnvoyFilterGenerator</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">Server</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">xdsServer</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">xdsServer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">McpGenerators</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">gvk</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Gateway</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">String</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">mcp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">GatewayGenerator</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">Server</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">xdsServer</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">xdsServer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">McpGenerators</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">gvk</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">VirtualService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">String</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">mcp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">VirtualServiceGenerator</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">Server</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">xdsServer</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">xdsServer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">McpGenerators</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">gvk</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ServiceEntry</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">String</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">mcp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ServiceEntryGenerator</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">Server</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">xdsServer</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">xdsServer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ProxyNeedsPush </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">proxy </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Proxy</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> req </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PushRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">bool</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>å°†<code>xdsServer</code>çš„<code>Start</code>æ–¹æ³•æ³¨å†Œç»™pilot server instanceï¼Œå¹¶è°ƒç”¨higress serverçš„<code>initGrpcServer</code>åˆå§‹åŒ–å‡½æ•°ï¼Œå°†xdsæœåŠ¡æ³¨å†Œåœ¨grpcæœåŠ¡ä¸Šï¼Œä½¿å¾—å¯ä»¥é€šè¿‡grpcåè®®ç«¯å£è¿›è¡Œxdsåè®®çš„é€šä¿¡ã€‚</li></ol></li><li><p><code>initHttpServer</code>å‡½æ•°ï¼Œåˆå§‹åŒ–http serverï¼Œæ·»åŠ 8888ç«¯å£çš„debugæ¥å£çš„å¤„ç†å™¨ï¼Œå¹¶æ·»åŠ <code>/ready</code>è·¯ç”±çš„å¤„ç†å™¨ï¼Œç”¨äºéå†higress serverçš„<code>readinessProbes</code>ï¼Œåˆ¤æ–­å†…éƒ¨æœåŠ¡è®°å½•è¡¨å†…çš„æœåŠ¡æ˜¯å¦å‡†å¤‡å®Œæ¯•ã€‚</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">xdsServer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">AddDebugHandlers</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">httpMux</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">httpMux</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">HandleFunc</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;/ready&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">readyHandler</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p><code>initConfigController</code>å‡½æ•°ï¼Œè¿™éƒ¨åˆ†å†…å®¹æ¯”è¾ƒæ ¸å¿ƒï¼Œå°†ä¼šåœ¨åé¢è¯¦ç»†å±•å¼€ï¼Œæš‚æ—¶å…ˆè·³è¿‡ã€‚</p></li><li><p><code>initRegistryEventHandlers</code>å‡½æ•°ï¼Œè¿™éƒ¨åˆ†å†…å®¹è·Ÿ<code>initConfigController</code>å‡½æ•°æœ‰å…³ï¼Œæš‚æ—¶å…ˆè·³è¿‡ã€‚</p></li><li><p><code>initAuthenticators</code>å‡½æ•°ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯åˆå§‹åŒ–è®¤è¯å™¨ï¼Œå¹¶å°†å…¶åº”ç”¨äº xDS æœåŠ¡å™¨ã€‚é€šè¿‡æ·»åŠ ä¸åŒçš„è®¤è¯å™¨ï¼Œå¯ä»¥æ”¯æŒä¸åŒçš„èº«ä»½éªŒè¯æ–¹å¼ï¼Œè¿™æ ·æœåŠ¡å™¨åœ¨å¤„ç†è¯·æ±‚æ—¶å¯ä»¥éªŒè¯å®¢æˆ·ç«¯çš„èº«ä»½ä¿¡æ¯ã€‚</p></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="éå†å¯åŠ¨å‡½æ•°åˆ—è¡¨æ‰§è¡Œå¯åŠ¨å‡½æ•°">éå†å¯åŠ¨å‡½æ•°åˆ—è¡¨ï¼Œæ‰§è¡Œå¯åŠ¨å‡½æ•°<a href="#éå†å¯åŠ¨å‡½æ•°åˆ—è¡¨æ‰§è¡Œå¯åŠ¨å‡½æ•°" class="hash-link" aria-label="éå†å¯åŠ¨å‡½æ•°åˆ—è¡¨ï¼Œæ‰§è¡Œå¯åŠ¨å‡½æ•°çš„ç›´æ¥é“¾æ¥" title="éå†å¯åŠ¨å‡½æ•°åˆ—è¡¨ï¼Œæ‰§è¡Œå¯åŠ¨å‡½æ•°çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">_</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> f </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">range</span><span class="token plain"> initFuncList </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">f</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="æ³¨å†Œpilot-server">æ³¨å†ŒPilot Server<a href="#æ³¨å†Œpilot-server" class="hash-link" aria-label="æ³¨å†ŒPilot Serverçš„ç›´æ¥é“¾æ¥" title="æ³¨å†ŒPilot Serverçš„ç›´æ¥é“¾æ¥">â€‹</a></h4><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">server</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">RunComponent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">stop </span><span class="token operator" style="color:#393A34">&lt;-</span><span class="token keyword" style="color:#00009f">chan</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">kubeClient</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">RunAndWait</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">stop</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>æ³¨æ„è¿™é‡Œçš„<code>kubeClient</code>æ‰€è°ƒç”¨çš„æ–¹æ³•æ˜¯<code>istio</code>çš„Kuberneteså®¢æˆ·ç«¯æä¾›çš„ã€‚</p></blockquote><h4 class="anchor anchorWithStickyNavbar_LWe7" id="åœ¨readyæœåŠ¡è®°å½•è¡¨é‡Œæ³¨å†ŒxdsæœåŠ¡">åœ¨readyæœåŠ¡è®°å½•è¡¨é‡Œæ³¨å†ŒxdsæœåŠ¡<a href="#åœ¨readyæœåŠ¡è®°å½•è¡¨é‡Œæ³¨å†ŒxdsæœåŠ¡" class="hash-link" aria-label="åœ¨readyæœåŠ¡è®°å½•è¡¨é‡Œæ³¨å†ŒxdsæœåŠ¡çš„ç›´æ¥é“¾æ¥" title="åœ¨readyæœåŠ¡è®°å½•è¡¨é‡Œæ³¨å†ŒxdsæœåŠ¡çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><div class="language-gog codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gog codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">s.readinessProbes[&quot;xds&quot;] = func() (bool, error) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return s.xdsServer.IsServerReady(), nil</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å¯åŠ¨å®ä¾‹start">å¯åŠ¨å®ä¾‹ï¼šStart<a href="#å¯åŠ¨å®ä¾‹start" class="hash-link" aria-label="å¯åŠ¨å®ä¾‹ï¼šStartçš„ç›´æ¥é“¾æ¥" title="å¯åŠ¨å®ä¾‹ï¼šStartçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ul><li>ç¬¬ä¸€éƒ¨åˆ†ï¼šéå†pilot serverçš„<code>components</code>ï¼Œæ‰§è¡Œchanç®¡é“é‡Œçš„å‡½æ•°</li></ul><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">server</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">stop</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> err</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>ç¬¬äºŒéƒ¨åˆ†ï¼šç­‰å¾…ç¼“å­˜åŒæ­¥å®Œæˆ</li></ul><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">waitForCacheSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">stop</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Errorf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;failed to sync cache&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>ç¬¬ä¸‰éƒ¨åˆ†ï¼šå¯åŠ¨grpcæœåŠ¡</li></ul><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">grpcListener</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> net</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Listen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;tcp&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">GrpcAddress</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> err</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">go</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    log</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Infof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;starting gRPC discovery service at %s&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> grpcListener</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Addr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">grpcServer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Serve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">grpcListener</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       log</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Errorf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;error serving GRPC server: %v&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>ç¬¬å››éƒ¨åˆ†ï¼šå¯åŠ¨httpæœåŠ¡</li></ul><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">httpListener</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> net</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Listen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;tcp&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">HttpAddress</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> err</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">go</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    log</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Infof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;starting HTTP service at %s&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> httpListener</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Addr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">httpServer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Serve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">httpListener</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       log</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Errorf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;error serving http server: %v&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="higress-coreæ ¸å¿ƒæºç åˆ†æ">higress-coreæ ¸å¿ƒæºç åˆ†æ<a href="#higress-coreæ ¸å¿ƒæºç åˆ†æ" class="hash-link" aria-label="higress-coreæ ¸å¿ƒæºç åˆ†æçš„ç›´æ¥é“¾æ¥" title="higress-coreæ ¸å¿ƒæºç åˆ†æçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>åœ¨å‰é¢æœ‰ä¸¤ä¸ªå‡½æ•°<code>initConfigController</code>å’Œ<code>initRegistryEventHandlers</code>æˆ‘ä»¬æ²¡æœ‰ä»‹ç»ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°å¯ä»¥è¯´æ˜¯higress-coreçš„æ ¸å¿ƒä»£ç ï¼Œæ¥ä¸‹æ¥å¯¹è¿™ä¸¤ä¸ªå‡½æ•°è¿›è¡Œå…·ä½“å‰–æã€‚åœ¨åˆ†æä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹<code>pkg</code>å…¶ä»–ç›®å½•çš„åŠŸèƒ½ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ common //å…¬å…±åŒ…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ config //é…ç½®åŒ…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ ingress //higresså®šä¹‰çš„ingressèµ„æºæ§åˆ¶å™¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚Â Â  â”œâ”€â”€ config //é…ç½®ingress configå’Œkingress config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚Â Â  â”œâ”€â”€ kube //é›†æˆKubernetesé…ç½®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ annotations //å¤„ç† Ingress çš„æ³¨è§£ç›¸å…³çš„ä»£ç </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ common //é€šç”¨çš„ä»£ç å’Œå·¥å…·å‡½æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ configmap //å¤„ç† ConfigMap ç›¸å…³çš„ä»£ç </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ controller //æ§åˆ¶å™¨ç›¸å…³çš„ä»£ç </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ http2rpc //å¤„ç† HTTP åˆ° RPC çš„è½¬æ¢çš„ä»£ç </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ ingress //å¤„ç† Ingress é…ç½®çš„ä»£ç </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ ingressv1 //Ingress çš„ API ç‰ˆæœ¬ v1 ç›¸å…³çš„ä»£ç </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ kingress //å¤„ç† Kingress ç›¸å…³çš„ä»£ç </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ mcpbridge //MCPï¼ˆMesh Configuration Protocolï¼‰çš„æ¡¥æ¥ç›¸å…³çš„ä»£ç </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ secret //å¤„ç† Secret ç›¸å…³çš„ä»£ç </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ util //é€šç”¨çš„å·¥å…·å‡½æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚Â Â  â”‚Â Â  â””â”€â”€ wasmplugin //å¤„ç† WebAssembly æ’ä»¶ç›¸å…³çš„ä»£ç </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚Â Â  â”œâ”€â”€ log //æ—¥å¿—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚Â Â  â”œâ”€â”€ mcp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚Â Â  â””â”€â”€ translation //ç¿»è¯‘æ¨¡å—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â””â”€â”€ kube //higresså®šä¹‰çš„Kuberneteså®¢æˆ·ç«¯ï¼ŒåŒ…å«äº†istioæä¾›çš„Kuberneteså®¢æˆ·ç«¯</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>é€šè¿‡ç›®å½•æˆ‘ä»¬å¯ä»¥æ¸…æ™°åœ°çœ‹åˆ°higressé›†æˆäº†å¤šä¸ªKubernetesèµ„æºä»¥åŠIngressé…ç½®ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="initconfigcontrollerå‡½æ•°å‰–æ"><code>initConfigController</code>å‡½æ•°å‰–æ<a href="#initconfigcontrollerå‡½æ•°å‰–æ" class="hash-link" aria-label="initconfigcontrollerå‡½æ•°å‰–æçš„ç›´æ¥é“¾æ¥" title="initconfigcontrollerå‡½æ•°å‰–æçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>æˆ‘ä»¬å…ˆå¤§è‡´åˆ†æä¸€ä¸‹è¿™ä¸ªå‡½æ•°çš„æµç¨‹ï¼Œå‡½æ•°çš„å…·ä½“é€»è¾‘ç¨ååˆ†æã€‚æœ€åä¼šç»™å‡ºä¸€ä¸ªå‡½æ•°è°ƒç”¨çš„æµç¨‹å›¾ï¼Œå¯ä»¥ç»“åˆæµç¨‹å›¾è¿›è¡Œæºç çš„ç†è§£åˆ†æã€‚</p><ol><li>è®¾ç½® <code>common.Options</code> ç»“æ„ä½“çš„ä¸€äº›é€‰é¡¹ï¼Œè¿™äº›é€‰é¡¹å¯èƒ½å½±å“é…ç½®æ§åˆ¶å™¨çš„è¡Œä¸ºã€‚è¿™äº›é€‰é¡¹åŒ…æ‹¬æ˜¯å¦å¯ç”¨æ§åˆ¶å™¨ã€é›†ç¾¤ IDã€Ingress ç±»ç­‰</li><li>åˆ›å»ºä¸€ä¸ª <code>translation.NewIngressTranslation</code> å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ç”¨äºå¤„ç† Ingress çš„ç¿»è¯‘å’Œé…ç½®</li><li>å‘ <code>ingressConfig</code> ä¸­æ·»åŠ æœ¬åœ°é›†ç¾¤çš„é…ç½®ï¼Œå¹¶è·å–å¯¹åº”çš„ Ingress æ§åˆ¶å™¨å’Œ Kingress æ§åˆ¶å™¨</li><li>ä½¿ç”¨ <code>configaggregate.MakeCache</code> åˆ›å»ºä¸€ä¸ªå¸¦æœ‰ç¼“å­˜çš„é…ç½®æ§åˆ¶å™¨</li><li>åˆ›å»ºä¸€ä¸ª Istio é…ç½®å­˜å‚¨ï¼Œå¹¶å°†å…¶è®¾ç½®åˆ° <code>Server</code> å¯¹è±¡çš„ <code>environment.IstioConfigStore</code> ä¸­</li><li>å°† <code>ingressConfig</code> è®¾ç½®åˆ° <code>Server</code> å¯¹è±¡çš„ <code>environment.IngressStore</code> ä¸­</li><li>å°†åŒ…å«é…ç½®å’Œå¯åŠ¨ Ingress æ§åˆ¶å™¨ã€Kingress æ§åˆ¶å™¨ä»¥åŠç›¸å…³çš„é…ç½®æ§åˆ¶å™¨çš„å‡½æ•°æ–¹æ³•æ³¨å†Œåˆ°pilot server instanceçš„<code>components</code>ç®¡é“ä¸­ã€‚</li></ol><p>æˆ‘ä»¬ä»ä¸­æŒ‘é€‰å‡ºå‡ ä¸ªæ¯”è¾ƒé‡è¦çš„å‡½æ•°å‡ºæ¥ï¼š<code>NewIngressTranslation</code>ã€<code>AddLocalCluster</code>ã€<code>InitializeCluster</code>ä»¥åŠ<code>configController</code>çš„<code>Run</code>æ–¹æ³•ï¼Œå…¶å®ƒçš„åƒ<code>MakeCache</code>ã€<code>MakeIstioStore</code>æ–¹æ³•åˆ™æ˜¯æœ‰<code>istio</code>æä¾›çš„å‡½æ•°æ–¹æ³•ï¼Œç”¨äºå¯¹æ¥higressä¸­çš„discoveryå®¹å™¨ä¸­<code>Pilot</code>ç»„ä»¶ã€‚ç¡®å®šå¥½æ¥ä¸‹æ¥è¦åˆ†æçš„å†…å®¹ä¹‹åï¼Œæˆ‘ä»¬æ¥åˆ°<code>pkg/ingress/translattion</code>ç›®å½•ï¼ŒæŸ¥çœ‹ä¸€ä¸‹<code>translation.go</code>ã€‚</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="translationgoå‰–æ"><code>translation.go</code>å‰–æ<a href="#translationgoå‰–æ" class="hash-link" aria-label="translationgoå‰–æçš„ç›´æ¥é“¾æ¥" title="translationgoå‰–æçš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p><code>IngressTranslation</code>å®ç°äº†ä¸¤ä¸ªæ¥å£ï¼š<code>model.ConfigStoreCache</code>å’Œ<code>model.IngressStore</code>ï¼Œå…¶ä¸­<code>model.ConfigStoreCache</code>è¿˜åŒ…å«äº†<code>model.ConfigStore</code>æ¥å£ã€‚æˆ‘ä»¬å¯ä»¥å¤§è‡´æµè§ˆä¸€ä¸‹ï¼Œå¯ä»¥å‘ç°åŸºæœ¬ä¸Šæ˜¯è°ƒç”¨<code>IngressTranslation</code>ç»“æ„ä½“ä¸­çš„<code>ingressConfig</code>å’Œ<code>kingressConfig</code>çš„æ–¹æ³•ï¼Œä½äº<code>pkg/ingress/config</code>ç›®å½•ä¸‹ã€‚</p><p>é™¤äº†å®ç°æ¥å£æ–¹æ³•ä¹‹å¤–ï¼Œè¿˜æä¾›äº†<code>NewIngressTranslation</code>ã€<code>AddLocalCluster</code>ã€<code>InitializeCluster</code>æ–¹æ³•ã€‚åŒæ ·åœ°ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å‘ç°è¿™ä¸‰ä¸ªæ–¹æ³•æœ¬è´¨ä¸Šä¹Ÿæ˜¯è°ƒç”¨<code>ingressConfig</code>å’Œ<code>kingressConfig</code>çš„æ–¹æ³•ã€‚</p><p>æ—¢ç„¶<code>translation.go</code>æœ¬è´¨ä¸Šæ˜¯è°ƒç”¨<code>pkg/ingress/config</code>ç›®å½•ä¸‹çš„å‡½æ•°ï¼Œä¸å¦¨æˆ‘ä»¬è¿›å…¥è¯¥ç›®å½•ï¼ŒæŸ¥çœ‹ä¸€ä¸‹<code>ingress_config.go</code>ï¼Œå¯¹äº<code>kingress_config.go</code>ï¼Œæˆ‘ä»¬æš‚ä¸åšåˆ†æã€‚</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ingress_configgoå‰–æ"><code>ingress_config.go</code>å‰–æ<a href="#ingress_configgoå‰–æ" class="hash-link" aria-label="ingress_configgoå‰–æçš„ç›´æ¥é“¾æ¥" title="ingress_configgoå‰–æçš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>åœ¨<code>ingress_config.go</code>ä¸­æœ‰ä¸€ä¸ªåä¸º<code>IngressConfig</code>ç»“æ„ä½“ï¼Œå†…å®¹å¦‚ä¸‹(é™„å¸¦æ³¨é‡Š)ï¼š</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> IngressConfig </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// è¿œç¨‹ Ingress æ§åˆ¶å™¨çš„æ˜ å°„ï¼Œé”®ä¸ºé›†ç¾¤ IDï¼Œå€¼ä¸º common.IngressController</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    remoteIngressControllers </span><span class="token keyword" style="color:#00009f">map</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">common</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">IngressController</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ç”¨äºä¿æŠ¤å¹¶å‘è®¿é—® remoteIngressControllers çš„äº’æ–¥é”</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mutex sync</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">RWMutex</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Ingress è·¯ç”±å’ŒåŸŸåçš„ç¼“å­˜</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ingressRouteCache  model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">IngressRouteCollection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ingressDomainCache model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">IngressDomainCollection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// æœ¬åœ° Kubernetes å®¢æˆ·ç«¯</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    localKubeClient kube</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Client</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// å¤„ç† VirtualService äº‹ä»¶çš„äº‹ä»¶å¤„ç†ç¨‹åºåˆ‡ç‰‡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    virtualServiceHandlers </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">EventHandler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// å¤„ç† Gateway äº‹ä»¶çš„äº‹ä»¶å¤„ç†ç¨‹åºåˆ‡ç‰‡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    gatewayHandlers </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">EventHandler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// å¤„ç† DestinationRule äº‹ä»¶çš„äº‹ä»¶å¤„ç†ç¨‹åºåˆ‡ç‰‡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    destinationRuleHandlers </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">EventHandler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// å¤„ç† EnvoyFilter äº‹ä»¶çš„äº‹ä»¶å¤„ç†ç¨‹åºåˆ‡ç‰‡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    envoyFilterHandlers </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">EventHandler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// å¤„ç† ServiceEntry äº‹ä»¶çš„äº‹ä»¶å¤„ç†ç¨‹åºåˆ‡ç‰‡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    serviceEntryHandlers </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">EventHandler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// å¤„ç† WasmPlugin äº‹ä»¶çš„äº‹ä»¶å¤„ç†ç¨‹åºåˆ‡ç‰‡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    wasmPluginHandlers </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">EventHandler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ç”¨äºå¤„ç†ç›‘è§†é”™è¯¯çš„å¤„ç†ç¨‹åº</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    watchErrorHandler cache</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">WatchErrorHandler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ç¼“å­˜çš„ EnvoyFilter é…ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cachedEnvoyFilters </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// æ­£åœ¨ç›‘è§†çš„ Secret é›†åˆ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    watchedSecretSet sets</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Set</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ç”¨äºåè°ƒæ³¨å†Œè¡¨çš„è°ƒè§£å™¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    RegistryReconciler </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">reconcile</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Reconciler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// MCP æ¡¥æ¥æ˜¯å¦å·²è°ƒè§£çš„æ ‡å¿—</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mcpbridgeReconciled </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">atomic</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Bool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ç®¡ç† MCP æ¡¥æ¥ç›¸å…³çš„æ§åˆ¶å™¨å’Œåˆ—è¡¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mcpbridgeController mcpbridge</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">McpBridgeController</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mcpbridgeLister     netlisterv1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">McpBridgeLister</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ç®¡ç† WasmPlugin ç›¸å…³çš„æ§åˆ¶å™¨å’Œåˆ—è¡¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    wasmPluginController wasmplugin</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">WasmPluginController</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    wasmPluginLister     extlisterv1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">WasmPluginLister</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// å·²æ³¨å†Œçš„ WasmPlugin é›†åˆï¼Œé”®ä¸º WasmPlugin åç§°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    wasmPlugins </span><span class="token keyword" style="color:#00009f">map</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">extensions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">WasmPlugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ç®¡ç† HTTP2RPC ç›¸å…³çš„æ§åˆ¶å™¨å’Œåˆ—è¡¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http2rpcController http2rpc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Http2RpcController</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http2rpcLister     netlisterv1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Http2RpcLister</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// å·²æ³¨å†Œçš„ HTTP2RPC é›†åˆï¼Œé”®ä¸º HTTP2RPC åç§°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http2rpcs </span><span class="token keyword" style="color:#00009f">map</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">higressv1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Http2Rpc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Configmap çš„ç®¡ç†å™¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    configmapMgr </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">configmap</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ConfigmapMgr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ç”¨äºæ›´æ–° XDS</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    XDSUpdater model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">XDSUpdater</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// å¤„ç†æ³¨è§£çš„æ³¨è§£å¤„ç†ç¨‹åº</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    annotationHandler annotations</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AnnotationHandler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// å‘½åç©ºé—´</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    namespace </span><span class="token builtin">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// é›†ç¾¤ ID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    clusterId </span><span class="token builtin">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¯¥ç»“æ„ä½“æä¾›äº†ä¸€äº›æ–¹æ³•ï¼Œå…¶å®è¿™ä¸ªç»“æ„ä½“æœ¬è´¨ä¸Šä¹Ÿæ˜¯å®ç°äº†<code>translation.go</code>æåˆ°çš„ä¸¤ä¸ªæ¥å£ï¼Œæ–¹æ³•åˆ—è¡¨å’Œ<code>translation.go</code>æå…¶ç›¸ä¼¼ï¼Œæˆ‘ä»¬åˆ†æä¸€ä¸‹ä¸€äº›æ¯”è¾ƒå¤æ‚çš„æ–¹æ³•ï¼Œå‰©ä¸‹çš„å¯è‡ªè¡Œå®šä½åˆ°æºç æŸ¥çœ‹ï¼š</p><ul><li><p><code>NewIngressConfig</code></p><ol><li>åˆå§‹åŒ–<code>IngressConfig</code>ï¼Œåˆ›å»ºå¤šä¸ªå­æ§åˆ¶å™¨(mcpbridgeã€wasmpluginã€http2rpcç­‰)å¹¶èµ‹å€¼ç»™å¯¹åº”çš„å­—æ®µä¸Šã€‚</li><li>ä¸ºå¤šä¸ªå­æ§åˆ¶å™¨æ³¨å†Œäº‹ä»¶ç›‘å¬å™¨ï¼Œç”¨äºç›‘å¬Kubernetesèµ„æºçš„å˜åŒ–ï¼Œå¹¶è¿›è¡Œç›¸åº”çš„å¤„ç†ã€‚<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">config </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">IngressConfig</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    remoteIngressControllers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">make</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">map</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">common</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">IngressController</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    localKubeClient</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">          localKubeClient</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    XDSUpdater</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">               XDSUpdater</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    annotationHandler</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">        annotations</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">NewAnnotationHandlerManager</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mcpbridgeController </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> mcpbridge</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">NewController</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">localKubeClient</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> clusterId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mcpbridgeController</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">AddEventHandler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AddOrUpdateMcpBridge</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DeleteMcpBridge</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">mcpbridgeController </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mcpbridgeController</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">mcpbridgeLister </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mcpbridgeController</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Lister</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol></li></ul><p>åœ¨è¿™é‡Œï¼Œæœ‰å‡ ä¸ªæ–¹æ³•éœ€è¦æ³¨æ„ï¼š</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1. `annotations.NewAnnotationHandlerManager()`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. `mcpbridge.NewController(localKubeClient, clusterId)`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3. `wasmplugin.NewController(localKubeClient, clusterId)`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4. `http2rpc.NewController(localKubeClient, clusterId)`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">5. `configmap.NewController(localKubeClient, clusterId, namespace)`</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¾ˆæ˜æ˜¾è¿™äº›æ–¹æ³•åˆ†åˆ«å¯¹åº”<code>pkg/ingress/kube</code>ç›®å½•ä¸‹ä¸€äº›è‡ªå®šä¹‰çš„èµ„æºé…ç½®æ–¹æ³•ï¼Œåé¢ä¼šé’ˆå¯¹è¯¥ç›®å½•è¿›è¡Œå•ç‹¬çš„ä»‹ç»ã€‚</p><ul><li><p><code>RegisterEventHandler</code></p><ol><li><p>å¯¹kindå˜é‡è¿›è¡Œåˆ¤æ–­ï¼Œåˆ¤æ–­å±äºå“ªç§èµ„æºï¼Œå¹¶æ·»åŠ åˆ°å¯¹åº”çš„äº‹ä»¶å¤„ç†ç¨‹åºåˆ‡ç‰‡</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">switch</span><span class="token plain"> kind </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> gvk</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">VirtualService</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   m</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">virtualServiceHandlers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">m</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">virtualServiceHandlers</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>æ³¨å†Œäº‹ä»¶ç›‘å¬å™¨</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">_</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> remoteIngressController </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">range</span><span class="token plain"> m</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">remoteIngressControllers </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    remoteIngressController</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">RegisterEventHandler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">kind</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æˆ‘ä»¬å¯ä»¥å®šä½ä¸€ä¸‹<code>remoteIngressController</code>çš„<code>RegisterEventHandler</code>æ–¹æ³•ï¼š</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">controller</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">RegisterEventHandler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">kind config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">GroupVersionKind</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> f model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">EventHandler</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">switch</span><span class="token plain"> kind </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> gvk</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">VirtualService</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       c</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">virtualServiceHandlers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">virtualServiceHandlers</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol></li><li><p><code>AddLocalCluster</code></p><ol><li>åˆ›å»ºingressæ€»æ§åˆ¶å™¨ï¼Œå¹¶æ³¨å†Œåˆ°<code>remoteIngressControllers</code>ä¸­<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ingressController </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">NewController</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">m</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">localKubeClient</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> m</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">localKubeClient</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> secretController</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">m</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">remoteIngressControllers</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ClusterId</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ingressController</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol></li><li><p><code>InitializeCluster</code></p><ol><li>è®¾ç½®é”™è¯¯ç›‘å¬å¤„ç†å™¨<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token boolean" style="color:#36acaa">_</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ingressController</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SetWatchErrorHandler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">m</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">watchErrorHandler</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>å…¶ä¸­<code>SetWatchErrorHandler</code>æ–¹æ³•å¦‚ä¸‹ï¼Œè°ƒç”¨å„ä¸ªinformerçš„<code>SetWatchErrorHandler</code>æ–¹æ³•ï¼š<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">controller</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SetWatchErrorHandler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">handler </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">r </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">cache</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Reflector</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> errs </span><span class="token builtin">error</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">serviceInformer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SetWatchErrorHandler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">handler</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       errs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> multierror</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">errs</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ingressInformer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SetWatchErrorHandler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">handler</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       errs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> multierror</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">errs</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> errs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>é€šè¿‡goåç¨‹å¯åŠ¨<code>ingressController</code><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">go</span><span class="token plain"> ingressController</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">stop</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol></li><li><p><code>List</code></p><ol><li><p>å‰æœŸæ£€æŸ¥ï¼Œé¢„é˜²ç©ºæŒ‡é’ˆæˆ–é€»è¾‘é”™è¯¯</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> typ </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> gvk</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Gateway </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    typ </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> gvk</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">VirtualService </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    typ </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> gvk</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DestinationRule </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    typ </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> gvk</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">EnvoyFilter </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    typ </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> gvk</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ServiceEntry </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    typ </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> gvk</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">WasmPlugin </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> common</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ErrUnsupportedOp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Currently, only support list all namespaces gateways or virtualservices.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> namespace </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    IngressLog</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Warnf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;ingress store only support type %s of all namespace.&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> typ</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> common</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ErrUnsupportedOp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>å¦‚æœkindç±»å‹æ˜¯envoyfilterï¼Œæ‹¿å‡ºæ¥å¤„ç†æ‰</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> typ </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> gvk</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">EnvoyFilter </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Build configmap envoy filters</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">configmapEnvoyFilters</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> m</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">configmapMgr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ConstructEnvoyFilters</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>å¦‚æœä¸æ˜¯ï¼Œè°ƒç”¨ingressæ§åˆ¶å™¨(å¦‚æœæœ‰kingressæ§åˆ¶å™¨ï¼Œä¹Ÿç»™å¸¦ä¸Š)çš„<code>List</code>æ–¹æ³•ï¼Œæ·»åŠ åˆ°configåˆ—è¡¨ï¼Œä»¥ingressæ§åˆ¶å™¨çš„æ–¹æ³•ä¸ºä¾‹ï¼Œä¼šè·å–informerå¯¹è±¡çš„å­˜å‚¨å™¨ï¼Œå¹¶å¯¹å…¶è¿›è¡Œéå†ï¼Œå°†éå†åˆ°çš„å¯¹è±¡è¿›è¡Œæ·±æ‹·è´ï¼Œå¹¶è¿”å›configåˆ—è¡¨ã€‚ç”±äº<code>List</code>æ–¹æ³•æ˜¯å®ç°<code>ConfigStore</code>æ¥å£çš„ï¼Œ<code>istio</code>å†…éƒ¨ä¼šå¯¹è¿™ä¸ªconfigåˆ—è¡¨è¿›è¡Œä¸‹ä¸€æ­¥å¤„ç†ã€‚</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> configs </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">m</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">mutex</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">RLock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">_</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ingressController </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">range</span><span class="token plain"> m</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">remoteIngressControllers </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    configs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">configs</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ingressController</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">List</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">...</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">m</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">mutex</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">RUnlock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>å¯¹configåˆ—è¡¨æ ¹æ®åˆ›å»ºæ—¶é—´è¿›è¡Œæ’åºï¼Œå¹¶åˆ›å»ºä¸€ä¸ªåŒ…è£…å¥½çš„configåˆ—è¡¨ï¼ŒwrapperConfigsé‡Œé™¤äº†<code>Config``ï¼Œè¿˜ä¼šåŒ…å«</code>AnnotationsConfig`æ³¨è§£é…ç½®</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">common</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SortIngressByCreationTime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">configs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wrapperConfigs </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> m</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">createWrapperConfigs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">configs</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>æ ¹æ®kindç±»å‹ï¼Œå°†wrapperConfigsè½¬æ¢ä¸ºå¯¹åº”çš„èµ„æºï¼Œä»£ç å¦‚ä¸‹ï¼Œå¹¶ä¸ºconvertGatewaysé™„åŠ æ³¨é‡Š</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">switch</span><span class="token plain"> typ </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> gvk</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Gateway</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">//1.åˆå§‹åŒ–ConvertOptions</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">//2.è°ƒç”¨ingressæ§åˆ¶å™¨çš„ConvertGatewayæ–¹æ³•ï¼Œåœ¨è¿™é‡Œï¼Œingressæ§åˆ¶å™¨é¦–å…ˆåšä¸€äº›æ£€æŸ¥ï¼Œå¹¶éå†ruleè§„åˆ™åˆ—è¡¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">//  ä¸ºæ¯ä¸ªruleåˆ›å»ºIngressDomainBuilderæ„é€ å™¨ï¼Œä¸­é—´è¿‡ç¨‹ä¼šæ„é€ gatewayåŒ…è£…å™¨ã€è·å–tlså¯†é’¥åç§°ç­‰ç­‰</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">//  åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä¼šå¯¹configåŒ…è£…å™¨è¿›è¡Œä¿®æ”¹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">//3.applyæ³¨è§£</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">//4.ç»„åˆæˆistioèƒ½å¤Ÿè¯†åˆ«çš„configåˆ—è¡¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> m</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">convertGateways</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">wrapperConfigs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> gvk</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">VirtualService</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> m</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">convertVirtualService</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">wrapperConfigs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> gvk</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DestinationRule</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> m</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">convertDestinationRule</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">wrapperConfigs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¿™å—å†…å®¹è¾ƒå¤šï¼Œå…·å¤‡ä¸€å®šçš„éš¾åº¦ï¼Œéœ€è¦å¯¹å„ä¸ªèµ„æºæœ‰ä¸€å®šçš„ç†è§£ã€‚</p></li></ol></li></ul><p>ä»¥ä¸‹å‡ ä¸ªæ–¹æ³•çš„ä½œç”¨æ˜¯æä¸ºç›¸ä¼¼çš„</p><ul><li><code>AddOrUpdateWasmPlugin</code></li><li><code>DeleteWasmPlugin</code></li><li><code>AddOrUpdateMcpBridge</code></li><li><code>DeleteMcpBridge</code></li><li><code>AddOrUpdateHttp2Rpc</code></li><li><code>DeleteHttp2Rpc</code></li></ul><p>é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯åœ¨ç›‘å¬å¯¹åº”èµ„æºçš„è¿‡ç¨‹ä¸­ï¼Œå‘ç”Ÿèµ„æºçš„æ·»åŠ æˆ–è€…å˜æ›´æˆ–è€…åˆ é™¤è¿›è¡Œå¯¹åº”çš„æ“ä½œã€‚</p><p>ä»¥<code>AddOrUpdateWasmPlugin</code>å’Œ<code>DeleteWasmPlugin</code>ä¸ºä¾‹ã€‚</p><ul><li><p><code>AddOrUpdateWasmPlugin</code></p><ol><li>è·å–wasmplugin<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">wasmPlugin</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> m</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">wasmPluginLister</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">WasmPlugins</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">clusterNamespacedName</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Namespace</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">clusterNamespacedName</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Name</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>å°†wasmpluginè½¬åŒ–ä¸ºistioèƒ½å¤Ÿè¯†åˆ«çš„wasmplugin<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">istioWasmPlugin</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> m</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">convertIstioWasmPlugin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">wasmPlugin</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Spec</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>æ›´æ–°<code>IngressConfig</code><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">m</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">wasmPlugins</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">clusterNamespacedName</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Name</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> istioWasmPlugin</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol></li><li><p><code>DeleteWasmPlugin</code></p><ol><li>æ›´æ–°<code>IngressConfig</code><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">delete</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">m</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">wasmPlugins</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> clusterNamespacedName</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Name</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>å¦‚æœå­˜åœ¨è¯¥wasmpluginï¼Œè§¦å‘<code>wasmPluginHandlers</code>çš„äº‹ä»¶ç›‘å¬å™¨ï¼Œæ‰§è¡Œå¯¹åº”çš„æ“ä½œ<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">_</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> f </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">range</span><span class="token plain"> m</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">wasmPluginHandlers </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    IngressLog</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Debug</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;WasmPlugin triggerd update&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">f</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Config</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">Meta</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Config</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">Meta</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">EventDelete</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol></li></ul><p>åˆ°æ­¤ä¸ºæ­¤ï¼Œ<code>ingress_config.go</code>çš„å†…å®¹åŸºæœ¬ä»‹ç»å®Œæ¯•ï¼Œå¤§éƒ¨åˆ†å†…å®¹å¹¶æœªåšè¿‡å¤šæ·±å…¥ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥è‡ªè¡Œä¸‹è½½æºç æµè§ˆæŸ¥çœ‹ã€‚</p><p>æˆ‘ä»¬ç°åœ¨å›åˆ°æœ€å¼€å§‹çš„<code>initConfigController</code>å‡½æ•°ä¸Šï¼Œå¯ä»¥å‘ç°è¿™ä¸ªå‡½æ•°çš„æ ¸å¿ƒå†…å®¹å…¶å®å°±æ˜¯<code>ingress_config.go</code>ï¼Œå½“ç„¶è¿˜æœ‰å¯¹åº”çš„å¤šä¸ªæ§åˆ¶å™¨ï¼Œå…³äºæ§åˆ¶å™¨çš„ä»‹ç»ï¼Œå°†åœ¨åé¢è¿›è¡Œä»‹ç»ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="initregistryeventhandlerså‡½æ•°å‰–æ"><code>initRegistryEventHandlers</code>å‡½æ•°å‰–æ<a href="#initregistryeventhandlerså‡½æ•°å‰–æ" class="hash-link" aria-label="initregistryeventhandlerså‡½æ•°å‰–æçš„ç›´æ¥é“¾æ¥" title="initregistryeventhandlerså‡½æ•°å‰–æçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>è¯¥å‡½æ•°ç›¸å¯¹äº<code>initConfigController</code>å‡½æ•°æ¥è¯´ç®€å•å¾ˆå¤šï¼Œå…¶ä¸»è¦åšçš„å†…å®¹å°±æ˜¯é…ç½®xdsæ›´æ–°å¤„ç†å™¨ï¼Œå¹¶å°†å…¶ä½œä¸ºäº‹ä»¶ç›‘å¬å™¨çš„äº‹ä»¶å¤„ç†ç¨‹åºï¼Œæ³¨å†Œç»™<code>configController</code>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“å‘ç”Ÿèµ„æºçš„å˜æ›´æ—¶ï¼Œä¼šé€šè¿‡xdsåè®®è¿›è¡Œæ¨é€æ›´æ–°ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pkgingresskubeç›®å½•ä»‹ç»"><code>pkg/ingress/kube</code>ç›®å½•ä»‹ç»<a href="#pkgingresskubeç›®å½•ä»‹ç»" class="hash-link" aria-label="pkgingresskubeç›®å½•ä»‹ç»çš„ç›´æ¥é“¾æ¥" title="pkgingresskubeç›®å½•ä»‹ç»çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>è¿™éƒ¨åˆ†å†…å®¹è¾ƒå¤šï¼Œåç»­å¯è‡ªè¡Œé’ˆå¯¹æ„Ÿå…´è¶£çš„éƒ¨åˆ†è¿›è¡Œç²¾è¯»ã€‚</p><ul><li><p><code>annotations</code></p><p>è¿™é‡Œä¸»è¦å¤„ç†ingressæ³¨è§£çš„é…ç½®ï¼Œåœ¨<code>NewAnnotationHandlerManager</code>æ–¹æ³•é‡Œåˆ—å‡ºäº†ä¸€äº›å·²ç»æ”¯æŒçš„æ³¨è§£ï¼Œæ¯ä¸ªæ³¨è§£çš„å¤„ç†ç¨‹åºéœ€è¦å®ç°<code>AnnotationHandler</code>æ‰€å®šä¹‰çš„æ¥å£åˆ—è¡¨ã€‚</p></li><li><p><code>common</code></p><p>è¿™é‡Œæ ¸å¿ƒçš„æ–‡ä»¶ä¸º<code>controller.go</code>ï¼Œä¸»è¦åšäº†ä¸€äº›èµ„æºçš„åŒ…è£…ï¼Œä»¥åŠå®šä¹‰äº†<code>IngressController</code>æ¥å£æ–¹æ³•ï¼Œå…¶å®ç°ç±»æœ‰<code>pkg/ingress/kube/ingress/controller.go</code>å’Œ<code>pkg/ingress/kube/ingressv1/controller.go</code></p></li><li><p><code>configmap</code></p><p>è¿™é‡Œä¸»è¦ä¸º<code>ConfigMap</code>æ·»åŠ äº†<code>higress</code>çš„KVå¯¹ï¼Œåœ¨<code>controller.go</code>ä¸­å®šä¹‰äº†<code>ItemController</code>æ¥å£ï¼Œå’Œå‰è€…æåˆ°çš„ä¸€æ ·ï¼Œè¿™é‡Œä¹Ÿæä¾›äº†ç›¸ä¼¼çš„æ›´æ–°é…ç½®çš„æ–¹æ³•<code>AddOrUpdateHigressConfig</code>ï¼ŒåŒæ ·åœ°ï¼Œä¹Ÿæ˜¯å…ˆè·å–å½“å‰çš„valueå€¼ï¼Œå¹¶è·å–æ—§çš„valueå€¼ï¼Œè¿›è¡Œä¸€ä¸ªæ¯”å¯¹ï¼Œæ¯”å¯¹ç»“æœå¯èƒ½ä¸ºæ–°å¢ã€æ›´æ–°ã€åˆ é™¤ï¼Œåˆ†åˆ«æ‰§è¡Œå¯¹åº”çš„äº‹ä»¶ç›‘å¬å™¨é‡Œæ‰€å®šä¹‰çš„äº‹ä»¶å¤„ç†å™¨ï¼Œä¹Ÿå°±æ˜¯<code>XDSUpdater</code>ã€‚</p></li><li><p><code>controller</code></p><p>åœ¨å‰é¢çš„ä»‹ç»ä¸­ï¼Œæåˆ°äº†å¾ˆå¤šæ¬¡äº‹ä»¶ç›‘å¬å™¨ï¼Œå¯èƒ½ä¼šæœ‰äººç–‘é—®æ˜¯æ€ä¹ˆåšèµ„æºç›‘å¬çš„ï¼Œèµ„æºç›‘å¬çš„ä»£ç å°±ä½äºæœ¬ç›®å½•ä¸‹äº†ã€‚è¿™é‡Œå¯ä»¥ç€é‡ä»‹ç»ä¸€ä¸‹ï¼Œäº‹ä»¶ç›‘å¬çš„å…·ä½“å®ç°åŸç†ã€‚</p><ol><li><p>å®šä¹‰äº†<code>Controller[lister any]</code>æ¥å£ï¼Œå…¶å®ç°ç±»ä¸º<code>CommonController</code>ã€‚
æˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸‹è¿™ä¸ªå®ç°ç»“æ„ä½“æœ‰å“ªäº›éœ€è¦æ³¨æ„çš„å­—æ®µã€‚</p><p><strong>lister</strong>: è¿™ä¸ªå­—æ®µä¸ºanyç±»å‹ï¼Œä¼šåœ¨<code>NewCommonController</code>æ–¹æ³•é‡Œä¼ å…¥è¿›æ¥ï¼Œç‚¹å‡»æŸ¥çœ‹è¯¥æ–¹æ³•è°ƒç”¨æƒ…å†µï¼Œå¯ä»¥å‘ç°ä¼ å…¥è¯¥å­—æ®µçš„éƒ½æ˜¯å„ä¸ªèµ„æºçš„ç›‘å¬å™¨ï¼Œä¾‹å¦‚<code>ConfigMap</code>çš„ç›‘å¬å™¨å°±æ˜¯<code>client.KubeInformer().Core().V1().ConfigMaps().Lister().ConfigMaps(namespace)</code>ï¼Œå…¶å®ƒä¹Ÿæ˜¯å¦‚æ­¤ã€‚
<strong>updateHandler</strong>: è¿™ä¸ªå­—æ®µä¸º<code>func(util.ClusterNamespacedName)</code>ç±»å‹ï¼Œä¸»è¦ç”¨äºå­˜å‚¨å¯¹åº”ç›‘å¬å™¨listeræ‰€æä¾›çš„æ›´æ–°æˆ–è€…æ–°å¢äº‹ä»¶å¤„ç†å™¨ï¼Œå­˜å‚¨ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">CommonController</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">lister</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">AddEventHandler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">addOrUpdate </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">util</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ClusterNamespacedName</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">delete</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">...</span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">util</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ClusterNamespacedName</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    c</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">updateHandler </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> addOrUpdate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">delete</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       c</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">removeHandler </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">delete</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>removeHandler</strong>: åŒ<strong>updateHandler</strong></p></li><li><p>æ¥å£æ–¹æ³•é™¤äº†åˆšåˆšä»‹ç»çš„<code>AddEventHandler</code>æ–¹æ³•ï¼Œè¿˜æœ‰ä¸ª<code>Run</code>æ–¹æ³•éœ€è¦æ³¨æ„ä¸€ä¸‹</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">CommonController</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">lister</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">stop </span><span class="token operator" style="color:#393A34">&lt;-</span><span class="token keyword" style="color:#00009f">chan</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">defer</span><span class="token plain"> utilruntime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">HandleCrash</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">defer</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">queue</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ShutDown</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">cache</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">WaitForCacheSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">stop</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">HasSynced</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       IngressLog</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Errorf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Failed to sync %s controller cache&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">typeName</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    IngressLog</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Debugf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;%s cache has synced&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">typeName</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">go</span><span class="token plain"> wait</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Until</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">worker</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Second</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> stop</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;-</span><span class="token plain">stop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¯ä»¥çœ‹æœ‰ä¸ª<code>wait.Until</code>æ–¹æ³•ï¼Œç”¨äºæ¯ç§’é’Ÿæ‰§è¡Œ<code>c.worker</code>æ–¹æ³•ï¼Œç›´åˆ°æ¥æ”¶åˆ°<code>stop</code>ä¿¡å·ï¼Œæ–¹æ³•è°ƒç”¨é“¾å¦‚ä¸‹ï¼š<code>c.worker</code>-&gt;<code>c.processNextWorkItem()</code>-&gt;<code>c.onEvent(ingressNamespacedName)</code>-&gt;<code>c.updateHandler(obj)</code>ï¼Œå¯ä»¥çœ‹å‡ºæ¥å½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ§åˆ¶å™¨ï¼Œå¹¶ä¸ºå…¶æ³¨å†Œäº†ä¸€ä¸ªäº‹ä»¶ç›‘å¬å™¨ä»¥åŠäº‹ä»¶å¤„ç†å™¨(updateHandler)ï¼Œå› æ­¤æ¯ç§’é’Ÿä¼šæ‰§è¡Œäº‹ä»¶å¤„ç†å™¨ï¼Œä¹Ÿå°±å®ç°äº†ç›‘å¬çš„é€»è¾‘ã€‚</p></li></ol><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªç›®å½•ä¸‹ä¸»è¦å®šä¹‰äº†ä¸€ä¸ªå…¬å…±çš„æ§åˆ¶å™¨ï¼Œå¯ä»¥èŠ‚çœå¤§é‡ä»£ç çš„ç¼–å†™ï¼Œæˆ‘ä»¬åœ¨åˆ›å»ºä¸€ä¸ªæ–°çš„å­æ§åˆ¶å™¨çš„æ—¶å€™ï¼Œå¯ä»¥è°ƒç”¨<code>NewCommonController</code>æ–¹æ³•æ¥å®ç°ç›‘å¬é€»è¾‘ã€‚</p></li><li><p><code>http2rpc</code></p><p>ä»£ç è¾ƒä¸ºç®€å•ï¼Œé€šè¿‡<code>NewCommonController</code>æ¥åˆ›å»º<code>Http2RpcController</code>ï¼Œå¹¶æä¾›äº†<code>GetHttp2Rpc</code>æ–¹æ³•ã€‚</p></li><li><p><code>ingress</code></p><p>Ingressæ§åˆ¶å™¨çš„æ ¸å¿ƒä»£ç é€»è¾‘ï¼Œä¸»è¦ä¸ºå‰æ–‡æåˆ°çš„<code>ingress_config.go</code>æ‰€è°ƒç”¨ã€‚éƒ¨åˆ†å†…å®¹åœ¨å‰æ–‡å·²ç»ç®€å•ä»‹ç»è¿‡ã€‚</p></li><li><p><code>ingressv1</code></p><p>Ingressçš„APIç‰ˆæœ¬v1ç›¸å…³çš„æ§åˆ¶å™¨ä»£ç ã€‚</p></li><li><p><code>kingress</code></p><p>kingressç›¸å…³çš„æ§åˆ¶å™¨ä»£ç ã€‚</p></li><li><p><code>mcpbridge</code></p><p>åŒ<code>http2rpc</code>ç›®å½•ã€‚</p></li><li><p><code>secret</code></p><p>åŒ<code>http2rpc</code>ç›®å½•ã€‚</p></li><li><p><code>util</code></p><p>å·¥å…·åŒ…ã€‚</p></li><li><p><code>wasmplugin</code></p><p>åŒ<code>http2rpc</code>ç›®å½•ã€‚</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="higress-coreæµç¨‹å›¾">higress-coreæµç¨‹å›¾<a href="#higress-coreæµç¨‹å›¾" class="hash-link" aria-label="higress-coreæµç¨‹å›¾çš„ç›´æ¥é“¾æ¥" title="higress-coreæµç¨‹å›¾çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ç»è¿‡å‰é¢çš„æºç åˆ†æï¼Œç›¸ä¿¡å¤§å®¶å¯¹higressæ ¸å¿ƒé€»è¾‘å·²ç»æœ‰äº†åˆæ­¥çš„ç†è§£ï¼Œåç»­å¯ä»¥é’ˆå¯¹è‡ªå·±æ„Ÿå…´è¶£çš„éƒ¨åˆ†ï¼Œè¿›è¡Œæ·±å…¥ç ”ç©¶ï¼Œå…¶ä¸­ä¼šæ¶‰åŠåˆ°Kubernetesèµ„æºé…ç½®çš„æ ¸å¿ƒé€»è¾‘ä»¥åŠIstioçš„åŸºæœ¬æŒæ¡ï¼Œå½“ç„¶ï¼Œå¦‚æœç»™å®ƒç ”ç©¶é€äº†ï¼Œå¯¹è¿™äº›åŸºæœ¬åŸç†çš„ç†è§£å°†ä¼šæ›´ä¸ºæ·±åˆ»ã€‚</p><p>æµç¨‹å›¾å¦‚ä¸‹ï¼š</p><p><img loading="lazy" alt="img.png" src="/zh-cn/assets/images/higress-code0-7cade8cdd7da0af9b26d32509bf400c4.png" width="876" height="548" class="img_ev3q"></p><p>å¯¹äºåˆå§‹åŒ–é…ç½®æ§åˆ¶å™¨éƒ¨åˆ†ï¼Œå¯è¿›ä¸€æ­¥ç»˜ç”»æµç¨‹å›¾ã€‚</p><p><img loading="lazy" alt="img1.png" src="/zh-cn/assets/images/higress-code1-ca225a577cf9fa2079101f80da3e10b2.png" width="914" height="384" class="img_ev3q"></p><p>å…³äºäº‹ä»¶ç›‘å¬éƒ¨åˆ†ï¼Œå…¶æµç¨‹å›¾å¦‚ä¸‹ï¼š</p><p><img loading="lazy" alt="img2.png" src="/zh-cn/assets/images/higress-code2-f370ace5f5ede0c4f87dab8e9acf1e2d.png" width="749" height="603" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ€»ç»“">æ€»ç»“<a href="#æ€»ç»“" class="hash-link" aria-label="æ€»ç»“çš„ç›´æ¥é“¾æ¥" title="æ€»ç»“çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ä»¥ä¸Šæ˜¯å¯¹higressæºç çš„åˆæ­¥åˆ†æï¼Œå¸Œæœ›èƒ½å¤Ÿç»™ç”¨æˆ·ä»¥åŠå¼€å‘è€…å¯¹higressæœ‰ä¸ªåŸºæœ¬çš„äº†è§£ã€‚</p></div><footer class="row docusaurus-mt-lg"></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="description" content="åœ¨æœ¬åœ°å¿«é€Ÿå®Œæˆe2eæµ‹è¯•å¹¶å®ç°debugåŠŸèƒ½"><meta itemprop="keywords" content="higress"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/zh-cn/blog/e2e-debug">æ•™ç¨‹ï¼šå¦‚ä½•åœ¨æœ¬åœ°è¿›è¡Œhigressè°ƒè¯•å’Œç«¯åˆ°ç«¯æµ‹è¯•</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-12-19T00:00:00.000Z" itemprop="datePublished">2023å¹´12æœˆ19æ—¥</time> Â· <!-- -->é˜…è¯»éœ€ 15 åˆ†é’Ÿ</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><span itemprop="name">SJC</span></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="èƒŒæ™¯è¯´æ˜">èƒŒæ™¯è¯´æ˜<a href="#èƒŒæ™¯è¯´æ˜" class="hash-link" aria-label="èƒŒæ™¯è¯´æ˜çš„ç›´æ¥é“¾æ¥" title="èƒŒæ™¯è¯´æ˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æœ¬åœ°è°ƒè¯•">æœ¬åœ°è°ƒè¯•<a href="#æœ¬åœ°è°ƒè¯•" class="hash-link" aria-label="æœ¬åœ°è°ƒè¯•çš„ç›´æ¥é“¾æ¥" title="æœ¬åœ°è°ƒè¯•çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>æœ¬åœ°è°ƒè¯•æ—¨åœ¨åœ¨å¼€å‘è€…çš„æœ¬åœ°å¼€å‘ç¯å¢ƒä¸­è¯†åˆ«ã€å®šä½å’Œä¿®å¤ä»£ç ä¸­çš„é”™è¯¯ï¼ˆbugï¼‰ã€‚è¿™ä¸ªé˜¶æ®µçš„ä¸»è¦ç›®æ ‡æ˜¯ç¡®ä¿å•ä¸ªæ¨¡å—æˆ–ç»„ä»¶çš„æ­£ç¡®æ€§ï¼Œä»¥ä¾¿æ›´å®¹æ˜“ç†è§£å’Œè§£å†³é—®é¢˜ã€‚</p><p>å¼€å‘è€…é€šå¸¸ä½¿ç”¨æœ¬åœ°é›†æˆå¼€å‘ç¯å¢ƒï¼ˆIDEï¼‰æˆ–è°ƒè¯•å™¨æ¥é€æ­¥æ‰§è¡Œä»£ç ã€æŸ¥çœ‹å˜é‡çš„å€¼ã€è§‚å¯Ÿç¨‹åºçš„æµç¨‹ï¼Œå¹¶é€šè¿‡æ‰“æ–­ç‚¹æ¥æ£€æŸ¥ä»£ç çš„æ‰§è¡Œè¿‡ç¨‹ã€‚</p><p>æœ¬åœ°è°ƒè¯•æ˜¯ä¸€ä¸ªå¿«é€Ÿã€è¿…é€Ÿå®šä½é—®é¢˜å¹¶è¿›è¡Œä¿®å¤çš„é˜¶æ®µï¼Œèƒ½å¤Ÿæä¾›å®æ—¶çš„åé¦ˆã€‚å®ƒæœ‰åŠ©äºç¡®ä¿ä»£ç çš„å±€éƒ¨æ­£ç¡®æ€§ï¼Œè€Œä¸éœ€è¦è€ƒè™‘æ•´ä¸ªç³»ç»Ÿçš„äº¤äº’ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç«¯åˆ°ç«¯æµ‹è¯•">ç«¯åˆ°ç«¯æµ‹è¯•<a href="#ç«¯åˆ°ç«¯æµ‹è¯•" class="hash-link" aria-label="ç«¯åˆ°ç«¯æµ‹è¯•çš„ç›´æ¥é“¾æ¥" title="ç«¯åˆ°ç«¯æµ‹è¯•çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>e2eæµ‹è¯•æ˜¯ä¸€ç§ç«¯åˆ°ç«¯çš„æµ‹è¯•ï¼Œæ˜¯ä¸€ç§å…¨é¢çš„æµ‹è¯•æ–¹æ³•ï¼Œç”¨äºéªŒè¯æ•´ä¸ªè½¯ä»¶ç³»ç»Ÿåœ¨çœŸå®ç¯å¢ƒä¸­çš„åŠŸèƒ½å’Œæ€§èƒ½ã€‚å®ƒæ¨¡æ‹Ÿç”¨æˆ·çš„å®é™…ä½¿ç”¨æƒ…å†µï¼Œç¡®ä¿æ•´ä¸ªç³»ç»Ÿçš„å„ä¸ªéƒ¨åˆ†æ­£ç¡®ååŒå·¥ä½œï¼Œä»¥è¾¾åˆ°ç”¨æˆ·æœŸæœ›çš„åŠŸèƒ½ã€‚</p><p>ç«¯åˆ°ç«¯æµ‹è¯•å…³æ³¨æ•´ä¸ªç³»ç»Ÿçš„é›†æˆå’Œäº¤äº’ï¼Œæ—¨åœ¨å‘ç°ä¸åŒç»„ä»¶ä¹‹é—´çš„é—®é¢˜ä»¥åŠåœ¨å®é™…ä½¿ç”¨åœºæ™¯ä¸­å¯èƒ½å‡ºç°çš„ bugã€‚è¿™æœ‰åŠ©äºç¡®ä¿ç³»ç»Ÿåœ¨ç”Ÿäº§ç¯å¢ƒä¸­çš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚</p><p>åœ¨higressä¸­ï¼Œe2eæµ‹è¯•çš„ä¸»è¦æµç¨‹å¯ç”¨ä¸‹å›¾æ¥è¡¨ç¤ºï¼š</p><p><img loading="lazy" alt="img.png" src="/zh-cn/assets/images/e2e-debug0-e9db11f70bb082a52732b7b318a076a7.png" width="1083" height="133" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å¼Šç«¯">å¼Šç«¯<a href="#å¼Šç«¯" class="hash-link" aria-label="å¼Šç«¯çš„ç›´æ¥é“¾æ¥" title="å¼Šç«¯çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ul><li><p>åœ¨æœ¬åœ°å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦é¢‘ç¹çš„è¿›è¡Œe2eæµ‹è¯•ï¼Œä½†æ˜¯æ¯æ¬¡éƒ½è¦é‡æ–°æ„å»ºé•œåƒã€åŠ è½½é•œåƒã€å®‰è£…higressã€è¿è¡Œe2eæµ‹è¯•ï¼Œè¿™æ ·çš„è¿‡ç¨‹éå¸¸è€—æ—¶ï¼Œå› æ­¤æˆ‘ä»¬å¸Œæœ›å°½é‡åœ°å‡å°‘è¿™äº›è¿‡ç¨‹ï¼Œå¤ç”¨æµ‹è¯•ç¯å¢ƒä»¥æé«˜å¼€å‘æ•ˆç‡ã€‚</p></li><li><p>å½“e2eè¿è¡Œçš„æ—¶å€™å‡ºç°é—®é¢˜ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿå¿«é€Ÿå®šä½é—®é¢˜ï¼Œè¿™å°±éœ€è¦åœ¨e2eæµ‹è¯•ä¸­å®ç°æœ¬åœ°è°ƒè¯•çš„åŠŸèƒ½ã€‚</p></li><li><p>å¦å¤–ï¼Œé€šå¸¸å¼€å‘wasmæ’ä»¶çš„æ—¶å€™æ˜¯ä¸éœ€è¦é‡æ–°æ„å»ºé•œåƒçš„ï¼Œåªéœ€è¦å¤ç”¨æµ‹è¯•ç¯å¢ƒå³å¯ã€‚ç„¶è€Œï¼Œå½“æ¶‰åŠåˆ°higress-coreç»„ä»¶ä»£ç (higressæ ¸å¿ƒä»£ç )ä¿®æ”¹çš„æ—¶å€™ï¼Œå°±éœ€è¦é‡æ–°æ„å»ºé•œåƒï¼Œé¢‘ç¹åœ°ä¿®æ”¹ä»£ç ã€é‡æ–°æ„å»ºé•œåƒä»¥è¿è¡Œe2eæµ‹è¯•ï¼Œè¿™æ ·å¼€å‘æ•ˆç‡å°±ä¼šå¤§å¤§é™ä½ã€‚</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆ<a href="#è§£å†³æ–¹æ¡ˆ" class="hash-link" aria-label="è§£å†³æ–¹æ¡ˆçš„ç›´æ¥é“¾æ¥" title="è§£å†³æ–¹æ¡ˆçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ul><li>ä¸æ¶‰åŠhigress-coreç»„ä»¶ä¿®æ”¹</li></ul><p>å¯åˆ†ä¸ºç«¯åˆ°ç«¯æµ‹è¯•çš„ä¼˜åŒ–å’Œåœ¨ç«¯åˆ°ç«¯æµ‹è¯•ä¸­å®ç°æœ¬åœ°è°ƒè¯•çš„åŠŸèƒ½ï¼Œç«¯åˆ°ç«¯ä¼˜åŒ–å¯é‡‡ç”¨å®ç°æµ‹è¯•ç¯å¢ƒå¤ç”¨çš„æ–¹æ³•ï¼Œé€šè¿‡ä¿®æ”¹makefileæ–‡ä»¶æ¥å‡å°‘ç¯å¢ƒçš„åˆ›å»ºç­‰å¼€é”€ã€‚</p><p>è€Œåœ¨ç«¯åˆ°ç«¯æµ‹è¯•ä¸­å®ç°æœ¬åœ°è°ƒè¯•çš„åŠŸèƒ½ï¼Œå¯é€šè¿‡Golandæ¥å®ç°ï¼Œæå‰å‡†å¤‡å¥½æµ‹è¯•ç¯å¢ƒï¼Œä¿®æ”¹e2eæµ‹è¯•çš„éƒ¨åˆ†ä»£ç æ¥å‡å°‘e2eç¯å¢ƒåˆ›å»ºçš„å¼€é”€ï¼Œæ›´åŠ æ–¹ä¾¿çš„å®ç°debugåŠŸèƒ½ã€‚</p><ul><li>æ¶‰åŠhigress-coreç»„ä»¶ä¿®æ”¹</li></ul><p>å¯åœ¨æœ¬åœ°å¯åŠ¨higress-coreç»„ä»¶ï¼Œå¹¶ä½¿å…¶èƒ½å¤Ÿä¸kindé›†ç¾¤ä¸­çš„discoveryã€gatewayç­‰ç»„ä»¶è¿›è¡Œäº¤äº’ã€‚</p><p>ä¾‹å¦‚åœ¨æ¶‰åŠåˆ°higress-configçš„ConfigMapä¿®æ”¹çš„æ—¶å€™ï¼Œå…¶æµç¨‹å¤§è‡´å¦‚ä¸‹ï¼š</p><p><img loading="lazy" alt="img.png" src="/zh-cn/assets/images/e2e-debug5-cbdc082e404661537dfc9eccfe2f35a8.png" width="1076" height="177" class="img_ev3q"></p><p>å¯ä»¥å‘ç°ï¼Œåªéœ€è¦ä¿®æ”¹higress-coreå®¹å™¨ä¸discoveryå®¹å™¨ä¹‹é—´çš„xdsåè®®é€šä¿¡åœ°å€ï¼Œä½¿å…¶èƒ½å¤Ÿä¸æœ¬åœ°çš„higress-coreå®¹å™¨è¿›è¡Œäº¤äº’ï¼Œå…¶æ˜¯æ³¨å†Œåœ¨grpcæœåŠ¡ä¸Šçš„ï¼Œå› æ­¤åªéœ€è¦ä¿®æ”¹xdsåœ°å€ä¸ºæœ¬åœ°çš„grpcæœåŠ¡åœ°å€å³å¯ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å…·ä½“å®ç°">å…·ä½“å®ç°<a href="#å…·ä½“å®ç°" class="hash-link" aria-label="å…·ä½“å®ç°çš„ç›´æ¥é“¾æ¥" title="å…·ä½“å®ç°çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç«¯åˆ°ç«¯æµ‹è¯•ä¼˜åŒ–">ç«¯åˆ°ç«¯æµ‹è¯•ä¼˜åŒ–<a href="#ç«¯åˆ°ç«¯æµ‹è¯•ä¼˜åŒ–" class="hash-link" aria-label="ç«¯åˆ°ç«¯æµ‹è¯•ä¼˜åŒ–çš„ç›´æ¥é“¾æ¥" title="ç«¯åˆ°ç«¯æµ‹è¯•ä¼˜åŒ–çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>é€šè¿‡makefileæ¥å®Œæˆï¼ŒåŒ…å«å¯åŠ¨ç³»åˆ—ç¯å¢ƒå’Œæ‰§è¡Œe2eæµ‹è¯•ã€‚</p><p>ä»¥è¿è¡Œæ’ä»¶æµ‹è¯•ä¸ºä¾‹ï¼Œå…¶makeå‘½ä»¤å¦‚ä¸‹ï¼š</p><div class="language-makefile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-makefile codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin-target builtin">.PHONY</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress-wasmplugin-test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token target symbol" style="color:#36acaa">higress-wasmplugin-test</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tools/kind</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> delete-cluster create-cluster docker-build kube-load-image install-dev-wasmplugin run-higress-e2e-test-wasmplugin delete-cluster</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¼€å‘è€…é¦–æ¬¡è¿è¡Œç¯å¢ƒå¯å…ˆåˆ é™¤æœ€åä¸€ä¸ª<code>delete-cluster</code>çš„æ“ä½œï¼Œç¬¬äºŒæ¬¡è¿è¡Œe2eæµ‹è¯•çš„æ—¶å€™å¯ä»¥åˆ é™¤å‰é¢çš„æ“ä½œï¼Œåªä¿ç•™<code>run-higress-e2e-test-wasmplugin</code>çš„æ“ä½œï¼Œè¿™æ ·å°±å¯ä»¥å‡å°‘å¾ˆå¤šæ—¶é—´ã€‚</p><p>ç„¶è€Œmakeå‘½ä»¤ä¸æ”¯æŒæ·»åŠ åˆ°golandé‡Œé¢å®ç°debugåŠŸèƒ½ï¼Œè¿è¡Œå‡ºé”™çš„æ—¶å€™ä¹Ÿä¸æ–¹ä¾¿å®šä½é—®é¢˜ï¼Œæ›´æ¨èä½¿ç”¨ä¸‹é¢è¿™ä¸ªæ–¹æ³•ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="åœ¨e2eä¸­å®ç°æœ¬åœ°è°ƒè¯•">åœ¨e2eä¸­å®ç°æœ¬åœ°è°ƒè¯•<a href="#åœ¨e2eä¸­å®ç°æœ¬åœ°è°ƒè¯•" class="hash-link" aria-label="åœ¨e2eä¸­å®ç°æœ¬åœ°è°ƒè¯•çš„ç›´æ¥é“¾æ¥" title="åœ¨e2eä¸­å®ç°æœ¬åœ°è°ƒè¯•çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>é€šè¿‡Golandæ¥å®Œæˆï¼Œæå‰å‡†å¤‡å¥½ç¯å¢ƒï¼Œä¿®æ”¹Golandå¯åŠ¨å‚æ•°æ¥å®Œæˆæœ¬åœ°è°ƒè¯•ã€‚</p><ul><li>e2eæµ‹è¯•ä¹‹å‰çš„å‡†å¤‡</li></ul><p>æ ¹æ®å„è‡ªçš„éœ€æ±‚æ¥å®šåˆ¶ç¯å¢ƒï¼Œå¦‚æœæµ‹è¯•ç¯å¢ƒä¸­éœ€è¦ç”¨åˆ°higressçš„controllerã€gatewayç­‰ç»„ä»¶ï¼Œéœ€è¦æå‰æœ¬åœ°å®‰è£…å¥½ç¯å¢ƒï¼Œå®‰è£…æ•™ç¨‹å¯å‚è€ƒ<a href="https://higress.io/zh-cn/docs/user/quickstart/" target="_blank" rel="noopener noreferrer">è¿™é‡Œ</a>ï¼Œæˆ–è€…å‚è€ƒç«¯åˆ°ç«¯æµ‹è¯•ä¼˜åŒ–æ­¥éª¤æ¥å‡†å¤‡å¥½æµ‹è¯•ç¯å¢ƒã€‚</p><p>å®‰è£…å¥½higressåï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ¥æŸ¥çœ‹higressçš„podæ˜¯å¦æ­£å¸¸è¿è¡Œï¼š</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get pods --all-namespaces</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ˜¾ç¤ºç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img loading="lazy" alt="1.png" src="/zh-cn/assets/images/e2e-debug1-6d4ad979b78fd26ceedc43b24fc18b3c.png" width="980" height="136" class="img_ev3q"></p><p>éƒ½æ˜¾ç¤ºRunningçŠ¶æ€ï¼Œè¯´æ˜higresså·²ç»æ­£å¸¸è¿è¡Œã€‚</p><ul><li>e2eçš„flagä¿®æ”¹</li></ul><p>åœ¨<code>test/e2e/conformance/utils/flags</code>ç›®å½•ä¸‹ï¼Œæœ‰ä¸€ä¸ª<code>flags.go</code>æ–‡ä»¶ï¼Œé‡Œé¢å®šä¹‰äº†e2eæµ‹è¯•çš„flagï¼š</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    IngressClassName     </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> flag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">String</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;ingress-class&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;higress&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Name of IngressClass to use for tests&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ShowDebug            </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> flag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Bool</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;debug&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Whether to print debug logs&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CleanupBaseResources </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> flag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Bool</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;cleanup-base-resources&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Whether to cleanup base test resources after the run&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SupportedFeatures    </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> flag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">String</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;supported-features&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Supported features included in conformance tests suites&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ExemptFeatures       </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> flag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">String</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;exempt-features&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Exempt Features excluded from conformance tests suites&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    IsWasmPluginTest     </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> flag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Bool</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;isWasmPluginTest&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Determine if run wasm plugin conformance test&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    WasmPluginType       </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> flag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">String</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;wasmPluginType&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;GO&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Define wasm plugin type, currently supports GO, CPP&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    WasmPluginName       </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> flag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">String</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;wasmPluginName&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Define wasm plugin name&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    IsEnvoyConfigTest    </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> flag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Bool</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;isEnvoyConfigTest&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Determine if run envoy config conformance test&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¯ä¸´æ—¶ä¿®æ”¹è¿™äº›flagçš„åˆå§‹å€¼ï¼Œä¹Ÿå¯ä»¥åœ¨Golandç¼–è¾‘å™¨ä¸­å®šä¹‰å¯åŠ¨å‚æ•°ï¼Œä¾‹å¦‚è®¾ç½®<code>IsWasmPluginTest</code>ä¸ºtrueå¯åªè¿è¡Œwasmæ’ä»¶çš„e2eæµ‹è¯•ã€‚</p><p>ä¿®æ”¹å¥½flagä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨Golandä¸­é€šè¿‡debugçš„æ–¹å¼è¿è¡Œe2eæµ‹è¯•ã€‚å¯å…ˆåœ¨å¦‚ä¸‹ä½ç½®æ·»åŠ ä¸€ä¸ªæ–­ç‚¹ï¼Œç­‰å¾…e2eç¯å¢ƒå‡†å¤‡å®Œæ¯•ï¼š</p><p><img loading="lazy" alt="2.png" src="/zh-cn/assets/images/e2e-debug2-de7c59fff6871ae104cb9f1fdbae9f65.png" width="1335" height="987" class="img_ev3q"></p><p>e2eæµ‹è¯•åœ¨å‰æœŸç¯å¢ƒå‡†å¤‡çš„è¿‡ç¨‹ä¸­ä¼šåˆ›å»ºä¸€äº›namespaceå¹¶å¯åŠ¨ä¸€äº›podï¼Œå¯ä»¥æ‰‹åŠ¨æŸ¥çœ‹ä¸€ä¸‹podçš„å¯åŠ¨æƒ…å†µã€‚</p><p><img loading="lazy" alt="img.png" src="/zh-cn/assets/images/e2e-debug3-4d25bee1f70fb8ae0a0a90deee54244d.png" width="1201" height="605" class="img_ev3q"></p><p>åœ¨è¿™å¼ å›¾é‡Œé¢ï¼Œé™¤äº†æˆ‘ä»¬æå‰å®‰è£…å¥½çš„higressç»„ä»¶ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„podï¼Œè¿™äº›podæ˜¯e2eæµ‹è¯•è¿‡ç¨‹ä¸­åˆ›å»ºçš„ï¼Œå¦‚æœæœ‰äº›podåœ¨æœ¬åœ°e2eæµ‹è¯•ä¸­ç”¨ä¸åˆ°ï¼Œå¯æ‰‹åŠ¨ä¿®æ”¹ä»£ç æ¥å‡å°‘å‰æœŸç¯å¢ƒçš„å‡†å¤‡æ—¶é—´ã€‚</p><blockquote><p>æ³¨æ„ï¼šå¦‚æœè®¾ç½®äº†cleanup-base-resourcesä¸ºfalseï¼Œé‚£ä¹ˆe2eæµ‹è¯•ç»“æŸä¹‹åï¼Œè¿™äº›podä¸ä¼šè¢«åˆ é™¤ï¼Œä½†æ˜¯é‡å¯çš„æ—¶å€™ä¼šæŠ¥é”™ï¼Œä¾‹å¦‚ï¼š</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Pod &quot;consul-standlone&quot; is invalid: spec: Forbidden: pod updates may not change fields other than `spec.containers[*].image`, `spec.initContainers[*].image`, `spec.activeDeadlineSeconds`, `spec.tolerations` (only additions to existing tolerations) or `spec.terminationGracePeriodSeconds` (allow it to be set to 1 if it was previously negative)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></blockquote><blockquote><p>å»ºè®®è®¾ç½®ä¸ºtrueï¼Œæ¯æ¬¡æµ‹è¯•å®Œéœ€è¦ç­‰å¾…podçš„é”€æ¯ï¼Œç„¶åé‡æ–°æµ‹è¯•ï¼Œè¿™äº›è¿‡ç¨‹ä¸€èˆ¬å¾ˆå¿«ï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹ä»£ç æ¥å‡å°‘ä¸€äº›podçš„åˆ›å»ºã€‚</p></blockquote><ul><li>e2eæµ‹è¯•ç¯å¢ƒä¼˜åŒ–</li></ul><p>ä¾‹å¦‚åªéœ€è¦higressç¯å¢ƒï¼Œè€Œä¸éœ€è¦<code>higress-conformance-infra</code>,<code>higress-conformance-app-backend</code>ç­‰namespaceç¯å¢ƒï¼Œå¯ä»¥æ‰‹åŠ¨åœ¨å¦‚ä¸‹å‡ è¡Œä»£ç é‡Œæ·»åŠ æ³¨é‡Šï¼Œæ¥è·³è¿‡è¿™äº›ç¯å¢ƒçš„åˆ›å»ºï¼Œç„¶åæµ‹è¯•ä¸­åªç”¨åˆ°äº†higressçš„ç»„ä»¶ï¼š</p><p><img loading="lazy" alt="img.png" src="/zh-cn/assets/images/e2e-debug4-263420d802513c11800de3ce76b453f8.png" width="1372" height="984" class="img_ev3q"></p><p>åœ¨è¿™é‡Œï¼Œæˆ‘åªéœ€è¦è¿è¡Œ<code>EnvoyConfigTracing</code>çš„Testæµ‹è¯•ï¼Œå®ƒåªè·Ÿhigresså’Œhigress-conformance-infraæœ‰å…³ï¼Œæ³¨é‡Šæ‰äº†å…¶ä»–namespaceçš„å‡†å¤‡ç¯å¢ƒï¼Œå¯ä»¥çœ‹åˆ°e2eæµ‹è¯•ä¸åˆ°1så°±ç»“æŸäº†ã€‚</p><p>å¦‚æœéœ€è¦å…¶ä»–namespaceçš„ç¯å¢ƒï¼Œè€Œä¸éœ€è¦nacos/consulç­‰ç¯å¢ƒï¼Œå¯ä»¥åœ¨suiteçš„Newæ–¹æ³•é‡Œæ‰¾åˆ°ä»¥ä¸‹ä»£ç å—ï¼Œæ ¹æ®éœ€è¦è¿›è¡Œæ³¨é‡Šï¼š</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// apply defaults</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> suite</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">BaseManifests </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    suite</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">BaseManifests </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;base/manifests.yaml&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;base/consul.yaml&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;base/eureka.yaml&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;base/nacos.yaml&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;base/dubbo.yaml&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è§£å†³å¥½e2eæµ‹è¯•çš„ç¯å¢ƒç›¸å…³é—®é¢˜ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨Golandé‡Œæ·»åŠ è‡ªå·±æƒ³è¦çš„æ–­ç‚¹ï¼Œæ¥debugæµ‹è¯•ç”¨ä¾‹äº†ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="higress-coreæœ¬åœ°è°ƒè¯•e2eæµ‹è¯•">higress-coreæœ¬åœ°è°ƒè¯•+e2eæµ‹è¯•<a href="#higress-coreæœ¬åœ°è°ƒè¯•e2eæµ‹è¯•" class="hash-link" aria-label="higress-coreæœ¬åœ°è°ƒè¯•+e2eæµ‹è¯•çš„ç›´æ¥é“¾æ¥" title="higress-coreæœ¬åœ°è°ƒè¯•+e2eæµ‹è¯•çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ul><li>é¦–å…ˆåœ¨æœ¬åœ°å¯åŠ¨higress-coreç»„ä»¶ï¼Œéœ€è¦ä¿®æ”¹å…¶å¯åŠ¨å‚æ•°ï¼Œä¸æ­£å¸¸éƒ¨ç½²çš„å¯åŠ¨å‚æ•°ä¿æŒä¸€è‡´ï¼Œå¯å‚è€ƒå¦‚ä¸‹é…ç½®Golandçš„å¯åŠ¨å‚æ•°ï¼š</li></ul><p><img loading="lazy" alt="img.png" src="/zh-cn/assets/images/e2e-debug6-19e1a126b7ce35334a9c2d73da8a8b77.png" width="1018" height="814" class="img_ev3q"></p><ul><li>æŸ¥æ‰¾è‡ªå·±çš„æœ¬æœºéå›ç¯ç½‘å¡çš„ipåœ°å€ï¼Œä¾‹å¦‚æˆ‘ä½¿ç”¨wlo0ç½‘å¡ï¼Œä¹Ÿå°±æ˜¯192.168.0.189</li></ul><p><img loading="lazy" alt="img.png" src="/zh-cn/assets/images/e2e-debug7-5aee459287eee78b4f81c389416b186c.png" width="1022" height="190" class="img_ev3q"></p><ul><li>ä¿®æ”¹xdsåè®®åœ°å€ï¼Œè¿è¡Œ<code>kubectl edit cm higress-config -n higress-system</code>ï¼Œå°†å…¶ä¿®æ”¹æœ¬åœ°çš„grpcæœåŠ¡åœ°å€ï¼Œå¦‚å›¾ï¼š</li></ul><p><img loading="lazy" alt="img.png" src="/zh-cn/assets/images/e2e-debug8-de3b41a3f2a5259600b86fe1e3a7a638.png" width="706" height="161" class="img_ev3q"></p><p>å°†å…¶ä¸­çš„127.0.0.1:15051ä¿®æ”¹ä¸º192.168.0.189:15051ï¼Œä¿å­˜é€€å‡ºã€‚</p><ul><li>é‡å¯controllerå’Œgateway deploymentï¼Œä½¿å…¶èƒ½å¤Ÿé‡æ–°åŠ è½½é…ç½®:</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl rollout restart deployment higress-gateway -n higress-system</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl rollout restart deployment higress-controller -n higress-system</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="img.png" src="/zh-cn/assets/images/e2e-debug9-3a14da3112f41d230e6b7112658ba74e.png" width="1016" height="238" class="img_ev3q"></p><ul><li>é‡å¯æˆåŠŸåå¯ä»¥å…ˆè¿è¡Œä¸€ä¸‹ç®€å•çš„e2eæµ‹è¯•ï¼Œæ¯”å¦‚http routeç­‰ï¼Œæµ‹è¯•æ˜¯å¦èƒ½æ­£å¸¸è¿é€šgatewayï¼Œå…³äºConfigMapéƒ¨åˆ†ï¼Œæˆ‘è¿™é‡Œç»™æœ¬åœ°higress-coreæ·»åŠ äº†ä¸€ä¸ªglobal-optionçš„é…ç½®ï¼Œæ­¤æ—¶kindçš„coreç»„ä»¶è¿˜æ²¡æœ‰è¯¥é…ç½®ï¼ŒæŒ‰ç…§å‰é¢æ­¥éª¤å¯åŠ¨æœ¬åœ°higress-coreå¹¶ä¿®æ”¹xdsåœ°å€é‡å¯è´Ÿè½½ä¹‹åï¼Œè¿è¡Œç›¸å…³çš„e2eæµ‹è¯•ï¼Œå¯ä»¥çœ‹åˆ°æµ‹è¯•é€šè¿‡ï¼Œæœ¬åœ°higress-coreæ—¥å¿—ä»¥åŠkindä¸Šçš„discoveryæ—¥å¿—å¦‚ä¸‹ï¼š</li></ul><p><img loading="lazy" alt="img.png" src="/zh-cn/assets/images/e2e-debug10-b495481ce79e3c61606be79a1baee0fb.png" width="1824" height="858" class="img_ev3q"></p><p>é€šè¿‡æœ¬åœ°higress-coreæ—¥å¿—å¯ä»¥çœ‹åˆ°adsæˆåŠŸæ¨é€å‡ºå»envoyfilteré…ç½®æ–‡ä»¶ç»™discoveryï¼Œè€Œdiscoveryæ—¥å¿—åˆ™æ˜¾ç¤ºlds/rds/cdsç­‰æˆåŠŸå°†é…ç½®æ–‡ä»¶æ¨é€ç»™gatewayã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="hgctl-code-debugçš„ä½¿ç”¨">hgctl code-debugçš„ä½¿ç”¨<a href="#hgctl-code-debugçš„ä½¿ç”¨" class="hash-link" aria-label="hgctl code-debugçš„ä½¿ç”¨çš„ç›´æ¥é“¾æ¥" title="hgctl code-debugçš„ä½¿ç”¨çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>hgctlå·²ç»æ¨å‡ºcode-debugçš„åŠŸèƒ½ï¼Œä¼šè‡ªåŠ¨ä¿®æ”¹xdsåœ°å€ï¼Œä½¿å…¶èƒ½å¤Ÿä¸æœ¬åœ°çš„higress-coreè¿›è¡Œäº¤äº’ã€‚è¿™é‡Œéœ€è¦ä½¿ç”¨hgctlæ¥å®‰è£…higressï¼Œç›®å‰code-debugåªæ”¯æŒlocal-k8sçš„profileã€‚</p><ul><li>hgctlå®‰è£…higress</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">hgctl </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> --set </span><span class="token assign-left variable" style="color:#36acaa">profile</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">local-k8s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç­‰å¾…å®‰è£…å®Œæˆåï¼Œæ‰‹åŠ¨æŸ¥çœ‹ä¸€ä¸‹æ˜¯å¦å¯åŠ¨æˆåŠŸã€‚</p><ul><li>å¯åŠ¨æœ¬åœ°higress-core</li></ul><p>ä¿®æ”¹Golandå¯åŠ¨å‚æ•°ä¸º<code>serve --kubeconfig=/root/.kube/config</code>(æ”¹ä¸ºè‡ªå·±çš„homeç›®å½•)ï¼Œç„¶åå¯åŠ¨higress-coreï¼Œç­‰å¾…higress-coreå¯åŠ¨æˆåŠŸã€‚</p><ul><li>å¼€å¯code-debug</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">hgctl code-debug start</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æŸ¥çœ‹controllerå’Œgatewayçš„podæ˜¯å¦é‡å¯æˆåŠŸï¼Œå¦‚æœé‡å¯æˆåŠŸï¼Œè¯´æ˜code-debugå·²ç»ç”Ÿæ•ˆã€‚</p><ul><li>å…¶ä»–ç¯å¢ƒå‡†å¤‡</li></ul><p>åœ¨åé¢çš„æ­¥éª¤ä¸Šæ¶‰åŠåˆ°Ingressèµ„æºï¼Œè¿™é‡Œéœ€è¦å‡†å¤‡ä¸€ä¸‹Ingressèµ„æºï¼Œè¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f - </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token string" style="color:#e3116c">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">apiVersion: v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">kind: Namespace</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  name: higress-conformance-infra</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    higress-conformance: infra</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">apiVersion: v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">kind: Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  name: infra-backend-v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  namespace: higress-conformance-infra</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  selector:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    app: infra-backend-v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    - protocol: TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      port: 8080</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      targetPort: 3000</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">apiVersion: apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">kind: Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  name: infra-backend-v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  namespace: higress-conformance-infra</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    app: infra-backend-v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  replicas: 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  selector:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    matchLabels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      app: infra-backend-v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  template:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        app: infra-backend-v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      - name: infra-backend-v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        # From https://github.com/kubernetes-sigs/ingress-controller-conformance/tree/master/images/echoserver</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        image: higress-registry.cn-hangzhou.cr.aliyuncs.com/higress/echoserver:v20221109-7ee2f3e</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        env:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        - name: POD_NAME</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          valueFrom:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            fieldRef:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">              fieldPath: metadata.name</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        - name: NAMESPACE</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          valueFrom:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            fieldRef:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">              fieldPath: metadata.namespace</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        resources:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          requests:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            cpu: 10m</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">apiVersion: networking.k8s.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">kind: Ingress</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  name: higress-conformance-infra-configmap-global-test</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  namespace: higress-conformance-infra</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  ingressClassName: higress</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  rules:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    - host: &quot;foo.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      http:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        paths:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          - pathType: Prefix</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            path: &quot;/foo&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            backend:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">              service:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">                name: infra-backend-v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">                port:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">                  number: 8080</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>è°ƒè¯•higress-core</li></ul><p>ä»¥ConfigMapçš„gzip(ä½äºpkg/ingress/kube/configmap/gzip.go)ä¸ºä¾‹ï¼Œä¿®æ”¹<code>NewDefaultGzip</code>æ–¹æ³•ï¼Œå°†<code>Enable</code>çš„é»˜è®¤å€¼ä¿®æ”¹ä¸ºtrueï¼Œç„¶åé‡å¯higress-coreã€‚</p><p>åœ¨é‡å¯ä¹‹å‰ï¼Œå…ˆè¿è¡Œå¦‚ä¸‹shellå‘½ä»¤ï¼Œå¯åŠ¨envoyæŸ¥çœ‹é¢æ¿ï¼š</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">hgctl dashboard envoy</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è®¿é—®http://localhost:15000/config_dumpï¼Œä½¿ç”¨Ctrl+Fæœç´¢<code>compression_level</code>ï¼Œå¯ä»¥çœ‹åˆ°æŸ¥æ‰¾ç»“æœä¸ºç©ºï¼Œè¯´æ˜gzipé…ç½®è¿˜æ²¡æœ‰ç”Ÿæ•ˆã€‚</p><p>æ¥ä¸‹æ¥é‡å¯higress-coreï¼Œç­‰å¾…higress-coreé‡å¯æˆåŠŸï¼Œå†æ¬¡è®¿é—®http://localhost:15000/config_dumpï¼Œä½¿ç”¨Ctrl+Fæœç´¢<code>compression_level</code>ï¼Œå¯ä»¥çœ‹åˆ°æŸ¥æ‰¾ç»“æœä¸ä¸ºç©ºï¼Œè¯´æ˜gzipé…ç½®å·²ç»ç”Ÿæ•ˆã€‚</p><ul><li>å…³é—­code-debug</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">hgctl code-debug stop</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ€»ç»“">æ€»ç»“<a href="#æ€»ç»“" class="hash-link" aria-label="æ€»ç»“çš„ç›´æ¥é“¾æ¥" title="æ€»ç»“çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ol><li>æœ¬åœ°è°ƒè¯•å’Œe2eæµ‹è¯•æ˜¯å¼€å‘è¿‡ç¨‹ä¸­å¿…ä¸å¯å°‘çš„ç¯èŠ‚ï¼Œé€šè¿‡æœ¬æ–‡çš„ä»‹ç»ï¼Œæˆ‘ä»¬å¯ä»¥æ›´åŠ æ–¹ä¾¿çš„è¿›è¡Œæœ¬åœ°è°ƒè¯•å’Œe2eæµ‹è¯•ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚</li><li>æ¶‰åŠåˆ°higress-coreç»„ä»¶ä¿®æ”¹çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹xdsåœ°å€å¹¶æœ¬åœ°å¯åŠ¨higress-coreï¼Œè€Œä¸éœ€è¦é¢‘ç¹åœ°ä¿®æ”¹ä»£ç ã€é‡æ–°æ„å»ºé•œåƒä»¥è¿è¡Œe2eæµ‹è¯•ï¼Œå¹¶ä¸”è¿˜èƒ½è°ƒè¯•higress-coreç»„ä»¶çš„ä»£ç ã€‚</li><li>higressåç»­ä¼šæ¨å‡ºä¸€äº›æ–°åŠŸèƒ½ï¼Œå®ç°e2eæµ‹è¯•çš„æ‹†åˆ†ï¼Œä¸»è¦ä¼šåˆ†ä¸ºå‡†å¤‡ç¯å¢ƒï¼Œè¿è¡Œæµ‹è¯•ä»¥åŠæ¸…é™¤ç¯å¢ƒç­‰ï¼Œçµæ´»æ€§æ›´é«˜ã€‚</li></ol></div><footer class="row docusaurus-mt-lg"></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="description" content="Higress æ‹›è˜ä¿¡æ¯"><meta itemprop="keywords" content="higress,hiring"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/zh-cn/blog/hring">Higress å›¢é˜Ÿæ‹›å‹Ÿå°ä¼™ä¼´åŠ å…¥ï½</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-11-17T00:00:00.000Z" itemprop="datePublished">2023å¹´11æœˆ17æ—¥</time> Â· <!-- -->é˜…è¯»éœ€ 6 åˆ†é’Ÿ</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><span itemprop="name">æ¾„æ½­</span></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="åŠ å…¥higressçš„å•†ä¸šåŒ–team">åŠ å…¥Higressçš„å•†ä¸šåŒ–Team<a href="#åŠ å…¥higressçš„å•†ä¸šåŒ–team" class="hash-link" aria-label="åŠ å…¥Higressçš„å•†ä¸šåŒ–Teamçš„ç›´æ¥é“¾æ¥" title="åŠ å…¥Higressçš„å•†ä¸šåŒ–Teamçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>æˆ‘ä»¬å•†ä¸šåŒ–Teamæœ‰å……è¶³çš„HCï¼Œæ¬¢è¿åŠ å…¥ğŸ‘ï¼Œè”ç³»æ–¹å¼ï¼šå¾®ä¿¡(nomadao)  é‚®ç®±(<a href="mailto:zty98751@alibaba-inc.com" target="_blank" rel="noopener noreferrer">zty98751@alibaba-inc.com</a>)</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å›¢é˜Ÿä»‹ç»">å›¢é˜Ÿä»‹ç»<a href="#å›¢é˜Ÿä»‹ç»" class="hash-link" aria-label="å›¢é˜Ÿä»‹ç»çš„ç›´æ¥é“¾æ¥" title="å›¢é˜Ÿä»‹ç»çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>Higresså›¢é˜Ÿå±äºé˜¿é‡Œäº‘äº‘åŸç”Ÿä¸­é—´ä»¶å›¢é˜Ÿã€‚</p><p>é˜¿é‡Œäº‘äº‘åŸç”Ÿä¸­é—´ä»¶å›¢é˜Ÿè´Ÿè´£åˆ†å¸ƒå¼è½¯ä»¶åŸºç¡€è®¾æ–½ï¼Œä¸ºé˜¿é‡Œäº‘ä¸Šä¸‡å®¶ä¼ä¸šæä¾›å¦‚å¾®æœåŠ¡å¼•æ“ã€åˆ†å¸ƒå¼äº‹åŠ¡ã€EDASç­‰åˆ†å¸ƒå¼åŸºç¡€æœåŠ¡ï¼ŒåŠ é€Ÿä¼ä¸šä¸Šäº‘çš„è¿›ç¨‹å’Œåˆ›æ–°é€Ÿåº¦ã€‚åŒæ—¶ï¼Œäº‘åŸç”Ÿä¸­é—´ä»¶å›¢é˜Ÿä¹ŸæœåŠ¡ç€é˜¿é‡Œé›†å›¢ä¼—å¤šæ ¸å¿ƒä¸šåŠ¡å’Œåœºæ™¯ï¼Œæ˜¯æ”¯æ’‘åŒåä¸€ç‹‚æ¬¢èŠ‚çš„æ ¸å¿ƒå›¢é˜Ÿä¹‹ä¸€ã€‚</p><p>åœ¨è¿™é‡Œï¼Œæœ‰éå¸¸ä¼˜ç§€çš„ä¸­é—´ä»¶äº§å“å’Œåœºæ™¯ä»¥åŠä¼ä¸šäº’è”ç½‘æ¶æ„å¹³å°ï¼ŒæœåŠ¡ä¸Šä¸‡å®¶é˜¿é‡Œäº‘çš„ä¼ä¸šï¼Œæ”¯æŒå¤§è§„æ¨¡ç”µå•†äº¤æ˜“ä¸šåŠ¡åœºæ™¯ã€‚</p><p>åœ¨è¿™é‡Œï¼Œä½ ä¼šå‚ä¸åˆ°å…¨çƒä¼˜ç§€å¼€æºé¡¹ç›®ï¼ˆå¦‚ Apache Dubboã€RocketMQã€Nacosã€Sentinelã€Seataã€Arthasã€Tengineã€Istioã€Envoyã€OpenSergoã€Higressï¼‰å’Œé˜¿é‡Œäº‘æ ¸å¿ƒå•†ä¸šåŒ–äº§å“ï¼ˆå¾®æœåŠ¡å¼•æ“ MSEã€ä¼ä¸šçº§åˆ†å¸ƒå¼åº”ç”¨æœåŠ¡ EDASã€åº”ç”¨å®æ—¶ç›‘æ§æœåŠ¡ARMSï¼‰ç ”å‘å·¥ä½œä¸­ï¼Œä¸€åŒæ‹“å±•æŠ€æœ¯çš„è¾¹ç•Œï¼Œæ—¢èµ‹èƒ½é˜¿é‡Œå·´å·´é›†å›¢ï¼Œæ›´æœåŠ¡å¹¿æ³›çš„å¼€å‘è€…ç”¨æˆ·ã€‚</p><p>åœ¨è¿™é‡Œï¼Œä½ ä¼šå‚ä¸åˆ°ä¸­é—´ä»¶ã€å¾®æœåŠ¡ã€Serverless ç­‰å‰æ²¿çš„æŠ€æœ¯ç ”å‘ä¸æ¢ç´¢ä¸­æ¥ï¼›ä½ ä¹Ÿä¼šä¸å…¨çƒä¼˜ç§€å¼€æºäº§å“åˆ›å§‹äººç­‰ç»„æˆçš„æ˜æ˜Ÿå›¢é˜Ÿä¸€èµ·å·¥ä½œã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="è´Ÿè´£å·¥ä½œ">è´Ÿè´£å·¥ä½œ<a href="#è´Ÿè´£å·¥ä½œ" class="hash-link" aria-label="è´Ÿè´£å·¥ä½œçš„ç›´æ¥é“¾æ¥" title="è´Ÿè´£å·¥ä½œçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ol><li>å‚ä¸é˜¿é‡Œäº‘å•†ä¸šç‰ˆHigressï¼ˆMSEäº‘åŸç”Ÿç½‘å…³ï¼‰çš„äº§å“ç ”å‘</li><li>å‚ä¸Higresså¼€æºçš„äº§å“ç ”å‘å’Œç¤¾ç¾¤è¿è¥</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="èŒä½è¦æ±‚">èŒä½è¦æ±‚<a href="#èŒä½è¦æ±‚" class="hash-link" aria-label="èŒä½è¦æ±‚çš„ç›´æ¥é“¾æ¥" title="èŒä½è¦æ±‚çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ol><li>3å¹´ä»¥ä¸Šäº§å“ç ”å‘å·¥ä½œç»éªŒï¼Œç†Ÿç»ƒä½¿ç”¨Goæˆ–C++ï¼Œæœ‰äº‘åŸç”Ÿç›¸å…³äº§å“ç ”å‘ç»éªŒè€…ä¼˜å…ˆã€‚</li><li>æœ‰Higress/Envoy/Istio/Nginxå¼€æºè´¡çŒ®å’Œå¼€å‘ç»éªŒè€…ä¼˜å…ˆã€‚</li><li>å…·å¤‡å‡ºè‰²çš„é¡¹ç›®ç®¡ç†åè°ƒå’Œä¸šåŠ¡è§„åˆ’èƒ½åŠ›ï¼Œæœ‰å›¢é˜Ÿåˆä½œç²¾ç¥ï¼Œå¹¶èƒ½å€ŸåŠ©å„æ–¹åŠ›é‡æ¨åŠ¨è§„åˆ™ã€åˆ¶åº¦ç­‰è½åœ°ã€‚</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="åŠ å…¥higressçš„å¼€æºteam">åŠ å…¥Higressçš„å¼€æºTeam<a href="#åŠ å…¥higressçš„å¼€æºteam" class="hash-link" aria-label="åŠ å…¥Higressçš„å¼€æºTeamçš„ç›´æ¥é“¾æ¥" title="åŠ å…¥Higressçš„å¼€æºTeamçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>Higressä¸ºå‚ä¸è´¡çŒ®çš„åŒå­¦è®¾è®¡äº†å‡ ä¸ªå¯è®¤é¢†çš„å¤´è¡”ï¼Œè¾¾åˆ°ä¸€å®šè´¡çŒ®è¦æ±‚ï¼Œå³å¯åœ¨Higresså®˜ç½‘æ<a href="https://github.com/higress-group/higress-group.github.io/blob/main/i18n/zh-cn/docusaurus-plugin-content-docs/current/developers/developers_dev.md" target="_blank" rel="noopener noreferrer">PR</a>çš„æ–¹å¼è®¤é¢†ã€‚</p><p><strong>å¤´è¡”æœ¬èº«æ˜¯ä¸€ç§è£èª‰è±¡å¾ï¼Œæ¯ä¸€ä½å‚ä¸Higressçš„è´¡çŒ®è€…åœ¨å¼€æºç¤¾åŒºçš„åœ°ä½éƒ½æ˜¯å¹³ç­‰çš„</strong></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="member-å¤´è¡”">Member å¤´è¡”<a href="#member-å¤´è¡”" class="hash-link" aria-label="Member å¤´è¡”çš„ç›´æ¥é“¾æ¥" title="Member å¤´è¡”çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><strong>æ¡ä»¶ï¼š</strong></p><ul><li>è·å¾— 8 ä¸ªå®Œæˆ issue çš„ç§¯åˆ†ï¼ˆeasy +1ï¼Œnormal +2ï¼Œchallenge +4ï¼‰</li></ul><blockquote><p>Higresså¼€æºç¤¾åŒºä¸ºæ¯ä¸ªå¯è®¤é¢†ï¼ˆhelp wantedæ ‡ç­¾ï¼‰çš„issueéƒ½æ ‡è®°äº†éš¾åº¦æ ‡ç­¾ï¼šç®€å•(level/easy)ï¼Œæ™®é€š(level/normal)ï¼Œæœ‰æŒ‘æˆ˜(level/challenge)ï¼Œå®Œæˆissueåå¯ä»¥è·å¾—å¯¹åº”ç§¯åˆ†</p></blockquote><ul><li>è´¡çŒ®ä»£ç ï¼ˆåŒ…å«æ–‡æ¡£ï¼‰DIFF è¡Œæ•°ï¼ˆåŒ…å«å¢åˆ ï¼‰è¾¾åˆ° 500+</li></ul><blockquote><p>ä¸ä»…åªæœ‰è´¡çŒ®ä»£ç ï¼Œåœ¨Higress<a href="https://github.com/higress-group/higress-group.github.io" target="_blank" rel="noopener noreferrer">å®˜ç½‘ä»“åº“</a>è´¡çŒ®æ–‡æ¡£ï¼Œä¹Ÿå¯ä»¥æ»¡è¶³æ­¤è¦æ±‚</p></blockquote><ul><li>åœ¨ç¤¾åŒºå‘¨ä¼šè¿›è¡Œ 1 æ¬¡ä¸»é¢˜åˆ†äº«</li></ul><blockquote><p>é‡ç‚¹ä¸æ˜¯åˆ†äº«çš„å†…å®¹ï¼Œæ˜¯é€šè¿‡åˆ†äº«è®©å¤§å®¶è®¤è¯†ä½ </p></blockquote><p><strong>ç”³è¯·æ–¹å¼ï¼š</strong></p><p>ç›´æ¥æPRç”³è¯·</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reviewer-å¤´è¡”">Reviewer å¤´è¡”<a href="#reviewer-å¤´è¡”" class="hash-link" aria-label="Reviewer å¤´è¡”çš„ç›´æ¥é“¾æ¥" title="Reviewer å¤´è¡”çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><strong>æ¡ä»¶ï¼š</strong></p><ul><li>æ»¡è¶³Memberæ¡ä»¶</li><li>åœ¨SIGçš„æ ¸å¿ƒ <a href="https://github.com/alibaba/higress/issues/547" target="_blank" rel="noopener noreferrer">issue</a> ä¸­åšå‡ºè´¡çŒ®</li></ul><p><strong>ç”³è¯·æ–¹å¼ï¼š</strong></p><p>ç”±Approvers/Maintaineræååï¼ŒæPRç”³è¯·</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="approver-å¤´è¡”">Approver å¤´è¡”<a href="#approver-å¤´è¡”" class="hash-link" aria-label="Approver å¤´è¡”çš„ç›´æ¥é“¾æ¥" title="Approver å¤´è¡”çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><strong>æ¡ä»¶ï¼š</strong></p><ul><li>æ»¡è¶³Revieweræ¡ä»¶</li><li>ä¸»å¯¼ä¸€ä¸ªSIGï¼Œç»„ç»‡å¹¶æ¨è¿›æ ¸å¿ƒissueçš„tasklistå®Œæˆ</li></ul><p><strong>ç”³è¯·æ–¹å¼ï¼š</strong></p><p>ç”±Maintaineræååï¼ŒæPRç”³è¯·</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="maintainer-å¤´è¡”">Maintainer å¤´è¡”<a href="#maintainer-å¤´è¡”" class="hash-link" aria-label="Maintainer å¤´è¡”çš„ç›´æ¥é“¾æ¥" title="Maintainer å¤´è¡”çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>Maintaineræ˜¯å¯¹Higressé¡¹ç›®ï¼ˆåŒ…æ‹¬Higressä¸‹çš„é¡¹ç›®ï¼‰çš„æ¼”è¿›å’Œå‘å±•åšå‡ºæ˜¾è‘—è´¡çŒ®çš„ä¸ªäººã€‚åœ¨ç¤¾åŒºä¸­å…·æœ‰æœ‰ç›®å…±ç¹çš„å½±å“åŠ›ï¼Œèƒ½å¤Ÿä»£è¡¨Higresså‚åŠ é‡è¦çš„ç¤¾åŒºä¼šè®®å’Œæ´»åŠ¨ã€‚</p><p><strong>æ¡ä»¶ï¼š</strong></p><ul><li>æ»¡è¶³Approveræ¡ä»¶</li><li>ä¸»å¯¼å¤šä¸ªSIGï¼Œç»„ç»‡å¹¶æ¨è¿›æ ¸å¿ƒissueçš„tasklistå®Œæˆ</li><li>ç§¯æå‚ä¸å¼€æºç¤¾åŒºçš„æ—¥å¸¸å·¥ä½œï¼šå¼•å¯¼æ–°äººå¼€å‘ï¼Œç”¨æˆ·é—®é¢˜è§£ç­”ç­‰</li></ul><p><strong>ç”³è¯·æ–¹å¼ï¼š</strong></p><p>ç”±2åMaintaineræååï¼ŒæPRç”³è¯·</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å·²è·å¾—å¤´è¡”åå•">å·²è·å¾—å¤´è¡”åå•<a href="#å·²è·å¾—å¤´è¡”åå•" class="hash-link" aria-label="å·²è·å¾—å¤´è¡”åå•çš„ç›´æ¥é“¾æ¥" title="å·²è·å¾—å¤´è¡”åå•çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><strong>æ³¨ï¼šæ’åæŒ‰ github id é¦–å­—æ¯</strong></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="higress-maintainers">Higress Maintainers<a href="#higress-maintainers" class="hash-link" aria-label="Higress Maintainersçš„ç›´æ¥é“¾æ¥" title="Higress Maintainersçš„ç›´æ¥é“¾æ¥">â€‹</a></h4><table><thead><tr><th>å§“å</th><th>github</th><th>ç»„ç»‡</th></tr></thead><tbody><tr><td>è‘£è‰ºèƒ</td><td><a href="https://github.com/CH3CHO" target="_blank" rel="noopener noreferrer">CH3CHO</a></td><td>Trip.com</td></tr><tr><td>è€¿è•¾è•¾</td><td><a href="https://github.com/gengleilei" target="_blank" rel="noopener noreferrer">gengleilei</a></td><td>Alibaba</td></tr><tr><td>å¼ æ·»ç¿¼</td><td><a href="https://github.com/johnlanni" target="_blank" rel="noopener noreferrer">johnlanni</a></td><td>Alibaba</td></tr><tr><td>èŒƒæ‰¬</td><td><a href="https://github.com/SpecialYang" target="_blank" rel="noopener noreferrer">SpecialYang</a></td><td>Alibaba</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="higress-approvers">Higress Approvers<a href="#higress-approvers" class="hash-link" aria-label="Higress Approversçš„ç›´æ¥é“¾æ¥" title="Higress Approversçš„ç›´æ¥é“¾æ¥">â€‹</a></h4><table><thead><tr><th>å§“å</th><th>github</th><th>ç»„ç»‡</th></tr></thead><tbody><tr><td>å´æ–°å†›</td><td><a href="https://github.com/2456868764" target="_blank" rel="noopener noreferrer">2456868764</a></td><td>-</td></tr><tr><td>åˆ˜è®­ç¼</td><td><a href="https://github.com/Xunzhuo" target="_blank" rel="noopener noreferrer">Xunzhuo</a></td><td>Tencent</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="higress-reviewers">Higress Reviewers<a href="#higress-reviewers" class="hash-link" aria-label="Higress Reviewersçš„ç›´æ¥é“¾æ¥" title="Higress Reviewersçš„ç›´æ¥é“¾æ¥">â€‹</a></h4><table><thead><tr><th>å§“å</th><th>github</th><th>ç»„ç»‡</th></tr></thead><tbody><tr><td>å‡Œè½¶ç¾¤</td><td><a href="https://github.com/Lynskylate" target="_blank" rel="noopener noreferrer">Lynskylate</a></td><td>Pdd Holdings Inc</td></tr><tr><td>åˆ˜æ™“ç‘</td><td><a href="https://github.com/rinfx" target="_blank" rel="noopener noreferrer">rinfx</a></td><td>Alibaba</td></tr><tr><td>èµµç‚³å ƒ</td><td><a href="https://github.com/sjtuzbk" target="_blank" rel="noopener noreferrer">sjtuzbk</a></td><td>Alibaba</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="higress-members">Higress Members<a href="#higress-members" class="hash-link" aria-label="Higress Membersçš„ç›´æ¥é“¾æ¥" title="Higress Membersçš„ç›´æ¥é“¾æ¥">â€‹</a></h4><table><thead><tr><th>å§“å</th><th>github</th><th>ç»„ç»‡</th></tr></thead><tbody><tr><td>æå¼ºæ—</td><td><a href="https://github.com/Charlie17Li" target="_blank" rel="noopener noreferrer">Charlie17Li</a></td><td>ZJU-SEL</td></tr><tr><td>å°å®‡è…¾</td><td><a href="https://github.com/Fkbqf" target="_blank" rel="noopener noreferrer">Ffyyt</a></td><td>XUPT</td></tr><tr><td>ç”°äºšæ¶›</td><td><a href="https://github.com/Hinsteny" target="_blank" rel="noopener noreferrer">Hinsteny</a></td><td>Ant</td></tr><tr><td>å®‹é¹è¿œ</td><td><a href="https://github.com/songpengyuan" target="_blank" rel="noopener noreferrer">songpengyuan</a></td><td>Okki.com</td></tr><tr><td>èµµä¼ŸåŸº</td><td><a href="https://github.com/vikizhao156" target="_blank" rel="noopener noreferrer">vikizhao156</a></td><td>SJTU</td></tr><tr><td>éŸ¦é‘«</td><td><a href="https://github.com/weixinx" target="_blank" rel="noopener noreferrer">WeixinX</a></td><td>NUAA</td></tr></tbody></table></div><footer class="row docusaurus-mt-lg"></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="description" content="æ”¯æŒäº† Gateway API æ ‡å‡†ï¼Œè¿˜æœ‰å…¨æ–°çš„è¿ç»´/å¼€å‘å·¥å…·ï¼Œä»¥åŠæˆ‘ä»¬æ–°çš„å¼€æºå¾ç¨‹"><meta itemprop="keywords" content="higress,ingress,Gateway API"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/zh-cn/blog/release-1.3">Higress å¼€æºä¸€å‘¨å¹´ï¼šæ–°ç‰ˆæœ¬ï¼Œæ–°æ ‡å‡†ï¼Œæ–°å·¥å…·ï¼Œæ–°å¾ç¨‹</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-11-04T00:00:00.000Z" itemprop="datePublished">2023å¹´11æœˆ4æ—¥</time> Â· <!-- -->é˜…è¯»éœ€ 19 åˆ†é’Ÿ</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><span itemprop="name">æ¾„æ½­</span></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å†ç¨‹å›é¡¾">å†ç¨‹å›é¡¾<a href="#å†ç¨‹å›é¡¾" class="hash-link" aria-label="å†ç¨‹å›é¡¾çš„ç›´æ¥é“¾æ¥" title="å†ç¨‹å›é¡¾çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><img loading="lazy" src="https://github.com/johnlanni/higress-group.github.io/assets/6763318/b5f3ee1b-d53a-4fbb-8d4a-82427ebdfe40" alt="image" class="img_ev3q"></p><p>Higress å¼€æºä¸€å¹´æ—¶é—´ï¼Œä¸€å…±å‘å¸ƒäº† 18 ä¸ª release ç‰ˆæœ¬ï¼Œæ”¶è·äº† 40 å¤šä½ç¤¾åŒºè´¡çŒ®è€…å’Œ 1800+ starï¼Œä¸Šå›¾æ˜¯è¿™ä¸€å¹´è¿‡æ¥è¾¾æˆçš„ä¸€äº›å…³é”®çš„é‡Œç¨‹ç¢‘ã€‚</p><p>å‰é¢åŠå¹´é€šè¿‡é›†æˆå¼€æºç”Ÿæ€ï¼Œæ‰“ç£¨å¼€æºç‰ˆæœ¬ç¨³å®šæ€§ï¼Œå¹¶åœ¨å‘å¸ƒ 1.0 GA ç‰ˆæœ¬åï¼Œç¤¾åŒºåˆé©¬ä¸åœè¹„å‘å¸ƒäº† 1.1 å’Œ 1.2 ä¸¤ä¸ªé‡è¦ç‰ˆæœ¬ï¼Œå®ç°äº†é K8s éƒ¨ç½²ï¼ŒKnative é€‚é…ç­‰æ ¸å¿ƒèƒ½åŠ›ã€‚</p><p>Higress 1.3 ç‰ˆæœ¬å·²ç»æ­£å¼å‘å¸ƒï¼Œé™¤äº†å¢åŠ çš„æ–°åŠŸèƒ½ï¼Œå·²æœ‰èƒ½åŠ›ä¹Ÿåœ¨å¤§é‡ç¤¾åŒºç”¨æˆ·åé¦ˆçš„è¿‡ç¨‹ä¸­ä¸æ–­å®Œå–„æ”¹è¿›ï¼Œè¿™ä¸ªç‰ˆæœ¬åŒæ—¶æ ‡å¿—ç€ 1.x è¿›å…¥å¯ä»¥å¤§è§„æ¨¡ç”Ÿäº§ä½¿ç”¨çš„çŠ¶æ€ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ–°ç‰ˆæœ¬åŠŸèƒ½é€Ÿè§ˆ">æ–°ç‰ˆæœ¬ï¼šåŠŸèƒ½é€Ÿè§ˆ<a href="#æ–°ç‰ˆæœ¬åŠŸèƒ½é€Ÿè§ˆ" class="hash-link" aria-label="æ–°ç‰ˆæœ¬ï¼šåŠŸèƒ½é€Ÿè§ˆçš„ç›´æ¥é“¾æ¥" title="æ–°ç‰ˆæœ¬ï¼šåŠŸèƒ½é€Ÿè§ˆçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>è‡ªå‘å¸ƒ 1.2 ç‰ˆæœ¬è¿‡å»äº†ä¸€ä¸ªå¤šæœˆæ—¶é—´ï¼Œ1.3 ç‰ˆæœ¬æ­£å¼å‘å¸ƒï¼Œå¸¦æ¥ä¸¤ä¸ªå…¨æ–°èƒ½åŠ›ï¼š</p><ul><li>æ–°æ ‡å‡†ï¼šæ”¯æŒæœ€æ–°ç‰ˆæœ¬ Gateway API æ ‡å‡†ï¼Œå¹¶ä¸”å…·å¤‡ä» Ingress å¹³æ»‘æ¸è¿›æ¼”è¿›ï¼Œä»¥åŠå¯¹æ¥å¤šç§æœåŠ¡å‘ç°æœºåˆ¶çš„èƒ½åŠ›</li><li>æ–°å·¥å…·ï¼šæ­£å¼ release äº† hgctl (Higress Crontroller) è¿™ä¸ª &quot;All in one&quot; çš„æ–°å·¥å…·ï¼Œä¸ä»…å¯ä»¥æ›¿ä»£ Helm å®ç°æ›´ç®€æ˜“çš„å®‰è£…ï¼Œè¿˜æä¾›äº† WASM æ’ä»¶å¼€å‘å·¥å…·åŒ…ï¼Œä»¥åŠç½‘å…³é…ç½®æ£€æŸ¥ç­‰ä¸°å¯ŒåŠŸèƒ½</li></ul><p>é™¤äº†è¿™ä¸¤ä¸ªæ ¸å¿ƒåŠŸèƒ½å¤–ï¼Œè¿˜æœ‰ä¸€äº›å®ç”¨åŠŸèƒ½ï¼š</p><ol><li>æä¾›äº† Higress Admin Java SDKï¼Œå¯ä»¥ç»Ÿä¸€å¯¹æ¥ K8s å’Œé K8s ç¯å¢ƒï¼Œç®¡ç†åŸŸå/è·¯ç”±ç­‰é…ç½®</li><li>æä¾›äº† OIDC æ’ä»¶ï¼Œæ”¯æŒå¯¹æ¥ Keycloak/Okta ç­‰ç¬¬ä¸‰æ–¹èº«ä»½è®¤è¯ç³»ç»Ÿ</li><li>Higress Console çš„æ˜“ç”¨æ€§å’Œå®‰å…¨æ€§æå‡ï¼Œä¸å†é€šè¿‡è·¯ç”±æš´éœ²ï¼Œæ”¯æŒç•Œé¢åˆå§‹åŒ–/ä¿®æ”¹å¯†ç </li></ol><p>ä¸æ­¤åŒæ—¶ï¼ŒHigress å¼€æºç¤¾åŒºå·²ç»å¼€å§‹å‡†å¤‡è¸ä¸Šä¸€æ®µå…¨æ–°çš„å¼€æºå¾ç¨‹...</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ–°æ ‡å‡†æ”¯æŒæœ€æ–°ç‰ˆ-gateway-api">æ–°æ ‡å‡†ï¼šæ”¯æŒæœ€æ–°ç‰ˆ Gateway API<a href="#æ–°æ ‡å‡†æ”¯æŒæœ€æ–°ç‰ˆ-gateway-api" class="hash-link" aria-label="æ–°æ ‡å‡†ï¼šæ”¯æŒæœ€æ–°ç‰ˆ Gateway APIçš„ç›´æ¥é“¾æ¥" title="æ–°æ ‡å‡†ï¼šæ”¯æŒæœ€æ–°ç‰ˆ Gateway APIçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>Gateway API åœ¨ 11 æœˆ 1 æ—¥æ­£å¼å‘å¸ƒäº† 1.0.0 ç‰ˆæœ¬ï¼Œå…¶ä¸­ GatewayClass, Gateway, HTTPRoute è¿™ä¸‰ä¸ª APIæ­£å¼å®£å¸ƒ GAï¼Œå‘å¸ƒäº† v1 ç‰ˆæœ¬ï¼šgateway.networking.k8s.io/v1ã€‚</p><p>ç›®å‰ Higress å·²ç»å¯ä»¥æ”¯æŒè¿™äº›æœ€æ–°ç‰ˆæœ¬çš„ API é…ç½®ï¼Œåªéœ€åœ¨å®‰è£…/å‡çº§ Higress æ—¶é…ç½®å¼€å¯ Gateway APIï¼š</p><ul><li>ä½¿ç”¨ Helm ï¼šé€šè¿‡å‚æ•° <code>--set global.enableGatewayAPI=true</code></li><li>ä½¿ç”¨ Hgctl ï¼šé€šè¿‡å‘½ä»¤è¡Œå‚æ•°æˆ–è€… install.yaml ä¸­é…ç½® <code>global.enableGatewayAPI=true</code></li></ul><p>é¦–å…ˆåˆ›å»º GatewayClass èµ„æºï¼š</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> gateway.networking.k8s.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> GatewayClass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">gateway</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">controllerName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;higress.io/gateway-controller&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ¥ç€åœ¨å®‰è£… Higress çš„å‘½åç©ºé—´ä¸‹ï¼Œåˆ›å»º Gateway èµ„æºï¼Œé€šè¿‡ gatewayClassName å…³è”ä¸Šé¢åˆ›å»ºçš„ GatewayClass èµ„æºï¼ŒæŒ‡å®šç”± Higress æ¥ç®¡ç†æ­¤ Gateway é…ç½®ï¼Œä¸‹é¢ä¸ºåŸŸååŒæ—¶é…ç½®äº† HTTP å’Œ HTTPS å…¥å£ï¼Œå¹¶ä¸º HTTPS å…¥å£é…ç½®äº†è¯ä¹¦ï¼š</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> gateway.networking.k8s.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Gateway</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">gateway</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">gatewayClassName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">gateway</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">listeners</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> foobar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">hostname</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;*.foobar.com&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> HTTP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">allowedRoutes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">namespaces</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">from</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> All</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> foobar</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">https</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">hostname</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;*.foobar.com&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">443</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> HTTPS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">allowedRoutes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">namespaces</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">from</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> All</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">tls</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">certificateRefs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Secret</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> wildcard</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">foobar</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">mode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Terminate        </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å› ä¸ºä¸Šé¢ Gateway é€šè¿‡ allowedRoutes é…ç½®äº†å…è®¸æ‰€æœ‰å‘½åç©ºé—´çš„è·¯ç”±æ¥å…³è”ï¼Œæ‰€ä»¥è¿™é‡Œåœ¨ default å‘½åç©ºé—´ä¸‹åˆ›å»º HTTPRouteï¼Œå…³è”ä¸Šé¢åˆ›å»ºçš„ Gatewayï¼Œå³å¯å®šä¹‰åŸŸåä¸‹çš„å…·ä½“è·¯ç”±ï¼š</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> gateway.networking.k8s.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> HTTPRoute</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> foobar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">parentRefs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">gateway</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">hostnames</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;www.foobar.com&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">rules</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">matches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PathPrefix</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /foo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">backendRefs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> foo</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5678</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä»¥ä¸Šå°±æ˜¯ Gateway API çš„ä¸€ä¸ªç®€å•ç”¨æ³•ç¤ºä¾‹ï¼ŒGateway API è¿˜æœ‰å¾ˆå¤šåŠŸèƒ½å’Œç©æ³•ï¼Œåé¢ Higress å…¬ä¼—å·/åšå®¢ä¼šå‡ºä¸€ä¸ªç³»åˆ—è¿›è¡Œç³»ç»Ÿåˆ†äº«å’Œä»‹ç»ã€‚</p><p>æ¬¢è¿ç»“åˆ<a href="https://gateway-api.sigs.k8s.io/reference/spec/" target="_blank" rel="noopener noreferrer">å®˜æ–¹ API æ–‡æ¡£</a>ï¼Œå¹¶ä½¿ç”¨ hgctl ï¼ˆè·å–æ–¹å¼è§ä¸‹æ–‡ï¼‰åœ¨è‡ªå·±ç”µè„‘ä¸Šå®‰è£…ä¸€ä¸ª local-k8s æ¨¡å¼çš„ Higressï¼Œæ¥å¼€å¯å¯¹è¿™ä¸€æ–°æ ‡å‡†çš„æ¢ç´¢ï¼š</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ä¸€é”®å®‰è£…, äº¤äº’å¼å‘½ä»¤é€‰æ‹©ç¬¬ä¸€ç§å®‰è£…æ¨¡å¼ local-k8sï¼Œå°†é»˜è®¤å®‰è£… Gateway API CRD</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  hgctl </span><span class="token function" style="color:#d73a49">install</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å¤šç§æœåŠ¡å‘ç°èƒ½åŠ›">å¤šç§æœåŠ¡å‘ç°èƒ½åŠ›<a href="#å¤šç§æœåŠ¡å‘ç°èƒ½åŠ›" class="hash-link" aria-label="å¤šç§æœåŠ¡å‘ç°èƒ½åŠ›çš„ç›´æ¥é“¾æ¥" title="å¤šç§æœåŠ¡å‘ç°èƒ½åŠ›çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åœ¨ Ingress API æ ‡å‡†ä¸‹ï¼ŒHigress å¯¹æ¥å¤šç§æœåŠ¡å‘ç°èƒ½åŠ›æ˜¯ç‹¬æ ‘ä¸€å¸œçš„ï¼Œåœ¨ Gateway API æ ‡å‡†ä¸‹ï¼Œ Higress ä»å°±ä¿æŒäº†è¿™ä¸€èƒ½åŠ›ä¼˜åŠ¿ï¼š</p><p>é¦–å…ˆé€šè¿‡ McpBridge èµ„æºï¼Œå¯ä»¥å®šä¹‰å¤šç§æœåŠ¡å‘ç°æœºåˆ¶ï¼š</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> networking.higress.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> McpBridge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">registries</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">domain</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 127.0.0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">nacosGroups</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> DEFAULT_GROUP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">local</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">nacos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8848</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nacos2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">domain</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 127.0.0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">local</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">zk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2181</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> zookeeper      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">domain</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 127.0.0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">local</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">eureka</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8761</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> eureka</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">domain</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 127.0.0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">consulDatacenter</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> dc1      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">local</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">consul</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8500</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> consul</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åˆ›å»ºä¸€ä¸ª HTTPRoute èµ„æºï¼Œå¯ä»¥åŒæ—¶å¯¹æ¥ K8s æœåŠ¡ï¼Œå’Œæ³¨å†Œä¸­å¿ƒçš„æœåŠ¡ï¼Œå¹¶å®ç°ç°åº¦è·¯ç”±èƒ½åŠ›ï¼š</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> gateway.networking.k8s.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> HTTPRoute</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> http</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">parentRefs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">gateway</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">rules</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">matches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PathPrefix</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">backendRefs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> service</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">provider.DEFAULT</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">GROUP.public.nacos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">group</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> networking.higress.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8080</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">weight</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">90</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> foo</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5678</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">weight</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å’Œ K8s æœåŠ¡ä¸åŒçš„æ˜¯ï¼Œè¿™é‡Œ group ä¸º <code>networking.higress.io</code> çš„æœåŠ¡å¹¶ä¸éœ€è¦æå‰åˆ›å»º CRD èµ„æºï¼Œè¿™æ›´ç¬¦åˆä¼ ç»Ÿå¾®æœåŠ¡ç”¨æˆ·çš„ä¹ æƒ¯ï¼Œå³æœåŠ¡æ¨¡å‹ä¸éœ€è¦æå‰åˆ›å»ºï¼Œæ˜¯é€šè¿‡æœåŠ¡èŠ‚ç‚¹æ³¨å†Œè‡ªåŠ¨ç”Ÿæˆã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ingress-api-å’Œ-gateway-api-ä¹‹é—´å¦‚ä½•é€‰æ‹©">Ingress API å’Œ Gateway API ä¹‹é—´å¦‚ä½•é€‰æ‹©<a href="#ingress-api-å’Œ-gateway-api-ä¹‹é—´å¦‚ä½•é€‰æ‹©" class="hash-link" aria-label="Ingress API å’Œ Gateway API ä¹‹é—´å¦‚ä½•é€‰æ‹©çš„ç›´æ¥é“¾æ¥" title="Ingress API å’Œ Gateway API ä¹‹é—´å¦‚ä½•é€‰æ‹©çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>æœ‰äº† Gateway APIï¼Œæ˜¯å¦åº”è¯¥ç«‹å³æŠ›å¼ƒ Ingress APIï¼Ÿ</p><p>åªæœ‰æœ€åˆé€‚çš„ï¼Œæ²¡æœ‰æœ€å¥½çš„ã€‚Gateway API è™½ç„¶ä¸ºæ›´å¤šç½‘å…³èƒ½åŠ›åšäº†æ ‡å‡†åŒ–ï¼Œä½† CRD çš„ç§ç±»å’Œå¤æ‚åº¦ä¹Ÿå¢åŠ äº†ï¼Œç›¸æ¯”ä¹‹ä¸‹å¯¹äºå¤§éƒ¨åˆ†ç®€å•ç”¨ä¾‹åœºæ™¯ï¼ŒIngress API æ›´åŠ ç®€å•æ˜“ç”¨ã€‚</p><p>å¯¹äºä»¥ä¸‹åœºæ™¯ï¼Œé‡‡ç”¨ Gateway API æ›¿ä»£ Ingress API ä¼šå¸¦æ¥å¾ˆå¤§å¸®åŠ©ï¼š</p><ul><li>å¤§å‹å›¢é˜Ÿåˆ’åˆ†äº† SRE è§’è‰²å’Œä¸šåŠ¡ç ”å‘è§’è‰²ï¼Œç”± SRE é€šè¿‡ Gateway èµ„æºç»Ÿä¸€ç®¡ç†ç«™ç‚¹åŸŸåå’Œè¯ä¹¦ï¼Œç”±ä¸šåŠ¡ç ”å‘é€šè¿‡ HTTPRoute èµ„æºç®¡ç†ä¸šåŠ¡è·¯ç”±ï¼Œå®ç°èŒè´£åˆ’åˆ†ï¼Œæƒé™æ”¶æ•›</li><li>åˆ›å»ºçš„è·¯ç”±å’Œ Service æœ‰ä¸åœ¨ä¸€ä¸ªå‘½åç©ºé—´çš„éœ€æ±‚ï¼Œå¯ä»¥å€ŸåŠ© ReferenceGrant èµ„æºå®ç°</li><li>æœ‰å¤§é‡è¯ä¹¦éœ€è¦é›†ä¸­å¼ç®¡ç†ï¼Œä¸å¸Œæœ›å°†è¯ä¹¦ Secret åŒæ­¥åˆ° Ingress æ‰€åœ¨å‘½åç©ºé—´ï¼Œå¸¦æ¥å®‰å…¨é£é™©</li></ul><p>Gateway API çš„å¦ä¸€ä¸ªå¥½å¤„æ˜¯å¯¹äºæ›´å¤šåŠŸèƒ½çš„æ ‡å‡†åŒ–å®šä¹‰ï¼Œæˆ‘ä»¬å»ºè®®é‡åˆ°å®é™…éœ€è¦å†è½¬æ¢åˆ°è¿™ä¸ªæ–°çš„æ ‡å‡†ï¼Œè€Œä¸å¿…ç›²ç›®è·Ÿéšã€‚</p><p>Higress æ”¯æŒ Gateway API å’Œ Ingress API æ··åˆä½¿ç”¨ï¼ŒGateway API ä¸‹çš„åŸŸåè·¯ç”±å°†æ¯” Ingress API ä¼˜å…ˆåŒ¹é…ï¼Œå’Œ Ingress ç›¸åŒèµ„æºåç§°çš„ HTTPRoute è¿˜ä¼šç»§æ‰¿ WASM æ’ä»¶é…ç½®ï¼Œè¿™æ ·ç”¨æˆ·å¯ä»¥æŒ‰éœ€é‡‡ç”¨ Gateway APIï¼Œå¹³æ»‘åœ°å®Œæˆä» Ingress API å‘ Gateway API çš„æ¼”è¿›ï¼Œæ— éœ€ç„¦è™‘ API æ ‡å‡†å‡çº§è¿‡ç¨‹ä¸­äº§ç”Ÿä¸šåŠ¡æŸå¤±ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ–°å·¥å…·all-in-one-çš„-hgctl">æ–°å·¥å…·ï¼šAll in one çš„ hgctl<a href="#æ–°å·¥å…·all-in-one-çš„-hgctl" class="hash-link" aria-label="æ–°å·¥å…·ï¼šAll in one çš„ hgctlçš„ç›´æ¥é“¾æ¥" title="æ–°å·¥å…·ï¼šAll in one çš„ hgctlçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ›¿ä»£-helm-ç”¨äºå®‰è£…å‡çº§">æ›¿ä»£ Helm ç”¨äºå®‰è£…/å‡çº§<a href="#æ›¿ä»£-helm-ç”¨äºå®‰è£…å‡çº§" class="hash-link" aria-label="æ›¿ä»£ Helm ç”¨äºå®‰è£…/å‡çº§çš„ç›´æ¥é“¾æ¥" title="æ›¿ä»£ Helm ç”¨äºå®‰è£…/å‡çº§çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åœ¨ K8s ä¸‹ç”¨ Helm å®‰è£…/å‡çº§ç»„ä»¶å¾ˆæ–¹ä¾¿ï¼Œä½†åœ¨ Higress çš„åœºæ™¯ä¸‹ä»ç„¶å­˜åœ¨ä¸€äº›é—®é¢˜ï¼š</p><ol><li>æ— æ³•æ”¯æŒé K8s åœºæ™¯ä¸‹çš„å®‰è£…/å‡çº§</li><li>Higress æœ‰å¾ˆå¤šå®‰è£…å‚æ•°ï¼Œè¿›è¡Œå‡çº§ç­‰æ“ä½œæ—¶ä¸å¥½ç»´æŠ¤ï¼Œä½¿ç”¨<code>reuse-values</code> æœ‰ä¸€äº›å‰¯ä½œç”¨ï¼Œä¸”å®¹æ˜“è¯¯æ“ä½œ</li><li>æ— æ³•ç®¡ç† CRD è·Ÿéšç‰ˆæœ¬æ›´æ–°ï¼Œéœ€è¦æ‰‹åŠ¨æ›´æ–°</li></ol><p>Higress å€Ÿé‰´äº† istio çš„ istioctlï¼Œæä¾›äº† hgctl è¿™ä¸ªå‘½ä»¤è¡Œå·¥å…·è§£å†³äº†ä¸Šè¿°é—®é¢˜ï¼Œé€šè¿‡ä»¥ä¸‹å‘½ä»¤å³å¯å®‰è£… hgctl</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ä¸‹è½½æœ€æ–°ç‰ˆ Hgctlï¼š</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -Ls https://raw.githubusercontent.com/alibaba/higress/main/tools/hack/get-hgctl.sh </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">VERSION</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">latest </span><span class="token function" style="color:#d73a49">bash</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>hgctl é›†æˆäº†ä¸‰ç§ Higress å®‰è£…æ¨¡å¼ï¼Œå¹¶ç»Ÿä¸€äº†å‡çº§/è¿ç»´æ“ä½œï¼š</p><ol><li>æœ¬åœ° K8s ç¯å¢ƒï¼ˆä¾‹å¦‚kind/k3sï¼‰æ¨¡å¼</li><li>æ­£å¼ K8s ç¯å¢ƒæ¨¡å¼</li><li>ä¸ä¾èµ– K8s çš„çº¯ Docker ç¯å¢ƒæ¨¡å¼</li></ol><p>ç›´æ¥æ‰§è¡Œ <code>hgctl install</code> å‘½ä»¤å³å¯é€‰æ‹©ä»»æ„æ¨¡å¼è¿›è¡Œå®‰è£…</p><p>å®‰è£…é…ç½®æ–‡ä»¶å°†å­˜è‡³ <code>~/.hgctl/profiles/install.yaml</code> ç›®å½•ä¸‹ï¼ŒæŸ¥çœ‹è¯¥æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">charts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">higress</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># å®‰è£…æ–‡ä»¶çš„ helm repo åœ°å€</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//higress.io/helm</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">charts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># æ‰§è¡Œ hgctl upgrade æ—¶å°†è‡ªåŠ¨æ›´æ–°è‡³æœ€æ–°ç‰ˆæœ¬</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">console</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># å¼€å¯å¯è§‚æµ‹ç»„ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">o11YEnabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># æ§åˆ¶å°å®ä¾‹æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">controller</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># æ§åˆ¶é¢ç»„ä»¶å®ä¾‹æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">gateway</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># æ•°æ®é¢ç»„ä»¶å®ä¾‹æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">global</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># å¼€å¯ Gateway API</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">enableGatewayAPI</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># å¼€å¯ Istio API</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">enableIstioAPI</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># è®¾ç½®ç›‘å¬çš„ ingress class</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ingressClass</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># å®‰è£…æ¨¡å¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">install</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> local</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">k8s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># å®‰è£…å‘½åç©ºé—´</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># é…ç½®ä¼ é€’ç»™ helm çš„ values å‚æ•° </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">values</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">profile</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> local</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">k8s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¿®æ”¹ä¸Šé¢æ–‡ä»¶çš„å†…å®¹åï¼Œæ‰§è¡Œ<code>hgctl upgarde</code>å³å¯å®ç°å‚æ•°å˜æ›´ç”Ÿæ•ˆï¼Œå¦‚æœåªæƒ³ä¿®æ”¹å‚æ•°ï¼Œä¸æƒ³è§¦å‘ç‰ˆæœ¬å‡çº§ï¼Œå¯ä»¥å°† version å‚æ•°å›ºå®šä¸ºå½“å‰ç‰ˆæœ¬ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="wasm-æ’ä»¶å¼€å‘å·¥å…·åŒ…">WASM æ’ä»¶å¼€å‘å·¥å…·åŒ…<a href="#wasm-æ’ä»¶å¼€å‘å·¥å…·åŒ…" class="hash-link" aria-label="WASM æ’ä»¶å¼€å‘å·¥å…·åŒ…çš„ç›´æ¥é“¾æ¥" title="WASM æ’ä»¶å¼€å‘å·¥å…·åŒ…çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ä¸ºäº†æ ‡å‡†åŒ–å¹¶ç®€åŒ– WASM æ’ä»¶çš„å¼€å‘/ç¼–è¯‘/æµ‹è¯•/å‘å¸ƒï¼ŒHigress æä¾›äº† <code>hgctl plugin</code> è¿™ä¸€å­å‘½ä»¤ï¼Œä½¿ç”¨æ–¹å¼ä¸ºï¼š</p><ol><li><code>hgctl plugin init</code>: åˆå§‹åŒ– Golang WASM æ’ä»¶é¡¹ç›®ï¼ŒåŒ…æ‹¬ä¸‰ä¸ªæ–‡ä»¶ï¼›</li><li>ç”¨æˆ·ç¼–å†™ WASM æ’ä»¶é€»è¾‘ï¼›</li><li><code>hgctl plugin build --output-type files</code>: æ„å»º WASM æ’ä»¶ï¼Œåœ¨æœ¬åœ°è¾“å‡ºæ„å»ºäº§ç‰©ï¼›</li><li><code>hgctl plugin test: ä½¿ç”¨ docker compose</code> åœ¨æœ¬åœ°æµ‹è¯• WASM æ’ä»¶ï¼Œå¦‚éœ€ä¿®æ”¹æ’ä»¶é€»è¾‘ï¼Œåˆ™è¿”å›ç¬¬ 2 æ­¥ï¼›</li><li><code>hgctl plugin build --output-type image</code>: æ„å»º WASM æ’ä»¶ä½œä¸º OCI é•œåƒä¸Šä¼ è‡³é•œåƒä»“åº“ï¼›</li><li><code>hgctl plugin install</code>: å®‰è£… WASM æ’ä»¶ï¼Œå¯ä»¥é€šè¿‡æœ¬åœ°çš„ yaml æ–‡ä»¶æˆ–æ’ä»¶é¡¹ç›®è¿›è¡Œå®‰è£…ã€‚</li></ol><p>å¦å¤–ï¼Œè‹¥éœ€è¦æŸ¥çœ‹å·²å®‰è£…çš„æ’ä»¶ï¼Œåˆ™ä½¿ç”¨ <code>hgctl plugin ls</code>ï¼›è‹¥éœ€è¦æ“ä½œæ’ä»¶é…ç½®ï¼Œåˆ™ä½¿ç”¨ <code>hgctl plugin config</code></p><p>é€šè¿‡è¿™ä¸ªå·¥å…·ï¼Œå¯ä»¥åœ¨æ„å»º WASM æ’ä»¶çš„åŒæ—¶ï¼Œæ ¹æ®é…ç½®ä»£ç è‡ªåŠ¨ç”Ÿæˆæ’ä»¶çš„é…ç½®è¯´æ˜æ–‡æ¡£ï¼Œä»¥åŠåŒ…å«æ’ä»¶é…ç½®çº¦æŸçš„å…ƒä¿¡æ¯æ–‡ä»¶ï¼Œè¿™äº›å†…å®¹éƒ½å°†å’Œ WASM æ–‡ä»¶ä¸€èµ·æ”¾å…¥ OCI é•œåƒåˆ¶å“ä¸­ï¼Œé€šè¿‡é•œåƒæ–¹å¼è¿›è¡Œç‰ˆæœ¬ç®¡ç†å’Œåˆ†å‘ã€‚è¿™ä¸€æœºåˆ¶æ˜¯åç»­ Higress å»ºè®¾ WASM æ’ä»¶å¸‚åœºçš„åŸºçŸ³ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å…¶ä»–åŠŸèƒ½">å…¶ä»–åŠŸèƒ½<a href="#å…¶ä»–åŠŸèƒ½" class="hash-link" aria-label="å…¶ä»–åŠŸèƒ½çš„ç›´æ¥é“¾æ¥" title="å…¶ä»–åŠŸèƒ½çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>å¦å¤–ä»‹ç»ä¸¤ä¸ªå®ç”¨çš„å­å‘½ä»¤ï¼š</p><ol><li><code>hgctl dashboard</code>: ç”¨äºå‘¼å‡º UI ç•Œé¢ï¼Œä¾‹å¦‚ Higress æ§åˆ¶å°ï¼Œç›´æ¥é€šè¿‡ <code>hgctl dashboard console</code> å³å¯æ‰“å¼€</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  $ hgctl dashboard</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Access to Higress web UIs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Usage:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    hgctl dashboard </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">flags</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    hgctl dashboard </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">command</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Aliases:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dashboard, dash, d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Available Commands:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    console     Open Console web UI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    controller  Open Controller debug web UI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    envoy       Open Envoy admin web UI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    grafana     Open Grafana web UI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    prometheus  Open Prometheus web UI</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li><code>hgctl gateway-config</code>: ç”¨äºæŸ¥çœ‹æ•°æ®é¢çš„ envoy é…ç½®ï¼Œå¯ä»¥å¿«é€ŸéªŒè¯é…ç½®æ˜¯å¦æ­£ç¡®ä¸‹å‘</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  $ hgctl gateway-config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Retrieve information about Higress Gateway Configuration.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Usage:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    hgctl gateway-config </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">command</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Aliases:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    gateway-config, gc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Available Commands:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    all         Retrieves all Envoy xDS resources from the specified Higress Gateway</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bootstrap   Retrieves bootstrap Envoy xDS resources from the specified Higress Gateway</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cluster     Retrieves cluster Envoy xDS resources from the specified Higress Gateway</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    endpoint    Retrieves endpoint Envoy xDS resources from the specified Higress Gateway</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    listener    Retrieves listener Envoy xDS resources from the specified Higress Gateway</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    route       Retrieves route Envoy xDS resources from the specified Higress Gateway</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ–°å¾ç¨‹api-gateway">æ–°å¾ç¨‹ï¼šAPI Gateway<a href="#æ–°å¾ç¨‹api-gateway" class="hash-link" aria-label="æ–°å¾ç¨‹ï¼šAPI Gatewayçš„ç›´æ¥é“¾æ¥" title="æ–°å¾ç¨‹ï¼šAPI Gatewayçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ä¸Šé¢è¯´äº† Gateway APIï¼Œæ¥ç€æˆ‘ä»¬èŠèŠ API Gateway ğŸ˜„ï¼ŒAPI Gateway æœ‰ä¸¤å±‚å®šä¹‰ï¼š</p><ol><li>ç‹­ä¹‰ä¸Šï¼šæ»¡è¶³ç»Ÿä¸€æ¥å…¥ï¼Œå°†è·¯ç”±è½¬å‘åˆ°ä¸åŒæœåŠ¡çš„è¿ç»´éœ€æ±‚ï¼Œå³å¯ç§°ä¸º API Gatewayï¼›è¿™é‡Œ API çš„å®šä¹‰æ˜¯æœåŠ¡çš„è·¯ç”±</li><li>å¹¿ä¹‰ä¸Šï¼šåœ¨å®ç°æœåŠ¡è½¬å‘çš„åŸºç¡€ä¸Šï¼Œéœ€è¦è¯†åˆ«å¸¦ä¸šåŠ¡è¯­ä¹‰çš„æ¥å£ï¼Œå°†ä¸šåŠ¡èƒ½åŠ› API åŒ–ç®¡ç†ï¼Œç»Ÿä¸€å¯¹å¤–æä¾›æœåŠ¡ï¼›è¿™é‡Œ API çš„å®šä¹‰æ˜¯ä¸šåŠ¡åŠŸèƒ½æ¥å£</li></ol><p>Higress å·²ç»å®ç°äº†ç‹­ä¹‰ä¸Šçš„ API Gateway èƒ½åŠ›ï¼Œå¹¶ä¸”æ˜¯åŸºäº Gateway/Ingress API è¿™äº›é€šç”¨è·¯ç”±æ ‡å‡†æ¥å®ç°çš„ã€‚è€Œä¸æœåŠ¡è·¯ç”±æ ‡å‡†ä¸åŒï¼Œä¸šåŠ¡åŠŸèƒ½æ¥å£çš„æ ‡å‡†æ˜¯ Swagger/OAS3/RPC IDL ç­‰ï¼Œåšä¸º API Gateway éœ€è¦æä¾›ä»¥ä¸‹å…³é”®èƒ½åŠ›ï¼š</p><ol><li>æ”¯æŒé€šè¿‡ä¸Šä¼  Swagger ç­‰æ¥å£å®šä¹‰æ–‡ä»¶çš„æ–¹å¼å¯¼å…¥ API</li><li>å¯¹ API å®ç°ç²¾ç»†åŒ–ç­–ç•¥ç®¡ç†ï¼Œä¾‹å¦‚æ ¹æ®å‡ºå…¥å‚å®šä¹‰å®ç°å‚æ•°æ˜ å°„/è½¬æ¢</li><li>å®ç°ä»¥ API æ–¹å¼å¼€æ”¾èƒ½åŠ›æ—¶çš„è®¤è¯/é‰´æƒï¼Œè°ƒç”¨é‡æ§åˆ¶/å®¡è®¡èƒ½åŠ›</li></ol><p>Higress æ–°çš„å¼€æºå¾ç¨‹å°†å‘å…·å¤‡ä¸šåŠ¡ API ç®¡ç†èƒ½åŠ›çš„ API Gateway å½¢æ€è¿›å‘ã€‚åœ¨å®ç°æ–¹å¼ä¸Šï¼Œæˆ‘ä»¬å°†åŸºäº WASM æ’ä»¶å»æ‰©å±•è¿™ä¸€éƒ¨åˆ†èƒ½åŠ›ï¼Œè¿™å¯ä»¥é™ä½æˆ‘ä»¬å¯¹ä¸Šæ¸¸ Envoy ç¤¾åŒºçš„ä¾µå…¥æ€§æ”¹é€ ï¼ŒåŒæ—¶è®©å¯¹ API çš„ç²¾ç»†åŒ–ç­–ç•¥ç®¡ç†å…·å¤‡è‡ªå®šä¹‰æ‰©å±•èƒ½åŠ›ã€‚
ç›®å‰ç¤¾åŒºå·²ç»æœ‰ä¸€äº› Proposal ï¼Œæ¬¢è¿äº†è§£ï¼š</p><p><a href="https://github.com/alibaba/higress/issues/535" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/higress/issues/535</a></p><p><a href="https://github.com/alibaba/higress/issues/601" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/higress/issues/601</a></p><p>æ¬¢è¿æœ‰æ›´å¤šå°ä¼™ä¼´åŠ å…¥ï¼Œå’Œæˆ‘ä»¬ä¸€èµ·è¸ä¸Šæ–°çš„å¾ç¨‹ï¼Œæœ‰å…´è¶£çš„å°ä¼™ä¼´å¯ä»¥è”ç³»æˆ‘(å¾®ä¿¡ï¼šnomadao)ï¼ŒåŠ å…¥ API Gateway çš„ SIGï¼ˆå…´è¶£å°ç»„ï¼‰ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç¤¾åŒºè‡´è°¢">ç¤¾åŒºè‡´è°¢<a href="#ç¤¾åŒºè‡´è°¢" class="hash-link" aria-label="ç¤¾åŒºè‡´è°¢çš„ç›´æ¥é“¾æ¥" title="ç¤¾åŒºè‡´è°¢çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>é¦–å…ˆè¦æ„Ÿè°¢ Envoy å’Œ Istio ç¤¾åŒºï¼ŒHigress ç«™åœ¨è¿™ä¸¤ä¸ªè½¯ä»¶çš„è‚©è†€ä¸Šæ¼”è¿›èƒ½åŠ›ï¼Œå¾—ä»¥ï¼š</p><ol><li>é€šè¿‡ WASM æœºåˆ¶æ‰©å±• Envoy æ•°æ®é¢èƒ½åŠ›ï¼ŒæŒç»­ä¸æ–­åœ°æ‰©å¤§ç½‘å…³æ’ä»¶ç”Ÿæ€</li><li>é€šè¿‡ä¸“æ³¨åœ¨ç½‘å…³é¢†åŸŸï¼Œåœ¨ Istio ä¼˜ç§€çš„æ§åˆ¶é¢åŸºç¡€ä¸Šï¼Œè¿›ä¸€æ­¥åšæŠ½è±¡å’Œç®€åŒ–ï¼Œé™ä½ä¸Šæ‰‹å’Œè¿ç»´é—¨æ§›</li></ol><p>è¿˜è¦æ„Ÿè°¢å‚ä¸ Higress å¼€æºè´¡çŒ®çš„å¼€å‘è€…ä»¬ï¼Œè¿™é‡Œé‡ç‚¹æ„Ÿè°¢ä¸‹ä¸º 1.3 ç‰ˆæœ¬åšå‡ºæ ¸å¿ƒè´¡çŒ®çš„å¼€å‘è€…ï¼š</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="maintainerè‘£è‰ºèƒch3cho">Maintainerï¼šè‘£è‰ºèƒ(CH3CHO)<a href="#maintainerè‘£è‰ºèƒch3cho" class="hash-link" aria-label="Maintainerï¼šè‘£è‰ºèƒ(CH3CHO)çš„ç›´æ¥é“¾æ¥" title="Maintainerï¼šè‘£è‰ºèƒ(CH3CHO)çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>äººå¦‚å…¶åâ€œè‰ºå…¨â€ï¼Œåå…«èˆ¬æ­¦è‰ºæ ·æ ·ç²¾é€šï¼Œä¸ç®¡æ˜¯æ§åˆ¶å° TS å‰ç«¯ï¼ŒJava åå°ï¼Œè¿˜æ˜¯ Higress çš„ GO æ§åˆ¶é¢ï¼Œä»¥åŠ Standalone å®‰è£… Shell è„šæœ¬å’Œå„ç§ CICD æµç¨‹ï¼Œé€šé€šæ‰‹åˆ°æ“’æ¥ã€‚</p><p>åœ¨ 1.3 ç‰ˆæœ¬ä¸­ä¸»è¦è´Ÿè´£äº† Higress æ”¯æŒ Gateway API çš„èƒ½åŠ›ï¼Œä»¥åŠå®ç°äº† Higress Admin Java SDK å¯ä»¥æä¾›å¤–éƒ¨é›†æˆç”¨äºç®¡ç† Higress é…ç½®ï¼Œå¹¶æ”¹è¿›äº† Higress Console çš„å®‰å…¨æ€§å’Œæ˜“ç”¨æ€§ã€‚</p><p>é™¤äº†å¼€å‘è´¡çŒ®ä¹‹å¤–ï¼Œä»–è¿˜å¯¹ç¤¾åŒºç”¨æˆ·å……æ»¡å–„æ„å’Œçƒ­æƒ…ï¼Œæ— è®ºæ˜¯åœ¨ GitHub çš„ Issues/Discussionsï¼Œæˆ–æ˜¯ç¤¾åŒºäº¤æµå¾®ä¿¡/é’‰é’‰ç¾¤ï¼Œéšå¤„å¯è§ä»–å¸®åŠ©ç”¨æˆ·è§£å†³é—®é¢˜çš„èº«å½±ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="approverå´æ–°å†›junåˆ˜è®­ç¼xunzhuo">Approverï¼šå´æ–°å†›(Jun)ï¼Œåˆ˜è®­ç¼(Xunzhuo)<a href="#approverå´æ–°å†›junåˆ˜è®­ç¼xunzhuo" class="hash-link" aria-label="Approverï¼šå´æ–°å†›(Jun)ï¼Œåˆ˜è®­ç¼(Xunzhuo)çš„ç›´æ¥é“¾æ¥" title="Approverï¼šå´æ–°å†›(Jun)ï¼Œåˆ˜è®­ç¼(Xunzhuo)çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ä¸¤ä½éƒ½åœ¨å¤šä¸ª Higress ç‰ˆæœ¬ä¸ºç¤¾åŒºåšå‡ºäº†è´¡çŒ®ï¼ŒJun çš„ä¸»è¦è´¡çŒ®æœ‰ï¼šåœ¨å¤šæ³¨å†Œä¸­å¿ƒçš„æœåŠ¡å‘ç°æ”¯æŒï¼Œå…¨å±€é…ç½®ç®¡ç†æ¶æ„æŠ½è±¡ï¼›Xunzhuo çš„ä¸»è¦è´¡çŒ®æœ‰ï¼šHigress E2E æµ‹è¯•æµç¨‹çš„æ­å»ºï¼ŒGitHub CI æµç¨‹çš„å»ºè®¾ï¼Œhgctl çš„æ•´ä½“æ¶æ„è®¾è®¡ã€‚</p><p>åœ¨ 1.3 ç‰ˆæœ¬ä¸­äºŒä½åä½œå®Œæˆäº† hgctl çš„å¤šæ ·åŒ–èƒ½åŠ›å»ºè®¾ï¼Œå¸®åŠ© Higress çš„æ˜“ç”¨æ€§åˆä¸Šåˆ°äº†ä¸€ä¸ªæ–°çš„å°é˜¶ã€‚</p><p>ä¸¤ä½åŒå­¦ä½œä¸º Approver ç§¯æå‚ä¸ç¤¾åŒºè´¡çŒ® PR çš„ Reviewï¼Œç›®å‰åˆ†åˆ«æ˜¯ Higress Tools SIG å’Œ Higress GatewayAPI SIG çš„é¢†å¯¼è€…ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="memberéŸ¦é‘«weixinxå°å®‡è…¾fkbqf">Memberï¼šéŸ¦é‘«(WeixinX)ï¼Œå°å®‡è…¾(Fkbqf)<a href="#memberéŸ¦é‘«weixinxå°å®‡è…¾fkbqf" class="hash-link" aria-label="Memberï¼šéŸ¦é‘«(WeixinX)ï¼Œå°å®‡è…¾(Fkbqf)çš„ç›´æ¥é“¾æ¥" title="Memberï¼šéŸ¦é‘«(WeixinX)ï¼Œå°å®‡è…¾(Fkbqf)çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ä¸¤ä½éƒ½æ˜¯é€šè¿‡ä¸­ç§‘é™¢å¼€æºä¹‹å¤ï¼ˆOSPP 2023ï¼‰é¡¹ç›®å¼€å§‹å‚ä¸ Higress è´¡çŒ®ï¼ŒWeixinX æ˜¯ä¸€åç ”äºŒçš„å­¦ç”Ÿï¼ŒFkbqf æ˜¯ä¸€åå¤§ä¸‰çš„å­¦ç”Ÿã€‚</p><p>åœ¨ 1.3 ç‰ˆæœ¬ä¸­ï¼ŒWeixinX å®ç°äº† hgctl plugin å­å‘½ä»¤çš„èƒ½åŠ›ï¼ŒåŒæ—¶è´¡çŒ®äº† Go å®ç°çš„ Basic Auth æ’ä»¶ï¼Œä»¥åŠå¯¹æ ‡ Spring Cloud Gateway è¯·æ±‚å“åº”è½¬æ¢èƒ½åŠ›çš„ Transformer æ’ä»¶ï¼›Fkbqf åˆ™å®ç°äº†æ›´ä¸ºå¤æ‚çš„ OIDC æ’ä»¶ï¼Œå…·å¤‡æ¯” Envoy è‡ªå¸¦ OAuth2 Filter æ›´å¼ºå¤§çš„åŠŸèƒ½ï¼Œå¹¶ä¸”å…·å¤‡è‰¯å¥½çš„æ‰©å±•æ€§ã€‚</p><p>ä¸¤ä½åŒå­¦é™¤äº†å¼€å‘è´¡çŒ®ä»¥å¤–ï¼Œç”¨è¯¾ä½™æ—¶é—´ç§¯æå‚ä¸ Higress ç¤¾åŒºå‘¨ä¼šï¼Œä¸€èµ·æ¢è®¨å’Œå­¦ä¹ æŠ€æœ¯ï¼Œä¸äº¦ä¹ä¹ã€‚èƒ½å¤Ÿæˆä¸ºä½ ä»¬äººç”Ÿå­¦ä¸šè¿›é˜¶è·¯ä¸Šçš„é˜¶æ¢¯ï¼ŒHigress è£å¹¸ä¹‹è‡³ã€‚</p><p>Higress ç¤¾åŒºåç»­æ•´ä½“çš„ Roadmap è§„åˆ’å¦‚ä¸‹ï¼š</p><p><img loading="lazy" src="https://github.com/johnlanni/higress-group.github.io/assets/6763318/f646d9ad-d2d0-4496-b164-2884851e9e0c" alt="image" class="img_ev3q"></p><p>æ¬¢è¿æ›´å¤šå°ä¼™ä¼´ä¸€èµ·åŠ å…¥æˆ‘ä»¬ï¼š</p><p><img loading="lazy" src="https://github.com/johnlanni/higress-group.github.io/assets/6763318/d8e09712-0b3b-4c5a-b478-c84da139cf2f" alt="higress-comm" class="img_ev3q"></p></div><footer class="row docusaurus-mt-lg"></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="description" content="é€šè¿‡ Higress Wasm æ’ä»¶ 3 å€æ€§èƒ½å®ç° Spring-cloud-gateway åŠŸèƒ½"><meta itemprop="keywords" content="Higress,Wasm"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/zh-cn/blog/plugin-transformer">é€šè¿‡ Higress Wasm æ’ä»¶ 3 å€æ€§èƒ½å®ç° Spring-cloud-gateway åŠŸèƒ½</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-10-27T00:00:00.000Z" itemprop="datePublished">2023å¹´10æœˆ27æ—¥</time> Â· <!-- -->é˜…è¯»éœ€ 11 åˆ†é’Ÿ</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><span itemprop="name">WeixinX</span></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><blockquote><p>å¯¼è¯»: æœ¬æ–‡å°†å’Œå¤§å®¶ä¸€åŒå›é¡¾ Spring Cloud Gateway æ˜¯å¦‚ä½•æ»¡è¶³ HTTP è¯·æ±‚/å“åº”è½¬æ¢éœ€æ±‚åœºæ™¯çš„ï¼Œå¹¶ä¸ºå¤§å®¶ä»‹ç»åœ¨è¿™ç§åœºæ™¯ä¸‹ä½¿ç”¨ Higress äº‘åŸç”Ÿç½‘å…³çš„è§£å†³æ–¹æ¡ˆï¼ŒåŒæ—¶è¿˜å¯¹æ¯”äº†ä¸¤è€…çš„æ€§èƒ½å·®å¼‚ã€‚</p></blockquote><h1>1. SCG ä¿®æ”¹è¯·æ±‚/å“åº”</h1><p>åœ¨ <a href="https://cloud.spring.io/spring-cloud-gateway/reference/html/" target="_blank" rel="noopener noreferrer">Spring Cloud Gateway</a> (ä»¥ä¸‹ç®€ç§°ä¸º SCG) ä¸­ï¼Œå½“æˆ‘ä»¬éœ€è¦å¯¹ HTTP è¯·æ±‚æˆ–å“åº”è¿›è¡Œä¿®æ”¹æ—¶ï¼ŒSCG æä¾›äº†è®¸å¤šå†…ç½®çš„ <a href="https://cloud.spring.io/spring-cloud-gateway/reference/html/#gatewayfilter-factories" target="_blank" rel="noopener noreferrer">GatewayFilter</a> æ¥æ»¡è¶³æˆ‘ä»¬å¯¹è¿™ç§åº”ç”¨åœºæ™¯çš„éœ€æ±‚ï¼Œä¾‹å¦‚ AddRequestHeader,AddRequestParameter, DedupeResponseHeader,MapRequestHeader, ModifyRequestBody ç­‰ã€‚</p><p>è€ƒè™‘ä»¥ä¸‹ç®€å•ç”¨ä¾‹ï¼š</p><ul><li>æ·»åŠ è¯·æ±‚å¤´éƒ¨ X-Firstï¼Œå€¼ä»è¯·æ±‚è·¯å¾„ä¸­è·å–ï¼Œä¾‹å¦‚ä» /response-headers?testKey=testValue ä¸­è·å– &quot;response-headers&quot;ï¼›</li><li>å°†è¯·æ±‚å¤´éƒ¨ X-First çš„å€¼æ˜ å°„ç»™ X-Secondï¼›</li><li>æ·»åŠ è¯·æ±‚æŸ¥è¯¢å‚æ•° k1=v1ï¼›</li><li>å‰”é™¤é‡å¤çš„å“åº”å¤´éƒ¨ X-Dedupeã€‚</li></ul><p>åœ¨ SCG ä¸­ä½¿ç”¨ GatewayFilter æˆ‘ä»¬å¯ä»¥è¿™æ ·é…ç½®ï¼š</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># application.yaml:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spring</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">cloud</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">gateway</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">routes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> test_route</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">uri</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> lb</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//httpbin</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">svc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">predicates</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> Path=/</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">api</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">/</span><span class="token important">**</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">filters</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> AddRequestHeader=X</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">First</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">api</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> MapRequestHeader=X</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">First</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> X</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">Second</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> AddRequestParameter=k1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> DedupeResponseHeader=X</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">Dedupe</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> RETAIN_FIRST</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç›¸ä¿¡æ‹¥æœ‰ SCG ä½¿ç”¨ç»éªŒçš„åŒå­¦å¯¹ä¸Šè¿°é…ç½®ä¸€å®šä¸é™Œç”Ÿï¼Œé‚£ä¹ˆæœ¬æ–‡å°†é‡ç‚¹ç»™å‡ºå¦ä¸€ç§èƒ½å¤Ÿ<strong>æ»¡è¶³ä¸Šè¿°éœ€æ±‚å¹¶ä¸”æ€§èƒ½æ›´åŠ ä¼˜è¶Šçš„è§£å†³æ–¹æ¡ˆâ€”â€”ä½¿ç”¨ Higress äº‘åŸç”Ÿç½‘å…³çš„ Transformer æ’ä»¶</strong>ã€‚</p><h1>2. Higress æ’ä»¶ä¸ SCG æ€§èƒ½æ¯”è¾ƒ</h1><p>æˆ‘ä»¬åœ¨åŒä¸€ååé‡æ°´å¹³ï¼ˆQPSï¼‰ä¸Šï¼Œå¼€å¯/å…³é—­ <a href="https://github.com/alibaba/higress/tree/main/plugins/wasm-go/extensions/transformer" target="_blank" rel="noopener noreferrer">Higress Transformer æ’ä»¶</a> å’Œ SCG ç›¸åº” GatewayFiltersï¼Œç»Ÿè®¡ä¸¤è€…åœ¨ CPU å’Œå†…å­˜èµ„æºä¸Šçš„å¼€é”€ã€‚</p><p>ç»è¿‡<a href="https://gist.github.com/WeixinX/c24f4ded37832dd7e753b2d27470f0fc" target="_blank" rel="noopener noreferrer">æµ‹è¯•</a>ï¼Œæˆ‘ä»¬å¾—åˆ°çš„ç»“è®ºæ˜¯ï¼š</p><ul><li>åœ¨ Higress æœªå¯ç”¨ Transformer æ’ä»¶ï¼ŒSCG æœªå¯ç”¨ GatewayFilters çš„æ¡ä»¶ä¸‹ï¼ŒSCG çš„ CPU, å†…å­˜èµ„æºå¼€é”€åˆ†åˆ«çº¦ä¸º Higressçš„ 3.30, 4.88å€ï¼›</li><li>åœ¨ Higress å¯ç”¨ Transformer æ’ä»¶ï¼ŒSCG å¯ç”¨ç›¸åº” GatewayFilters çš„æ¡ä»¶ä¸‹ï¼ŒSCG çš„ CPU,å†…å­˜èµ„æºå¼€é”€åˆ†åˆ«çº¦ä¸º Higress çš„ 2.98, 3.19å€ã€‚</li></ul><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/49450531/61d3ec0b-b708-41e6-9f28-96108b4b55c6" alt="ç›¸åŒ QPS ä¸‹çš„ CPU å¼€é”€" class="img_ev3q"></p><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/49450531/a60415d5-bed6-47cf-a976-b8e55a818e14" alt="ç›¸åŒ QPS ä¸‹çš„å†…å­˜å¼€é”€" class="img_ev3q"></p><p><strong>å¯è§ Higress Transformer ç›¸æ¯”äº SCG GatewayFilter æœ‰ç€ç›¸å½“ä¸é”™çš„æ€§èƒ½è¡¨ç°ï¼</strong></p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°†è¿›ä¸€æ­¥ä¸ºå¤§å®¶ä»‹ç» Higress äº‘åŸç”Ÿç½‘å…³ä»¥åŠä¸Šè¿°æåˆ°çš„ Higress Transformer æ’ä»¶ã€‚</p><h1>3. Higress ç®€ä»‹</h1><p><a href="https://higress.io/zh-cn/" target="_blank" rel="noopener noreferrer">Higress</a> æ˜¯åŸºäºé˜¿é‡Œå†…éƒ¨çš„ Envoy Gateway å®è·µæ²‰æ·€ã€ä»¥å¼€æº Istio + Envoy ä¸ºæ ¸å¿ƒæ„å»ºçš„ä¸‹ä¸€ä»£äº‘åŸç”Ÿç½‘å…³ï¼Œå®ç°äº†æµé‡ç½‘å…³+å¾®æœåŠ¡ç½‘å…³+å®‰å…¨ç½‘å…³ä¸‰åˆä¸€çš„é«˜é›†æˆèƒ½åŠ›ï¼Œæ·±åº¦é›†æˆ Dubboã€Nacosã€Sentinel ç­‰å¾®æœåŠ¡æŠ€æœ¯æ ˆï¼Œèƒ½å¤Ÿå¸®åŠ©ç”¨æˆ·æå¤§åœ°é™ä½ç½‘å…³çš„éƒ¨ç½²åŠè¿ç»´æˆæœ¬ä¸”èƒ½åŠ›ä¸æ‰“æŠ˜ï¼›åœ¨æ ‡å‡†ä¸Šå…¨é¢æ”¯æŒ Ingress ä¸ Gateway APIï¼Œç§¯ææ‹¥æŠ±äº‘åŸç”Ÿä¸‹çš„æ ‡å‡† API è§„èŒƒï¼›åŒæ—¶ï¼ŒHigress Controller ä¹Ÿæ”¯æŒ Nginx Ingress å¹³æ»‘è¿ç§»ï¼Œå¸®åŠ©ç”¨æˆ·é›¶æˆæœ¬å¿«é€Ÿè¿ç§»åˆ° Higressã€‚
Higress æä¾›äº†ä¸€å¥— <a href="https://github.com/alibaba/higress/tree/main/plugins" target="_blank" rel="noopener noreferrer">Wasm (WebAssembly) SDK</a>ï¼Œä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿè½»æ¾ä½¿ç”¨ C++ï¼ŒGolangï¼ŒRust å¼€å‘ Wasm æ’ä»¶å¢å¼ºç½‘å…³èƒ½åŠ›ã€‚ä¸‹é¢å°†ä¸ºå¤§å®¶ä»‹ç» Higress Transformer æ’ä»¶çš„åŸºæœ¬åŠŸèƒ½ï¼Œæœ€åç®€å•è¯´æ˜ Transformer æ’ä»¶çš„æ ¸å¿ƒä»£ç é€»è¾‘ã€‚</p><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/49450531/c93bc55d-8cca-47ac-8b63-64168626f9a9" alt="Higress Architecture" class="img_ev3q"></p><h1>4. Transformer æ’ä»¶ä»‹ç»</h1><p>Higress Transformer æ’ä»¶å¯ä»¥å¯¹è¯·æ±‚/å“åº”å¤´éƒ¨ã€è¯·æ±‚æŸ¥è¯¢å‚æ•°ã€è¯·æ±‚/å“åº”ä½“å‚æ•°è¿›è¡Œè½¬æ¢ï¼Œæ”¯æŒçš„è½¬æ¢æ“ä½œç±»å‹åŒ…æ‹¬åˆ é™¤ï¼ˆremoveï¼‰ã€é‡å‘½åï¼ˆrenameï¼‰ã€æ›´æ–°ï¼ˆreplaceï¼‰ã€æ·»åŠ ï¼ˆaddï¼‰ã€è¿½åŠ ï¼ˆappendï¼‰ã€æ˜ å°„ï¼ˆmapï¼‰å’Œå»é‡ï¼ˆdedupeï¼‰ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å¤ç°æœ€å¼€å§‹æåˆ°çš„ SCG GatewayFilter ç®€å•ç”¨ä¾‹ï¼Œæ¥æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨è¯¥æ’ä»¶ï¼ˆä»¥ä¸‹ä½¿ç”¨ Higress æ§åˆ¶å°å¯ä»¥å¾ˆæ–¹ä¾¿åœ°éƒ¨ç½²æ’ä»¶ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ <a href="https://github.com/higress-group/higress-demo/tree/main/wasm-demo/wasm-plugin-transformer" target="_blank" rel="noopener noreferrer">K8s YAML Manifests çš„æ–¹å¼</a>ï¼‰ï¼š</p><ol><li>é¦–å…ˆæ ¹æ®<a href="https://higress.io/zh-cn/docs/user/quickstart" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ–‡æ¡£</a> å¿«é€Ÿå®‰è£… Higressï¼Œç»“æœå¦‚ä¸‹ï¼š</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl -n higress-system get deploy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                         READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">higress-console              </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">            </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">           1d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">higress-console-grafana      </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">            </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">           1d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">higress-console-prometheus   </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">            </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">           1d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">higress-controller           </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">            </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">           1d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">higress-gateway              </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">            </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">           1d</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>é€šè¿‡ Higress æ§åˆ¶å°æ·»åŠ åŸŸåï¼ˆfoo.bar.comï¼‰ã€è·¯ç”±é…ç½®ï¼ˆfooï¼‰ï¼Œå°†æµé‡è½¬å‘è‡³åç«¯çš„ <a href="https://httpbin.org/" target="_blank" rel="noopener noreferrer">httpbin</a> æœåŠ¡ï¼š</li></ol><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/49450531/4a6b2ed0-f42b-4ffa-8b36-99f7444a9e5f" alt="image" class="img_ev3q"></p><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/49450531/151442fd-b43a-40e3-8fcf-7afa49f69af9" alt="image" class="img_ev3q"></p><ol start="3"><li>ä¸º foo è·¯ç”±æ·»åŠ  Transformer æ’ä»¶ï¼ˆå½“å‰æœªæ¨é€æ’ä»¶è‡³å®˜æ–¹é•œåƒä»“åº“ï¼Œå¯ä»¥å…ˆä½¿ç”¨ docker.io/weixinx/transformer:v0.1.0ï¼Œæˆ–åˆ°ä»£ç ä»“åº“è‡ªè¡Œæ„å»ºï¼‰ï¼š</li></ol><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/49450531/fb522095-ee88-4f77-89c2-8a8547a3a96f" alt="image" class="img_ev3q"></p><p>æ³¨ï¼šä¸ºäº†èƒ½å¤ŸåŒæ—¶å®Œæˆè¯·æ±‚å’Œå“åº”è½¬æ¢çš„éœ€æ±‚ï¼Œæˆ‘ä»¬éœ€è¦ä¸º foo è·¯ç”±å†æ·»åŠ ä¸€ä¸ª Transformer æ’ä»¶ï¼Œå‘½åä¸º transformer-respï¼Œç”¨äºå¤„ç†å“åº”æ–¹å‘ã€‚</p><ol start="4"><li>æ·»åŠ  Transformer é…ç½®å¹¶å¼€å¯è¯¥æ’ä»¶ï¼š</li></ol><ul><li>æ·»åŠ è¯·æ±‚å¤´éƒ¨ X-Firstï¼Œå€¼ä»è¯·æ±‚è·¯å¾„ä¸­è·å–ï¼Œä¾‹å¦‚ä» /response-headers?testKey=testValue ä¸­è·å– &quot;response-headers&quot;ï¼›</li><li>å°†è¯·æ±‚å¤´éƒ¨ X-First çš„å€¼æ˜ å°„ç»™ X-Secondï¼›</li><li>æ·»åŠ è¯·æ±‚æŸ¥è¯¢å‚æ•° k1=v1ï¼›</li><li>å‰”é™¤é‡å¤çš„å“åº”å¤´éƒ¨ X-Dedupeã€‚</li></ul><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># transformer:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> request  </span><span class="token comment" style="color:#999988;font-style:italic"># æŒ‡å®š Transformer ç±»å‹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">rules</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic"># æŒ‡å®šè½¬æ¢è§„åˆ™</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">operate</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> add </span><span class="token comment" style="color:#999988;font-style:italic"># æŒ‡å®šè½¬æ¢æ“ä½œç±»å‹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">headers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic"># æŒ‡å®šå¤´éƒ¨è½¬æ¢è§„åˆ™</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> X</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">First</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $1  </span><span class="token comment" style="color:#999988;font-style:italic"># æ­£åˆ™è¡¨è¾¾å¼æ•è·ç»„ $1ï¼Œæ”¯æŒ RE2 è¯­æ³•</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">path_pattern</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ^\/(\w+)</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">\</span><span class="token punctuation" style="color:#393A34">?</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">{</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">.</span><span class="token important">*$</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">querys</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># æŒ‡å®šæŸ¥è¯¢å‚æ•°è½¬æ¢è§„åˆ™</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> k1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">operate</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> map</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">headers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> X</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">First</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> X</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">Second</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># transformer-resp:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> response</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">rules</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">operate</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> dedupe</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">headers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> X</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">Dedupe</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> RETAIN_FIRST</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="5"><li>å‘é€è¯·æ±‚è¿›è¡Œæµ‹è¯•ï¼š</li></ol><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># éªŒè¯è¯·æ±‚æ–¹å‘è½¬æ¢</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">$ curl -v -H &quot;host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> foo.bar.com&quot; &quot;127.0.0.1/get&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt; HTTP/1.1 200 OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">&quot;args&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># æ·»åŠ äº†æŸ¥è¯¢å‚æ•° k1=v1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">&quot;k1&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;v1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">&quot;headers&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">&quot;X-First&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;get&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># æ·»åŠ äº†è¯·æ±‚å¤´éƒ¨ X-Firstï¼Œå€¼ &quot;get&quot; æ¥è‡ªè¯·æ±‚è·¯å¾„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">&quot;X-Second&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;get&quot;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># æ˜ å°„äº†è¯·æ±‚å¤´éƒ¨ X-Second</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># æ·»åŠ äº†æŸ¥è¯¢å‚æ•° k1=v1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">&quot;url&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;http://foo.bar.com/get?k1=v1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># éªŒè¯å“åº”æ–¹å‘è½¬æ¢</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">$ curl -v -H &quot;host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> foo.bar.com&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;127.0.0.1/response</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">headers</span><span class="token punctuation" style="color:#393A34">?</span><span class="token plain">X</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">Dedupe=1</span><span class="token important">&amp;X-Dedupe=2&amp;X-Dedupe=3&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt; HTTP/1.1 200 OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">&lt; x-dedupe</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># ä¿ç•™äº†å“åº”å¤´éƒ¨ X-Dedupe çš„ç¬¬ä¸€ä¸ªå€¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># é€šè¿‡æŸ¥è¯¢å‚æ•°ä¼ ç»™ httpbin çš„è‡ªå®šä¹‰å“åº”å¤´éƒ¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">&quot;X-Dedupe&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;3&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>â—ï¸éœ€è¦æ³¨æ„çš„æ˜¯ï¼š</p><ul><li>ä¸ä¸Šè¿°ä¾‹å­ç›¸åŒï¼Œè‹¥æœ‰åŒæ—¶å¤„ç†è¯·æ±‚å’Œå“åº”è½¬æ¢çš„éœ€æ±‚ï¼Œåˆ™éœ€è¦ä¸ºç›¸åº”è·¯ç”±æ·»åŠ ä¸¤ä¸ª Transformer æ’ä»¶ï¼Œåˆ†åˆ«å¤„ç†è¯·æ±‚æ–¹å‘å’Œå“åº”æ–¹å‘ï¼ˆæ­£åœ¨ä¼˜åŒ–ï¼‰ï¼›</li><li>è¯·æ±‚ä½“æ”¯æŒçš„ Content-Type æœ‰ï¼šapplication/json, application/x-www-form-urlencoded, multipart/form-dataï¼›è€Œå“åº”ä½“ä»…æ”¯æŒ application/jsonï¼›</li><li>æ›´å¤šè¯´æ˜è¯¦è§<a href="https://github.com/alibaba/higress/tree/main/plugins/wasm-go/extensions/transformer" target="_blank" rel="noopener noreferrer">æ’ä»¶æ–‡æ¡£</a>ã€‚</li></ul><h1>5. Transformer é€»è¾‘</h1><p>æœ¬èŠ‚å°†ç®€å•è¯´æ˜ Higress Transformer æ’ä»¶çš„æ ¸å¿ƒä»£ç é€»è¾‘ï¼Œå¸Œæœ›å¯ä»¥ä¸ºæœ‰å…´è¶£ä¼˜åŒ–è¯¥æ’ä»¶æˆ–è¿›è¡ŒäºŒæ¬¡å¼€å‘çš„åŒå­¦æä¾›ä¸€äº›å¸®åŠ©ã€‚</p><p>é¦–å…ˆè¯¥æ’ä»¶ä»£ç ä½äºHigress ä»“åº“çš„ plugins/wasm-go/extensions/transformer ç›®å½•ä¸‹ï¼Œä½¿ç”¨ Higress æä¾›çš„ <a href="https://github.com/alibaba/higress/tree/main/plugins" target="_blank" rel="noopener noreferrer">Wasm SDK</a> è¿›è¡Œå¼€å‘ï¼ˆå…³äºå¦‚ä½•å¼€å‘ Wasm æ’ä»¶è¯¦è§<a href="https://higress.io/zh-cn/docs/user/wasm-go" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ–‡æ¡£</a>ï¼‰ã€‚</p><p>æ’ä»¶çš„é…ç½®æ¨¡å‹ TransformerConfigï¼š</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># æ¨¡å‹ä»¥æ’ä»¶é…ç½®çš„å½¢å¼æš´éœ²ç»™ç”¨æˆ·</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> TransformerConfig </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  typ   </span><span class="token builtin">string</span><span class="token plain">          # Transformer ç±»å‹ï¼Œ</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">request</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> response</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  rules </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">TransformRule # è½¬æ¢è§„åˆ™</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  trans Transformer # Transformer å®ä¾‹ï¼Œä¸å¯¹ç”¨æˆ·æš´éœ²é…ç½®ï¼Œç”¨äºå®é™…çš„è½¬æ¢æ“ä½œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> TransformRule </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  operate </span><span class="token builtin">string</span><span class="token plain">   # è½¬æ¢æ“ä½œç±»å‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  headers </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">Param  # header å‚æ•° </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  querys  </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">Param  # query å‚æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  body    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">Param  # body å‚æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> Param </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  key         </span><span class="token builtin">string</span><span class="token plain"> # è¡¨ç¤ºå­—æ®µçš„ key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value       </span><span class="token builtin">string</span><span class="token plain"> # è¡¨ç¤ºå­—æ®µçš„ value æˆ– key </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">map</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> æˆ– strategy </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dedupe</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  valueType   </span><span class="token builtin">string</span><span class="token plain"> # ä¸º application</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">json body æŒ‡å®š value çš„æ•°æ®ç±»å‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  hostPattern </span><span class="token builtin">string</span><span class="token plain"> # host æ­£åˆ™åŒ¹é…æ¨¡å¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  pathPattern </span><span class="token builtin">string</span><span class="token plain"> # path æ­£åˆ™åŒ¹é…æ¨¡å¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å…¶ä¸­ Transformer ä½œä¸ºæ¥å£åˆ†åˆ«æœ‰è¯·æ±‚å’Œå“åº”ä¸¤ä¸ªå®ç°ï¼ˆrequestTransformer, responseTransformerï¼‰ï¼Œä¸»è¦å®ç°äº† 3 ä¸ªæ¥å£æ–¹æ³• TransformHeaders,TransformerQuerys å’Œ TransformBodyï¼š</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> Transformer </span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token function" style="color:#d73a49">TransformHeaders</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">host</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> path </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> hs </span><span class="token keyword" style="color:#00009f">map</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token function" style="color:#d73a49">TransformQuerys</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">host</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> path </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> qs </span><span class="token keyword" style="color:#00009f">map</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token function" style="color:#d73a49">TransformBody</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">host</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> path </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> body </span><span class="token keyword" style="color:#00009f">interface</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token operator" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">_</span><span class="token plain"> Transformer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">requestTransformer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">_</span><span class="token plain"> Transformer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">responseTransformer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç”±äºå¤´éƒ¨ï¼ˆHeadersï¼‰å’ŒæŸ¥è¯¢å‚æ•°ï¼ˆQuerysï¼‰éƒ½æ˜¯ä»¥ key-value çš„å½¢å¼å­˜åœ¨ï¼Œå› æ­¤é€šè¿‡ kvHandler å¯¹ä¸¤è€…é‡‡ç”¨ç»Ÿä¸€çš„å¤„ç†é€»è¾‘ï¼›è€Œ Body ç”±äºè¯·æ±‚ã€å“åº”æ”¯æŒä¸åŒçš„ Content-Typeï¼Œå› æ­¤åˆ†åˆ«é€šè¿‡ requestBodyHandler (kvHandler, jsonHandler ç»„åˆ)å’Œ responseBodyHandler (jsonHandler) è¿›è¡Œå¤„ç†ã€‚ç»¼ä¸Šï¼Œåœ¨ä¿®æ”¹è¯¥æ’ä»¶é€»è¾‘æ—¶ï¼Œä¸»è¦å¯¹ kvHandler å’Œ jsonHandler è¿›è¡Œä¿®æ”¹å³å¯ï¼Œå…¶ä¸­ jsonHandler ä¾èµ– <a href="https://github.com/tidwall/gjson" target="_blank" rel="noopener noreferrer">GJSON</a> å’Œ <a href="https://github.com/tidwall/sjson" target="_blank" rel="noopener noreferrer">SJSON</a> å·¥å…·åº“ã€‚</p><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/49450531/fc08ff0c-12ec-4dfd-b946-4e83f8431174" alt="image" class="img_ev3q"></p><p>ç›®å‰ handler ä¸­çš„è½¬æ¢é¡ºåºæ˜¯è¢«ç¡¬ç¼–ç çš„ï¼ˆremove -&gt; rename -&gt; replace -&gt; add -&gt; append -&gt; map -&gt; dedupeï¼‰ï¼Œæˆ‘ä»¬å¯¹æ­¤æœ‰ä¼˜åŒ–çš„æ‰“ç®—ï¼Œä¹Ÿæ¬¢è¿æ„Ÿå…´è¶£çš„åŒå­¦å‚ä¸è¿›æ¥ ~</p><h1>6. æ€»ç»“</h1><p>æœ¬æ–‡å¸¦å¤§å®¶äº†è§£äº† Higress Transformer æ’ä»¶ï¼Œå¹¶ä¸ Spring Cloud Gateway è¿›è¡Œäº†æ€§èƒ½æ¯”è¾ƒï¼Œåœ¨æ–‡ç« çš„æœ€åè¿˜è¯´æ˜äº†è¯¥æ’ä»¶çš„æ ¸å¿ƒä»£ç é€»è¾‘ï¼Œå¸Œæœ›èƒ½å¤Ÿä¸ºå¤§å®¶ä» Spring Cloud Gateway è¿ç§»è‡³ Higress æä¾›å¸®åŠ©ï¼</p><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/49450531/c2a47afd-5f29-4cfc-b5c5-571d2265ec19" alt="image" class="img_ev3q"></p><p>å¦‚æœæ‚¨è§‰å¾— Higress å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œæ¬¢è¿å‰å¾€ <a href="https://github.com/alibaba/higress" target="_blank" rel="noopener noreferrer">Github: Higress</a> ä¸ºæˆ‘ä»¬ starâ­ï¸ ä¸€ä¸‹ï¼æœŸå¾…ä¸æ‚¨åœ¨ Higress ç¤¾åŒºç›¸é‡ ~</p></div><footer class="row docusaurus-mt-lg"></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="description" content="çœ‹K8sèµ„æ·±è¿ç»´å¦‚ä½•é€‰å‹Ingressç½‘å…³"><meta itemprop="keywords" content="Higress,KubeCon"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/zh-cn/blog/2023-kubecon">Higressåœ¨2023 KubeCon Chinaçš„åˆ†äº«</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-09-28T00:00:00.000Z" itemprop="datePublished">2023å¹´9æœˆ28æ—¥</time> Â· <!-- -->é˜…è¯»éœ€ 9 åˆ†é’Ÿ</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><span itemprop="name">æ¾„æ½­</span></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="åˆ†äº«ç®€ä»‹">åˆ†äº«ç®€ä»‹<a href="#åˆ†äº«ç®€ä»‹" class="hash-link" aria-label="åˆ†äº«ç®€ä»‹çš„ç›´æ¥é“¾æ¥" title="åˆ†äº«ç®€ä»‹çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>åœ¨9æœˆ26æ—¥çš„2023 KubeConé˜¿é‡Œäº‘äº‘åŸç”Ÿå¼€æ”¾æ—¥ï¼ŒHigressçš„åˆ†äº«å†…å®¹åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š</p><p>Part 1. ç”±ä¸Šæµ·è´¹èŠ®ç½‘ç»œç§‘æŠ€ç³»ç»Ÿè¿ç»´å‰¯æ€»ç›‘æˆ´å–œå†›ï¼Œå¸¦æ¥è´¹èŠ®åœ¨é€‰å‹ä¼ä¸šç‰ˆHigressä½œä¸ºK8s Ingressæ›¿ä»£Nginx Ingressçš„ä»‹ç»</p><p>Part 2. ç”±Higresså¼€æºç¤¾åŒºè´Ÿè´£äººæ¾„æ½­ï¼Œå¸¦æ¥Higresså¼€æºé¡¹ç›®çš„ä»‹ç»</p><p>å¼€æºç‰ˆå’Œä¼ä¸šç‰ˆæ˜¯Higressçš„ä¸€ä½“ä¸¤é¢ï¼Œé€šè¿‡æœ¬æ¬¡åˆ†äº«ï¼Œç›¸ä¿¡å¤§å®¶ä¼šå¯¹Higressæœ‰æ›´å…¨é¢çš„äº†è§£ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="part-1-è´¹èŠ®äº’åŠ¨ä½¿ç”¨higressä½œä¸ºkubernetes-ingresså®ç°ç¨³å®šæ€§å’Œæ€§èƒ½æå‡">Part 1. è´¹èŠ®äº’åŠ¨ä½¿ç”¨Higressä½œä¸ºKubernetes Ingresså®ç°ç¨³å®šæ€§å’Œæ€§èƒ½æå‡<a href="#part-1-è´¹èŠ®äº’åŠ¨ä½¿ç”¨higressä½œä¸ºkubernetes-ingresså®ç°ç¨³å®šæ€§å’Œæ€§èƒ½æå‡" class="hash-link" aria-label="Part 1. è´¹èŠ®äº’åŠ¨ä½¿ç”¨Higressä½œä¸ºKubernetes Ingresså®ç°ç¨³å®šæ€§å’Œæ€§èƒ½æå‡çš„ç›´æ¥é“¾æ¥" title="Part 1. è´¹èŠ®äº’åŠ¨ä½¿ç”¨Higressä½œä¸ºKubernetes Ingresså®ç°ç¨³å®šæ€§å’Œæ€§èƒ½æå‡çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>è´¹èŠ®é€šè¿‡Higressè§£å†³äº†åŸæœ¬Nginx Ingressç½‘å…³çš„è¯¸å¤šç—›ç‚¹ï¼Œæ€§èƒ½æå‡90%ï¼Œå“åº”æ—¶é—´ä¸‹é™50%ï¼Œå¹¶å¤§å¹…æå‡ä¸šåŠ¡å…¥å£çš„ç¨³å®šåŠå®‰å…¨æ€§ï¼Œé«˜æ•ˆæ”¯æ’‘æ¯æ—¥1äº¿+ç²‰ä¸äº¤äº’ï¼Œ 4ä¸‡+çº¿ä¸‹é—¨åº—ã€æ¯æœˆ3000ä¸‡+ç¬”çš„ç§»åŠ¨æ”¯ä»˜éœ€æ±‚ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="è´¹èŠ®ä¸šåŠ¡åœºæ™¯">è´¹èŠ®ä¸šåŠ¡åœºæ™¯<a href="#è´¹èŠ®ä¸šåŠ¡åœºæ™¯" class="hash-link" aria-label="è´¹èŠ®ä¸šåŠ¡åœºæ™¯çš„ç›´æ¥é“¾æ¥" title="è´¹èŠ®ä¸šåŠ¡åœºæ™¯çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/0d4f761d-1471-49b6-a03c-38b11304262d" alt="image" class="img_ev3q">
<img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/dba8ae2a-93c8-4368-af3d-739f97090d39" alt="image" class="img_ev3q"></p><p>è´¹èŠ®ä¸“æ³¨äºç§»åŠ¨è¥é”€ã€O2Oã€ç¤¾äº¤åª’ä½“ã€ç§»åŠ¨ç”µå•†é¢†åŸŸçš„åˆ›æ–°ä¸ç ”å‘ã€‚è´¹èŠ®äº’åŠ¨è‡ªä¸»ç ”å‘çš„è‡ªåª’ä½“å¹³å°è¿ç»´è¶…è¿‡2äº¿ç²‰ä¸ ï¼› æœ‰è¶…è¿‡4ä¸‡å®¶çº¿ä¸‹é—¨åº—é‡‡ç”¨è´¹èŠ®O2Oè§£å†³æ–¹æ¡ˆã€‚è´¹èŠ®çš„ä¸»è¦å®¢æˆ·åŒ…æ‹¬ä¼˜è¡£åº“ï¼Œå¿…èƒœå®¢ï¼Œè‚¯å¾·åŸºï¼Œæ˜Ÿå·´å…‹ï¼ŒSPGï¼Œæ¬§è±é›…ï¼ŒInnisfreeï¼Œè¿ªå¡ä¾¬ï¼Œé¡¶æ–°é›†å›¢ç­‰ã€‚</p><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/61791bae-b40c-4b90-bc4d-c23bc052911c" alt="image" class="img_ev3q"></p><p>è´¹èŠ®å†…éƒ¨ä¸šåŠ¡ç³»ç»Ÿçš„æ—¥å‡å‘å¸ƒæ¬¡æ•°è¾¾åˆ°100æ¬¡ä¹‹å¤šï¼Œä¼šæ¶‰åŠåˆ°400å¤šæ¡Ingressè·¯ç”±è§„åˆ™çš„æ—¥å¸¸æ›´æ–°ï¼Œä¸”ç½‘å…³æ¯å¤©éœ€è¦æ‰¿è½½çš„PVæµé‡è¾¾åˆ°äº†1ä¸ªäº¿ã€‚Ingressç½‘å…³çš„æ€§èƒ½å’Œç¨³å®šæ€§è‡³å…³é‡è¦ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="nginx-ingress-ç—›ç‚¹">Nginx Ingress ç—›ç‚¹<a href="#nginx-ingress-ç—›ç‚¹" class="hash-link" aria-label="Nginx Ingress ç—›ç‚¹çš„ç›´æ¥é“¾æ¥" title="Nginx Ingress ç—›ç‚¹çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/1d8a178e-05de-4114-96b3-7d4e11240374" alt="image" class="img_ev3q"></p><p>é…ç½®å˜æ›´é¢‘ç¹ï¼Œå¯¼è‡´Nginxè¿›ç¨‹é¢‘ç¹é‡å¯ï¼Œå¤§é‡è¿æ¥ç¬æ—¶æ–­å¼€åå¹¶å‘é‡è¿ä¼šå¯¼è‡´åç«¯æœåŠ¡äº§ç”Ÿå‹åŠ›ï¼Œä¸¥é‡æ—¶é€ æˆå¤§é‡è¯·æ±‚å¤±è´¥ã€‚</p><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/52e6ff5a-7374-4fe9-b001-ff6d3ac97744" alt="image" class="img_ev3q"></p><p>Nginx Ingressçš„Controllerç»„ä»¶å’ŒNginxç»„ä»¶è¿è¡Œåœ¨åŒä¸€ä¸ªPODä¸­ï¼Œæ§åˆ¶é¢èµ„æºä½¿ç”¨è¿˜ä¼šå½±å“åˆ°æ•°æ®é¢çš„æ€§èƒ½ã€‚</p><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/b09a3db4-465b-46b8-8e35-bd274388f143" alt="image" class="img_ev3q"></p><p>Nginx Ingressè¿˜ç¼ºå°‘é¢å‘æœåŠ¡é™æµçš„èƒ½åŠ›ï¼Œåªèƒ½å®ç°é¢å‘å•ä¸ªæ¥æºIPé™æµï¼Œå¯¹äºåç«¯æœåŠ¡ä¿æŠ¤æ¥è¯´æ²¡æœ‰æ„ä¹‰ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="higress-æ”¶ç›Š">Higress æ”¶ç›Š<a href="#higress-æ”¶ç›Š" class="hash-link" aria-label="Higress æ”¶ç›Šçš„ç›´æ¥é“¾æ¥" title="Higress æ”¶ç›Šçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/48388f01-7796-4f7d-b7d1-fb7bd1522925" alt="image" class="img_ev3q"></p><p>Higressä¼ä¸šç‰ˆé‡‡ç”¨äº†å…¨æ‰˜ç®¡æ¶æ„ï¼Œä¸ä¸šåŠ¡é›†ç¾¤åˆ†ç¦»ï¼Œæ— éœ€è‡ªå·±è¿ç»´ï¼Œç¨³å®šæ€§æœ‰æ›´å¥½ä¿éšœã€‚</p><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/5e689364-fb08-4ec1-9d71-49539da561b8" alt="image" class="img_ev3q"></p><p>é…ç½®æ›´æ–°éƒ½æ˜¯åŠ¨æ€åŠ è½½ï¼Œæ— éœ€é‡å¯æ•°æ®é¢ï¼Œä¿éšœä¸šåŠ¡å¹³ç¨³å‘å¸ƒï¼Œwebsocketè¿æ¥çš„ä¸šåŠ¡æ”¶ç›Šä¹Ÿç‰¹åˆ«æ˜æ˜¾ï¼Œé•¿è¿æ¥å¯ä»¥å§‹ç»ˆä¿æŒä¸ä¼šæ–­å¼€ã€‚</p><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/29ae8168-e84d-41fb-bb4f-a258c4200a7e" alt="image" class="img_ev3q"></p><p>å¼€å¯äº†TLSç¡¬ä»¶åŠ é€Ÿï¼ŒTLSæ¡æ‰‹æ—¶å»¶ç›´æ¥å‡åŠï¼ŒQPSååæå‡86%ã€‚</p><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/4ace2996-5b5a-4331-90cb-8448c65042d5" alt="image" class="img_ev3q"></p><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/8664f436-c058-42bc-82c9-7355d24592ad" alt="image" class="img_ev3q"></p><p>å¼€å¯WAFå¯¹ååå½±å“è¿˜æ˜¯æ¯”è¾ƒæ˜æ˜¾çš„ï¼Œä¸‹é™äº†30%ï¼Œä½†ç›¸æ¯”Ingress Nginxç›´æ¥ä¸‹é™äº†90%ï¼Œæ€§èƒ½æå‡è¿˜æ˜¯å¾ˆæ˜æ˜¾ï¼Œè€Œä¸”æ›´å¤§çš„ä¼˜åŠ¿æ˜¯åŸºäºé˜¿é‡Œäº‘WAFäº§å“ï¼Œé˜²æŠ¤è§„åˆ™æ˜¯å®æ—¶æ›´æ–°çš„ï¼Œè€ŒéModsecurityçš„é™æ€è§„åˆ™ã€‚</p><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/10fca63d-a0bb-45a1-82ee-de115bf577e7" alt="image" class="img_ev3q"></p><p>Higressé›†æˆäº†Sentinelé™æµçš„èƒ½åŠ›ï¼Œå¯ä»¥ç›´æ¥é¢å‘æœåŠ¡çš„QPSååä¸Šé™/å¹¶å‘æ•°ä¸Šçº¿è¿›è¡Œé™æµï¼Œå¹¶ä¸”ç›¸æ¯”Nginxåªèƒ½é…ç½®å•æœºé™åˆ¶é˜ˆå€¼ï¼Œéœ€è¦å…³æ³¨ç½‘å…³èŠ‚ç‚¹æ•°é‡ï¼ŒHigressè¿™é‡Œçš„é…ç½®æ˜¯å…¨å±€é˜ˆå€¼ï¼Œä¸å—ç½‘å…³æ‰©ç¼©å®¹å½±å“ã€‚</p><p>è§¦å‘é™æµåå¯ä»¥è‡ªå®šä¹‰å“åº”å†…å®¹æˆ–è€…é‡å®šå‘åˆ°æŒ‡å®šåœ°å€ï¼Œéƒ½æ˜¯å¾ˆå®ç”¨çš„èƒ½åŠ›ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="part-2-higresså¼€æºä¹‹è·¯æ‰æ ¹å¼€æºç”Ÿæ€å®šä¹‰äº‘åŸç”Ÿç½‘å…³">Part 2. Higresså¼€æºä¹‹è·¯ï¼šæ‰æ ¹å¼€æºç”Ÿæ€ï¼Œå®šä¹‰äº‘åŸç”Ÿç½‘å…³<a href="#part-2-higresså¼€æºä¹‹è·¯æ‰æ ¹å¼€æºç”Ÿæ€å®šä¹‰äº‘åŸç”Ÿç½‘å…³" class="hash-link" aria-label="Part 2. Higresså¼€æºä¹‹è·¯ï¼šæ‰æ ¹å¼€æºç”Ÿæ€ï¼Œå®šä¹‰äº‘åŸç”Ÿç½‘å…³çš„ç›´æ¥é“¾æ¥" title="Part 2. Higresså¼€æºä¹‹è·¯ï¼šæ‰æ ¹å¼€æºç”Ÿæ€ï¼Œå®šä¹‰äº‘åŸç”Ÿç½‘å…³çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>å¼€æºæ˜¯äº‘åŸç”Ÿç”Ÿæ€çš„åŸºçŸ³ï¼ŒHigressä¹Ÿæ˜¯å€ŸåŠ©äº†å¼€æºç”Ÿæ€çš„åŠ›é‡ï¼Œç«™åœ¨Istio/Envoyçš„è‚©è†€ä¸Šå¼€å‘å‡ºäº†æ›´å¤šå®ç”¨çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬é€‰æ‹©å°†MSE Higressï¼ˆä¼ä¸šç‰ˆï¼‰ä¸­çš„æ ¸å¿ƒèƒ½åŠ›å…¨éƒ¨å¼€æºï¼Œå†³å¿ƒæ‰æ ¹åœ¨å¼€æºç”Ÿæ€ä¸­ï¼Œè®©Higresså˜å¾—æ›´æ™®æƒ ï¼Œæœ‰æ›´å¤šäººä½¿ç”¨ï¼Œä»è€Œè®©Higressæ›´åŠ å¼ºå¤§ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç®€ä»‹">ç®€ä»‹<a href="#ç®€ä»‹" class="hash-link" aria-label="ç®€ä»‹çš„ç›´æ¥é“¾æ¥" title="ç®€ä»‹çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/438dcf9a-96fa-4d0d-89ed-e810746c61ab" alt="image" class="img_ev3q"></p><p>Higresså®é™…ä¸Šæœ‰ä¸‰æ¬¡è¯ç”Ÿè¿‡ç¨‹ï¼šç¬¬ä¸€æ¬¡æ˜¯åœ¨é˜¿é‡Œé›†å›¢å†…éƒ¨ä¸šåŠ¡éœ€æ±‚é©±åŠ¨ä¸‹è¯ç”Ÿï¼›ç¬¬äºŒæ¬¡æ˜¯éšç€å†…éƒ¨ä½¿ç”¨é€æ¸æˆç†Ÿæ²‰æ·€ä¸ºé˜¿é‡Œäº‘ä¸Šçš„MSE Higressäº‘åŸç”Ÿç½‘å…³äº§å“ï¼›ç¬¬ä¸‰æ¬¡æ˜¯éšç€äº‘äº§å“æˆç†Ÿï¼Œ2022å¹´11æœˆåœ¨äº‘æ –å¤§ä¼šä¸Šæ­£å¼å®£å¸ƒå¼€æºã€‚2023å¹´5æœˆReleaseäº†ç¬¬ä¸€ä¸ªGAç‰ˆæœ¬ï¼Œæ„å‘³ç€å¼€æºç‰ˆæœ¬ä¹Ÿèµ°å…¥æˆç†Ÿé˜¶æ®µã€‚</p><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/783b96cc-b628-4784-a6cf-c2cf10e11f3f" alt="image" class="img_ev3q"></p><p>ä»é…ç½®æµè½¬çš„è¿‡ç¨‹æ¥çœ‹Higressçš„æ¶æ„ï¼š</p><ol><li>é¦–å…ˆç”¨æˆ·å¯ä»¥é€šè¿‡UIæ§åˆ¶å°/å‘½ä»¤è¡Œå·¥å…·å¤šç§æ–¹å¼æ¥ä¸‹å‘é…ç½®</li><li>åˆ°äº†æ§åˆ¶é¢ï¼Œå¦‚æœæ˜¯K8sä¸‹ï¼Œé…ç½®æŒä¹…åŒ–åŸºäºCRDï¼Œå¦‚æœä¸æ˜¯K8sï¼Œé…ç½®æŒä¹…åŒ–åŸºäºNacos</li><li>é™¤äº†ç”¨æˆ·ä¸‹å‘çš„è·¯ç”±é…ç½®ï¼Œå®ç°æœåŠ¡è·¯ç”±è¿˜éœ€è¦çš„æœåŠ¡IPåœ°å€ä¿¡æ¯ï¼Œæ”¯æŒä»K8s service/Nacos/Eureka/Consul/ZooKeeper/DNS/å›ºå®šIPç­‰å¤šç§æ–¹å¼è·å–</li><li>Higressæ•°æ®é¢æ˜¯åŸºäºEnvoyï¼Œé…ç½®é€šè¿‡xDSä¸‹å‘ï¼Œè¿™é‡Œå¤ç”¨äº†Istioçš„é…ç½®ä¸‹å‘æœºåˆ¶ï¼Œå› ä¸ºæ˜¯å†…ç½®äº†è¿™ä¸ªæœºåˆ¶ï¼Œæ— éœ€å•ç‹¬éƒ¨ç½²Istio</li><li>æœ€ç»ˆé…ç½®ä¸‹å‘åˆ°æ•°æ®é¢ç”Ÿæ•ˆï¼ŒHigressåŸºäºEnvoyæ‰©å±•äº†å¾ˆå¤šèƒ½åŠ›ï¼Œè€Œä¸”åŸºäºWasmæ‰©å±•æœºåˆ¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿å¼€å‘è‡ªå®šä¹‰æ’ä»¶ï¼Œä¸”å…·å¤‡å…¨å±€/åŸŸå/è·¯ç”±ç»´åº¦çš„ç”Ÿæ•ˆç²’åº¦</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ ¸å¿ƒèƒ½åŠ›">æ ¸å¿ƒèƒ½åŠ›<a href="#æ ¸å¿ƒèƒ½åŠ›" class="hash-link" aria-label="æ ¸å¿ƒèƒ½åŠ›çš„ç›´æ¥é“¾æ¥" title="æ ¸å¿ƒèƒ½åŠ›çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/be02b599-f82f-42be-a8e5-82f69b9196b8" alt="image" class="img_ev3q">
<img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/4dc3cc2b-d6fe-4717-a53a-3e75c5f826ca" alt="image" class="img_ev3q"></p><p>é«˜é›†æˆï¼šåŒæ—¶é›†æˆç»å…¸å¾®æœåŠ¡ç”Ÿæ€å’ŒK8så¼€æºç”Ÿæ€èƒ½åŠ›ï¼Œå¯ä»¥å¸®åŠ©ä¸šåŠ¡ä»ä¼ ç»Ÿæ¶æ„è¿ç§»åˆ°äº‘åŸç”Ÿæ¶æ„ï¼ŒåŸºäºæµé‡ç°åº¦ç­‰èƒ½åŠ›ï¼Œå¯ä»¥ä¿éšœè¿™ä¸€è¿‡ç¨‹çš„å¹³æ»‘</p><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/87f8eacd-39b6-4a26-a7a1-b78f6a5abb4f" alt="image" class="img_ev3q"></p><p>æ ‡å‡†åŒ–ï¼šå…¼å®¹Nginx Ingresså¸¸ç”¨æ³¨è§£ï¼ŒåŸºäºç»Ÿä¸€çš„Ingressæ ‡å‡†å¯ä»¥è½»æ¾å®ç°Nginxåˆ°Higressè¿™ä¸€æŠ€æœ¯é¸¿æ²Ÿçš„è·¨è¶Šï¼ŒHigressä¹Ÿå·²ç»æ”¯æŒGateway APIï¼Œè·¯ç”±æ ‡å‡†æœ¬èº«ä¹Ÿèƒ½å€ŸåŠ©Higresså®ç°å¹³æ»‘å‡çº§</p><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/33776d12-baf3-4d09-ae42-a5cadb655bef" alt="image" class="img_ev3q"></p><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/b9e4a718-c985-4ac4-9b7b-46a427ccb987" alt="image" class="img_ev3q"></p><p>æ˜“æ‰©å±•ï¼šå€ŸåŠ©Higressçš„Wasm SDKï¼Œå¾ˆå°‘çš„ä¸šåŠ¡ä»£ç å°±å¯ä»¥å¼€å‘ä¸€ä¸ªçµæ´»çš„æ’ä»¶ï¼›å¹¶ä¸”æ”¯æŒåŸºäºOCIé•œåƒæ ‡å‡†åˆ†å‘ï¼Œå¯ä»¥è®©æ’ä»¶çš„æ–‡æ¡£ï¼Œé…ç½®çº¦æŸç­‰è·Ÿéšæ’ä»¶æœ¬èº«ä¸€èµ·è¢«åˆ†å‘å’Œå…±äº«ï¼›å’Œä¼ ç»ŸNginxç±»ç½‘å…³æœ€å¤§çš„å·®åˆ«ï¼Œåœ¨äºæ’ä»¶çš„åˆ†å‘é›†æˆé˜¶æ®µï¼Œå®ç°äº†æ’ä»¶ç‰ˆæœ¬æ›´æ–°è·Ÿç½‘å…³è‡ªèº«ç‰ˆæœ¬æ›´æ–°çš„è§£è€¦ã€‚</p><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/d037bd1d-89c1-4f9c-b489-857b46de31ca" alt="image" class="img_ev3q"></p><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/65f71cee-09d9-4e7b-aa6e-bd4c9a60de83" alt="image" class="img_ev3q"></p><p>çƒ­æ›´æ–°ï¼šEnvoyç›¸æ¯”Nginxæ›´åˆç†çš„é…ç½®ç³»ç»ŸæŠ½è±¡ï¼Œè®©Higresså…·å¤‡äº†Nginx Ingressæ— æ³•å®ç°çš„é…ç½®çƒ­æ›´æ–°èƒ½åŠ›</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å›é¡¾ä¸å±•æœ›">å›é¡¾ä¸å±•æœ›<a href="#å›é¡¾ä¸å±•æœ›" class="hash-link" aria-label="å›é¡¾ä¸å±•æœ›çš„ç›´æ¥é“¾æ¥" title="å›é¡¾ä¸å±•æœ›çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/f46c4d68-8e31-44bb-afc6-c02c9fccb105" alt="image" class="img_ev3q"></p><p>Higresså¼€æºçš„å‰åŠå¹´ï¼Œä¸“æ³¨äºå¼€æºç”Ÿæ€çš„æ‰“é€šå’Œæ˜“ç”¨æ€§çš„æå‡ï¼Œå¹¶åŸºäºGithub Actionæ„å»ºäº†å¼€æºçš„é›†æˆæµ‹è¯•ä½“ç³»ï¼Œæ¥ä¿éšœé¡¹ç›®è´¨é‡ï¼Œåœ¨ä»Šå¹´5æœˆä»½å‘å¸ƒç¬¬ä¸€ä¸ªGAç¨³å®šç‰ˆæœ¬åï¼Œåœ¨å¤šä¸ªæ ¸å¿ƒç¤¾åŒºå¼€å‘è€…çš„åŠªåŠ›ä¸‹ï¼Œæˆ‘ä»¬åˆå¾ˆå¿«å‘å¸ƒäº†1.1å’Œ1.2ä¸¤ä¸ªå¤§ç‰ˆæœ¬ï¼Œæ¨å‡ºäº†éK8séƒ¨ç½²/Knativeæ”¯æŒç­‰é‡é‡çº§åŠŸèƒ½ã€‚</p><p><img loading="lazy" src="https://github.com/higress-group/higress-group.github.io/assets/6763318/3ba10a71-b3f0-4ede-a150-c64e0b1003c4" alt="image" class="img_ev3q"></p><p>æœªæ¥çš„RoadMapï¼ŒHigressä¼šèšç„¦åœ¨Gateway API/æ’ä»¶ç”Ÿæ€/APIç®¡ç†ä¸‰ä¸ªæ–¹å‘ä¸Šï¼Œéšç€ç¤¾åŒºå¼€å‘å›¢é˜Ÿçš„ä¸æ–­å£®å¤§ï¼ŒHigresså·²ç»å»ºç«‹äº†å¤šä¸ªä¸åŒæ–¹å‘çš„<a href="https://github.com/alibaba/higress/issues/547" target="_blank" rel="noopener noreferrer">SIG</a> å¹¶è¡Œæ¨è¿›æ ¸å¿ƒåŠŸèƒ½æ¼”è¿›ï¼Œæœªæ¥å°†ä¸æ–­æœ‰é‡é‡çº§åŠŸèƒ½æ¨å‡ºï¼Œå°½è¯·æœŸå¾…ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç›´æ’­å›çœ‹">ç›´æ’­å›çœ‹<a href="#ç›´æ’­å›çœ‹" class="hash-link" aria-label="ç›´æ’­å›çœ‹çš„ç›´æ¥é“¾æ¥" title="ç›´æ’­å›çœ‹çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><a href="https://www.aliyun.com/activity/middleware/CloudNative_Meetup" target="_blank" rel="noopener noreferrer">https://www.aliyun.com/activity/middleware/CloudNative_Meetup</a></p></div><footer class="row docusaurus-mt-lg"></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="description" content="ä»‹ç»å¦‚ä½•ä½¿ç”¨æ–‡ä»¶æ¥ç®¡ç† Higress é…ç½®ä¿¡æ¯å¹¶å®ç°ç‹¬ç«‹éƒ¨ç½²"><meta itemprop="keywords" content="higress,file,config"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/zh-cn/blog/config-with-file">åŸºäºæ–‡ä»¶é…ç½®å®ç° Higress æç®€ç‹¬ç«‹éƒ¨ç½²</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-08-25T00:00:00.000Z" itemprop="datePublished">2023å¹´8æœˆ25æ—¥</time> Â· <!-- -->é˜…è¯»éœ€ 4 åˆ†é’Ÿ</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><span itemprop="name">CH3CHO</span></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å‰ç½®å‡†å¤‡">å‰ç½®å‡†å¤‡<a href="#å‰ç½®å‡†å¤‡" class="hash-link" aria-label="å‰ç½®å‡†å¤‡çš„ç›´æ¥é“¾æ¥" title="å‰ç½®å‡†å¤‡çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å®‰è£…-docker-compose">å®‰è£… Docker Compose<a href="#å®‰è£…-docker-compose" class="hash-link" aria-label="å®‰è£… Docker Composeçš„ç›´æ¥é“¾æ¥" title="å®‰è£… Docker Composeçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>è¯·å‚è€ƒ Docker å®˜æ–¹æ–‡æ¡£æ¥å®‰è£… Docker Engineï¼Œå…¶ä¸­å·²ç»å†…ç½®äº† Docker Compose ç»„ä»¶ï¼š<a href="https://docs.docker.com/engine/install/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/engine/install/</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç¯å¢ƒéªŒè¯">ç¯å¢ƒéªŒè¯<a href="#ç¯å¢ƒéªŒè¯" class="hash-link" aria-label="ç¯å¢ƒéªŒè¯çš„ç›´æ¥é“¾æ¥" title="ç¯å¢ƒéªŒè¯çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ol><li>å¯åŠ¨ç»ˆç«¯ï¼›</li><li>æ‰§è¡Œ <code>docker compose version</code> å‘½ä»¤ï¼Œç¡®è®¤å¯ä»¥æ­£å¸¸è¾“å‡º Docker Compose çš„ç‰ˆæœ¬ã€‚<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Docker Compose version v2.20.2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å®‰è£…-higrees">å®‰è£… Higrees<a href="#å®‰è£…-higrees" class="hash-link" aria-label="å®‰è£… Higreesçš„ç›´æ¥é“¾æ¥" title="å®‰è£… Higreesçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç¡®å®šé…ç½®ç›®å½•">ç¡®å®šé…ç½®ç›®å½•<a href="#ç¡®å®šé…ç½®ç›®å½•" class="hash-link" aria-label="ç¡®å®šé…ç½®ç›®å½•çš„ç›´æ¥é“¾æ¥" title="ç¡®å®šé…ç½®ç›®å½•çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ç”±äºè¿™æ¬¡æˆ‘ä»¬å‡†å¤‡ä½¿ç”¨æ–‡ä»¶æ¥ç®¡ç† Higress çš„é…ç½®æ•°æ®ï¼Œæ‰€ä»¥éœ€è¦å…ˆç¡®å®šä¿å­˜é…ç½®æ–‡ä»¶çš„ç›®å½•ã€‚ä¸‹é¢æˆ‘ä»¬å°†ä»¥ <code>~/higress/conf</code> ç›®å½•ä¸ºä¾‹è¿›è¡Œä»‹ç»ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ‰§è¡Œå®‰è£…">æ‰§è¡Œå®‰è£…<a href="#æ‰§è¡Œå®‰è£…" class="hash-link" aria-label="æ‰§è¡Œå®‰è£…çš„ç›´æ¥é“¾æ¥" title="æ‰§è¡Œå®‰è£…çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>å¯åŠ¨ç»ˆç«¯ï¼Œå¹¶æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -fsSL https://higress.io/standalone/get-higress.sh | bash -s -- -c file://~/higress/conf -p &lt;ä½ çš„å¯†ç &gt; -a</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¯·è€å¿ƒç­‰å¾…å®‰è£…è¿‡ç¨‹æ‰§è¡Œå®Œæ¯•ã€‚Higress çš„æ‰§è¡Œæ–‡ä»¶å°†è¢«å®‰è£…åœ¨å½“å‰ç›®å½•ä¸‹çš„ <code>higress</code> å­ç›®å½•å†…ã€‚é…ç½®æ•°æ®åˆ™å°†è¢«å†™å…¥ <code>~/higress/conf</code> ç›®å½•å†…ã€‚</p><p>åœ¨å®‰è£…å®Œæˆåï¼Œè„šæœ¬ä¼šè‡ªåŠ¨å¯åŠ¨ Higressã€‚å½“ç»ˆç«¯è¾“å‡ºå¦‚ä¸‹ä¿¡æ¯æ—¶ï¼Œåˆ™è¯´æ˜ Higress å·²å®‰è£…å®Œæˆå¹¶æˆåŠŸå¯åŠ¨ã€‚</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Higress is now started. You can check out its status by executing /home/ch3cho/higress/bin/status.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Higress Gateway is listening on:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  http://0.0.0.0:80</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  https://0.0.0.0:443</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Visit Higress Console: http://localhost:8080/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="higress-è·¯ç”±é…ç½®">Higress è·¯ç”±é…ç½®<a href="#higress-è·¯ç”±é…ç½®" class="hash-link" aria-label="Higress è·¯ç”±é…ç½®çš„ç›´æ¥é“¾æ¥" title="Higress è·¯ç”±é…ç½®çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ä¸ºäº†ç€é‡è¯´æ˜åŸºäºæ–‡ä»¶çš„è·¯ç”±é…ç½®æ–¹å¼ï¼Œè¿™é‡Œå°†ä¸å†å±•å¼€ä»‹ç»ä½¿ç”¨ Higress æ§åˆ¶å°æ¥è¿›è¡Œé…ç½®çš„å…·ä½“æ­¥éª¤ã€‚å¦‚æœ‰éœ€è¦ï¼Œå¤§å®¶å¯ä»¥æŸ¥é˜…å…¶ä»–æ–‡æ¡£ã€‚</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="åˆ›å»ºæœåŠ¡æ¥æº">åˆ›å»ºæœåŠ¡æ¥æº<a href="#åˆ›å»ºæœåŠ¡æ¥æº" class="hash-link" aria-label="åˆ›å»ºæœåŠ¡æ¥æºçš„ç›´æ¥é“¾æ¥" title="åˆ›å»ºæœåŠ¡æ¥æºçš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨å°†ä»¥ä¸‹å†…å®¹å†™å…¥ <code>~/higress/conf/mcpbridges/default.yaml</code> æ–‡ä»¶ä¸­ï¼š</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> networking.higress.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> McpBridge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">registries</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">domain</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> httpbin.org</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> httpbin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> dns</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="åˆ›å»ºåŸŸåé…ç½®">åˆ›å»ºåŸŸåé…ç½®<a href="#åˆ›å»ºåŸŸåé…ç½®" class="hash-link" aria-label="åˆ›å»ºåŸŸåé…ç½®çš„ç›´æ¥é“¾æ¥" title="åˆ›å»ºåŸŸåé…ç½®çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨å°†ä»¥ä¸‹å†…å®¹å†™å…¥ <code>~/higress/conf/configmaps/domain-foo.bar.com.yaml</code> æ–‡ä»¶ä¸­ï¼š</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ConfigMap</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> domain</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">foo.bar.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">domain</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> foo.bar.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">enableHttps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;off&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="åˆ›å»ºæœåŠ¡è·¯ç”±">åˆ›å»ºæœåŠ¡è·¯ç”±<a href="#åˆ›å»ºæœåŠ¡è·¯ç”±" class="hash-link" aria-label="åˆ›å»ºæœåŠ¡è·¯ç”±çš„ç›´æ¥é“¾æ¥" title="åˆ›å»ºæœåŠ¡è·¯ç”±çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨å°†ä»¥ä¸‹å†…å®¹å†™å…¥ <code>~/higress/conf/ingresses/route-foo-bar.yaml</code> æ–‡ä»¶ä¸­ï¼š</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> networking.k8s.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Ingress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">higress.io/destination</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> httpbin.dns</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">higress.io/ignore-path-case</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;false&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> route</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">foo</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">bar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ingressClassName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">rules</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> foo.bar.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">paths</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">backend</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">resource</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">apiGroup</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> networking.higress.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> McpBridge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">pathType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Prefix</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="è¯·æ±‚éªŒè¯">è¯·æ±‚éªŒè¯<a href="#è¯·æ±‚éªŒè¯" class="hash-link" aria-label="è¯·æ±‚éªŒè¯çš„ç›´æ¥é“¾æ¥" title="è¯·æ±‚éªŒè¯çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> http://localhost/get?foo</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">bar -H </span><span class="token string" style="color:#e3116c">&#x27;Host: foo.bar.com&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¯·æ±‚åº”è¿”å›ä¸€æ®µåŒ…å«è¯·æ±‚ä¿¡æ¯çš„ JSON æ•°æ®ï¼š</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;args&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;foo&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;bar&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;headers&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;Accept&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;*/*&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;Host&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;foo.bar.com&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;Original-Host&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;foo.bar.com&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;Req-Start-Time&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1693049173053&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;User-Agent&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;curl/8.1.2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;X-Amzn-Trace-Id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Root=1-11111111-111111111111111111111111&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;X-B3-Sampled&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;X-B3-Spanid&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2222222222222222&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;X-B3-Traceid&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;33333333333333333333333333333333&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;X-Envoy-Attempt-Count&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;X-Envoy-Decorator-Operation&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;httpbin.dns:80/*&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;X-Envoy-Internal&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;true&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;origin&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;192.168.16.1, 123.123.123.123&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;url&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;http://foo.bar.com/get?foo=bar&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å·²çŸ¥é—®é¢˜">å·²çŸ¥é—®é¢˜<a href="#å·²çŸ¥é—®é¢˜" class="hash-link" aria-label="å·²çŸ¥é—®é¢˜çš„ç›´æ¥é“¾æ¥" title="å·²çŸ¥é—®é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>åœ¨ Windows æ“ä½œç³»ç»Ÿä¸­ï¼Œç›´æ¥ä¿®æ”¹æŒ‚è½½åˆ° Docker å®¹å™¨ä¸­çš„æœ¬åœ°æ–‡ä»¶åï¼Œå®¹å™¨å†…çš„è¿›ç¨‹æ— æ³•æ”¶åˆ°é€šçŸ¥ï¼ˆè¯¦æƒ…è¯·æŸ¥çœ‹ <a href="https://github.com/fsnotify/fsnotify/issues/292" target="_blank" rel="noopener noreferrer">fsnotify/fsnotify #292</a>ï¼‰ã€‚å¦‚æœè¦ä½¿ç”¨æ–‡ä»¶æ¥ä¿å­˜é…ç½®æ•°æ®çš„è¯ï¼Œåœ¨ç›´æ¥ä¿®æ”¹é…ç½®æ–‡ä»¶åï¼ŒHigress æ— æ³•ç«‹å³åŠ è½½åˆ°æ–°çš„é…ç½®ã€‚å¦‚æœéœ€è¦åœ¨ Windows ä¸Šç‹¬ç«‹éƒ¨ç½² Higress ç½‘å…³ï¼Œå¯ä»¥è€ƒè™‘é€šè¿‡ Higress Console æ¥ç®¡ç†é…ç½®ä¿¡æ¯ï¼Œæˆ–ä½¿ç”¨ Nacos ä¿å­˜ç½‘å…³é…ç½®ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å‚è€ƒæ–‡æ¡£">å‚è€ƒæ–‡æ¡£<a href="#å‚è€ƒæ–‡æ¡£" class="hash-link" aria-label="å‚è€ƒæ–‡æ¡£çš„ç›´æ¥é“¾æ¥" title="å‚è€ƒæ–‡æ¡£çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>æ›´å¤šç›¸å…³ä¿¡æ¯ä¸ Higress çš„å…¶ä»–éƒ¨ç½²æ–¹å¼å¯æŸ¥é˜…ä»¥ä¸‹æ–‡æ¡£ï¼š</p><ul><li><a href="/docs/user/quickstart">å¿«é€Ÿå¼€å§‹</a></li><li><a href="/docs/ops/deploy-by-helm">ä½¿ç”¨ Helm è¿›è¡Œäº‘åŸç”Ÿéƒ¨ç½²</a></li><li><a href="/docs/ops/deploy-by-docker-compose">åŸºäº Docker Compose è¿›è¡Œç‹¬ç«‹éƒ¨ç½²</a></li></ul></div><footer class="row docusaurus-mt-lg"></footer></article><nav class="pagination-nav" aria-label="åšæ–‡åˆ—è¡¨åˆ†é¡µå¯¼èˆª"><a class="pagination-nav__link pagination-nav__link--next" href="/zh-cn/blog/page/2"><div class="pagination-nav__label">è¾ƒæ—§çš„åšæ–‡</div></a></nav></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">æ„¿æ™¯</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/zh-cn/">ä¸ºç”¨æˆ·æä¾›ä¸€ç«™å¼äº‘åŸç”Ÿç½‘å…³è§£å†³æ–¹æ¡ˆ.</a></li></ul></div><div class="col footer__col"><div class="footer__title">æ–‡æ¡£</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/zh-cn/docs/overview/what-is-higress">Higressæ˜¯ä»€ä¹ˆ?</a></li><li class="footer__item"><a class="footer__link-item" href="/zh-cn/docs/user/quickstart">å¿«é€Ÿå¼€å§‹</a></li><li class="footer__item"><a href="https://github.com/higress-group/higress-group.github.io/issues/new" target="_blank" rel="noopener noreferrer" class="footer__link-item">æŠ¥å‘Šæ–‡æ¡£é—®é¢˜<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/higress-group/higress-group.github.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">åœ¨GitHubä¸Šç¼–è¾‘æ­¤æ–‡æ¡£<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">èµ„æº</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/zh-cn/blog">åšå®¢</a></li><li class="footer__item"><a class="footer__link-item" href="/zh-cn/community">ç¤¾åŒº</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="//img.alicdn.com/imgextra/i2/O1CN01oNTGgE1lfW7oEPIzP_!!6000000004846-2-tps-960-290.png" class="themedImage_ToTc themedImage--light_HNdA footer__logo" width="120" height="36"><img src="//img.alicdn.com/imgextra/i2/O1CN01oNTGgE1lfW7oEPIzP_!!6000000004846-2-tps-960-290.png" class="themedImage_ToTc themedImage--dark_i4oU footer__logo" width="120" height="36"></div><div class="footer__copyright">Copyright Â© 2023 Higress<br>æµ™å…¬ç½‘å®‰å¤‡ 33011002016922å· æµ™ICPå¤‡12022327å·-1119</div></div></div></footer></div>
<script src="/zh-cn/assets/js/runtime~main.08db1247.js"></script>
<script src="/zh-cn/assets/js/main.7c0a88af.js"></script>
</body>
</html>