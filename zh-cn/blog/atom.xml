<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://higress.io/zh-cn/blog</id>
    <title>Higress Blog</title>
    <updated>2023-03-30T00:00:00.000Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://higress.io/zh-cn/blog"/>
    <subtitle>Higress Blog</subtitle>
    <icon>https://higress.io/zh-cn/img/higress_logo_small.png</icon>
    <entry>
        <title type="html"><![CDATA[UUè·‘è…¿åŸºäºHigressçš„äº‘åŸç”Ÿç½‘å…³å®è·µ]]></title>
        <id>https://higress.io/zh-cn/blog/user-uu</id>
        <link href="https://higress.io/zh-cn/blog/user-uu"/>
        <updated>2023-03-30T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[ä»‹ç»UUè·‘è…¿çš„äº‘åŸç”Ÿç½‘å…³æ¢ç´¢ä¹‹è·¯]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="uuè·‘è…¿ä»‹ç»">UUè·‘è…¿ä»‹ç»<a href="#uuè·‘è…¿ä»‹ç»" class="hash-link" aria-label="UUè·‘è…¿ä»‹ç»çš„ç›´æ¥é“¾æ¥" title="UUè·‘è…¿ä»‹ç»çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>UUè·‘è…¿éš¶å±äºéƒ‘å·æ—¶ç©ºéš§é“ä¿¡æ¯æŠ€æœ¯æœ‰é™å…¬å¸ï¼Œæ˜¯æ›´ä¸“ä¸šçš„åŒåŸå³æ—¶ç”Ÿæ´»æœåŠ¡å¹³å°ï¼Œä»¥å…±äº«åŠ³åŠ¨åŠ›ä¸æ—¶é—´ä¸ºä¼—åŒ…ç†å¿µï¼Œäººäººéƒ½å¯æ³¨å†Œæˆä¸ºè·‘è…¿å¸ˆå‚…ï¼Œå¹¶ä¸ºé™„è¿‘çš„äººæä¾›å¸®å–é€ã€å¸®ä¹°ã€å…¨èƒ½å¸®ã€å¸®æ’é˜Ÿç­‰å¤šæ ·åŒ–åŒåŸå³æ—¶æœåŠ¡ï¼Œä¸ºä¸­å°ä¼ä¸šã€ç”µå•†ã€æœ¬åœ°å•†æˆ·æä¾›å®‰å…¨ä¸“ä¸šçš„é«˜ç«¯é…é€æœåŠ¡ã€‚UUè·‘è…¿ç§‰æ‰¿â€œè®©ç”Ÿæ´»æ›´ç¾å¥½â€çš„ç†å¿µï¼Œä¸æ–­åˆ›æ–°ã€ä¸æ–­è¿›æ­¥ï¼Œä¸ºç”¨æˆ·æä¾›æ›´åŠ ä¼˜è´¨çš„æœåŠ¡ä½“éªŒã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="èƒŒæ™¯éœ€æ±‚">èƒŒæ™¯éœ€æ±‚<a href="#èƒŒæ™¯éœ€æ±‚" class="hash-link" aria-label="èƒŒæ™¯éœ€æ±‚çš„ç›´æ¥é“¾æ¥" title="èƒŒæ™¯éœ€æ±‚çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>UUè·‘è…¿å¯¹äºäº‘åŸç”Ÿç½‘å…³çš„è¦æ±‚æ˜¯ï¼Œèƒ½åŒæ—¶æ»¡è¶³æµé‡ç½‘å…³ï¼Œå¾®æœåŠ¡ç½‘å…³ï¼Œä»¥åŠå®‰å…¨ç½‘å…³çš„åœºæ™¯è¯‰æ±‚ï¼Œç”¨ä¸€ä¸ªç½‘å…³æ¥è§£å†³ä¹‹å‰éœ€è¦éƒ¨ç½²å¤šä¸ªç½‘å…³æ‰èƒ½è§£å†³çš„é—®é¢˜ï¼š</p><ol><li>å…·å¤‡é«˜å¯é æ€§å’Œé«˜æ€§èƒ½ï¼Œå¯ä»¥æ›¿ä»£ä¹‹å‰éƒ¨ç½²çš„ <strong>Nginx Ingress æµé‡ç½‘å…³</strong></li><li>åŒæ—¶æ”¯æŒ K8s ç”Ÿæ€å’Œä¼ ç»Ÿå¾®æœåŠ¡ç”Ÿæ€æ¥å…¥ï¼Œæ”¯æŒï¼ˆHTTPè½¬Dubboï¼‰åè®®è½¬æ¢ï¼Œå¯ä»¥æ›¿ä»£ä¹‹å‰éƒ¨ç½²çš„ <strong>Spring Cloud Gateway å¾®æœåŠ¡ç½‘å…³</strong></li><li>èƒ½å¤Ÿæ”¯æŒåœ¨ç½‘å…³å…¥å£å¤„å®Œæˆé‰´æƒï¼Œé¿å…æ¯ä¸ªåç«¯æœåŠ¡é‡å¤å®ç°é‰´æƒåŠŸèƒ½ï¼Œå®ç°<strong>å®‰å…¨ç½‘å…³</strong>çš„èƒ½åŠ›</li><li>å…·å¤‡æ˜“ç”¨çš„æ§åˆ¶å°è¿›è¡Œ API çš„æ²»ç†ï¼Œä»¥åŠå…·å¤‡ä¸°å¯Œçš„å¯è§‚æµ‹æŒ‡æ ‡</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="è¿ç§»-higress-å‰çš„æ¶æ„">è¿ç§» Higress å‰çš„æ¶æ„<a href="#è¿ç§»-higress-å‰çš„æ¶æ„" class="hash-link" aria-label="è¿ç§» Higress å‰çš„æ¶æ„çš„ç›´æ¥é“¾æ¥" title="è¿ç§» Higress å‰çš„æ¶æ„çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i1/O1CN016p6RZz21KwDVA9Gz5_!!6000000006967-2-tps-1014-431.png" alt="old-arch" class="img_ev3q"></p><p>ä¹‹å‰å­˜åœ¨çš„ä¸»è¦ç—›ç‚¹ï¼š</p><ol><li>Spring Cloud Gateway éœ€è¦è‡ªèº«å‚æ•°è°ƒæ•´æ”¹åŠ¨éœ€è¦é‡æ–°éƒ¨ç½²å½±å“æµé‡ï¼Œä¸”åŠ¨æ€è·¯ç”±éœ€è¦è¿›è¡Œå¤æ‚çš„é…ç½®ï¼ŒåŒ…æ‹¬è·¯ç”±è§„åˆ™ï¼Œå®¹æ˜“å‡ºç°é…ç½®é”™è¯¯å¯¼è‡´ç³»ç»Ÿå¼‚å¸¸</li><li>è¿ç»´éœ€è¦åŒæ—¶ç»´æŠ¤ Nginx Igress å’Œ Spring Cloud Gatewayï¼Œé¢å¯¹æµé‡é«˜å³°è¿›è¡Œè¿›è¡Œæ‰©å®¹ç›¸å…³æ“ä½œæ—¶ï¼Œè¿ç»´è´Ÿæ‹…æ¯”è¾ƒé‡ï¼Œè€Œä¸”è¿™æ ·ä¸¤å±‚ç½‘å…³çš„è¯·æ±‚çš„é“¾è·¯è¾ƒé•¿ï¼Œå¯ç”¨æ€§ä½ã€æˆæœ¬é«˜</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="è¿ç§»-higress-åçš„æ¶æ„">è¿ç§» Higress åçš„æ¶æ„<a href="#è¿ç§»-higress-åçš„æ¶æ„" class="hash-link" aria-label="è¿ç§» Higress åçš„æ¶æ„çš„ç›´æ¥é“¾æ¥" title="è¿ç§» Higress åçš„æ¶æ„çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i3/O1CN01tCWvwN22sCbD7DmqA_!!6000000007175-2-tps-1014-420.png" alt="new-arch" class="img_ev3q"></p><p>Higressäº‘åŸç”Ÿç½‘å…³å®ç°è´Ÿè½½å‡è¡¡ã€è·¯ç”±ã€å®‰å…¨è®¤è¯ç­‰åŠŸèƒ½ã€‚é€šè¿‡ç½‘å…³å¯¹å¤–æä¾›æœåŠ¡ç»Ÿä¸€å…¥å£ï¼Œå¹¶å¯¹è¯·æ±‚è¿›è¡Œé‰´æƒã€é™æµå’Œç›‘æ§ç­‰æ“ä½œï¼Œç”¨ç®€å•çš„æ¶æ„ä¿è¯äº†æ•´ä½“ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚</p><ol><li>åˆå¹¶æµé‡ç½‘å…³ï¼ˆK8s Nginx Ingressï¼‰å’Œå¾®æœåŠ¡ï¼ˆSpring Cloud Gateway ï¼‰ï¼Œé™ä½ç½‘å…³æˆæœ¬ï¼Œé«˜æ€§èƒ½æœåŠ¡ï¼›</li><li>åŒæ—¶æ”¯æŒ K8s service å’Œ Nacos æœåŠ¡æ³¨å†Œå‘ç°ï¼Œæ»¡è¶³æŠ€æœ¯éœ€æ±‚å¯¹ K8s ç”Ÿæ€å’Œä¼ ç»Ÿå¾®æœåŠ¡ç”Ÿæ€æ¥å…¥ã€‚</li><li>Nginx Ingress å®Œç¾è¿ç§»åˆ° Higressï¼Œååˆ†ä¸æ»‘</li></ol>]]></content>
        <author>
            <name>ç‹å¾·å†²</name>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Higress 0.7.0 ç‰ˆæœ¬å‘å¸ƒï¼šGA è¿›å…¥å€’è®¡æ—¶]]></title>
        <id>https://higress.io/zh-cn/blog/release-070</id>
        <link href="https://higress.io/zh-cn/blog/release-070"/>
        <updated>2023-03-20T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Higress 0.7.0 ç‰ˆæœ¬ä»‹ç»]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="è¿›å±•æ¦‚è¦">è¿›å±•æ¦‚è¦<a href="#è¿›å±•æ¦‚è¦" class="hash-link" aria-label="è¿›å±•æ¦‚è¦çš„ç›´æ¥é“¾æ¥" title="è¿›å±•æ¦‚è¦çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ol><li>Higress æ§åˆ¶å°æ­£å¼ releaseï¼Œæ¶µç›– Higress çš„æœåŠ¡/è·¯ç”±/åŸŸå/è¯ä¹¦ç®¡ç†èƒ½åŠ›ï¼Œå¹¶æä¾›å¼€ç®±å³ç”¨çš„å¯è§‚æµ‹åŠŸèƒ½</li><li>å®‰è£…/å‡çº§ Higress æ—¶æ”¯æŒè‡ªåŠ¨å®‰è£…å¯¹åº”ç‰ˆæœ¬çš„ Higress Consoleï¼Œé¿å…ç‰ˆæœ¬ä¸é€‚é…çš„é—®é¢˜</li><li>æ”¯æŒå¼€å¯ Istio APIï¼Œå®ç°æ›´å¤šå¤æ‚çš„åŠŸèƒ½ï¼Œå¹¶ä¸”ä¹Ÿå¯ä»¥ç”¨äºå¹³æ»‘æ›¿æ¢ Istio Ingress Gateway</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç‰ˆæœ¬ç‰¹æ€§">ç‰ˆæœ¬ç‰¹æ€§<a href="#ç‰ˆæœ¬ç‰¹æ€§" class="hash-link" aria-label="ç‰ˆæœ¬ç‰¹æ€§çš„ç›´æ¥é“¾æ¥" title="ç‰ˆæœ¬ç‰¹æ€§çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="higress-æ§åˆ¶å°">Higress æ§åˆ¶å°<a href="#higress-æ§åˆ¶å°" class="hash-link" aria-label="Higress æ§åˆ¶å°çš„ç›´æ¥é“¾æ¥" title="Higress æ§åˆ¶å°çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ç°åœ¨é€šè¿‡ helm å‘½ä»¤å®‰è£… Higress æ—¶å°†è‡ªåŠ¨å®‰è£…å¯¹åº”ç‰ˆæœ¬çš„ Higress Console, è¿™é‡Œé€šè¿‡ <code>higress-console.domain</code> å‚æ•°ï¼Œå¯ä»¥æŒ‡å®šæ§åˆ¶å°çš„åŸŸåã€‚</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># å·²ç»æ·»åŠ è¿‡ repo çš„ï¼Œè¯·æ‰§è¡Œ helm repo update</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm repo </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> higress.io https://higress.io/helm-charts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> higress -n higress-system higress.io/higress --create-namespace --render-subchart-notes --set higress-console.domain</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">console.higress.io</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="image" src="/zh-cn/assets/images/console-credentials-3f846851a9dfeed79cf5e782173eb20a.png" width="1240" height="250" class="img_ev3q"></p><p>æ³¨æ„ï¼šå®‰è£…å®Œæˆåä¼šè¾“å‡ºä¸€æ®µæ–‡æœ¬ï¼Œå…¶ä¸­åŒ…å«è·å–æ§åˆ¶å°ç™»å½•ä¿¡æ¯çš„å‘½ä»¤ã€‚è¯·æ‰§è¡Œè¯¥å‘½ä»¤å¹¶è®°å½•ç”¨æˆ·åå’Œå¯†ç ã€‚</p><p><img loading="lazy" alt="image" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfQAAAFeCAMAAABEjx0wAAAABGdBTUEAALGPC/xhBQAAAwBQTFRF0tTyFs78b5+fn9fvt29vb7fg8Pf3n59vJydvb5+3J5+36dX/kr3/xc3VerL/Jm3+O2n/gJ//YXL/QYn+P3r/1eHVsMr/zcW/H37+159vGzH/RaD/z9P/1+/v7+/h1tja9PT1zb/N1cXFyZ8nuL7/r7X/JZD+RqD+//f3xbvfkqv/F4nv8PP+fcD98ODtFrn5rL//wsnVe37fK3z+El7+d6H/FUT/JFX/PJn+e979xdHhj5OZX2VtbIX/rK3/Tk5OXaz+QkJCd3d3QUFB0eT0orj+YJ3/3uX//+zyyen/oKCgfOL/nydv//j9DUD/Fm/+hLD/4dnN2dLgFbb3uNP/gIOKxb/Fio2T0Ob/FX7wSlz/YmZvQkhSoKf/3N3f5fD/GNX+EVL/FX7tqqyxgoWMfY//zb/FkJ3/b2+39/j/BB3/nycnFYL4Jyef2tX/FYv/t+//F4nfeoT+xsD+MJz/XGBpo6arDDX/2tvdtsL/V1xlvN3+pqmun6KnZ2t0P53+1NTUvL7C+vv/+fz/3d7gqO3/19nbLZj+aWlp9/f38OP/UldgsLCwsbO3LU//bycn5ufolJSUTFJc6+zthYWFra2tT09Pl5qfysvOByr//+3/0NLUByX/7/Dwqamp///XxsbGb3N7qI//xfj/GJD34eLjh8L+am93GMD/2f//5OTlw8XIRkxWxb+/zKv/uru8b7fv158nvcP/1Nj//++3J5/X77dvr+r/XV1dPUNOt7e3wMDFg4eN4c2//+r/8P//YJD/jIyMOkBLNjxHen6F/Pz81tbXt28noqKizP//mp2iGJ3/+vr6xb/N1e//zc7OYL3/GKv/8/Pz6f//zb+/kpD/r53/XFxcHoz+/v7+J2+3/9efv83hMzMzk5OT+Pj46erq6b3/NDpFn9f/BBj//9X/xdXvv7/N///hkpKSktX/1cW/8fHyzeH/3t7e/+/V/+HNv8XV79XF///v4f//FX7fJiYm7///yMnJJycnMzlEv7+/9PT02dnZGJD/////t6OdDwAADKFJREFUeNrt3QlUFdcBgOF03/d939vsS7Pve6NJs5mk2Rej1qYxJsa41KrRVhrXuAsGJRikihCBRFEQg/AEwaQB06ABhceixOWpBOLjOSTc3ntn3kaqx0bSw9z5/3OUefPgHA7fu3fuDIc3JwhydzX/+5ecwE/Ne4EOOoFOoBPoBDqBTqAT6AQ6gU6gE+gEOoFOoBPoBDroBDqBTqAT6AQ6gU6gE+gEOoFOoBPoBDp5EX3RqL/oj3//za//KcQjv3qpBmPj0f+80EF/+i2Jfv/Onb/E2GPog3fuvAxjj6GfOvj+RzD2GDp5Av37CwdfcPbZ37z2uh8o9EdeflmN9NJJ6yZOem3FA4uFaHigoWFiaK7cl56ZnTxXf03ppIkDkuzNWZkDMlfUgO6uvr7wvC/ffPM5/c+79hmJ/tLOnS/Ld1pb1mRZTXPGNG0WYmPTnBLLulMItc8qWae+ZqPeTJZb43xyy5cIurs6d+Gor95yy4b+N406N4I+0LLGb14iZRW6ZeUvK5lUs9FqWpI4zfKVCRFq8hWOG2PlzxLiPuuSkcssKxN0V/X0pTfd1P8r37jl/FHP7nfQ38i3Li4VpeOabPT80WKxmFViXSzEeyOsQiE2W1kBsXjMmGyx2GqaJUoHjkkE3VW9dcHXzu9/zs3f/faoRS856DOsLP3UNBt9idrOtKyNhYWF461pQiT5rDmJSXPVkTzLyi9cN6uU6d1l6G/9VTx4++233/XsokEO+p3WCP3UMhu9UG2PtZxK1JFcbw2U6kklamvaYtBdh67627OLnnTQE9Vwlt0bgz7Dyv+HbrR61JA8coRljZNbb5TNkAf/JaC7HT3ZKpmkzsbyY9BH+6wk+SF580hRMyBxRo0oHSGpsxPHyp0DLB/obkeXB/P8zPSkLCsG/adzrDmV6Zkl6tFGyzcyeZ3PGigmNll3VCbda80B3fXooSZ90PbFoIsGn71PHr5Ls/Rm00/UYV83A3RXdcUVd9nol95zvxA/vOee6+SDdHklZvzoSxT6uGVj7U9Mv1OesW/WS7a5Y/Mt38AVcmvKxCyr6d7KGtBd33tviBrpOMIaG7e7tDSCWxO7af4PxAvoWT51tdV/n5UsyCvoS+RVuCmB8c41GvIEevp9li+/xPz1GeixrbgjqyR/fCbaXkIn0EHnRwA6gU6gE+gEOoFOoBPoBDqBTqAT6AQ6gU6gE+gEOugEOoFOoB81/4H36bg78Jqr0A8EGE/HX+CAq9DfR6wX/xhBBx100EEHHXTQQQcddNAJdAKdQCcT0UMLgsEFIRi9hJ4dnJydPTmYffSv2v3m/tiHreteB9296IG6eerDvLpA1Lcz2jsdzt62WOaDL7Yw0l2MHgpq7UAwFD+oWzV3m/y/fV/Mi6DFNg8/9O6AdzX69UH7Y/D6I6NHZvb2fS3afAcD3tXoZfYQDwXLjhW9rbOlVau3de5nenfnQu7yBfLt1FcsuFwc6ZjeDb317XfFj/e907H7TbkBujvRy+rq1q6tqysTxzy96w3n8A66K1fv84J127bVBecFjn0hpyaDHazeXYseWFA3X32cX7cgrL77j6/HocecotsjvS36GvDuDO9m9KvC83pZ3VWRk/D4Y7r9Ioi0vrOlLTzMD/4LdPehlwXnhzfnB1fYG616+EZH+gdlQXc1+p6ro9tX73GGsuaOordFrsqBbgT6tm0x25Od2V0fwh30HdEVO+jmnLIdQVSiqwXbfme2j/8UFnKG/z59/X7BSPcaOoFOoIMOOuiggw466KCDDjrooIPeg/FGQz2Ry95oiLcU8+BbilFvDnTQCXQCnUAn0Al0Ap1AJ9AJdAKdQCfQCXQCnUAn0EEn0Al0Ap1AJ9D5Ywfun04fKu6f7sX4q1XQQQcddNBBBx100EEHHXTQQQcddNA/7HcbCMm4Nusp9MlB3WQcj54/pcEY9Pl12WqkZ9fNj9u9+80WnG3syoKUlOkTAuX15qDvcW7ds21P/P628O1ZWvXNWi5ybsPouVvqVs6un56aWlBfHG9uGHrcvfj0DdKjN1tt/7nX7pdeUJzqF4GAv7w+PdVkdH0znoMX2bO8uvui3qP/2/0zj92op7J+gvCXFxfPrm9oKK40eHpv37ejbUefW99+V27YM736cPCsjvDN2rxTYLaETimwj+eVswNmoJetvVLeSFtVd+Va566rreteV8xymt/f3k/E3XC3zWP3Ui4oF6KhWM7tDXJDlBeYgR4K7okUDEXW7W1n7VNH8/Vf+o6kXq9vuqe8Y+6k7h10f3G5mtuNQtezmJ63HHR9d3R9e3R1D+31La1SXB7Qw3dd9BR7oL5S+NXxPKVTHd/9JqHbd1x10A++qMZ4+D7a8g6MlRo9/Hrw1livLB4t1+3lxdP9YoIxCzkbfd68GPRbu6/VWmPQD/7BY+dsBer8POAX/tTiTmEUeigUN73r1rfEod9qn7V/y2Po6vx8ekFq6vTZ8tzNHPRQpDC6vVzT6PqOyh4e6Wrd7p8wPSWloNIvDEKP6UjoMbfMbvPYvbM7G47xcoerLs6URUd6WeTiTGfc/dEjI12t7vg1jAHoR6/17Xfh9Ro6gU6ggw466KCDDjrooIMOOuigg97D8UZDPZHL3mjoNd5SjPunU28KdNAJdAKdQCfQCXQCnUAn0Al0Ap1AJ9AJdAKdQCfQQSfQCXQCnUAn0Al0Ap2MRPcf+H/8TRb1KvT4v1r9qP76knoV+vtHe5i7uttnr/qTelPo5x89LPvEpmaxvbYj/FC12pQfdvUaZ2NrhdjVZffqv51dW+yPev+rg/VzVYagbz8cqVm0b7JNbXT99GMZ8jNqF8e+M/h2Y9B3hYV3dVVEd4X5dXuFeOV3zmc17jUFvdbxbJcjOn6kr5rZvF2+EkRujtp0XhGGjPSVsbCSvrEqBl2/FE6W2hvWrJTO6jkNv3WNuejO4M9RzNfb249lGDfSV+494uCX2NV9vyBfDRWaWR0ENHp1hYnTe+wrQY7vXMe6fZN8nHc4ptoOo9C3Sl/RGBn21VXSt7przSsb+m5YIxrVwN+1xf5n4Eh3XgHNGv1Tm3Ii0B+f6XxanjHH8/iRLgexPcPruV1N/hX2VL/llQ3qyN4YOcIbOL3bR3NJqx/m5djP6Y/6M/PU4A/vNuSoXhWLrp/Z66zllfHKk7eIrQ72VlPQ46f3XD3H5+b8F3SR99kn5CQvZ/3aHxky2qOIsejdajQQPW6ky4Eudzz/+ycc9PDrwcZf9blPfubzm8w4TW/cog7RW6vkqq0iDl3O6XqXfqiUFfoXN+gpodpI9O89sWrm4WZ1seb5R5vDC/XIuj73cHPeavsJtycX6M66rPpMdfiurrhseFV4YH8QfW+3izkmTe9SvLZj1Ux13FajXTnXdrRvWu2Q5zhH+7gTOJdO7FXOYlwv1iRn15pG+0WwUg3+2GszjZEFnHylmHqerrjz1FlZbtxJ2i9y9IVYvdqbWWvCfZarowty++w87jJs5CAeHuny0z+qczZ+4eLB+NUq6AQ6gU6gE+gEOoFOoBPoBDqBTqAT6AQ6gU6gE+igE+gEOoFOoBPoBDqBTqAT6ORS9Aef6qLj7qkHXYWOec+ouwodr54JdNBBBx100EEHHXTQQQcddNBBBx100EEH3XXoh+S/YaB7A33pIdXdXRlDuw4lDA3vPeVQpMdBNw59eZH+xoYn9Lk747nThjh7b4h+y8+Bbt5Il85LE24cJPGHLr2t6IXuz98AuoEj/dNPLv2YkNYJfU65rWhq3KSvuhB0A9H71lxbdJLUfTjtVDG026TP9G7o6n3YDWJ4mvrepmb0G/LBp5neDUR/OO3G3zozudp8PH5yl9N7H7m0B90s9IyhD0W+u5ozi57rNrnbS3vQTbs489CNg8IH8sjafZg6P19eJJ8Z1itP1EE/XvQTnfk95oQtQS7ghi0v6tvvUEKvXMmBfrzo0W8vgn5alzzCX1f0QpqY2rV8EOgGXnvPUNhLL5wac212SIYYqqb7tNPv7mKkm4iecKIczGdErsx0LT2jSAx3pvsEcdIQ0A1DH6bP1frJf6dHfr3ykFyvqxW8/SpIEy+AbhZ6Wvw3OLXLFYHuwUAHHXTQQQcddNBBBx100EEHHXTQP1TP4NUTPeMq9GtQ7wnza1yFPuU96oGmuAq9FPWeMC91FTr1RDUCdAKdQCfQCXQCHXQCnUAn0Al0Ap1AJ9AJdAKdQCfQCXQCnUAn0Al00PkRgE6gE+gEOoFOoBPoBDqBTqAT6AQ6gU6gE+gEOoEOOoFOoBPoBDqBTqAT6AQ6gU6gE+gEOoFOx9B/ACrRkgiipIxYAAAAAElFTkSuQmCC" width="500" height="350" class="img_ev3q"></p><p>æ­£å¼ç¯å¢ƒéƒ¨ç½²æ—¶ï¼Œå»ºè®®æ§åˆ¶å°å¼€å¯å¼ºåˆ¶ HTTPS è®¿é—®ï¼Œå…·ä½“æ“ä½œæ–¹å¼æ˜¯ï¼Œåœ¨ higress-system å‘½åç©ºé—´ä¸‹å…ˆåˆ›å»ºå¥½ TLS è¯ä¹¦å’Œç§é’¥å¯¹åº”çš„ secretï¼Œä¾‹å¦‚ï¼š</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Secret</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kubernetes.io/tls</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">tls.crt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">---</span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">BEGIN CERTIFICATE</span><span class="token punctuation" style="color:#393A34">---</span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">tls.key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">---</span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">BEGIN RSA PRIVATE KEY</span><span class="token punctuation" style="color:#393A34">---</span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">tls</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">secret</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç„¶åé€šè¿‡ä¸‹é¢ helm å‘½ä»¤å¼€å¯å¼ºåˆ¶ HTTPS è®¿é—®</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">helm upgrade higress -n higress-system higress.io/higress --set higress-console.tlsSecretName</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">my-tls-secret</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¦‚æœå¸Œæœ›å¯ç”¨ Higress è‡ªå¸¦çš„ Prometheus&amp;Grafanaï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢ helm å‘½ä»¤è¿›è¡Œå®‰è£…ï¼š</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">helm upgrade higress -n higress-system higress.io/higress --set higress-console.o11y.enabled</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¿™æ · Higress æ§åˆ¶å°å°±å¯ä»¥çœ‹åˆ°è‡ªå¸¦çš„å¯è§‚æµ‹å¤§ç›˜äº†ï¼š</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i3/O1CN01bUCXjy275GLq7ralt_!!6000000007745-0-tps-3532-2022.jpg" alt="image" class="img_ev3q"></p><p>å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥å¯¹æ¥å·²æœ‰çš„ Prometheus&amp;Grafanaï¼Œä½¿ç”¨è¿™ä»½ Higress å®˜æ–¹æä¾›çš„ Dashboard é…ç½®å³å¯ï¼š<a href="https://higress.io/grafana/dashboard.json" target="_blank" rel="noopener noreferrer">https://higress.io/grafana/dashboard.json</a></p><p>å¯ä»¥ç™»é™† Higress æ§åˆ¶å° Demo è¯•ç”¨ç°æœ‰æ‰€æœ‰åŠŸèƒ½: <a href="http://demo.higress.io" target="_blank" rel="noopener noreferrer">http://demo.higress.io</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å¼€å¯-istio-api">å¼€å¯ Istio API<a href="#å¼€å¯-istio-api" class="hash-link" aria-label="å¼€å¯ Istio APIçš„ç›´æ¥é“¾æ¥" title="å¼€å¯ Istio APIçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>é€šè¿‡å¼€å¯ Istio APIï¼Œå¯ä»¥å®ç°ä½¿ç”¨ Higress å¹³æ»‘æ›¿æ¢ Istio Ingress Gatewayï¼Œå…·ä½“ helm å‘½ä»¤å¦‚ä¸‹ï¼š</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">helm upgrade higress -n higress-system higress.io/higress --set global.enableIstioAPI</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åŸºäº Istio APIï¼Œå¯ä»¥å®ç°ç›®å‰ Higress è¿˜æœªæä¾›ç›¸åº” Ingress æ³¨è§£çš„èƒ½åŠ›ï¼Œä¾‹å¦‚åŸºäº Istio EnvoyFilter æ¥å®ç° HTTP to Dubbo çš„åè®®è½¬æ¢é…ç½®æ–¹å¼ï¼š</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> networking.istio.io/v1alpha3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> EnvoyFilter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> http</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">dubbo</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">transcoder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">configPatches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">applyTo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> HTTP_FILTER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">match</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">context</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> GATEWAY</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">listener</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">filterChain</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">filter</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> envoy.filters.network.http_connection_manager</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">subFilter</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> envoy.filters.http.router</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">patch</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">operation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> INSERT_BEFORE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> envoy.filters.http.http_dubbo_transcoder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">typed_config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">'@type'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> type.googleapis.com/udpa.type.v1.TypedStruct</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">type_url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> type.googleapis.com/envoy.extensions.filters.http.http_dubbo_transcoder.v3.HttpDubboTranscoder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">applyTo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> HTTP_ROUTE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">match</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">context</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> GATEWAY</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">routeConfiguration</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">vhost</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">route</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">patch</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">operation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> MERGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">route</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">upgrade_configs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">connect_config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">allow_post</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">upgrade_type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> CONNECT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">typed_per_filter_config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">envoy.filters.http.http_dubbo_transcoder</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">'@type'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> type.googleapis.com/udpa.type.v1.TypedStruct</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">type_url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> type.googleapis.com/envoy.extensions.filters.http.http_dubbo_transcoder.v3.HttpDubboTranscoder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">request_validation_options</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token key atrule" style="color:#00a4db">reject_unknown_method</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token key atrule" style="color:#00a4db">reject_unknown_query_parameters</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">services_mapping</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">group</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> dev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token key atrule" style="color:#00a4db">method_mapping</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> sayName</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token key atrule" style="color:#00a4db">parameter_mapping</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">extract_key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> p</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token key atrule" style="color:#00a4db">extract_key_spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ALL_QUERY_PARAMETER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token key atrule" style="color:#00a4db">mapping_type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> java.lang.String</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token key atrule" style="color:#00a4db">passthrough_setting</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token key atrule" style="color:#00a4db">passthrough_all_headers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token key atrule" style="color:#00a4db">path_matcher</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token key atrule" style="color:#00a4db">match_http_method_spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ALL_GET</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token key atrule" style="color:#00a4db">match_pattern</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /dubbo/hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> com.alibaba.nacos.example.dubbo.service.DemoService</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 1.0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">url_unescape_spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ALL_CHARACTERS_EXCEPT_RESERVED</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¸Šè¿°é…ç½®æ¯”è¾ƒå¤æ‚ï¼ŒåŸå› æ˜¯ä¸ºäº†æ–¹ä¾¿ Envoy æ•°æ®é¢ç¨‹åºé€»è¾‘å¤„ç†è€Œè®¾è®¡çš„ Schemaã€‚ç›®å‰ Higress ç¤¾åŒºå·²ç»åœ¨è®¾è®¡æ›´æ–¹ä¾¿ Ingress é…ç½®ä½¿ç”¨çš„ CRDï¼Œåç»­ä¹Ÿä¼šåœ¨ Higress æ§åˆ¶å°ä¸Šæä¾›å¯¹åº”çš„é…ç½®åŠŸèƒ½ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ga-ç‰ˆæœ¬è§„åˆ’">GA ç‰ˆæœ¬è§„åˆ’<a href="#ga-ç‰ˆæœ¬è§„åˆ’" class="hash-link" aria-label="GA ç‰ˆæœ¬è§„åˆ’çš„ç›´æ¥é“¾æ¥" title="GA ç‰ˆæœ¬è§„åˆ’çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>Higress é¢„è®¡å°†åœ¨3æœˆåº•/4æœˆåˆå‘å¸ƒé¦–ä¸ª GA ç‰ˆæœ¬, è¿™ä¸ªç‰ˆæœ¬çš„ä¸»è¦è§„åˆ’å¦‚ä¸‹ï¼š</p><ol><li>å®ç° HTTP to Dubbo åè®®è½¬æ¢çš„æ§åˆ¶é¢é…ç½®ç®€åŒ–</li><li>Higress æ§åˆ¶å°æä¾› Wasm æ’ä»¶èƒ½åŠ›ï¼Œæ”¯æŒé…ç½®è‡ªå®šä¹‰æ’ä»¶</li><li>æ¨å‡ºç¬¬ä¸€ç‰ˆ Higress Admin APIï¼Œå¯ä»¥è¢«å…¶ä»–å¹³å°/å·¥å…·é›†æˆ</li><li>å…¨é¢å®Œå–„ Higress å®˜ç½‘æ–‡æ¡£ï¼Œè¦†ç›– Higress å…¨éƒ¨åŠŸèƒ½çš„è¯¦ç»†è¯´æ˜</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="higress-ç¤¾åŒº">Higress ç¤¾åŒº<a href="#higress-ç¤¾åŒº" class="hash-link" aria-label="Higress ç¤¾åŒºçš„ç›´æ¥é“¾æ¥" title="Higress ç¤¾åŒºçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>æ¬¢è¿è®¤é¢† Higress Issue ä»»åŠ¡ï¼š<a href="https://github.com/alibaba/higress/issues?q=is%3Aopen+is%3Aissue+label%3A%22help+wanted%22" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/higress/issues?q=is%3Aopen+is%3Aissue+label%3A%22help+wanted%22</a></p><p>å®Œæˆä¸€å®šæ•°é‡çš„ Issues å°±å¯ä»¥æˆä¸º Higress Committerï¼Œä¹Ÿæœ‰æœºä¼šè·å¾—å¼€æºç¤¾åŒºçš„ç¤¼ç‰©å’Œè£èª‰ğŸ†</p><p>æ¬¢è¿åŠ å…¥ Higress ç¤¾åŒºç¾¤ï¼ŒåŠæ—¶äº†è§£æ›´å¤š Higress åŠ¨å‘ï¼š</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i4/O1CN01xutJV11aSGvdgBHpC_!!6000000003328-0-tps-720-405.jpg" class="img_ev3q"></p>]]></content>
        <author>
            <name>æ¾„æ½­</name>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Higress + Nacos å¾®æœåŠ¡ç½‘å…³æœ€ä½³å®è·µ]]></title>
        <id>https://higress.io/zh-cn/blog/nacos</id>
        <link href="https://higress.io/zh-cn/blog/nacos"/>
        <updated>2023-01-10T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Higressï¼šNacosçš„æœ€ä½³æ‹æ¡£]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="å‰è¨€">å‰è¨€<a href="#å‰è¨€" class="hash-link" aria-label="å‰è¨€çš„ç›´æ¥é“¾æ¥" title="å‰è¨€çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>åœ¨å»å¹´11æœˆçš„äº‘æ –å¤§ä¼šä¸Šï¼Œæˆ‘ä»¬å¼€æºäº†äº‘åŸç”Ÿç½‘å…³ Higressï¼Œæ—¶éš”æ•°æœˆï¼ŒHigress çš„ Github é¡¹ç›®(<a href="https://github.com/alibaba/higress" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/higress</a>)å·²ç»æ”¶è·äº†è¿‘ 1k+ starï¼Œä»¥åŠå¤§é‡ç¤¾åŒºå°ä¼™ä¼´çš„å…³æ³¨ã€‚</p><p>åœ¨ç¤¾åŒºçš„äº¤æµä¸­æˆ‘ä»¬å‘ç°æœ‰ä¸å°‘å¾®æœåŠ¡å¼€å‘è€…åœ¨ä½¿ç”¨å¦‚ Spring Cloud Gateway/Zuul ç­‰å¾®æœåŠ¡ç½‘å…³å¯¹æ¥ Nacos æ³¨å†Œä¸­å¿ƒå®ç°å¾®æœåŠ¡çš„è·¯ç”±ï¼Œå¹¶ä¸”å¸Œæœ›äº†è§£è¿ç§»åˆ° Higress ç½‘å…³èƒ½å¸¦æ¥å“ªäº›å¥½å¤„ã€‚
æœ¬æ–‡å°†ä»‹ç» Higress ç»„åˆ Nacos ä½œä¸ºå¾®æœåŠ¡ç½‘å…³èƒ½åŠ›ï¼Œå¹¶ä»‹ç»å¾®æœåŠ¡ç½‘å…³å‘å±•çš„ä¸¤ä¸ªè¶‹åŠ¿ï¼Œä¸ºç½‘å…³çš„é€‰å‹æŒ‡æ˜é“è·¯ï¼š</p><ul><li>è¶‹åŠ¿ä¸€ï¼šç»Ÿä¸€ API æ ‡å‡†ï¼Œå‘äº‘åŸç”Ÿå¾®æœåŠ¡æ¶æ„æ¼”è¿›</li><li>è¶‹åŠ¿äºŒï¼šåˆå¹¶å®‰å…¨&amp;æµé‡ç½‘å…³ï¼Œå‘ DevSecOps æ¼”è¿›</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="higressnacosçš„æœ€ä½³æ‹æ¡£">Higressï¼šNacosçš„æœ€ä½³æ‹æ¡£<a href="#higressnacosçš„æœ€ä½³æ‹æ¡£" class="hash-link" aria-label="Higressï¼šNacosçš„æœ€ä½³æ‹æ¡£çš„ç›´æ¥é“¾æ¥" title="Higressï¼šNacosçš„æœ€ä½³æ‹æ¡£çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i2/O1CN01Ww9gDw1PwXJUlwwRy_!!6000000001905-2-tps-1200-475.png" alt="image.png" class="img_ev3q">
Higress å’Œ Nacos å…¶å®æ˜¯å¸ˆå‡ºåŒé—¨â€”â€”é˜¿é‡Œä¸­é—´ä»¶å›¢é˜Ÿã€‚åœ¨ Higress æ”¯æ’‘é˜¿é‡Œå†…éƒ¨ä¸šåŠ¡çš„é˜¶æ®µï¼ŒHigress å°±å·²ç»æ­é… Nacos ä½œä¸ºå¾®æœåŠ¡ç½‘å…³ä½¿ç”¨ï¼Œå‡­å€Ÿé«˜æ€§èƒ½æ”¯æ’‘äº†åŒåä¸€çš„æ´ªå³°æµé‡ï¼›åˆ°äº†äº‘äº§å“å•†ä¸šåŒ–é˜¶æ®µï¼ŒHigress å’Œ Nacos ç»§ç»­åŸºäºé˜¿é‡Œäº‘ MSEï¼ˆMicroservices Engineï¼‰äº§å“ï¼Œç´§å¯†åä½œæ¼”è¿›äº§å“åŠŸèƒ½ï¼›Higress å¼€æºä¹‹åï¼Œå¦‚æœæƒ³è¦è‡ªå»ºå¾®æœåŠ¡ç½‘å…³ï¼Œé€‰æ‹© Higress é…åˆ Nacos ä½¿ç”¨ï¼Œå…·å¤‡ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p><ol><li>å¯¹æ¯” Spring Cloud Gateway/Zuul ç­‰ä¼ ç»Ÿ Java å¾®æœåŠ¡ç½‘å…³æ€§èƒ½é«˜å‡º 2-4 å€ï¼Œå¯ä»¥æ˜¾è‘—é™ä½èµ„æºæˆæœ¬</li><li>ä½œä¸ºäº‘åŸç”Ÿç½‘å…³ï¼Œå®ç°äº† Ingress/Gateway API æ ‡å‡†ï¼Œå…¼å®¹ Nginx Ingress å¤§éƒ¨åˆ†æ³¨è§£ï¼Œæ”¯æŒä¸šåŠ¡æ¸è¿›å¼å‘åŸºäº K8s çš„å¾®æœåŠ¡æ¶æ„æ¼”è¿›</li><li>ä¸ Dubbo/OpenSergo/Sentinel ç­‰å¼€æºå¾®æœåŠ¡ç”Ÿæ€æ·±åº¦æ•´åˆï¼Œæä¾›æœ€ä½³å®è·µ</li></ol><p>è¿™é‡Œé»˜è®¤å·²ç»å®‰è£…å¥½ Higressï¼Œæ­é… Nacos ä½¿ç”¨çš„å…·ä½“æ–¹å¼å¦‚ä¸‹ï¼š</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="é…ç½®æœåŠ¡æ¥æº">é…ç½®æœåŠ¡æ¥æº<a href="#é…ç½®æœåŠ¡æ¥æº" class="hash-link" aria-label="é…ç½®æœåŠ¡æ¥æºçš„ç›´æ¥é“¾æ¥" title="é…ç½®æœåŠ¡æ¥æºçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> networking.higress.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> McpBridge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">registries</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># å®šä¹‰ä¸€ä¸ªåä¸º â€œproductionâ€ çš„æœåŠ¡æ¥æº</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> production</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># æ³¨å†Œä¸­å¿ƒç±»å‹æ˜¯ Nacos 2.xï¼Œæ”¯æŒ gRPC åè®®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nacos2  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># æ³¨å†Œä¸­å¿ƒçš„è®¿é—®åœ°å€ï¼Œå¯ä»¥æ˜¯åŸŸåæˆ–è€…IP</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">domain</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 192.xxx.xx.32</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># æ³¨å†Œä¸­å¿ƒçš„è®¿é—®ç«¯å£ï¼ŒNacos é»˜è®¤éƒ½æ˜¯ 8848</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8848</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Nacos å‘½åç©ºé—´ ID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">nacosNamespaceId</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> d8ac64f3</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">xxxx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">xxxx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">xxxx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">47a814ecf358    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Nacos æœåŠ¡åˆ†ç»„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">nacosGroups</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> DEFAULT_GROUP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># å®šä¹‰ä¸€ä¸ªåä¸º â€œuatâ€ çš„æœåŠ¡æ¥æº</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> uat</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># æ³¨å†Œä¸­å¿ƒç±»å‹æ˜¯ Nacos 1.xï¼Œåªæ”¯æŒ HTTP åè®®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nacos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># æ³¨å†Œä¸­å¿ƒçš„è®¿é—®åœ°å€ï¼Œå¯ä»¥æ˜¯åŸŸåæˆ–è€…IP</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">domain</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 192.xxx.xx.31</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># æ³¨å†Œä¸­å¿ƒçš„è®¿é—®ç«¯å£ï¼ŒNacos é»˜è®¤éƒ½æ˜¯ 8848</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8848</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Nacos å‘½åç©ºé—´ ID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">nacosNamespaceId</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 98ac6df3</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">xxxx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">xxxx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">xxxx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ab98115dfde4    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Nacos æœåŠ¡åˆ†ç»„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">nacosGroups</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> DEFAULT_GROUP    </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æˆ‘ä»¬é€šè¿‡ McpBridge èµ„æºé…ç½®äº†ä¸¤ä¸ªæœåŠ¡æ¥æºï¼Œåˆ†åˆ«å–å â€œproductionâ€å’Œâ€œuatâ€ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ Higress å¯¹æ¥ Nacos åŒæ—¶æ”¯æŒ HTTP å’Œ gRPC ä¸¤ç§åè®®ï¼Œå»ºè®®å°† Nacos å‡çº§åˆ° 2.x ç‰ˆæœ¬ï¼Œè¿™æ ·å¯ä»¥åœ¨ä¸Šè¿°é…ç½®çš„ type ä¸­æŒ‡å®š â€œnacos2â€ ä½¿ç”¨ gRPC åè®®ï¼Œä»è€Œæ›´å¿«é€Ÿåœ°æ„ŸçŸ¥åˆ°æœåŠ¡å˜åŒ–ï¼Œå¹¶æ¶ˆè€—æ›´å°‘çš„ Nacos æœåŠ¡ç«¯èµ„æºã€‚
åŸºäº McpBridge ä¸­çš„ registries æ•°ç»„é…ç½®ï¼ŒHigress å¯ä»¥è½»æ¾å¯¹æ¥å¤šä¸ªä¸”ä¸åŒç±»å‹çš„æœåŠ¡æ¥æºï¼ˆNacos/Zookeeper/Eureka/Consul/...ï¼‰ï¼Œè¿™é‡Œå¯¹äº Nacos ç±»å‹çš„æœåŠ¡æ¥æºï¼Œæ”¯æŒé…ç½®å¤šä¸ªä¸åŒå‘½åç©ºé—´ï¼Œä»è€Œå®ç°ä¸åŒå‘½åç©ºé—´çš„å¾®æœåŠ¡å¯ä»¥å…±ç”¨ä¸€ä¸ªç½‘å…³ï¼Œé™ä½è‡ªå»ºå¾®æœåŠ¡ç½‘å…³çš„èµ„æºæˆæœ¬å¼€é”€ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="é…ç½®-ingress">é…ç½® Ingress<a href="#é…ç½®-ingress" class="hash-link" aria-label="é…ç½® Ingressçš„ç›´æ¥é“¾æ¥" title="é…ç½® Ingressçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> networking.k8s.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Ingress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">higress.io/destination</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> service</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">provider.DEFAULT</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">GROUP.d8ac64f3</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">xxxx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">xxxx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">xxxx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">47a814ecf358.nacos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">rules</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">paths</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">backend</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">resource</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">apiGroup</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> networking.higress.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> McpBridge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">pathType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Prefix</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å’Œå¸¸è§çš„ Ingress åœ¨ backend ä¸­å®šä¹‰ service ä¸åŒï¼Œè¿™é‡ŒåŸºäº Ingress çš„ resource backend å°†ä¸Šé¢å®šä¹‰æœåŠ¡æ¥æºçš„ McpBridge è¿›è¡Œå…³è”ã€‚å¹¶é€šè¿‡æ³¨è§£<code>higress.io/destination</code>æŒ‡å®šè·¯ç”±æœ€ç»ˆè¦è½¬å‘åˆ°çš„ç›®æ ‡æœåŠ¡ã€‚å¯¹äº Nacos æ¥æºçš„æœåŠ¡ï¼Œè¿™é‡Œçš„ç›®æ ‡æœåŠ¡æ ¼å¼ä¸ºï¼šâ€œæœåŠ¡åç§°.æœåŠ¡åˆ†ç»„.å‘½åç©ºé—´ID.nacosâ€ï¼Œæ³¨æ„è¿™é‡Œéœ€è¦éµå¾ª DNS åŸŸåæ ¼å¼ï¼Œå› æ­¤æœåŠ¡åˆ†ç»„ä¸­çš„ä¸‹åˆ’çº¿'_'è¢«è½¬æ¢æˆäº†æ¨ªæ '-'ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸°å¯Œçš„å¾®æœåŠ¡ç½‘å…³èƒ½åŠ›">ä¸°å¯Œçš„å¾®æœåŠ¡ç½‘å…³èƒ½åŠ›<a href="#ä¸°å¯Œçš„å¾®æœåŠ¡ç½‘å…³èƒ½åŠ›" class="hash-link" aria-label="ä¸°å¯Œçš„å¾®æœåŠ¡ç½‘å…³èƒ½åŠ›çš„ç›´æ¥é“¾æ¥" title="ä¸°å¯Œçš„å¾®æœåŠ¡ç½‘å…³èƒ½åŠ›çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>Higress åœ¨å¾®æœåŠ¡å‘ç°çš„åŸºç¡€ä¸Šï¼Œæä¾›äº†å¤šç§å®ç”¨çš„å¾®æœåŠ¡ç½‘å…³èƒ½åŠ›ï¼Œè¿™é‡Œä»¥â€œç°åº¦å‘å¸ƒâ€å’Œâ€œè‡ªå®šä¹‰æ‰©å±•â€è¿›è¡Œä¸¾ä¾‹ï¼Œæ›´å¤šèƒ½åŠ›å¯ä»¥ç‚¹å‡»åŸæ–‡å‚è€ƒ Higress å®˜ç½‘æ–‡æ¡£è¿›è¡Œäº†è§£ã€‚</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ç°åº¦å‘å¸ƒ">ç°åº¦å‘å¸ƒ<a href="#ç°åº¦å‘å¸ƒ" class="hash-link" aria-label="ç°åº¦å‘å¸ƒçš„ç›´æ¥é“¾æ¥" title="ç°åº¦å‘å¸ƒçš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>Higress å®Œå…¨å…¼å®¹äº† Nginx Ingress çš„é‡‘ä¸é›€ï¼ˆCanaryï¼‰ç›¸å…³æ³¨è§£ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œå¯ä»¥å°†å¸¦æœ‰HTTP Headerä¸ºx-user-id: 100çš„è¯·æ±‚æµé‡è·¯ç”±åˆ°ç°åº¦æœåŠ¡ä¸­ã€‚</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> networking.k8s.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Ingress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">higress.io/destination</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> service</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">provider.DEFAULT</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">GROUP.98ac6df3</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">xxxx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">xxxx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">xxxx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ab98115dfde4.nacos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">nginx.ingress.kubernetes.io/canary</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'true'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">nginx.ingress.kubernetes.io/canary-by-header</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">user</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">nginx.ingress.kubernetes.io/canary-by-header-value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'100'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> demo</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">uat</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">rules</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">paths</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">backend</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">resource</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">apiGroup</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> networking.higress.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> McpBridge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">pathType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Prefix</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ‚¨è¿˜å¯ä»¥åŸºäº OpenKruise Rollout è®©ç°åº¦å‘å¸ƒå’ŒæœåŠ¡éƒ¨ç½²è¿‡ç¨‹è”åŠ¨ï¼Œä»è€Œå®ç°æ¸è¿›å¼äº¤ä»˜ï¼Œå…·ä½“å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« <a href="https://mp.weixin.qq.com/s/vqwAUITNq9_twYHWX_5ZDg" target="_blank" rel="noopener noreferrer">ã€ŠHigress &amp; Kruise Rollout: æ¸è¿›å¼äº¤ä»˜ä¸ºåº”ç”¨å‘å¸ƒä¿é©¾æŠ¤èˆªã€‹</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="è‡ªå®šä¹‰æ‰©å±•">è‡ªå®šä¹‰æ‰©å±•<a href="#è‡ªå®šä¹‰æ‰©å±•" class="hash-link" aria-label="è‡ªå®šä¹‰æ‰©å±•çš„ç›´æ¥é“¾æ¥" title="è‡ªå®šä¹‰æ‰©å±•çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>ä½œä¸ºå¾®æœåŠ¡ç½‘å…³ï¼Œéœ€è¦åœ¨å¾®æœåŠ¡æ¶æ„ä¸­æ‰¿æ‹…éƒ¨åˆ†é€šç”¨é€»è¾‘çš„å¤„ç†ï¼Œä¾‹å¦‚è®¤è¯é‰´æƒï¼Œå®‰å…¨é˜²æŠ¤ç­‰ã€‚é€šç”¨çš„é€»è¾‘æ— æ³•æ»¡è¶³å¤šæ ·æ€§çš„ä¸šåŠ¡åœºæ™¯ï¼ŒHigress å¯ä»¥æ”¯æŒå¼€å‘è€…æ·»åŠ è‡ªå®šä¹‰å¤„ç†é€»è¾‘ã€‚ä¸ Spring Cloud Gateway ç­‰ä¼ ç»Ÿå¾®æœåŠ¡ç½‘å…³éœ€è¦å¼€å‘è€…è‡ªå·±åœ¨ Gateway ä»£ç ä¸­åŠ  Filter ä¸åŒï¼ŒHigress æ”¯æŒå¼€å‘è€…ä½¿ç”¨å¤šç§è¯­è¨€ç¼–å†™ Wasm æ’ä»¶ï¼Œå¹¶åŠ¨æ€åŠ è½½ç”Ÿæ•ˆï¼Œæ’ä»¶ç”Ÿæ•ˆè¿‡ç¨‹æ— éœ€é‡å¯ç½‘å…³ï¼Œå˜æ›´æ’ä»¶é€»è¾‘å¯¹æµé‡å®Œå…¨æ— æŸã€‚
ä¸‹ä¾‹æ˜¯ä¸€ä¸ªå±è”½ç‰¹å®šè¯·æ±‚çš„ Wasm æ’ä»¶ï¼Œå½“è¯·æ±‚ url ä¸­å‡ºç° â€œswagger.htmlâ€ æ—¶å°†è¢«ç›´æ¥æ‹’ç»è®¿é—®ï¼Œæ’ä»¶å®ç°ä»£ç å‚è€ƒï¼š<a href="https://github.com/alibaba/higress/tree/main/plugins/wasm-go/extensions/request-block" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/higress/tree/main/plugins/wasm-go/extensions/request-block</a></p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> extensions.higress.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> WasmPlugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> request</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">block</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">defaultConfig</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">block_urls</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"swagger.html"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> oci</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">registry.cn</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">hangzhou.cr.aliyuncs.com/plugins/demo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">1.0.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Wasm æ’ä»¶çš„å¼€å‘&amp;ç¼–è¯‘&amp;é•œåƒæ¨é€æ–¹å¼å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« <a href="https://mp.weixin.qq.com/s/eoPlaOgRm7u5wJAxhbVGGg" target="_blank" rel="noopener noreferrer">ã€ŠHigress å®æˆ˜ï¼š30 è¡Œä»£ç å†™ä¸€ä¸ª Wasm Goæ’ä»¶ã€‹</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¾®æœåŠ¡ç½‘å…³å‘å±•è¶‹åŠ¿">å¾®æœåŠ¡ç½‘å…³å‘å±•è¶‹åŠ¿<a href="#å¾®æœåŠ¡ç½‘å…³å‘å±•è¶‹åŠ¿" class="hash-link" aria-label="å¾®æœåŠ¡ç½‘å…³å‘å±•è¶‹åŠ¿çš„ç›´æ¥é“¾æ¥" title="å¾®æœåŠ¡ç½‘å…³å‘å±•è¶‹åŠ¿çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="è¶‹åŠ¿ä¸€ç»Ÿä¸€-api-æ ‡å‡†å‘äº‘åŸç”Ÿå¾®æœåŠ¡æ¶æ„æ¼”è¿›">è¶‹åŠ¿ä¸€ï¼šç»Ÿä¸€ API æ ‡å‡†ï¼Œå‘äº‘åŸç”Ÿå¾®æœåŠ¡æ¶æ„æ¼”è¿›<a href="#è¶‹åŠ¿ä¸€ç»Ÿä¸€-api-æ ‡å‡†å‘äº‘åŸç”Ÿå¾®æœåŠ¡æ¶æ„æ¼”è¿›" class="hash-link" aria-label="è¶‹åŠ¿ä¸€ï¼šç»Ÿä¸€ API æ ‡å‡†ï¼Œå‘äº‘åŸç”Ÿå¾®æœåŠ¡æ¶æ„æ¼”è¿›çš„ç›´æ¥é“¾æ¥" title="è¶‹åŠ¿ä¸€ï¼šç»Ÿä¸€ API æ ‡å‡†ï¼Œå‘äº‘åŸç”Ÿå¾®æœåŠ¡æ¶æ„æ¼”è¿›çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åŸºäºä¸€å¥— API å¯ä»¥æœ‰ä¸åŒçš„å®ç°ï¼Œæ—¢è®©ç”¨æˆ·ä¸è¢«å…·ä½“å®ç°é”å®šï¼Œåˆæ¡¥æ¥äº†æŠ€æœ¯æ¼”è¿›çš„é¸¿æ²Ÿã€‚API å¯ä»¥è¯´æ˜¯æ•´ä¸ªäº‘åŸç”Ÿæ¶æ„çš„åŸºçŸ³ï¼Œæˆ–è®¸æœ‰ä¸€å¤© K8s ä¼šæ¶ˆå¤±ï¼Œä½†æ˜¯é¢å‘æŠ½è±¡çš„ API æ ‡å‡†å®šä¼šé•¿å­˜ã€‚åœ¨æµé‡ç½‘å…³é¢†åŸŸï¼ŒIngress API å·²ç»æˆä¸ºæ ‡å‡†ã€‚è€Œå¯¹äºå¾®æœåŠ¡ç½‘å…³ç­‰æ›´å¤æ‚çš„ä½¿ç”¨åœºæ™¯ï¼ŒIngress å—é™äºå…¶ç®€å•çš„åè®®å­—æ®µï¼Œéœ€è¦é€šè¿‡ Ingress æ³¨è§£ç­‰æ–¹å¼è¿›è¡Œèƒ½åŠ›æ‰©å±•ï¼Œéš¾ä»¥è¢«æ ‡å‡†åŒ–ã€‚å› æ­¤è¯¸å¦‚ Contourã€Emissaryã€Kongã€APISIX ç­‰éƒ½å®šä¹‰äº†è‡ªå·±çš„ HTTP è·¯ç”±ç­‰ CRDï¼Œç½‘å…³çš„ API å®šä¹‰å¼€å§‹å‘ˆç°ç¢ç‰‡åŒ–ã€‚
è¿™ä¸€èƒŒæ™¯ä¹‹ä¸‹ï¼ŒGateway API åº”è¿è€Œç”Ÿï¼Œå¹¶ä¸”åœ¨è¿‡å»çš„ä¸€å¹´é‡Œä» alpha æ¼”è¿›åˆ°äº† beta é˜¶æ®µã€‚è™½ç„¶ç›®å‰ Gateway API è¿˜æœªå®šç¨¿ï¼Œåè®®ä»ä¼šå‘ç”Ÿå˜åŠ¨ï¼Œä¸å»ºè®®ç”¨äºç”Ÿäº§ï¼Œä½† API ç»Ÿä¸€è¶‹åŠ¿å·²ç»ä¸å¯é˜»æŒ¡ï¼Œåªæ˜¯æ—¶é—´çš„é—®é¢˜ã€‚ä¸‹å›¾æ˜¯ Gateway API çš„ä¸€ä¸ªç”¨ä¾‹åœºæ™¯ï¼Œä¸åŒäº Ingress APIï¼Œå°†é›†ç¾¤è¿ç»´å’Œä¸šåŠ¡è¿ç»´çš„èŒè´£è¿›è¡Œäº†åˆ’åˆ†ï¼Œè¿™æ ·ä¸šåŠ¡å¼€å‘äººå‘˜ä¸å†éœ€è¦å…³å¿ƒç½‘ç«™è¯ä¹¦ç­‰é›†ç¾¤çº§çš„ç»†èŠ‚ï¼Œåªä¸“æ³¨äºä¸šåŠ¡æœ¬èº«çš„ DevOpsï¼Œé›†ç¾¤è¿ç»´ä»»åŠ¡å¯ä»¥äº¤ç»™ SRE äººå‘˜è¿›è¡Œç»Ÿä¸€å¤„ç†ã€‚
<img loading="lazy" src="https://img.alicdn.com/imgextra/i3/O1CN01jDsDrv1zaqj82YkYP_!!6000000006731-2-tps-2735-1519.png" alt="image.png" class="img_ev3q">
Higress ç›®å‰é‡‡ç”¨ Ingress æ³¨è§£çš„èƒ½åŠ›æ¥å®ç°èƒ½åŠ›æ‰©å±•ï¼Œå¹¶å…¼å®¹äº† Nginx Ingress å¤§éƒ¨åˆ†å¸¸ç”¨æ³¨è§£ï¼Œä¸”å…·å¤‡å¹³æ»‘è¿ç§»åˆ° Gateway API çš„èƒ½åŠ›ã€‚
Higress ä¸ºä¼ ç»Ÿå¾®æœåŠ¡æ¶æ„ï¼Œæä¾›äº†æ¸è¿›å¼çš„æ–¹å¼ï¼Œå‘åŸºäº K8s çš„äº‘åŸç”Ÿå¾®æœåŠ¡æ¶æ„æ¼”è¿›ï¼šå¯ä»¥é€šè¿‡ Nacos å‘ç°éƒ¨ç½²åœ¨ K8s ä¹‹å¤–çš„æœåŠ¡ï¼Œä»è€Œå®ç°äº†ç½‘å…³åç«¯å¾®æœåŠ¡å¯ä»¥å’Œ K8s è§£è€¦ï¼Œä¸šåŠ¡å›¢é˜Ÿå¯ä»¥å°†å¾®æœåŠ¡é€ä¸ªè¿ç§»è‡³ K8sï¼Œè€Œä¸ç”¨æ‹…å¿ƒç½‘å…³å±‚çš„æµé‡å½±å“ã€‚
ä»ä¼ ç»Ÿå¾®æœåŠ¡ç½‘å…³è¿ç§»åˆ° Higressï¼Œå†æ¸è¿›å¼å®Œæˆæ•´ä¸ªå¾®æœåŠ¡æ¶æ„çš„äº‘åŸç”ŸåŒ–ï¼Œæ˜¯ä¸€ä¸ªæ˜æ™ºçš„é€‰æ‹©ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="è¶‹åŠ¿äºŒåˆå¹¶å®‰å…¨æµé‡ç½‘å…³å‘-devsecops-æ¼”è¿›">è¶‹åŠ¿äºŒï¼šåˆå¹¶å®‰å…¨&amp;æµé‡ç½‘å…³ï¼Œå‘ DevSecOps æ¼”è¿›<a href="#è¶‹åŠ¿äºŒåˆå¹¶å®‰å…¨æµé‡ç½‘å…³å‘-devsecops-æ¼”è¿›" class="hash-link" aria-label="è¶‹åŠ¿äºŒï¼šåˆå¹¶å®‰å…¨&amp;æµé‡ç½‘å…³ï¼Œå‘ DevSecOps æ¼”è¿›çš„ç›´æ¥é“¾æ¥" title="è¶‹åŠ¿äºŒï¼šåˆå¹¶å®‰å…¨&amp;æµé‡ç½‘å…³ï¼Œå‘ DevSecOps æ¼”è¿›çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>Higress æå‡ºäº†å°†å®‰å…¨ã€æµé‡ã€å¾®æœåŠ¡ç½‘å…³ä¸‰åˆä¸€çš„æ¦‚å¿µï¼Œé¦–å…ˆæ¥çœ‹ä¸€ä¸ªå…¸å‹çš„å¤šå±‚ç½‘å…³æ¶æ„ï¼š
<img loading="lazy" src="https://img.alicdn.com/imgextra/i2/O1CN0178hdNj25QDDnqmISC_!!6000000007520-2-tps-1318-198.png" class="img_ev3q">
åœ¨è¿™ä¸ªæ¶æ„ä¸­ï¼Œç”¨ WAF ç½‘å…³å®ç°å®‰å…¨èƒ½åŠ›ï¼ŒIngress ç½‘å…³å®ç°é›†ç¾¤å…¥å£ç½‘å…³èƒ½åŠ›ï¼ˆé K8s åœºæ™¯æˆ–ä¼šéƒ¨ç½²ä¸€å±‚ Nginxï¼‰ï¼ŒSCGï¼ˆSpring Cloud Gatewayï¼‰ å®ç°å¾®æœåŠ¡ç½‘å…³èƒ½åŠ›ã€‚è¿™æ ·çš„æ¶æ„ä¸‹ï¼Œéœ€è¦å¯¹æ¯ä¸€å±‚ç½‘å…³éƒ½è¿›è¡Œå®¹é‡è¯„ä¼°ï¼Œæ¯ä¸€å±‚ç½‘å…³éƒ½æ˜¯æ½œåœ¨çš„ç“¶é¢ˆç‚¹ï¼Œéƒ½å¯èƒ½éœ€è¦è¿›è¡Œæ‰©å®¹ã€‚è¿™æ ·é€ æˆçš„èµ„æºæˆæœ¬å’Œè¿ç»´äººåŠ›æˆæœ¬éƒ½æ˜¯å·¨å¤§çš„ã€‚å¹¶ä¸”æ¯å¤šä¸€å±‚ç½‘å…³ï¼Œå°±å¤šä¸€å±‚å¯ç”¨æ€§é£é™©ã€‚ä¸€æ—¦å‡ºç°å¯ç”¨æ€§é—®é¢˜ï¼Œå¤šå±‚ç½‘å…³ä¼šå¯¼è‡´é—®é¢˜å®šä½å¤æ‚åº¦æ˜¾è‘—ä¸Šå‡ï¼Œå¯¹åº”çš„å¹³å‡æ•…éšœæ¢å¤æ—¶é—´ï¼ˆMTTRï¼‰å°†å¤§å¹…å¢åŠ ã€‚
<img loading="lazy" src="https://img.alicdn.com/imgextra/i1/O1CN01BnAVqH1SCE73I5l85_!!6000000002210-2-tps-1318-198.png" class="img_ev3q">
é‡‡ç”¨ä¸‰åˆä¸€çš„æ¶æ„ä¸­ï¼Œå¯ä»¥æ˜¾è‘—é™ä½æˆæœ¬ï¼Œå¹¶æé«˜ç³»ç»Ÿæ•´ä½“å¯ç”¨æ€§ã€‚åŒæ—¶è¿™ä¹Ÿç¬¦åˆ DevSecOps çš„å¾®æœåŠ¡æ¼”è¿›è¶‹åŠ¿ï¼Œå¾®æœåŠ¡å¼€å‘è€…å¯ä»¥æ›´å¤šåœ°ä»ä¸šåŠ¡æ¥å£è§†è§’å…³æ³¨å®‰å…¨æ€§ï¼Œè€Œä¸æ˜¯é‡‡ç”¨æ‰€æœ‰è·¯ç”±ä¸€åˆ€åˆ‡çš„ WAF é˜²æŠ¤æ¨¡å¼ã€‚
æŠ€æœ¯æ¶æ„æ¼”è¿›çš„èƒŒåæ˜¯ç»„ç»‡æ¶æ„æ¼”è¿›ï¼Œè¿™ä¹Ÿæ˜¯å¾®æœåŠ¡ DevOps ä¸€ç›´åœ¨å¼ºè°ƒçš„ï¼Œè¦å›´ç»•å¼€å‘è€…ä¸ºæ ¸å¿ƒï¼Œä»è€Œæå‡å¾®æœåŠ¡å¼€å‘æ•ˆç‡ã€‚å‘ DevSecOps æ¼”è¿›å¹¶æ²¡æœ‰æ·å¾„ï¼Œä¾ç„¶éœ€è¦å¼€å‘è§’è‰²å’Œè¿ç»´è§’è‰²ä¹‹é—´çš„åŒå‘å¥”èµ´ï¼Œæ‰“ç ´ä¼ ç»Ÿå¼€å‘ä¸è¿ç»´ä¹‹é—´çš„å£å’ï¼Œå½¢æˆä»å¼€å‘ã€éƒ¨ç½²ã€å®‰å…¨è¿è¥è¿™æ ·ä¸€ä¸ªå…¨åŠŸèƒ½åŒ–çš„æ•æ·å›¢é˜Ÿã€‚
é€šè¿‡ Higress å°†ç½‘å…³åˆå¹¶ä½œä¸ºå‘ DevSecOps æ¼”è¿›çš„æŠ“æ‰‹ï¼Œæ˜¯ä¸€ä¸ªæ˜æ™ºçš„é€‰æ‹©ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å‚ä¸-higress-ç¤¾åŒº">å‚ä¸ Higress ç¤¾åŒº<a href="#å‚ä¸-higress-ç¤¾åŒº" class="hash-link" aria-label="å‚ä¸ Higress ç¤¾åŒºçš„ç›´æ¥é“¾æ¥" title="å‚ä¸ Higress ç¤¾åŒºçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>Higress å¼€æºè´¡çŒ®å°ç»„æ­£åœ¨ç«çƒ­æ‹›å‹Ÿè´¡çŒ®è€…ã€‚å¦‚æœæ‚¨æœ‰æ—¶é—´ï¼Œæœ‰çƒ­æƒ…ï¼Œæœ‰æ„æ„¿ï¼Œæ¬¢è¿è”ç³»ç¤¾åŒºåŠ å…¥å¼€æºè´¡çŒ®å°ç»„ï¼Œä¸€èµ·å…±åŒå®Œå–„ Higressï¼Œä¸€èµ·ä¸»å¯¼ä¸‹ä¸€ä»£äº‘åŸç”Ÿç½‘å…³çš„è®¾è®¡å’Œå®ç°ã€‚
ç¤¾åŒºå®˜ç½‘ï¼ˆç‚¹å‡»â€œé˜…è¯»åŸæ–‡â€è·³è½¬ï¼‰: <a href="https://higress.io" target="_blank" rel="noopener noreferrer">https://higress.io</a>
ç¤¾åŒºå¼€å‘è€…ç¾¤ï¼š
<img loading="lazy" src="https://img.alicdn.com/imgextra/i1/O1CN01Zc7yGt1p0zYq3OCwj_!!6000000005299-2-tps-979-1280.png" alt="image.png" class="img_ev3q">
ç¤¾åŒºäº¤æµç¾¤ï¼š
<img loading="lazy" src="https://img.alicdn.com/imgextra/i2/O1CN01Ebh7P021yKGBaP35B_!!6000000007053-2-tps-720-405.png" alt="higress-comm.png" class="img_ev3q"></p>]]></content>
        <author>
            <name>æ¾„æ½­</name>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[30è¡Œä»£ç å†™ä¸€ä¸ªWasm Goæ’ä»¶]]></title>
        <id>https://higress.io/zh-cn/blog/30-line-wasm</id>
        <link href="https://higress.io/zh-cn/blog/30-line-wasm"/>
        <updated>2022-11-22T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[å¯¹ã€ŠHigress å¼€æºèƒŒåçš„å‘å±•å†ç¨‹å’Œä¸Šæ‰‹ Demo æ¼”ç¤ºã€‹ç›´æ’­æ¼”ç¤º demo çš„è¯¦ç»†è¯´æ˜]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="å‰è¨€">å‰è¨€<a href="#å‰è¨€" class="hash-link" aria-label="å‰è¨€çš„ç›´æ¥é“¾æ¥" title="å‰è¨€çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>åœ¨11æœˆ15å·çš„ç›´æ’­ ã€ŠHigress å¼€æºèƒŒåçš„å‘å±•å†ç¨‹å’Œä¸Šæ‰‹ Demo æ¼”ç¤ºã€‹ä¸­ï¼Œä¸ºå¤§å®¶æ¼”ç¤ºäº† Higress çš„ Wasm æ’ä»¶å¦‚ä½•é¢å‘ Ingress èµ„æºè¿›è¡Œé…ç½®ç”Ÿæ•ˆï¼Œæœ¬æ–‡å¯¹å½“å¤©çš„ Demo è¿›è¡Œä¸€ä¸ªå›é¡¾ï¼Œå¹¶è¯´æ˜èƒŒåçš„åŸç†æœºåˆ¶ã€‚</p><p>æœ¬æ–‡ä¸­ Demo è¿è¡Œçš„å‰æï¼Œéœ€è¦åœ¨ K8s é›†ç¾¤ä¸­å®‰è£…äº† Higressï¼Œå¹¶ç”Ÿæ•ˆäº†ä¸‹é¢è¿™ä»½ quickstart é…ç½®ï¼š
<a href="https://higress.io/samples/quickstart.yaml" target="_blank" rel="noopener noreferrer">https://higress.io/samples/quickstart.yaml</a>
è¿™ä¸ª Demo è¦å®ç°çš„åŠŸèƒ½æ˜¯ä¸€ä¸ª Mock åº”ç­”çš„åŠŸèƒ½ï¼Œéœ€è¦å®ç°æ ¹æ®é…ç½®çš„å†…å®¹ï¼Œè¿”å› HTTP åº”ç­”ã€‚
æœ¬æ–‡ä¼šæŒ‰ä»¥ä¸‹æ–¹å¼è¿›è¡Œä»‹ç»ï¼š</p><ul><li>ç¼–å†™ä»£ç ï¼šä»£ç é€»è¾‘è§£æ</li><li>ç”Ÿæ•ˆæ’ä»¶ï¼šè¯´æ˜ä»£ç å¦‚ä½•è¿›è¡Œç¼–è¯‘æ‰“åŒ…å¹¶éƒ¨ç½²ç”Ÿæ•ˆ</li><li>æµ‹è¯•æ’ä»¶åŠŸèƒ½ï¼šè¯´æ˜å…¨å±€ç²’åº¦ï¼Œè·¯ç”±/åŸŸåçº§ç²’åº¦å¦‚ä½•ç”Ÿæ•ˆ</li><li>æ’ä»¶ç”Ÿæ•ˆåŸç†ï¼šå¯¹æ•´ä½“æµç¨‹è¿›è¡Œå›é¡¾ï¼Œè¯´æ˜æ’ä»¶ç”Ÿæ•ˆçš„åŸç†</li><li>ä¸‰ä¸ªé©å‘½æ€§çš„ç‰¹æ€§ï¼šä»‹ç» Wasm æ’ä»¶æœºåˆ¶ä¸ºç½‘å…³æ’ä»¶å¼€å‘å¸¦æ¥çš„å˜é©</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç¼–å†™ä»£ç ">ç¼–å†™ä»£ç <a href="#ç¼–å†™ä»£ç " class="hash-link" aria-label="ç¼–å†™ä»£ç çš„ç›´æ¥é“¾æ¥" title="ç¼–å†™ä»£ç çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    . "github.com/alibaba/higress/plugins/wasm-go/pkg/wrapper"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "github.com/tetratelabs/proxy-wasm-go-sdk/proxywasm"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "github.com/tetratelabs/proxy-wasm-go-sdk/proxywasm/types"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "github.com/tidwall/gjson"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">func main() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SetCtx(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        "my-plugin",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ParseConfigBy(parseConfig),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ProcessRequestHeadersBy(onHttpRequestHeaders),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type MyConfig struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    content string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">func parseConfig(json gjson.Result, config *MyConfig, log Log) error {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    config.content = json.Get("content").String()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return nil</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">func onHttpRequestHeaders(ctx HttpContext, config MyConfig, log Log) types.Action {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    proxywasm.SendHttpResponse(200, nil, []byte(config.content), -1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return types.ActionContinue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¸Šé¢ä»£ç ä¸­å¯ä»¥çœ‹åˆ°ä¸‰ä¸ªå‡½æ•°ï¼š</p><ul><li><p>mainï¼šæ’ä»¶é€šè¿‡ main å‡½æ•°å®šä¹‰æ’ä»¶ä¸Šä¸‹æ–‡ï¼ŒåŒ…æ‹¬æ’ä»¶åç§°ï¼Œç”¨äºè§£æé…ç½®çš„å‡½æ•°ï¼Œä»¥åŠç”¨äºå¤„ç†è¯·æ±‚/åº”ç­”çš„å‡½æ•°</p></li><li><p>parseConfigï¼šè¿™ä¸ªå‡½æ•°é€šè¿‡åœ¨ SetCtx ä¸­æŒ‡å®šçš„ ParseConfigBy è¢«æŒ‚è½½åˆ°æ’ä»¶é…ç½®è§£æé˜¶æ®µï¼Œä¼ å…¥çš„ä¸‰ä¸ªå‚æ•°åˆ†åˆ«æ˜¯ï¼š</p><ul><li>jsonï¼šä¼ å…¥æ’ä»¶çš„é…ç½®ï¼Œå°†ç»Ÿä¸€åºåˆ—åŒ–ä¸ºä¸€ä¸ª json å­—å…¸å¯¹è±¡ï¼Œæä¾› parseConfig è¿›è¡Œè§£æ</li><li>configï¼šparseConfig å°†è§£æåçš„æ’ä»¶é…ç½®è¾“å‡ºåˆ°è¿™ä¸ª MyConfig å¯¹è±¡</li><li>logï¼šæä¾›æ—¥å¿—è¾“å‡ºæ¥å£</li></ul></li><li><p>onHttpRequestHeadersï¼šå‡½æ•°ä¸­è°ƒç”¨çš„ proxywasm.SendHttpResponseï¼Œç”¨äºå®ç°ç›´æ¥è¿”å› HTTP åº”ç­”ï¼Œè¿™ä¸ªå‡½æ•°é€šè¿‡åœ¨ SetCtx ä¸­æŒ‡å®šçš„ ProcessRequestHeadersBy è¢«æŒ‚è½½åˆ°è§£æè¯·æ±‚ Header çš„æ‰§è¡Œé˜¶æ®µï¼Œå…¶ä»–çš„æŒ‚è½½æ–¹å¼è¿˜æœ‰ï¼š</p><ul><li><p>ProcessRequestBodyByï¼šæŒ‚è½½åˆ°è§£æè¯·æ±‚ Body çš„æ‰§è¡Œé˜¶æ®µ</p></li><li><p>ProcessResponseHeadersByï¼šæŒ‚è½½åˆ°æ„é€ åº”ç­” Header çš„æ‰§è¡Œé˜¶æ®µ</p></li><li><p>ProcessResponseBodyByï¼šæŒ‚è½½åˆ°æ„é€ åº”ç­” Body çš„æ‰§è¡Œé˜¶æ®µ</p><p> ä¼ å…¥çš„ä¸‰ä¸ªå‚æ•°åˆ†åˆ«æ˜¯ï¼š</p></li><li><p>ctxï¼šç”¨äºè·å–è¯·æ±‚ä¸Šä¸‹æ–‡ï¼Œå¦‚ scheme/method/path ç­‰ï¼Œé€šè¿‡ ctx å¯ä»¥è®¾ç½®è‡ªå®šä¹‰ä¸Šä¸‹æ–‡ï¼Œèƒ½è·¨æ‰§è¡Œé˜¶æ®µè®¿é—®</p></li><li><p>configï¼šæä¾› parseConfig è§£æå¥½çš„è‡ªå®šä¹‰é…ç½®</p></li><li><p>logï¼šæä¾›æ—¥å¿—è¾“å‡ºæ¥å£</p></li></ul></li></ul><p>è¿™ä¸ª 30 è¡Œä»£ç å®ç°çš„æ’ä»¶åŠŸèƒ½æ¯”è¾ƒç®€å•ï¼Œè¿™é‡Œæœ‰ä¸€äº›åŠŸèƒ½ç›¸å¯¹å¤æ‚çš„ä¾‹å­ï¼š<a href="https://github.com/alibaba/higress/tree/main/plugins/wasm-go/extensions" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/higress/tree/main/plugins/wasm-go/extensions</a>
è¿™é‡Œæœ‰æ’ä»¶ sdk çš„è¯¦ç»†ä½¿ç”¨æ–‡æ¡£ï¼š
<a href="https://higress.io/zh-cn/docs/user/wasm-go.html" target="_blank" rel="noopener noreferrer">https://higress.io/zh-cn/docs/user/wasm-go.html</a>
è¿™ä¸ªæ’ä»¶ sdk æ˜¯åŸºäº Tetrate ç¤¾åŒºçš„ proxy-wasm-go-sdk å®ç°çš„ï¼Œå¦‚æœå…³æ³¨æ›´åº•å±‚çš„ç»†èŠ‚ï¼Œå¯ä»¥æŸ¥çœ‹ï¼š
<a href="https://github.com/tetratelabs/proxy-wasm-go-sdk" target="_blank" rel="noopener noreferrer">https://github.com/tetratelabs/proxy-wasm-go-sdk</a>
<a href="https://github.com/alibaba/higress/blob/main/plugins/wasm-go/pkg/wrapper/plugin_wrapper.go" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/higress/blob/main/plugins/wasm-go/pkg/wrapper</a>
å¯ä»¥çœ‹åˆ°ï¼ŒHigress çš„ wasm-go sdk æ˜¯é€šè¿‡ Go 1.18 å¼•å…¥çš„æ³›å‹ç‰¹æ€§å°è£…äº†æ’ä»¶ä¸Šä¸‹æ–‡å¤„ç†ç»†èŠ‚ï¼Œä»è€Œé™ä½æ’ä»¶å¼€å‘æ‰€éœ€ä»£ç é‡ï¼Œå¼€å‘è€…åªç”¨å…³å¿ƒé…ç½®è§£æå’Œè¯·æ±‚åº”ç­”å¤„ç†çš„é€»è¾‘ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç”Ÿæ•ˆæ’ä»¶">ç”Ÿæ•ˆæ’ä»¶<a href="#ç”Ÿæ•ˆæ’ä»¶" class="hash-link" aria-label="ç”Ÿæ•ˆæ’ä»¶çš„ç›´æ¥é“¾æ¥" title="ç”Ÿæ•ˆæ’ä»¶çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ç¼–å†™å®Œæˆä»£ç åï¼Œä¸€å…±æœ‰ä¸‰ä¸ªæ­¥éª¤ï¼Œå®ç°æ’ä»¶é€»è¾‘çš„ç”Ÿæ•ˆï¼š</p><ol><li>ç¼–è¯‘ï¼šå°† go ä»£ç ç¼–è¯‘æˆ Wasm æ ¼å¼æ–‡ä»¶</li><li>é•œåƒæ¨é€ï¼šå°† Wasm æ–‡ä»¶æ‰“åŒ…æˆ docker é•œåƒï¼Œå¹¶æ¨é€è‡³é•œåƒä»“åº“</li><li>ä¸‹å‘é…ç½®ï¼šåœ¨ K8s ä¸Šåˆ›å»º WasmPlugin èµ„æº</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç¼–è¯‘">ç¼–è¯‘<a href="#ç¼–è¯‘" class="hash-link" aria-label="ç¼–è¯‘çš„ç›´æ¥é“¾æ¥" title="ç¼–è¯‘çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>å°†ä¸Šé¢çš„ Go æ–‡ä»¶ main.go ç¼–è¯‘æˆ plugin.wasm</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tinygo build -o plugin.wasm -scheduler</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">none -target</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">wasi main.go</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="é•œåƒæ¨é€">é•œåƒæ¨é€<a href="#é•œåƒæ¨é€" class="hash-link" aria-label="é•œåƒæ¨é€çš„ç›´æ¥é“¾æ¥" title="é•œåƒæ¨é€çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ç¼–å†™ Dockerfile</p><div class="language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">FROM scratch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY plugin.wasm ./</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ„å»ºå¹¶æ¨é€ Docker é•œåƒ ï¼ˆè¿™é‡Œç¤ºä¾‹ç”¨çš„æ˜¯ Higress çš„å®˜æ–¹é•œåƒä»“åº“ï¼‰</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> build -t higress-registry.cn-hangzhou.cr.aliyuncs.com/plugins/demo:1.0.0 </span><span class="token builtin class-name">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> push higress-registry.cn-hangzhou.cr.aliyuncs.com/plugins/demo:1.0.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸‹å‘é…ç½®">ä¸‹å‘é…ç½®<a href="#ä¸‹å‘é…ç½®" class="hash-link" aria-label="ä¸‹å‘é…ç½®çš„ç›´æ¥é“¾æ¥" title="ä¸‹å‘é…ç½®çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ç¼–å†™ wasmplugin.yamlï¼Œé…ç½®è¯´æ˜ï¼š</p><ul><li>selectorï¼š é€‰ä¸­äº†é»˜è®¤å®‰è£…åœ¨ higress-system å‘½åç©ºé—´ä¸‹çš„ higress-gateway ç”Ÿæ•ˆè¿™ä»½æ’ä»¶</li><li>pluginConfigï¼šæ’ä»¶é…ç½®ï¼Œæœ€ç»ˆä¼šè¢«è½¬æ¢æˆä¸Šé¢ä»£ç ä¸­çš„ MyConfig å¯¹è±¡</li><li>urlï¼šå¡«å†™é•œåƒåœ°å€ï¼Œéœ€è¦ä»¥"oci://"å¼€å¤´</li></ul><p>é™¤äº†è¿™äº›é…ç½®å¤–ï¼Œè¿˜å¯ä»¥å®šä¹‰æ’ä»¶çš„æ‰§è¡Œé˜¶æ®µå’Œä¼˜å…ˆçº§ç­‰è¿›é˜¶é…ç½®ï¼Œå¯ä»¥å‚è€ƒ Istio API å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://istio.io/latest/docs/reference/config/proxy_extensions/wasm-plugin/" target="_blank" rel="noopener noreferrer">https://istio.io/latest/docs/reference/config/proxy_extensions/wasm-plugin/</a></p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># wasmplugin.yaml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> extensions.higress.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> WasmPlugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> request</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">block</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">defaultConfig</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">block_urls</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"swagger.html"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> oci</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">registry.cn</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">hangzhou.cr.aliyuncs.com/plugins/demo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">1.0.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>é€šè¿‡ kubectl åˆ›å»ºè¿™ä¸ªèµ„æº</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f wasmplugin.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æµ‹è¯•æ’ä»¶åŠŸèƒ½">æµ‹è¯•æ’ä»¶åŠŸèƒ½<a href="#æµ‹è¯•æ’ä»¶åŠŸèƒ½" class="hash-link" aria-label="æµ‹è¯•æ’ä»¶åŠŸèƒ½çš„ç›´æ¥é“¾æ¥" title="æµ‹è¯•æ’ä»¶åŠŸèƒ½çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>åŸºäºä¹‹å‰ç”Ÿæ•ˆçš„ quickstart.yamlï¼Œç›®å‰é›†ç¾¤ä¸­çš„ Ingress è®¿é—®æ‹“æ‰‘å¦‚ä¸‹æ‰€ç¤ºï¼š</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ing-topopng"><img loading="lazy" src="https://img.alicdn.com/imgextra/i3/O1CN0178hYAV1sBTSczmfAf_!!6000000005728-2-tps-646-605.png" alt="ing-topo.png" class="img_ev3q"><a href="#ing-topopng" class="hash-link" aria-label="ing-topopngçš„ç›´æ¥é“¾æ¥" title="ing-topopngçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>æœªç”Ÿæ•ˆæ’ä»¶çš„æƒ…å†µä¸‹ï¼š</p><ul><li>è¯·æ±‚<code>/foo</code> å°†è¿”å› HTTP åº”ç­” <code>"foo"</code></li><li>è¯·æ±‚<code>/bar</code> å°†è¿”å› HTTP åº”ç­” <code>"bar"</code></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å…¨å±€ç”Ÿæ•ˆ">å…¨å±€ç”Ÿæ•ˆ<a href="#å…¨å±€ç”Ÿæ•ˆ" class="hash-link" aria-label="å…¨å±€ç”Ÿæ•ˆçš„ç›´æ¥é“¾æ¥" title="å…¨å±€ç”Ÿæ•ˆçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åŸºäºä¸Šæ–‡ç”Ÿæ•ˆæ’ä»¶é˜¶æ®µï¼Œä¸‹å‘çš„ wasmplugin.yamlï¼Œç”Ÿæ•ˆæ’ä»¶åæ•ˆæœå¦‚ä¸‹ï¼š</p><ul><li>è¯·æ±‚<code>/foo</code> å°†è¿”å› HTTP åº”ç­” <code>"hello higress"</code></li><li>è¯·æ±‚<code>/bar</code> å°†è¿”å› HTTP åº”ç­” <code>"hello higress"</code></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="åŸŸåè·¯ç”±çº§ç”Ÿæ•ˆ">åŸŸå&amp;è·¯ç”±çº§ç”Ÿæ•ˆ<a href="#åŸŸåè·¯ç”±çº§ç”Ÿæ•ˆ" class="hash-link" aria-label="åŸŸå&amp;è·¯ç”±çº§ç”Ÿæ•ˆçš„ç›´æ¥é“¾æ¥" title="åŸŸå&amp;è·¯ç”±çº§ç”Ÿæ•ˆçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>å°† wasmplugin.yaml é…ç½®ä¿®æ”¹å¦‚ä¸‹ï¼š</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># wasmplugin.yaml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> extensions.higress.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> WasmPlugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> request</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">block</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">defaultConfig</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># è·Ÿä¸Šé¢ä¾‹å­ä¸€æ ·ï¼Œè¿™ä¸ªé…ç½®ä¼šå…¨å±€ç”Ÿæ•ˆï¼Œä½†å¦‚æœè¢«ä¸‹é¢è§„åˆ™åŒ¹é…åˆ°ï¼Œåˆ™ä¼šæ”¹ä¸ºæ‰§è¡Œå‘½ä¸­è§„åˆ™çš„é…ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token key atrule" style="color:#00a4db">block_urls</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"swagger.html"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token key atrule" style="color:#00a4db">matchRules</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># è·¯ç”±çº§ç”Ÿæ•ˆé…ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">ingress</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> default/foo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic"># default å‘½åç©ºé—´ä¸‹åä¸º foo çš„ ingress ä¼šæ‰§è¡Œä¸‹é¢è¿™ä¸ªé…ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">block_bodies</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"foo"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">ingress</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> default/bar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># default å‘½åç©ºé—´ä¸‹åä¸º bar çš„ ingress ä¼šæ‰§è¡Œä¸‹é¢è¿™ä¸ªé…ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">block_bodies</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"bar"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># åŸŸåçº§ç”Ÿæ•ˆé…ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">domain</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"*.example.com"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># è‹¥è¯·æ±‚åŒ¹é…äº†ä¸Šé¢çš„åŸŸå, ä¼šæ‰§è¡Œä¸‹é¢è¿™ä¸ªé…ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">block_bodies</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"foo"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"bar"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> oci</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//higress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">registry.cn</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">hangzhou.cr.aliyuncs.com/plugins/demo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">1.0.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åœ¨ pluginConfig ä¸­å¢åŠ äº† <code>_rules_</code>  è§„åˆ™åˆ—è¡¨ï¼Œè§„åˆ™ä¸­å¯ä»¥æŒ‡å®šåŒ¹é…æ–¹å¼ï¼Œå¹¶å¡«å†™å¯¹åº”ç”Ÿæ•ˆçš„é…ç½®:</p><ul><li><em>match_route</em>ï¼šåŒ¹é… Ingress ç”Ÿæ•ˆï¼ŒåŒ¹é…æ ¼å¼ä¸ºï¼šIngress æ‰€åœ¨å‘½åç©ºé—´ + "/" + Ingress åç§°</li><li><em>match_domain</em>ï¼šåŒ¹é…åŸŸåç”Ÿæ•ˆï¼Œå¡«å†™åŸŸåå³å¯ï¼Œæ”¯æŒé€šé…ç¬¦</li></ul><p>ç”Ÿæ•ˆè¿™ä»½ä¿®æ”¹åçš„é…ç½®ï¼š</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">f wasmplugin.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¯ä»¥çœ‹åˆ°æ•ˆæœå¦‚ä¸‹ï¼š</p><ul><li>è¯·æ±‚<code>/foo</code> å°†è¿”å› HTTP åº”ç­” <code>"hello foo"</code> (åŒ¹é…åˆ°ç¬¬ä¸€æ¡ rule)</li><li>è¯·æ±‚<code>/bar</code> å°†è¿”å› HTTP åº”ç­” <code>"hello bar"</code> (åŒ¹é…åˆ°ç¬¬äºŒæ¡ rule)</li><li>è¯·æ±‚<code>www.example.com</code> å°†è¿”å› HTTP åº”ç­” <code>"hello world"</code> ï¼ˆåŒ¹é…åˆ°ç¬¬ä¸‰æ¡ ruleï¼‰</li><li>è¯·æ±‚<code>www.abc.com</code> å°†è¿”å› HTTP åº”ç­” <code>"hello higress"</code> ï¼ˆæ²¡æœ‰åŒ¹é…çš„ ruleï¼Œä½¿ç”¨å…¨å±€é…ç½®ï¼‰</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ’ä»¶ç”Ÿæ•ˆåŸç†">æ’ä»¶ç”Ÿæ•ˆåŸç†<a href="#æ’ä»¶ç”Ÿæ•ˆåŸç†" class="hash-link" aria-label="æ’ä»¶ç”Ÿæ•ˆåŸç†çš„ç›´æ¥é“¾æ¥" title="æ’ä»¶ç”Ÿæ•ˆåŸç†çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i4/O1CN01PO4HYC1h7qYHonHHZ_!!6000000004231-2-tps-1100-537.png" alt="wasm.png" class="img_ev3q"></p><p>è¿™é‡Œå¯¹æ’ä»¶çš„ç”Ÿæ•ˆæœºåˆ¶ç®€å•åšä¸ªè¯´æ˜ï¼š</p><ol><li>ç”¨æˆ·å°†ä»£ç ç¼–è¯‘æˆ wasm æ–‡ä»¶</li><li>ç”¨æˆ·å°† wasm æ–‡ä»¶æ„å»ºæˆ docker é•œåƒ</li><li>ç”¨æˆ·å°† docker é•œåƒæ¨é€è‡³é•œåƒä»“åº“</li><li>ç”¨æˆ·åˆ›å»º WasmPlugin èµ„æº</li><li>Istio watch åˆ° WasmPlugin èµ„æºçš„å˜åŒ–</li><li>Higress Gateway ä¸­çš„ xDS proxy è¿›ç¨‹ä» Istio è·å–åˆ°é…ç½®ï¼Œå‘ç°æ’ä»¶çš„é•œåƒåœ°å€</li><li>xDS proxy ä»é•œåƒä»“åº“æ‹‰å–é•œåƒ</li><li>xDS proxy ä»é•œåƒä¸­æå–å‡º wasm æ–‡ä»¶</li><li>Higress Gateway ä¸­çš„ envoy è¿›ç¨‹ä» xDS proxy è·å–åˆ°é…ç½®ï¼Œå‘ç° wasm æ–‡ä»¶çš„æœ¬åœ°è·¯å¾„</li><li>envoy ä»æœ¬åœ°æ–‡ä»¶ä¸­åŠ è½½ wasm æ–‡ä»¶</li></ol><p>è¿™é‡Œ envoy è·å–é…ç½®å¹¶åŠ è½½ wasm æ–‡ä»¶ä½¿ç”¨åˆ°äº† ECDS (Extension Config Discovery Service)çš„æœºåˆ¶ï¼Œå®ç°äº† wasm æ–‡ä»¶æ›´æ–°ï¼Œç›´æ¥çƒ­åŠ è½½ï¼Œä¸ä¼šå¯¼è‡´ä»»ä½•è¿æ¥ä¸­æ–­ï¼Œä¸šåŠ¡æµé‡å®Œå…¨æ— æŸã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸‰ä¸ªé©å‘½æ€§çš„ç‰¹æ€§">ä¸‰ä¸ªé©å‘½æ€§çš„ç‰¹æ€§<a href="#ä¸‰ä¸ªé©å‘½æ€§çš„ç‰¹æ€§" class="hash-link" aria-label="ä¸‰ä¸ªé©å‘½æ€§çš„ç‰¹æ€§çš„ç›´æ¥é“¾æ¥" title="ä¸‰ä¸ªé©å‘½æ€§çš„ç‰¹æ€§çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ä¸Šé¢çš„ Wasm æ’ä»¶æœºåˆ¶ä¸ºç½‘å…³è‡ªå®šä¹‰æ’ä»¶å¼€å‘å¸¦æ¥äº†ä¸‰ä¸ªé©å‘½æ€§çš„ç‰¹æ€§ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç‰¹æ€§ä¸€æ’ä»¶ç”Ÿå‘½å‘¨æœŸå’Œç½‘å…³è§£è€¦">ç‰¹æ€§ä¸€ï¼šæ’ä»¶ç”Ÿå‘½å‘¨æœŸå’Œç½‘å…³è§£è€¦<a href="#ç‰¹æ€§ä¸€æ’ä»¶ç”Ÿå‘½å‘¨æœŸå’Œç½‘å…³è§£è€¦" class="hash-link" aria-label="ç‰¹æ€§ä¸€ï¼šæ’ä»¶ç”Ÿå‘½å‘¨æœŸå’Œç½‘å…³è§£è€¦çš„ç›´æ¥é“¾æ¥" title="ç‰¹æ€§ä¸€ï¼šæ’ä»¶ç”Ÿå‘½å‘¨æœŸå’Œç½‘å…³è§£è€¦çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>è¿™ä¸ªç‰¹æ€§ä¸»è¦å¾—ç›Šäº Istio çš„ WasmPlugin æœºåˆ¶è®¾è®¡ã€‚å¯ä»¥å’Œ K8s Nginx Ingress çš„æ’ä»¶æœºåˆ¶åšä¸ªå¯¹æ¯”ï¼š</p><blockquote><p>reference: <a href="https://github.com/kubernetes/ingress-nginx/blob/main/rootfs/etc/nginx/lua/plugins/README.md" target="_blank" rel="noopener noreferrer">https://github.com/kubernetes/ingress-nginx/blob/main/rootfs/etc/nginx/lua/plugins/README.md</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="installing-a-plugin">Installing a plugin<a href="#installing-a-plugin" class="hash-link" aria-label="Installing a pluginçš„ç›´æ¥é“¾æ¥" title="Installing a pluginçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>There are two options:</p><ul><li>mount your plugin into /etc/nginx/lua/plugins/<your></your> in the ingress-nginx pod</li><li>build your own ingress-nginx image like it is done in the <a href="https://github.com/ElvinEfendi/ingress-nginx-openidc/tree/master/rootfs/etc/nginx/lua/plugins/openidc" target="_blank" rel="noopener noreferrer">example</a> and install your plugin during image build</li></ul></blockquote><p>å¯ä»¥çœ‹åˆ° Nginx Ingress åŠ è½½è‡ªå®šä¹‰æ’ä»¶ï¼Œéœ€è¦å°† lua æ–‡ä»¶æŒ‚è½½è¿› podï¼Œæˆ–è€…åœ¨æ„å»ºé•œåƒæ—¶è£…å…¥ã€‚è¿™æ ·å°±å°†æ’ä»¶çš„ç”Ÿå‘½å‘¨æœŸè·Ÿç½‘å…³ç»‘å®šåœ¨ä¸€èµ·ï¼Œæ’ä»¶é€»è¾‘æ›´æ–°ï¼Œéœ€è¦å‘å¸ƒæ–°ç‰ˆæœ¬ï¼Œç½‘å…³ä¹Ÿéœ€è¦å‘å¸ƒæ–°ç‰ˆæœ¬æˆ–è€…é‡æ–°éƒ¨ç½²ã€‚
ä½¿ç”¨ WasmPlugin çš„æœºåˆ¶ï¼Œæ’ä»¶éœ€è¦å‘å¸ƒæ–°ç‰ˆæœ¬ï¼Œåªéœ€æ„å»ºæ’ä»¶è‡ªèº«çš„é•œåƒå¹¶è¿›è¡Œä¸‹å‘ç”Ÿæ•ˆï¼Œè€Œä¸”å¯ä»¥åŸºäºé•œåƒçš„ tag è¿›è¡Œæ’ä»¶çš„ç‰ˆæœ¬ç®¡ç†ã€‚è¿™æ ·æ’ä»¶å˜æ›´ï¼Œä¸ä»…æ— éœ€é‡æ–°éƒ¨ç½²ç½‘å…³ï¼Œç»“åˆ Envoy çš„ ECDS æœºåˆ¶å¯¹æµé‡ä¹Ÿæ˜¯å®Œå…¨æ— æŸã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç‰¹æ€§äºŒé«˜æ€§èƒ½çš„å¤šè¯­è¨€æ”¯æŒ">ç‰¹æ€§äºŒï¼šé«˜æ€§èƒ½çš„å¤šè¯­è¨€æ”¯æŒ<a href="#ç‰¹æ€§äºŒé«˜æ€§èƒ½çš„å¤šè¯­è¨€æ”¯æŒ" class="hash-link" aria-label="ç‰¹æ€§äºŒï¼šé«˜æ€§èƒ½çš„å¤šè¯­è¨€æ”¯æŒçš„ç›´æ¥é“¾æ¥" title="ç‰¹æ€§äºŒï¼šé«˜æ€§èƒ½çš„å¤šè¯­è¨€æ”¯æŒçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åŸºäº Wasm çš„èƒ½åŠ›ï¼Œå¯ä»¥ç”¨å¤šç§è¯­è¨€ç¼–å†™æ’ä»¶ï¼Œå¯¹å¼€å‘äººå‘˜æ›´åŠ å‹å¥½ã€‚å®ç°å¤šè¯­è¨€å¼€å‘æ’ä»¶çš„å¦ä¸€ç§æ–¹å¼æ˜¯åŸºäº RPC å’Œç½‘å…³è¿›ç¨‹é€šä¿¡çš„å¤–ç½®è¿›ç¨‹/æœåŠ¡æ’ä»¶ï¼Œè¿™ç§æ¨¡å¼ä¼šæœ‰é¢å¤–çš„ IO å¼€é”€ï¼Œå¹¶ä¸”é™„åŠ çš„è¿›ç¨‹/æœåŠ¡ä¹Ÿå¸¦æ¥é¢å¤–çš„è¿ç»´å¤æ‚åº¦ã€‚ç›®å‰å¤§å®¶å¯¹ Wasm æ’ä»¶çš„æ€§èƒ½æ¯”è¾ƒå…³å¿ƒï¼Œä»æˆ‘ä»¬çš„æµ‹è¯•æ•°æ®æ¥çœ‹ï¼ŒæŒ‡ä»¤æ‰§è¡Œæ€§èƒ½ç›¸æ¯”åŸç”Ÿçš„ C++ è¯­è¨€ç¡®å®æœ‰å·®è·ï¼Œä½†æ€§èƒ½å’Œ Lua æŒå¹³ï¼Œä¸”è¿œå¥½äºå¤–ç½®æ’ä»¶ã€‚
å¯¹äºä¸€æ®µé€»è¾‘ï¼š<code>å¾ªç¯æ‰§è¡Œ20æ¬¡è¯·æ±‚å¤´è®¾ç½®ï¼Œå¾ªç¯æ‰§è¡Œ20æ¬¡è¯·æ±‚å¤´è·å–ï¼Œå¾ªç¯æ‰§è¡Œ20æ¬¡è¯·æ±‚å¤´ç§»é™¤ã€‚</code>æˆ‘ä»¬å¯¹æ¯”äº†åˆ†åˆ«ç”¨ Lua å’Œä¸åŒè¯­è¨€å®ç°çš„ Wasm çš„å¤„ç†æ€§èƒ½ï¼Œä¸‹é¢æ˜¯å¯¹å•ä¸ªè¯·æ±‚å»¶æ—¶çš„å½±å“å¯¹æ¯”ï¼š</p><table><thead><tr><th><strong>å®ç°è¯­è¨€</strong></th><th><strong>è¯·æ±‚å»¶æ—¶å¢åŠ </strong></th></tr></thead><tbody><tr><td>Lua</td><td>0.20æ¯«ç§’</td></tr><tr><td>Wasm (C++)</td><td>0.19æ¯«ç§’</td></tr><tr><td>Wasm (Go)</td><td>0.20æ¯«ç§’</td></tr><tr><td>Wasm (Rust)</td><td>0.21æ¯«ç§’</td></tr><tr><td>Wasm (AssemblyScript)</td><td>0.21æ¯«ç§’</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç‰¹æ€§ä¸‰å®‰å…¨æ²™ç®±">ç‰¹æ€§ä¸‰ï¼šå®‰å…¨æ²™ç®±<a href="#ç‰¹æ€§ä¸‰å®‰å…¨æ²™ç®±" class="hash-link" aria-label="ç‰¹æ€§ä¸‰ï¼šå®‰å…¨æ²™ç®±çš„ç›´æ¥é“¾æ¥" title="ç‰¹æ€§ä¸‰ï¼šå®‰å…¨æ²™ç®±çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>Envoy ç›®å‰æ”¯æŒå¤šç§ Wasm çš„è¿è¡Œæ—¶ï¼Œä¾‹å¦‚ V8ï¼ŒWAMRï¼Œwasmtime ç­‰ç­‰ï¼Œè¿™äº›è¿è¡Œæ—¶å‡æä¾›äº†å®‰å…¨æ²™ç®±èƒ½åŠ›ï¼Œå³ Wasm æ’ä»¶ä¸­å‡ºç°äº†è®¿é—®ç©ºæŒ‡é’ˆã€å¼‚å¸¸æœªæ•è·ç­‰é€»è¾‘ï¼Œä¹Ÿä¸ä¼šä»¤ Envoy å®¿ä¸»è¿›ç¨‹ Crashã€‚å¹¶ä¸”å¯ä»¥é€šè¿‡é…ç½®ï¼Œåœ¨æ’ä»¶é€»è¾‘å‡ºç°å¼‚å¸¸åè¿›è¡Œ Fail Open å¤„ç†ï¼Œè·³è¿‡æ’ä»¶çš„æ‰§è¡Œé€»è¾‘ï¼Œå°†å¯¹ä¸šåŠ¡çš„å½±å“é™è‡³æœ€ä½ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¼€æºç¤¾åŒº">å¼€æºç¤¾åŒº<a href="#å¼€æºç¤¾åŒº" class="hash-link" aria-label="å¼€æºç¤¾åŒºçš„ç›´æ¥é“¾æ¥" title="å¼€æºç¤¾åŒºçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ç‰¹åˆ«æ„Ÿè°¢ Istio/Envoy ç¤¾åŒºçš„å‰ç½®å·¥ä½œï¼Œè®© Higress å¯ä»¥å®ç°å¯¹ Ingress èµ„æºå¯ç”¨ WasmPlugin ï¼Œå¢å¼ºäº† Ingress Controller çš„è‡ªå®šä¹‰æ‰©å±•èƒ½åŠ›ã€‚
ç‰¹åˆ«æ„Ÿè°¢ Tetrate ç¤¾åŒºå®ç°çš„ proxy-wasm-go-sdkï¼ŒHigress åœ¨è¿™ä¸ªåŸºç¡€ä¸Šå°è£…äº† wasm-go sdkï¼Œé™ä½äº†å¼€å‘æ’ä»¶çš„ä¸Šæ‰‹é—¨æ§›ã€‚
Higress å¯¹ Istio/Envoy çš„ Wasm èƒ½åŠ›åšäº†ä¸€äº› Bugfix çš„å·¥ä½œï¼Œç›®å‰å·²ç»éƒ½åˆå¹¶è¿›äº†ä¸Šæ¸¸ç¤¾åŒºã€‚åç»­çš„ä¸€äº› Feature èƒ½åŠ›ï¼Œä¹Ÿä¼šæŒç»­åå“ºä¸Šæ¸¸ç¤¾åŒºã€‚
åŒæ—¶æ¬¢è¿å¤§å®¶ä¸€èµ·ä¸º Higress çš„æ’ä»¶ä»¥åŠå…¶ä»–ç¤¾åŒºç”Ÿæ€æ·»ç –åŠ ç“¦ï¼Œä¸º Higress è´¡çŒ®è¯·å‚è€ƒæ–‡æ¡£ï¼š
<a href="https://higress.io/zh-cn/docs/developers/guide_dev.html" target="_blank" rel="noopener noreferrer">https://higress.io/zh-cn/docs/developers/guide_dev.html</a></p>]]></content>
        <author>
            <name>æ¾„æ½­</name>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[æ¬¢è¿æŠ¥åHigressé¦–æ¬¡çº¿ä¸‹Meetup]]></title>
        <id>https://higress.io/zh-cn/blog/first-meetup</id>
        <link href="https://higress.io/zh-cn/blog/first-meetup"/>
        <updated>2022-11-22T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[çº¿ä¸‹MeetupæŠ¥å]]></summary>
        <content type="html"><![CDATA[<p><img loading="lazy" src="https://img.alicdn.com/imgextra/i4/O1CN013pqDug1iTf1wdYIat_!!6000000004414-2-tps-800-8358.png" class="img_ev3q"></p>]]></content>
        <author>
            <name>æ¾„æ½­</name>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[é˜¿é‡Œå·´å·´é‡ç£…å¼€æºäº‘åŸç”Ÿç½‘å…³]]></title>
        <id>https://higress.io/zh-cn/blog/higress</id>
        <link href="https://higress.io/zh-cn/blog/higress"/>
        <updated>2022-11-04T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[ä»‹ç»Higressçš„è¯ç”ŸèƒŒæ™¯ä¸å‘å±•å†ç¨‹]]></summary>
        <content type="html"><![CDATA[<p>Higress æ˜¯ä¸€æ¬¾æ ‡å‡†åŒ–ã€é«˜é›†æˆã€æ˜“æ‰©å±•ã€çƒ­æ›´æ–°çš„äº‘åŸç”Ÿç½‘å…³ã€‚</p><p>Higress æºè‡ªé˜¿é‡Œå·´å·´å†…éƒ¨ç”µå•†ã€äº¤æ˜“ç­‰æ ¸å¿ƒç”Ÿäº§åœºæ™¯çš„å®è·µæ²‰æ·€ï¼Œéµå¾ª Ingress/Gateway API æ ‡å‡†ï¼Œå°†æµé‡ç½‘å…³ã€å¾®æœåŠ¡ç½‘å…³ã€å®‰å…¨ç½‘å…³ä¸‰åˆä¸€ï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šæ‰©å±•äº†æœåŠ¡ç®¡ç†æ’ä»¶ã€å®‰å…¨ç±»æ’ä»¶å’Œè‡ªå®šä¹‰æ’ä»¶ï¼Œé«˜åº¦é›†æˆ K8s å’Œå¾®æœåŠ¡ç”Ÿæ€ï¼ŒåŒ…æ‹¬ Nacos æ³¨å†Œå’Œé…ç½®ã€Sentinel é™æµé™çº§ç­‰èƒ½åŠ›ï¼Œå¹¶æ”¯æŒè§„åˆ™å˜æ›´æ¯«ç§’çº§ç”Ÿæ•ˆç­‰çƒ­æ›´æ–°èƒ½åŠ›ã€‚</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i1/O1CN01VYKTu922ZsiibaCml_!!6000000007135-2-tps-2178-1198.png" alt="image.png" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="higressçš„å‰ä¸–ä»Šç”Ÿ">Higressçš„å‰ä¸–ä»Šç”Ÿ<a href="#higressçš„å‰ä¸–ä»Šç”Ÿ" class="hash-link" aria-label="Higressçš„å‰ä¸–ä»Šç”Ÿçš„ç›´æ¥é“¾æ¥" title="Higressçš„å‰ä¸–ä»Šç”Ÿçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="è¯ç”ŸèƒŒæ™¯">è¯ç”ŸèƒŒæ™¯<a href="#è¯ç”ŸèƒŒæ™¯" class="hash-link" aria-label="è¯ç”ŸèƒŒæ™¯çš„ç›´æ¥é“¾æ¥" title="è¯ç”ŸèƒŒæ™¯çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>Higress çš„åˆ›å»ºæºäºé˜¿é‡Œå†…éƒ¨çš„â€œæœ¬åœ°ç”Ÿæ´»æˆ˜å½¹â€ï¼Œè¯¥æˆ˜å½¹å§‹äºâ€œæ”¯ä»˜å®2020åˆä½œä¼™ä¼´å¤§ä¼šâ€ï¼Œåœ¨æ­¤å¤§ä¼šä¸Šæ”¯ä»˜å®å®£å¸ƒå‡çº§ä¸ºæ•°å­—ç”Ÿæ´»å¼€æ”¾å¹³å°ã€‚è¯¥æˆ˜å½¹çš„æ ¸å¿ƒæŠ€æœ¯ç›®æ ‡ï¼Œæ˜¯å®ç°é˜¿é‡Œå·´å·´ä¸šåŠ¡åŸŸä¸èš‚èšä¸šåŠ¡åŸŸä¹‹é—´ RPC ç›´æ¥è°ƒç”¨ï¼Œä½†å› é˜¿é‡Œå·´å·´ä¸èš‚èšä¸šåŠ¡åŸŸç½‘ç»œæ˜¯éš”ç¦»çš„ï¼Œå³ç½‘ç»œæ˜¯ä¸é€šçš„ï¼Œå¾ˆè‡ªç„¶æƒ³åˆ°åˆ©ç”¨ç½‘å…³æ¥è§£å†³æ­¤é—®é¢˜ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æŠ€æœ¯é€‰å‹">æŠ€æœ¯é€‰å‹<a href="#æŠ€æœ¯é€‰å‹" class="hash-link" aria-label="æŠ€æœ¯é€‰å‹çš„ç›´æ¥é“¾æ¥" title="æŠ€æœ¯é€‰å‹çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åˆ©ç”¨ç½‘å…³æ¥è§£å†³é˜¿é‡Œå·´å·´ä¸èš‚èšè·¨ä¸šåŠ¡åŸŸ RPC äº’é€šé—®é¢˜ï¼Œé¦–å…ˆè¦å¯¹ç½‘å…³åšæŠ€æœ¯é€‰å‹ã€‚</p><p>ç›¸ä¿¡å¤§å®¶ä¹Ÿéƒ½æˆ–å¤šæˆ–å°‘çŸ¥é“ï¼Œé˜¿é‡Œå·´å·´å¼€æºçš„åå‘ä»£ç†ç¨‹åº Tengineã€‚Tengine åœ¨é˜¿é‡Œå†…éƒ¨ç»Ÿä¸€æ¥å…¥ç½‘å…³ AServer ä¸­è¢«ä½¿ç”¨ï¼Œæˆ‘ä»¬å›¢é˜Ÿå°±æ˜¯è´Ÿè´£å…¶å¼€å‘è¿ç»´ï¼ŒåŒæ—¶æˆ‘ä»¬å›¢é˜Ÿä¹Ÿåœ¨è´Ÿè´£é˜¿é‡Œå·´å·´ Service Mesh çš„è½åœ°ï¼Œä¸ç®¡æ˜¯å¯¹ Tengine è¿˜æ˜¯å¯¹ Istio + Envoy è¿™å¥—æ¶æ„éƒ½æ¯”è¾ƒç†Ÿæ‚‰ã€‚</p><p>åœ¨é€‰å‹æ—¶ï¼Œè™½ç„¶ä¹Ÿè°ƒç ”è¿‡ä¸€äº›å…¶ä»–çš„è½¯ä»¶ï¼Œä½†è€ƒè™‘åˆ°ç½‘å…³å¯¹æ€§èƒ½ã€å¯é æ€§çš„é«˜è¦æ±‚ï¼Œåœ¨ç»“åˆæˆ‘ä»¬è‡ªèº«çš„ç½‘å…³è¿ç»´ç»éªŒï¼Œå†³å®šçœ‹çœ‹ Tengine ä¸ Envoy æ˜¯å¦å¯ä»¥æ»¡è¶³æˆ‘ä»¬çš„ä¸šåŠ¡éœ€æ±‚ï¼Œåœ¨å¯¹æ¯”æ—¶æˆ‘ä»¬ç½—åˆ—äº†å››ä¸ªå…³é”®è¦ç‚¹ï¼Œå…¶å¯¹æ¯”å¦‚ä¸‹ï¼š</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i3/O1CN0154SFHA1geXCJT8KIm_!!6000000004167-2-tps-2568-888.png" alt="image.png" class="img_ev3q">
è¿™é‡Œæä¸€ä¸‹â€œä¸ºä»€ä¹ˆæˆ‘ä»¬è®¤ä¸ºé…ç½®çš„çƒ­æ›´æ–°ï¼Œæ˜¯éå¸¸é‡è¦çš„â€ï¼Ÿ</p><p>Tengine/Nginx çš„é…ç½®æ›´æ–°éœ€è¦ reloadï¼Œreload éœ€è¦é‡å¯ worker è¿›ç¨‹ï¼Œé‡å¯æ—¶ä¼šå¼•èµ·æµé‡æŠ–åŠ¨ï¼Œå¯¹é•¿è¿æ¥å½±å“å°¤ä¸ºæ˜æ˜¾ã€‚åœ¨ç½‘å…³çš„é›†ç¾¤è§„æ¨¡éå¸¸å¤§æ—¶ï¼Œæ›´æ˜¯ä¸èƒ½éšæ„çš„åš reloadï¼Œè¿™æ—¶å°±ä¼šå¼•å‘ä¸€ä¸ªçŸ›ç›¾ç‚¹ï¼šä¸šåŠ¡å‘ç½‘å…³æäº¤é…ç½®åï¼Œå¸Œæœ›èƒ½å¿«é€ŸéªŒè¯ï¼Œä½†å—é™äº reload æœºåˆ¶å’Œç¨³å®šæ€§è¦æ±‚ï¼Œæ— æ³•æ»¡è¶³ä¸šåŠ¡å¿«é€ŸéªŒè¯ä¸å¿«é€Ÿè¯•é”™çš„è¯‰æ±‚ã€‚</p><p>ç°åœ¨å·²ç»æœ‰å¾ˆå¤šä¸»æµåº”ç”¨é€‰æ‹©é‡‡ç”¨é•¿è¿æ¥ï¼ŒHTTP 1.1ä¸€èˆ¬é»˜è®¤ä¼šä½¿ç”¨Keep-Aliveå»ä¿æŒé•¿è¿æ¥ï¼Œåç»­HTTP 2ä»¥åŠHTTP 3ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œéšç€ç½‘ç»œåè®®çš„å‘å±•ï¼Œæœªæ¥ä½¿ç”¨é•¿è¿æ¥ä¼šå˜å¾—æ›´åŠ æ™®éã€‚è€Œé…ç½®çƒ­æ›´æ–°å¤©ç„¶å¯¹é•¿è¿æ¥éå¸¸å‹å¥½ã€‚</p><p>å¦‚ä½•è§£å†³è¿™ç‚¹å‘¢ï¼Ÿ</p><p>ä¸€æ˜¯é‡‡ç”¨ä¸¤å±‚ç½‘å…³ï¼Œå³æµé‡ç½‘å…³ + ä¸šåŠ¡ç½‘å…³ï¼›äºŒæ˜¯å®ç°ç½‘å…³åŸç”Ÿæ”¯æŒé…ç½®çƒ­æ›´æ–°ã€‚é™¤äº†å¯¹æ¯”ä¸åŒæ–¹æ¡ˆçš„ä¼˜åŠ£åŠ¿ï¼Œæˆ‘ä»¬ä¹Ÿè°ƒç ”äº† Envoy ä½œä¸ºç½‘å…³åœ¨ä¸šç•Œçš„è¶‹åŠ¿ï¼Œç»“è®ºæ˜¯ç›®å‰ Envoy ä½œä¸º K8s ä¸­çš„ Ingress Provider å¢é•¿æœ€å¿«çš„äº‹å®ï¼ˆIngress Provider æŒ‡ K8s Ingress è§„èŒƒå…·ä½“å®ç°ï¼Œå›  K8s Ingress è‡ªèº«åªæ˜¯è§„èŒƒå®šä¹‰ï¼Œæ˜¯ K8s ä¸‹å¤–éƒ¨æµé‡è¿›å…¥é›†ç¾¤å†…éƒ¨çš„ç½‘å…³è§„èŒƒå®šä¹‰ï¼‰ï¼Œæˆ‘ä»¬æœ€ç»ˆé€‰æ‹©äº† Envoy æ¥å®ç°ä¸¤å±‚ç½‘å…³ã€‚</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i1/O1CN01noxgsq1izikgjVavA_!!6000000004484-2-tps-2948-1054.png" alt="image.png" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å‘å±•å†ç¨‹">å‘å±•å†ç¨‹<a href="#å‘å±•å†ç¨‹" class="hash-link" aria-label="å‘å±•å†ç¨‹çš„ç›´æ¥é“¾æ¥" title="å‘å±•å†ç¨‹çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>Higressä»æœ€åˆç¤¾åŒºçš„ Istio + Envoyï¼Œåˆ°ç»å†é˜¿é‡Œå·´å·´å†…éƒ¨çš„è‡ªç ”æ‰©å±•ï¼Œå†åˆ°å¤§è§„æ¨¡ç”ŸæˆéªŒè¯ï¼Œæœ€åå®Œæˆå•†ä¸šåŒ–äº§å“çš„å‘å¸ƒï¼Œå…¶æ•´ä¸ªè¿‡ç¨‹ä»‹ç»å¦‚ä¸‹ï¼š</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i1/O1CN01ZzyYWg1mJoyzwgeoC_!!6000000004934-2-tps-2296-908.png" alt="image.png" class="img_ev3q">
ä¸‹é¢çš„ç« èŠ‚ä¼šå¯¹Higressçš„å„ä¸ªé˜¶æ®µåšè¿›ä¸€æ­¥çš„è¯¦ç»†è¯´æ˜ã€‚</p><h1>Higress (2020.05~2020.11)</h1><p>æ­¤é˜¶æ®µçš„å¤§ç›®æ ‡æ˜¯ä¸ºäº†æ»¡è¶³é›†å›¢ä¸èš‚èšRPCäº’é€šï¼Œé™ä½å…¨é“¾è·¯çš„RTï¼Œè§£å†³åŸs2sé“¾è·¯å› RTè¿‡é«˜å¸¦æ¥çš„ç”¨æˆ·ä½“éªŒå·®åŠæ— æ³•æ»¡è¶³æ›´å¤šé›†å›¢ä¸èš‚èšååŒåœºæ™¯è¦æ±‚ã€‚s2sé“¾è·¯æ˜¯èµ°å…¬ç½‘é“¾è·¯ï¼Œåè®®é‡‡ç”¨HTTPã€‚ä¸èš‚èšäº’é€šç½‘å…³çš„æ¶æ„å›¾å¦‚ä¸‹ï¼Œè¿™é‡Œä»¥ä¸Šæµ·äº‘å•å…ƒä¸ºèƒŒæ™¯è¯´æ˜ã€‚</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i2/O1CN01uEUUkR1Er4nkwYiOW_!!6000000000404-2-tps-2036-1088.png" alt="image.png" class="img_ev3q"></p><p>ä¸Šå›¾ä¸»è¦å±•ç¤ºçš„æ˜¯é›†å›¢ä¾§çš„æ¶æ„ï¼Œæœ€ç»ˆé‡‡ç”¨äº†Istio+Envoyçš„æ–¹æ¡ˆï¼Œåœ¨éƒ¨ç½²çš„æ—¶å€™åˆåˆ†æˆäº†å‡ºå£é›†ç¾¤å’Œå…¥å£é›†ç¾¤ã€‚ä¹‹æ‰€ä»¥æ‹†æˆä¸¤ä¸ªé›†ç¾¤ï¼Œä¸€æ–¹é¢æ˜¯å½“æ—¶ä¸¤è¾¹äº’è®¿ï¼Œèš‚èšè°ƒé›†å›¢çš„æµé‡è¦è¿œè¿œå¤§äºé›†å›¢è°ƒèš‚èšçš„æµé‡ï¼Œä¸Šä¸‹è¡Œç‰¹åˆ«ä¸å‡ç­‰ï¼›å¦ä¸€æ–¹é¢æ˜¯åˆ†å¼€ä¹‹åä¸¤ä¸ªé›†ç¾¤å¯ä»¥å„è‡ªç»´æŠ¤ï¼Œç¨³å®šæ€§ä¼šæ›´å¥½ã€‚</p><p>Higress ä»å¼€å§‹ç«‹é¡¹åˆ°å®Œæˆç¬¬ä¸€æœŸç ”å‘ï¼Œç½‘å…³æ”¹é€ çš„æ ¸å¿ƒå·¥ä½œå·®ä¸å¤šä¸¤ä¸ªäººæŠ•å…¥äº†ä¸€ä¸ªåŠæœˆå·¦å³ï¼Œå…¶ä¸­è¿˜æ¶‰åŠåˆ°å¤§é‡ç½‘ç»œã€å®‰å…¨ç­‰åè°ƒéƒ¨é—¨çš„å·¥ä½œã€‚Higressæ¶æ„å¹¶æ²¡æœ‰å®Œå…¨æŒ‰ç…§ç¤¾åŒºæ–¹æ¡ˆæ¥è®¾è®¡ï¼Œç¤¾åŒºç‰ˆæœ¬ä¸­é…ç½®å˜æ›´å’ŒæœåŠ¡å‘ç°ä½¿ç”¨çš„æ˜¯K8sï¼Œåœ¨é˜¿é‡Œå†…éƒ¨åºå¤§çš„æœåŠ¡è§„æ¨¡åŠé…ç½®é‡ä¸‹ç¤¾åŒºåŸç”Ÿæ–¹æ¡ˆä¸ç®¡åœ¨ç¨³å®šæ€§åŠæ€§èƒ½ä¸Šéƒ½æ— æ³•æ»¡è¶³è¦æ±‚ï¼Œå› æ­¤é˜¿é‡Œè¿™å¥—æ–¹æ¡ˆé‡ç‚¹å¯¹æœåŠ¡å‘ç°ã€é…ç½®å­˜å‚¨ç»„ä»¶åšäº†æ›¿æ¢ï¼ŒåŠä¼˜åŒ–xDSæ¨é€æ€§èƒ½ã€‚</p><p>Higress ä¸Šçº¿åï¼Œé¡ºåˆ©è¾¾æˆäº†æœ€åˆçš„ä¸šåŠ¡è¯‰æ±‚ï¼Œç›®å‰èš‚èšäº’é€šç½‘å…³é“¾è·¯å·²ç»æˆä¸ºé›†å›¢ä¸èš‚èšäº’é€šçš„é¦–é€‰æ–¹æ¡ˆï¼Œä¸€äº›æ”¯ä»˜é“¾è·¯ä¹Ÿè¿ç§»åˆ°äº†è¯¥æ–¹æ¡ˆï¼Œä¾‹å¦‚å……å€¼ä¸­å¿ƒç­‰ï¼Œå…·ä½“è¾¾åˆ°çš„æˆæœç®€è¿°å¦‚ä¸‹ï¼š</p><ul><li>èš‚èšè°ƒç”¨é›†å›¢é“¾è·¯ç›¸æ¯”åŸé“¾è·¯RTé™ä½50%ï¼Œç½‘å…³è‡ªèº«RT 0.3msã€‚</li><li>HigressæˆåŠŸå¤åˆ¶åˆ°é›†å›¢ä¸èš‚èšçš„æ¶ˆæ¯äº’é€šï¼Œç›®å‰é›†å›¢ä¸èš‚èšçš„æ¶ˆæ¯äº’é€šä¹Ÿæ˜¯èµ°çš„Higress Tripleé“¾è·¯ã€‚</li><li>å¾®æœåŠ¡ç½‘å…³ä»5æœˆä»½ä¸Šçº¿ï¼Œç›®å‰å·²ç»æˆä¸ºé›†å›¢ä¸èš‚èšä¸œè¥¿å‘æµé‡çš„æ ¸å¿ƒé“¾è·¯ï¼Œé£çŒªã€æ‰‹æ·˜ã€å£ç¢‘ã€é¥¿äº†ä¹ˆã€1688ã€éƒ¨åˆ†å¯¼è´­åº”ç”¨ã€å•†å“åº“ã€è¯„ä»·ç­‰ä¸šåŠ¡å·²æˆåŠŸä¸Šçº¿ï¼Œè€Œä¸”åœ†æ»¡æ”¯æ’‘äº†618å¤§ä¿ƒã€æ”¯ä»˜å®717å¤è‡³å¤§ä¿ƒã€‚</li><li>åœ¨2020åŒ11å¤§ä¿ƒæ¯ç§’ æ•°åä¸‡ çš„è¯·æ±‚æµé‡ï¼Œåœ†æ»¡æ”¯æ’‘äº†åŒ11åŸå¸‚ç”Ÿæ´»ç‹‚æ¬¢èŠ‚çš„äº’åŠ¨ä¼šåœºã€‚</li><li>åœ¨æŠ€æœ¯ä¾§å®Œæˆäº†Higressåœ¨ä¸œè¥¿å‘æµé‡åˆ†å‘çš„æ¢ç´¢ã€‚</li></ul><h1>Higress (2020.12~2021.10)</h1><p>éšç€é˜¿é‡Œå·´å·´ä¸Šäº‘æˆ˜å½¹çš„æ¨è¿›ï¼Œè¶Šæ¥è¶Šå¤šçš„åœºæ™¯æ‰¾åˆ°æˆ‘ä»¬ã€‚æ¯”å¦‚äº‘ä¸Šäº‘ä¸‹ä¸šåŠ¡äº’é€šï¼Œç”±äº Tengine æœåŠ¡ç®¡ç†å¼±å¯¼è‡´é˜¿é‡Œå†…éƒ¨å¤§é‡äºŒå±‚å¾®æœåŠ¡ç½‘å…³éœ€è¦æ”¶æ•›ï¼Œè¿™å°±éœ€è¦ä»ä¸šåŠ¡ä¸Šåš Tengine+Envoy ä¸¤å±‚ç½‘å…³çš„æ¼”è¿›ï¼Œæ‰¿æ‹…å—åŒ—å‘ç½‘å…³æµé‡ã€‚åœ¨ 2020 å¹´ 12 æœˆä»½ï¼Œå›¢é˜Ÿå¼€å§‹äº†Higress æ¶æ„çš„ç»§ç»­æ¼”è¿›ï¼Œä»¥ä¼˜é…·åœºæ™¯ä¸ºä¾‹çš„æ¼”è¿›è¿‡ç¨‹å¦‚ä¸‹å›¾ï¼š</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i1/O1CN01t1RGjj1RpKIIm5zQU_!!6000000002160-2-tps-1614-1194.png" alt="image.png" class="img_ev3q"></p><p>Higress  å—åŒ—å‘çš„æ¶æ„å›¾å¦‚ä¸‹ï¼š</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i1/O1CN01B2guUL1Q8RauU7pCo_!!6000000001931-2-tps-2390-1242.png" alt="image.png" class="img_ev3q"></p><p>åœ¨ä¸¤å±‚æ¶æ„ä¸­ï¼ŒHigress ç½‘å…³æ›´å¤šæ‰¿æ‹…äº†å¾®æœåŠ¡ç½‘å…³å’Œå¾®æœåŠ¡æ²»ç†çš„éœ€æ±‚ï¼Œå’Œ Tengine æµé‡ç½‘å…³å®Œæˆäº†æ•´åˆã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹é‡Œï¼Œå›¢é˜Ÿæ”¯æ’‘ä¼˜é…·å†…éƒ¨å¤šä¸ªäºŒå±‚å¾®æœåŠ¡ç½‘å…³ç»Ÿä¸€çš„å·¥ä½œï¼Œå¤§å¹…æå‡äº†æ€§èƒ½å’Œè¿ç»´æ•ˆç‡ã€‚</p><p>åœ¨è¿™ä¸€é˜¶æ®µï¼ŒHigress Gateway å®ç°äº†ä¸œè¥¿å‘ã€å—åŒ—å‘å…¨åŸŸæµé‡çš„è°ƒåº¦åˆ†å‘ï¼Œä¸œè¥¿å‘ä¸Šä¸ä»…æ”¯æŒè·¨ä¸šåŠ¡åŸŸçš„èš‚èš RPC äº’é€šï¼Œä¹Ÿæ‰©å±•åˆ°äº†æ··åˆäº‘çš„äº‘ä¸Šäº‘ä¸‹ RPC äº’é€šåœºæ™¯ï¼Œè¦†ç›–é’‰é’‰æ–‡æ¡£ã€é˜¿é‡Œè§†é¢‘äº‘ã€è¾¾æ‘©é™¢çš„åº—å°èœœã€æ™ºæ…§æ•°å­—äººç­‰ã€‚è¯¥é˜¶æ®µçš„ä¸šåŠ¡å¤§å›¾å¦‚ä¸‹ï¼ˆäº‘ä¸Šäº‘ä¸‹äº’é€šåœºæ™¯ï¼Œä»¥é’‰é’‰ä¸ºä¾‹è¯´æ˜ï¼‰ï¼š</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i4/O1CN01VQ51BO2A5D7oqbLG6_!!6000000008151-2-tps-2370-1200.png" alt="image.png" class="img_ev3q"></p><p>éšç€ Higress Gateway è¦†ç›–çš„ä¸šåŠ¡åœºæ™¯è¶Šæ¥å¤šï¼Œåœ¨è·Ÿä¼˜é…·æŒç»­åˆä½œçš„è¿‡ç¨‹ä¸­ï¼ŒåŒæ–¹å›¢é˜Ÿä¸çº¦è€ŒåŒæå‡ºäº†ä¸€ä¸ªè®¾æƒ³ï¼šTengine Gatewayï¼ˆæ‰¿æ‹…æµé‡ç½‘å…³è§’è‰²ï¼‰ + Higress Gatewayï¼ˆæ‰¿æ‹…å¾®æœåŠ¡ç½‘å…³è§’è‰²ï¼‰çš„ä¸¤å±‚ç½‘å…³æ˜¯å¦å¯ä»¥åˆå¹¶ä¸ºä¸€å±‚ Higress Gatewayï¼Ÿ</p><p>æˆ‘ä»¬å¯¹è¿™ä¸€æƒ³æ³•åšäº†è°ƒç ”ï¼Œç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œå¹¶ä¸”å½“æ—¶å¤§å®¶ä¹Ÿåˆä½œè®¾è®¡äº†æ–°çš„æ¶æ„æ–¹æ¡ˆï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i2/O1CN01DMqpay1COYubY2QrN_!!6000000000071-2-tps-2394-1250.png" alt="image.png" class="img_ev3q"></p><p>è™½ç„¶ç”±äºå„ç§å„æ ·çš„åŸå› ï¼Œè¿™ä¸ªæ–¹æ¡ˆæœ€ç»ˆæ²¡æœ‰è·Ÿä¼˜é…·ç»§ç»­å¾€ä¸‹æ¨è¿›ã€‚ä½†è¿™ä¸ªæ¼”è¿›æ–¹å‘è®©å›¢é˜Ÿæ˜ç¡®äº†ç½‘å…³æ–°çš„å‘å±•è¶‹åŠ¿ï¼š<strong>åœ¨ä»¥ K8s ä¸»å¯¼çš„å®¹å™¨åŒ–èƒŒæ™¯ä¸‹ï¼Œç”±äºK8s é›†ç¾¤å†…å¤–ç½‘ç»œçš„å¤©ç„¶éš”ç¦»æ€§ï¼Œç”¨æˆ·éœ€è¦ä¸€æ¬¾å…¼é¡¾é«˜æ€§èƒ½ä¸å®‰å…¨æ€§ï¼Œä»¥åŠå¼ºå¤§æœåŠ¡æ²»ç†èƒ½åŠ›çš„å…¥å£ç½‘å…³ã€‚è¿™ä¹Ÿä¸ºåç»­å›¢é˜Ÿå°†æŠ€æœ¯æ²‰æ·€å˜æˆäº‘äº§å“ã€æ¨è¿›Higressçš„è¯ç”Ÿæ‰“ä¸‹äº†åŸºç¡€ã€‚</strong></p><p>2021 å¹´ï¼Œé˜¿é‡Œå·´å·´å¼€å¯äº†ä¸­é—´ä»¶ä¸‰ä½ä¸€ä½“æˆ˜å½¹ï¼Œç›®æ ‡æ˜¯ç”¨äº‘äº§å“æ”¯æ’‘é›†å›¢ä¸šåŠ¡ã€‚<strong>æˆ‘ä»¬å¼€å§‹å°†å­µåŒ–æˆç†Ÿçš„HigressæŠ€æœ¯æ²‰æ·€ä¸ºäº‘äº§å“ï¼Œå³ç›®å‰é˜¿é‡Œäº‘ä¸Šæä¾›çš„ MSE äº‘åŸç”Ÿç½‘å…³</strong>ï¼Œä¸€æ–¹é¢é¢å‘å¹¿å¤§çš„å…¬æœ‰äº‘ç”¨æˆ·æä¾›æ‰˜ç®¡çš„ç½‘å…³æœåŠ¡ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿå¯¹å†…æœåŠ¡é›†å›¢ã€‚MSE äº‘åŸç”Ÿç½‘å…³çš„æŠ€æœ¯æ¶æ„ç®€å›¾å¦‚ä¸‹ï¼š</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i1/O1CN01jCUMA11It93SO68gE_!!6000000000950-2-tps-1570-1262.png" alt="image.png" class="img_ev3q"></p><h1>Higress (2021.11~2022.11)</h1><p>éšç€Higressæˆä¸ºäº‘äº§å“æœåŠ¡äºæ›´å¤šå¤–éƒ¨ç”¨æˆ·ï¼Œæˆ‘ä»¬é€æ­¥å‘ç°ç”¨æˆ·å¯¹Higressæå‡ºäº†æ›´é«˜çš„è¦æ±‚ï¼Œå…¶ä¸­åé¦ˆè¾ƒå¤šçš„å¤§çš„éœ€æ±‚ç‚¹æ˜¯æ’ä»¶æ‰©å±•ã€Wafé˜²æŠ¤ã€å¤šæ³¨å†Œä¸­å¿ƒã€Nginx Ingressæ³¨è§£å…¼å®¹ä»¥åŠHTTPè½¬Dubboåè®®ï¼Œå½“ç„¶ä¹Ÿæœ‰å¾ˆå¤šå°çš„éœ€æ±‚ç‚¹åœ¨æ­¤å°±ä¸ä¸€ä¸€åˆ—å‡ºï¼Œå› æ­¤è¯¥é˜¶æ®µæˆ‘ä»¬é‡ç‚¹å‘åŠ›åœ¨ä¸Šè¿°ç”¨æˆ·åé¦ˆçš„é«˜é¢‘éœ€æ±‚ã€‚</p><p>Higress æä¾›çš„æ’ä»¶å¸‚åœºï¼Œå…¶ä¸€é˜¶æ®µæ”¯æŒWasmæ’ä»¶ï¼Œæ»¡è¶³è¿½æ±‚é«˜æ€§èƒ½ã€é«˜å®‰å…¨çš„ç”¨æˆ·å¯¹ç½‘å…³çš„æ‰©å±•è¯‰æ±‚ï¼ŒäºŒé˜¶æ®µä¼šæ”¯æŒLuaæ’ä»¶ï¼Œæ»¡è¶³ä¼ ç»Ÿç”¨æˆ·ä½¿ç”¨Luaçš„æ‰©å±•çš„è¯‰æ±‚ï¼Œå¦‚Nginxç”¨æˆ·ï¼Œä¸‰é˜¶æ®µä¼šæ”¯æŒè¿›ç¨‹å¤–æ’ä»¶ï¼Œæ»¡è¶³å¤šè¯­è¨€ç”¨æˆ·è¯‰æ±‚ï¼Œå°¤å…¶æ˜¯Javaç”¨æˆ·å› ç°é˜¶æ®µJavaç¤¾åŒºå¯¹WebAssemblyæ”¯æŒå°šä¸å®Œå–„ä½†åˆå¸Œæœ›å¯¹ç½‘å…³è¿›è¡Œæ‰©å±•çš„è¯‰æ±‚ã€‚</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i3/O1CN01j4BOm725DO7A6PdWS_!!6000000007492-2-tps-1424-1282.png" alt="image.png" class="img_ev3q"></p><p>Higress ä¹Ÿæ”¯æŒäº†Nginx Ingressæ³¨è§£å¹³æ»‘è¿ç§»çš„èƒ½åŠ›ï¼Œæ»¡è¶³éƒ¨åˆ†ç”¨æˆ·æœŸæœ›è¿ç§»åˆ°Higressä½†åˆä¸å¸Œæœ›é‡æ–°é…ç½®ç½‘å…³çš„è¯‰æ±‚ï¼ŒåŒæ—¶<strong>Higressæ‰“ç ´äº†Nginx Ingressåªèƒ½å…³è”å•ä¸ªK8sé›†ç¾¤çš„é™åˆ¶ï¼Œæ”¯æŒå…³è”å¤šä¸ªK8sé›†ç¾¤ï¼Œå³å¯ä»¥å°†Higressä½œä¸ºç»Ÿä¸€æ¥å…¥ç½‘å…³ä½¿ç”¨ï¼ŒåŒæ—¶åˆå¯ä»¥äº«å—Ingressçš„çº¢åˆ©</strong>ã€‚</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i2/O1CN01M65eMf1PZB6HdQsOt_!!6000000001854-2-tps-2480-1126.png" alt="image.png" class="img_ev3q"></p><p>å¯¹äºä¼ ç»Ÿä½¿ç”¨Dubboçš„å¾®æœåŠ¡ç”¨æˆ·å¸Œæœ›ä½¿ç”¨åŸç”ŸRPCæ–¹å¼æš´éœ²å¯¹å¤–æœåŠ¡ï¼Œä½†é€šå¸¸æä¾›å¤–éƒ¨è®¿é—®çš„æœåŠ¡ä»¥ä½¿ç”¨HTTPä¸ºä¸»ï¼Œä¸ºäº†å¸®åŠ©Dubboç”¨æˆ·é™ä½æœåŠ¡æš´éœ²çš„å¼€å‘æˆæœ¬ï¼ŒHigressæä¾›äº†HTTPè½¬Dubboåè®®åŠŸèƒ½ï¼Œä¸”é€šè¿‡Consoleä¸ºç”¨æˆ·æä¾›ç™½å±åŒ–çš„é…ç½®æ–¹å¼ï¼Œ<strong>æŸå®¢æˆ·ä½¿ç”¨ååé¦ˆâ€œè¿™æ˜¯ä¸šç•Œå®Œæˆåº¦æœ€é«˜çš„HTTPè½¬Dubboåè®®â€åŠŸèƒ½</strong>ã€‚</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i3/O1CN013yp9rz202KTX6AkAa_!!6000000006791-2-tps-2356-1280.png" alt="image.png" class="img_ev3q"></p><p>åœ¨äº‘åŸç”Ÿçš„æµªæ½®ä¸‹ï¼Œå¼€æºå·²ç»æˆä¸ºè½¯ä»¶å‘å±•çš„å¿…ç„¶è¶‹åŠ¿ä¸å¿«é€Ÿè·¯å¾„ï¼Œå› ä¸ºç¤¾åŒºçš„åŠ›é‡æ˜¯éå¸¸å¼ºå¤§çš„ã€‚å› æ­¤æˆ‘ä»¬å°†
è¿™å¥—ç»è¿‡å†…éƒ¨å®è·µæ²‰æ·€ä¸‹æ¥çš„ç½‘å…³æ–¹æ¡ˆHigressæ­£å¼å¯¹å¤–å¼€æºï¼Œä»¥Kubernetes Ingressç½‘å…³ä¸ºå¥‘æœºå¸¦æ¥äº†æµé‡ç½‘å…³ä¸å¾®æœåŠ¡ç½‘å…³èåˆçš„å¯èƒ½æ€§ï¼Œç»“åˆé˜¿é‡Œå†…éƒ¨å®è·µæ²‰æ·€Higresså®ç°äº†æµé‡ç½‘å…³ + å¾®æœåŠ¡ç½‘å…³ + å®‰å…¨ç½‘å…³ä¸‰åˆä¸€çš„é«˜é›†æˆèƒ½åŠ›ï¼ŒåŒæ—¶æ·±åº¦é›†æˆäº†Dubboã€Nacosã€Sentinelç­‰ï¼Œèƒ½å¤Ÿå¸®åŠ©ç”¨æˆ·æå¤§çš„é™ä½ç½‘å…³çš„éƒ¨ç½²åŠè¿ç»´æˆæœ¬ï¼Œè€Œä¸”èƒ½åŠ›ä¸æ‰“æŠ˜ã€‚</p><p><img loading="lazy" src="https://img.alicdn.com/imgextra/i2/O1CN01ad1fKt1toEafyw0GN_!!6000000005948-2-tps-1734-1360.png" alt="image.png" class="img_ev3q"></p><h1>Higress æœªæ¥å±•æœ›</h1><p>è™½ç„¶ç›®å‰äº‘åŸç”Ÿå·²ç»æˆä¸ºå¿…ç„¶è¶‹åŠ¿ï¼Œä½†ç°å®æ˜¯æœ‰å¾ˆå¤§ä¸€éƒ¨åˆ†ç”¨æˆ·å¤„äºè¿ç§»ä¸Šäº‘çš„è¿‡ç¨‹ä¸­ï¼Œåœ¨ä»ä¼ ç»Ÿæ¶æ„å‘ä»¥Kubernetes ä¸ºä»£è¡¨çš„å®¹å™¨åŒ–äº‘åŸç”Ÿæ¶æ„è¿ç§»ï¼Œå¯é¢„è§è¿™åœ¨æœªæ¥å¾ˆé•¿ä¸€æ®µæ—¶é—´ä¼šä¸€ç›´æŒç»­ï¼Œå› æ­¤ Higress åç»­ä¼šé‡ç‚¹æ”¯æŒé Kubernetes éƒ¨ç½²æ¶æ„ï¼Œä»¥ Higress + Nacos çš„ç»„åˆå½¢å¼ä¸ºç”¨æˆ·æä¾›æœ€å°é›†è¿è¡Œç¯å¢ƒï¼ŒåŒæ—¶æ»¡è¶³ç”¨æˆ·æœåŠ¡æ³¨å†Œã€é…ç½®ç®¡ç†ã€å¾®æœåŠ¡æ²»ç†çš„è¯‰æ±‚ã€‚</p><p>åœ¨ä»¥ Kubernetes ä¸ºä»£è¡¨çš„å®¹å™¨åŒ–äº‘åŸç”Ÿæ–¹å‘ï¼Œæˆ‘ä»¬åœ¨å…¼å®¹å¥½ç°æœ‰ Ingress æ ‡å‡†çš„åŸºç¡€ä¸Šï¼Œä¼šé‡ç‚¹å‘åŠ›ä¸‹ä¸€ä»£çš„Ingress æ ‡å‡† Gateway APIï¼Œåˆ©ç”¨ Gateway API å¸¦æ¥çš„å¥‘æœºæ‰“é€šå—åŒ—å‘ä¸ä¸œè¥¿å‘çš„å…¨åŸŸæµé‡è°ƒåº¦ï¼Œå¸®åŠ©ç”¨æˆ·ä½¿ç”¨ä¸€å¥—æ¶æ„æ¶æ„åŒæ—¶ç®¡ç†å¤–éƒ¨ä¸å†…éƒ¨æµé‡ï¼Œé™ä½éƒ¨ç½²è¿ç»´æˆæœ¬ã€æå‡å¼€å‘åŠè¿ç»´æ•ˆç‡ã€‚</p>]]></content>
        <author>
            <name>gengleilei</name>
        </author>
    </entry>
</feed>