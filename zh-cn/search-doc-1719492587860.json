{"searchDocs":[{"title":"Higressåœ¨2023 KubeCon Chinaçš„åˆ†äº«","type":0,"sectionRef":"#","url":"/zh-cn/blog/2023-kubecon","content":"","keywords":"Higress KubeCon","version":null},{"title":"åˆ†äº«ç®€ä»‹â€‹","type":1,"pageTitle":"Higressåœ¨2023 KubeCon Chinaçš„åˆ†äº«","url":"/zh-cn/blog/2023-kubecon#åˆ†äº«ç®€ä»‹","content":"åœ¨9æœˆ26æ—¥çš„2023 KubeConé˜¿é‡Œäº‘äº‘åŸç”Ÿå¼€æ”¾æ—¥ï¼ŒHigressçš„åˆ†äº«å†…å®¹åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š Part 1. ç”±ä¸Šæµ·è´¹èŠ®ç½‘ç»œç§‘æŠ€ç³»ç»Ÿè¿ç»´å‰¯æ€»ç›‘æˆ´å–œå†›ï¼Œå¸¦æ¥è´¹èŠ®åœ¨é€‰å‹ä¼ä¸šç‰ˆHigressä½œä¸ºK8s Ingressæ›¿ä»£Nginx Ingressçš„ä»‹ç» Part 2. ç”±Higresså¼€æºç¤¾åŒºè´Ÿè´£äººæ¾„æ½­ï¼Œå¸¦æ¥Higresså¼€æºé¡¹ç›®çš„ä»‹ç» å¼€æºç‰ˆå’Œä¼ä¸šç‰ˆæ˜¯Higressçš„ä¸€ä½“ä¸¤é¢ï¼Œé€šè¿‡æœ¬æ¬¡åˆ†äº«ï¼Œç›¸ä¿¡å¤§å®¶ä¼šå¯¹Higressæœ‰æ›´å…¨é¢çš„äº†è§£ã€‚ ","version":null,"tagName":"h2"},{"title":"Part 1. è´¹èŠ®äº’åŠ¨ä½¿ç”¨Higressä½œä¸ºKubernetes Ingresså®ç°ç¨³å®šæ€§å’Œæ€§èƒ½æå‡â€‹","type":1,"pageTitle":"Higressåœ¨2023 KubeCon Chinaçš„åˆ†äº«","url":"/zh-cn/blog/2023-kubecon#part-1-è´¹èŠ®äº’åŠ¨ä½¿ç”¨higressä½œä¸ºkubernetes-ingresså®ç°ç¨³å®šæ€§å’Œæ€§èƒ½æå‡","content":"è´¹èŠ®é€šè¿‡Higressè§£å†³äº†åŸæœ¬Nginx Ingressç½‘å…³çš„è¯¸å¤šç—›ç‚¹ï¼Œæ€§èƒ½æå‡90%ï¼Œå“åº”æ—¶é—´ä¸‹é™50%ï¼Œå¹¶å¤§å¹…æå‡ä¸šåŠ¡å…¥å£çš„ç¨³å®šåŠå®‰å…¨æ€§ï¼Œé«˜æ•ˆæ”¯æ’‘æ¯æ—¥1äº¿+ç²‰ä¸äº¤äº’ï¼Œ 4ä¸‡+çº¿ä¸‹é—¨åº—ã€æ¯æœˆ3000ä¸‡+ç¬”çš„ç§»åŠ¨æ”¯ä»˜éœ€æ±‚ã€‚ ","version":null,"tagName":"h2"},{"title":"è´¹èŠ®ä¸šåŠ¡åœºæ™¯â€‹","type":1,"pageTitle":"Higressåœ¨2023 KubeCon Chinaçš„åˆ†äº«","url":"/zh-cn/blog/2023-kubecon#è´¹èŠ®ä¸šåŠ¡åœºæ™¯","content":" è´¹èŠ®ä¸“æ³¨äºç§»åŠ¨è¥é”€ã€O2Oã€ç¤¾äº¤åª’ä½“ã€ç§»åŠ¨ç”µå•†é¢†åŸŸçš„åˆ›æ–°ä¸ç ”å‘ã€‚è´¹èŠ®äº’åŠ¨è‡ªä¸»ç ”å‘çš„è‡ªåª’ä½“å¹³å°è¿ç»´è¶…è¿‡2äº¿ç²‰ä¸ ï¼› æœ‰è¶…è¿‡4ä¸‡å®¶çº¿ä¸‹é—¨åº—é‡‡ç”¨è´¹èŠ®O2Oè§£å†³æ–¹æ¡ˆã€‚è´¹èŠ®çš„ä¸»è¦å®¢æˆ·åŒ…æ‹¬ä¼˜è¡£åº“ï¼Œå¿…èƒœå®¢ï¼Œè‚¯å¾·åŸºï¼Œæ˜Ÿå·´å…‹ï¼ŒSPGï¼Œæ¬§è±é›…ï¼ŒInnisfreeï¼Œè¿ªå¡ä¾¬ï¼Œé¡¶æ–°é›†å›¢ç­‰ã€‚  è´¹èŠ®å†…éƒ¨ä¸šåŠ¡ç³»ç»Ÿçš„æ—¥å‡å‘å¸ƒæ¬¡æ•°è¾¾åˆ°100æ¬¡ä¹‹å¤šï¼Œä¼šæ¶‰åŠåˆ°400å¤šæ¡Ingressè·¯ç”±è§„åˆ™çš„æ—¥å¸¸æ›´æ–°ï¼Œä¸”ç½‘å…³æ¯å¤©éœ€è¦æ‰¿è½½çš„PVæµé‡è¾¾åˆ°äº†1ä¸ªäº¿ã€‚Ingressç½‘å…³çš„æ€§èƒ½å’Œç¨³å®šæ€§è‡³å…³é‡è¦ã€‚ ","version":null,"tagName":"h3"},{"title":"Nginx Ingress ç—›ç‚¹â€‹","type":1,"pageTitle":"Higressåœ¨2023 KubeCon Chinaçš„åˆ†äº«","url":"/zh-cn/blog/2023-kubecon#nginx-ingress-ç—›ç‚¹","content":" é…ç½®å˜æ›´é¢‘ç¹ï¼Œå¯¼è‡´Nginxè¿›ç¨‹é¢‘ç¹é‡å¯ï¼Œå¤§é‡è¿æ¥ç¬æ—¶æ–­å¼€åå¹¶å‘é‡è¿ä¼šå¯¼è‡´åç«¯æœåŠ¡äº§ç”Ÿå‹åŠ›ï¼Œä¸¥é‡æ—¶é€ æˆå¤§é‡è¯·æ±‚å¤±è´¥ã€‚  Nginx Ingressçš„Controllerç»„ä»¶å’ŒNginxç»„ä»¶è¿è¡Œåœ¨åŒä¸€ä¸ªPODä¸­ï¼Œæ§åˆ¶é¢èµ„æºä½¿ç”¨è¿˜ä¼šå½±å“åˆ°æ•°æ®é¢çš„æ€§èƒ½ã€‚  Nginx Ingressè¿˜ç¼ºå°‘é¢å‘æœåŠ¡é™æµçš„èƒ½åŠ›ï¼Œåªèƒ½å®ç°é¢å‘å•ä¸ªæ¥æºIPé™æµï¼Œå¯¹äºåç«¯æœåŠ¡ä¿æŠ¤æ¥è¯´æ²¡æœ‰æ„ä¹‰ã€‚ ","version":null,"tagName":"h3"},{"title":"Higress æ”¶ç›Šâ€‹","type":1,"pageTitle":"Higressåœ¨2023 KubeCon Chinaçš„åˆ†äº«","url":"/zh-cn/blog/2023-kubecon#higress-æ”¶ç›Š","content":" Higressä¼ä¸šç‰ˆé‡‡ç”¨äº†å…¨æ‰˜ç®¡æ¶æ„ï¼Œä¸ä¸šåŠ¡é›†ç¾¤åˆ†ç¦»ï¼Œæ— éœ€è‡ªå·±è¿ç»´ï¼Œç¨³å®šæ€§æœ‰æ›´å¥½ä¿éšœã€‚  é…ç½®æ›´æ–°éƒ½æ˜¯åŠ¨æ€åŠ è½½ï¼Œæ— éœ€é‡å¯æ•°æ®é¢ï¼Œä¿éšœä¸šåŠ¡å¹³ç¨³å‘å¸ƒï¼Œwebsocketè¿æ¥çš„ä¸šåŠ¡æ”¶ç›Šä¹Ÿç‰¹åˆ«æ˜æ˜¾ï¼Œé•¿è¿æ¥å¯ä»¥å§‹ç»ˆä¿æŒä¸ä¼šæ–­å¼€ã€‚  å¼€å¯äº†TLSç¡¬ä»¶åŠ é€Ÿï¼ŒTLSæ¡æ‰‹æ—¶å»¶ç›´æ¥å‡åŠï¼ŒQPSååæå‡86%ã€‚   å¼€å¯WAFå¯¹ååå½±å“è¿˜æ˜¯æ¯”è¾ƒæ˜æ˜¾çš„ï¼Œä¸‹é™äº†30%ï¼Œä½†ç›¸æ¯”Ingress Nginxç›´æ¥ä¸‹é™äº†90%ï¼Œæ€§èƒ½æå‡è¿˜æ˜¯å¾ˆæ˜æ˜¾ï¼Œè€Œä¸”æ›´å¤§çš„ä¼˜åŠ¿æ˜¯åŸºäºé˜¿é‡Œäº‘WAFäº§å“ï¼Œé˜²æŠ¤è§„åˆ™æ˜¯å®æ—¶æ›´æ–°çš„ï¼Œè€ŒéModsecurityçš„é™æ€è§„åˆ™ã€‚  Higressé›†æˆäº†Sentinelé™æµçš„èƒ½åŠ›ï¼Œå¯ä»¥ç›´æ¥é¢å‘æœåŠ¡çš„QPSååä¸Šé™/å¹¶å‘æ•°ä¸Šçº¿è¿›è¡Œé™æµï¼Œå¹¶ä¸”ç›¸æ¯”Nginxåªèƒ½é…ç½®å•æœºé™åˆ¶é˜ˆå€¼ï¼Œéœ€è¦å…³æ³¨ç½‘å…³èŠ‚ç‚¹æ•°é‡ï¼ŒHigressè¿™é‡Œçš„é…ç½®æ˜¯å…¨å±€é˜ˆå€¼ï¼Œä¸å—ç½‘å…³æ‰©ç¼©å®¹å½±å“ã€‚ è§¦å‘é™æµåå¯ä»¥è‡ªå®šä¹‰å“åº”å†…å®¹æˆ–è€…é‡å®šå‘åˆ°æŒ‡å®šåœ°å€ï¼Œéƒ½æ˜¯å¾ˆå®ç”¨çš„èƒ½åŠ›ã€‚ ","version":null,"tagName":"h3"},{"title":"Part 2. Higresså¼€æºä¹‹è·¯ï¼šæ‰æ ¹å¼€æºç”Ÿæ€ï¼Œå®šä¹‰äº‘åŸç”Ÿç½‘å…³â€‹","type":1,"pageTitle":"Higressåœ¨2023 KubeCon Chinaçš„åˆ†äº«","url":"/zh-cn/blog/2023-kubecon#part-2-higresså¼€æºä¹‹è·¯æ‰æ ¹å¼€æºç”Ÿæ€å®šä¹‰äº‘åŸç”Ÿç½‘å…³","content":"å¼€æºæ˜¯äº‘åŸç”Ÿç”Ÿæ€çš„åŸºçŸ³ï¼ŒHigressä¹Ÿæ˜¯å€ŸåŠ©äº†å¼€æºç”Ÿæ€çš„åŠ›é‡ï¼Œç«™åœ¨Istio/Envoyçš„è‚©è†€ä¸Šå¼€å‘å‡ºäº†æ›´å¤šå®ç”¨çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬é€‰æ‹©å°†MSE Higressï¼ˆä¼ä¸šç‰ˆï¼‰ä¸­çš„æ ¸å¿ƒèƒ½åŠ›å…¨éƒ¨å¼€æºï¼Œå†³å¿ƒæ‰æ ¹åœ¨å¼€æºç”Ÿæ€ä¸­ï¼Œè®©Higresså˜å¾—æ›´æ™®æƒ ï¼Œæœ‰æ›´å¤šäººä½¿ç”¨ï¼Œä»è€Œè®©Higressæ›´åŠ å¼ºå¤§ã€‚ ","version":null,"tagName":"h2"},{"title":"ç®€ä»‹â€‹","type":1,"pageTitle":"Higressåœ¨2023 KubeCon Chinaçš„åˆ†äº«","url":"/zh-cn/blog/2023-kubecon#ç®€ä»‹","content":" Higresså®é™…ä¸Šæœ‰ä¸‰æ¬¡è¯ç”Ÿè¿‡ç¨‹ï¼šç¬¬ä¸€æ¬¡æ˜¯åœ¨é˜¿é‡Œé›†å›¢å†…éƒ¨ä¸šåŠ¡éœ€æ±‚é©±åŠ¨ä¸‹è¯ç”Ÿï¼›ç¬¬äºŒæ¬¡æ˜¯éšç€å†…éƒ¨ä½¿ç”¨é€æ¸æˆç†Ÿæ²‰æ·€ä¸ºé˜¿é‡Œäº‘ä¸Šçš„MSE Higressäº‘åŸç”Ÿç½‘å…³äº§å“ï¼›ç¬¬ä¸‰æ¬¡æ˜¯éšç€äº‘äº§å“æˆç†Ÿï¼Œ2022å¹´11æœˆåœ¨äº‘æ –å¤§ä¼šä¸Šæ­£å¼å®£å¸ƒå¼€æºã€‚2023å¹´5æœˆReleaseäº†ç¬¬ä¸€ä¸ªGAç‰ˆæœ¬ï¼Œæ„å‘³ç€å¼€æºç‰ˆæœ¬ä¹Ÿèµ°å…¥æˆç†Ÿé˜¶æ®µã€‚  ä»é…ç½®æµè½¬çš„è¿‡ç¨‹æ¥çœ‹Higressçš„æ¶æ„ï¼š é¦–å…ˆç”¨æˆ·å¯ä»¥é€šè¿‡UIæ§åˆ¶å°/å‘½ä»¤è¡Œå·¥å…·å¤šç§æ–¹å¼æ¥ä¸‹å‘é…ç½®åˆ°äº†æ§åˆ¶é¢ï¼Œå¦‚æœæ˜¯K8sä¸‹ï¼Œé…ç½®æŒä¹…åŒ–åŸºäºCRDï¼Œå¦‚æœä¸æ˜¯K8sï¼Œé…ç½®æŒä¹…åŒ–åŸºäºNacosé™¤äº†ç”¨æˆ·ä¸‹å‘çš„è·¯ç”±é…ç½®ï¼Œå®ç°æœåŠ¡è·¯ç”±è¿˜éœ€è¦çš„æœåŠ¡IPåœ°å€ä¿¡æ¯ï¼Œæ”¯æŒä»K8s service/Nacos/Eureka/Consul/ZooKeeper/DNS/å›ºå®šIPç­‰å¤šç§æ–¹å¼è·å–Higressæ•°æ®é¢æ˜¯åŸºäºEnvoyï¼Œé…ç½®é€šè¿‡xDSä¸‹å‘ï¼Œè¿™é‡Œå¤ç”¨äº†Istioçš„é…ç½®ä¸‹å‘æœºåˆ¶ï¼Œå› ä¸ºæ˜¯å†…ç½®äº†è¿™ä¸ªæœºåˆ¶ï¼Œæ— éœ€å•ç‹¬éƒ¨ç½²Istioæœ€ç»ˆé…ç½®ä¸‹å‘åˆ°æ•°æ®é¢ç”Ÿæ•ˆï¼ŒHigressåŸºäºEnvoyæ‰©å±•äº†å¾ˆå¤šèƒ½åŠ›ï¼Œè€Œä¸”åŸºäºWasmæ‰©å±•æœºåˆ¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿å¼€å‘è‡ªå®šä¹‰æ’ä»¶ï¼Œä¸”å…·å¤‡å…¨å±€/åŸŸå/è·¯ç”±ç»´åº¦çš„ç”Ÿæ•ˆç²’åº¦ ","version":null,"tagName":"h3"},{"title":"æ ¸å¿ƒèƒ½åŠ›â€‹","type":1,"pageTitle":"Higressåœ¨2023 KubeCon Chinaçš„åˆ†äº«","url":"/zh-cn/blog/2023-kubecon#æ ¸å¿ƒèƒ½åŠ›","content":" é«˜é›†æˆï¼šåŒæ—¶é›†æˆç»å…¸å¾®æœåŠ¡ç”Ÿæ€å’ŒK8så¼€æºç”Ÿæ€èƒ½åŠ›ï¼Œå¯ä»¥å¸®åŠ©ä¸šåŠ¡ä»ä¼ ç»Ÿæ¶æ„è¿ç§»åˆ°äº‘åŸç”Ÿæ¶æ„ï¼ŒåŸºäºæµé‡ç°åº¦ç­‰èƒ½åŠ›ï¼Œå¯ä»¥ä¿éšœè¿™ä¸€è¿‡ç¨‹çš„å¹³æ»‘  æ ‡å‡†åŒ–ï¼šå…¼å®¹Nginx Ingresså¸¸ç”¨æ³¨è§£ï¼ŒåŸºäºç»Ÿä¸€çš„Ingressæ ‡å‡†å¯ä»¥è½»æ¾å®ç°Nginxåˆ°Higressè¿™ä¸€æŠ€æœ¯é¸¿æ²Ÿçš„è·¨è¶Šï¼ŒHigressä¹Ÿå·²ç»æ”¯æŒGateway APIï¼Œè·¯ç”±æ ‡å‡†æœ¬èº«ä¹Ÿèƒ½å€ŸåŠ©Higresså®ç°å¹³æ»‘å‡çº§   æ˜“æ‰©å±•ï¼šå€ŸåŠ©Higressçš„Wasm SDKï¼Œå¾ˆå°‘çš„ä¸šåŠ¡ä»£ç å°±å¯ä»¥å¼€å‘ä¸€ä¸ªçµæ´»çš„æ’ä»¶ï¼›å¹¶ä¸”æ”¯æŒåŸºäºOCIé•œåƒæ ‡å‡†åˆ†å‘ï¼Œå¯ä»¥è®©æ’ä»¶çš„æ–‡æ¡£ï¼Œé…ç½®çº¦æŸç­‰è·Ÿéšæ’ä»¶æœ¬èº«ä¸€èµ·è¢«åˆ†å‘å’Œå…±äº«ï¼›å’Œä¼ ç»ŸNginxç±»ç½‘å…³æœ€å¤§çš„å·®åˆ«ï¼Œåœ¨äºæ’ä»¶çš„åˆ†å‘é›†æˆé˜¶æ®µï¼Œå®ç°äº†æ’ä»¶ç‰ˆæœ¬æ›´æ–°è·Ÿç½‘å…³è‡ªèº«ç‰ˆæœ¬æ›´æ–°çš„è§£è€¦ã€‚   çƒ­æ›´æ–°ï¼šEnvoyç›¸æ¯”Nginxæ›´åˆç†çš„é…ç½®ç³»ç»ŸæŠ½è±¡ï¼Œè®©Higresså…·å¤‡äº†Nginx Ingressæ— æ³•å®ç°çš„é…ç½®çƒ­æ›´æ–°èƒ½åŠ› ","version":null,"tagName":"h3"},{"title":"å›é¡¾ä¸å±•æœ›â€‹","type":1,"pageTitle":"Higressåœ¨2023 KubeCon Chinaçš„åˆ†äº«","url":"/zh-cn/blog/2023-kubecon#å›é¡¾ä¸å±•æœ›","content":" Higresså¼€æºçš„å‰åŠå¹´ï¼Œä¸“æ³¨äºå¼€æºç”Ÿæ€çš„æ‰“é€šå’Œæ˜“ç”¨æ€§çš„æå‡ï¼Œå¹¶åŸºäºGithub Actionæ„å»ºäº†å¼€æºçš„é›†æˆæµ‹è¯•ä½“ç³»ï¼Œæ¥ä¿éšœé¡¹ç›®è´¨é‡ï¼Œåœ¨ä»Šå¹´5æœˆä»½å‘å¸ƒç¬¬ä¸€ä¸ªGAç¨³å®šç‰ˆæœ¬åï¼Œåœ¨å¤šä¸ªæ ¸å¿ƒç¤¾åŒºå¼€å‘è€…çš„åŠªåŠ›ä¸‹ï¼Œæˆ‘ä»¬åˆå¾ˆå¿«å‘å¸ƒäº†1.1å’Œ1.2ä¸¤ä¸ªå¤§ç‰ˆæœ¬ï¼Œæ¨å‡ºäº†éK8séƒ¨ç½²/Knativeæ”¯æŒç­‰é‡é‡çº§åŠŸèƒ½ã€‚  æœªæ¥çš„RoadMapï¼ŒHigressä¼šèšç„¦åœ¨Gateway API/æ’ä»¶ç”Ÿæ€/APIç®¡ç†ä¸‰ä¸ªæ–¹å‘ä¸Šï¼Œéšç€ç¤¾åŒºå¼€å‘å›¢é˜Ÿçš„ä¸æ–­å£®å¤§ï¼ŒHigresså·²ç»å»ºç«‹äº†å¤šä¸ªä¸åŒæ–¹å‘çš„SIG å¹¶è¡Œæ¨è¿›æ ¸å¿ƒåŠŸèƒ½æ¼”è¿›ï¼Œæœªæ¥å°†ä¸æ–­æœ‰é‡é‡çº§åŠŸèƒ½æ¨å‡ºï¼Œå°½è¯·æœŸå¾…ã€‚ ","version":null,"tagName":"h3"},{"title":"ç›´æ’­å›çœ‹â€‹","type":1,"pageTitle":"Higressåœ¨2023 KubeCon Chinaçš„åˆ†äº«","url":"/zh-cn/blog/2023-kubecon#ç›´æ’­å›çœ‹","content":"https://www.aliyun.com/activity/middleware/CloudNative_Meetup ","version":null,"tagName":"h2"},{"title":"30è¡Œä»£ç å†™ä¸€ä¸ªWasm Goæ’ä»¶","type":0,"sectionRef":"#","url":"/zh-cn/blog/30-line-wasm","content":"","keywords":"higress wasm","version":null},{"title":"å‰è¨€â€‹","type":1,"pageTitle":"30è¡Œä»£ç å†™ä¸€ä¸ªWasm Goæ’ä»¶","url":"/zh-cn/blog/30-line-wasm#å‰è¨€","content":"åœ¨11æœˆ15å·çš„ç›´æ’­ ã€ŠHigress å¼€æºèƒŒåçš„å‘å±•å†ç¨‹å’Œä¸Šæ‰‹ Demo æ¼”ç¤ºã€‹ä¸­ï¼Œä¸ºå¤§å®¶æ¼”ç¤ºäº† Higress çš„ Wasm æ’ä»¶å¦‚ä½•é¢å‘ Ingress èµ„æºè¿›è¡Œé…ç½®ç”Ÿæ•ˆï¼Œæœ¬æ–‡å¯¹å½“å¤©çš„ Demo è¿›è¡Œä¸€ä¸ªå›é¡¾ï¼Œå¹¶è¯´æ˜èƒŒåçš„åŸç†æœºåˆ¶ã€‚ æœ¬æ–‡ä¸­ Demo è¿è¡Œçš„å‰æï¼Œéœ€è¦åœ¨ K8s é›†ç¾¤ä¸­å®‰è£…äº† Higressï¼Œå¹¶ç”Ÿæ•ˆäº†ä¸‹é¢è¿™ä»½ quickstart é…ç½®ï¼šhttps://higress.io/samples/quickstart.yamlè¿™ä¸ª Demo è¦å®ç°çš„åŠŸèƒ½æ˜¯ä¸€ä¸ª Mock åº”ç­”çš„åŠŸèƒ½ï¼Œéœ€è¦å®ç°æ ¹æ®é…ç½®çš„å†…å®¹ï¼Œè¿”å› HTTP åº”ç­”ã€‚ æœ¬æ–‡ä¼šæŒ‰ä»¥ä¸‹æ–¹å¼è¿›è¡Œä»‹ç»ï¼š ç¼–å†™ä»£ç ï¼šä»£ç é€»è¾‘è§£æç”Ÿæ•ˆæ’ä»¶ï¼šè¯´æ˜ä»£ç å¦‚ä½•è¿›è¡Œç¼–è¯‘æ‰“åŒ…å¹¶éƒ¨ç½²ç”Ÿæ•ˆæµ‹è¯•æ’ä»¶åŠŸèƒ½ï¼šè¯´æ˜å…¨å±€ç²’åº¦ï¼Œè·¯ç”±/åŸŸåçº§ç²’åº¦å¦‚ä½•ç”Ÿæ•ˆæ’ä»¶ç”Ÿæ•ˆåŸç†ï¼šå¯¹æ•´ä½“æµç¨‹è¿›è¡Œå›é¡¾ï¼Œè¯´æ˜æ’ä»¶ç”Ÿæ•ˆçš„åŸç†ä¸‰ä¸ªé©å‘½æ€§çš„ç‰¹æ€§ï¼šä»‹ç» Wasm æ’ä»¶æœºåˆ¶ä¸ºç½‘å…³æ’ä»¶å¼€å‘å¸¦æ¥çš„å˜é© ","version":null,"tagName":"h2"},{"title":"ç¼–å†™ä»£ç â€‹","type":1,"pageTitle":"30è¡Œä»£ç å†™ä¸€ä¸ªWasm Goæ’ä»¶","url":"/zh-cn/blog/30-line-wasm#ç¼–å†™ä»£ç ","content":"package main import ( . &quot;github.com/alibaba/higress/plugins/wasm-go/pkg/wrapper&quot; &quot;github.com/tetratelabs/proxy-wasm-go-sdk/proxywasm&quot; &quot;github.com/tetratelabs/proxy-wasm-go-sdk/proxywasm/types&quot; &quot;github.com/tidwall/gjson&quot; ) func main() { SetCtx( &quot;my-plugin&quot;, ParseConfigBy(parseConfig), ProcessRequestHeadersBy(onHttpRequestHeaders), ) } type MyConfig struct { content string } func parseConfig(json gjson.Result, config *MyConfig, log Log) error { config.content = json.Get(&quot;content&quot;).String() return nil } func onHttpRequestHeaders(ctx HttpContext, config MyConfig, log Log) types.Action { proxywasm.SendHttpResponse(200, nil, []byte(config.content), -1) return types.ActionContinue }  ä¸Šé¢ä»£ç ä¸­å¯ä»¥çœ‹åˆ°ä¸‰ä¸ªå‡½æ•°ï¼š mainï¼šæ’ä»¶é€šè¿‡ main å‡½æ•°å®šä¹‰æ’ä»¶ä¸Šä¸‹æ–‡ï¼ŒåŒ…æ‹¬æ’ä»¶åç§°ï¼Œç”¨äºè§£æé…ç½®çš„å‡½æ•°ï¼Œä»¥åŠç”¨äºå¤„ç†è¯·æ±‚/åº”ç­”çš„å‡½æ•° parseConfigï¼šè¿™ä¸ªå‡½æ•°é€šè¿‡åœ¨ SetCtx ä¸­æŒ‡å®šçš„ ParseConfigBy è¢«æŒ‚è½½åˆ°æ’ä»¶é…ç½®è§£æé˜¶æ®µï¼Œä¼ å…¥çš„ä¸‰ä¸ªå‚æ•°åˆ†åˆ«æ˜¯ï¼š jsonï¼šä¼ å…¥æ’ä»¶çš„é…ç½®ï¼Œå°†ç»Ÿä¸€åºåˆ—åŒ–ä¸ºä¸€ä¸ª json å­—å…¸å¯¹è±¡ï¼Œæä¾› parseConfig è¿›è¡Œè§£æconfigï¼šparseConfig å°†è§£æåçš„æ’ä»¶é…ç½®è¾“å‡ºåˆ°è¿™ä¸ª MyConfig å¯¹è±¡logï¼šæä¾›æ—¥å¿—è¾“å‡ºæ¥å£ onHttpRequestHeadersï¼šå‡½æ•°ä¸­è°ƒç”¨çš„ proxywasm.SendHttpResponseï¼Œç”¨äºå®ç°ç›´æ¥è¿”å› HTTP åº”ç­”ï¼Œè¿™ä¸ªå‡½æ•°é€šè¿‡åœ¨ SetCtx ä¸­æŒ‡å®šçš„ ProcessRequestHeadersBy è¢«æŒ‚è½½åˆ°è§£æè¯·æ±‚ Header çš„æ‰§è¡Œé˜¶æ®µï¼Œå…¶ä»–çš„æŒ‚è½½æ–¹å¼è¿˜æœ‰ï¼š ProcessRequestBodyByï¼šæŒ‚è½½åˆ°è§£æè¯·æ±‚ Body çš„æ‰§è¡Œé˜¶æ®µ ProcessResponseHeadersByï¼šæŒ‚è½½åˆ°æ„é€ åº”ç­” Header çš„æ‰§è¡Œé˜¶æ®µ ProcessResponseBodyByï¼šæŒ‚è½½åˆ°æ„é€ åº”ç­” Body çš„æ‰§è¡Œé˜¶æ®µ ä¼ å…¥çš„ä¸‰ä¸ªå‚æ•°åˆ†åˆ«æ˜¯ï¼š ctxï¼šç”¨äºè·å–è¯·æ±‚ä¸Šä¸‹æ–‡ï¼Œå¦‚ scheme/method/path ç­‰ï¼Œé€šè¿‡ ctx å¯ä»¥è®¾ç½®è‡ªå®šä¹‰ä¸Šä¸‹æ–‡ï¼Œèƒ½è·¨æ‰§è¡Œé˜¶æ®µè®¿é—® configï¼šæä¾› parseConfig è§£æå¥½çš„è‡ªå®šä¹‰é…ç½® logï¼šæä¾›æ—¥å¿—è¾“å‡ºæ¥å£ è¿™ä¸ª 30 è¡Œä»£ç å®ç°çš„æ’ä»¶åŠŸèƒ½æ¯”è¾ƒç®€å•ï¼Œè¿™é‡Œæœ‰ä¸€äº›åŠŸèƒ½ç›¸å¯¹å¤æ‚çš„ä¾‹å­ï¼šhttps://github.com/alibaba/higress/tree/main/plugins/wasm-go/extensionsè¿™é‡Œæœ‰æ’ä»¶ sdk çš„è¯¦ç»†ä½¿ç”¨æ–‡æ¡£ï¼šhttps://higress.io/zh-cn/docs/user/wasm-go.htmlè¿™ä¸ªæ’ä»¶ sdk æ˜¯åŸºäº Tetrate ç¤¾åŒºçš„ proxy-wasm-go-sdk å®ç°çš„ï¼Œå¦‚æœå…³æ³¨æ›´åº•å±‚çš„ç»†èŠ‚ï¼Œå¯ä»¥æŸ¥çœ‹ï¼šhttps://github.com/tetratelabs/proxy-wasm-go-sdkhttps://github.com/alibaba/higress/blob/main/plugins/wasm-go/pkg/wrapperå¯ä»¥çœ‹åˆ°ï¼ŒHigress çš„ wasm-go sdk æ˜¯é€šè¿‡ Go 1.18 å¼•å…¥çš„æ³›å‹ç‰¹æ€§å°è£…äº†æ’ä»¶ä¸Šä¸‹æ–‡å¤„ç†ç»†èŠ‚ï¼Œä»è€Œé™ä½æ’ä»¶å¼€å‘æ‰€éœ€ä»£ç é‡ï¼Œå¼€å‘è€…åªç”¨å…³å¿ƒé…ç½®è§£æå’Œè¯·æ±‚åº”ç­”å¤„ç†çš„é€»è¾‘ã€‚ ","version":null,"tagName":"h2"},{"title":"ç”Ÿæ•ˆæ’ä»¶â€‹","type":1,"pageTitle":"30è¡Œä»£ç å†™ä¸€ä¸ªWasm Goæ’ä»¶","url":"/zh-cn/blog/30-line-wasm#ç”Ÿæ•ˆæ’ä»¶","content":"ç¼–å†™å®Œæˆä»£ç åï¼Œä¸€å…±æœ‰ä¸‰ä¸ªæ­¥éª¤ï¼Œå®ç°æ’ä»¶é€»è¾‘çš„ç”Ÿæ•ˆï¼š ç¼–è¯‘ï¼šå°† go ä»£ç ç¼–è¯‘æˆ Wasm æ ¼å¼æ–‡ä»¶é•œåƒæ¨é€ï¼šå°† Wasm æ–‡ä»¶æ‰“åŒ…æˆ docker é•œåƒï¼Œå¹¶æ¨é€è‡³é•œåƒä»“åº“ä¸‹å‘é…ç½®ï¼šåœ¨ K8s ä¸Šåˆ›å»º WasmPlugin èµ„æº ","version":null,"tagName":"h2"},{"title":"ç¼–è¯‘â€‹","type":1,"pageTitle":"30è¡Œä»£ç å†™ä¸€ä¸ªWasm Goæ’ä»¶","url":"/zh-cn/blog/30-line-wasm#ç¼–è¯‘","content":"å°†ä¸Šé¢çš„ Go æ–‡ä»¶ main.go ç¼–è¯‘æˆ plugin.wasm tinygo build -o plugin.wasm -scheduler=none -target=wasi main.go  ","version":null,"tagName":"h3"},{"title":"é•œåƒæ¨é€â€‹","type":1,"pageTitle":"30è¡Œä»£ç å†™ä¸€ä¸ªWasm Goæ’ä»¶","url":"/zh-cn/blog/30-line-wasm#é•œåƒæ¨é€","content":"ç¼–å†™ Dockerfile FROM scratch COPY plugin.wasm ./  æ„å»ºå¹¶æ¨é€ Docker é•œåƒ ï¼ˆè¿™é‡Œç¤ºä¾‹ç”¨çš„æ˜¯ Higress çš„å®˜æ–¹é•œåƒä»“åº“ï¼‰ docker build -t higress-registry.cn-hangzhou.cr.aliyuncs.com/plugins/demo:1.0.0 . docker push higress-registry.cn-hangzhou.cr.aliyuncs.com/plugins/demo:1.0.0  ","version":null,"tagName":"h3"},{"title":"ä¸‹å‘é…ç½®â€‹","type":1,"pageTitle":"30è¡Œä»£ç å†™ä¸€ä¸ªWasm Goæ’ä»¶","url":"/zh-cn/blog/30-line-wasm#ä¸‹å‘é…ç½®","content":"ç¼–å†™ wasmplugin.yamlï¼Œé…ç½®è¯´æ˜ï¼š selectorï¼š é€‰ä¸­äº†é»˜è®¤å®‰è£…åœ¨ higress-system å‘½åç©ºé—´ä¸‹çš„ higress-gateway ç”Ÿæ•ˆè¿™ä»½æ’ä»¶pluginConfigï¼šæ’ä»¶é…ç½®ï¼Œæœ€ç»ˆä¼šè¢«è½¬æ¢æˆä¸Šé¢ä»£ç ä¸­çš„ MyConfig å¯¹è±¡urlï¼šå¡«å†™é•œåƒåœ°å€ï¼Œéœ€è¦ä»¥&quot;oci://&quot;å¼€å¤´ é™¤äº†è¿™äº›é…ç½®å¤–ï¼Œè¿˜å¯ä»¥å®šä¹‰æ’ä»¶çš„æ‰§è¡Œé˜¶æ®µå’Œä¼˜å…ˆçº§ç­‰è¿›é˜¶é…ç½®ï¼Œå¯ä»¥å‚è€ƒ Istio API å®˜æ–¹æ–‡æ¡£ï¼šhttps://istio.io/latest/docs/reference/config/proxy_extensions/wasm-plugin/ # wasmplugin.yaml apiVersion: extensions.higress.io/v1alpha1 kind: WasmPlugin metadata: name: request-block namespace: higress-system spec: defaultConfig: block_urls: - &quot;swagger.html&quot; url: oci://higress-registry.cn-hangzhou.cr.aliyuncs.com/plugins/demo:1.0.0  é€šè¿‡ kubectl åˆ›å»ºè¿™ä¸ªèµ„æº kubectl apply -f wasmplugin.yaml  ","version":null,"tagName":"h3"},{"title":"æµ‹è¯•æ’ä»¶åŠŸèƒ½â€‹","type":1,"pageTitle":"30è¡Œä»£ç å†™ä¸€ä¸ªWasm Goæ’ä»¶","url":"/zh-cn/blog/30-line-wasm#æµ‹è¯•æ’ä»¶åŠŸèƒ½","content":"åŸºäºä¹‹å‰ç”Ÿæ•ˆçš„ quickstart.yamlï¼Œç›®å‰é›†ç¾¤ä¸­çš„ Ingress è®¿é—®æ‹“æ‰‘å¦‚ä¸‹æ‰€ç¤ºï¼š ","version":null,"tagName":"h2"},{"title":"â€‹","type":1,"pageTitle":"30è¡Œä»£ç å†™ä¸€ä¸ªWasm Goæ’ä»¶","url":"/zh-cn/blog/30-line-wasm#ing-topopng","content":"æœªç”Ÿæ•ˆæ’ä»¶çš„æƒ…å†µä¸‹ï¼š è¯·æ±‚/foo å°†è¿”å› HTTP åº”ç­” &quot;foo&quot;è¯·æ±‚/bar å°†è¿”å› HTTP åº”ç­” &quot;bar&quot; ","version":null,"tagName":"h3"},{"title":"å…¨å±€ç”Ÿæ•ˆâ€‹","type":1,"pageTitle":"30è¡Œä»£ç å†™ä¸€ä¸ªWasm Goæ’ä»¶","url":"/zh-cn/blog/30-line-wasm#å…¨å±€ç”Ÿæ•ˆ","content":"åŸºäºä¸Šæ–‡ç”Ÿæ•ˆæ’ä»¶é˜¶æ®µï¼Œä¸‹å‘çš„ wasmplugin.yamlï¼Œç”Ÿæ•ˆæ’ä»¶åæ•ˆæœå¦‚ä¸‹ï¼š è¯·æ±‚/foo å°†è¿”å› HTTP åº”ç­” &quot;hello higress&quot;è¯·æ±‚/bar å°†è¿”å› HTTP åº”ç­” &quot;hello higress&quot; ","version":null,"tagName":"h3"},{"title":"åŸŸå&è·¯ç”±çº§ç”Ÿæ•ˆâ€‹","type":1,"pageTitle":"30è¡Œä»£ç å†™ä¸€ä¸ªWasm Goæ’ä»¶","url":"/zh-cn/blog/30-line-wasm#åŸŸåè·¯ç”±çº§ç”Ÿæ•ˆ","content":"å°† wasmplugin.yaml é…ç½®ä¿®æ”¹å¦‚ä¸‹ï¼š # wasmplugin.yaml apiVersion: extensions.higress.io/v1alpha1 kind: WasmPlugin metadata: name: request-block namespace: higress-system spec: defaultConfig: # è·Ÿä¸Šé¢ä¾‹å­ä¸€æ ·ï¼Œè¿™ä¸ªé…ç½®ä¼šå…¨å±€ç”Ÿæ•ˆï¼Œä½†å¦‚æœè¢«ä¸‹é¢è§„åˆ™åŒ¹é…åˆ°ï¼Œåˆ™ä¼šæ”¹ä¸ºæ‰§è¡Œå‘½ä¸­è§„åˆ™çš„é…ç½® block_urls: - &quot;swagger.html&quot; matchRules: # è·¯ç”±çº§ç”Ÿæ•ˆé…ç½® - ingress: - default/foo # default å‘½åç©ºé—´ä¸‹åä¸º foo çš„ ingress ä¼šæ‰§è¡Œä¸‹é¢è¿™ä¸ªé…ç½® config: block_bodies: - &quot;foo&quot; - ingress: - default/bar # default å‘½åç©ºé—´ä¸‹åä¸º bar çš„ ingress ä¼šæ‰§è¡Œä¸‹é¢è¿™ä¸ªé…ç½® config: block_bodies: - &quot;bar&quot; # åŸŸåçº§ç”Ÿæ•ˆé…ç½® - domain: - &quot;*.example.com&quot; # è‹¥è¯·æ±‚åŒ¹é…äº†ä¸Šé¢çš„åŸŸå, ä¼šæ‰§è¡Œä¸‹é¢è¿™ä¸ªé…ç½® config: block_bodies: - &quot;foo&quot; - &quot;bar&quot; url: oci://higress-registry.cn-hangzhou.cr.aliyuncs.com/plugins/demo:1.0.0  åœ¨ pluginConfig ä¸­å¢åŠ äº† _rules_ è§„åˆ™åˆ—è¡¨ï¼Œè§„åˆ™ä¸­å¯ä»¥æŒ‡å®šåŒ¹é…æ–¹å¼ï¼Œå¹¶å¡«å†™å¯¹åº”ç”Ÿæ•ˆçš„é…ç½®: match_routeï¼šåŒ¹é… Ingress ç”Ÿæ•ˆï¼ŒåŒ¹é…æ ¼å¼ä¸ºï¼šIngress æ‰€åœ¨å‘½åç©ºé—´ + &quot;/&quot; + Ingress åç§°match_domainï¼šåŒ¹é…åŸŸåç”Ÿæ•ˆï¼Œå¡«å†™åŸŸåå³å¯ï¼Œæ”¯æŒé€šé…ç¬¦ ç”Ÿæ•ˆè¿™ä»½ä¿®æ”¹åçš„é…ç½®ï¼š kubectl apply -f wasmplugin.yaml  å¯ä»¥çœ‹åˆ°æ•ˆæœå¦‚ä¸‹ï¼š è¯·æ±‚/foo å°†è¿”å› HTTP åº”ç­” &quot;hello foo&quot; (åŒ¹é…åˆ°ç¬¬ä¸€æ¡ rule)è¯·æ±‚/bar å°†è¿”å› HTTP åº”ç­” &quot;hello bar&quot; (åŒ¹é…åˆ°ç¬¬äºŒæ¡ rule)è¯·æ±‚www.example.com å°†è¿”å› HTTP åº”ç­” &quot;hello world&quot; ï¼ˆåŒ¹é…åˆ°ç¬¬ä¸‰æ¡ ruleï¼‰è¯·æ±‚www.abc.com å°†è¿”å› HTTP åº”ç­” &quot;hello higress&quot; ï¼ˆæ²¡æœ‰åŒ¹é…çš„ ruleï¼Œä½¿ç”¨å…¨å±€é…ç½®ï¼‰ ","version":null,"tagName":"h3"},{"title":"æ’ä»¶ç”Ÿæ•ˆåŸç†â€‹","type":1,"pageTitle":"30è¡Œä»£ç å†™ä¸€ä¸ªWasm Goæ’ä»¶","url":"/zh-cn/blog/30-line-wasm#æ’ä»¶ç”Ÿæ•ˆåŸç†","content":" è¿™é‡Œå¯¹æ’ä»¶çš„ç”Ÿæ•ˆæœºåˆ¶ç®€å•åšä¸ªè¯´æ˜ï¼š ç”¨æˆ·å°†ä»£ç ç¼–è¯‘æˆ wasm æ–‡ä»¶ç”¨æˆ·å°† wasm æ–‡ä»¶æ„å»ºæˆ docker é•œåƒç”¨æˆ·å°† docker é•œåƒæ¨é€è‡³é•œåƒä»“åº“ç”¨æˆ·åˆ›å»º WasmPlugin èµ„æºIstio watch åˆ° WasmPlugin èµ„æºçš„å˜åŒ–Higress Gateway ä¸­çš„ xDS proxy è¿›ç¨‹ä» Istio è·å–åˆ°é…ç½®ï¼Œå‘ç°æ’ä»¶çš„é•œåƒåœ°å€xDS proxy ä»é•œåƒä»“åº“æ‹‰å–é•œåƒxDS proxy ä»é•œåƒä¸­æå–å‡º wasm æ–‡ä»¶Higress Gateway ä¸­çš„ envoy è¿›ç¨‹ä» xDS proxy è·å–åˆ°é…ç½®ï¼Œå‘ç° wasm æ–‡ä»¶çš„æœ¬åœ°è·¯å¾„envoy ä»æœ¬åœ°æ–‡ä»¶ä¸­åŠ è½½ wasm æ–‡ä»¶ è¿™é‡Œ envoy è·å–é…ç½®å¹¶åŠ è½½ wasm æ–‡ä»¶ä½¿ç”¨åˆ°äº† ECDS (Extension Config Discovery Service)çš„æœºåˆ¶ï¼Œå®ç°äº† wasm æ–‡ä»¶æ›´æ–°ï¼Œç›´æ¥çƒ­åŠ è½½ï¼Œä¸ä¼šå¯¼è‡´ä»»ä½•è¿æ¥ä¸­æ–­ï¼Œä¸šåŠ¡æµé‡å®Œå…¨æ— æŸã€‚ ","version":null,"tagName":"h2"},{"title":"ä¸‰ä¸ªé©å‘½æ€§çš„ç‰¹æ€§â€‹","type":1,"pageTitle":"30è¡Œä»£ç å†™ä¸€ä¸ªWasm Goæ’ä»¶","url":"/zh-cn/blog/30-line-wasm#ä¸‰ä¸ªé©å‘½æ€§çš„ç‰¹æ€§","content":"ä¸Šé¢çš„ Wasm æ’ä»¶æœºåˆ¶ä¸ºç½‘å…³è‡ªå®šä¹‰æ’ä»¶å¼€å‘å¸¦æ¥äº†ä¸‰ä¸ªé©å‘½æ€§çš„ç‰¹æ€§ã€‚ ","version":null,"tagName":"h2"},{"title":"ç‰¹æ€§ä¸€ï¼šæ’ä»¶ç”Ÿå‘½å‘¨æœŸå’Œç½‘å…³è§£è€¦â€‹","type":1,"pageTitle":"30è¡Œä»£ç å†™ä¸€ä¸ªWasm Goæ’ä»¶","url":"/zh-cn/blog/30-line-wasm#ç‰¹æ€§ä¸€æ’ä»¶ç”Ÿå‘½å‘¨æœŸå’Œç½‘å…³è§£è€¦","content":"è¿™ä¸ªç‰¹æ€§ä¸»è¦å¾—ç›Šäº Istio çš„ WasmPlugin æœºåˆ¶è®¾è®¡ã€‚å¯ä»¥å’Œ K8s Nginx Ingress çš„æ’ä»¶æœºåˆ¶åšä¸ªå¯¹æ¯”ï¼š reference: https://github.com/kubernetes/ingress-nginx/blob/main/rootfs/etc/nginx/lua/plugins/README.md Installing a pluginâ€‹ There are two options: mount your plugin into /etc/nginx/lua/plugins/ in the ingress-nginx podbuild your own ingress-nginx image like it is done in the example and install your plugin during image build å¯ä»¥çœ‹åˆ° Nginx Ingress åŠ è½½è‡ªå®šä¹‰æ’ä»¶ï¼Œéœ€è¦å°† lua æ–‡ä»¶æŒ‚è½½è¿› podï¼Œæˆ–è€…åœ¨æ„å»ºé•œåƒæ—¶è£…å…¥ã€‚è¿™æ ·å°±å°†æ’ä»¶çš„ç”Ÿå‘½å‘¨æœŸè·Ÿç½‘å…³ç»‘å®šåœ¨ä¸€èµ·ï¼Œæ’ä»¶é€»è¾‘æ›´æ–°ï¼Œéœ€è¦å‘å¸ƒæ–°ç‰ˆæœ¬ï¼Œç½‘å…³ä¹Ÿéœ€è¦å‘å¸ƒæ–°ç‰ˆæœ¬æˆ–è€…é‡æ–°éƒ¨ç½²ã€‚ ä½¿ç”¨ WasmPlugin çš„æœºåˆ¶ï¼Œæ’ä»¶éœ€è¦å‘å¸ƒæ–°ç‰ˆæœ¬ï¼Œåªéœ€æ„å»ºæ’ä»¶è‡ªèº«çš„é•œåƒå¹¶è¿›è¡Œä¸‹å‘ç”Ÿæ•ˆï¼Œè€Œä¸”å¯ä»¥åŸºäºé•œåƒçš„ tag è¿›è¡Œæ’ä»¶çš„ç‰ˆæœ¬ç®¡ç†ã€‚è¿™æ ·æ’ä»¶å˜æ›´ï¼Œä¸ä»…æ— éœ€é‡æ–°éƒ¨ç½²ç½‘å…³ï¼Œç»“åˆ Envoy çš„ ECDS æœºåˆ¶å¯¹æµé‡ä¹Ÿæ˜¯å®Œå…¨æ— æŸã€‚ ","version":null,"tagName":"h3"},{"title":"ç‰¹æ€§äºŒï¼šé«˜æ€§èƒ½çš„å¤šè¯­è¨€æ”¯æŒâ€‹","type":1,"pageTitle":"30è¡Œä»£ç å†™ä¸€ä¸ªWasm Goæ’ä»¶","url":"/zh-cn/blog/30-line-wasm#ç‰¹æ€§äºŒé«˜æ€§èƒ½çš„å¤šè¯­è¨€æ”¯æŒ","content":"åŸºäº Wasm çš„èƒ½åŠ›ï¼Œå¯ä»¥ç”¨å¤šç§è¯­è¨€ç¼–å†™æ’ä»¶ï¼Œå¯¹å¼€å‘äººå‘˜æ›´åŠ å‹å¥½ã€‚å®ç°å¤šè¯­è¨€å¼€å‘æ’ä»¶çš„å¦ä¸€ç§æ–¹å¼æ˜¯åŸºäº RPC å’Œç½‘å…³è¿›ç¨‹é€šä¿¡çš„å¤–ç½®è¿›ç¨‹/æœåŠ¡æ’ä»¶ï¼Œè¿™ç§æ¨¡å¼ä¼šæœ‰é¢å¤–çš„ IO å¼€é”€ï¼Œå¹¶ä¸”é™„åŠ çš„è¿›ç¨‹/æœåŠ¡ä¹Ÿå¸¦æ¥é¢å¤–çš„è¿ç»´å¤æ‚åº¦ã€‚ç›®å‰å¤§å®¶å¯¹ Wasm æ’ä»¶çš„æ€§èƒ½æ¯”è¾ƒå…³å¿ƒï¼Œä»æˆ‘ä»¬çš„æµ‹è¯•æ•°æ®æ¥çœ‹ï¼ŒæŒ‡ä»¤æ‰§è¡Œæ€§èƒ½ç›¸æ¯”åŸç”Ÿçš„ C++ è¯­è¨€ç¡®å®æœ‰å·®è·ï¼Œä½†æ€§èƒ½å’Œ Lua æŒå¹³ï¼Œä¸”è¿œå¥½äºå¤–ç½®æ’ä»¶ã€‚ å¯¹äºä¸€æ®µé€»è¾‘ï¼šå¾ªç¯æ‰§è¡Œ20æ¬¡è¯·æ±‚å¤´è®¾ç½®ï¼Œå¾ªç¯æ‰§è¡Œ20æ¬¡è¯·æ±‚å¤´è·å–ï¼Œå¾ªç¯æ‰§è¡Œ20æ¬¡è¯·æ±‚å¤´ç§»é™¤ã€‚æˆ‘ä»¬å¯¹æ¯”äº†åˆ†åˆ«ç”¨ Lua å’Œä¸åŒè¯­è¨€å®ç°çš„ Wasm çš„å¤„ç†æ€§èƒ½ï¼Œä¸‹é¢æ˜¯å¯¹å•ä¸ªè¯·æ±‚å»¶æ—¶çš„å½±å“å¯¹æ¯”ï¼š å®ç°è¯­è¨€\tè¯·æ±‚å»¶æ—¶å¢åŠ Lua\t0.20æ¯«ç§’ Wasm (C++)\t0.19æ¯«ç§’ Wasm (Go)\t0.20æ¯«ç§’ Wasm (Rust)\t0.21æ¯«ç§’ Wasm (AssemblyScript)\t0.21æ¯«ç§’ ","version":null,"tagName":"h3"},{"title":"ç‰¹æ€§ä¸‰ï¼šå®‰å…¨æ²™ç®±â€‹","type":1,"pageTitle":"30è¡Œä»£ç å†™ä¸€ä¸ªWasm Goæ’ä»¶","url":"/zh-cn/blog/30-line-wasm#ç‰¹æ€§ä¸‰å®‰å…¨æ²™ç®±","content":"Envoy ç›®å‰æ”¯æŒå¤šç§ Wasm çš„è¿è¡Œæ—¶ï¼Œä¾‹å¦‚ V8ï¼ŒWAMRï¼Œwasmtime ç­‰ç­‰ï¼Œè¿™äº›è¿è¡Œæ—¶å‡æä¾›äº†å®‰å…¨æ²™ç®±èƒ½åŠ›ï¼Œå³ Wasm æ’ä»¶ä¸­å‡ºç°äº†è®¿é—®ç©ºæŒ‡é’ˆã€å¼‚å¸¸æœªæ•è·ç­‰é€»è¾‘ï¼Œä¹Ÿä¸ä¼šä»¤ Envoy å®¿ä¸»è¿›ç¨‹ Crashã€‚å¹¶ä¸”å¯ä»¥é€šè¿‡é…ç½®ï¼Œåœ¨æ’ä»¶é€»è¾‘å‡ºç°å¼‚å¸¸åè¿›è¡Œ Fail Open å¤„ç†ï¼Œè·³è¿‡æ’ä»¶çš„æ‰§è¡Œé€»è¾‘ï¼Œå°†å¯¹ä¸šåŠ¡çš„å½±å“é™è‡³æœ€ä½ã€‚ ","version":null,"tagName":"h3"},{"title":"å¼€æºç¤¾åŒºâ€‹","type":1,"pageTitle":"30è¡Œä»£ç å†™ä¸€ä¸ªWasm Goæ’ä»¶","url":"/zh-cn/blog/30-line-wasm#å¼€æºç¤¾åŒº","content":"ç‰¹åˆ«æ„Ÿè°¢ Istio/Envoy ç¤¾åŒºçš„å‰ç½®å·¥ä½œï¼Œè®© Higress å¯ä»¥å®ç°å¯¹ Ingress èµ„æºå¯ç”¨ WasmPlugin ï¼Œå¢å¼ºäº† Ingress Controller çš„è‡ªå®šä¹‰æ‰©å±•èƒ½åŠ›ã€‚ ç‰¹åˆ«æ„Ÿè°¢ Tetrate ç¤¾åŒºå®ç°çš„ proxy-wasm-go-sdkï¼ŒHigress åœ¨è¿™ä¸ªåŸºç¡€ä¸Šå°è£…äº† wasm-go sdkï¼Œé™ä½äº†å¼€å‘æ’ä»¶çš„ä¸Šæ‰‹é—¨æ§›ã€‚ Higress å¯¹ Istio/Envoy çš„ Wasm èƒ½åŠ›åšäº†ä¸€äº› Bugfix çš„å·¥ä½œï¼Œç›®å‰å·²ç»éƒ½åˆå¹¶è¿›äº†ä¸Šæ¸¸ç¤¾åŒºã€‚åç»­çš„ä¸€äº› Feature èƒ½åŠ›ï¼Œä¹Ÿä¼šæŒç»­åå“ºä¸Šæ¸¸ç¤¾åŒºã€‚ åŒæ—¶æ¬¢è¿å¤§å®¶ä¸€èµ·ä¸º Higress çš„æ’ä»¶ä»¥åŠå…¶ä»–ç¤¾åŒºç”Ÿæ€æ·»ç –åŠ ç“¦ï¼Œä¸º Higress è´¡çŒ®è¯·å‚è€ƒæ–‡æ¡£ï¼šhttps://higress.io/zh-cn/docs/developers/guide_dev.html ","version":null,"tagName":"h2"},{"title":"å¦‚ä½•ä½¿ç”¨ Higress Admin SDK è¿›è¡Œé…ç½®ç®¡ç†","type":0,"sectionRef":"#","url":"/zh-cn/blog/admin-sdk-intro","content":"","keywords":"Higress SDK Config","version":null},{"title":"3.1 ç¯å¢ƒå‡†å¤‡â€‹","type":1,"pageTitle":"å¦‚ä½•ä½¿ç”¨ Higress Admin SDK è¿›è¡Œé…ç½®ç®¡ç†","url":"/zh-cn/blog/admin-sdk-intro#31-ç¯å¢ƒå‡†å¤‡","content":"è¿™é‡Œæˆ‘ä»¬ä»¥æœ¬åœ°åŸºäº Kind æ­å»ºçš„ K8s é›†ç¾¤ä½œä¸ºå®éªŒç¯å¢ƒã€‚æ‰€ä»¥é¦–å…ˆï¼Œè¯·å¤§å®¶å‚è€ƒè¿™ç¯‡æ–‡æ¡£åœ¨æœ¬åœ°å®Œæˆ K8s é›†ç¾¤çš„æ­å»ºå’Œ Higress çš„å®‰è£…ã€‚ ç„¶åï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªæµ‹è¯•ç”¨çš„ K8s æœåŠ¡ã€‚å¤§å®¶å¯ä»¥å°†ä¸‹æ–¹çš„ YAML ä¿å­˜ä¸º test.yamlï¼Œç„¶åæ‰§è¡Œ kubectl apply -f test.yaml å‘½ä»¤åœ¨ K8s ä¸­åˆ›å»ºå¯¹åº”çš„èµ„æºã€‚ kind: Pod apiVersion: v1 metadata: name: higress-demo-app namespace: default labels: app: higress-demo spec: containers: - name: higress-demo-app image: mendhak/http-https-echo:29 --- kind: Service apiVersion: v1 metadata: name: higress-demo-service namespace: default spec: selector: app: higress-demo ports: - port: 8080  ","version":null,"tagName":"h2"},{"title":"3.2 ä»£ç ç¼–å†™â€‹","type":1,"pageTitle":"å¦‚ä½•ä½¿ç”¨ Higress Admin SDK è¿›è¡Œé…ç½®ç®¡ç†","url":"/zh-cn/blog/admin-sdk-intro#32-ä»£ç ç¼–å†™","content":"è¿™é‡Œçš„ç›®æ ‡æ˜¯åˆ›å»ºä¸€ä¸ªè·¯ç”±ï¼Œä½¿ http://www.test.com/ è¿™ä¸ª URL æŒ‡å‘æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„ higress-demo-serviceã€‚ ","version":null,"tagName":"h2"},{"title":"ç¬¬ä¸€æ­¥ï¼šé…ç½®ä¾èµ–â€‹","type":1,"pageTitle":"å¦‚ä½•ä½¿ç”¨ Higress Admin SDK è¿›è¡Œé…ç½®ç®¡ç†","url":"/zh-cn/blog/admin-sdk-intro#ç¬¬ä¸€æ­¥é…ç½®ä¾èµ–","content":"æ ¹æ®é¡¹ç›®æ‰€ä½¿ç”¨çš„æ„å»ºå·¥å…·æ¥æ·»åŠ  Higress Admin SDK ä¾èµ–ï¼š &lt;dependency&gt; &lt;groupId&gt;io.higress.api&lt;/groupId&gt; &lt;artifactId&gt;higress-admin-sdk&lt;/artifactId&gt; &lt;version&gt;0.0.2&lt;/version&gt; &lt;/dependency&gt;  implementation 'io.higress.api:higress-admin-sdk:0.0.2'  ","version":null,"tagName":"h3"},{"title":"ç¬¬äºŒæ­¥ï¼šåˆ›å»º Higress SDK å®ä¾‹â€‹","type":1,"pageTitle":"å¦‚ä½•ä½¿ç”¨ Higress Admin SDK è¿›è¡Œé…ç½®ç®¡ç†","url":"/zh-cn/blog/admin-sdk-intro#ç¬¬äºŒæ­¥åˆ›å»º-higress-sdk-å®ä¾‹","content":"String kubeConfigFile = Paths.get(System.getProperty(&quot;user.home&quot;), &quot;/.kube/config&quot;).toString(); HigressServiceConfig config = HigressServiceConfig.builder().withKubeConfigPath(kubeConfigFile).build(); HigressServiceProvider provider = HigressServiceProvider.create(config);  è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ K8s é›†ç¾¤å¤–çš„é…ç½®æ–¹å¼ï¼Œæ‰€ä»¥éœ€è¦è®¾ç½® kubeConfig æ–‡ä»¶çš„è·¯å¾„ï¼Œä»¥ä¾¿ SDK æ“ä½œ K8s å†…çš„å„ç±»èµ„æºã€‚ ","version":null,"tagName":"h3"},{"title":"ç¬¬äºŒæ­¥ï¼šåˆ›å»ºåŸŸåâ€‹","type":1,"pageTitle":"å¦‚ä½•ä½¿ç”¨ Higress Admin SDK è¿›è¡Œé…ç½®ç®¡ç†","url":"/zh-cn/blog/admin-sdk-intro#ç¬¬äºŒæ­¥åˆ›å»ºåŸŸå","content":"è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ SDK ä¸­çš„ DomainService æ¥åˆ›å»ºä¸€ä¸ª www.test.com åŸŸåï¼Œå¹¶å°†è¯¥åŸŸåè®¾ç½®ä¸ºåªå¼€æ”¾ HTTP è®¿é—®ã€‚ Domain domain = Domain.builder().name(&quot;www.test.com&quot;).enableHttps(Domain.EnableHttps.OFF).build(); provider.domainService().add(domain);  ","version":null,"tagName":"h3"},{"title":"ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºè·¯ç”±â€‹","type":1,"pageTitle":"å¦‚ä½•ä½¿ç”¨ Higress Admin SDK è¿›è¡Œé…ç½®ç®¡ç†","url":"/zh-cn/blog/admin-sdk-intro#ç¬¬ä¸‰æ­¥åˆ›å»ºè·¯ç”±","content":"è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ SDK ä¸­çš„ DomainService æ¥åˆ›å»ºä¸€ä¸ªåä¸º higress-demo çš„è·¯ç”±ã€‚è·¯ç”±ç»‘å®š www.test.com åŸŸåï¼ŒåŒ¹é…æ‰€æœ‰ä»¥ / å¼€å¤´çš„è¯·æ±‚ï¼Œå¹¶å°†è¯·æ±‚è½¬å‘è‡³ higress-demo-service.default.svc.cluster.local æœåŠ¡çš„ 8080 ç«¯å£ã€‚ Route route = Route.builder() .name(&quot;higress-demo&quot;) .domains(Collections.singletonList(&quot;www.test.com&quot;)) .path(RoutePredicate.builder() .matchType(RoutePredicateTypeEnum.PRE.name()) .matchValue(&quot;/&quot;) .build()) .services(Collections.singletonList( UpstreamService.builder() .name(&quot;higress-demo-service.default.svc.cluster.local:8080&quot;) .build() )).build(); provider.routeService().add(route);  ","version":null,"tagName":"h3"},{"title":"3.3 æµ‹è¯•éªŒè¯â€‹","type":1,"pageTitle":"å¦‚ä½•ä½¿ç”¨ Higress Admin SDK è¿›è¡Œé…ç½®ç®¡ç†","url":"/zh-cn/blog/admin-sdk-intro#33-æµ‹è¯•éªŒè¯","content":"æ‰§è¡Œç¼–å†™å¥½çš„ä»£ç ï¼šç¡®è®¤ä¸€åˆ‡æ­£å¸¸ã€‚ç„¶ååœ¨ Shell ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œæ£€æŸ¥è¯·æ±‚è·¯ç”±æƒ…å†µã€‚ curl -svk http://localhost/ -H &quot;Host: www.test.com&quot;  èƒ½å¤Ÿä»¥ JSON æ ¼å¼è¿”å›è¯·æ±‚çš„è¯¦ç»†ä¿¡æ¯å°±è¯´æ˜è·¯ç”±é…ç½®å·²ç»å¯ä»¥æ­£å¸¸å·¥ä½œã€‚ { &quot;path&quot;: &quot;/&quot;, &quot;headers&quot;: { &quot;host&quot;: &quot;www.test.com&quot;, &quot;user-agent&quot;: &quot;curl/8.4.0&quot;, &quot;accept&quot;: &quot;*/*&quot;, &quot;x-forwarded-for&quot;: &quot;10.42.0.230&quot;, &quot;x-forwarded-proto&quot;: &quot;http&quot;, &quot;x-envoy-internal&quot;: &quot;true&quot;, &quot;x-request-id&quot;: &quot;4a3db96b-c46c-4c8a-a60f-a513f258736d&quot;, &quot;x-envoy-decorator-operation&quot;: &quot;higress-demo-service.default.svc.cluster.local:8080/*&quot;, &quot;x-envoy-attempt-count&quot;: &quot;1&quot;, &quot;x-b3-traceid&quot;: &quot;a426d189c027371957f008c2cb2e9e8f&quot;, &quot;x-b3-spanid&quot;: &quot;57f008c2cb2e9e8f&quot;, &quot;x-b3-sampled&quot;: &quot;0&quot;, &quot;req-start-time&quot;: &quot;1707363093608&quot;, &quot;original-host&quot;: &quot;www.test.com&quot; }, &quot;method&quot;: &quot;GET&quot;, &quot;body&quot;: &quot;&quot;, &quot;fresh&quot;: false, &quot;hostname&quot;: &quot;www.test.com&quot;, &quot;ip&quot;: &quot;10.42.0.230&quot;, &quot;ips&quot;: [ &quot;10.42.0.230&quot; ], &quot;protocol&quot;: &quot;http&quot;, &quot;query&quot;: {}, &quot;subdomains&quot;: [ &quot;www&quot; ], &quot;xhr&quot;: false, &quot;os&quot;: { &quot;hostname&quot;: &quot;higress-demo-app&quot; }, &quot;connection&quot;: {} }  ","version":null,"tagName":"h2"},{"title":"4. æ€»ç»“â€‹","type":1,"pageTitle":"å¦‚ä½•ä½¿ç”¨ Higress Admin SDK è¿›è¡Œé…ç½®ç®¡ç†","url":"/zh-cn/blog/admin-sdk-intro#4-æ€»ç»“","content":"ç›®å‰ Higress Admin SDK æ”¯æŒçš„åŠŸèƒ½è¿˜æ¯”è¾ƒç®€å•ã€‚æœªæ¥ç¤¾åŒºä¹Ÿä¼šåœ¨è¿›ä¸€æ­¥ç€åŠ›å¢å¼º Higress çš„æ²»ç†ä¾§åŠŸèƒ½ï¼ŒSDK çš„èƒ½åŠ›ä¹Ÿä¼šä¸æ–­å®Œå–„ã€‚å¤§å®¶å¯¹ SDK å’Œ Console æœ‰ä»»ä½•ç–‘é—®å’Œå»ºè®®ï¼Œéƒ½æ¬¢è¿åœ¨ GitHub ä¸Šæå‡ºã€‚æ„Ÿè°¢å¤§å®¶çš„æ”¯æŒï¼ ä»¥ä¸Šå®æ“è¿‡ç¨‹çš„é¡¹ç›®ä»£ç å¯ä»¥åœ¨è¿™é‡Œä¸‹è½½ï¼šä¸‹è½½é“¾æ¥ ","version":null,"tagName":"h2"},{"title":"åŸºäºæ–‡ä»¶é…ç½®å®ç° Higress æç®€ç‹¬ç«‹éƒ¨ç½²","type":0,"sectionRef":"#","url":"/zh-cn/blog/config-with-file","content":"","keywords":"higress file config","version":null},{"title":"å‰ç½®å‡†å¤‡â€‹","type":1,"pageTitle":"åŸºäºæ–‡ä»¶é…ç½®å®ç° Higress æç®€ç‹¬ç«‹éƒ¨ç½²","url":"/zh-cn/blog/config-with-file#å‰ç½®å‡†å¤‡","content":"","version":null,"tagName":"h2"},{"title":"å®‰è£… Docker Composeâ€‹","type":1,"pageTitle":"åŸºäºæ–‡ä»¶é…ç½®å®ç° Higress æç®€ç‹¬ç«‹éƒ¨ç½²","url":"/zh-cn/blog/config-with-file#å®‰è£…-docker-compose","content":"è¯·å‚è€ƒ Docker å®˜æ–¹æ–‡æ¡£æ¥å®‰è£… Docker Engineï¼Œå…¶ä¸­å·²ç»å†…ç½®äº† Docker Compose ç»„ä»¶ï¼šhttps://docs.docker.com/engine/install/ ","version":null,"tagName":"h3"},{"title":"ç¯å¢ƒéªŒè¯â€‹","type":1,"pageTitle":"åŸºäºæ–‡ä»¶é…ç½®å®ç° Higress æç®€ç‹¬ç«‹éƒ¨ç½²","url":"/zh-cn/blog/config-with-file#ç¯å¢ƒéªŒè¯","content":"å¯åŠ¨ç»ˆç«¯ï¼›æ‰§è¡Œ docker compose version å‘½ä»¤ï¼Œç¡®è®¤å¯ä»¥æ­£å¸¸è¾“å‡º Docker Compose çš„ç‰ˆæœ¬ã€‚ Docker Compose version v2.20.2  ","version":null,"tagName":"h3"},{"title":"å®‰è£… Higreesâ€‹","type":1,"pageTitle":"åŸºäºæ–‡ä»¶é…ç½®å®ç° Higress æç®€ç‹¬ç«‹éƒ¨ç½²","url":"/zh-cn/blog/config-with-file#å®‰è£…-higrees","content":"","version":null,"tagName":"h2"},{"title":"ç¡®å®šé…ç½®ç›®å½•â€‹","type":1,"pageTitle":"åŸºäºæ–‡ä»¶é…ç½®å®ç° Higress æç®€ç‹¬ç«‹éƒ¨ç½²","url":"/zh-cn/blog/config-with-file#ç¡®å®šé…ç½®ç›®å½•","content":"ç”±äºè¿™æ¬¡æˆ‘ä»¬å‡†å¤‡ä½¿ç”¨æ–‡ä»¶æ¥ç®¡ç† Higress çš„é…ç½®æ•°æ®ï¼Œæ‰€ä»¥éœ€è¦å…ˆç¡®å®šä¿å­˜é…ç½®æ–‡ä»¶çš„ç›®å½•ã€‚ä¸‹é¢æˆ‘ä»¬å°†ä»¥ ~/higress/conf ç›®å½•ä¸ºä¾‹è¿›è¡Œä»‹ç»ã€‚ ","version":null,"tagName":"h3"},{"title":"æ‰§è¡Œå®‰è£…â€‹","type":1,"pageTitle":"åŸºäºæ–‡ä»¶é…ç½®å®ç° Higress æç®€ç‹¬ç«‹éƒ¨ç½²","url":"/zh-cn/blog/config-with-file#æ‰§è¡Œå®‰è£…","content":"å¯åŠ¨ç»ˆç«¯ï¼Œå¹¶æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š curl -fsSL https://higress.io/standalone/get-higress.sh | bash -s -- -c file://~/higress/conf -p &lt;ä½ çš„å¯†ç &gt; -a  è¯·è€å¿ƒç­‰å¾…å®‰è£…è¿‡ç¨‹æ‰§è¡Œå®Œæ¯•ã€‚Higress çš„æ‰§è¡Œæ–‡ä»¶å°†è¢«å®‰è£…åœ¨å½“å‰ç›®å½•ä¸‹çš„ higress å­ç›®å½•å†…ã€‚é…ç½®æ•°æ®åˆ™å°†è¢«å†™å…¥ ~/higress/conf ç›®å½•å†…ã€‚ åœ¨å®‰è£…å®Œæˆåï¼Œè„šæœ¬ä¼šè‡ªåŠ¨å¯åŠ¨ Higressã€‚å½“ç»ˆç«¯è¾“å‡ºå¦‚ä¸‹ä¿¡æ¯æ—¶ï¼Œåˆ™è¯´æ˜ Higress å·²å®‰è£…å®Œæˆå¹¶æˆåŠŸå¯åŠ¨ã€‚ Higress is now started. You can check out its status by executing /home/ch3cho/higress/bin/status.sh Higress Gateway is listening on: http://0.0.0.0:80 https://0.0.0.0:443 Visit Higress Console: http://localhost:8080/  ","version":null,"tagName":"h3"},{"title":"Higress è·¯ç”±é…ç½®â€‹","type":1,"pageTitle":"åŸºäºæ–‡ä»¶é…ç½®å®ç° Higress æç®€ç‹¬ç«‹éƒ¨ç½²","url":"/zh-cn/blog/config-with-file#higress-è·¯ç”±é…ç½®","content":"ä¸ºäº†ç€é‡è¯´æ˜åŸºäºæ–‡ä»¶çš„è·¯ç”±é…ç½®æ–¹å¼ï¼Œè¿™é‡Œå°†ä¸å†å±•å¼€ä»‹ç»ä½¿ç”¨ Higress æ§åˆ¶å°æ¥è¿›è¡Œé…ç½®çš„å…·ä½“æ­¥éª¤ã€‚å¦‚æœ‰éœ€è¦ï¼Œå¤§å®¶å¯ä»¥æŸ¥é˜…å…¶ä»–æ–‡æ¡£ã€‚ åˆ›å»ºæœåŠ¡æ¥æºâ€‹ ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨å°†ä»¥ä¸‹å†…å®¹å†™å…¥ ~/higress/conf/mcpbridges/default.yaml æ–‡ä»¶ä¸­ï¼š apiVersion: networking.higress.io/v1 kind: McpBridge metadata: name: default namespace: higress-system spec: registries: - domain: httpbin.org name: httpbin port: 80 type: dns  åˆ›å»ºåŸŸåé…ç½®â€‹ ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨å°†ä»¥ä¸‹å†…å®¹å†™å…¥ ~/higress/conf/configmaps/domain-foo.bar.com.yaml æ–‡ä»¶ä¸­ï¼š apiVersion: v1 kind: ConfigMap metadata: name: domain-foo.bar.com namespace: higress-system data: domain: foo.bar.com enableHttps: &quot;off&quot;  åˆ›å»ºæœåŠ¡è·¯ç”±â€‹ ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨å°†ä»¥ä¸‹å†…å®¹å†™å…¥ ~/higress/conf/ingresses/route-foo-bar.yaml æ–‡ä»¶ä¸­ï¼š apiVersion: networking.k8s.io/v1 kind: Ingress metadata: annotations: higress.io/destination: httpbin.dns higress.io/ignore-path-case: &quot;false&quot; name: route-foo-bar namespace: higress-system spec: ingressClassName: higress rules: - host: foo.bar.com http: paths: - backend: resource: apiGroup: networking.higress.io kind: McpBridge name: default path: / pathType: Prefix  ","version":null,"tagName":"h3"},{"title":"è¯·æ±‚éªŒè¯â€‹","type":1,"pageTitle":"åŸºäºæ–‡ä»¶é…ç½®å®ç° Higress æç®€ç‹¬ç«‹éƒ¨ç½²","url":"/zh-cn/blog/config-with-file#è¯·æ±‚éªŒè¯","content":"åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š curl http://localhost/get?foo=bar -H 'Host: foo.bar.com'  è¯·æ±‚åº”è¿”å›ä¸€æ®µåŒ…å«è¯·æ±‚ä¿¡æ¯çš„ JSON æ•°æ®ï¼š { &quot;args&quot;: { &quot;foo&quot;: &quot;bar&quot; }, &quot;headers&quot;: { &quot;Accept&quot;: &quot;*/*&quot;, &quot;Host&quot;: &quot;foo.bar.com&quot;, &quot;Original-Host&quot;: &quot;foo.bar.com&quot;, &quot;Req-Start-Time&quot;: &quot;1693049173053&quot;, &quot;User-Agent&quot;: &quot;curl/8.1.2&quot;, &quot;X-Amzn-Trace-Id&quot;: &quot;Root=1-11111111-111111111111111111111111&quot;, &quot;X-B3-Sampled&quot;: &quot;0&quot;, &quot;X-B3-Spanid&quot;: &quot;2222222222222222&quot;, &quot;X-B3-Traceid&quot;: &quot;33333333333333333333333333333333&quot;, &quot;X-Envoy-Attempt-Count&quot;: &quot;1&quot;, &quot;X-Envoy-Decorator-Operation&quot;: &quot;httpbin.dns:80/*&quot;, &quot;X-Envoy-Internal&quot;: &quot;true&quot; }, &quot;origin&quot;: &quot;192.168.16.1, 123.123.123.123&quot;, &quot;url&quot;: &quot;http://foo.bar.com/get?foo=bar&quot; }  ","version":null,"tagName":"h3"},{"title":"å·²çŸ¥é—®é¢˜â€‹","type":1,"pageTitle":"åŸºäºæ–‡ä»¶é…ç½®å®ç° Higress æç®€ç‹¬ç«‹éƒ¨ç½²","url":"/zh-cn/blog/config-with-file#å·²çŸ¥é—®é¢˜","content":"åœ¨ Windows æ“ä½œç³»ç»Ÿä¸­ï¼Œç›´æ¥ä¿®æ”¹æŒ‚è½½åˆ° Docker å®¹å™¨ä¸­çš„æœ¬åœ°æ–‡ä»¶åï¼Œå®¹å™¨å†…çš„è¿›ç¨‹æ— æ³•æ”¶åˆ°é€šçŸ¥ï¼ˆè¯¦æƒ…è¯·æŸ¥çœ‹ fsnotify/fsnotify #292ï¼‰ã€‚å¦‚æœè¦ä½¿ç”¨æ–‡ä»¶æ¥ä¿å­˜é…ç½®æ•°æ®çš„è¯ï¼Œåœ¨ç›´æ¥ä¿®æ”¹é…ç½®æ–‡ä»¶åï¼ŒHigress æ— æ³•ç«‹å³åŠ è½½åˆ°æ–°çš„é…ç½®ã€‚å¦‚æœéœ€è¦åœ¨ Windows ä¸Šç‹¬ç«‹éƒ¨ç½² Higress ç½‘å…³ï¼Œå¯ä»¥è€ƒè™‘é€šè¿‡ Higress Console æ¥ç®¡ç†é…ç½®ä¿¡æ¯ï¼Œæˆ–ä½¿ç”¨ Nacos ä¿å­˜ç½‘å…³é…ç½®ã€‚ ","version":null,"tagName":"h2"},{"title":"å‚è€ƒæ–‡æ¡£â€‹","type":1,"pageTitle":"åŸºäºæ–‡ä»¶é…ç½®å®ç° Higress æç®€ç‹¬ç«‹éƒ¨ç½²","url":"/zh-cn/blog/config-with-file#å‚è€ƒæ–‡æ¡£","content":"æ›´å¤šç›¸å…³ä¿¡æ¯ä¸ Higress çš„å…¶ä»–éƒ¨ç½²æ–¹å¼å¯æŸ¥é˜…ä»¥ä¸‹æ–‡æ¡£ï¼š å¿«é€Ÿå¼€å§‹ä½¿ç”¨ Helm è¿›è¡Œäº‘åŸç”Ÿéƒ¨ç½²åŸºäº Docker Compose è¿›è¡Œç‹¬ç«‹éƒ¨ç½² ","version":null,"tagName":"h2"},{"title":"æ•™ç¨‹ï¼šå¦‚ä½•åœ¨æœ¬åœ°å¼€å‘å’Œè°ƒè¯• Higress æ§åˆ¶å°","type":0,"sectionRef":"#","url":"/zh-cn/blog/console-dev","content":"","keywords":"higress console","version":null},{"title":"æ¦‚è¿°â€‹","type":1,"pageTitle":"æ•™ç¨‹ï¼šå¦‚ä½•åœ¨æœ¬åœ°å¼€å‘å’Œè°ƒè¯• Higress æ§åˆ¶å°","url":"/zh-cn/blog/console-dev#æ¦‚è¿°","content":"æœ¬æ–‡æ—¨åœ¨ä»‹ç»å¦‚ä½•åœ¨æœ¬åœ°ä½¿ç”¨ IDE æ¥è¿›è¡Œ Higress æ§åˆ¶å°ï¼ˆä»¥ä¸‹ç®€ç§°æ§åˆ¶å°ï¼‰çš„å¼€å‘å’Œè°ƒè¯•å·¥ä½œã€‚ ","version":null,"tagName":"h2"},{"title":"ä»£ç ç»“æ„â€‹","type":1,"pageTitle":"æ•™ç¨‹ï¼šå¦‚ä½•åœ¨æœ¬åœ°å¼€å‘å’Œè°ƒè¯• Higress æ§åˆ¶å°","url":"/zh-cn/blog/console-dev#ä»£ç ç»“æ„","content":"æ§åˆ¶å°çš„ä»£ç ä»“åº“åœ°å€ä¸º https://github.com/higress-group/higress-consoleã€‚ æ§åˆ¶å°é¡¹ç›®ä½¿ç”¨äº†å‰åç«¯åˆ†ç¦»çš„æ¶æ„ã€‚åœ¨å°†ä»£ç ä¸‹è½½åˆ°æœ¬åœ°åï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ•´ä¸ªé¡¹ç›®ä¸»è¦ç”±ä»¥ä¸‹ä¸‰ä¸ªç›®å½•ç»„æˆï¼šbackendã€frontend å’Œ helmã€‚å®ƒä»¬ä¹Ÿåˆ†åˆ«å¯¹åº”äº†é¡¹ç›®çš„ä¸‰ä¸ªéƒ¨åˆ†ï¼šåç«¯ã€å‰ç«¯å’Œéƒ¨ç½²ã€‚ ","version":null,"tagName":"h2"},{"title":"Backendï¼šåç«¯éƒ¨åˆ†â€‹","type":1,"pageTitle":"æ•™ç¨‹ï¼šå¦‚ä½•åœ¨æœ¬åœ°å¼€å‘å’Œè°ƒè¯• Higress æ§åˆ¶å°","url":"/zh-cn/blog/console-dev#backendåç«¯éƒ¨åˆ†","content":"åç«¯éƒ¨åˆ†æ˜¯ä¸€ä¸ªä½¿ç”¨ Maven æ„å»ºé…ç½®çš„ Java é¡¹ç›®ï¼Œå…¶ä¸­å…±æœ‰ä¸¤ä¸ªæ¨¡å—ï¼šsdk å’Œ consoleã€‚ SDKâ€‹ sdk ä¸­åŒ…å«äº†å®šä¹‰äº† Higress æ²»ç†å¹³é¢çš„æ ¸å¿ƒæ•°æ®æ¨¡å‹å’Œä¸šåŠ¡é€»è¾‘ï¼Œå¦‚è·¯ç”±æ¨¡å‹ã€Wasm æ’ä»¶æ¨¡å‹ã€é…ç½®æ¨¡å‹è½¬æ¢å’Œè¯»å†™é€»è¾‘ç­‰ã€‚å®ƒä¹ŸåŒæ ·ä½œä¸ºä¸€ä¸ªç‹¬ç«‹äº§å“å‘å¸ƒåˆ°äº† Maven ä¸­å¤®ä»“åº“ã€‚å¼€å‘è€…å¯ä»¥ä¸–ç•Œä½¿ç”¨è¿™ä¸ª SDK æ¥è¿›è¡Œé¢å‘ Higress çš„æ²»ç†åŠŸèƒ½å¼€å‘ï¼ˆå‚è€ƒæ–‡æ¡£ï¼‰ã€‚ é¡¹ç›®ä¸­çš„æ ¸å¿ƒåŒ…å¦‚ä¸‹ï¼š configï¼šSDK åˆå§‹åŒ–é…ç½®æ¨¡å‹constantï¼šå„ç±»å¸¸é‡modelï¼šå„ç±»é…ç½®æ¨¡å‹serviceï¼šæ ¸å¿ƒä¸šåŠ¡é€»è¾‘æœåŠ¡ kubernetesï¼šä¸ K8s æ¨¡å‹å’Œ API ç›¸å…³çš„æœåŠ¡ Consoleâ€‹ console ä¸­å®šä¹‰äº†æ§åˆ¶å°æ‰€ä½¿ç”¨çš„ Restful API å’Œä¸€äº›ç•Œé¢ç›¸å…³çš„éæ ¸å¿ƒåŠŸèƒ½ï¼Œä¾‹å¦‚ç›‘æ§çœ‹æ¿ç®¡ç†ã€ç”¨æˆ·é…ç½®ç®¡ç†ç­‰ã€‚ é¡¹ç›®ä¸­çš„æ ¸å¿ƒåŒ…å¦‚ä¸‹ï¼š clientï¼šå°è£…è®¿é—®å¤–éƒ¨ API çš„å®¢æˆ·ç«¯ constantï¼šå„ç±»å¸¸é‡controllerï¼šRestful API æ§åˆ¶å™¨serviceï¼šä¸šåŠ¡æœåŠ¡é€»è¾‘ ","version":null,"tagName":"h3"},{"title":"Frontendï¼šå‰ç«¯éƒ¨åˆ†â€‹","type":1,"pageTitle":"æ•™ç¨‹ï¼šå¦‚ä½•åœ¨æœ¬åœ°å¼€å‘å’Œè°ƒè¯• Higress æ§åˆ¶å°","url":"/zh-cn/blog/console-dev#frontendå‰ç«¯éƒ¨åˆ†","content":"å‰ç«¯éƒ¨åˆ†æ˜¯ä¸€ä¸ª NodeJS é¡¹ç›®ï¼Œä½¿ç”¨åŸºäº React çš„åº”ç”¨ç ”å‘æ¡†æ¶é£å†°ï¼ˆICEï¼‰æ­å»ºã€‚ æ•´ä¸ªé¡¹ç›®çš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š publicï¼šé¡¹ç›®ä¸­ä½¿ç”¨åˆ°çš„é™æ€èµ„æºsrcï¼šæ ¸å¿ƒä»£ç éƒ¨åˆ† componentsï¼šåœ¨é¡¹ç›®ä¸­è¢«å¤ç”¨çš„å°å‹ç»„ä»¶interfacesï¼šä¸ API äº¤äº’è¿‡ç¨‹ä¸­éœ€è¦ä½¿ç”¨åˆ°çš„æ•°æ®æ¨¡å‹localesï¼šå›½é™…åŒ–èµ„æºæ–‡ä»¶modelsï¼šå‰ç«¯é¡µé¢ä¸Šä¸‹æ–‡ä¸­éœ€è¦ä½¿ç”¨åˆ°çš„æ•°æ®æ¨¡å‹pagesï¼šå„ä¸ªå‰ç«¯é¡µé¢åŠå…¶å†…éƒ¨ç»„ä»¶servicesï¼šä¸ API è¿›è¡Œäº¤äº’é€»è¾‘å°è£… ice.config.mtsï¼šé£å†°çš„é¡¹ç›®é…ç½®æ–‡ä»¶ ","version":null,"tagName":"h3"},{"title":"Helmï¼šéƒ¨ç½²éƒ¨åˆ†â€‹","type":1,"pageTitle":"æ•™ç¨‹ï¼šå¦‚ä½•åœ¨æœ¬åœ°å¼€å‘å’Œè°ƒè¯• Higress æ§åˆ¶å°","url":"/zh-cn/blog/console-dev#helméƒ¨ç½²éƒ¨åˆ†","content":"æ§åˆ¶å°ä½¿ç”¨ Helm Chart è¿›è¡Œéƒ¨ç½²ã€‚è¿™ä¸€éƒ¨åˆ†å°±æ˜¯ Helm Chart çš„ä»£ç ã€‚æ•´ä½“ä»£ç ç»“æ„éµå¾ª Helm çš„å®˜æ–¹è§„èŒƒï¼Œå¯å‚è€ƒ Helm å®˜ç½‘ã€‚ ","version":null,"tagName":"h3"},{"title":"æœ¬åœ°è¿è¡Œâ€‹","type":1,"pageTitle":"æ•™ç¨‹ï¼šå¦‚ä½•åœ¨æœ¬åœ°å¼€å‘å’Œè°ƒè¯• Higress æ§åˆ¶å°","url":"/zh-cn/blog/console-dev#æœ¬åœ°è¿è¡Œ","content":"","version":null,"tagName":"h2"},{"title":"åç«¯éƒ¨åˆ†â€‹","type":1,"pageTitle":"æ•™ç¨‹ï¼šå¦‚ä½•åœ¨æœ¬åœ°å¼€å‘å’Œè°ƒè¯• Higress æ§åˆ¶å°","url":"/zh-cn/blog/console-dev#åç«¯éƒ¨åˆ†","content":"ç¯å¢ƒå‡†å¤‡â€‹ æ§åˆ¶å°çš„æ­£å¸¸è¿è¡Œä¾èµ– Higress æ ¸å¿ƒç»„ä»¶ï¼Œæ‰€ä»¥éœ€è¦å…ˆå‡†å¤‡ä¸€ä¸ªå®‰è£…å¥½çš„ Higress é›†ç¾¤ã€‚å¤§å®¶å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡æ¡£ï¼šé“¾æ¥ã€‚è€ƒè™‘åˆ°æœ¬åœ°è°ƒè¯•çš„ä¾¿åˆ©åº¦ï¼Œå»ºè®®å¤§å®¶ä½¿ç”¨æœ¬åœ° K8s ç¯å¢ƒçš„æ–¹æ³•è¿›è¡Œå®‰è£…ã€‚ æ§åˆ¶å°çš„åç«¯é¡¹ç›®è¦æ±‚ Java ç‰ˆæœ¬ä¸ä½äº 17ï¼Œæ‰€ä»¥è¯·ç¡®è®¤æœ¬åœ°å®‰è£…çš„ JDK ç‰ˆæœ¬æ»¡è¶³è¦æ±‚ã€‚ å¯åŠ¨é¡¹ç›®â€‹ æ§åˆ¶å°çš„å¤–éƒ¨æœåŠ¡ä¾èµ–ä¸»è¦æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯ K8s APIï¼Œå¦ä¸€ä¸ªæ˜¯ Higress Controllerã€‚ è®¿é—® K8s APIï¼Œæ§åˆ¶å°é»˜è®¤ä½¿ç”¨çš„æ˜¯æœ¬åœ°é»˜è®¤çš„ kubeconfig ï¼ˆå³ ~/.kube/configï¼‰ã€‚å¦‚æœéœ€è¦ä½¿ç”¨å…¶ä»–é…ç½®æ–‡ä»¶ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ HIGRESS_CONSOLE_KUBE_CONFIG ç¯å¢ƒå˜é‡æ¥æŒ‡å®šå¯¹åº”çš„æ–‡ä»¶è·¯å¾„ã€‚ æ§åˆ¶å°åœ¨æœ¬åœ°è¿è¡ŒçŠ¶æ€ä¸‹ï¼Œæ¥è®¿é—® K8s é›†ç¾¤ï¼Œä½¿ç”¨æœ¬åœ°çš„ 15014 ç«¯å£æ¥è®¿é—® Higress Controllerã€‚å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å°†å‰é¢å®‰è£…å¥½çš„ Higress å®ä¾‹ä¸­ controller çš„ 15014 ç«¯å£æ˜ å°„åˆ°æœ¬åœ°ï¼š kubectl port-forward deployment/higress-controller -n higress-system 15014   ç„¶åä½¿ç”¨é¡¹ç›®çš„ä¸»ç±» com.alibaba.higress.console.HigressConsoleApplication è¿›è¡Œå¯åŠ¨å³å¯ã€‚ç­‰å¾…å¯åŠ¨å®Œæˆåï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ http://localhost:8080/ æ¥è®¿é—®äº†ã€‚  å¦‚æœä½ æ˜¯ç¬¬ä¸€æ¬¡å¯åŠ¨ï¼Œé‚£ä¹ˆè®¿é—®ä¸Šè¿°åœ°å€çš„æ—¶å€™ä¼šå‘ç°å¹¶æ²¡æœ‰é¡µé¢å‡ºç°ã€‚å¦‚æœåªæ˜¯è¦è°ƒè¯• APIï¼Œè¿™æ ·ä¹Ÿæ˜¯å¯ä»¥æ­£å¸¸è¿›è¡Œçš„ã€‚ä½†å¦‚æœè¦ç»“åˆç½‘é¡µè¿›è¡Œè°ƒè¯•ï¼Œé‚£ä¹ˆéœ€è¦ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ‰§è¡Œä¸€æ¬¡ Maven æ„å»ºï¼Œç”Ÿæˆå‰ç«¯é¡µé¢èµ„æºï¼š ./mvnw clean package -Dmaven.test.skip=true   ","version":null,"tagName":"h3"},{"title":"å‰ç«¯éƒ¨åˆ†â€‹","type":1,"pageTitle":"æ•™ç¨‹ï¼šå¦‚ä½•åœ¨æœ¬åœ°å¼€å‘å’Œè°ƒè¯• Higress æ§åˆ¶å°","url":"/zh-cn/blog/console-dev#å‰ç«¯éƒ¨åˆ†","content":"ä¾èµ–å®‰è£…â€‹ æ§åˆ¶å°çš„å‰ç«¯é¡¹ç›®è¦æ±‚ NodeJS çš„ç‰ˆæœ¬ä¸ä½äº 16ï¼Œæ‰€ä»¥è¯·ç¡®è®¤æœ¬åœ°å®‰è£…çš„ NodeJS ç‰ˆæœ¬æ»¡è¶³è¦æ±‚ã€‚ ç„¶åä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…é¡¹ç›®æ‰€éœ€çš„å„ä¸ªä¾èµ–åŒ…ï¼š npm install  é¡¹ç›®å¯åŠ¨â€‹ ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¥‘åˆå¯åŠ¨å‰ç«¯é¡µé¢é¡¹ç›®ï¼š npm start   é»˜è®¤æƒ…å†µä¸‹ï¼Œå‰ç«¯é¡µé¢ä¼šè®¿é—® Higress å®˜æ–¹æä¾›çš„æ¼”ç¤ºç‰ˆæ§åˆ¶å° APIã€‚å¦‚æœä¸å¸Œæœ›å½±å“çº¿ä¸Šæ¼”ç¤ºæ•°æ®ï¼Œæˆ–éœ€è¦ä¸åç«¯ API è¿›è¡Œè”è°ƒçš„è¯ï¼Œå¯ä»¥ä¿®æ”¹é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ ice.config.mts æ–‡ä»¶ï¼Œå°†å…¶ä¸­çš„ http://demo.higress.io/ æ›¿æ¢ä¸ºæœ¬åœ°çš„æœåŠ¡åœ°å€ï¼ˆä¾‹å¦‚ï¼šhttp://127.0.0.1:8080/ï¼‰ï¼Œç„¶åé‡æ–°å¯åŠ¨å‰ç«¯é¡¹ç›®ã€‚è¿™æ ·é¡µé¢ä¸Šè®¿é—®çš„å°±æ˜¯æœ¬åœ°çš„æµ‹è¯•æœåŠ¡äº†ã€‚  ","version":null,"tagName":"h3"},{"title":"é•œåƒæ„å»ºâ€‹","type":1,"pageTitle":"æ•™ç¨‹ï¼šå¦‚ä½•åœ¨æœ¬åœ°å¼€å‘å’Œè°ƒè¯• Higress æ§åˆ¶å°","url":"/zh-cn/blog/console-dev#é•œåƒæ„å»º","content":"åœ¨å‘½ä»¤è¡Œä¸‹è¿›å…¥ backend ç›®å½•å¹¶æ‰§è¡Œ build.sh å³å¯å¯åŠ¨é•œåƒæ„å»ºã€‚æ„å»ºç”Ÿæˆçš„é•œåƒåç§°ä¸º higress-console:0.0.1ã€‚ æ³¨æ„ï¼šå¦‚æœå°è¯•åœ¨ Windows ä¸‹æ„å»ºï¼Œè¯·åŠ¡å¿…ç¡®è®¤è¯¥ç›®å½•ä¸‹çš„ start.sh ä½¿ç”¨çš„æ˜¯ Linux çš„æ¢è¡Œç¬¦ï¼ˆå³ LFï¼‰ã€‚å¦åˆ™ï¼Œæ„å»ºç”Ÿæˆçš„é•œåƒå°†æ— æ³•æ­£å¸¸è¿è¡Œã€‚  ","version":null,"tagName":"h2"},{"title":"æ€»ç»“â€‹","type":1,"pageTitle":"æ•™ç¨‹ï¼šå¦‚ä½•åœ¨æœ¬åœ°å¼€å‘å’Œè°ƒè¯• Higress æ§åˆ¶å°","url":"/zh-cn/blog/console-dev#æ€»ç»“","content":"æ§åˆ¶å°ä¸ºç”¨æˆ·æä¾›äº† Higress æ²»ç†ä¾§çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œä¸ºç”¨æˆ·æä¾›äº†åŸºç¡€çš„å¼€ç®±å³ç”¨ä½“éªŒã€‚ç¤¾åŒºä¹Ÿä¼šåœ¨æ§åˆ¶å°æ–¹é¢æŒç»­å‘åŠ›ï¼Œä¸ºç”¨æˆ·æä¾›æ›´ä¸°å¯Œçš„ã€æ›´ä¾¿æ·çš„ç½‘å…³æ²»ç†ä½“éªŒã€‚å¸Œæœ›æœ¬æ–‡å¯ä»¥è®©æ›´å¤šçš„å¼€å‘è€…åŠ å…¥æ§åˆ¶å°çš„ç ”å‘é˜Ÿä¼ä¸­ï¼Œä¸ºæ§åˆ¶å°çš„å‡çº§è¿­ä»£è´¡çŒ®ä¸€ä»½åŠ›é‡ã€‚ æ¬¢è¿å‚ä¸é˜¿é‡Œå¼€æºè´¡çŒ®ğŸ‘ ","version":null,"tagName":"h2"},{"title":"HigressåŠ©åŠ›AIå¤§æ¨¡å‹ä¼ä¸šçº§åº”ç”¨è½åœ°","type":0,"sectionRef":"#","url":"/zh-cn/blog/ai_plugin","content":"","keywords":"Higress wasm AI plugin","version":null},{"title":"Higress å¦‚ä½•é™ä½ AI å¤§æ¨¡å‹ä½¿ç”¨æˆæœ¬ï¼Ÿâ€‹","type":1,"pageTitle":"HigressåŠ©åŠ›AIå¤§æ¨¡å‹ä¼ä¸šçº§åº”ç”¨è½åœ°","url":"/zh-cn/blog/ai_plugin#higress-å¦‚ä½•é™ä½-ai-å¤§æ¨¡å‹ä½¿ç”¨æˆæœ¬","content":"Higress GitHubï¼š https://github.com/alibaba/higress ä»¥ OpenAI ä¸ºä¾‹ï¼ŒOpenAI çš„ API è°ƒç”¨å¹¶ä¸æ˜¯åŸºäºè¯·æ±‚é‡æˆ–è€…è®¢é˜…æ—¶é—´æ¥è®¡è´¹ï¼Œè€Œæ˜¯åŸºäºæ¯ä¸ªè¯·æ±‚çš„ä½¿ç”¨é‡æ¥è®¡è´¹ã€‚å¯¹äº AI å¤§æ¨¡å‹æ¥è¯´ï¼Œæ¨¡å‹è¾“å…¥ä¸è¾“å‡ºçš„ token æ•°å¯ä»¥æ¯”è¾ƒå¥½çš„è¡¡é‡å½“å‰æ¨¡å‹è¿›è¡Œæ¨ç†ä»»åŠ¡çš„å¤æ‚åº¦ã€‚å› æ­¤åŸºäº token ä½œä¸ºè¯·æ±‚ä½¿ç”¨é‡è¿›è¡Œè®¡è´¹æ˜¯ OpenAI-API çš„æ ‡å‡†è®¡è´¹ç­–ç•¥ã€‚å¯¹äºä¸åŒçš„æ¨¡å‹ token çš„è®¡è´¹æ ‡å‡†ä¹Ÿä¸åŒï¼Œè¶Šå¤æ‚çš„æ¨¡å‹ä¼šç”Ÿæˆè¶Šå¥½çš„ç»“æœï¼Œä½†ä¹Ÿä¼šå¸¦æ¥æ›´é«˜çš„è®¡è´¹ã€‚OpenAI é€šè¿‡ä¸ºç”¨æˆ·åˆ†å‘ API å¯†é’¥æ¥å®Œæˆç”¨æˆ·çš„é‰´æƒä¸æ”¶è´¹ç­‰åŠŸèƒ½ã€‚  å¯¹äºç»„ç»‡æ¥è¯´ï¼Œä¸ºæ¯ä½æˆå‘˜ç”³è¯· AI å¤§æ¨¡å‹çš„è®¿é—®æƒé™ï¼ˆ API-Key ï¼‰æ˜¾ç„¶æ˜¯ä¸ç°å®çš„ã€‚åˆ†æ•£çš„ API å¯†é’¥å°†ä¸åˆ©äºç»„ç»‡è¿›è¡Œ API çš„ç”¨é‡è®¡ç®—ã€ç®¡ç†ä¸ä»˜è´¹ï¼Œä»è€Œå¢åŠ  AI å¤§æ¨¡å‹çš„ä½¿ç”¨æˆæœ¬ã€‚å…¶æ¬¡ï¼Œå¯¹äºç»„ç»‡æ¥è¯´ï¼ŒAI æ¨¡å‹çš„é€‰å‹ã€ä½¿ç”¨é¢‘ç‡å’Œæˆå‘˜ä½¿ç”¨æƒé™ã€ä»¥åŠå‘ AI å¤§æ¨¡å‹æš´éœ²å“ªäº›æ•°æ®éƒ½æ˜¯åœ¨ç®¡ç†ä¸­éœ€è¦ç€é‡å…³æ³¨çš„åŠŸèƒ½ã€‚ Higress åŸºäºä¸°å¯Œçš„æ’ä»¶èƒ½åŠ›ï¼Œæä¾›äº†è®¤è¯é‰´æƒã€è¯·æ±‚è¿‡æ»¤ã€æµé‡æ§åˆ¶ã€ç”¨é‡ç›‘æµ‹å’Œå®‰å…¨é˜²æŠ¤ç­‰åŠŸèƒ½ï¼Œèƒ½å¤Ÿå¸®åŠ©ç»„ç»‡ä¸ AI å¤§æ¨¡å‹çš„ API äº¤äº’å˜å¾—æ›´åŠ å®‰å…¨ã€å¯é å’Œå¯è§‚å¯Ÿï¼šåŸºäº Higress æä¾›çš„è®¤è¯é‰´æƒèƒ½åŠ›ï¼Œç»„ç»‡å¯ä»¥å®ç°é€šè¿‡ç»Ÿä¸€çš„ API å¯†é’¥è¿›è¡Œ AI æ¨¡å‹çš„è°ƒç”¨é‡ç®¡ç†å’Œä»˜è´¹ï¼Œå¹¶ä¸ºå›¢é˜Ÿæˆå‘˜æˆäºˆä¸åŒçš„ AI æ¨¡å‹è®¿é—®æƒé™ï¼›åŸºäº Higress æä¾›çš„æµé‡æ§åˆ¶èƒ½åŠ›ï¼Œç»„ç»‡èƒ½ä¸ºä¸åŒçš„æ¨¡å‹ä¸ç”¨æˆ·è®¾ç½®å·®å¼‚åŒ–çš„è®¿é—®é€Ÿç‡é™åˆ¶ï¼Œæœ‰æ•ˆé™ä½ AI æ¨¡å‹çš„ä½¿ç”¨æˆæœ¬ï¼›åŸºäº Higress æä¾›çš„è¯·æ±‚æ‹¦æˆªèƒ½åŠ›ï¼Œç»„ç»‡èƒ½å¤Ÿæœ‰æ•ˆè¿‡æ»¤å«æ•æ„Ÿä¿¡æ¯çš„è®¿é—®è¯·æ±‚ï¼Œé˜²æŠ¤éƒ¨åˆ†å†…éƒ¨ç«™ç‚¹èµ„æºä¸å¯¹å¤–æš´éœ²ï¼Œä»è€Œæœ‰æ•ˆä¿éšœå†…éƒ¨æ•°æ®å®‰å…¨ï¼›åŸºäºå•†ä¸šç‰ˆ Higressæä¾›çš„å¼€ç®±å³ç”¨çš„æŒ‡æ ‡æŸ¥è¯¢å’Œæ—¥å¿—è®°å½•çš„èƒ½åŠ›ï¼Œç»„ç»‡èƒ½å¤Ÿå®Œæˆå¯¹ä¸åŒç”¨æˆ·çš„ AI æ¨¡å‹è°ƒç”¨çš„ç”¨é‡è§‚æµ‹ä¸åˆ†æï¼Œä»è€Œåˆ¶å®šæ›´åŠ åˆç†çš„ AI æ¨¡å‹ä½¿ç”¨ç­–ç•¥ã€‚  ","version":null,"tagName":"h2"},{"title":"Higress å¯¹æ¥ OpenAI å¤§è¯­è¨€æ¨¡å‹å®æˆ˜â€‹","type":1,"pageTitle":"HigressåŠ©åŠ›AIå¤§æ¨¡å‹ä¼ä¸šçº§åº”ç”¨è½åœ°","url":"/zh-cn/blog/ai_plugin#higress-å¯¹æ¥-openai-å¤§è¯­è¨€æ¨¡å‹å®æˆ˜","content":"ä¸‹é¢æˆ‘ä»¬å°†ä»¥ Higress å¯¹æ¥ OpenAI å¤§è¯­è¨€æ¨¡å‹ä¸ºä¾‹ï¼Œä»‹ç» Higress å¦‚ä½•æ— ç¼å¯¹æ¥ AI å¤§æ¨¡å‹ã€‚æ•´ä½“æ–¹æ¡ˆå¦‚å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬åŸºäº WASM æ‹“å±•äº† Higress æ’ä»¶ï¼Œå®ç°äº†å¯¹ OpenAI è¯­è¨€æ¨¡å‹çš„è¯·æ±‚ä»£ç†è½¬å‘ã€‚åŸºäº Higress æä¾›çš„ Key-Auth è®¤è¯æ’ä»¶çš„èƒ½åŠ›ï¼Œæˆ‘ä»¬å®ç°ç»Ÿä¸€ API-Key ä¸‹çš„å¤šç§Ÿæˆ·è®¤è¯ã€‚åŸºäº Higress æä¾›çš„ Request-Block è¯·æ±‚è¿‡æ»¤çš„èƒ½åŠ›ï¼Œæˆ‘ä»¬å°†å®ç°å«æ•æ„Ÿä¿¡æ¯çš„è¯·æ±‚æ‹¦æˆªï¼Œä¿éšœç”¨æˆ·æ•°æ®å®‰å…¨ã€‚  ","version":null,"tagName":"h2"},{"title":"å‰ææ¡ä»¶ï¼šâ€‹","type":1,"pageTitle":"HigressåŠ©åŠ›AIå¤§æ¨¡å‹ä¼ä¸šçº§åº”ç”¨è½åœ°","url":"/zh-cn/blog/ai_plugin#å‰ææ¡ä»¶","content":"å®‰è£… Higress ï¼Œå‚è€ƒHigress å®‰è£…éƒ¨ç½²æ–‡æ¡£ã€‚å‡†å¤‡ Go è¯­è¨€å¼€å‘ WASM æ’ä»¶çš„å¼€å‘ç¯å¢ƒï¼Œå‚è€ƒä½¿ç”¨ GO è¯­è¨€å¼€å‘ WASM æ’ä»¶ã€‚ ","version":null,"tagName":"h3"},{"title":"åŸºäº WASM çš„ AI Proxy Pluginâ€‹","type":1,"pageTitle":"HigressåŠ©åŠ›AIå¤§æ¨¡å‹ä¼ä¸šçº§åº”ç”¨è½åœ°","url":"/zh-cn/blog/ai_plugin#åŸºäº-wasm-çš„-ai-proxy-plugin","content":"ä¸‹æ–‡å°†ç»™å‡ºåŸºäº Higress ä¸ WASM å®ç°çš„ AI å¤§æ¨¡å‹ API ä»£ç†æ’ä»¶æ–¹æ¡ˆã€‚Higress æ”¯æŒåŸºäº WASM å®ç°å¯¹å¤–æ‰©å±•çš„èƒ½åŠ›ã€‚WASM æ’ä»¶æä¾›çš„å¤šè¯­è¨€ç”Ÿæ€å’Œçƒ­æ’æ‹”æœºåˆ¶ä¸ºæ’ä»¶çš„å®ç°å’Œéƒ¨ç½²æä¾›äº†ä¾¿åˆ©ã€‚Higress åŒæ—¶æ”¯æŒåœ¨æ’ä»¶ä¸­è¯·æ±‚å¤–éƒ¨æœåŠ¡ï¼Œä¸º AI ä»£ç†æ’ä»¶çš„å®ç°æä¾›äº†é«˜æ•ˆçš„è§£å†³è·¯å¾„ã€‚ å®ç°ç¤ºä¾‹ï¼šâ€‹ æˆ‘ä»¬ç»™å‡º OpenAI-API çš„ä»£ç†æ’ä»¶çš„å®ç°ç¤ºä¾‹ï¼Œè¯¦æƒ…è¯·å‚è€ƒAI proxy pluginã€‚ä¸‹åˆ—ä»£ç å®ç°äº†æ’ä»¶ç›¸å…³é…ç½®å®Œæˆä¹‹åï¼ŒåŸºäº HTTP è‡ªåŠ¨å°†è¯·æ±‚ä»£ç†è½¬å‘åˆ° OpenAI-API ï¼Œå¹¶æ¥æ”¶æ¥è‡ª OpenAI-API çš„å“åº”ï¼Œä»è€Œå®Œæˆ AI æ¨¡å‹çš„è°ƒç”¨ï¼Œå…·ä½“å®ç°æ­¥éª¤å¦‚ä¸‹ï¼š é€šè¿‡ RouteCluster æ–¹æ³•æŒ‡å®šå…·ä½“çš„ OpenAI-API çš„ host ï¼Œç¡®è®¤ç”¨æˆ·è¯·æ±‚è½¬å‘çš„å…·ä½“è·¯å¾„ï¼Œå¹¶æ–°å»ºç”¨äºè¯·æ±‚ä»£ç†è½¬å‘çš„ HTTP Client ã€‚ func parseConfig(json gjson.Result, config *MyConfig, log wrapper.Log) error { chatgptUri := json.Get(&quot;chatgptUri&quot;).String() var chatgptHost string if chatgptUri == &quot;&quot; { config.ChatgptPath = &quot;/v1/completions&quot; chatgptHost = &quot;api.openai.com&quot; } //è¯·æ±‚é»˜è®¤è½¬å‘åˆ° OpenAI-API ... config.client = wrapper.NewClusterClient(wrapper.RouteCluster{ Host: chatgptHost, }) //é€šè¿‡ RouteCluster æ–¹æ³•ç¡®è®¤è¯·æ±‚è½¬å‘çš„å…·ä½“ host ... }  å¯¹ç”¨æˆ·è¯·æ±‚è¿›è¡Œ OpenAI-API çš„æ ¼å¼å°è£…ï¼Œé€šè¿‡ HTTP Client è¿›è¡Œè¯·æ±‚è½¬å‘ä¸å“åº”æ¥å—ï¼Œå¹¶å°†å“åº”è½¬å‘ç»™ç”¨æˆ·ã€‚ //OpenAI API æ¥æ”¶çš„è¯·æ±‚ä½“æ¨¡ç‰ˆï¼Œè¯¦è§ï¼š https://platform.openai.com/docs/api-reference/chat const bodyTemplate string = ` { &quot;model&quot;:&quot;%s&quot;, &quot;prompt&quot;:&quot;%s&quot;, &quot;temperature&quot;:0.9, &quot;max_tokens&quot;: 150, &quot;top_p&quot;: 1, &quot;frequency_penalty&quot;: 0.0, &quot;presence_penalty&quot;: 0.6, &quot;stop&quot;: [&quot;%s&quot;, &quot;%s&quot;] } ` func onHttpRequestHeaders(ctx wrapper.HttpContext, config MyConfig, log wrapper.Log) types.Action { ... //æ ¹æ®ç”¨æˆ·çš„è¯·æ±‚å†…å®¹è¿›è¡Œ OpenAI-API è¯·æ±‚ä½“å°è£… body := fmt.Sprintf(bodyTemplate, config.Model, prompt[0], config.HumanId, config.AIId) //é€šè¿‡ HTTP Client è¿›è¡Œè½¬å‘ err = config.client.Post(config.ChatgptPath, [][2]string{ {&quot;Content-Type&quot;, &quot;application/json&quot;}, {&quot;Authorization&quot;, &quot;Bearer &quot; + config.ApiKey}, }, []byte(body), func(statusCode int, responseHeaders http.Header, responseBody []byte) { var headers [][2]string for key, value := range responseHeaders { headers = append(headers, [2]string{key, value[0]}) } //æ¥æ”¶æ¥è‡ªäº OpenAI-API çš„å“åº”å¹¶è½¬å‘ç»™ç”¨æˆ· proxywasm.SendHttpResponse(uint32(statusCode), headers, responseBody, -1) }, 10000) ... }  åœ¨ Higress ä¸­å¯ç”¨è‡ªå®šä¹‰çš„ AI-Proxy-Wasm æ’ä»¶æµç¨‹å¦‚ä¸‹ï¼š æœ¬ç¤ºä¾‹æä¾›å·²ç»ç¼–è¯‘å¥½çš„ AI-proxy-plugin-wasm æ–‡ä»¶å¹¶å®Œæˆå¯¹åº” docker é•œåƒçš„æ„å»ºå’Œæ¨é€ï¼Œæ¨èé…ç½®å¦‚ä¸‹æ‰€ç¤ºï¼š åç§°\tæ¨èé…ç½®é•œåƒåœ°å€\toci://registry.cn-hangzhou.aliyuncs.com/zwj_test/chatgpt-proxy:1.0.0 æ’ä»¶æ‰§è¡Œé˜¶æ®µ\té‰´æƒé˜¶æ®µ æ’ä»¶æ‰§è¡Œä¼˜å…ˆçº§\t1 æ’ä»¶é…ç½®è¯´æ˜ï¼šâ€‹ æ’ä»¶é…ç½®ç®€å•ï¼Œæ”¯æŒå…¨å±€/åŸŸåçº§/è·¯ç”±çº§çš„ä»£ç†è½¬å‘ã€‚æ¨èè¿›è¡Œè·¯ç”±çº§é…ç½®ï¼šé€‰ä¸­å¯¹åº”çš„è·¯ç”±é…ç½®-é€‰ä¸­å¯¹åº”è·¯ç”±-ç­–ç•¥-å¯ç”¨æ’ä»¶ã€‚é…ç½®å­—æ®µåŒ…æ‹¬ï¼š åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°model\tstring\té€‰å¡«\ttext-davinci-003\tè°ƒç”¨çš„æ¨¡å‹åç§° apiKey\tstring\tå¿…å¡«\t-\tOpenAI-API å¯†é’¥ï¼Œè¯¦æƒ…å¯å‚è€ƒ promptParam\tstring\té€‰å¡«\tprompt\tprompt çš„æ¥æºå­—æ®µåç§°ï¼ŒURL å‚æ•° chatgptUri\tstring\té€‰å¡«\tapi.openai.com/v1/completions\tè°ƒç”¨ AI æ¨¡å‹æœåŠ¡çš„ URL è·¯å¾„ï¼Œé»˜è®¤å€¼ä¸º OpenAI çš„ API è°ƒç”¨è·¯å¾„ ç¤ºä¾‹é…ç½®å¦‚ä¸‹ï¼š apiKey: &quot;xxxxxxxxxxxxxxxxxx&quot; model: &quot;curie&quot; promptParam: &quot;text&quot;  æ ¹æ®è¯¥é…ç½®ï¼Œç½‘å…³ä»£ç†åˆ° OpenAI-API ä¸‹çš„ curie æ¨¡å‹ï¼Œç”¨æˆ·é€šè¿‡ text å…³é”®å­—åœ¨ url ä¸­è¾“å…¥æ–‡æœ¬ã€‚ curl &quot;http://{GatewayIP}/?text=Say,hello&quot;  å¾—åˆ° OpenAI-API çš„å“åº”ï¼š ","version":null,"tagName":"h3"},{"title":"åŸºäº Key Auth çš„å¤šç§Ÿæˆ·è®¤è¯â€‹","type":1,"pageTitle":"HigressåŠ©åŠ›AIå¤§æ¨¡å‹ä¼ä¸šçº§åº”ç”¨è½åœ°","url":"/zh-cn/blog/ai_plugin#åŸºäº-key-auth-çš„å¤šç§Ÿæˆ·è®¤è¯","content":"ä¸åŒäºä¸ºæ¯ä½æˆå‘˜é¢å‘ OpenAI-API å¯†é’¥çš„å½¢å¼ï¼Œä¼ä¸šå¯ä»¥åŸºäº Higress ç½‘å…³æä¾›çš„è®¤è¯é‰´æƒèƒ½åŠ›ï¼Œä¾é å†…éƒ¨æˆæƒï¼ˆå¦‚ Key Auth ç­‰ï¼‰æ¥ç®¡ç†æˆå‘˜å¯¹ AI æ¨¡å‹å¯¹è®¿é—®æƒé™ï¼Œä»è€Œé™åˆ¶æˆå‘˜å¯ä»¥ä½¿ç”¨çš„æœåŠ¡å’Œæ¨¡å‹ï¼Œå¹¶ä¾é ç»Ÿä¸€çš„ AI-API å¯†é’¥è¿›è¡Œè¯·æ±‚ä»£ç†è½¬å‘å®ç°å¯¹ API ç”¨é‡çš„ç»Ÿä¸€ç®¡ç†ã€‚æ¥ä¸‹æ¥ä»¥ Key Auth ä¸ºä¾‹ä»‹ç» Higress çš„å¤šç§Ÿæˆ·è®¤è¯èƒ½åŠ›ã€‚ Key Auth æ’ä»¶å®ç°äº†åŸºäºç½‘å…³å†… API Key è¿›è¡Œè®¤è¯å’Œé‰´æƒçš„åŠŸèƒ½ï¼Œæ”¯æŒä» HTTP è¯·æ±‚çš„ URL å‚æ•°æˆ–è€…è¯·æ±‚å¤´è§£æ API Key ï¼ŒåŒæ—¶éªŒè¯è¯¥ API æ˜¯å¦æœ‰æƒé™è®¿é—®ã€‚é€šè¿‡åœ¨Higress æ§åˆ¶å°-æ’ä»¶å¸‚åœº-Key Authè¿›è¡Œå…¨å±€é…ç½®å’Œè·¯ç”±çº§é…ç½®ï¼Œå³å¯å®ç° Higress ç½‘å…³çš„å¤šç§Ÿæˆ·è®¤è¯ã€‚  consumers: - credential: &quot;xxxxxx&quot; name: &quot;consumer1&quot; - credential: &quot;yyyyyy&quot; name: &quot;consumer2&quot; global_auth: false in_header: true keys: - &quot;apikey&quot;   allow: [consumer1]  ä»¥ä¸Šé…ç½®å®šä¹‰äº†æŒ‡å‘ AI æ¨¡å‹æœåŠ¡çš„æ¶ˆè´¹è€…ç»„consumersï¼Œå¹¶ä¸”åªæœ‰consumer1å…·å¤‡è®¿é—®å½“å‰è·¯ç”±ä¸‹ AI æ¨¡å‹æœåŠ¡çš„æƒé™ã€‚ curl &quot;http://{GatewayIP}/?text=Say,hello&quot; #è¯·æ±‚æœªæä¾› API-Key ï¼Œè¿”å› 401 curl &quot;http://{GatewayIP}/?text=Say,hello&quot; -H &quot;apikey:zzzzzz&quot; #è¯·æ±‚æä¾›çš„ API-Key æœªåœ¨æ¶ˆè´¹è€…ç»„å†…ï¼Œæ— æƒè®¿é—®ï¼Œè¿”å› 401 curl &quot;http://{GatewayIP}/?text=Say,hello&quot; -H &quot;apikey:yyyyyy&quot; #æ ¹æ®è¯·æ±‚æä¾›çš„ API-Keyy åŒ¹é…åˆ°çš„è°ƒç”¨è€…æ—  AI æ¨¡å‹æœåŠ¡çš„è®¿é—®æƒé™ï¼Œè¿”å› 403 curl &quot;http://{GatewayIP}/?text=Say,hello&quot; -H &quot;apikey:xxxxxx&quot; #è¯·æ±‚åˆæ³•ä¸”æœ‰ AI æ¨¡å‹æœåŠ¡è®¿é—®æƒé™ï¼Œè¯·æ±‚å°†è¢«ä»£ç†åˆ° AI æ¨¡å‹ï¼Œæ­£å¸¸å¾—åˆ° OpenAI-API çš„å“åº”  Higress é™¤äº†æä¾›ç½‘å…³çº§å¤šç§Ÿæˆ·è®¤è¯å¤–ï¼Œè¿˜èƒ½æä¾›é™æµç­‰èƒ½åŠ›ã€‚Key Rate Limit æ’ä»¶å¯ä»¥æ ¹æ®ç”¨æˆ·åœ¨æ¶ˆè´¹ç»„ä¸­çš„æˆå‘˜èµ„æ ¼å¯¹ç”¨æˆ·è¯·æ±‚é€Ÿç‡è¿›è¡Œé™åˆ¶ï¼Œä»è€Œé™åˆ¶åº”ç”¨ç¨‹åºå¯¹é«˜æˆæœ¬ AI å¤§æ¨¡å‹æœåŠ¡çš„æ¶ˆè€—ã€‚åŸºäºå¤šç§Ÿæˆ·è®¤è¯ä¸é™æµç­‰åŠŸèƒ½ï¼ŒHigress å¯ä»¥å®Œå…¨æ§åˆ¶ AI å¤§æ¨¡å‹ API çš„è®¿é—®æƒé™ã€è®¿é—®æ•°é‡ä¸è°ƒç”¨æˆæœ¬ã€‚ ","version":null,"tagName":"h3"},{"title":"åŸºäº Request Block ä¿éšœæ•°æ®å®‰å…¨â€‹","type":1,"pageTitle":"HigressåŠ©åŠ›AIå¤§æ¨¡å‹ä¼ä¸šçº§åº”ç”¨è½åœ°","url":"/zh-cn/blog/ai_plugin#åŸºäº-request-block-ä¿éšœæ•°æ®å®‰å…¨","content":"å¯¹äº AI å¤§æ¨¡å‹å°¤å…¶æ˜¯è¯­è¨€æ¨¡å‹æ¥è¯´ï¼Œè¦å¾—åˆ°è‰¯å¥½çš„è¿”å›å¾€å¾€éœ€è¦ç”¨æˆ·æä¾›è¶³å¤Ÿçš„æç¤ºï¼ˆ prompt ï¼‰ä½œä¸ºæ¨¡å‹è¾“å…¥ã€‚è¿™ä¹Ÿæ„å‘³ç€ç»„ç»‡å’Œä¸ªäººå¯èƒ½ä¼šåœ¨æä¾›æç¤ºçš„è¿‡ç¨‹ä¸­é¢ä¸´æ•°æ®æ³„æ¼çš„é£é™©ã€‚å› æ­¤å¦‚ä½•åœ¨ä½¿ç”¨ AI æ¨¡å‹çš„è¿‡ç¨‹ä¸­ä¿éšœæ•°æ®å®‰å…¨ä¹Ÿæ˜¯ API è°ƒç”¨æ–¹é¢ä¸´é‡è¦é—®é¢˜ã€‚ä¿æŠ¤æ•°æ®å®‰å…¨æ¶‰åŠåˆ°å¯¹ AI æ¨¡å‹çš„ API è°ƒç”¨æ¸ é“è¿›è¡Œä¸¥æ ¼çš„æ§åˆ¶ã€‚ä¸€ç§æ–¹å¼æ˜¯ä½¿ç”¨ç‰¹å®šçš„ç»æ‰¹å‡†çš„æ¨¡å‹ä¸å…¶å‘å¸ƒçš„ API ã€‚å¦ä¸€ç§æ–¹å¼æ˜¯å¯¹å«æ•æ„Ÿä¿¡æ¯çš„ç”¨æˆ·è¯·æ±‚è¿›è¡Œæ‹¦æˆªã€‚è¿™å¯ä»¥é€šè¿‡åœ¨ç½‘å…³çº§åˆ«è®¾ç½®ç‰¹å®šçš„è¯·æ±‚æ‹¦æˆªæ¥å®ç°ã€‚Higress åŸºäº Request Block æ’ä»¶æä¾›è¯·æ±‚æ‹¦æˆªèƒ½åŠ›ï¼Œæ—¢èƒ½é˜²æ­¢æœªç»æˆæƒçš„æ¨¡å‹è®¿é—®ç”¨æˆ·ä¿¡æ¯ï¼Œåˆèƒ½é˜²æ­¢å«æ•æ„Ÿä¿¡æ¯çš„ç”¨æˆ·è¯·æ±‚æš´éœ²åˆ°å¤–ç½‘ã€‚ Request Block æ’ä»¶åŸºäº URL ã€è¯·æ±‚å¤´ç­‰ç‰¹å¾å±è”½ HTTP è¯·æ±‚ï¼Œå¯ä»¥ç”¨äºé˜²æŠ¤ç«™ç‚¹èµ„æºä¸å¯¹å¤–æš´éœ²ã€‚ é€šè¿‡åœ¨Higress æ§åˆ¶å°-æ’ä»¶å¸‚åœº-Request Blockè¿›è¡Œå±è”½å­—æ®µé…ç½®ï¼Œå³å¯é˜²æ­¢å«æ•æ„Ÿå­—æ®µçš„è¯·æ±‚å¯¹å¤–å‘é€ã€‚  blocked_code: 404 block_urls: - password - pw case_sensitive: false  ä»¥ä¸Šé…ç½®å®šä¹‰äº†å½“å‰è·¯ç”±ä¸‹åŸºäº URL çš„å±è”½å­—æ®µï¼Œå…¶ä¸­å«æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚ password ã€pw ï¼‰çš„è¯·æ±‚å°†è¢«å±è”½ã€‚ curl &quot;http://{GatewayIP}/?text=Mypassword=xxxxxx&quot; -H &quot;apikey:xxxxxx&quot; curl &quot;http://{GatewayIP}/?text=pw=xxxxxx&quot; -H &quot;apikey:xxxxxx&quot; #ä¸Šè¿°è¯·æ±‚å°†è¢«ç¦æ­¢è®¿é—®ï¼Œè¿”å› 404  ","version":null,"tagName":"h3"},{"title":"åŸºäºå•†ä¸šç‰ˆ Higress çš„ç”¨é‡è§‚æµ‹ä¸åˆ†æâ€‹","type":1,"pageTitle":"HigressåŠ©åŠ›AIå¤§æ¨¡å‹ä¼ä¸šçº§åº”ç”¨è½åœ°","url":"/zh-cn/blog/ai_plugin#åŸºäºå•†ä¸šç‰ˆ-higress-çš„ç”¨é‡è§‚æµ‹ä¸åˆ†æ","content":"å¯¹äºç»„ç»‡æ¥è¯´ï¼Œå¯¹å„ç”¨æˆ·è¿›è¡Œ AI æ¨¡å‹è°ƒç”¨çš„ç”¨é‡è§‚æµ‹å’Œåˆ†ææœ‰åŠ©äºäº†è§£å…¶ä½¿ç”¨æƒ…å†µä¸äº§ç”Ÿçš„æˆæœ¬ã€‚å¯¹äºä¸ªäººç”¨æˆ·ï¼Œäº†è§£è‡ªå·±çš„è°ƒç”¨é‡å’Œå¼€é”€ä¹Ÿæ˜¯å¿…è¦çš„ã€‚å› æ­¤ï¼Œåœ¨ç½‘å…³å±‚è¿›è¡Œè°ƒç”¨çš„è§‚æµ‹å’Œåˆ†æå¯¹äº AI å¤§æ¨¡å‹çš„ API ç®¡ç†æ˜¯å¿…è¦çš„èƒ½åŠ›ã€‚å•†ä¸šç‰ˆ Higressä¸å„ç§æŒ‡æ ‡ä¸æ—¥å¿—ç³»ç»Ÿè¿›è¡Œäº†æ·±åº¦é›†æˆï¼Œæä¾›äº†å¼€ç®±å³ç”¨çš„ç”¨é‡è§‚æµ‹åˆ†ææŠ¥å‘Šæ„å»ºæœºåˆ¶ï¼Œå¯ä»¥å®æ—¶æŸ¥çœ‹å„ç§ API çš„ä½¿ç”¨æƒ…å†µï¼Œå¹¶æ ¹æ®å„ç±»å‚æ•°è¿›è¡Œè¿‡æ»¤ï¼Œä»è€Œæ›´å¥½çš„äº†è§£ API ä½¿ç”¨æƒ…å†µã€‚ ä»¥è§‚å¯Ÿå„ç”¨æˆ·å¯¹ OpenAI-Curie æ¨¡å‹çš„è°ƒç”¨é‡ä¸ºä¾‹ï¼Œç”¨æˆ·å¯é€šè¿‡MSE ç®¡ç†æ§åˆ¶å°-äº‘åŸç”Ÿç½‘å…³-ç½‘å…³å®ä¾‹-å‚æ•°é…ç½®-æ—¥å¿—æ ¼å¼è°ƒæ•´ä¸­è®¾ç½®åŒºåˆ†ç”¨æˆ·çš„å¯è§‚æµ‹æ€§å‚æ•°è¯·æ±‚å¤´ï¼šx-mse-consumerï¼Œå°†å…¶åˆ—å…¥è§‚æµ‹åˆ—è¡¨ã€‚ä¹‹åè¿›å…¥è§‚æµ‹åˆ†æ-æ—¥å¿—ä¸­å¿ƒä¸­è®¾ç½®ä½¿ç”¨ç»Ÿè®¡å›¾è¡¨åŠŸèƒ½å³å¯å®Œæˆå¯¹ API çš„ç”¨é‡è§‚æµ‹å’Œåˆ†æã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œç”¨æˆ·consumer1ä¸ç”¨æˆ·consumer2çš„å¯¹ OpenAI-Curie æ¨¡å‹çš„è°ƒç”¨é‡ä»¥é¥¼çŠ¶å›¾å½¢å¼å‘ˆç°ã€‚ ","version":null,"tagName":"h3"},{"title":"åŠ å…¥ Higress ç¤¾åŒºâ€‹","type":1,"pageTitle":"HigressåŠ©åŠ›AIå¤§æ¨¡å‹ä¼ä¸šçº§åº”ç”¨è½åœ°","url":"/zh-cn/blog/ai_plugin#åŠ å…¥-higress-ç¤¾åŒº","content":" å¦‚æœæ‚¨è§‰å¾— Higress å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œæ¬¢è¿å‰å¾€github: Higressä¸ºæˆ‘ä»¬ star ä¸€ä¸‹ï¼ ","version":null,"tagName":"h2"},{"title":"Windows ä¸‹ Higress éƒ¨ç½²å®è·µ","type":0,"sectionRef":"#","url":"/zh-cn/blog/DeployOnWindows","content":"","keywords":"higress","version":null},{"title":"å‰ç½®å‡†å¤‡â€‹","type":1,"pageTitle":"Windows ä¸‹ Higress éƒ¨ç½²å®è·µ","url":"/zh-cn/blog/DeployOnWindows#å‰ç½®å‡†å¤‡","content":"","version":null,"tagName":"h2"},{"title":"é…ç½® WSL2â€‹","type":1,"pageTitle":"Windows ä¸‹ Higress éƒ¨ç½²å®è·µ","url":"/zh-cn/blog/DeployOnWindows#é…ç½®-wsl2","content":"è¯¦æƒ…å‚çœ‹æ­¥éª¤1-5,é¡ºä¾¿åœ¨å¾®è½¯å•†åº—ä¸­ä¸‹è½½Terminalã€‚ WSLæ‰‹åŠ¨å®‰è£…æ­¥éª¤ ","version":null,"tagName":"h3"},{"title":"ä¸‹è½½ Docker Desktopâ€‹","type":1,"pageTitle":"Windows ä¸‹ Higress éƒ¨ç½²å®è·µ","url":"/zh-cn/blog/DeployOnWindows#ä¸‹è½½-docker-desktop","content":"è®¿é—® Docker Desktop å®˜æ–¹ä¸‹è½½é¡µé¢ åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ Docker Desktop çš„å®˜æ–¹ä¸‹è½½é¡µé¢ ä¸‹è½½ Docker Desktop åœ¨ä¸‹è½½é¡µé¢ï¼Œæ‰¾åˆ°é€‚ç”¨äº Windows çš„ Docker Desktop ç‰ˆæœ¬ï¼Œç„¶åç‚¹å‡»ä¸‹è½½ã€‚ è¿è¡Œå®‰è£…ç¨‹åº ä¸‹è½½å®Œæˆåï¼Œæ‰¾åˆ°ä¸‹è½½çš„å®‰è£…ç¨‹åºï¼ˆé€šå¸¸åœ¨ä½ çš„ &quot;ä¸‹è½½&quot; æ–‡ä»¶å¤¹ä¸­ï¼‰ï¼Œç„¶ååŒå‡»è¿è¡Œã€‚ ","version":null,"tagName":"h3"},{"title":"å®‰è£… Cygwinâ€‹","type":1,"pageTitle":"Windows ä¸‹ Higress éƒ¨ç½²å®è·µ","url":"/zh-cn/blog/DeployOnWindows#å®‰è£…-cygwin","content":"cygwinå®˜ç½‘ é€‰æ‹©setup-x86_64.exeï¼Œç­‰å¾…å®‰è£…å®Œæˆã€‚ éªŒè¯ Cygwin å®‰è£…æ˜¯å¦æˆåŠŸâ€‹ cygcheck -c cygwin   ä¸º Cygwin é…ç½®ç¯å¢ƒå˜é‡â€‹     ç‚¹å‡»ç¡®å®šå³å¯æ·»åŠ æˆåŠŸ ","version":null,"tagName":"h3"},{"title":"å®‰è£… Higreesâ€‹","type":1,"pageTitle":"Windows ä¸‹ Higress éƒ¨ç½²å®è·µ","url":"/zh-cn/blog/DeployOnWindows#å®‰è£…-higrees","content":"","version":null,"tagName":"h2"},{"title":"å‡†å¤‡ Nacosâ€‹","type":1,"pageTitle":"Windows ä¸‹ Higress éƒ¨ç½²å®è·µ","url":"/zh-cn/blog/DeployOnWindows#å‡†å¤‡-nacos","content":"nacoså®˜ç½‘æ‰‹å†Œ æˆ‘ä»¬è¿™é‡Œé€‰æ‹©nacos-dockerçš„æ¨¡å¼å®‰è£…  ä¸‹è½½è§£å‹zipæ–‡ä»¶,è¿›å…¥ nacos-docker-master æ–‡ä»¶å¤¹å³é”®é€‰æ‹©ç»ˆç«¯æ‰“å¼€ï¼Œæ‰§è¡Œå‘½ä»¤ï¼Œæˆ‘ä»¬è¿™é‡Œé€‰æ‹©å•æœºæ¨¡å¼éƒ¨ç½²  docker-compose -f example/standalone-derby.yaml up  ç­‰å¾…å‡ºç°ç•Œé¢ï¼Œå³å®‰è£…æˆåŠŸ  ","version":null,"tagName":"h3"},{"title":"ä½¿ç”¨ Higrees å¯¹æ¥ Nacosâ€‹","type":1,"pageTitle":"Windows ä¸‹ Higress éƒ¨ç½²å®è·µ","url":"/zh-cn/blog/DeployOnWindows#ä½¿ç”¨-higrees-å¯¹æ¥-nacos","content":"å®‰è£…å‘½ä»¤ï¼šä½¿ç”¨ç‹¬ç«‹éƒ¨ç½²çš„ Nacos å½“è®¿é—®dockerå®¹å™¨äº’ç›¸è®¿é—®æ—¶å€™æœ¬åœ°å›ç¯åœ°å€å¹¶ä¸æ˜¯çœŸæ­£çš„åœ°å€ï¼Œæ‰€ä»¥éœ€è¦åœ¨cygwinä¸­æ‰§è¡Œè·å–æœ¬åœ°ç½‘å¡åœ°å€ ipconfig   curl -fsSL https://higress.io/standalone/get-higress.sh | bash -s -- -c nacos://192.168.0.1:8848 --nacos-username=nacos --nacos-password=nacos  è¯·å°† 192.168.0.1 æ›¿æ¢ä¸º Nacos æœåŠ¡å™¨çš„ IPï¼ˆå¦‚æœ Nacos éƒ¨ç½²åœ¨æœ¬æœºï¼Œè¯·ä¸è¦ä½¿ç”¨å¦‚ localhost æˆ– 127.0.0.1 çš„ Loopback åœ°å€ï¼‰ï¼Œå¹¶æŒ‰éœ€è°ƒæ•´ --nacos-username å’Œ --nacos-password çš„å–å€¼ã€‚å¦‚æœ Nacos æœåŠ¡æœªå¼€å¯è®¤è¯åŠŸèƒ½ï¼Œåˆ™å¯ä»¥ç§»é™¤è¿™ä¸¤ä¸ªå‚æ•°ã€‚ åœ¨è¿™é‡Œæœªå¼€å¯æˆæƒæœåŠ¡ï¼Œç›´æ¥ä½¿ç”¨WLANIPæ›¿æ¢å¯¹åº”çš„IP curl -fsSL https://higress.io/standalone/get-higress.sh | bash -s -- -c nacos://10.30.0.225:8848  è¾“å…¥å‘½ä»¤ç­‰å¾…éƒ¨ç½²ï¼Œå³å¯çœ‹åˆ°ç”Ÿæˆçš„ç”¨æˆ·åä¸å¯†ç   ","version":null,"tagName":"h3"},{"title":"Higress æ§åˆ¶å°é…ç½®â€‹","type":1,"pageTitle":"Windows ä¸‹ Higress éƒ¨ç½²å®è·µ","url":"/zh-cn/blog/DeployOnWindows#higress-æ§åˆ¶å°é…ç½®","content":"è®¿é—® http://localhost:8080/, ç™»å½• Higress æ§åˆ¶å°ã€‚é¦–æ¬¡è®¿é—®æ—¶éœ€è¦å…ˆè®¾ç½®ç”¨æˆ·åå¯†ç   ç‚¹å‡»å·¦ä¾§â€œæœåŠ¡æ¥æºâ€å¯¼èˆªæ ï¼Œç„¶åç‚¹å‡»é¡µé¢å³ä¾§çš„â€œåˆ›å»ºæœåŠ¡æ¥æºâ€æŒ‰é’®ã€‚æŒ‰ç…§ä¸‹å›¾æ‰€ç¤ºå†…å®¹å¡«å†™è¡¨å•å¹¶ç‚¹å‡»â€œç¡®å®šâ€æŒ‰é’®ã€‚  ç‚¹å‡»å·¦ä¾§â€œåŸŸåç®¡ç†â€å¯¼èˆªæ ï¼Œç„¶åç‚¹å‡»é¡µé¢å³ä¾§çš„â€œåˆ›å»ºåŸŸåâ€æŒ‰é’®ã€‚æŒ‰ç…§ä¸‹å›¾æ‰€ç¤ºå†…å®¹å¡«å†™è¡¨å•å¹¶ç‚¹å‡»â€œç¡®å®šâ€æŒ‰é’®ã€‚  ç‚¹å‡»å·¦ä¾§â€œè·¯ç”±ç®¡ç†â€å¯¼èˆªæ ï¼Œç„¶åç‚¹å‡»é¡µé¢å³ä¾§çš„â€œåˆ›å»ºè·¯ç”±â€æŒ‰é’®ã€‚æŒ‰ç…§ä¸‹å›¾ç‰‡æ‰€ç¤ºå†…å®¹å¡«å†™è¡¨å•å¹¶ç‚¹å‡»â€œç¡®å®šâ€æŒ‰é’®ã€‚  ","version":null,"tagName":"h3"},{"title":"è¯·æ±‚éªŒè¯â€‹","type":1,"pageTitle":"Windows ä¸‹ Higress éƒ¨ç½²å®è·µ","url":"/zh-cn/blog/DeployOnWindows#è¯·æ±‚éªŒè¯","content":"# should output a JSON object containing request data curl http://localhost/get?foo=bar -H 'host: foo.bar.com'   æ›´å¤šè¯¦æƒ…ä¸éƒ¨ç½²æ–¹æ¡ˆå¯å‚è€ƒ quick start ","version":null,"tagName":"h3"},{"title":"æ¬¢è¿æŠ¥åHigressé¦–æ¬¡çº¿ä¸‹Meetup","type":0,"sectionRef":"#","url":"/zh-cn/blog/first-meetup","content":"","keywords":"higress meetup","version":null},{"title":"é˜¿é‡Œå·´å·´é‡ç£…å¼€æºäº‘åŸç”Ÿç½‘å…³","type":0,"sectionRef":"#","url":"/zh-cn/blog/higress","content":"","keywords":"higress","version":null},{"title":"Higressçš„å‰ä¸–ä»Šç”Ÿâ€‹","type":1,"pageTitle":"é˜¿é‡Œå·´å·´é‡ç£…å¼€æºäº‘åŸç”Ÿç½‘å…³","url":"/zh-cn/blog/higress#higressçš„å‰ä¸–ä»Šç”Ÿ","content":"","version":null,"tagName":"h2"},{"title":"è¯ç”ŸèƒŒæ™¯â€‹","type":1,"pageTitle":"é˜¿é‡Œå·´å·´é‡ç£…å¼€æºäº‘åŸç”Ÿç½‘å…³","url":"/zh-cn/blog/higress#è¯ç”ŸèƒŒæ™¯","content":"Higress çš„åˆ›å»ºæºäºé˜¿é‡Œå†…éƒ¨çš„â€œæœ¬åœ°ç”Ÿæ´»æˆ˜å½¹â€ï¼Œè¯¥æˆ˜å½¹å§‹äºâ€œæ”¯ä»˜å®2020åˆä½œä¼™ä¼´å¤§ä¼šâ€ï¼Œåœ¨æ­¤å¤§ä¼šä¸Šæ”¯ä»˜å®å®£å¸ƒå‡çº§ä¸ºæ•°å­—ç”Ÿæ´»å¼€æ”¾å¹³å°ã€‚è¯¥æˆ˜å½¹çš„æ ¸å¿ƒæŠ€æœ¯ç›®æ ‡ï¼Œæ˜¯å®ç°é˜¿é‡Œå·´å·´ä¸šåŠ¡åŸŸä¸èš‚èšä¸šåŠ¡åŸŸä¹‹é—´ RPC ç›´æ¥è°ƒç”¨ï¼Œä½†å› é˜¿é‡Œå·´å·´ä¸èš‚èšä¸šåŠ¡åŸŸç½‘ç»œæ˜¯éš”ç¦»çš„ï¼Œå³ç½‘ç»œæ˜¯ä¸é€šçš„ï¼Œå¾ˆè‡ªç„¶æƒ³åˆ°åˆ©ç”¨ç½‘å…³æ¥è§£å†³æ­¤é—®é¢˜ã€‚ ","version":null,"tagName":"h3"},{"title":"æŠ€æœ¯é€‰å‹â€‹","type":1,"pageTitle":"é˜¿é‡Œå·´å·´é‡ç£…å¼€æºäº‘åŸç”Ÿç½‘å…³","url":"/zh-cn/blog/higress#æŠ€æœ¯é€‰å‹","content":"åˆ©ç”¨ç½‘å…³æ¥è§£å†³é˜¿é‡Œå·´å·´ä¸èš‚èšè·¨ä¸šåŠ¡åŸŸ RPC äº’é€šé—®é¢˜ï¼Œé¦–å…ˆè¦å¯¹ç½‘å…³åšæŠ€æœ¯é€‰å‹ã€‚ ç›¸ä¿¡å¤§å®¶ä¹Ÿéƒ½æˆ–å¤šæˆ–å°‘çŸ¥é“ï¼Œé˜¿é‡Œå·´å·´å¼€æºçš„åå‘ä»£ç†ç¨‹åº Tengineã€‚Tengine åœ¨é˜¿é‡Œå†…éƒ¨ç»Ÿä¸€æ¥å…¥ç½‘å…³ AServer ä¸­è¢«ä½¿ç”¨ï¼Œæˆ‘ä»¬å›¢é˜Ÿå°±æ˜¯è´Ÿè´£å…¶å¼€å‘è¿ç»´ï¼ŒåŒæ—¶æˆ‘ä»¬å›¢é˜Ÿä¹Ÿåœ¨è´Ÿè´£é˜¿é‡Œå·´å·´ Service Mesh çš„è½åœ°ï¼Œä¸ç®¡æ˜¯å¯¹ Tengine è¿˜æ˜¯å¯¹ Istio + Envoy è¿™å¥—æ¶æ„éƒ½æ¯”è¾ƒç†Ÿæ‚‰ã€‚ åœ¨é€‰å‹æ—¶ï¼Œè™½ç„¶ä¹Ÿè°ƒç ”è¿‡ä¸€äº›å…¶ä»–çš„è½¯ä»¶ï¼Œä½†è€ƒè™‘åˆ°ç½‘å…³å¯¹æ€§èƒ½ã€å¯é æ€§çš„é«˜è¦æ±‚ï¼Œåœ¨ç»“åˆæˆ‘ä»¬è‡ªèº«çš„ç½‘å…³è¿ç»´ç»éªŒï¼Œå†³å®šçœ‹çœ‹ Tengine ä¸ Envoy æ˜¯å¦å¯ä»¥æ»¡è¶³æˆ‘ä»¬çš„ä¸šåŠ¡éœ€æ±‚ï¼Œåœ¨å¯¹æ¯”æ—¶æˆ‘ä»¬ç½—åˆ—äº†å››ä¸ªå…³é”®è¦ç‚¹ï¼Œå…¶å¯¹æ¯”å¦‚ä¸‹ï¼š è¿™é‡Œæä¸€ä¸‹â€œä¸ºä»€ä¹ˆæˆ‘ä»¬è®¤ä¸ºé…ç½®çš„çƒ­æ›´æ–°ï¼Œæ˜¯éå¸¸é‡è¦çš„â€ï¼Ÿ Tengine/Nginx çš„é…ç½®æ›´æ–°éœ€è¦ reloadï¼Œreload éœ€è¦é‡å¯ worker è¿›ç¨‹ï¼Œé‡å¯æ—¶ä¼šå¼•èµ·æµé‡æŠ–åŠ¨ï¼Œå¯¹é•¿è¿æ¥å½±å“å°¤ä¸ºæ˜æ˜¾ã€‚åœ¨ç½‘å…³çš„é›†ç¾¤è§„æ¨¡éå¸¸å¤§æ—¶ï¼Œæ›´æ˜¯ä¸èƒ½éšæ„çš„åš reloadï¼Œè¿™æ—¶å°±ä¼šå¼•å‘ä¸€ä¸ªçŸ›ç›¾ç‚¹ï¼šä¸šåŠ¡å‘ç½‘å…³æäº¤é…ç½®åï¼Œå¸Œæœ›èƒ½å¿«é€ŸéªŒè¯ï¼Œä½†å—é™äº reload æœºåˆ¶å’Œç¨³å®šæ€§è¦æ±‚ï¼Œæ— æ³•æ»¡è¶³ä¸šåŠ¡å¿«é€ŸéªŒè¯ä¸å¿«é€Ÿè¯•é”™çš„è¯‰æ±‚ã€‚ ç°åœ¨å·²ç»æœ‰å¾ˆå¤šä¸»æµåº”ç”¨é€‰æ‹©é‡‡ç”¨é•¿è¿æ¥ï¼ŒHTTP 1.1ä¸€èˆ¬é»˜è®¤ä¼šä½¿ç”¨Keep-Aliveå»ä¿æŒé•¿è¿æ¥ï¼Œåç»­HTTP 2ä»¥åŠHTTP 3ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œéšç€ç½‘ç»œåè®®çš„å‘å±•ï¼Œæœªæ¥ä½¿ç”¨é•¿è¿æ¥ä¼šå˜å¾—æ›´åŠ æ™®éã€‚è€Œé…ç½®çƒ­æ›´æ–°å¤©ç„¶å¯¹é•¿è¿æ¥éå¸¸å‹å¥½ã€‚ å¦‚ä½•è§£å†³è¿™ç‚¹å‘¢ï¼Ÿ ä¸€æ˜¯é‡‡ç”¨ä¸¤å±‚ç½‘å…³ï¼Œå³æµé‡ç½‘å…³ + ä¸šåŠ¡ç½‘å…³ï¼›äºŒæ˜¯å®ç°ç½‘å…³åŸç”Ÿæ”¯æŒé…ç½®çƒ­æ›´æ–°ã€‚é™¤äº†å¯¹æ¯”ä¸åŒæ–¹æ¡ˆçš„ä¼˜åŠ£åŠ¿ï¼Œæˆ‘ä»¬ä¹Ÿè°ƒç ”äº† Envoy ä½œä¸ºç½‘å…³åœ¨ä¸šç•Œçš„è¶‹åŠ¿ï¼Œç»“è®ºæ˜¯ç›®å‰ Envoy ä½œä¸º K8s ä¸­çš„ Ingress Provider å¢é•¿æœ€å¿«çš„äº‹å®ï¼ˆIngress Provider æŒ‡ K8s Ingress è§„èŒƒå…·ä½“å®ç°ï¼Œå›  K8s Ingress è‡ªèº«åªæ˜¯è§„èŒƒå®šä¹‰ï¼Œæ˜¯ K8s ä¸‹å¤–éƒ¨æµé‡è¿›å…¥é›†ç¾¤å†…éƒ¨çš„ç½‘å…³è§„èŒƒå®šä¹‰ï¼‰ï¼Œæˆ‘ä»¬æœ€ç»ˆé€‰æ‹©äº† Envoy æ¥å®ç°ä¸¤å±‚ç½‘å…³ã€‚  ","version":null,"tagName":"h3"},{"title":"å‘å±•å†ç¨‹â€‹","type":1,"pageTitle":"é˜¿é‡Œå·´å·´é‡ç£…å¼€æºäº‘åŸç”Ÿç½‘å…³","url":"/zh-cn/blog/higress#å‘å±•å†ç¨‹","content":"Higressä»æœ€åˆç¤¾åŒºçš„ Istio + Envoyï¼Œåˆ°ç»å†é˜¿é‡Œå·´å·´å†…éƒ¨çš„è‡ªç ”æ‰©å±•ï¼Œå†åˆ°å¤§è§„æ¨¡ç”ŸæˆéªŒè¯ï¼Œæœ€åå®Œæˆå•†ä¸šåŒ–äº§å“çš„å‘å¸ƒï¼Œå…¶æ•´ä¸ªè¿‡ç¨‹ä»‹ç»å¦‚ä¸‹ï¼š ä¸‹é¢çš„ç« èŠ‚ä¼šå¯¹Higressçš„å„ä¸ªé˜¶æ®µåšè¿›ä¸€æ­¥çš„è¯¦ç»†è¯´æ˜ã€‚ Higress (2020.05~2020.11) æ­¤é˜¶æ®µçš„å¤§ç›®æ ‡æ˜¯ä¸ºäº†æ»¡è¶³é›†å›¢ä¸èš‚èšRPCäº’é€šï¼Œé™ä½å…¨é“¾è·¯çš„RTï¼Œè§£å†³åŸs2sé“¾è·¯å› RTè¿‡é«˜å¸¦æ¥çš„ç”¨æˆ·ä½“éªŒå·®åŠæ— æ³•æ»¡è¶³æ›´å¤šé›†å›¢ä¸èš‚èšååŒåœºæ™¯è¦æ±‚ã€‚s2sé“¾è·¯æ˜¯èµ°å…¬ç½‘é“¾è·¯ï¼Œåè®®é‡‡ç”¨HTTPã€‚ä¸èš‚èšäº’é€šç½‘å…³çš„æ¶æ„å›¾å¦‚ä¸‹ï¼Œè¿™é‡Œä»¥ä¸Šæµ·äº‘å•å…ƒä¸ºèƒŒæ™¯è¯´æ˜ã€‚  ä¸Šå›¾ä¸»è¦å±•ç¤ºçš„æ˜¯é›†å›¢ä¾§çš„æ¶æ„ï¼Œæœ€ç»ˆé‡‡ç”¨äº†Istio+Envoyçš„æ–¹æ¡ˆï¼Œåœ¨éƒ¨ç½²çš„æ—¶å€™åˆåˆ†æˆäº†å‡ºå£é›†ç¾¤å’Œå…¥å£é›†ç¾¤ã€‚ä¹‹æ‰€ä»¥æ‹†æˆä¸¤ä¸ªé›†ç¾¤ï¼Œä¸€æ–¹é¢æ˜¯å½“æ—¶ä¸¤è¾¹äº’è®¿ï¼Œèš‚èšè°ƒé›†å›¢çš„æµé‡è¦è¿œè¿œå¤§äºé›†å›¢è°ƒèš‚èšçš„æµé‡ï¼Œä¸Šä¸‹è¡Œç‰¹åˆ«ä¸å‡ç­‰ï¼›å¦ä¸€æ–¹é¢æ˜¯åˆ†å¼€ä¹‹åä¸¤ä¸ªé›†ç¾¤å¯ä»¥å„è‡ªç»´æŠ¤ï¼Œç¨³å®šæ€§ä¼šæ›´å¥½ã€‚ Higress ä»å¼€å§‹ç«‹é¡¹åˆ°å®Œæˆç¬¬ä¸€æœŸç ”å‘ï¼Œç½‘å…³æ”¹é€ çš„æ ¸å¿ƒå·¥ä½œå·®ä¸å¤šä¸¤ä¸ªäººæŠ•å…¥äº†ä¸€ä¸ªåŠæœˆå·¦å³ï¼Œå…¶ä¸­è¿˜æ¶‰åŠåˆ°å¤§é‡ç½‘ç»œã€å®‰å…¨ç­‰åè°ƒéƒ¨é—¨çš„å·¥ä½œã€‚Higressæ¶æ„å¹¶æ²¡æœ‰å®Œå…¨æŒ‰ç…§ç¤¾åŒºæ–¹æ¡ˆæ¥è®¾è®¡ï¼Œç¤¾åŒºç‰ˆæœ¬ä¸­é…ç½®å˜æ›´å’ŒæœåŠ¡å‘ç°ä½¿ç”¨çš„æ˜¯K8sï¼Œåœ¨é˜¿é‡Œå†…éƒ¨åºå¤§çš„æœåŠ¡è§„æ¨¡åŠé…ç½®é‡ä¸‹ç¤¾åŒºåŸç”Ÿæ–¹æ¡ˆä¸ç®¡åœ¨ç¨³å®šæ€§åŠæ€§èƒ½ä¸Šéƒ½æ— æ³•æ»¡è¶³è¦æ±‚ï¼Œå› æ­¤é˜¿é‡Œè¿™å¥—æ–¹æ¡ˆé‡ç‚¹å¯¹æœåŠ¡å‘ç°ã€é…ç½®å­˜å‚¨ç»„ä»¶åšäº†æ›¿æ¢ï¼ŒåŠä¼˜åŒ–xDSæ¨é€æ€§èƒ½ã€‚ Higress ä¸Šçº¿åï¼Œé¡ºåˆ©è¾¾æˆäº†æœ€åˆçš„ä¸šåŠ¡è¯‰æ±‚ï¼Œç›®å‰èš‚èšäº’é€šç½‘å…³é“¾è·¯å·²ç»æˆä¸ºé›†å›¢ä¸èš‚èšäº’é€šçš„é¦–é€‰æ–¹æ¡ˆï¼Œä¸€äº›æ”¯ä»˜é“¾è·¯ä¹Ÿè¿ç§»åˆ°äº†è¯¥æ–¹æ¡ˆï¼Œä¾‹å¦‚å……å€¼ä¸­å¿ƒç­‰ï¼Œå…·ä½“è¾¾åˆ°çš„æˆæœç®€è¿°å¦‚ä¸‹ï¼š èš‚èšè°ƒç”¨é›†å›¢é“¾è·¯ç›¸æ¯”åŸé“¾è·¯RTé™ä½50%ï¼Œç½‘å…³è‡ªèº«RT 0.3msã€‚HigressæˆåŠŸå¤åˆ¶åˆ°é›†å›¢ä¸èš‚èšçš„æ¶ˆæ¯äº’é€šï¼Œç›®å‰é›†å›¢ä¸èš‚èšçš„æ¶ˆæ¯äº’é€šä¹Ÿæ˜¯èµ°çš„Higress Tripleé“¾è·¯ã€‚å¾®æœåŠ¡ç½‘å…³ä»5æœˆä»½ä¸Šçº¿ï¼Œç›®å‰å·²ç»æˆä¸ºé›†å›¢ä¸èš‚èšä¸œè¥¿å‘æµé‡çš„æ ¸å¿ƒé“¾è·¯ï¼Œé£çŒªã€æ‰‹æ·˜ã€å£ç¢‘ã€é¥¿äº†ä¹ˆã€1688ã€éƒ¨åˆ†å¯¼è´­åº”ç”¨ã€å•†å“åº“ã€è¯„ä»·ç­‰ä¸šåŠ¡å·²æˆåŠŸä¸Šçº¿ï¼Œè€Œä¸”åœ†æ»¡æ”¯æ’‘äº†618å¤§ä¿ƒã€æ”¯ä»˜å®717å¤è‡³å¤§ä¿ƒã€‚åœ¨2020åŒ11å¤§ä¿ƒæ¯ç§’ æ•°åä¸‡ çš„è¯·æ±‚æµé‡ï¼Œåœ†æ»¡æ”¯æ’‘äº†åŒ11åŸå¸‚ç”Ÿæ´»ç‹‚æ¬¢èŠ‚çš„äº’åŠ¨ä¼šåœºã€‚åœ¨æŠ€æœ¯ä¾§å®Œæˆäº†Higressåœ¨ä¸œè¥¿å‘æµé‡åˆ†å‘çš„æ¢ç´¢ã€‚ Higress (2020.12~2021.10) éšç€é˜¿é‡Œå·´å·´ä¸Šäº‘æˆ˜å½¹çš„æ¨è¿›ï¼Œè¶Šæ¥è¶Šå¤šçš„åœºæ™¯æ‰¾åˆ°æˆ‘ä»¬ã€‚æ¯”å¦‚äº‘ä¸Šäº‘ä¸‹ä¸šåŠ¡äº’é€šï¼Œç”±äº Tengine æœåŠ¡ç®¡ç†å¼±å¯¼è‡´é˜¿é‡Œå†…éƒ¨å¤§é‡äºŒå±‚å¾®æœåŠ¡ç½‘å…³éœ€è¦æ”¶æ•›ï¼Œè¿™å°±éœ€è¦ä»ä¸šåŠ¡ä¸Šåš Tengine+Envoy ä¸¤å±‚ç½‘å…³çš„æ¼”è¿›ï¼Œæ‰¿æ‹…å—åŒ—å‘ç½‘å…³æµé‡ã€‚åœ¨ 2020 å¹´ 12 æœˆä»½ï¼Œå›¢é˜Ÿå¼€å§‹äº†Higress æ¶æ„çš„ç»§ç»­æ¼”è¿›ï¼Œä»¥ä¼˜é…·åœºæ™¯ä¸ºä¾‹çš„æ¼”è¿›è¿‡ç¨‹å¦‚ä¸‹å›¾ï¼š  Higress å—åŒ—å‘çš„æ¶æ„å›¾å¦‚ä¸‹ï¼š  åœ¨ä¸¤å±‚æ¶æ„ä¸­ï¼ŒHigress ç½‘å…³æ›´å¤šæ‰¿æ‹…äº†å¾®æœåŠ¡ç½‘å…³å’Œå¾®æœåŠ¡æ²»ç†çš„éœ€æ±‚ï¼Œå’Œ Tengine æµé‡ç½‘å…³å®Œæˆäº†æ•´åˆã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹é‡Œï¼Œå›¢é˜Ÿæ”¯æ’‘ä¼˜é…·å†…éƒ¨å¤šä¸ªäºŒå±‚å¾®æœåŠ¡ç½‘å…³ç»Ÿä¸€çš„å·¥ä½œï¼Œå¤§å¹…æå‡äº†æ€§èƒ½å’Œè¿ç»´æ•ˆç‡ã€‚ åœ¨è¿™ä¸€é˜¶æ®µï¼ŒHigress Gateway å®ç°äº†ä¸œè¥¿å‘ã€å—åŒ—å‘å…¨åŸŸæµé‡çš„è°ƒåº¦åˆ†å‘ï¼Œä¸œè¥¿å‘ä¸Šä¸ä»…æ”¯æŒè·¨ä¸šåŠ¡åŸŸçš„èš‚èš RPC äº’é€šï¼Œä¹Ÿæ‰©å±•åˆ°äº†æ··åˆäº‘çš„äº‘ä¸Šäº‘ä¸‹ RPC äº’é€šåœºæ™¯ï¼Œè¦†ç›–é’‰é’‰æ–‡æ¡£ã€é˜¿é‡Œè§†é¢‘äº‘ã€è¾¾æ‘©é™¢çš„åº—å°èœœã€æ™ºæ…§æ•°å­—äººç­‰ã€‚è¯¥é˜¶æ®µçš„ä¸šåŠ¡å¤§å›¾å¦‚ä¸‹ï¼ˆäº‘ä¸Šäº‘ä¸‹äº’é€šåœºæ™¯ï¼Œä»¥é’‰é’‰ä¸ºä¾‹è¯´æ˜ï¼‰ï¼š  éšç€ Higress Gateway è¦†ç›–çš„ä¸šåŠ¡åœºæ™¯è¶Šæ¥å¤šï¼Œåœ¨è·Ÿä¼˜é…·æŒç»­åˆä½œçš„è¿‡ç¨‹ä¸­ï¼ŒåŒæ–¹å›¢é˜Ÿä¸çº¦è€ŒåŒæå‡ºäº†ä¸€ä¸ªè®¾æƒ³ï¼šTengine Gatewayï¼ˆæ‰¿æ‹…æµé‡ç½‘å…³è§’è‰²ï¼‰ + Higress Gatewayï¼ˆæ‰¿æ‹…å¾®æœåŠ¡ç½‘å…³è§’è‰²ï¼‰çš„ä¸¤å±‚ç½‘å…³æ˜¯å¦å¯ä»¥åˆå¹¶ä¸ºä¸€å±‚ Higress Gatewayï¼Ÿ æˆ‘ä»¬å¯¹è¿™ä¸€æƒ³æ³•åšäº†è°ƒç ”ï¼Œç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œå¹¶ä¸”å½“æ—¶å¤§å®¶ä¹Ÿåˆä½œè®¾è®¡äº†æ–°çš„æ¶æ„æ–¹æ¡ˆï¼Œå¦‚ä¸‹å›¾ï¼š  è™½ç„¶ç”±äºå„ç§å„æ ·çš„åŸå› ï¼Œè¿™ä¸ªæ–¹æ¡ˆæœ€ç»ˆæ²¡æœ‰è·Ÿä¼˜é…·ç»§ç»­å¾€ä¸‹æ¨è¿›ã€‚ä½†è¿™ä¸ªæ¼”è¿›æ–¹å‘è®©å›¢é˜Ÿæ˜ç¡®äº†ç½‘å…³æ–°çš„å‘å±•è¶‹åŠ¿ï¼šåœ¨ä»¥ K8s ä¸»å¯¼çš„å®¹å™¨åŒ–èƒŒæ™¯ä¸‹ï¼Œç”±äºK8s é›†ç¾¤å†…å¤–ç½‘ç»œçš„å¤©ç„¶éš”ç¦»æ€§ï¼Œç”¨æˆ·éœ€è¦ä¸€æ¬¾å…¼é¡¾é«˜æ€§èƒ½ä¸å®‰å…¨æ€§ï¼Œä»¥åŠå¼ºå¤§æœåŠ¡æ²»ç†èƒ½åŠ›çš„å…¥å£ç½‘å…³ã€‚è¿™ä¹Ÿä¸ºåç»­å›¢é˜Ÿå°†æŠ€æœ¯æ²‰æ·€å˜æˆäº‘äº§å“ã€æ¨è¿›Higressçš„è¯ç”Ÿæ‰“ä¸‹äº†åŸºç¡€ã€‚ 2021 å¹´ï¼Œé˜¿é‡Œå·´å·´å¼€å¯äº†ä¸­é—´ä»¶ä¸‰ä½ä¸€ä½“æˆ˜å½¹ï¼Œç›®æ ‡æ˜¯ç”¨äº‘äº§å“æ”¯æ’‘é›†å›¢ä¸šåŠ¡ã€‚æˆ‘ä»¬å¼€å§‹å°†å­µåŒ–æˆç†Ÿçš„HigressæŠ€æœ¯æ²‰æ·€ä¸ºäº‘äº§å“ï¼Œå³ç›®å‰é˜¿é‡Œäº‘ä¸Šæä¾›çš„ MSE äº‘åŸç”Ÿç½‘å…³ï¼Œä¸€æ–¹é¢é¢å‘å¹¿å¤§çš„å…¬æœ‰äº‘ç”¨æˆ·æä¾›æ‰˜ç®¡çš„ç½‘å…³æœåŠ¡ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿå¯¹å†…æœåŠ¡é›†å›¢ã€‚MSE äº‘åŸç”Ÿç½‘å…³çš„æŠ€æœ¯æ¶æ„ç®€å›¾å¦‚ä¸‹ï¼š  Higress (2021.11~2022.11) éšç€Higressæˆä¸ºäº‘äº§å“æœåŠ¡äºæ›´å¤šå¤–éƒ¨ç”¨æˆ·ï¼Œæˆ‘ä»¬é€æ­¥å‘ç°ç”¨æˆ·å¯¹Higressæå‡ºäº†æ›´é«˜çš„è¦æ±‚ï¼Œå…¶ä¸­åé¦ˆè¾ƒå¤šçš„å¤§çš„éœ€æ±‚ç‚¹æ˜¯æ’ä»¶æ‰©å±•ã€Wafé˜²æŠ¤ã€å¤šæ³¨å†Œä¸­å¿ƒã€Nginx Ingressæ³¨è§£å…¼å®¹ä»¥åŠHTTPè½¬Dubboåè®®ï¼Œå½“ç„¶ä¹Ÿæœ‰å¾ˆå¤šå°çš„éœ€æ±‚ç‚¹åœ¨æ­¤å°±ä¸ä¸€ä¸€åˆ—å‡ºï¼Œå› æ­¤è¯¥é˜¶æ®µæˆ‘ä»¬é‡ç‚¹å‘åŠ›åœ¨ä¸Šè¿°ç”¨æˆ·åé¦ˆçš„é«˜é¢‘éœ€æ±‚ã€‚ Higress æä¾›çš„æ’ä»¶å¸‚åœºï¼Œå…¶ä¸€é˜¶æ®µæ”¯æŒWasmæ’ä»¶ï¼Œæ»¡è¶³è¿½æ±‚é«˜æ€§èƒ½ã€é«˜å®‰å…¨çš„ç”¨æˆ·å¯¹ç½‘å…³çš„æ‰©å±•è¯‰æ±‚ï¼ŒäºŒé˜¶æ®µä¼šæ”¯æŒLuaæ’ä»¶ï¼Œæ»¡è¶³ä¼ ç»Ÿç”¨æˆ·ä½¿ç”¨Luaçš„æ‰©å±•çš„è¯‰æ±‚ï¼Œå¦‚Nginxç”¨æˆ·ï¼Œä¸‰é˜¶æ®µä¼šæ”¯æŒè¿›ç¨‹å¤–æ’ä»¶ï¼Œæ»¡è¶³å¤šè¯­è¨€ç”¨æˆ·è¯‰æ±‚ï¼Œå°¤å…¶æ˜¯Javaç”¨æˆ·å› ç°é˜¶æ®µJavaç¤¾åŒºå¯¹WebAssemblyæ”¯æŒå°šä¸å®Œå–„ä½†åˆå¸Œæœ›å¯¹ç½‘å…³è¿›è¡Œæ‰©å±•çš„è¯‰æ±‚ã€‚  Higress ä¹Ÿæ”¯æŒäº†Nginx Ingressæ³¨è§£å¹³æ»‘è¿ç§»çš„èƒ½åŠ›ï¼Œæ»¡è¶³éƒ¨åˆ†ç”¨æˆ·æœŸæœ›è¿ç§»åˆ°Higressä½†åˆä¸å¸Œæœ›é‡æ–°é…ç½®ç½‘å…³çš„è¯‰æ±‚ï¼ŒåŒæ—¶Higressæ‰“ç ´äº†Nginx Ingressåªèƒ½å…³è”å•ä¸ªK8sé›†ç¾¤çš„é™åˆ¶ï¼Œæ”¯æŒå…³è”å¤šä¸ªK8sé›†ç¾¤ï¼Œå³å¯ä»¥å°†Higressä½œä¸ºç»Ÿä¸€æ¥å…¥ç½‘å…³ä½¿ç”¨ï¼ŒåŒæ—¶åˆå¯ä»¥äº«å—Ingressçš„çº¢åˆ©ã€‚  å¯¹äºä¼ ç»Ÿä½¿ç”¨Dubboçš„å¾®æœåŠ¡ç”¨æˆ·å¸Œæœ›ä½¿ç”¨åŸç”ŸRPCæ–¹å¼æš´éœ²å¯¹å¤–æœåŠ¡ï¼Œä½†é€šå¸¸æä¾›å¤–éƒ¨è®¿é—®çš„æœåŠ¡ä»¥ä½¿ç”¨HTTPä¸ºä¸»ï¼Œä¸ºäº†å¸®åŠ©Dubboç”¨æˆ·é™ä½æœåŠ¡æš´éœ²çš„å¼€å‘æˆæœ¬ï¼ŒHigressæä¾›äº†HTTPè½¬Dubboåè®®åŠŸèƒ½ï¼Œä¸”é€šè¿‡Consoleä¸ºç”¨æˆ·æä¾›ç™½å±åŒ–çš„é…ç½®æ–¹å¼ï¼ŒæŸå®¢æˆ·ä½¿ç”¨ååé¦ˆâ€œè¿™æ˜¯ä¸šç•Œå®Œæˆåº¦æœ€é«˜çš„HTTPè½¬Dubboåè®®â€åŠŸèƒ½ã€‚  åœ¨äº‘åŸç”Ÿçš„æµªæ½®ä¸‹ï¼Œå¼€æºå·²ç»æˆä¸ºè½¯ä»¶å‘å±•çš„å¿…ç„¶è¶‹åŠ¿ä¸å¿«é€Ÿè·¯å¾„ï¼Œå› ä¸ºç¤¾åŒºçš„åŠ›é‡æ˜¯éå¸¸å¼ºå¤§çš„ã€‚å› æ­¤æˆ‘ä»¬å°† è¿™å¥—ç»è¿‡å†…éƒ¨å®è·µæ²‰æ·€ä¸‹æ¥çš„ç½‘å…³æ–¹æ¡ˆHigressæ­£å¼å¯¹å¤–å¼€æºï¼Œä»¥Kubernetes Ingressç½‘å…³ä¸ºå¥‘æœºå¸¦æ¥äº†æµé‡ç½‘å…³ä¸å¾®æœåŠ¡ç½‘å…³èåˆçš„å¯èƒ½æ€§ï¼Œç»“åˆé˜¿é‡Œå†…éƒ¨å®è·µæ²‰æ·€Higresså®ç°äº†æµé‡ç½‘å…³ + å¾®æœåŠ¡ç½‘å…³ + å®‰å…¨ç½‘å…³ä¸‰åˆä¸€çš„é«˜é›†æˆèƒ½åŠ›ï¼ŒåŒæ—¶æ·±åº¦é›†æˆäº†Dubboã€Nacosã€Sentinelç­‰ï¼Œèƒ½å¤Ÿå¸®åŠ©ç”¨æˆ·æå¤§çš„é™ä½ç½‘å…³çš„éƒ¨ç½²åŠè¿ç»´æˆæœ¬ï¼Œè€Œä¸”èƒ½åŠ›ä¸æ‰“æŠ˜ã€‚  Higress æœªæ¥å±•æœ› è™½ç„¶ç›®å‰äº‘åŸç”Ÿå·²ç»æˆä¸ºå¿…ç„¶è¶‹åŠ¿ï¼Œä½†ç°å®æ˜¯æœ‰å¾ˆå¤§ä¸€éƒ¨åˆ†ç”¨æˆ·å¤„äºè¿ç§»ä¸Šäº‘çš„è¿‡ç¨‹ä¸­ï¼Œåœ¨ä»ä¼ ç»Ÿæ¶æ„å‘ä»¥Kubernetes ä¸ºä»£è¡¨çš„å®¹å™¨åŒ–äº‘åŸç”Ÿæ¶æ„è¿ç§»ï¼Œå¯é¢„è§è¿™åœ¨æœªæ¥å¾ˆé•¿ä¸€æ®µæ—¶é—´ä¼šä¸€ç›´æŒç»­ï¼Œå› æ­¤ Higress åç»­ä¼šé‡ç‚¹æ”¯æŒé Kubernetes éƒ¨ç½²æ¶æ„ï¼Œä»¥ Higress + Nacos çš„ç»„åˆå½¢å¼ä¸ºç”¨æˆ·æä¾›æœ€å°é›†è¿è¡Œç¯å¢ƒï¼ŒåŒæ—¶æ»¡è¶³ç”¨æˆ·æœåŠ¡æ³¨å†Œã€é…ç½®ç®¡ç†ã€å¾®æœåŠ¡æ²»ç†çš„è¯‰æ±‚ã€‚ åœ¨ä»¥ Kubernetes ä¸ºä»£è¡¨çš„å®¹å™¨åŒ–äº‘åŸç”Ÿæ–¹å‘ï¼Œæˆ‘ä»¬åœ¨å…¼å®¹å¥½ç°æœ‰ Ingress æ ‡å‡†çš„åŸºç¡€ä¸Šï¼Œä¼šé‡ç‚¹å‘åŠ›ä¸‹ä¸€ä»£çš„Ingress æ ‡å‡† Gateway APIï¼Œåˆ©ç”¨ Gateway API å¸¦æ¥çš„å¥‘æœºæ‰“é€šå—åŒ—å‘ä¸ä¸œè¥¿å‘çš„å…¨åŸŸæµé‡è°ƒåº¦ï¼Œå¸®åŠ©ç”¨æˆ·ä½¿ç”¨ä¸€å¥—æ¶æ„æ¶æ„åŒæ—¶ç®¡ç†å¤–éƒ¨ä¸å†…éƒ¨æµé‡ï¼Œé™ä½éƒ¨ç½²è¿ç»´æˆæœ¬ã€æå‡å¼€å‘åŠè¿ç»´æ•ˆç‡ã€‚ ","version":null,"tagName":"h3"},{"title":"Higress å…¨å±€é…ç½®æ§åˆ¶é¢åŸç†åˆ†æ","type":0,"sectionRef":"#","url":"/zh-cn/blog/configmap","content":"","keywords":"higress","version":null},{"title":"æ•´ä½“æ¶æ„æµç¨‹â€‹","type":1,"pageTitle":"Higress å…¨å±€é…ç½®æ§åˆ¶é¢åŸç†åˆ†æ","url":"/zh-cn/blog/configmap#æ•´ä½“æ¶æ„æµç¨‹","content":"","version":null,"tagName":"h2"},{"title":"1. æ•´ä½“æ¶æ„â€‹","type":1,"pageTitle":"Higress å…¨å±€é…ç½®æ§åˆ¶é¢åŸç†åˆ†æ","url":"/zh-cn/blog/configmap#1-æ•´ä½“æ¶æ„","content":" ","version":null,"tagName":"h3"},{"title":"2. æ ¸å¿ƒç»„ä»¶â€‹","type":1,"pageTitle":"Higress å…¨å±€é…ç½®æ§åˆ¶é¢åŸç†åˆ†æ","url":"/zh-cn/blog/configmap#2-æ ¸å¿ƒç»„ä»¶","content":"IngressConfig IngressConfig æ˜¯ Higress ä¸€ä¸ªæ ¸å¿ƒç»“æ„ä½“, è´Ÿè´£ç›‘æ§ Ingressï¼Œ McpBridge, Http2Rpc, WasmPlugin ç­‰ k8s èµ„æºï¼Œ åŒæ—¶é›†æˆ ConfigStore Interfaceï¼Œé€šè¿‡ List æ¥å£ä¸‹å‘ VirtualService, DestinationRule, EnvoyFilter, ServiceEntry, WasmPlugin ç­‰ CR èµ„æºã€‚ ConfigmapMgr ConfigmapMgr ç»“æ„ä½“è´Ÿè´£æ•´ä¸ªæ ¸å¿ƒæµç¨‹ï¼ŒåŒ…æ‹¬é€šè¿‡ Informer List/Watch æœºåˆ¶ç›‘æ§ higress-config çš„å˜æ›´ï¼ŒåŒæ—¶éå† ItemControllers ä¸‹å‘å˜æ›´é€šçŸ¥ï¼Œæä¾›æ„å»º EnvoyFilter åˆ—è¡¨ç­‰åŠŸèƒ½ã€‚ TracingController TracingController ç»“æ„ä½“è´Ÿè´£å…·ä½“çš„ Tracing æ•°æ®æ ¡éªŒï¼Œæ„å»º Tracing EnvoyFilter, ä»¥åŠé€šè¿‡ ItemEventHandler ä¸‹å‘å˜æ›´é€šçŸ¥ç­‰ã€‚ HigressConfig HigressConfig æ˜¯ higress-config Configmap æ‰€å¯¹åº”æ•°æ®çš„ç»“æ„ä½“ã€‚ ","version":null,"tagName":"h3"},{"title":"3. æ ¸å¿ƒæµç¨‹â€‹","type":1,"pageTitle":"Higress å…¨å±€é…ç½®æ§åˆ¶é¢åŸç†åˆ†æ","url":"/zh-cn/blog/configmap#3-æ ¸å¿ƒæµç¨‹","content":"ç”¨ Informer List/Watch æœºåˆ¶ç›‘æ§ higress-config å˜æ›´ï¼Œæ ¡éªŒå˜æ›´ï¼ŒåŒæ—¶ä¿å­˜å˜æ›´åæ•°æ®ã€‚ç”¨å˜æ›´æ•°æ®æ„å»º EnvoyFilterã€‚é€šçŸ¥ XDSUpdaterï¼ŒEnvoyFilter æœ‰å˜æ›´ï¼Œé‡æ–°æ‹‰å–æ–°çš„ EnvoyFilter åˆ—è¡¨ã€‚ ","version":null,"tagName":"h3"},{"title":"åˆå§‹åŒ–è¿‡ç¨‹â€‹","type":1,"pageTitle":"Higress å…¨å±€é…ç½®æ§åˆ¶é¢åŸç†åˆ†æ","url":"/zh-cn/blog/configmap#åˆå§‹åŒ–è¿‡ç¨‹","content":"","version":null,"tagName":"h2"},{"title":"1. åˆå§‹åŒ–å…¥å£â€‹","type":1,"pageTitle":"Higress å…¨å±€é…ç½®æ§åˆ¶é¢åŸç†åˆ†æ","url":"/zh-cn/blog/configmap#1-åˆå§‹åŒ–å…¥å£","content":"åˆå§‹åŒ–è¿‡ç¨‹å…¥å£åœ¨ NewIngressConfigï¼Œ åˆå§‹åŒ– IngressConfig æ—¶åŒæ—¶æ„å»º HigressConfigController å’Œ ConfigmapMgrã€‚ // pkg/ingress/config/ingress_config.go func NewIngressConfig(localKubeClient kube.Client, XDSUpdater model.XDSUpdater, namespace, clusterId string) *IngressConfig { // ... // æ„å»º controller å’Œ configmapMgr higressConfigController := configmap.NewController(localKubeClient, clusterId, namespace) config.configmapMgr = configmap.NewConfigmapMgr(XDSUpdater, namespace, higressConfigController, higressConfigController.Lister()) return config }  ","version":null,"tagName":"h3"},{"title":"2. HigressConfigController åˆå§‹åŒ–â€‹","type":1,"pageTitle":"Higress å…¨å±€é…ç½®æ§åˆ¶é¢åŸç†åˆ†æ","url":"/zh-cn/blog/configmap#2-higressconfigcontroller-åˆå§‹åŒ–","content":"é€šè¿‡ Higress æä¾› NewCommonController åˆå§‹åŒ– HigressConfigController ç”¨äºç›‘å¬ higress-system å‘½åç©ºé—´ä¸‹ Configmap çš„å˜åŒ–ã€‚ // pkg/ingress/kube/configmap/controller.go type HigressConfigController controller.Controller[listersv1.ConfigMapNamespaceLister] func NewController(client kubeclient.Client, clusterId string, namespace string) HigressConfigController { informer := client.KubeInformer().Core().V1().ConfigMaps().Informer() return controller.NewCommonController(&quot;higressConfig&quot;, client.KubeInformer().Core().V1().ConfigMaps().Lister().ConfigMaps(namespace), informer, GetConfigmap, clusterId) } func GetConfigmap(lister listersv1.ConfigMapNamespaceLister, namespacedName types.NamespacedName) (controllers.Object, error) { return lister.Get(namespacedName.Name) }  ","version":null,"tagName":"h3"},{"title":"3. ConfigmapMgr åˆå§‹åŒ–â€‹","type":1,"pageTitle":"Higress å…¨å±€é…ç½®æ§åˆ¶é¢åŸç†åˆ†æ","url":"/zh-cn/blog/configmap#3-configmapmgr-åˆå§‹åŒ–","content":"ConfigmapMgr åˆå§‹åŒ–å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š æ„å»º ConfigmapMgrè®¾ç½® HigressConfigController configmap æ–°å¢æˆ–è€…æ›´æ–°å›è°ƒå‡½æ•°ä¸º configmapMgr.AddOrUpdateHigressConfigè®¾ç½® HigressConfig ç»“æ„ä½“é»˜è®¤å€¼åˆå§‹åŒ– TracingControlleræŠŠ tracingController æ·»åŠ åˆ° configmapMgr itemControllers æ•°ç»„é‡Œåˆå§‹åŒ– ItemEventHandlerï¼Œ åŒæ—¶éå† itemControllersï¼Œè®¾ç½® ItemEventHandler // pkg/ingress/kube/configmap/controller.go func NewConfigmapMgr(XDSUpdater model.XDSUpdater, namespace string, higressConfigController HigressConfigController, higressConfigLister listersv1.ConfigMapNamespaceLister) *ConfigmapMgr { // æ„å»º ConfigmapMgr configmapMgr := &amp;ConfigmapMgr{ XDSUpdater: XDSUpdater, Namespace: namespace, HigressConfigController: higressConfigController, HigressConfigLister: higressConfigLister, higressConfig: atomic.Value{}, } // è®¾ç½® HigressConfigController configmap æ–°å¢æˆ–è€…æ›´æ–°å›è°ƒå‡½æ•° configmapMgr.AddOrUpdateHigressConfig configmapMgr.HigressConfigController.AddEventHandler(configmapMgr.AddOrUpdateHigressConfig) // è®¾ç½® HigressConfig ç»“æ„ä½“é»˜è®¤å€¼ configmapMgr.SetHigressConfig(NewDefaultHigressConfig()) // åˆå§‹åŒ– TracingController tracingController := NewTracingController(namespace) // æŠŠ tracingController æ·»åŠ åˆ° configmapMgr itemControllers é‡Œ configmapMgr.AddItemControllers(tracingController) // åˆå§‹åŒ– itemEventHandlerï¼Œ åŒæ—¶éå† itemControllersï¼Œè®¾ç½® itemEventHandler configmapMgr.initEventHandlers() // è¿”å› configmapMgr return configmapMgr }  ","version":null,"tagName":"h3"},{"title":"å¯åŠ¨â€‹","type":1,"pageTitle":"Higress å…¨å±€é…ç½®æ§åˆ¶é¢åŸç†åˆ†æ","url":"/zh-cn/blog/configmap#å¯åŠ¨","content":"åœ¨ IngressConfig æ·»åŠ  HigressConfigController Run() å’Œ HasSynced() æ§åˆ¶æµç¨‹ã€‚ // pkg/ingress/config/ingress_config.go func (m *IngressConfig) Run(stop &lt;-chan struct{}) { // ... // å¯åŠ¨ HigressConfigController go m.configmapMgr.HigressConfigController.Run(stop) } func (m *IngressConfig) HasSynced() bool { // .... if !m.configmapMgr.HigressConfigController.HasSynced() { return false } }  ","version":null,"tagName":"h2"},{"title":"higress-config å˜æ›´å’Œå¤„ç†æµç¨‹â€‹","type":1,"pageTitle":"Higress å…¨å±€é…ç½®æ§åˆ¶é¢åŸç†åˆ†æ","url":"/zh-cn/blog/configmap#higress-config-å˜æ›´å’Œå¤„ç†æµç¨‹","content":"","version":null,"tagName":"h2"},{"title":"1. configmapMgr å˜æ›´å¤„ç†â€‹","type":1,"pageTitle":"Higress å…¨å±€é…ç½®æ§åˆ¶é¢åŸç†åˆ†æ","url":"/zh-cn/blog/configmap#1-configmapmgr-å˜æ›´å¤„ç†","content":"ConfigmapMgr é€šè¿‡æ”¶åˆ° HigressConfigController é€šçŸ¥æ¥å¤„ç†å˜æ›´è¯·æ±‚ã€‚ å…·ä½“å˜æ›´æµç¨‹å¦‚ä¸‹ï¼š åˆ¤æ–­æ˜¯å¦ higress-system å‘½åç©ºé—´ä¸‹ name ä¸º higress-config Configmap å‘ç”Ÿäº†å˜åŒ–ï¼Œå¦‚æœä¸æ˜¯å°±è¿”å›ã€‚è·å– higress-config å†…å®¹ã€‚éå† ItemControllers, æ ¡éªŒ higress-config é…ç½®æ˜¯å¦åˆæ³•ï¼Œå¦‚æœæœ‰ä¸€ä¸ªè¿”å›ä¸åˆæ³•ï¼Œå°±è¿”å›ã€‚å’Œä¸Šæ¬¡ä¿å­˜åœ¨æœ¬åœ° higressConfig æ¯”å¯¹, æ£€æŸ¥è¿™æ¬¡æ•°æ®æ˜¯å¦æœ‰å˜åŒ–ï¼Œå¦‚æœæ²¡æœ‰å˜åŒ–å°±è¿”å›ã€‚å¦‚æœæ•°æ®æœ‰å˜åŒ–ï¼Œå°±éå† ItemControllers é€šçŸ¥æ¯ä¸ª itemController æ•°æ®æœ‰å˜åŒ–ï¼ŒåŒæ—¶ä¿å­˜è¿™æ¬¡å˜åŒ–åˆ°æœ¬åœ° higressConfigã€‚ // pkg/ingress/kube/configmap/controller.go func (c *ConfigmapMgr) AddOrUpdateHigressConfig(name util.ClusterNamespacedName) { // åªç›‘å¬ higress-system å‘½åç©ºé—´ä¸‹ name ä¸º higress-config Configmap çš„å˜åŒ– if name.Namespace != c.Namespace || name.Name != HigressConfigMapName { return } // ... // è·å– higress-config å†…å®¹ higressConfigmap, err := c.HigressConfigLister.Get(HigressConfigMapName) // é€šè¿‡ yaml.Unmarshal è½¬æˆ HigressConfig newHigressConfig := NewDefaultHigressConfig() if err = yaml.Unmarshal([]byte(higressConfigmap.Data[HigressConfigMapKey]), newHigressConfig); err != nil { IngressLog.Errorf(&quot;data:%s, convert to higress config error, error: %+v&quot;, higressConfigmap.Data[HigressConfigMapKey], err) return } // ... // éå† ItemControllers, æ ¡éªŒé…ç½®æ˜¯å¦åˆæ³• for _, itemController := range c.ItemControllers { if itemErr := itemController.ValidHigressConfig(newHigressConfig); itemErr != nil { IngressLog.Errorf(&quot;configmap %s controller valid higress config error, error: %+v&quot;, itemController.GetName(), itemErr) return } } // å’Œä¸Šæ¬¡æ¯”å¯¹è¿™æ¬¡æ•°æ®æ˜¯å¦æœ‰å˜æ›´ oldHigressConfig := c.GetHigressConfig() result, _ := c.CompareHigressConfig(oldHigressConfig, newHigressConfig) // ... // å¦‚æœæ•°æ®æœ‰å˜æ›´ï¼Œå°±éå† ItemControllers é€šçŸ¥æ¯ä¸ª itemController æ•°æ®æœ‰å˜æ›´ï¼ŒåŒæ—¶ä¿å­˜è¿™æ¬¡å˜æ›´åˆ°æœ¬åœ°ã€‚ if result == ResultReplace || result == ResultDelete { for _, itemController := range c.ItemControllers { IngressLog.Infof(&quot;configmap %s controller AddOrUpdateHigressConfig&quot;, itemController.GetName()) if itemErr := itemController.AddOrUpdateHigressConfig(name, oldHigressConfig, newHigressConfig); itemErr != nil { IngressLog.Errorf(&quot;configmap %s controller AddOrUpdateHigressConfig error, error: %+v&quot;, itemController.GetName(), itemErr) } } // ä¿å­˜è¿™æ¬¡å˜æ›´ c.SetHigressConfig(newHigressConfig) } }  ","version":null,"tagName":"h3"},{"title":"2. TracingController å˜æ›´å¤„ç†â€‹","type":1,"pageTitle":"Higress å…¨å±€é…ç½®æ§åˆ¶é¢åŸç†åˆ†æ","url":"/zh-cn/blog/configmap#2-tracingcontroller-å˜æ›´å¤„ç†","content":"TracingController å˜æ›´å¤„ç†å°±æ¯”è¾ƒç®€å•ï¼š æ£€æŸ¥ Tracing è¿™éƒ¨åˆ†æ•°æ®æ˜¯å¦æœ‰å˜æ›´ã€‚å¦‚æœæœ‰å˜æ›´ï¼ŒDeepCopy ä¸€ä»½ Tracing æ•°æ®ä¿å­˜åˆ°æœ¬åœ°ï¼ŒåŒæ—¶é€šè¿‡ eventHandler ä¸‹å‘å˜æ›´é€šçŸ¥ã€‚ // pkg/ingress/kube/configmap/tracing.go func (t *TracingController) AddOrUpdateHigressConfig(name util.ClusterNamespacedName, old *HigressConfig, new *HigressConfig) error { // ... // æ£€æŸ¥ Tracing éƒ¨åˆ†æ•°æ®æ˜¯å¦æœ‰å˜æ›´ result, _ := compareTracing(old.Tracing, new.Tracing) // å¦‚æœæœ‰å˜æ›´ï¼ŒDeepCopy ä¸€ä»½ Tracing æ•°æ®ä¿å­˜åˆ°æœ¬åœ°ï¼ŒåŒæ—¶é€šè¿‡ eventHandler ä¸‹å‘å˜æ›´é€šçŸ¥ switch result { case ResultReplace: if newTracing, err := deepCopyTracing(new.Tracing); err != nil { IngressLog.Infof(&quot;tracing deepcopy error:%v&quot;, err) } else { t.SetTracing(newTracing) IngressLog.Infof(&quot;AddOrUpdate Higress config tracing&quot;) t.eventHandler(higressTracingEnvoyFilterName) IngressLog.Infof(&quot;send event with filter name:%s&quot;, higressTracingEnvoyFilterName) } case ResultDelete: t.SetTracing(NewDefaultTracing()) IngressLog.Infof(&quot;Delete Higress config tracing&quot;) t.eventHandler(higressTracingEnvoyFilterName) IngressLog.Infof(&quot;send event with filter name:%s&quot;, higressTracingEnvoyFilterName) } return nil }  ","version":null,"tagName":"h3"},{"title":"é€šçŸ¥ XDSUpdaterâ€‹","type":1,"pageTitle":"Higress å…¨å±€é…ç½®æ§åˆ¶é¢åŸç†åˆ†æ","url":"/zh-cn/blog/configmap#é€šçŸ¥-xdsupdater","content":"åœ¨ ConfigmapMgr åˆå§‹åŒ–æ—¶å€™è°ƒç”¨ configmapMgr.initEventHandlers()ï¼Œ è¿™ä¸ª func ä¼šåˆ›å»º ItemEventHandler, åŒæ—¶éå† ItemControllers è®¾ç½® ItemEventHandlerã€‚ // pkg/ingress/kube/configmap/config.go type ItemEventHandler = func(name string) // pkg/ingress/kube/configmap/controller.go func (c *ConfigmapMgr) initEventHandlers() error { itemEventHandler := func(name string) { c.XDSUpdater.ConfigUpdate(&amp;model.PushRequest{ Full: true, ConfigsUpdated: map[model.ConfigKey]struct{}{{ Kind: gvk.EnvoyFilter, Name: name, Namespace: c.Namespace, }: {}}, Reason: []model.TriggerReason{ModelUpdatedReason}, }) } for _, itemController := range c.ItemControllers { itemController.RegisterItemEventHandler(itemEventHandler) } return nil }  è¿™é‡Œ XDSUpdater æ˜¯ä» IngressConfig åˆå§‹åŒ–ä¼ å…¥ï¼Œ XDSUpdater.ConfigUpdate() ç”¨äºæ›´æ–°é€šçŸ¥ä¸‹å‘ã€‚ è¿›ä¸€æ­¥è·Ÿè¸ªå¯ä»¥å‘ç°åœ¨ Higress controller server å¯åŠ¨æ—¶æ‰§è¡Œ s.initXdsServer å‡½æ•°åˆ›å»º s.xdsServerï¼Œå…·ä½“é€»è¾‘ä¸åœ¨æœ¬æ–‡è®¨è®ºèŒƒå›´, æœ‰å…´è¶£å¯ä»¥è¿›ä¸€æ­¥é˜…è¯»æºç ã€‚ // pkg/bootstrap/server.go func NewServer(args *ServerArgs) (*Server, error) { // ... s := &amp;Server{ ServerArgs: args, httpMux: http.NewServeMux(), environment: e, readinessProbes: make(map[string]readinessProbe), server: server.New(), } s.environment.Watcher = mesh.NewFixedWatcher(&amp;v1alpha1.MeshConfig{}) s.environment.Init() initFuncList := []func() error{ s.initKubeClient, s.initXdsServer, s.initHttpServer, s.initConfigController, s.initRegistryEventHandlers, s.initAuthenticators, } for _, f := range initFuncList { if err := f(); err != nil { return nil, err } } // ... return s, nil } // pkg/bootstrap/server.go func (s *Server) initXdsServer() error { log.Info(&quot;init xds server&quot;) s.xdsServer = xds.NewDiscoveryServer(s.environment, nil, PodName, PodNamespace, s.RegistryOptions.KubeOptions.ClusterAliases) // ... return s.initGrpcServer() }  ","version":null,"tagName":"h2"},{"title":"æ„å»ºå’Œä¸‹å‘ EnvoyFiltersâ€‹","type":1,"pageTitle":"Higress å…¨å±€é…ç½®æ§åˆ¶é¢åŸç†åˆ†æ","url":"/zh-cn/blog/configmap#æ„å»ºå’Œä¸‹å‘-envoyfilters","content":"","version":null,"tagName":"h2"},{"title":"1. IngressConfig List ä¸‹å‘ EnvoyFilters åˆ—è¡¨â€‹","type":1,"pageTitle":"Higress å…¨å±€é…ç½®æ§åˆ¶é¢åŸç†åˆ†æ","url":"/zh-cn/blog/configmap#1-ingressconfig-list-ä¸‹å‘-envoyfilters-åˆ—è¡¨","content":"IngressConfig List ç”¨äº VirtualService, DestinationRule, EnvoyFilter, ServiceEntry, WasmPlugin ç­‰ CR èµ„æºä¸‹å‘ï¼Œ è¿™é‡Œä¸»è¦å…³æ³¨ EnvoyFilter CR èµ„æºä¸‹å‘ã€‚ // pkg/ingress/config/ingress_config.go func (m *IngressConfig) List(typ config.GroupVersionKind, namespace string) ([]config.Config, error) { if typ != gvk.Gateway &amp;&amp; typ != gvk.VirtualService &amp;&amp; typ != gvk.DestinationRule &amp;&amp; typ != gvk.EnvoyFilter &amp;&amp; typ != gvk.ServiceEntry &amp;&amp; typ != gvk.WasmPlugin { return nil, common.ErrUnsupportedOp } // ... if typ == gvk.EnvoyFilter { m.mutex.RLock() defer m.mutex.RUnlock() var envoyFilters []config.Config // è°ƒç”¨ ConfigmapMgr ConstructEnvoyFilters è·å–éœ€è¦ä¸‹å‘ EnvoyFilter åˆ—è¡¨ configmapEnvoyFilters, err := m.configmapMgr.ConstructEnvoyFilters() if err != nil { IngressLog.Errorf(&quot;Construct configmap EnvoyFilters error %v&quot;, err) } else { for _, envoyFilter := range configmapEnvoyFilters { envoyFilters = append(envoyFilters, *envoyFilter) } IngressLog.Infof(&quot;Append %d configmap EnvoyFilters&quot;, len(configmapEnvoyFilters)) } if len(envoyFilters) == 0 { IngressLog.Infof(&quot;resource type %s, configs number %d&quot;, typ, len(m.cachedEnvoyFilters)) return m.cachedEnvoyFilters, nil } // éœ€è¦ä¸‹å‘ configmap EnvoyFilter åˆ—è¡¨ å’Œ m.cachedEnvoyFilters åˆ—è¡¨èšåˆä¸€ä¸‹ä¸‹å‘ envoyFilters = append(envoyFilters, m.cachedEnvoyFilters...) IngressLog.Infof(&quot;resource type %s, configs number %d&quot;, typ, len(envoyFilters)) return envoyFilters, nil } }  è°ƒç”¨ ConfigmapMgr ConstructEnvoyFilters è·å–éœ€è¦ä¸‹å‘ EnvoyFilter åˆ—è¡¨ï¼Œ åŒæ—¶å’Œ m.cachedEnvoyFilters åˆ—è¡¨èšåˆä¸€ä¸‹å†ä¸‹å‘ã€‚ è¿™é‡Œ m.cachedEnvoyFilters æ˜¯åœ¨æ„å»º VirtualService æ—¶ç”Ÿæˆï¼Œæœ‰å…´è¶£å¯ä»¥è¿›ä¸€æ­¥é˜…è¯» IngressConfig æºç ã€‚ ","version":null,"tagName":"h3"},{"title":"2. ConfigmapMgr æ„å»º EnvoyFilter åˆ—è¡¨â€‹","type":1,"pageTitle":"Higress å…¨å±€é…ç½®æ§åˆ¶é¢åŸç†åˆ†æ","url":"/zh-cn/blog/configmap#2-configmapmgr-æ„å»º-envoyfilter-åˆ—è¡¨","content":"è¿™é‡Œæ¯”è¾ƒç®€å•ï¼Œéå†ä¸€ä¸‹ ItemControllersï¼Œèšåˆæ¯ä¸ª itemController è¿”å›çš„ EnvoyFilters. // /pkg/ingress/kube/configmap/controller.go func (c *ConfigmapMgr) ConstructEnvoyFilters() ([]*config.Config, error) { configs := make([]*config.Config, 0) for _, itemController := range c.ItemControllers { IngressLog.Infof(&quot;controller %s ConstructEnvoyFilters&quot;, itemController.GetName()) if itemConfigs, err := itemController.ConstructEnvoyFilters(); err != nil { IngressLog.Errorf(&quot;controller %s ConstructEnvoyFilters error, error: %+v&quot;, itemController.GetName(), err) } else { configs = append(configs, itemConfigs...) } } return configs, nil }  ","version":null,"tagName":"h3"},{"title":"3. TracingController æ„å»º EnvoyFiltersâ€‹","type":1,"pageTitle":"Higress å…¨å±€é…ç½®æ§åˆ¶é¢åŸç†åˆ†æ","url":"/zh-cn/blog/configmap#3-tracingcontroller-æ„å»º-envoyfilters","content":"è¿™é‡Œå°±æ¯”è¾ƒç®€å•ï¼Œæ ¹æ®ä¿å­˜çš„ Tracing æ•°æ®æ„å»ºå¯¹åº”çš„ EnvoyFilter // pkg/ingress/kube/configmap/tracing.go func (t *TracingController) ConstructEnvoyFilters() ([]*config.Config, error) { // ... tracingConfig := t.constructTracingTracer(tracing, namespace) if len(tracingConfig) == 0 { return configs, nil } config := &amp;config.Config{ Meta: config.Meta{ GroupVersionKind: gvk.EnvoyFilter, Name: higressTracingEnvoyFilterName, Namespace: namespace, }, Spec: &amp;networking.EnvoyFilter{ ConfigPatches: []*networking.EnvoyFilter_EnvoyConfigObjectPatch{ { ApplyTo: networking.EnvoyFilter_NETWORK_FILTER, Match: &amp;networking.EnvoyFilter_EnvoyConfigObjectMatch{ Context: networking.EnvoyFilter_GATEWAY, ObjectTypes: &amp;networking.EnvoyFilter_EnvoyConfigObjectMatch_Listener{ Listener: &amp;networking.EnvoyFilter_ListenerMatch{ FilterChain: &amp;networking.EnvoyFilter_ListenerMatch_FilterChainMatch{ Filter: &amp;networking.EnvoyFilter_ListenerMatch_FilterMatch{ Name: &quot;envoy.filters.network.http_connection_manager&quot;, }, }, }, }, }, Patch: &amp;networking.EnvoyFilter_Patch{ Operation: networking.EnvoyFilter_Patch_MERGE, Value: util.BuildPatchStruct(tracingConfig), }, }, { ApplyTo: networking.EnvoyFilter_HTTP_FILTER, Match: &amp;networking.EnvoyFilter_EnvoyConfigObjectMatch{ Context: networking.EnvoyFilter_GATEWAY, ObjectTypes: &amp;networking.EnvoyFilter_EnvoyConfigObjectMatch_Listener{ Listener: &amp;networking.EnvoyFilter_ListenerMatch{ FilterChain: &amp;networking.EnvoyFilter_ListenerMatch_FilterChainMatch{ Filter: &amp;networking.EnvoyFilter_ListenerMatch_FilterMatch{ Name: &quot;envoy.filters.network.http_connection_manager&quot;, SubFilter: &amp;networking.EnvoyFilter_ListenerMatch_SubFilterMatch{ Name: &quot;envoy.filters.http.router&quot;, }, }, }, }, }, }, Patch: &amp;networking.EnvoyFilter_Patch{ Operation: networking.EnvoyFilter_Patch_MERGE, Value: util.BuildPatchStruct(`{ &quot;name&quot;:&quot;envoy.filters.http.router&quot;, &quot;typed_config&quot;:{ &quot;@type&quot;: &quot;type.googleapis.com/envoy.extensions.filters.http.router.v3.Router&quot;, &quot;start_child_span&quot;: true } }`), }, }, }, }, } configs = append(configs, config) return configs, nil }  ","version":null,"tagName":"h3"},{"title":"å¦‚ä½•æ‰©å±•å…¨å±€é…ç½®â€‹","type":1,"pageTitle":"Higress å…¨å±€é…ç½®æ§åˆ¶é¢åŸç†åˆ†æ","url":"/zh-cn/blog/configmap#å¦‚ä½•æ‰©å±•å…¨å±€é…ç½®","content":"","version":null,"tagName":"h2"},{"title":"1. HigressConfig ç»“æ„ä½“æ·»åŠ å¯¹åº”çš„æ‰©å±•é…ç½®â€‹","type":1,"pageTitle":"Higress å…¨å±€é…ç½®æ§åˆ¶é¢åŸç†åˆ†æ","url":"/zh-cn/blog/configmap#1-higressconfig-ç»“æ„ä½“æ·»åŠ å¯¹åº”çš„æ‰©å±•é…ç½®","content":"type HigressConfig struct { Tracing *Tracing `json:&quot;tracing,omitempty&quot;` // åœ¨è¿™é‡Œæ·»åŠ å¯¹åº”çš„æ•°æ®ç»“æ„æ¥æ‰©å±•é…ç½® }  ","version":null,"tagName":"h3"},{"title":"2. å¢åŠ æ‰©å±•é…ç½®é»˜è®¤å€¼â€‹","type":1,"pageTitle":"Higress å…¨å±€é…ç½®æ§åˆ¶é¢åŸç†åˆ†æ","url":"/zh-cn/blog/configmap#2-å¢åŠ æ‰©å±•é…ç½®é»˜è®¤å€¼","content":"// pkg/ingress/kube/configmap/config.go func NewDefaultHigressConfig() *HigressConfig { higressConfig := &amp;HigressConfig{ Tracing: NewDefaultTracing(), // åœ¨è¿™é‡Œå¢åŠ æ‰©å±•é…ç½®é»˜è®¤å€¼ } return higressConfig }  ","version":null,"tagName":"h3"},{"title":"3. å®ç° ItemController interfaceâ€‹","type":1,"pageTitle":"Higress å…¨å±€é…ç½®æ§åˆ¶é¢åŸç†åˆ†æ","url":"/zh-cn/blog/configmap#3-å®ç°-itemcontroller-interface","content":"type ItemController interface { GetName() string AddOrUpdateHigressConfig(name util.ClusterNamespacedName, old *HigressConfig, new *HigressConfig) error ValidHigressConfig(higressConfig *HigressConfig) error ConstructEnvoyFilters() ([]*config.Config, error) RegisterItemEventHandler(eventHandler ItemEventHandler) }  ","version":null,"tagName":"h3"},{"title":"4. åˆå§‹åŒ–æ‰©å±•é…ç½®ï¼ŒåŒæ—¶æ·»åŠ åˆ° ItemControllersâ€‹","type":1,"pageTitle":"Higress å…¨å±€é…ç½®æ§åˆ¶é¢åŸç†åˆ†æ","url":"/zh-cn/blog/configmap#4-åˆå§‹åŒ–æ‰©å±•é…ç½®åŒæ—¶æ·»åŠ åˆ°-itemcontrollers","content":"func NewConfigmapMgr(XDSUpdater model.XDSUpdater, namespace string, higressConfigController HigressConfigController, higressConfigLister listersv1.ConfigMapNamespaceLister) *ConfigmapMgr { // ... tracingController := NewTracingController(namespace) configmapMgr.AddItemControllers(tracingController) // ... // åœ¨è¿™é‡Œåˆå§‹åŒ–æ‰©å±•é…ç½®ï¼ŒåŒæ—¶æ·»åŠ åˆ° ItemControllers configmapMgr.initEventHandlers() return configmapMgr }  ","version":null,"tagName":"h3"},{"title":"å‚ä¸ç¤¾åŒºè´¡çŒ®â€‹","type":1,"pageTitle":"Higress å…¨å±€é…ç½®æ§åˆ¶é¢åŸç†åˆ†æ","url":"/zh-cn/blog/configmap#å‚ä¸ç¤¾åŒºè´¡çŒ®","content":"Higress å¼€æºè´¡çŒ®å°ç»„æ­£åœ¨ç«çƒ­æ‹›å‹Ÿè´¡çŒ®è€…ã€‚æ—©æœŸå‚ä¸å¼€æºæ›´å®¹æ˜“æˆä¸ºé¡¹ç›® Committerï¼Œå¹¶æœ‰æ›´å¤šæœºä¼šæˆä¸º Higress PMC(Project Management Committee) çš„ä¸€å‘˜ï¼Œå‚ä¸ä¸»å¯¼ Higress ç¤¾åŒºçš„å‰è¿›æ–¹å‘ã€‚ æ¬¢è¿åŠ å…¥ Higress ç¤¾åŒºç¾¤ï¼š  ","version":null,"tagName":"h2"},{"title":"Higress å›¢é˜Ÿæ‹›å‹Ÿå°ä¼™ä¼´åŠ å…¥ï½","type":0,"sectionRef":"#","url":"/zh-cn/blog/hring","content":"","keywords":"higress hiring","version":null},{"title":"åŠ å…¥Higressçš„å•†ä¸šåŒ–Teamâ€‹","type":1,"pageTitle":"Higress å›¢é˜Ÿæ‹›å‹Ÿå°ä¼™ä¼´åŠ å…¥ï½","url":"/zh-cn/blog/hring#åŠ å…¥higressçš„å•†ä¸šåŒ–team","content":"æˆ‘ä»¬å•†ä¸šåŒ–Teamæœ‰å……è¶³çš„HCï¼Œæ¬¢è¿åŠ å…¥ğŸ‘ï¼Œè”ç³»æ–¹å¼ï¼šå¾®ä¿¡(nomadao) é‚®ç®±(zty98751@alibaba-inc.com) ","version":null,"tagName":"h2"},{"title":"å›¢é˜Ÿä»‹ç»â€‹","type":1,"pageTitle":"Higress å›¢é˜Ÿæ‹›å‹Ÿå°ä¼™ä¼´åŠ å…¥ï½","url":"/zh-cn/blog/hring#å›¢é˜Ÿä»‹ç»","content":"Higresså›¢é˜Ÿå±äºé˜¿é‡Œäº‘äº‘åŸç”Ÿä¸­é—´ä»¶å›¢é˜Ÿã€‚ é˜¿é‡Œäº‘äº‘åŸç”Ÿä¸­é—´ä»¶å›¢é˜Ÿè´Ÿè´£åˆ†å¸ƒå¼è½¯ä»¶åŸºç¡€è®¾æ–½ï¼Œä¸ºé˜¿é‡Œäº‘ä¸Šä¸‡å®¶ä¼ä¸šæä¾›å¦‚å¾®æœåŠ¡å¼•æ“ã€åˆ†å¸ƒå¼äº‹åŠ¡ã€EDASç­‰åˆ†å¸ƒå¼åŸºç¡€æœåŠ¡ï¼ŒåŠ é€Ÿä¼ä¸šä¸Šäº‘çš„è¿›ç¨‹å’Œåˆ›æ–°é€Ÿåº¦ã€‚åŒæ—¶ï¼Œäº‘åŸç”Ÿä¸­é—´ä»¶å›¢é˜Ÿä¹ŸæœåŠ¡ç€é˜¿é‡Œé›†å›¢ä¼—å¤šæ ¸å¿ƒä¸šåŠ¡å’Œåœºæ™¯ï¼Œæ˜¯æ”¯æ’‘åŒåä¸€ç‹‚æ¬¢èŠ‚çš„æ ¸å¿ƒå›¢é˜Ÿä¹‹ä¸€ã€‚ åœ¨è¿™é‡Œï¼Œæœ‰éå¸¸ä¼˜ç§€çš„ä¸­é—´ä»¶äº§å“å’Œåœºæ™¯ä»¥åŠä¼ä¸šäº’è”ç½‘æ¶æ„å¹³å°ï¼ŒæœåŠ¡ä¸Šä¸‡å®¶é˜¿é‡Œäº‘çš„ä¼ä¸šï¼Œæ”¯æŒå¤§è§„æ¨¡ç”µå•†äº¤æ˜“ä¸šåŠ¡åœºæ™¯ã€‚ åœ¨è¿™é‡Œï¼Œä½ ä¼šå‚ä¸åˆ°å…¨çƒä¼˜ç§€å¼€æºé¡¹ç›®ï¼ˆå¦‚ Apache Dubboã€RocketMQã€Nacosã€Sentinelã€Seataã€Arthasã€Tengineã€Istioã€Envoyã€OpenSergoã€Higressï¼‰å’Œé˜¿é‡Œäº‘æ ¸å¿ƒå•†ä¸šåŒ–äº§å“ï¼ˆå¾®æœåŠ¡å¼•æ“ MSEã€ä¼ä¸šçº§åˆ†å¸ƒå¼åº”ç”¨æœåŠ¡ EDASã€åº”ç”¨å®æ—¶ç›‘æ§æœåŠ¡ARMSï¼‰ç ”å‘å·¥ä½œä¸­ï¼Œä¸€åŒæ‹“å±•æŠ€æœ¯çš„è¾¹ç•Œï¼Œæ—¢èµ‹èƒ½é˜¿é‡Œå·´å·´é›†å›¢ï¼Œæ›´æœåŠ¡å¹¿æ³›çš„å¼€å‘è€…ç”¨æˆ·ã€‚ åœ¨è¿™é‡Œï¼Œä½ ä¼šå‚ä¸åˆ°ä¸­é—´ä»¶ã€å¾®æœåŠ¡ã€Serverless ç­‰å‰æ²¿çš„æŠ€æœ¯ç ”å‘ä¸æ¢ç´¢ä¸­æ¥ï¼›ä½ ä¹Ÿä¼šä¸å…¨çƒä¼˜ç§€å¼€æºäº§å“åˆ›å§‹äººç­‰ç»„æˆçš„æ˜æ˜Ÿå›¢é˜Ÿä¸€èµ·å·¥ä½œã€‚ ","version":null,"tagName":"h3"},{"title":"è´Ÿè´£å·¥ä½œâ€‹","type":1,"pageTitle":"Higress å›¢é˜Ÿæ‹›å‹Ÿå°ä¼™ä¼´åŠ å…¥ï½","url":"/zh-cn/blog/hring#è´Ÿè´£å·¥ä½œ","content":"å‚ä¸é˜¿é‡Œäº‘å•†ä¸šç‰ˆHigressï¼ˆMSEäº‘åŸç”Ÿç½‘å…³ï¼‰çš„äº§å“ç ”å‘å‚ä¸Higresså¼€æºçš„äº§å“ç ”å‘å’Œç¤¾ç¾¤è¿è¥ ","version":null,"tagName":"h3"},{"title":"èŒä½è¦æ±‚â€‹","type":1,"pageTitle":"Higress å›¢é˜Ÿæ‹›å‹Ÿå°ä¼™ä¼´åŠ å…¥ï½","url":"/zh-cn/blog/hring#èŒä½è¦æ±‚","content":"3å¹´ä»¥ä¸Šäº§å“ç ”å‘å·¥ä½œç»éªŒï¼Œç†Ÿç»ƒä½¿ç”¨Goæˆ–C++ï¼Œæœ‰äº‘åŸç”Ÿç›¸å…³äº§å“ç ”å‘ç»éªŒè€…ä¼˜å…ˆã€‚æœ‰Higress/Envoy/Istio/Nginxå¼€æºè´¡çŒ®å’Œå¼€å‘ç»éªŒè€…ä¼˜å…ˆã€‚å…·å¤‡å‡ºè‰²çš„é¡¹ç›®ç®¡ç†åè°ƒå’Œä¸šåŠ¡è§„åˆ’èƒ½åŠ›ï¼Œæœ‰å›¢é˜Ÿåˆä½œç²¾ç¥ï¼Œå¹¶èƒ½å€ŸåŠ©å„æ–¹åŠ›é‡æ¨åŠ¨è§„åˆ™ã€åˆ¶åº¦ç­‰è½åœ°ã€‚ ","version":null,"tagName":"h3"},{"title":"åŠ å…¥Higressçš„å¼€æºTeamâ€‹","type":1,"pageTitle":"Higress å›¢é˜Ÿæ‹›å‹Ÿå°ä¼™ä¼´åŠ å…¥ï½","url":"/zh-cn/blog/hring#åŠ å…¥higressçš„å¼€æºteam","content":"Higressä¸ºå‚ä¸è´¡çŒ®çš„åŒå­¦è®¾è®¡äº†å‡ ä¸ªå¯è®¤é¢†çš„å¤´è¡”ï¼Œè¾¾åˆ°ä¸€å®šè´¡çŒ®è¦æ±‚ï¼Œå³å¯åœ¨Higresså®˜ç½‘æPRçš„æ–¹å¼è®¤é¢†ã€‚ å¤´è¡”æœ¬èº«æ˜¯ä¸€ç§è£èª‰è±¡å¾ï¼Œæ¯ä¸€ä½å‚ä¸Higressçš„è´¡çŒ®è€…åœ¨å¼€æºç¤¾åŒºçš„åœ°ä½éƒ½æ˜¯å¹³ç­‰çš„ ","version":null,"tagName":"h2"},{"title":"Member å¤´è¡”â€‹","type":1,"pageTitle":"Higress å›¢é˜Ÿæ‹›å‹Ÿå°ä¼™ä¼´åŠ å…¥ï½","url":"/zh-cn/blog/hring#member-å¤´è¡”","content":"æ¡ä»¶ï¼š è·å¾— 8 ä¸ªå®Œæˆ issue çš„ç§¯åˆ†ï¼ˆeasy +1ï¼Œnormal +2ï¼Œchallenge +4ï¼‰ Higresså¼€æºç¤¾åŒºä¸ºæ¯ä¸ªå¯è®¤é¢†ï¼ˆhelp wantedæ ‡ç­¾ï¼‰çš„issueéƒ½æ ‡è®°äº†éš¾åº¦æ ‡ç­¾ï¼šç®€å•(level/easy)ï¼Œæ™®é€š(level/normal)ï¼Œæœ‰æŒ‘æˆ˜(level/challenge)ï¼Œå®Œæˆissueåå¯ä»¥è·å¾—å¯¹åº”ç§¯åˆ† è´¡çŒ®ä»£ç ï¼ˆåŒ…å«æ–‡æ¡£ï¼‰DIFF è¡Œæ•°ï¼ˆåŒ…å«å¢åˆ ï¼‰è¾¾åˆ° 500+ ä¸ä»…åªæœ‰è´¡çŒ®ä»£ç ï¼Œåœ¨Higresså®˜ç½‘ä»“åº“è´¡çŒ®æ–‡æ¡£ï¼Œä¹Ÿå¯ä»¥æ»¡è¶³æ­¤è¦æ±‚ åœ¨ç¤¾åŒºå‘¨ä¼šè¿›è¡Œ 1 æ¬¡ä¸»é¢˜åˆ†äº« é‡ç‚¹ä¸æ˜¯åˆ†äº«çš„å†…å®¹ï¼Œæ˜¯é€šè¿‡åˆ†äº«è®©å¤§å®¶è®¤è¯†ä½  ç”³è¯·æ–¹å¼ï¼š ç›´æ¥æPRç”³è¯· ","version":null,"tagName":"h3"},{"title":"Reviewer å¤´è¡”â€‹","type":1,"pageTitle":"Higress å›¢é˜Ÿæ‹›å‹Ÿå°ä¼™ä¼´åŠ å…¥ï½","url":"/zh-cn/blog/hring#reviewer-å¤´è¡”","content":"æ¡ä»¶ï¼š æ»¡è¶³Memberæ¡ä»¶åœ¨SIGçš„æ ¸å¿ƒ issue ä¸­åšå‡ºè´¡çŒ® ç”³è¯·æ–¹å¼ï¼š ç”±Approvers/Maintaineræååï¼ŒæPRç”³è¯· ","version":null,"tagName":"h3"},{"title":"Approver å¤´è¡”â€‹","type":1,"pageTitle":"Higress å›¢é˜Ÿæ‹›å‹Ÿå°ä¼™ä¼´åŠ å…¥ï½","url":"/zh-cn/blog/hring#approver-å¤´è¡”","content":"æ¡ä»¶ï¼š æ»¡è¶³Revieweræ¡ä»¶ä¸»å¯¼ä¸€ä¸ªSIGï¼Œç»„ç»‡å¹¶æ¨è¿›æ ¸å¿ƒissueçš„tasklistå®Œæˆ ç”³è¯·æ–¹å¼ï¼š ç”±Maintaineræååï¼ŒæPRç”³è¯· ","version":null,"tagName":"h3"},{"title":"Maintainer å¤´è¡”â€‹","type":1,"pageTitle":"Higress å›¢é˜Ÿæ‹›å‹Ÿå°ä¼™ä¼´åŠ å…¥ï½","url":"/zh-cn/blog/hring#maintainer-å¤´è¡”","content":"Maintaineræ˜¯å¯¹Higressé¡¹ç›®ï¼ˆåŒ…æ‹¬Higressä¸‹çš„é¡¹ç›®ï¼‰çš„æ¼”è¿›å’Œå‘å±•åšå‡ºæ˜¾è‘—è´¡çŒ®çš„ä¸ªäººã€‚åœ¨ç¤¾åŒºä¸­å…·æœ‰æœ‰ç›®å…±ç¹çš„å½±å“åŠ›ï¼Œèƒ½å¤Ÿä»£è¡¨Higresså‚åŠ é‡è¦çš„ç¤¾åŒºä¼šè®®å’Œæ´»åŠ¨ã€‚ æ¡ä»¶ï¼š æ»¡è¶³Approveræ¡ä»¶ä¸»å¯¼å¤šä¸ªSIGï¼Œç»„ç»‡å¹¶æ¨è¿›æ ¸å¿ƒissueçš„tasklistå®Œæˆç§¯æå‚ä¸å¼€æºç¤¾åŒºçš„æ—¥å¸¸å·¥ä½œï¼šå¼•å¯¼æ–°äººå¼€å‘ï¼Œç”¨æˆ·é—®é¢˜è§£ç­”ç­‰ ç”³è¯·æ–¹å¼ï¼š ç”±2åMaintaineræååï¼ŒæPRç”³è¯· ","version":null,"tagName":"h3"},{"title":"å·²è·å¾—å¤´è¡”åå•â€‹","type":1,"pageTitle":"Higress å›¢é˜Ÿæ‹›å‹Ÿå°ä¼™ä¼´åŠ å…¥ï½","url":"/zh-cn/blog/hring#å·²è·å¾—å¤´è¡”åå•","content":"æ³¨ï¼šæ’åæŒ‰ github id é¦–å­—æ¯ Higress Maintainersâ€‹ å§“å\tgithub\tç»„ç»‡è‘£è‰ºèƒ\tCH3CHO\tTrip.com è€¿è•¾è•¾\tgengleilei\tAlibaba å¼ æ·»ç¿¼\tjohnlanni\tAlibaba èŒƒæ‰¬\tSpecialYang\tAlibaba Higress Approversâ€‹ å§“å\tgithub\tç»„ç»‡å´æ–°å†›\t2456868764\t- åˆ˜è®­ç¼\tXunzhuo\tTencent Higress Reviewersâ€‹ å§“å\tgithub\tç»„ç»‡å‡Œè½¶ç¾¤\tLynskylate\tPdd Holdings Inc åˆ˜æ™“ç‘\trinfx\tAlibaba èµµç‚³å ƒ\tsjtuzbk\tAlibaba Higress Membersâ€‹ å§“å\tgithub\tç»„ç»‡æå¼ºæ—\tCharlie17Li\tZJU-SEL å°å®‡è…¾\tFfyyt\tXUPT ç”°äºšæ¶›\tHinsteny\tAnt å®‹é¹è¿œ\tsongpengyuan\tOkki.com èµµä¼ŸåŸº\tvikizhao156\tSJTU éŸ¦é‘«\tWeixinX\tNUAA ","version":null,"tagName":"h3"},{"title":"Higress å¼€æºä¹‹å¤é¡¹ç›®æŠ¥å","type":0,"sectionRef":"#","url":"/zh-cn/blog/ospp-2023","content":"","keywords":"higress summer-ospp","version":null},{"title":"å¼€æºä¹‹å¤ä»‹ç»â€‹","type":1,"pageTitle":"Higress å¼€æºä¹‹å¤é¡¹ç›®æŠ¥å","url":"/zh-cn/blog/ospp-2023#å¼€æºä¹‹å¤ä»‹ç»","content":"å¼€æºä¹‹å¤æ˜¯ç”±ä¸­ç§‘é™¢è½¯ä»¶æ‰€â€œå¼€æºè½¯ä»¶ä¾›åº”é“¾ç‚¹äº®è®¡åˆ’â€å‘èµ·å¹¶é•¿æœŸæ”¯æŒçš„ä¸€é¡¹æš‘æœŸå¼€æºæ´»åŠ¨ï¼Œæ—¨åœ¨é¼“åŠ±åœ¨æ ¡å­¦ç”Ÿç§¯æå‚ä¸å¼€æºè½¯ä»¶çš„å¼€å‘ç»´æŠ¤ï¼ŒåŸ¹å…»å’Œå‘æ˜æ›´å¤šä¼˜ç§€çš„å¼€å‘è€…ï¼Œä¿ƒè¿›ä¼˜ç§€å¼€æºè½¯ä»¶ç¤¾åŒºçš„è“¬å‹ƒå‘å±•ï¼ŒåŠ©åŠ›å¼€æºè½¯ä»¶ä¾›åº”é“¾å»ºè®¾ã€‚ ç›®å‰å¼€æºä¹‹å¤å®˜ç½‘å·²ç»å¼€å¯äº†å­¦ç”ŸæŠ¥åï¼Œåªè¦ä½ æ»¡è¶³ä»¥ä¸‹è¦æ±‚å³å¯è¿›è¡Œé¡¹ç›®ç”³è¯·ï¼š æœ¬æ´»åŠ¨é¢å‘å¹´æ»¡ 18 å‘¨å²åœ¨æ ¡å­¦ç”Ÿã€‚æš‘æœŸå³å°†æ¯•ä¸šçš„å­¦ç”Ÿï¼Œåªè¦åœ¨ç”³è¯·æ—¶å­¦ç”Ÿè¯å¤„åœ¨æœ‰æ•ˆæœŸå†…ï¼Œå°±å¯ä»¥æäº¤ç”³è¯·ã€‚ä¸­å›½ç±å­¦ç”Ÿå‚ä¸æ´»åŠ¨éœ€æä¾›èº«ä»½è¯ã€å­¦ç”Ÿè¯ã€æ•™è‚²éƒ¨å­¦ç±åœ¨çº¿éªŒè¯æŠ¥å‘Šï¼ˆå­¦ä¿¡ç½‘ï¼‰æˆ–åœ¨è¯»è¯æ˜ã€‚å¤–ç±å­¦ç”Ÿå‚ä¸æ´»åŠ¨éœ€æä¾›æŠ¤ç…§ï¼ŒåŒæ—¶æä¾›å½•å–é€šçŸ¥ä¹¦ã€å­¦ç”Ÿå¡ã€åœ¨è¯»è¯æ˜ç­‰æ–‡ä»¶ç”¨äºè¯æ˜å­¦ç”Ÿèº«ä»½ã€‚ å‚ä¸é¡¹ç›®ä¸ä»…å¯ä»¥ä¸ºå¼€æºä¸–ç•Œåšå‡ºè‡ªå·±çš„è´¡çŒ®ï¼Œè¿˜èƒ½è·å¾—ä¸°åšçš„ç»“é¡¹å¥–é‡‘ï¼ˆåŸºç¡€éš¾åº¦8000 RMB/è¿›é˜¶éš¾åº¦12000 RMBï¼‰ï¼Œé¡¹ç›®ç»éªŒä¹Ÿä¼šæˆä¸ºä½ æ¯•ä¸šç®€å†ä¸Šçš„äº®ç‚¹ï¼Œå¿«æ¥æŠ¥åå§ï¼ æŠ¥åæˆªæ­¢æ—¶é—´ä¸º 6 æœˆ 3 æ—¥ 15 ç‚¹ï¼Œå…·ä½“å‚è€ƒå®˜ç½‘æ´»åŠ¨æµç¨‹å’Œå‚ä¸æŒ‡å—ä»‹ç»ï¼š  ","version":null,"tagName":"h2"},{"title":"Higress ä»‹ç»â€‹","type":1,"pageTitle":"Higress å¼€æºä¹‹å¤é¡¹ç›®æŠ¥å","url":"/zh-cn/blog/ospp-2023#higress-ä»‹ç»","content":"Higress æ˜¯åŸºäºé˜¿é‡Œå†…éƒ¨ä¸¤å¹´å¤šçš„å®è·µæ²‰æ·€ï¼Œä»¥å¼€æº Istio ä¸ Envoy ä¸ºæ ¸å¿ƒæ„å»ºçš„ä¸‹ä¸€ä»£äº‘åŸç”Ÿç½‘å…³ã€‚Higress å®ç°äº†å®‰å…¨é˜²æŠ¤ç½‘å…³ã€æµé‡ç½‘å…³ã€å¾®æœåŠ¡ç½‘å…³ä¸‰å±‚ç½‘å…³åˆä¸€ï¼Œå¯ä»¥æ˜¾è‘—é™ä½ç½‘å…³çš„éƒ¨ç½²å’Œè¿ç»´æˆæœ¬ã€‚  Higress åœ¨é˜¿é‡Œå†…éƒ¨çš„è¯ç”Ÿå’Œæ¼”è¿›å†ç¨‹å¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« : é˜¿é‡Œå·´å·´é‡ç£…å¼€æºäº‘åŸç”Ÿç½‘å…³: Higress Higress å¼€æºåŠå¹´æ—¶é—´ï¼ŒGitHub star æ•°å·²ç»ç ´åƒï¼Œåœ¨ä¸Šä¸ªæœˆ Higress å·²ç» Release å‡ºäº†ç¬¬ä¸€ä¸ª RC ç‰ˆæœ¬ï¼Œä½œä¸ºæ­£å¼ GA çš„å€™é€‰å‘å¸ƒç‰ˆæœ¬ï¼Œè¯¦æƒ…å¯ä»¥æŸ¥çœ‹è¿™ç¯‡æ–‡ç« : ä¸Šçº¿æ§åˆ¶å°ï¼Œé™ä½ä½¿ç”¨é—¨æ§›ï½œHigress 1.0.0 RC ç‰ˆæœ¬å‘å¸ƒ åœ¨æœ¬æ¬¡å¼€æºä¹‹å¤æ´»åŠ¨ä¸­ï¼ŒHigress æœ‰ä¸¤ä¸ªè¿›é˜¶éš¾åº¦çš„é¡¹ç›®å¯ä»¥ç”³è¯·ï¼Œæ¬¢è¿å„ä½åŒå­¦è¸Šè·ƒæŠ¥åã€‚ ","version":null,"tagName":"h2"},{"title":"é¡¹ç›®ä»‹ç»â€‹","type":1,"pageTitle":"Higress å¼€æºä¹‹å¤é¡¹ç›®æŠ¥å","url":"/zh-cn/blog/ospp-2023#é¡¹ç›®ä»‹ç»","content":"","version":null,"tagName":"h2"},{"title":"é¡¹ç›®ä¸€ï¼šHigress Wasm æ’ä»¶æ„å»º/è°ƒè¯•/éƒ¨ç½²çš„å‘½ä»¤è¡Œå®ç°â€‹","type":1,"pageTitle":"Higress å¼€æºä¹‹å¤é¡¹ç›®æŠ¥å","url":"/zh-cn/blog/ospp-2023#é¡¹ç›®ä¸€higress-wasm-æ’ä»¶æ„å»ºè°ƒè¯•éƒ¨ç½²çš„å‘½ä»¤è¡Œå®ç°","content":"Higress æä¾›äº†å¾ˆæ–¹ä¾¿çš„ Wasm æ’ä»¶æ‰©å±•æ¡†æ¶ï¼Œå…·ä½“å¯ä»¥æŸ¥çœ‹è¿™ç¯‡æ–‡ç« ï¼š 30è¡Œä»£ç å†™ä¸€ä¸ªWasm Goæ’ä»¶ æ›´è¯¦ç»†çš„æ’ä»¶å¼€å‘å’Œè°ƒè¯•æµç¨‹å¯ä»¥æŸ¥çœ‹è¿™ç¯‡æ–‡ç« ï¼šä½¿ç”¨ Go è¯­è¨€å¼€å‘ WASM æ’ä»¶ è¿™é‡Œå¯¹æ’ä»¶çš„ç”Ÿæ•ˆæœºåˆ¶ç®€å•åšä¸ªè¯´æ˜ï¼š  ç”¨æˆ·å°†ä»£ç ç¼–è¯‘æˆ wasm æ–‡ä»¶ç”¨æˆ·å°† wasm æ–‡ä»¶æ„å»ºæˆ oci é•œåƒç”¨æˆ·å°† oci é•œåƒæ¨é€è‡³é•œåƒä»“åº“ç”¨æˆ·åˆ›å»º WasmPlugin èµ„æºIstio watch åˆ° WasmPlugin èµ„æºçš„å˜åŒ–Higress Gateway ä¸­çš„ xDS proxy è¿›ç¨‹ä» Istio è·å–åˆ°é…ç½®ï¼Œå‘ç°æ’ä»¶çš„é•œåƒåœ°å€xDS proxy ä»é•œåƒä»“åº“æ‹‰å–é•œåƒxDS proxy ä»é•œåƒä¸­æå–å‡º wasm æ–‡ä»¶Higress Gateway ä¸­çš„ envoy è¿›ç¨‹ä» xDS proxy è·å–åˆ°é…ç½®ï¼Œå‘ç° wasm æ–‡ä»¶çš„æœ¬åœ°è·¯å¾„envoy ä»æœ¬åœ°æ–‡ä»¶ä¸­åŠ è½½ wasm æ–‡ä»¶ è¿™é‡Œ envoy è·å–é…ç½®å¹¶åŠ è½½ wasm æ–‡ä»¶ä½¿ç”¨åˆ°äº† ECDS (Extension Config Discovery Service)çš„æœºåˆ¶ï¼Œå®ç°äº† wasm æ–‡ä»¶æ›´æ–°ï¼Œç›´æ¥çƒ­åŠ è½½ï¼Œä¸ä¼šå¯¼è‡´ä»»ä½•è¿æ¥ä¸­æ–­ï¼Œä¸šåŠ¡æµé‡å®Œå…¨æ— æŸã€‚ è¿™ä¸ªé¡¹ç›®çš„åˆè¡·æ˜¯å¸Œæœ›èƒ½åŸºäº Higress çš„ CLI å‘½ä»¤è¡Œå·¥å…·(hgctl) æ¥è¿›ä¸€æ­¥ç®€åŒ– Higress Wasm æ’ä»¶çš„å¼€å‘è°ƒè¯•å’Œå®‰è£…éƒ¨ç½²æ­¥éª¤ï¼Œä½¿ä¹‹æ›´å®¹æ˜“ä¸Šæ‰‹ä½¿ç”¨ã€‚ éœ€è¦å®ç°çš„ hgctl å‘½ä»¤å¦‚ä¸‹ï¼š hgctl plugin buildï¼šæ„å»º wasm OCI é•œåƒå¹¶æ¨é€åˆ°æŒ‡å®šä»“åº“hgctl plugin testï¼šå¯åŠ¨ docker compose æµ‹è¯•æ’ä»¶åŠŸèƒ½hgctl plugin install/uninstall ï¼šåœ¨å½“å‰higressé›†ç¾¤ä¸­å®‰è£…æˆ–å¸è½½æ’ä»¶hgctl plugin configï¼šä¿®æ”¹åˆ¶å®šæ’ä»¶çš„é…ç½® Higress Wasm æ’ä»¶é…ç½®åŸºäº Openapi Specification ï¼ˆOAS 3.0ï¼‰è¿›è¡Œçº¦æŸï¼Œéœ€è¦èƒ½ä»ä»£ç ä¸­è§£æå‡ºæ’ä»¶é…ç½®å­—æ®µæ ¼å¼ï¼Œè‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„ OAS çº¦æŸï¼Œç”¨äºæ·»åŠ åˆ° OCI é•œåƒä¸­ï¼Œå¹¶åŒæ—¶ç”¨äº install/uninstall/config ç­‰å‘½ä»¤çš„å‚æ•°é…ç½®æ ¡éªŒ ","version":null,"tagName":"h3"},{"title":"é¡¹ç›®äºŒï¼šåŸºäº Wasm å®ç° OIDC è®¤è¯æ’ä»¶â€‹","type":1,"pageTitle":"Higress å¼€æºä¹‹å¤é¡¹ç›®æŠ¥å","url":"/zh-cn/blog/ospp-2023#é¡¹ç›®äºŒåŸºäº-wasm-å®ç°-oidc-è®¤è¯æ’ä»¶","content":"Higress ä½œä¸ºä¸€ä¸ªäº‘åŸç”Ÿç½‘å…³ï¼Œéœ€è¦å®ç° OIDC è®¤è¯çš„èƒ½åŠ›ï¼Œæ–¹ä¾¿ç”¨æˆ·å¯¹æ¥å¤–éƒ¨è®¤è¯æœåŠ¡ã€‚ OIDC ï¼ˆOpenID Connectï¼‰ æ˜¯åŸºäº OAuth 2.0 çš„èº«ä»½è®¤è¯åè®®ï¼Œå¯ä»¥ç”¨äºå®ç° SSOï¼ˆSingle Sign Onï¼‰å•ç‚¹ç™»å½•ï¼Œå³é€šè¿‡ç½‘å…³ç»Ÿä¸€å®Œæˆç”¨æˆ·çš„èº«ä»½è®¤è¯ï¼Œåœ¨èº«ä»½è®¤è¯æˆåŠŸåï¼Œå†å°†èµ„æºè¯·æ±‚è½¬å‘ç»™åç«¯æœåŠ¡ã€‚  æµç¨‹ç®€ä»‹å¦‚ä¸‹ï¼š å®¢æˆ·ç«¯å‘ç½‘å…³å‘èµ·è®¤è¯è¯·æ±‚ã€‚ç½‘å…³å°†è®¤è¯è¯·æ±‚ç›´æ¥è½¬å‘åˆ°ç»™è®¤è¯æœåŠ¡ã€‚è®¤è¯æœåŠ¡è¯»å–è¯·æ±‚ä¸­çš„éªŒè¯ä¿¡æ¯ï¼ˆä¾‹å¦‚ç”¨æˆ·åã€å¯†ç ï¼‰è¿›è¡ŒéªŒè¯ï¼ŒéªŒè¯é€šè¿‡åè¿”å›Codeç»™ç½‘å…³ã€‚ç½‘å…³å°†æºå¸¦Codeçš„åº”ç­”è¿”å›ç»™å®¢æˆ·ç«¯ã€‚å®¢æˆ·ç«¯å‘ç½‘å…³è¯·æ±‚å›è°ƒæ¥å£ï¼Œè¯·æ±‚ä¸­æºå¸¦Codeã€‚ç½‘å…³è¯·æ±‚è®¤è¯æœåŠ¡é¢å‘Tokenï¼Œè¯·æ±‚ä¸­æºå¸¦Codeã€Client IDã€Client Secretã€‚è®¤è¯æœåŠ¡éªŒè¯åˆæ³•æ€§ï¼Œå¹¶è¿”å›ID Tokenã€‚è®¤è¯æˆåŠŸï¼Œç½‘å…³å°†æºå¸¦ID Tokençš„åº”ç­”è¿”å›ç»™å®¢æˆ·ç«¯ã€‚å®¢æˆ·ç«¯å‘ç½‘å…³å‘èµ·ä¸šåŠ¡è¯·æ±‚ï¼Œè¯·æ±‚ä¸­æºå¸¦ID Tokenï¼Œç½‘å…³æ ¡éªŒè¯·æ±‚ä¸­æ˜¯å¦æºå¸¦ID Tokenå’Œåˆæ³•æ€§ã€‚ç½‘å…³æ ¡éªŒå®¢æˆ·ç«¯çš„ä¸šåŠ¡è¯·æ±‚åˆæ³•ï¼Œå°†è¯·æ±‚é€ä¼ ç»™ä¸šåŠ¡æœåŠ¡ã€‚ä¸šåŠ¡æœåŠ¡è¿›è¡Œä¸šåŠ¡å¤„ç†ååº”ç­”ã€‚ç½‘å…³å°†ä¸šåŠ¡åº”ç­”è¿”å›ç»™å®¢æˆ·ç«¯ã€‚ ç›®å‰ Higress ä¹Ÿå¯ä»¥åŸºäº Envoy çš„ Ext Authz æœºåˆ¶å¯¹æ¥å¤–ç½®çš„ oauth2-proxy æ¥å®ç°é‰´æƒï¼Œä¸è¿‡è¿™ä¸ªæ–¹æ¡ˆä¸€æ–¹é¢æœ‰é¢å¤–çš„è¯·æ±‚å¼€é”€ï¼Œå¦ä¸€æ–¹é¢ oauth2-proxy åªèƒ½ä½œä¸€ç»„ OIDC é…ç½®ï¼Œæ— æ³•å¯¹æ¥å¤šä¸ªä¸åŒçš„è®¤è¯æœåŠ¡ ","version":null,"tagName":"h3"},{"title":"åŠ å…¥ç¤¾åŒºâ€‹","type":1,"pageTitle":"Higress å¼€æºä¹‹å¤é¡¹ç›®æŠ¥å","url":"/zh-cn/blog/ospp-2023#åŠ å…¥ç¤¾åŒº","content":"GitHubï¼šhttps://github.com/alibaba/higress å®˜ç½‘: https://higress.io å¯¹äºæŠ¥åæ–¹å¼æœ‰ä»»ä½•ç–‘é—®ï¼Œæˆ–è€…å¯¹æŸä¸€ä¸ªä»»åŠ¡éå¸¸æ„Ÿå…´è¶£ï¼Œå¹¶ä¸”æƒ³è¦æ·±å…¥äº†è§£çš„åŒå­¦ï¼Œæ¬¢è¿æ‰«ç æ·»åŠ å¾®ä¿¡ï¼Œå¤‡æ³¨å¼€æºä¹‹å¤  ","version":null,"tagName":"h2"},{"title":"ç›¸å…³é¡¹ç›®æ¨èâ€‹","type":1,"pageTitle":"Higress å¼€æºä¹‹å¤é¡¹ç›®æŠ¥å","url":"/zh-cn/blog/ospp-2023#ç›¸å…³é¡¹ç›®æ¨è","content":"å¯¹äºå¾®æœåŠ¡æ³¨å†Œå‘ç°å’Œé…ç½®ç®¡ç†æœ‰å…´è¶£çš„åŒå­¦ï¼Œå¯ä»¥å°è¯•å¡«æŠ¥ Nacos å¼€æºä¹‹å¤ï¼›å¯¹äºå¾®æœåŠ¡åˆ†å¸ƒå¼äº‹åŠ¡æœ‰å…´è¶£çš„åŒå­¦ï¼Œå¯ä»¥å°è¯•å¡«æŠ¥ Seata å¼€æºä¹‹å¤ï¼›å¯¹äºå¾®æœåŠ¡æ¡†æ¶å’ŒRPCæ¡†æ¶æœ‰å…´è¶£çš„åŒå­¦ï¼Œå¯ä»¥å°è¯•å¡«æŠ¥ Spring Cloud Alibaba å’Œ Dubbo å¼€æºä¹‹å¤ï¼›å¯¹äºåˆ†å¸ƒå¼é«˜å¯ç”¨é˜²æŠ¤æœ‰å…´è¶£çš„åŒå­¦ï¼Œå¯ä»¥å°è¯•å¡«æŠ¥ Sentinel å¼€æºä¹‹å¤ï¼›å¯¹äºå¾®æœåŠ¡æ²»ç†æœ‰å…´è¶£çš„åŒå­¦ï¼Œå¯ä»¥å°è¯•å¡«æŠ¥ OpenSergo å¼€æºä¹‹å¤ã€‚ ","version":null,"tagName":"h2"},{"title":"æ•™ç¨‹ï¼šå¦‚ä½•åœ¨æœ¬åœ°è¿›è¡Œhigressè°ƒè¯•å’Œç«¯åˆ°ç«¯æµ‹è¯•","type":0,"sectionRef":"#","url":"/zh-cn/blog/e2e-debug","content":"","keywords":"higress","version":null},{"title":"èƒŒæ™¯è¯´æ˜â€‹","type":1,"pageTitle":"æ•™ç¨‹ï¼šå¦‚ä½•åœ¨æœ¬åœ°è¿›è¡Œhigressè°ƒè¯•å’Œç«¯åˆ°ç«¯æµ‹è¯•","url":"/zh-cn/blog/e2e-debug#èƒŒæ™¯è¯´æ˜","content":"","version":null,"tagName":"h2"},{"title":"æœ¬åœ°è°ƒè¯•â€‹","type":1,"pageTitle":"æ•™ç¨‹ï¼šå¦‚ä½•åœ¨æœ¬åœ°è¿›è¡Œhigressè°ƒè¯•å’Œç«¯åˆ°ç«¯æµ‹è¯•","url":"/zh-cn/blog/e2e-debug#æœ¬åœ°è°ƒè¯•","content":"æœ¬åœ°è°ƒè¯•æ—¨åœ¨åœ¨å¼€å‘è€…çš„æœ¬åœ°å¼€å‘ç¯å¢ƒä¸­è¯†åˆ«ã€å®šä½å’Œä¿®å¤ä»£ç ä¸­çš„é”™è¯¯ï¼ˆbugï¼‰ã€‚è¿™ä¸ªé˜¶æ®µçš„ä¸»è¦ç›®æ ‡æ˜¯ç¡®ä¿å•ä¸ªæ¨¡å—æˆ–ç»„ä»¶çš„æ­£ç¡®æ€§ï¼Œä»¥ä¾¿æ›´å®¹æ˜“ç†è§£å’Œè§£å†³é—®é¢˜ã€‚ å¼€å‘è€…é€šå¸¸ä½¿ç”¨æœ¬åœ°é›†æˆå¼€å‘ç¯å¢ƒï¼ˆIDEï¼‰æˆ–è°ƒè¯•å™¨æ¥é€æ­¥æ‰§è¡Œä»£ç ã€æŸ¥çœ‹å˜é‡çš„å€¼ã€è§‚å¯Ÿç¨‹åºçš„æµç¨‹ï¼Œå¹¶é€šè¿‡æ‰“æ–­ç‚¹æ¥æ£€æŸ¥ä»£ç çš„æ‰§è¡Œè¿‡ç¨‹ã€‚ æœ¬åœ°è°ƒè¯•æ˜¯ä¸€ä¸ªå¿«é€Ÿã€è¿…é€Ÿå®šä½é—®é¢˜å¹¶è¿›è¡Œä¿®å¤çš„é˜¶æ®µï¼Œèƒ½å¤Ÿæä¾›å®æ—¶çš„åé¦ˆã€‚å®ƒæœ‰åŠ©äºç¡®ä¿ä»£ç çš„å±€éƒ¨æ­£ç¡®æ€§ï¼Œè€Œä¸éœ€è¦è€ƒè™‘æ•´ä¸ªç³»ç»Ÿçš„äº¤äº’ã€‚ ","version":null,"tagName":"h3"},{"title":"ç«¯åˆ°ç«¯æµ‹è¯•â€‹","type":1,"pageTitle":"æ•™ç¨‹ï¼šå¦‚ä½•åœ¨æœ¬åœ°è¿›è¡Œhigressè°ƒè¯•å’Œç«¯åˆ°ç«¯æµ‹è¯•","url":"/zh-cn/blog/e2e-debug#ç«¯åˆ°ç«¯æµ‹è¯•","content":"e2eæµ‹è¯•æ˜¯ä¸€ç§ç«¯åˆ°ç«¯çš„æµ‹è¯•ï¼Œæ˜¯ä¸€ç§å…¨é¢çš„æµ‹è¯•æ–¹æ³•ï¼Œç”¨äºéªŒè¯æ•´ä¸ªè½¯ä»¶ç³»ç»Ÿåœ¨çœŸå®ç¯å¢ƒä¸­çš„åŠŸèƒ½å’Œæ€§èƒ½ã€‚å®ƒæ¨¡æ‹Ÿç”¨æˆ·çš„å®é™…ä½¿ç”¨æƒ…å†µï¼Œç¡®ä¿æ•´ä¸ªç³»ç»Ÿçš„å„ä¸ªéƒ¨åˆ†æ­£ç¡®ååŒå·¥ä½œï¼Œä»¥è¾¾åˆ°ç”¨æˆ·æœŸæœ›çš„åŠŸèƒ½ã€‚ ç«¯åˆ°ç«¯æµ‹è¯•å…³æ³¨æ•´ä¸ªç³»ç»Ÿçš„é›†æˆå’Œäº¤äº’ï¼Œæ—¨åœ¨å‘ç°ä¸åŒç»„ä»¶ä¹‹é—´çš„é—®é¢˜ä»¥åŠåœ¨å®é™…ä½¿ç”¨åœºæ™¯ä¸­å¯èƒ½å‡ºç°çš„ bugã€‚è¿™æœ‰åŠ©äºç¡®ä¿ç³»ç»Ÿåœ¨ç”Ÿäº§ç¯å¢ƒä¸­çš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚ åœ¨higressä¸­ï¼Œe2eæµ‹è¯•çš„ä¸»è¦æµç¨‹å¯ç”¨ä¸‹å›¾æ¥è¡¨ç¤ºï¼š  ","version":null,"tagName":"h3"},{"title":"å¼Šç«¯â€‹","type":1,"pageTitle":"æ•™ç¨‹ï¼šå¦‚ä½•åœ¨æœ¬åœ°è¿›è¡Œhigressè°ƒè¯•å’Œç«¯åˆ°ç«¯æµ‹è¯•","url":"/zh-cn/blog/e2e-debug#å¼Šç«¯","content":"åœ¨æœ¬åœ°å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦é¢‘ç¹çš„è¿›è¡Œe2eæµ‹è¯•ï¼Œä½†æ˜¯æ¯æ¬¡éƒ½è¦é‡æ–°æ„å»ºé•œåƒã€åŠ è½½é•œåƒã€å®‰è£…higressã€è¿è¡Œe2eæµ‹è¯•ï¼Œè¿™æ ·çš„è¿‡ç¨‹éå¸¸è€—æ—¶ï¼Œå› æ­¤æˆ‘ä»¬å¸Œæœ›å°½é‡åœ°å‡å°‘è¿™äº›è¿‡ç¨‹ï¼Œå¤ç”¨æµ‹è¯•ç¯å¢ƒä»¥æé«˜å¼€å‘æ•ˆç‡ã€‚ å½“e2eè¿è¡Œçš„æ—¶å€™å‡ºç°é—®é¢˜ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿå¿«é€Ÿå®šä½é—®é¢˜ï¼Œè¿™å°±éœ€è¦åœ¨e2eæµ‹è¯•ä¸­å®ç°æœ¬åœ°è°ƒè¯•çš„åŠŸèƒ½ã€‚ å¦å¤–ï¼Œé€šå¸¸å¼€å‘wasmæ’ä»¶çš„æ—¶å€™æ˜¯ä¸éœ€è¦é‡æ–°æ„å»ºé•œåƒçš„ï¼Œåªéœ€è¦å¤ç”¨æµ‹è¯•ç¯å¢ƒå³å¯ã€‚ç„¶è€Œï¼Œå½“æ¶‰åŠåˆ°higress-coreç»„ä»¶ä»£ç (higressæ ¸å¿ƒä»£ç )ä¿®æ”¹çš„æ—¶å€™ï¼Œå°±éœ€è¦é‡æ–°æ„å»ºé•œåƒï¼Œé¢‘ç¹åœ°ä¿®æ”¹ä»£ç ã€é‡æ–°æ„å»ºé•œåƒä»¥è¿è¡Œe2eæµ‹è¯•ï¼Œè¿™æ ·å¼€å‘æ•ˆç‡å°±ä¼šå¤§å¤§é™ä½ã€‚ ","version":null,"tagName":"h3"},{"title":"è§£å†³æ–¹æ¡ˆâ€‹","type":1,"pageTitle":"æ•™ç¨‹ï¼šå¦‚ä½•åœ¨æœ¬åœ°è¿›è¡Œhigressè°ƒè¯•å’Œç«¯åˆ°ç«¯æµ‹è¯•","url":"/zh-cn/blog/e2e-debug#è§£å†³æ–¹æ¡ˆ","content":"ä¸æ¶‰åŠhigress-coreç»„ä»¶ä¿®æ”¹ å¯åˆ†ä¸ºç«¯åˆ°ç«¯æµ‹è¯•çš„ä¼˜åŒ–å’Œåœ¨ç«¯åˆ°ç«¯æµ‹è¯•ä¸­å®ç°æœ¬åœ°è°ƒè¯•çš„åŠŸèƒ½ï¼Œç«¯åˆ°ç«¯ä¼˜åŒ–å¯é‡‡ç”¨å®ç°æµ‹è¯•ç¯å¢ƒå¤ç”¨çš„æ–¹æ³•ï¼Œé€šè¿‡ä¿®æ”¹makefileæ–‡ä»¶æ¥å‡å°‘ç¯å¢ƒçš„åˆ›å»ºç­‰å¼€é”€ã€‚ è€Œåœ¨ç«¯åˆ°ç«¯æµ‹è¯•ä¸­å®ç°æœ¬åœ°è°ƒè¯•çš„åŠŸèƒ½ï¼Œå¯é€šè¿‡Golandæ¥å®ç°ï¼Œæå‰å‡†å¤‡å¥½æµ‹è¯•ç¯å¢ƒï¼Œä¿®æ”¹e2eæµ‹è¯•çš„éƒ¨åˆ†ä»£ç æ¥å‡å°‘e2eç¯å¢ƒåˆ›å»ºçš„å¼€é”€ï¼Œæ›´åŠ æ–¹ä¾¿çš„å®ç°debugåŠŸèƒ½ã€‚ æ¶‰åŠhigress-coreç»„ä»¶ä¿®æ”¹ å¯åœ¨æœ¬åœ°å¯åŠ¨higress-coreç»„ä»¶ï¼Œå¹¶ä½¿å…¶èƒ½å¤Ÿä¸kindé›†ç¾¤ä¸­çš„discoveryã€gatewayç­‰ç»„ä»¶è¿›è¡Œäº¤äº’ã€‚ ä¾‹å¦‚åœ¨æ¶‰åŠåˆ°higress-configçš„ConfigMapä¿®æ”¹çš„æ—¶å€™ï¼Œå…¶æµç¨‹å¤§è‡´å¦‚ä¸‹ï¼š  å¯ä»¥å‘ç°ï¼Œåªéœ€è¦ä¿®æ”¹higress-coreå®¹å™¨ä¸discoveryå®¹å™¨ä¹‹é—´çš„xdsåè®®é€šä¿¡åœ°å€ï¼Œä½¿å…¶èƒ½å¤Ÿä¸æœ¬åœ°çš„higress-coreå®¹å™¨è¿›è¡Œäº¤äº’ï¼Œå…¶æ˜¯æ³¨å†Œåœ¨grpcæœåŠ¡ä¸Šçš„ï¼Œå› æ­¤åªéœ€è¦ä¿®æ”¹xdsåœ°å€ä¸ºæœ¬åœ°çš„grpcæœåŠ¡åœ°å€å³å¯ã€‚ ","version":null,"tagName":"h3"},{"title":"å…·ä½“å®ç°â€‹","type":1,"pageTitle":"æ•™ç¨‹ï¼šå¦‚ä½•åœ¨æœ¬åœ°è¿›è¡Œhigressè°ƒè¯•å’Œç«¯åˆ°ç«¯æµ‹è¯•","url":"/zh-cn/blog/e2e-debug#å…·ä½“å®ç°","content":"","version":null,"tagName":"h2"},{"title":"ç«¯åˆ°ç«¯æµ‹è¯•ä¼˜åŒ–â€‹","type":1,"pageTitle":"æ•™ç¨‹ï¼šå¦‚ä½•åœ¨æœ¬åœ°è¿›è¡Œhigressè°ƒè¯•å’Œç«¯åˆ°ç«¯æµ‹è¯•","url":"/zh-cn/blog/e2e-debug#ç«¯åˆ°ç«¯æµ‹è¯•ä¼˜åŒ–","content":"é€šè¿‡makefileæ¥å®Œæˆï¼ŒåŒ…å«å¯åŠ¨ç³»åˆ—ç¯å¢ƒå’Œæ‰§è¡Œe2eæµ‹è¯•ã€‚ ä»¥è¿è¡Œæ’ä»¶æµ‹è¯•ä¸ºä¾‹ï¼Œå…¶makeå‘½ä»¤å¦‚ä¸‹ï¼š .PHONY: higress-wasmplugin-test higress-wasmplugin-test: $(tools/kind) delete-cluster create-cluster docker-build kube-load-image install-dev-wasmplugin run-higress-e2e-test-wasmplugin delete-cluster  å¼€å‘è€…é¦–æ¬¡è¿è¡Œç¯å¢ƒå¯å…ˆåˆ é™¤æœ€åä¸€ä¸ªdelete-clusterçš„æ“ä½œï¼Œç¬¬äºŒæ¬¡è¿è¡Œe2eæµ‹è¯•çš„æ—¶å€™å¯ä»¥åˆ é™¤å‰é¢çš„æ“ä½œï¼Œåªä¿ç•™run-higress-e2e-test-wasmpluginçš„æ“ä½œï¼Œè¿™æ ·å°±å¯ä»¥å‡å°‘å¾ˆå¤šæ—¶é—´ã€‚ ç„¶è€Œmakeå‘½ä»¤ä¸æ”¯æŒæ·»åŠ åˆ°golandé‡Œé¢å®ç°debugåŠŸèƒ½ï¼Œè¿è¡Œå‡ºé”™çš„æ—¶å€™ä¹Ÿä¸æ–¹ä¾¿å®šä½é—®é¢˜ï¼Œæ›´æ¨èä½¿ç”¨ä¸‹é¢è¿™ä¸ªæ–¹æ³•ã€‚ ","version":null,"tagName":"h3"},{"title":"åœ¨e2eä¸­å®ç°æœ¬åœ°è°ƒè¯•â€‹","type":1,"pageTitle":"æ•™ç¨‹ï¼šå¦‚ä½•åœ¨æœ¬åœ°è¿›è¡Œhigressè°ƒè¯•å’Œç«¯åˆ°ç«¯æµ‹è¯•","url":"/zh-cn/blog/e2e-debug#åœ¨e2eä¸­å®ç°æœ¬åœ°è°ƒè¯•","content":"é€šè¿‡Golandæ¥å®Œæˆï¼Œæå‰å‡†å¤‡å¥½ç¯å¢ƒï¼Œä¿®æ”¹Golandå¯åŠ¨å‚æ•°æ¥å®Œæˆæœ¬åœ°è°ƒè¯•ã€‚ e2eæµ‹è¯•ä¹‹å‰çš„å‡†å¤‡ æ ¹æ®å„è‡ªçš„éœ€æ±‚æ¥å®šåˆ¶ç¯å¢ƒï¼Œå¦‚æœæµ‹è¯•ç¯å¢ƒä¸­éœ€è¦ç”¨åˆ°higressçš„controllerã€gatewayç­‰ç»„ä»¶ï¼Œéœ€è¦æå‰æœ¬åœ°å®‰è£…å¥½ç¯å¢ƒï¼Œå®‰è£…æ•™ç¨‹å¯å‚è€ƒè¿™é‡Œï¼Œæˆ–è€…å‚è€ƒç«¯åˆ°ç«¯æµ‹è¯•ä¼˜åŒ–æ­¥éª¤æ¥å‡†å¤‡å¥½æµ‹è¯•ç¯å¢ƒã€‚ å®‰è£…å¥½higressåï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ¥æŸ¥çœ‹higressçš„podæ˜¯å¦æ­£å¸¸è¿è¡Œï¼š kubectl get pods --all-namespaces  æ˜¾ç¤ºç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š  éƒ½æ˜¾ç¤ºRunningçŠ¶æ€ï¼Œè¯´æ˜higresså·²ç»æ­£å¸¸è¿è¡Œã€‚ e2eçš„flagä¿®æ”¹ åœ¨test/e2e/conformance/utils/flagsç›®å½•ä¸‹ï¼Œæœ‰ä¸€ä¸ªflags.goæ–‡ä»¶ï¼Œé‡Œé¢å®šä¹‰äº†e2eæµ‹è¯•çš„flagï¼š var ( IngressClassName = flag.String(&quot;ingress-class&quot;, &quot;higress&quot;, &quot;Name of IngressClass to use for tests&quot;) ShowDebug = flag.Bool(&quot;debug&quot;, false, &quot;Whether to print debug logs&quot;) CleanupBaseResources = flag.Bool(&quot;cleanup-base-resources&quot;, true, &quot;Whether to cleanup base test resources after the run&quot;) SupportedFeatures = flag.String(&quot;supported-features&quot;, &quot;&quot;, &quot;Supported features included in conformance tests suites&quot;) ExemptFeatures = flag.String(&quot;exempt-features&quot;, &quot;&quot;, &quot;Exempt Features excluded from conformance tests suites&quot;) IsWasmPluginTest = flag.Bool(&quot;isWasmPluginTest&quot;, false, &quot;Determine if run wasm plugin conformance test&quot;) WasmPluginType = flag.String(&quot;wasmPluginType&quot;, &quot;GO&quot;, &quot;Define wasm plugin type, currently supports GO, CPP&quot;) WasmPluginName = flag.String(&quot;wasmPluginName&quot;, &quot;&quot;, &quot;Define wasm plugin name&quot;) IsEnvoyConfigTest = flag.Bool(&quot;isEnvoyConfigTest&quot;, false, &quot;Determine if run envoy config conformance test&quot;) )  å¯ä¸´æ—¶ä¿®æ”¹è¿™äº›flagçš„åˆå§‹å€¼ï¼Œä¹Ÿå¯ä»¥åœ¨Golandç¼–è¾‘å™¨ä¸­å®šä¹‰å¯åŠ¨å‚æ•°ï¼Œä¾‹å¦‚è®¾ç½®IsWasmPluginTestä¸ºtrueå¯åªè¿è¡Œwasmæ’ä»¶çš„e2eæµ‹è¯•ã€‚ ä¿®æ”¹å¥½flagä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨Golandä¸­é€šè¿‡debugçš„æ–¹å¼è¿è¡Œe2eæµ‹è¯•ã€‚å¯å…ˆåœ¨å¦‚ä¸‹ä½ç½®æ·»åŠ ä¸€ä¸ªæ–­ç‚¹ï¼Œç­‰å¾…e2eç¯å¢ƒå‡†å¤‡å®Œæ¯•ï¼š  e2eæµ‹è¯•åœ¨å‰æœŸç¯å¢ƒå‡†å¤‡çš„è¿‡ç¨‹ä¸­ä¼šåˆ›å»ºä¸€äº›namespaceå¹¶å¯åŠ¨ä¸€äº›podï¼Œå¯ä»¥æ‰‹åŠ¨æŸ¥çœ‹ä¸€ä¸‹podçš„å¯åŠ¨æƒ…å†µã€‚  åœ¨è¿™å¼ å›¾é‡Œé¢ï¼Œé™¤äº†æˆ‘ä»¬æå‰å®‰è£…å¥½çš„higressç»„ä»¶ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„podï¼Œè¿™äº›podæ˜¯e2eæµ‹è¯•è¿‡ç¨‹ä¸­åˆ›å»ºçš„ï¼Œå¦‚æœæœ‰äº›podåœ¨æœ¬åœ°e2eæµ‹è¯•ä¸­ç”¨ä¸åˆ°ï¼Œå¯æ‰‹åŠ¨ä¿®æ”¹ä»£ç æ¥å‡å°‘å‰æœŸç¯å¢ƒçš„å‡†å¤‡æ—¶é—´ã€‚ æ³¨æ„ï¼šå¦‚æœè®¾ç½®äº†cleanup-base-resourcesä¸ºfalseï¼Œé‚£ä¹ˆe2eæµ‹è¯•ç»“æŸä¹‹åï¼Œè¿™äº›podä¸ä¼šè¢«åˆ é™¤ï¼Œä½†æ˜¯é‡å¯çš„æ—¶å€™ä¼šæŠ¥é”™ï¼Œä¾‹å¦‚ï¼š Pod &quot;consul-standlone&quot; is invalid: spec: Forbidden: pod updates may not change fields other than `spec.containers[*].image`, `spec.initContainers[*].image`, `spec.activeDeadlineSeconds`, `spec.tolerations` (only additions to existing tolerations) or `spec.terminationGracePeriodSeconds` (allow it to be set to 1 if it was previously negative)  å»ºè®®è®¾ç½®ä¸ºtrueï¼Œæ¯æ¬¡æµ‹è¯•å®Œéœ€è¦ç­‰å¾…podçš„é”€æ¯ï¼Œç„¶åé‡æ–°æµ‹è¯•ï¼Œè¿™äº›è¿‡ç¨‹ä¸€èˆ¬å¾ˆå¿«ï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹ä»£ç æ¥å‡å°‘ä¸€äº›podçš„åˆ›å»ºã€‚ e2eæµ‹è¯•ç¯å¢ƒä¼˜åŒ– ä¾‹å¦‚åªéœ€è¦higressç¯å¢ƒï¼Œè€Œä¸éœ€è¦higress-conformance-infra,higress-conformance-app-backendç­‰namespaceç¯å¢ƒï¼Œå¯ä»¥æ‰‹åŠ¨åœ¨å¦‚ä¸‹å‡ è¡Œä»£ç é‡Œæ·»åŠ æ³¨é‡Šï¼Œæ¥è·³è¿‡è¿™äº›ç¯å¢ƒçš„åˆ›å»ºï¼Œç„¶åæµ‹è¯•ä¸­åªç”¨åˆ°äº†higressçš„ç»„ä»¶ï¼š  åœ¨è¿™é‡Œï¼Œæˆ‘åªéœ€è¦è¿è¡ŒEnvoyConfigTracingçš„Testæµ‹è¯•ï¼Œå®ƒåªè·Ÿhigresså’Œhigress-conformance-infraæœ‰å…³ï¼Œæ³¨é‡Šæ‰äº†å…¶ä»–namespaceçš„å‡†å¤‡ç¯å¢ƒï¼Œå¯ä»¥çœ‹åˆ°e2eæµ‹è¯•ä¸åˆ°1så°±ç»“æŸäº†ã€‚ å¦‚æœéœ€è¦å…¶ä»–namespaceçš„ç¯å¢ƒï¼Œè€Œä¸éœ€è¦nacos/consulç­‰ç¯å¢ƒï¼Œå¯ä»¥åœ¨suiteçš„Newæ–¹æ³•é‡Œæ‰¾åˆ°ä»¥ä¸‹ä»£ç å—ï¼Œæ ¹æ®éœ€è¦è¿›è¡Œæ³¨é‡Šï¼š // apply defaults if suite.BaseManifests == nil { suite.BaseManifests = []string{ &quot;base/manifests.yaml&quot;, &quot;base/consul.yaml&quot;, &quot;base/eureka.yaml&quot;, &quot;base/nacos.yaml&quot;, &quot;base/dubbo.yaml&quot;, } }  è§£å†³å¥½e2eæµ‹è¯•çš„ç¯å¢ƒç›¸å…³é—®é¢˜ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨Golandé‡Œæ·»åŠ è‡ªå·±æƒ³è¦çš„æ–­ç‚¹ï¼Œæ¥debugæµ‹è¯•ç”¨ä¾‹äº†ã€‚ ","version":null,"tagName":"h3"},{"title":"higress-coreæœ¬åœ°è°ƒè¯•+e2eæµ‹è¯•â€‹","type":1,"pageTitle":"æ•™ç¨‹ï¼šå¦‚ä½•åœ¨æœ¬åœ°è¿›è¡Œhigressè°ƒè¯•å’Œç«¯åˆ°ç«¯æµ‹è¯•","url":"/zh-cn/blog/e2e-debug#higress-coreæœ¬åœ°è°ƒè¯•e2eæµ‹è¯•","content":"é¦–å…ˆåœ¨æœ¬åœ°å¯åŠ¨higress-coreç»„ä»¶ï¼Œéœ€è¦ä¿®æ”¹å…¶å¯åŠ¨å‚æ•°ï¼Œä¸æ­£å¸¸éƒ¨ç½²çš„å¯åŠ¨å‚æ•°ä¿æŒä¸€è‡´ï¼Œå¯å‚è€ƒå¦‚ä¸‹é…ç½®Golandçš„å¯åŠ¨å‚æ•°ï¼š  æŸ¥æ‰¾è‡ªå·±çš„æœ¬æœºéå›ç¯ç½‘å¡çš„ipåœ°å€ï¼Œä¾‹å¦‚æˆ‘ä½¿ç”¨wlo0ç½‘å¡ï¼Œä¹Ÿå°±æ˜¯192.168.0.189  ä¿®æ”¹xdsåè®®åœ°å€ï¼Œè¿è¡Œkubectl edit cm higress-config -n higress-systemï¼Œå°†å…¶ä¿®æ”¹æœ¬åœ°çš„grpcæœåŠ¡åœ°å€ï¼Œå¦‚å›¾ï¼š  å°†å…¶ä¸­çš„127.0.0.1:15051ä¿®æ”¹ä¸º192.168.0.189:15051ï¼Œä¿å­˜é€€å‡ºã€‚ é‡å¯controllerå’Œgateway deploymentï¼Œä½¿å…¶èƒ½å¤Ÿé‡æ–°åŠ è½½é…ç½®: kubectl rollout restart deployment higress-gateway -n higress-system  kubectl rollout restart deployment higress-controller -n higress-system   é‡å¯æˆåŠŸåå¯ä»¥å…ˆè¿è¡Œä¸€ä¸‹ç®€å•çš„e2eæµ‹è¯•ï¼Œæ¯”å¦‚http routeç­‰ï¼Œæµ‹è¯•æ˜¯å¦èƒ½æ­£å¸¸è¿é€šgatewayï¼Œå…³äºConfigMapéƒ¨åˆ†ï¼Œæˆ‘è¿™é‡Œç»™æœ¬åœ°higress-coreæ·»åŠ äº†ä¸€ä¸ªglobal-optionçš„é…ç½®ï¼Œæ­¤æ—¶kindçš„coreç»„ä»¶è¿˜æ²¡æœ‰è¯¥é…ç½®ï¼ŒæŒ‰ç…§å‰é¢æ­¥éª¤å¯åŠ¨æœ¬åœ°higress-coreå¹¶ä¿®æ”¹xdsåœ°å€é‡å¯è´Ÿè½½ä¹‹åï¼Œè¿è¡Œç›¸å…³çš„e2eæµ‹è¯•ï¼Œå¯ä»¥çœ‹åˆ°æµ‹è¯•é€šè¿‡ï¼Œæœ¬åœ°higress-coreæ—¥å¿—ä»¥åŠkindä¸Šçš„discoveryæ—¥å¿—å¦‚ä¸‹ï¼š  é€šè¿‡æœ¬åœ°higress-coreæ—¥å¿—å¯ä»¥çœ‹åˆ°adsæˆåŠŸæ¨é€å‡ºå»envoyfilteré…ç½®æ–‡ä»¶ç»™discoveryï¼Œè€Œdiscoveryæ—¥å¿—åˆ™æ˜¾ç¤ºlds/rds/cdsç­‰æˆåŠŸå°†é…ç½®æ–‡ä»¶æ¨é€ç»™gatewayã€‚ ","version":null,"tagName":"h3"},{"title":"hgctl code-debugçš„ä½¿ç”¨â€‹","type":1,"pageTitle":"æ•™ç¨‹ï¼šå¦‚ä½•åœ¨æœ¬åœ°è¿›è¡Œhigressè°ƒè¯•å’Œç«¯åˆ°ç«¯æµ‹è¯•","url":"/zh-cn/blog/e2e-debug#hgctl-code-debugçš„ä½¿ç”¨","content":"hgctlå·²ç»æ¨å‡ºcode-debugçš„åŠŸèƒ½ï¼Œä¼šè‡ªåŠ¨ä¿®æ”¹xdsåœ°å€ï¼Œä½¿å…¶èƒ½å¤Ÿä¸æœ¬åœ°çš„higress-coreè¿›è¡Œäº¤äº’ã€‚è¿™é‡Œéœ€è¦ä½¿ç”¨hgctlæ¥å®‰è£…higressï¼Œç›®å‰code-debugåªæ”¯æŒlocal-k8sçš„profileã€‚ hgctlå®‰è£…higress hgctl install --set profile=local-k8s  ç­‰å¾…å®‰è£…å®Œæˆåï¼Œæ‰‹åŠ¨æŸ¥çœ‹ä¸€ä¸‹æ˜¯å¦å¯åŠ¨æˆåŠŸã€‚ å¯åŠ¨æœ¬åœ°higress-core ä¿®æ”¹Golandå¯åŠ¨å‚æ•°ä¸ºserve --kubeconfig=/root/.kube/config(æ”¹ä¸ºè‡ªå·±çš„homeç›®å½•)ï¼Œç„¶åå¯åŠ¨higress-coreï¼Œç­‰å¾…higress-coreå¯åŠ¨æˆåŠŸã€‚ å¼€å¯code-debug hgctl code-debug start  æŸ¥çœ‹controllerå’Œgatewayçš„podæ˜¯å¦é‡å¯æˆåŠŸï¼Œå¦‚æœé‡å¯æˆåŠŸï¼Œè¯´æ˜code-debugå·²ç»ç”Ÿæ•ˆã€‚ å…¶ä»–ç¯å¢ƒå‡†å¤‡ åœ¨åé¢çš„æ­¥éª¤ä¸Šæ¶‰åŠåˆ°Ingressèµ„æºï¼Œè¿™é‡Œéœ€è¦å‡†å¤‡ä¸€ä¸‹Ingressèµ„æºï¼Œè¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š kubectl apply -f - &lt;&lt;EOF apiVersion: v1 kind: Namespace metadata: name: higress-conformance-infra labels: higress-conformance: infra --- apiVersion: v1 kind: Service metadata: name: infra-backend-v1 namespace: higress-conformance-infra spec: selector: app: infra-backend-v1 ports: - protocol: TCP port: 8080 targetPort: 3000 --- apiVersion: apps/v1 kind: Deployment metadata: name: infra-backend-v1 namespace: higress-conformance-infra labels: app: infra-backend-v1 spec: replicas: 2 selector: matchLabels: app: infra-backend-v1 template: metadata: labels: app: infra-backend-v1 spec: containers: - name: infra-backend-v1 # From https://github.com/kubernetes-sigs/ingress-controller-conformance/tree/master/images/echoserver image: higress-registry.cn-hangzhou.cr.aliyuncs.com/higress/echoserver:v20221109-7ee2f3e env: - name: POD_NAME valueFrom: fieldRef: fieldPath: metadata.name - name: NAMESPACE valueFrom: fieldRef: fieldPath: metadata.namespace resources: requests: cpu: 10m --- apiVersion: networking.k8s.io/v1 kind: Ingress metadata: name: higress-conformance-infra-configmap-global-test namespace: higress-conformance-infra spec: ingressClassName: higress rules: - host: &quot;foo.com&quot; http: paths: - pathType: Prefix path: &quot;/foo&quot; backend: service: name: infra-backend-v1 port: number: 8080 EOF  è°ƒè¯•higress-core ä»¥ConfigMapçš„gzip(ä½äºpkg/ingress/kube/configmap/gzip.go)ä¸ºä¾‹ï¼Œä¿®æ”¹NewDefaultGzipæ–¹æ³•ï¼Œå°†Enableçš„é»˜è®¤å€¼ä¿®æ”¹ä¸ºtrueï¼Œç„¶åé‡å¯higress-coreã€‚ åœ¨é‡å¯ä¹‹å‰ï¼Œå…ˆè¿è¡Œå¦‚ä¸‹shellå‘½ä»¤ï¼Œå¯åŠ¨envoyæŸ¥çœ‹é¢æ¿ï¼š hgctl dashboard envoy  è®¿é—®http://localhost:15000/config_dumpï¼Œä½¿ç”¨Ctrl+Fæœç´¢compression_levelï¼Œå¯ä»¥çœ‹åˆ°æŸ¥æ‰¾ç»“æœä¸ºç©ºï¼Œè¯´æ˜gzipé…ç½®è¿˜æ²¡æœ‰ç”Ÿæ•ˆã€‚ æ¥ä¸‹æ¥é‡å¯higress-coreï¼Œç­‰å¾…higress-coreé‡å¯æˆåŠŸï¼Œå†æ¬¡è®¿é—®http://localhost:15000/config_dumpï¼Œä½¿ç”¨Ctrl+Fæœç´¢compression_levelï¼Œå¯ä»¥çœ‹åˆ°æŸ¥æ‰¾ç»“æœä¸ä¸ºç©ºï¼Œè¯´æ˜gzipé…ç½®å·²ç»ç”Ÿæ•ˆã€‚ å…³é—­code-debug hgctl code-debug stop  ","version":null,"tagName":"h2"},{"title":"æ€»ç»“â€‹","type":1,"pageTitle":"æ•™ç¨‹ï¼šå¦‚ä½•åœ¨æœ¬åœ°è¿›è¡Œhigressè°ƒè¯•å’Œç«¯åˆ°ç«¯æµ‹è¯•","url":"/zh-cn/blog/e2e-debug#æ€»ç»“","content":"æœ¬åœ°è°ƒè¯•å’Œe2eæµ‹è¯•æ˜¯å¼€å‘è¿‡ç¨‹ä¸­å¿…ä¸å¯å°‘çš„ç¯èŠ‚ï¼Œé€šè¿‡æœ¬æ–‡çš„ä»‹ç»ï¼Œæˆ‘ä»¬å¯ä»¥æ›´åŠ æ–¹ä¾¿çš„è¿›è¡Œæœ¬åœ°è°ƒè¯•å’Œe2eæµ‹è¯•ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚æ¶‰åŠåˆ°higress-coreç»„ä»¶ä¿®æ”¹çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹xdsåœ°å€å¹¶æœ¬åœ°å¯åŠ¨higress-coreï¼Œè€Œä¸éœ€è¦é¢‘ç¹åœ°ä¿®æ”¹ä»£ç ã€é‡æ–°æ„å»ºé•œåƒä»¥è¿è¡Œe2eæµ‹è¯•ï¼Œå¹¶ä¸”è¿˜èƒ½è°ƒè¯•higress-coreç»„ä»¶çš„ä»£ç ã€‚higressåç»­ä¼šæ¨å‡ºä¸€äº›æ–°åŠŸèƒ½ï¼Œå®ç°e2eæµ‹è¯•çš„æ‹†åˆ†ï¼Œä¸»è¦ä¼šåˆ†ä¸ºå‡†å¤‡ç¯å¢ƒï¼Œè¿è¡Œæµ‹è¯•ä»¥åŠæ¸…é™¤ç¯å¢ƒç­‰ï¼Œçµæ´»æ€§æ›´é«˜ã€‚ ","version":null,"tagName":"h2"},{"title":"Higress + Nacos å¾®æœåŠ¡ç½‘å…³æœ€ä½³å®è·µ","type":0,"sectionRef":"#","url":"/zh-cn/blog/nacos","content":"","keywords":"higress wasm","version":null},{"title":"å‰è¨€â€‹","type":1,"pageTitle":"Higress + Nacos å¾®æœåŠ¡ç½‘å…³æœ€ä½³å®è·µ","url":"/zh-cn/blog/nacos#å‰è¨€","content":"åœ¨å»å¹´11æœˆçš„äº‘æ –å¤§ä¼šä¸Šï¼Œæˆ‘ä»¬å¼€æºäº†äº‘åŸç”Ÿç½‘å…³ Higressï¼Œæ—¶éš”æ•°æœˆï¼ŒHigress çš„ Github é¡¹ç›®(https://github.com/alibaba/higress)å·²ç»æ”¶è·äº†è¿‘ 1k+ starï¼Œä»¥åŠå¤§é‡ç¤¾åŒºå°ä¼™ä¼´çš„å…³æ³¨ã€‚ åœ¨ç¤¾åŒºçš„äº¤æµä¸­æˆ‘ä»¬å‘ç°æœ‰ä¸å°‘å¾®æœåŠ¡å¼€å‘è€…åœ¨ä½¿ç”¨å¦‚ Spring Cloud Gateway/Zuul ç­‰å¾®æœåŠ¡ç½‘å…³å¯¹æ¥ Nacos æ³¨å†Œä¸­å¿ƒå®ç°å¾®æœåŠ¡çš„è·¯ç”±ï¼Œå¹¶ä¸”å¸Œæœ›äº†è§£è¿ç§»åˆ° Higress ç½‘å…³èƒ½å¸¦æ¥å“ªäº›å¥½å¤„ã€‚ æœ¬æ–‡å°†ä»‹ç» Higress ç»„åˆ Nacos ä½œä¸ºå¾®æœåŠ¡ç½‘å…³èƒ½åŠ›ï¼Œå¹¶ä»‹ç»å¾®æœåŠ¡ç½‘å…³å‘å±•çš„ä¸¤ä¸ªè¶‹åŠ¿ï¼Œä¸ºç½‘å…³çš„é€‰å‹æŒ‡æ˜é“è·¯ï¼š è¶‹åŠ¿ä¸€ï¼šç»Ÿä¸€ API æ ‡å‡†ï¼Œå‘äº‘åŸç”Ÿå¾®æœåŠ¡æ¶æ„æ¼”è¿›è¶‹åŠ¿äºŒï¼šåˆå¹¶å®‰å…¨&amp;æµé‡ç½‘å…³ï¼Œå‘ DevSecOps æ¼”è¿› ","version":null,"tagName":"h2"},{"title":"Higressï¼šNacosçš„æœ€ä½³æ‹æ¡£â€‹","type":1,"pageTitle":"Higress + Nacos å¾®æœåŠ¡ç½‘å…³æœ€ä½³å®è·µ","url":"/zh-cn/blog/nacos#higressnacosçš„æœ€ä½³æ‹æ¡£","content":"Higress å’Œ Nacos å…¶å®æ˜¯å¸ˆå‡ºåŒé—¨â€”â€”é˜¿é‡Œä¸­é—´ä»¶å›¢é˜Ÿã€‚åœ¨ Higress æ”¯æ’‘é˜¿é‡Œå†…éƒ¨ä¸šåŠ¡çš„é˜¶æ®µï¼ŒHigress å°±å·²ç»æ­é… Nacos ä½œä¸ºå¾®æœåŠ¡ç½‘å…³ä½¿ç”¨ï¼Œå‡­å€Ÿé«˜æ€§èƒ½æ”¯æ’‘äº†åŒåä¸€çš„æ´ªå³°æµé‡ï¼›åˆ°äº†äº‘äº§å“å•†ä¸šåŒ–é˜¶æ®µï¼ŒHigress å’Œ Nacos ç»§ç»­åŸºäºé˜¿é‡Œäº‘ MSEï¼ˆMicroservices Engineï¼‰äº§å“ï¼Œç´§å¯†åä½œæ¼”è¿›äº§å“åŠŸèƒ½ï¼›Higress å¼€æºä¹‹åï¼Œå¦‚æœæƒ³è¦è‡ªå»ºå¾®æœåŠ¡ç½‘å…³ï¼Œé€‰æ‹© Higress é…åˆ Nacos ä½¿ç”¨ï¼Œå…·å¤‡ä»¥ä¸‹ä¼˜åŠ¿ï¼š å¯¹æ¯” Spring Cloud Gateway/Zuul ç­‰ä¼ ç»Ÿ Java å¾®æœåŠ¡ç½‘å…³æ€§èƒ½é«˜å‡º 2-4 å€ï¼Œå¯ä»¥æ˜¾è‘—é™ä½èµ„æºæˆæœ¬ä½œä¸ºäº‘åŸç”Ÿç½‘å…³ï¼Œå®ç°äº† Ingress/Gateway API æ ‡å‡†ï¼Œå…¼å®¹ Nginx Ingress å¤§éƒ¨åˆ†æ³¨è§£ï¼Œæ”¯æŒä¸šåŠ¡æ¸è¿›å¼å‘åŸºäº K8s çš„å¾®æœåŠ¡æ¶æ„æ¼”è¿›ä¸ Dubbo/OpenSergo/Sentinel ç­‰å¼€æºå¾®æœåŠ¡ç”Ÿæ€æ·±åº¦æ•´åˆï¼Œæä¾›æœ€ä½³å®è·µ è¿™é‡Œé»˜è®¤å·²ç»å®‰è£…å¥½ Higressï¼Œæ­é… Nacos ä½¿ç”¨çš„å…·ä½“æ–¹å¼å¦‚ä¸‹ï¼š ","version":null,"tagName":"h2"},{"title":"é…ç½®æœåŠ¡æ¥æºâ€‹","type":1,"pageTitle":"Higress + Nacos å¾®æœåŠ¡ç½‘å…³æœ€ä½³å®è·µ","url":"/zh-cn/blog/nacos#é…ç½®æœåŠ¡æ¥æº","content":"apiVersion: networking.higress.io/v1 kind: McpBridge metadata: name: default namespace: higress-system spec: registries: # å®šä¹‰ä¸€ä¸ªåä¸º â€œproductionâ€ çš„æœåŠ¡æ¥æº - name: production # æ³¨å†Œä¸­å¿ƒç±»å‹æ˜¯ Nacos 2.xï¼Œæ”¯æŒ gRPC åè®® type: nacos2 # æ³¨å†Œä¸­å¿ƒçš„è®¿é—®åœ°å€ï¼Œå¯ä»¥æ˜¯åŸŸåæˆ–è€…IP domain: 192.xxx.xx.32 # æ³¨å†Œä¸­å¿ƒçš„è®¿é—®ç«¯å£ï¼ŒNacos é»˜è®¤éƒ½æ˜¯ 8848 port: 8848 # Nacos å‘½åç©ºé—´ ID nacosNamespaceId: d8ac64f3-xxxx-xxxx-xxxx-47a814ecf358 # Nacos æœåŠ¡åˆ†ç»„ nacosGroups: - DEFAULT_GROUP # å®šä¹‰ä¸€ä¸ªåä¸º â€œuatâ€ çš„æœåŠ¡æ¥æº - name: uat # æ³¨å†Œä¸­å¿ƒç±»å‹æ˜¯ Nacos 1.xï¼Œåªæ”¯æŒ HTTP åè®® type: nacos # æ³¨å†Œä¸­å¿ƒçš„è®¿é—®åœ°å€ï¼Œå¯ä»¥æ˜¯åŸŸåæˆ–è€…IP domain: 192.xxx.xx.31 # æ³¨å†Œä¸­å¿ƒçš„è®¿é—®ç«¯å£ï¼ŒNacos é»˜è®¤éƒ½æ˜¯ 8848 port: 8848 # Nacos å‘½åç©ºé—´ ID nacosNamespaceId: 98ac6df3-xxxx-xxxx-xxxx-ab98115dfde4 # Nacos æœåŠ¡åˆ†ç»„ nacosGroups: - DEFAULT_GROUP  æˆ‘ä»¬é€šè¿‡ McpBridge èµ„æºé…ç½®äº†ä¸¤ä¸ªæœåŠ¡æ¥æºï¼Œåˆ†åˆ«å–å â€œproductionâ€å’Œâ€œuatâ€ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ Higress å¯¹æ¥ Nacos åŒæ—¶æ”¯æŒ HTTP å’Œ gRPC ä¸¤ç§åè®®ï¼Œå»ºè®®å°† Nacos å‡çº§åˆ° 2.x ç‰ˆæœ¬ï¼Œè¿™æ ·å¯ä»¥åœ¨ä¸Šè¿°é…ç½®çš„ type ä¸­æŒ‡å®š â€œnacos2â€ ä½¿ç”¨ gRPC åè®®ï¼Œä»è€Œæ›´å¿«é€Ÿåœ°æ„ŸçŸ¥åˆ°æœåŠ¡å˜åŒ–ï¼Œå¹¶æ¶ˆè€—æ›´å°‘çš„ Nacos æœåŠ¡ç«¯èµ„æºã€‚ åŸºäº McpBridge ä¸­çš„ registries æ•°ç»„é…ç½®ï¼ŒHigress å¯ä»¥è½»æ¾å¯¹æ¥å¤šä¸ªä¸”ä¸åŒç±»å‹çš„æœåŠ¡æ¥æºï¼ˆNacos/Zookeeper/Eureka/Consul/...ï¼‰ï¼Œè¿™é‡Œå¯¹äº Nacos ç±»å‹çš„æœåŠ¡æ¥æºï¼Œæ”¯æŒé…ç½®å¤šä¸ªä¸åŒå‘½åç©ºé—´ï¼Œä»è€Œå®ç°ä¸åŒå‘½åç©ºé—´çš„å¾®æœåŠ¡å¯ä»¥å…±ç”¨ä¸€ä¸ªç½‘å…³ï¼Œé™ä½è‡ªå»ºå¾®æœåŠ¡ç½‘å…³çš„èµ„æºæˆæœ¬å¼€é”€ã€‚ ","version":null,"tagName":"h3"},{"title":"é…ç½® Ingressâ€‹","type":1,"pageTitle":"Higress + Nacos å¾®æœåŠ¡ç½‘å…³æœ€ä½³å®è·µ","url":"/zh-cn/blog/nacos#é…ç½®-ingress","content":"apiVersion: networking.k8s.io/v1 kind: Ingress metadata: annotations: higress.io/destination: service-provider.DEFAULT-GROUP.d8ac64f3-xxxx-xxxx-xxxx-47a814ecf358.nacos name: demo namespace: default spec: rules: - http: paths: - backend: resource: apiGroup: networking.higress.io kind: McpBridge name: default path: / pathType: Prefix  å’Œå¸¸è§çš„ Ingress åœ¨ backend ä¸­å®šä¹‰ service ä¸åŒï¼Œè¿™é‡ŒåŸºäº Ingress çš„ resource backend å°†ä¸Šé¢å®šä¹‰æœåŠ¡æ¥æºçš„ McpBridge è¿›è¡Œå…³è”ã€‚å¹¶é€šè¿‡æ³¨è§£higress.io/destinationæŒ‡å®šè·¯ç”±æœ€ç»ˆè¦è½¬å‘åˆ°çš„ç›®æ ‡æœåŠ¡ã€‚å¯¹äº Nacos æ¥æºçš„æœåŠ¡ï¼Œè¿™é‡Œçš„ç›®æ ‡æœåŠ¡æ ¼å¼ä¸ºï¼šâ€œæœåŠ¡åç§°.æœåŠ¡åˆ†ç»„.å‘½åç©ºé—´ID.nacosâ€ï¼Œæ³¨æ„è¿™é‡Œéœ€è¦éµå¾ª DNS åŸŸåæ ¼å¼ï¼Œå› æ­¤æœåŠ¡åˆ†ç»„ä¸­çš„ä¸‹åˆ’çº¿'_'è¢«è½¬æ¢æˆäº†æ¨ªæ '-'ã€‚ ","version":null,"tagName":"h3"},{"title":"ä¸°å¯Œçš„å¾®æœåŠ¡ç½‘å…³èƒ½åŠ›â€‹","type":1,"pageTitle":"Higress + Nacos å¾®æœåŠ¡ç½‘å…³æœ€ä½³å®è·µ","url":"/zh-cn/blog/nacos#ä¸°å¯Œçš„å¾®æœåŠ¡ç½‘å…³èƒ½åŠ›","content":"Higress åœ¨å¾®æœåŠ¡å‘ç°çš„åŸºç¡€ä¸Šï¼Œæä¾›äº†å¤šç§å®ç”¨çš„å¾®æœåŠ¡ç½‘å…³èƒ½åŠ›ï¼Œè¿™é‡Œä»¥â€œç°åº¦å‘å¸ƒâ€å’Œâ€œè‡ªå®šä¹‰æ‰©å±•â€è¿›è¡Œä¸¾ä¾‹ï¼Œæ›´å¤šèƒ½åŠ›å¯ä»¥ç‚¹å‡»åŸæ–‡å‚è€ƒ Higress å®˜ç½‘æ–‡æ¡£è¿›è¡Œäº†è§£ã€‚ ç°åº¦å‘å¸ƒâ€‹ Higress å®Œå…¨å…¼å®¹äº† Nginx Ingress çš„é‡‘ä¸é›€ï¼ˆCanaryï¼‰ç›¸å…³æ³¨è§£ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œå¯ä»¥å°†å¸¦æœ‰HTTP Headerä¸ºx-user-id: 100çš„è¯·æ±‚æµé‡è·¯ç”±åˆ°ç°åº¦æœåŠ¡ä¸­ã€‚ apiVersion: networking.k8s.io/v1 kind: Ingress metadata: annotations: higress.io/destination: service-provider.DEFAULT-GROUP.98ac6df3-xxxx-xxxx-xxxx-ab98115dfde4.nacos nginx.ingress.kubernetes.io/canary: 'true' nginx.ingress.kubernetes.io/canary-by-header: x-user-id nginx.ingress.kubernetes.io/canary-by-header-value: '100' name: demo-uat namespace: default spec: rules: - http: paths: - backend: resource: apiGroup: networking.higress.io kind: McpBridge name: default path: / pathType: Prefix  æ‚¨è¿˜å¯ä»¥åŸºäº OpenKruise Rollout è®©ç°åº¦å‘å¸ƒå’ŒæœåŠ¡éƒ¨ç½²è¿‡ç¨‹è”åŠ¨ï¼Œä»è€Œå®ç°æ¸è¿›å¼äº¤ä»˜ï¼Œå…·ä½“å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ã€ŠHigress &amp; Kruise Rollout: æ¸è¿›å¼äº¤ä»˜ä¸ºåº”ç”¨å‘å¸ƒä¿é©¾æŠ¤èˆªã€‹ è‡ªå®šä¹‰æ‰©å±•â€‹ ä½œä¸ºå¾®æœåŠ¡ç½‘å…³ï¼Œéœ€è¦åœ¨å¾®æœåŠ¡æ¶æ„ä¸­æ‰¿æ‹…éƒ¨åˆ†é€šç”¨é€»è¾‘çš„å¤„ç†ï¼Œä¾‹å¦‚è®¤è¯é‰´æƒï¼Œå®‰å…¨é˜²æŠ¤ç­‰ã€‚é€šç”¨çš„é€»è¾‘æ— æ³•æ»¡è¶³å¤šæ ·æ€§çš„ä¸šåŠ¡åœºæ™¯ï¼ŒHigress å¯ä»¥æ”¯æŒå¼€å‘è€…æ·»åŠ è‡ªå®šä¹‰å¤„ç†é€»è¾‘ã€‚ä¸ Spring Cloud Gateway ç­‰ä¼ ç»Ÿå¾®æœåŠ¡ç½‘å…³éœ€è¦å¼€å‘è€…è‡ªå·±åœ¨ Gateway ä»£ç ä¸­åŠ  Filter ä¸åŒï¼ŒHigress æ”¯æŒå¼€å‘è€…ä½¿ç”¨å¤šç§è¯­è¨€ç¼–å†™ Wasm æ’ä»¶ï¼Œå¹¶åŠ¨æ€åŠ è½½ç”Ÿæ•ˆï¼Œæ’ä»¶ç”Ÿæ•ˆè¿‡ç¨‹æ— éœ€é‡å¯ç½‘å…³ï¼Œå˜æ›´æ’ä»¶é€»è¾‘å¯¹æµé‡å®Œå…¨æ— æŸã€‚ ä¸‹ä¾‹æ˜¯ä¸€ä¸ªå±è”½ç‰¹å®šè¯·æ±‚çš„ Wasm æ’ä»¶ï¼Œå½“è¯·æ±‚ url ä¸­å‡ºç° â€œswagger.htmlâ€ æ—¶å°†è¢«ç›´æ¥æ‹’ç»è®¿é—®ï¼Œæ’ä»¶å®ç°ä»£ç å‚è€ƒï¼šhttps://github.com/alibaba/higress/tree/main/plugins/wasm-go/extensions/request-block apiVersion: extensions.higress.io/v1alpha1 kind: WasmPlugin metadata: name: request-block namespace: higress-system spec: defaultConfig: block_urls: - &quot;swagger.html&quot; url: oci://higress-registry.cn-hangzhou.cr.aliyuncs.com/plugins/demo:1.0.0  Wasm æ’ä»¶çš„å¼€å‘&amp;ç¼–è¯‘&amp;é•œåƒæ¨é€æ–¹å¼å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ã€ŠHigress å®æˆ˜ï¼š30 è¡Œä»£ç å†™ä¸€ä¸ª Wasm Goæ’ä»¶ã€‹ ","version":null,"tagName":"h3"},{"title":"å¾®æœåŠ¡ç½‘å…³å‘å±•è¶‹åŠ¿â€‹","type":1,"pageTitle":"Higress + Nacos å¾®æœåŠ¡ç½‘å…³æœ€ä½³å®è·µ","url":"/zh-cn/blog/nacos#å¾®æœåŠ¡ç½‘å…³å‘å±•è¶‹åŠ¿","content":"","version":null,"tagName":"h2"},{"title":"è¶‹åŠ¿ä¸€ï¼šç»Ÿä¸€ API æ ‡å‡†ï¼Œå‘äº‘åŸç”Ÿå¾®æœåŠ¡æ¶æ„æ¼”è¿›â€‹","type":1,"pageTitle":"Higress + Nacos å¾®æœåŠ¡ç½‘å…³æœ€ä½³å®è·µ","url":"/zh-cn/blog/nacos#è¶‹åŠ¿ä¸€ç»Ÿä¸€-api-æ ‡å‡†å‘äº‘åŸç”Ÿå¾®æœåŠ¡æ¶æ„æ¼”è¿›","content":"åŸºäºä¸€å¥— API å¯ä»¥æœ‰ä¸åŒçš„å®ç°ï¼Œæ—¢è®©ç”¨æˆ·ä¸è¢«å…·ä½“å®ç°é”å®šï¼Œåˆæ¡¥æ¥äº†æŠ€æœ¯æ¼”è¿›çš„é¸¿æ²Ÿã€‚API å¯ä»¥è¯´æ˜¯æ•´ä¸ªäº‘åŸç”Ÿæ¶æ„çš„åŸºçŸ³ï¼Œæˆ–è®¸æœ‰ä¸€å¤© K8s ä¼šæ¶ˆå¤±ï¼Œä½†æ˜¯é¢å‘æŠ½è±¡çš„ API æ ‡å‡†å®šä¼šé•¿å­˜ã€‚åœ¨æµé‡ç½‘å…³é¢†åŸŸï¼ŒIngress API å·²ç»æˆä¸ºæ ‡å‡†ã€‚è€Œå¯¹äºå¾®æœåŠ¡ç½‘å…³ç­‰æ›´å¤æ‚çš„ä½¿ç”¨åœºæ™¯ï¼ŒIngress å—é™äºå…¶ç®€å•çš„åè®®å­—æ®µï¼Œéœ€è¦é€šè¿‡ Ingress æ³¨è§£ç­‰æ–¹å¼è¿›è¡Œèƒ½åŠ›æ‰©å±•ï¼Œéš¾ä»¥è¢«æ ‡å‡†åŒ–ã€‚å› æ­¤è¯¸å¦‚ Contourã€Emissaryã€Kongã€APISIX ç­‰éƒ½å®šä¹‰äº†è‡ªå·±çš„ HTTP è·¯ç”±ç­‰ CRDï¼Œç½‘å…³çš„ API å®šä¹‰å¼€å§‹å‘ˆç°ç¢ç‰‡åŒ–ã€‚ è¿™ä¸€èƒŒæ™¯ä¹‹ä¸‹ï¼ŒGateway API åº”è¿è€Œç”Ÿï¼Œå¹¶ä¸”åœ¨è¿‡å»çš„ä¸€å¹´é‡Œä» alpha æ¼”è¿›åˆ°äº† beta é˜¶æ®µã€‚è™½ç„¶ç›®å‰ Gateway API è¿˜æœªå®šç¨¿ï¼Œåè®®ä»ä¼šå‘ç”Ÿå˜åŠ¨ï¼Œä¸å»ºè®®ç”¨äºç”Ÿäº§ï¼Œä½† API ç»Ÿä¸€è¶‹åŠ¿å·²ç»ä¸å¯é˜»æŒ¡ï¼Œåªæ˜¯æ—¶é—´çš„é—®é¢˜ã€‚ä¸‹å›¾æ˜¯ Gateway API çš„ä¸€ä¸ªç”¨ä¾‹åœºæ™¯ï¼Œä¸åŒäº Ingress APIï¼Œå°†é›†ç¾¤è¿ç»´å’Œä¸šåŠ¡è¿ç»´çš„èŒè´£è¿›è¡Œäº†åˆ’åˆ†ï¼Œè¿™æ ·ä¸šåŠ¡å¼€å‘äººå‘˜ä¸å†éœ€è¦å…³å¿ƒç½‘ç«™è¯ä¹¦ç­‰é›†ç¾¤çº§çš„ç»†èŠ‚ï¼Œåªä¸“æ³¨äºä¸šåŠ¡æœ¬èº«çš„ DevOpsï¼Œé›†ç¾¤è¿ç»´ä»»åŠ¡å¯ä»¥äº¤ç»™ SRE äººå‘˜è¿›è¡Œç»Ÿä¸€å¤„ç†ã€‚Higress ç›®å‰é‡‡ç”¨ Ingress æ³¨è§£çš„èƒ½åŠ›æ¥å®ç°èƒ½åŠ›æ‰©å±•ï¼Œå¹¶å…¼å®¹äº† Nginx Ingress å¤§éƒ¨åˆ†å¸¸ç”¨æ³¨è§£ï¼Œä¸”å…·å¤‡å¹³æ»‘è¿ç§»åˆ° Gateway API çš„èƒ½åŠ›ã€‚ Higress ä¸ºä¼ ç»Ÿå¾®æœåŠ¡æ¶æ„ï¼Œæä¾›äº†æ¸è¿›å¼çš„æ–¹å¼ï¼Œå‘åŸºäº K8s çš„äº‘åŸç”Ÿå¾®æœåŠ¡æ¶æ„æ¼”è¿›ï¼šå¯ä»¥é€šè¿‡ Nacos å‘ç°éƒ¨ç½²åœ¨ K8s ä¹‹å¤–çš„æœåŠ¡ï¼Œä»è€Œå®ç°äº†ç½‘å…³åç«¯å¾®æœåŠ¡å¯ä»¥å’Œ K8s è§£è€¦ï¼Œä¸šåŠ¡å›¢é˜Ÿå¯ä»¥å°†å¾®æœåŠ¡é€ä¸ªè¿ç§»è‡³ K8sï¼Œè€Œä¸ç”¨æ‹…å¿ƒç½‘å…³å±‚çš„æµé‡å½±å“ã€‚ ä»ä¼ ç»Ÿå¾®æœåŠ¡ç½‘å…³è¿ç§»åˆ° Higressï¼Œå†æ¸è¿›å¼å®Œæˆæ•´ä¸ªå¾®æœåŠ¡æ¶æ„çš„äº‘åŸç”ŸåŒ–ï¼Œæ˜¯ä¸€ä¸ªæ˜æ™ºçš„é€‰æ‹©ã€‚ ","version":null,"tagName":"h3"},{"title":"è¶‹åŠ¿äºŒï¼šåˆå¹¶å®‰å…¨&æµé‡ç½‘å…³ï¼Œå‘ DevSecOps æ¼”è¿›â€‹","type":1,"pageTitle":"Higress + Nacos å¾®æœåŠ¡ç½‘å…³æœ€ä½³å®è·µ","url":"/zh-cn/blog/nacos#è¶‹åŠ¿äºŒåˆå¹¶å®‰å…¨æµé‡ç½‘å…³å‘-devsecops-æ¼”è¿›","content":"Higress æå‡ºäº†å°†å®‰å…¨ã€æµé‡ã€å¾®æœåŠ¡ç½‘å…³ä¸‰åˆä¸€çš„æ¦‚å¿µï¼Œé¦–å…ˆæ¥çœ‹ä¸€ä¸ªå…¸å‹çš„å¤šå±‚ç½‘å…³æ¶æ„ï¼šåœ¨è¿™ä¸ªæ¶æ„ä¸­ï¼Œç”¨ WAF ç½‘å…³å®ç°å®‰å…¨èƒ½åŠ›ï¼ŒIngress ç½‘å…³å®ç°é›†ç¾¤å…¥å£ç½‘å…³èƒ½åŠ›ï¼ˆé K8s åœºæ™¯æˆ–ä¼šéƒ¨ç½²ä¸€å±‚ Nginxï¼‰ï¼ŒSCGï¼ˆSpring Cloud Gatewayï¼‰ å®ç°å¾®æœåŠ¡ç½‘å…³èƒ½åŠ›ã€‚è¿™æ ·çš„æ¶æ„ä¸‹ï¼Œéœ€è¦å¯¹æ¯ä¸€å±‚ç½‘å…³éƒ½è¿›è¡Œå®¹é‡è¯„ä¼°ï¼Œæ¯ä¸€å±‚ç½‘å…³éƒ½æ˜¯æ½œåœ¨çš„ç“¶é¢ˆç‚¹ï¼Œéƒ½å¯èƒ½éœ€è¦è¿›è¡Œæ‰©å®¹ã€‚è¿™æ ·é€ æˆçš„èµ„æºæˆæœ¬å’Œè¿ç»´äººåŠ›æˆæœ¬éƒ½æ˜¯å·¨å¤§çš„ã€‚å¹¶ä¸”æ¯å¤šä¸€å±‚ç½‘å…³ï¼Œå°±å¤šä¸€å±‚å¯ç”¨æ€§é£é™©ã€‚ä¸€æ—¦å‡ºç°å¯ç”¨æ€§é—®é¢˜ï¼Œå¤šå±‚ç½‘å…³ä¼šå¯¼è‡´é—®é¢˜å®šä½å¤æ‚åº¦æ˜¾è‘—ä¸Šå‡ï¼Œå¯¹åº”çš„å¹³å‡æ•…éšœæ¢å¤æ—¶é—´ï¼ˆMTTRï¼‰å°†å¤§å¹…å¢åŠ ã€‚é‡‡ç”¨ä¸‰åˆä¸€çš„æ¶æ„ä¸­ï¼Œå¯ä»¥æ˜¾è‘—é™ä½æˆæœ¬ï¼Œå¹¶æé«˜ç³»ç»Ÿæ•´ä½“å¯ç”¨æ€§ã€‚åŒæ—¶è¿™ä¹Ÿç¬¦åˆ DevSecOps çš„å¾®æœåŠ¡æ¼”è¿›è¶‹åŠ¿ï¼Œå¾®æœåŠ¡å¼€å‘è€…å¯ä»¥æ›´å¤šåœ°ä»ä¸šåŠ¡æ¥å£è§†è§’å…³æ³¨å®‰å…¨æ€§ï¼Œè€Œä¸æ˜¯é‡‡ç”¨æ‰€æœ‰è·¯ç”±ä¸€åˆ€åˆ‡çš„ WAF é˜²æŠ¤æ¨¡å¼ã€‚ æŠ€æœ¯æ¶æ„æ¼”è¿›çš„èƒŒåæ˜¯ç»„ç»‡æ¶æ„æ¼”è¿›ï¼Œè¿™ä¹Ÿæ˜¯å¾®æœåŠ¡ DevOps ä¸€ç›´åœ¨å¼ºè°ƒçš„ï¼Œè¦å›´ç»•å¼€å‘è€…ä¸ºæ ¸å¿ƒï¼Œä»è€Œæå‡å¾®æœåŠ¡å¼€å‘æ•ˆç‡ã€‚å‘ DevSecOps æ¼”è¿›å¹¶æ²¡æœ‰æ·å¾„ï¼Œä¾ç„¶éœ€è¦å¼€å‘è§’è‰²å’Œè¿ç»´è§’è‰²ä¹‹é—´çš„åŒå‘å¥”èµ´ï¼Œæ‰“ç ´ä¼ ç»Ÿå¼€å‘ä¸è¿ç»´ä¹‹é—´çš„å£å’ï¼Œå½¢æˆä»å¼€å‘ã€éƒ¨ç½²ã€å®‰å…¨è¿è¥è¿™æ ·ä¸€ä¸ªå…¨åŠŸèƒ½åŒ–çš„æ•æ·å›¢é˜Ÿã€‚ é€šè¿‡ Higress å°†ç½‘å…³åˆå¹¶ä½œä¸ºå‘ DevSecOps æ¼”è¿›çš„æŠ“æ‰‹ï¼Œæ˜¯ä¸€ä¸ªæ˜æ™ºçš„é€‰æ‹©ã€‚ ","version":null,"tagName":"h3"},{"title":"å‚ä¸ Higress ç¤¾åŒºâ€‹","type":1,"pageTitle":"Higress + Nacos å¾®æœåŠ¡ç½‘å…³æœ€ä½³å®è·µ","url":"/zh-cn/blog/nacos#å‚ä¸-higress-ç¤¾åŒº","content":"Higress å¼€æºè´¡çŒ®å°ç»„æ­£åœ¨ç«çƒ­æ‹›å‹Ÿè´¡çŒ®è€…ã€‚å¦‚æœæ‚¨æœ‰æ—¶é—´ï¼Œæœ‰çƒ­æƒ…ï¼Œæœ‰æ„æ„¿ï¼Œæ¬¢è¿è”ç³»ç¤¾åŒºåŠ å…¥å¼€æºè´¡çŒ®å°ç»„ï¼Œä¸€èµ·å…±åŒå®Œå–„ Higressï¼Œä¸€èµ·ä¸»å¯¼ä¸‹ä¸€ä»£äº‘åŸç”Ÿç½‘å…³çš„è®¾è®¡å’Œå®ç°ã€‚ ç¤¾åŒºå®˜ç½‘ï¼ˆç‚¹å‡»â€œé˜…è¯»åŸæ–‡â€è·³è½¬ï¼‰: https://higress.ioç¤¾åŒºå¼€å‘è€…ç¾¤ï¼šç¤¾åŒºäº¤æµç¾¤ï¼š ","version":null,"tagName":"h2"},{"title":"é€šè¿‡ Higress Wasm æ’ä»¶ 3 å€æ€§èƒ½å®ç° Spring-cloud-gateway åŠŸèƒ½","type":0,"sectionRef":"#","url":"/zh-cn/blog/plugin-transformer","content":"å¯¼è¯»: æœ¬æ–‡å°†å’Œå¤§å®¶ä¸€åŒå›é¡¾ Spring Cloud Gateway æ˜¯å¦‚ä½•æ»¡è¶³ HTTP è¯·æ±‚/å“åº”è½¬æ¢éœ€æ±‚åœºæ™¯çš„ï¼Œå¹¶ä¸ºå¤§å®¶ä»‹ç»åœ¨è¿™ç§åœºæ™¯ä¸‹ä½¿ç”¨ Higress äº‘åŸç”Ÿç½‘å…³çš„è§£å†³æ–¹æ¡ˆï¼ŒåŒæ—¶è¿˜å¯¹æ¯”äº†ä¸¤è€…çš„æ€§èƒ½å·®å¼‚ã€‚ 1. SCG ä¿®æ”¹è¯·æ±‚/å“åº” åœ¨ Spring Cloud Gateway (ä»¥ä¸‹ç®€ç§°ä¸º SCG) ä¸­ï¼Œå½“æˆ‘ä»¬éœ€è¦å¯¹ HTTP è¯·æ±‚æˆ–å“åº”è¿›è¡Œä¿®æ”¹æ—¶ï¼ŒSCG æä¾›äº†è®¸å¤šå†…ç½®çš„ GatewayFilter æ¥æ»¡è¶³æˆ‘ä»¬å¯¹è¿™ç§åº”ç”¨åœºæ™¯çš„éœ€æ±‚ï¼Œä¾‹å¦‚ AddRequestHeader,AddRequestParameter, DedupeResponseHeader,MapRequestHeader, ModifyRequestBody ç­‰ã€‚ è€ƒè™‘ä»¥ä¸‹ç®€å•ç”¨ä¾‹ï¼š æ·»åŠ è¯·æ±‚å¤´éƒ¨ X-Firstï¼Œå€¼ä»è¯·æ±‚è·¯å¾„ä¸­è·å–ï¼Œä¾‹å¦‚ä» /response-headers?testKey=testValue ä¸­è·å– &quot;response-headers&quot;ï¼›å°†è¯·æ±‚å¤´éƒ¨ X-First çš„å€¼æ˜ å°„ç»™ X-Secondï¼›æ·»åŠ è¯·æ±‚æŸ¥è¯¢å‚æ•° k1=v1ï¼›å‰”é™¤é‡å¤çš„å“åº”å¤´éƒ¨ X-Dedupeã€‚ åœ¨ SCG ä¸­ä½¿ç”¨ GatewayFilter æˆ‘ä»¬å¯ä»¥è¿™æ ·é…ç½®ï¼š # application.yaml: spring: cloud: gateway: routes: - id: test_route uri: lb://httpbin-svc predicates: - Path=/{api}/** filters: - AddRequestHeader=X-First, {api} - MapRequestHeader=X-First, X-Second - AddRequestParameter=k1, v1 - DedupeResponseHeader=X-Dedupe, RETAIN_FIRST ç›¸ä¿¡æ‹¥æœ‰ SCG ä½¿ç”¨ç»éªŒçš„åŒå­¦å¯¹ä¸Šè¿°é…ç½®ä¸€å®šä¸é™Œç”Ÿï¼Œé‚£ä¹ˆæœ¬æ–‡å°†é‡ç‚¹ç»™å‡ºå¦ä¸€ç§èƒ½å¤Ÿæ»¡è¶³ä¸Šè¿°éœ€æ±‚å¹¶ä¸”æ€§èƒ½æ›´åŠ ä¼˜è¶Šçš„è§£å†³æ–¹æ¡ˆâ€”â€”ä½¿ç”¨ Higress äº‘åŸç”Ÿç½‘å…³çš„ Transformer æ’ä»¶ã€‚ 2. Higress æ’ä»¶ä¸ SCG æ€§èƒ½æ¯”è¾ƒ æˆ‘ä»¬åœ¨åŒä¸€ååé‡æ°´å¹³ï¼ˆQPSï¼‰ä¸Šï¼Œå¼€å¯/å…³é—­ Higress Transformer æ’ä»¶ å’Œ SCG ç›¸åº” GatewayFiltersï¼Œç»Ÿè®¡ä¸¤è€…åœ¨ CPU å’Œå†…å­˜èµ„æºä¸Šçš„å¼€é”€ã€‚ ç»è¿‡æµ‹è¯•ï¼Œæˆ‘ä»¬å¾—åˆ°çš„ç»“è®ºæ˜¯ï¼š åœ¨ Higress æœªå¯ç”¨ Transformer æ’ä»¶ï¼ŒSCG æœªå¯ç”¨ GatewayFilters çš„æ¡ä»¶ä¸‹ï¼ŒSCG çš„ CPU, å†…å­˜èµ„æºå¼€é”€åˆ†åˆ«çº¦ä¸º Higressçš„ 3.30, 4.88å€ï¼›åœ¨ Higress å¯ç”¨ Transformer æ’ä»¶ï¼ŒSCG å¯ç”¨ç›¸åº” GatewayFilters çš„æ¡ä»¶ä¸‹ï¼ŒSCG çš„ CPU,å†…å­˜èµ„æºå¼€é”€åˆ†åˆ«çº¦ä¸º Higress çš„ 2.98, 3.19å€ã€‚ å¯è§ Higress Transformer ç›¸æ¯”äº SCG GatewayFilter æœ‰ç€ç›¸å½“ä¸é”™çš„æ€§èƒ½è¡¨ç°ï¼ æ¥ä¸‹æ¥æˆ‘ä»¬å°†è¿›ä¸€æ­¥ä¸ºå¤§å®¶ä»‹ç» Higress äº‘åŸç”Ÿç½‘å…³ä»¥åŠä¸Šè¿°æåˆ°çš„ Higress Transformer æ’ä»¶ã€‚ 3. Higress ç®€ä»‹ Higress æ˜¯åŸºäºé˜¿é‡Œå†…éƒ¨çš„ Envoy Gateway å®è·µæ²‰æ·€ã€ä»¥å¼€æº Istio + Envoy ä¸ºæ ¸å¿ƒæ„å»ºçš„ä¸‹ä¸€ä»£äº‘åŸç”Ÿç½‘å…³ï¼Œå®ç°äº†æµé‡ç½‘å…³+å¾®æœåŠ¡ç½‘å…³+å®‰å…¨ç½‘å…³ä¸‰åˆä¸€çš„é«˜é›†æˆèƒ½åŠ›ï¼Œæ·±åº¦é›†æˆ Dubboã€Nacosã€Sentinel ç­‰å¾®æœåŠ¡æŠ€æœ¯æ ˆï¼Œèƒ½å¤Ÿå¸®åŠ©ç”¨æˆ·æå¤§åœ°é™ä½ç½‘å…³çš„éƒ¨ç½²åŠè¿ç»´æˆæœ¬ä¸”èƒ½åŠ›ä¸æ‰“æŠ˜ï¼›åœ¨æ ‡å‡†ä¸Šå…¨é¢æ”¯æŒ Ingress ä¸ Gateway APIï¼Œç§¯ææ‹¥æŠ±äº‘åŸç”Ÿä¸‹çš„æ ‡å‡† API è§„èŒƒï¼›åŒæ—¶ï¼ŒHigress Controller ä¹Ÿæ”¯æŒ Nginx Ingress å¹³æ»‘è¿ç§»ï¼Œå¸®åŠ©ç”¨æˆ·é›¶æˆæœ¬å¿«é€Ÿè¿ç§»åˆ° Higressã€‚ Higress æä¾›äº†ä¸€å¥— Wasm (WebAssembly) SDKï¼Œä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿè½»æ¾ä½¿ç”¨ C++ï¼ŒGolangï¼ŒRust å¼€å‘ Wasm æ’ä»¶å¢å¼ºç½‘å…³èƒ½åŠ›ã€‚ä¸‹é¢å°†ä¸ºå¤§å®¶ä»‹ç» Higress Transformer æ’ä»¶çš„åŸºæœ¬åŠŸèƒ½ï¼Œæœ€åç®€å•è¯´æ˜ Transformer æ’ä»¶çš„æ ¸å¿ƒä»£ç é€»è¾‘ã€‚ 4. Transformer æ’ä»¶ä»‹ç» Higress Transformer æ’ä»¶å¯ä»¥å¯¹è¯·æ±‚/å“åº”å¤´éƒ¨ã€è¯·æ±‚æŸ¥è¯¢å‚æ•°ã€è¯·æ±‚/å“åº”ä½“å‚æ•°è¿›è¡Œè½¬æ¢ï¼Œæ”¯æŒçš„è½¬æ¢æ“ä½œç±»å‹åŒ…æ‹¬åˆ é™¤ï¼ˆremoveï¼‰ã€é‡å‘½åï¼ˆrenameï¼‰ã€æ›´æ–°ï¼ˆreplaceï¼‰ã€æ·»åŠ ï¼ˆaddï¼‰ã€è¿½åŠ ï¼ˆappendï¼‰ã€æ˜ å°„ï¼ˆmapï¼‰å’Œå»é‡ï¼ˆdedupeï¼‰ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬å¤ç°æœ€å¼€å§‹æåˆ°çš„ SCG GatewayFilter ç®€å•ç”¨ä¾‹ï¼Œæ¥æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨è¯¥æ’ä»¶ï¼ˆä»¥ä¸‹ä½¿ç”¨ Higress æ§åˆ¶å°å¯ä»¥å¾ˆæ–¹ä¾¿åœ°éƒ¨ç½²æ’ä»¶ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ K8s YAML Manifests çš„æ–¹å¼ï¼‰ï¼š é¦–å…ˆæ ¹æ®å®˜æ–¹æ–‡æ¡£ å¿«é€Ÿå®‰è£… Higressï¼Œç»“æœå¦‚ä¸‹ï¼š $ kubectl -n higress-system get deploy NAME READY UP-TO-DATE AVAILABLE AGE higress-console 1/1 1 1 1d higress-console-grafana 1/1 1 1 1d higress-console-prometheus 1/1 1 1 1d higress-controller 1/1 1 1 1d higress-gateway 1/1 1 1 1d é€šè¿‡ Higress æ§åˆ¶å°æ·»åŠ åŸŸåï¼ˆfoo.bar.comï¼‰ã€è·¯ç”±é…ç½®ï¼ˆfooï¼‰ï¼Œå°†æµé‡è½¬å‘è‡³åç«¯çš„ httpbin æœåŠ¡ï¼š ä¸º foo è·¯ç”±æ·»åŠ  Transformer æ’ä»¶ï¼ˆå½“å‰æœªæ¨é€æ’ä»¶è‡³å®˜æ–¹é•œåƒä»“åº“ï¼Œå¯ä»¥å…ˆä½¿ç”¨ docker.io/weixinx/transformer:v0.1.0ï¼Œæˆ–åˆ°ä»£ç ä»“åº“è‡ªè¡Œæ„å»ºï¼‰ï¼š æ³¨ï¼šä¸ºäº†èƒ½å¤ŸåŒæ—¶å®Œæˆè¯·æ±‚å’Œå“åº”è½¬æ¢çš„éœ€æ±‚ï¼Œæˆ‘ä»¬éœ€è¦ä¸º foo è·¯ç”±å†æ·»åŠ ä¸€ä¸ª Transformer æ’ä»¶ï¼Œå‘½åä¸º transformer-respï¼Œç”¨äºå¤„ç†å“åº”æ–¹å‘ã€‚ æ·»åŠ  Transformer é…ç½®å¹¶å¼€å¯è¯¥æ’ä»¶ï¼š æ·»åŠ è¯·æ±‚å¤´éƒ¨ X-Firstï¼Œå€¼ä»è¯·æ±‚è·¯å¾„ä¸­è·å–ï¼Œä¾‹å¦‚ä» /response-headers?testKey=testValue ä¸­è·å– &quot;response-headers&quot;ï¼›å°†è¯·æ±‚å¤´éƒ¨ X-First çš„å€¼æ˜ å°„ç»™ X-Secondï¼›æ·»åŠ è¯·æ±‚æŸ¥è¯¢å‚æ•° k1=v1ï¼›å‰”é™¤é‡å¤çš„å“åº”å¤´éƒ¨ X-Dedupeã€‚ # transformer: type: request # æŒ‡å®š Transformer ç±»å‹ rules: # æŒ‡å®šè½¬æ¢è§„åˆ™ - operate: add # æŒ‡å®šè½¬æ¢æ“ä½œç±»å‹ headers: # æŒ‡å®šå¤´éƒ¨è½¬æ¢è§„åˆ™ - key: X-First value: $1 # æ­£åˆ™è¡¨è¾¾å¼æ•è·ç»„ $1ï¼Œæ”¯æŒ RE2 è¯­æ³• path_pattern: ^\\/(\\w+)[\\?]{0,1}.*$ querys: # æŒ‡å®šæŸ¥è¯¢å‚æ•°è½¬æ¢è§„åˆ™ - key: k1 value: v1 - operate: map headers: - key: X-First value: X-Second --- # transformer-resp: type: response rules: - operate: dedupe headers: - key: X-Dedupe value: RETAIN_FIRST å‘é€è¯·æ±‚è¿›è¡Œæµ‹è¯•ï¼š # éªŒè¯è¯·æ±‚æ–¹å‘è½¬æ¢ $ curl -v -H &quot;host: foo.bar.com&quot; &quot;127.0.0.1/get&quot; ... &gt; &lt; HTTP/1.1 200 OK ... &lt; { &quot;args&quot;: { # æ·»åŠ äº†æŸ¥è¯¢å‚æ•° k1=v1 &quot;k1&quot;: &quot;v1&quot; }, &quot;headers&quot;: { ... &quot;X-First&quot;: &quot;get&quot;, # æ·»åŠ äº†è¯·æ±‚å¤´éƒ¨ X-Firstï¼Œå€¼ &quot;get&quot; æ¥è‡ªè¯·æ±‚è·¯å¾„ &quot;X-Second&quot;: &quot;get&quot; # æ˜ å°„äº†è¯·æ±‚å¤´éƒ¨ X-Second }, ... # æ·»åŠ äº†æŸ¥è¯¢å‚æ•° k1=v1 &quot;url&quot;: &quot;http://foo.bar.com/get?k1=v1&quot; } # éªŒè¯å“åº”æ–¹å‘è½¬æ¢ $ curl -v -H &quot;host: foo.bar.com&quot; \\ &quot;127.0.0.1/response-headers?X-Dedupe=1&amp;X-Dedupe=2&amp;X-Dedupe=3&quot; ... &gt; &lt; HTTP/1.1 200 OK &lt; x-dedupe: 1 # ä¿ç•™äº†å“åº”å¤´éƒ¨ X-Dedupe çš„ç¬¬ä¸€ä¸ªå€¼ ... &lt; { ... # é€šè¿‡æŸ¥è¯¢å‚æ•°ä¼ ç»™ httpbin çš„è‡ªå®šä¹‰å“åº”å¤´éƒ¨ &quot;X-Dedupe&quot;: [ &quot;1&quot;, &quot;2&quot;, &quot;3&quot; ], ... } â—ï¸éœ€è¦æ³¨æ„çš„æ˜¯ï¼š ä¸ä¸Šè¿°ä¾‹å­ç›¸åŒï¼Œè‹¥æœ‰åŒæ—¶å¤„ç†è¯·æ±‚å’Œå“åº”è½¬æ¢çš„éœ€æ±‚ï¼Œåˆ™éœ€è¦ä¸ºç›¸åº”è·¯ç”±æ·»åŠ ä¸¤ä¸ª Transformer æ’ä»¶ï¼Œåˆ†åˆ«å¤„ç†è¯·æ±‚æ–¹å‘å’Œå“åº”æ–¹å‘ï¼ˆæ­£åœ¨ä¼˜åŒ–ï¼‰ï¼›è¯·æ±‚ä½“æ”¯æŒçš„ Content-Type æœ‰ï¼šapplication/json, application/x-www-form-urlencoded, multipart/form-dataï¼›è€Œå“åº”ä½“ä»…æ”¯æŒ application/jsonï¼›æ›´å¤šè¯´æ˜è¯¦è§æ’ä»¶æ–‡æ¡£ã€‚ 5. Transformer é€»è¾‘ æœ¬èŠ‚å°†ç®€å•è¯´æ˜ Higress Transformer æ’ä»¶çš„æ ¸å¿ƒä»£ç é€»è¾‘ï¼Œå¸Œæœ›å¯ä»¥ä¸ºæœ‰å…´è¶£ä¼˜åŒ–è¯¥æ’ä»¶æˆ–è¿›è¡ŒäºŒæ¬¡å¼€å‘çš„åŒå­¦æä¾›ä¸€äº›å¸®åŠ©ã€‚ é¦–å…ˆè¯¥æ’ä»¶ä»£ç ä½äºHigress ä»“åº“çš„ plugins/wasm-go/extensions/transformer ç›®å½•ä¸‹ï¼Œä½¿ç”¨ Higress æä¾›çš„ Wasm SDK è¿›è¡Œå¼€å‘ï¼ˆå…³äºå¦‚ä½•å¼€å‘ Wasm æ’ä»¶è¯¦è§å®˜æ–¹æ–‡æ¡£ï¼‰ã€‚ æ’ä»¶çš„é…ç½®æ¨¡å‹ TransformerConfigï¼š # æ¨¡å‹ä»¥æ’ä»¶é…ç½®çš„å½¢å¼æš´éœ²ç»™ç”¨æˆ· type TransformerConfig struct { typ string # Transformer ç±»å‹ï¼Œ[request, response] rules []TransformRule # è½¬æ¢è§„åˆ™ trans Transformer # Transformer å®ä¾‹ï¼Œä¸å¯¹ç”¨æˆ·æš´éœ²é…ç½®ï¼Œç”¨äºå®é™…çš„è½¬æ¢æ“ä½œ } type TransformRule struct { operate string # è½¬æ¢æ“ä½œç±»å‹ headers []Param # header å‚æ•° querys []Param # query å‚æ•° body []Param # body å‚æ•° } type Param struct { key string # è¡¨ç¤ºå­—æ®µçš„ key value string # è¡¨ç¤ºå­—æ®µçš„ value æˆ– key (map) æˆ– strategy (dedupe) valueType string # ä¸º application/json body æŒ‡å®š value çš„æ•°æ®ç±»å‹ hostPattern string # host æ­£åˆ™åŒ¹é…æ¨¡å¼ pathPattern string # path æ­£åˆ™åŒ¹é…æ¨¡å¼ } å…¶ä¸­ Transformer ä½œä¸ºæ¥å£åˆ†åˆ«æœ‰è¯·æ±‚å’Œå“åº”ä¸¤ä¸ªå®ç°ï¼ˆrequestTransformer, responseTransformerï¼‰ï¼Œä¸»è¦å®ç°äº† 3 ä¸ªæ¥å£æ–¹æ³• TransformHeaders,TransformerQuerys å’Œ TransformBodyï¼š type Transformer interface { TransformHeaders(host, path string, hs map[string][]string) error TransformQuerys(host, path string, qs map[string][]string) error TransformBody(host, path string, body interface{}) error ... } var _ Transformer = (*requestTransformer)(nil) var _ Transformer = (*responseTransformer)(nil) ç”±äºå¤´éƒ¨ï¼ˆHeadersï¼‰å’ŒæŸ¥è¯¢å‚æ•°ï¼ˆQuerysï¼‰éƒ½æ˜¯ä»¥ key-value çš„å½¢å¼å­˜åœ¨ï¼Œå› æ­¤é€šè¿‡ kvHandler å¯¹ä¸¤è€…é‡‡ç”¨ç»Ÿä¸€çš„å¤„ç†é€»è¾‘ï¼›è€Œ Body ç”±äºè¯·æ±‚ã€å“åº”æ”¯æŒä¸åŒçš„ Content-Typeï¼Œå› æ­¤åˆ†åˆ«é€šè¿‡ requestBodyHandler (kvHandler, jsonHandler ç»„åˆ)å’Œ responseBodyHandler (jsonHandler) è¿›è¡Œå¤„ç†ã€‚ç»¼ä¸Šï¼Œåœ¨ä¿®æ”¹è¯¥æ’ä»¶é€»è¾‘æ—¶ï¼Œä¸»è¦å¯¹ kvHandler å’Œ jsonHandler è¿›è¡Œä¿®æ”¹å³å¯ï¼Œå…¶ä¸­ jsonHandler ä¾èµ– GJSON å’Œ SJSON å·¥å…·åº“ã€‚ ç›®å‰ handler ä¸­çš„è½¬æ¢é¡ºåºæ˜¯è¢«ç¡¬ç¼–ç çš„ï¼ˆremove -&gt; rename -&gt; replace -&gt; add -&gt; append -&gt; map -&gt; dedupeï¼‰ï¼Œæˆ‘ä»¬å¯¹æ­¤æœ‰ä¼˜åŒ–çš„æ‰“ç®—ï¼Œä¹Ÿæ¬¢è¿æ„Ÿå…´è¶£çš„åŒå­¦å‚ä¸è¿›æ¥ ~ 6. æ€»ç»“ æœ¬æ–‡å¸¦å¤§å®¶äº†è§£äº† Higress Transformer æ’ä»¶ï¼Œå¹¶ä¸ Spring Cloud Gateway è¿›è¡Œäº†æ€§èƒ½æ¯”è¾ƒï¼Œåœ¨æ–‡ç« çš„æœ€åè¿˜è¯´æ˜äº†è¯¥æ’ä»¶çš„æ ¸å¿ƒä»£ç é€»è¾‘ï¼Œå¸Œæœ›èƒ½å¤Ÿä¸ºå¤§å®¶ä» Spring Cloud Gateway è¿ç§»è‡³ Higress æä¾›å¸®åŠ©ï¼ å¦‚æœæ‚¨è§‰å¾— Higress å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œæ¬¢è¿å‰å¾€ Github: Higress ä¸ºæˆ‘ä»¬ starâ­ï¸ ä¸€ä¸‹ï¼æœŸå¾…ä¸æ‚¨åœ¨ Higress ç¤¾åŒºç›¸é‡ ~","keywords":"Higress Wasm","version":null},{"title":"æ•™ç¨‹ï¼šå¦‚ä½•åœ¨æœ¬åœ°å¼€å‘å’Œè°ƒè¯• Higress Pilot","type":0,"sectionRef":"#","url":"/zh-cn/blog/pilot-debug","content":"","keywords":"higress pilot","version":null},{"title":"èƒŒæ™¯è¯´æ˜â€‹","type":1,"pageTitle":"æ•™ç¨‹ï¼šå¦‚ä½•åœ¨æœ¬åœ°å¼€å‘å’Œè°ƒè¯• Higress Pilot","url":"/zh-cn/blog/pilot-debug#èƒŒæ™¯è¯´æ˜","content":"å‰é¢ SJC åœ¨è¿™ç¯‡åšå®¢ä¸­ä»‹ç»äº†å¦‚ä½•åœ¨æœ¬åœ°å¼€å‘å’Œè°ƒè¯• Higress Controllerã€‚è€Œ Higress æ§åˆ¶é¢é™¤äº† Controller ä¹‹å¤–è¿˜æœ‰ä¸€ä¸ªç»„ä»¶ï¼Œé‚£å°±æ˜¯ Pilotã€‚æœ¬æ–‡å°±å°†ä»‹ç»å¦‚ä½•åœ¨æœ¬åœ°å¼€å‘å’Œè°ƒè¯• Higress Pilotã€‚ ","version":null,"tagName":"h2"},{"title":"ç¯å¢ƒå‡†å¤‡â€‹","type":1,"pageTitle":"æ•™ç¨‹ï¼šå¦‚ä½•åœ¨æœ¬åœ°å¼€å‘å’Œè°ƒè¯• Higress Pilot","url":"/zh-cn/blog/pilot-debug#ç¯å¢ƒå‡†å¤‡","content":"","version":null,"tagName":"h2"},{"title":"æ­¥éª¤ä¸€ï¼šå…‹éš†ä»£ç ä»“åº“â€‹","type":1,"pageTitle":"æ•™ç¨‹ï¼šå¦‚ä½•åœ¨æœ¬åœ°å¼€å‘å’Œè°ƒè¯• Higress Pilot","url":"/zh-cn/blog/pilot-debug#æ­¥éª¤ä¸€å…‹éš†ä»£ç ä»“åº“","content":"Pilot çš„ä»£ç ç›®å‰æ˜¯ä»¥ Istio ä¸Šæ¸¸ä»“åº“ submodule åŠ è¡¥ä¸æ–‡ä»¶çš„å½¢å¼å­˜åœ¨äº Higress çš„ä¸»ä»“åº“ä¸­çš„ï¼Œæ‰€ä»¥ç›´æ¥å…‹éš† Higress çš„ä»£ç ä¸»ä»“åº“ https://github.com/alibaba/higress å³å¯ã€‚ ","version":null,"tagName":"h3"},{"title":"æ­¥éª¤äºŒï¼šå‡†å¤‡é¡¹ç›®ä»£ç â€‹","type":1,"pageTitle":"æ•™ç¨‹ï¼šå¦‚ä½•åœ¨æœ¬åœ°å¼€å‘å’Œè°ƒè¯• Higress Pilot","url":"/zh-cn/blog/pilot-debug#æ­¥éª¤äºŒå‡†å¤‡é¡¹ç›®ä»£ç ","content":"Higress Pilot æ˜¯åœ¨ Istio Pilot çš„åŸºç¡€ä¸Šï¼ŒåŸºäº Higress è‡ªèº«çš„åŠŸèƒ½éœ€æ±‚è¿›è¡Œäº†äºŒæ¬¡å¼€å‘è€Œæ„å»ºè€Œæˆçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™é‡Œéœ€è¦ä¸‹è½½ä¸Šæ¸¸ä»£ç ä»“åº“å¹¶åº”ç”¨ç°æœ‰çš„è¡¥ä¸ã€‚æˆ‘ä»¬åªéœ€è¦æ‰§è¡Œä¸‹é¢è¿™æ¡å‘½ä»¤ï¼š make prebuild  Windows ç”¨æˆ·æ³¨æ„äº†ï¼ å¦‚æœä½ æ˜¯åœ¨ Windows ä¸Šè¿›è¡Œå¼€å‘ï¼Œå¹¶ä¸”æ‰§è¡Œ make å‘½ä»¤æœ‰å›°éš¾çš„è¯ï¼Œä¸è¦æ€•ï¼Œæˆ‘ä»¬ä¹Ÿæœ‰åŠæ³•ã€‚å› ä¸ºæ•´ä¸ª prebuild å…¶å®ä¹Ÿåªåšäº†ä¸¤ä»¶äº‹æƒ…ã€‚ ç¬¬ä¸€ä»¶äº‹æƒ…æ˜¯åˆå§‹åŒ–æ‰€æœ‰çš„ä¸Šæ¸¸å­æ¨¡å—ï¼Œåªéœ€è¦æ‰§è¡Œè¿™æ ·ä¸€æ¡å‘½ä»¤ï¼š git submodule update --init  ç¬¬äºŒä»¶äº‹æƒ…æ˜¯åˆå§‹åŒ–å¼€å‘ç›®å½•ã€‚è¿™ä¸€æ­¥éª¤æ‰§è¡Œçš„å°±æ˜¯ tools/hack/prebuild.shã€‚å¤§å®¶å¯ä»¥ç›´æ¥åœ¨ Cygwin æˆ–è€… Git Bash ç­‰ç±» Linux ç»ˆç«¯ä¸‹æ‰§è¡Œè¿™ä¸ªè„šæœ¬æ–‡ä»¶ã€‚ å¦‚æœåœ¨åº”ç”¨è¡¥ä¸çš„æ—¶å€™å‡ºç°äº†å’Œæ¢è¡Œç¬¦æœ‰å…³çš„æŠ¥é”™ï¼Œé‚£ä¹ˆå¯ä»¥ç¼–è¾‘ prebuild.shï¼Œç»™ä¸¤å¤„ patch å‘½ä»¤å¢åŠ  --binary å‚æ•°å³å¯ã€‚  ","version":null,"tagName":"h3"},{"title":"æ­¥éª¤ä¸‰ï¼šå®‰è£… Higressâ€‹","type":1,"pageTitle":"æ•™ç¨‹ï¼šå¦‚ä½•åœ¨æœ¬åœ°å¼€å‘å’Œè°ƒè¯• Higress Pilot","url":"/zh-cn/blog/pilot-debug#æ­¥éª¤ä¸‰å®‰è£…-higress","content":"æ—¢ç„¶åªæ˜¯è°ƒè¯• pilotï¼Œé‚£ä¹ˆå…¶ä»–ç»„ä»¶è¿˜æ˜¯è¦å¤ç”¨ç°æœ‰ Higress é›†ç¾¤é‡Œçš„ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨æœ¬åœ°é…ç½®ä¸€ä¸ª Higress é›†ç¾¤ã€‚å¤§å®¶å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡æ¡£ï¼šé“¾æ¥ã€‚ ","version":null,"tagName":"h3"},{"title":"å¼€å‘ä¸è°ƒè¯•â€‹","type":1,"pageTitle":"æ•™ç¨‹ï¼šå¦‚ä½•åœ¨æœ¬åœ°å¼€å‘å’Œè°ƒè¯• Higress Pilot","url":"/zh-cn/blog/pilot-debug#å¼€å‘ä¸è°ƒè¯•","content":"","version":null,"tagName":"h2"},{"title":"æœ¬åœ°å¼€å‘â€‹","type":1,"pageTitle":"æ•™ç¨‹ï¼šå¦‚ä½•åœ¨æœ¬åœ°å¼€å‘å’Œè°ƒè¯• Higress Pilot","url":"/zh-cn/blog/pilot-debug#æœ¬åœ°å¼€å‘","content":"æœ¬åœ°å¼€å‘æ¨èä½¿ç”¨ IDE JetBrains GoLandã€‚æˆ‘ä»¬ç›´æ¥åœ¨ GoLand ä¸­æ‰“å¼€ external/istio ç›®å½•ï¼Œæ­£å¸¸è¿›è¡Œå¼€å‘å³å¯ã€‚  ","version":null,"tagName":"h3"},{"title":"è°ƒè¯•è¿è¡Œâ€‹","type":1,"pageTitle":"æ•™ç¨‹ï¼šå¦‚ä½•åœ¨æœ¬åœ°å¼€å‘å’Œè°ƒè¯• Higress Pilot","url":"/zh-cn/blog/pilot-debug#è°ƒè¯•è¿è¡Œ","content":"ç¯å¢ƒå‡†å¤‡ ç¬¬ä¸€æ­¥ï¼šæå–é…ç½®æ–‡ä»¶ åœ¨æœ¬åœ°ä»»æ„ä¸€ä¸ªä½ç½®åˆ›å»ºä¸€ä¸ªç›®å½•ï¼Œç„¶ååœ¨è¯¥ç›®å½•ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œç”Ÿæˆé…ç½®æ–‡ä»¶ï¼š kubectl get configmap higress-config -n higress-system -o=jsonpath='{.data.mesh}' &gt; ./mesh kubectl get configmap higress-config -n higress-system -o=jsonpath='{.data.meshNetworks}' &gt; ./meshNetworks  ç¬¬äºŒæ­¥ï¼šè½¬å‘ controller ç«¯å£ æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå°† controller çš„ xDS æœåŠ¡ç«¯å£è½¬å‘è‡³æœ¬åœ°ï¼š kubectl port-forward deployment/higress-controller -n higress-system 15051  ä»£ç è°ƒæ•´ å¦‚æœè¦è°ƒè¯•ä¸ TLS è¯ä¹¦ä¸‹å‘çš„ç›¸å…³åŠŸèƒ½ï¼Œåˆ™éœ€è¦åœ¨ pilot/pkg/xds/ads.go çš„ initConnection å‡½æ•°ä¸­æ·»åŠ ä»£ç ï¼Œç»•è¿‡è¯ä¹¦ä¸‹å‘è¿‡ç¨‹çš„è®¤è¯è¦æ±‚ã€‚ä»£ç ä¿®æ”¹æ–¹æ³•è¯·å‚è€ƒä¸‹æ–¹ç¤ºä¾‹ã€‚  if features.EnableXDSIdentityCheck &amp;&amp; con.Identities != nil { // TODO: allow locking down, rejecting unauthenticated requests. id, err := checkConnectionIdentity(con) if err != nil { log.Warnf(&quot;Unauthorized XDS: %v with identity %v: %v&quot;, con.PeerAddr, con.Identities, err) return status.Newf(codes.PermissionDenied, &quot;authorization failed: %v&quot;, err).Err() } con.proxy.VerifiedIdentity = id } // Start - Auth bypassing for local debug con.proxy.VerifiedIdentity = &amp;spiffe.Identity{ TrustDomain: &quot;cluster.local&quot;, Namespace: &quot;higress-system&quot;, ServiceAccount: &quot;higress-gateway&quot;, } // End - Auth bypassing for local debug  è¿è¡Œé…ç½® é…ç½®ä¸€ï¼šç¯å¢ƒå˜é‡ CUSTOM_CA_CERT_NAME=higress-ca-root-cert; JWT_POLICY=none; PILOT_ENABLE_CROSS_CLUSTER_WORKLOAD_ENTRY=false; PILOT_ENABLE_GATEWAY_API=true; PILOT_ENABLE_GATEWAY_API_DEPLOYMENT_CONTROLLER=false; PILOT_ENABLE_GATEWAY_API_STATUS=false; PILOT_ENABLE_METADATA_EXCHANGE=false; PILOT_SCOPE_GATEWAY_TO_NAMESPACE=true; POD_NAME=higress-controller; POD_NAMESPACE=higress-system; REVISION=default; VALIDATION_ENABLED=false  é…ç½®äºŒï¼šå‘½ä»¤è¡Œå‚æ•° discovery --monitoringAddr=:15014 --log_output_level=default:info --domain cluster.local --keepaliveMaxServerConnectionAge 30m --meshConfig ${configDir}/mesh --networksConfig ${configDir}/meshNetworks  æ³¨æ„ï¼šå…¶ä¸­çš„ ${configDir} ä¸ºåœ¨ç¯å¢ƒå‡†å¤‡ä¸€æ­¥åˆ›å»ºçš„é…ç½®ç›®å½•ã€‚ å¯åŠ¨è°ƒè¯• åœ¨å®Œæˆä»¥ä¸Šå·¥ä½œä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¯åŠ¨ Pilot äº†ã€‚å®ƒçš„ main å‡½æ•°å®šä¹‰åœ¨ pilot/cmd/pilot-discovery/main.go æ–‡ä»¶ä¸­ã€‚  ç½‘å…³å¯¹æ¥ å¦‚æœæƒ³è¦éªŒè¯ pilot ä¸‹å‘é…ç½®åˆ° gateway çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹ gateway çš„é…ç½®ï¼Œä½¿ä¹‹è¿æ¥åˆ°å¤„äºå¼€å‘çŠ¶æ€çš„ pilot å®ä¾‹ã€‚ ç¬¬ä¸€æ­¥ï¼šä¿®æ”¹ higress-config ConfigMap kubectl edit configmap higress-config -n higress-system  ä¿®æ”¹ä¸¤ä¸ªåœ°æ–¹ï¼š å°† discoveryAddress ä¿®æ”¹ä¸ºæœ¬æœºIP:15010ï¼› æ³¨æ„ï¼šæ­¤å¤„çš„æœ¬æœº IP ä¸å¯ä»¥ä½¿ç”¨ 127.0.0.1 ç­‰ loopback IPã€‚éœ€è¦ä½¿ç”¨æœ¬æœºæœ‰çº¿æˆ–æ— çº¿ç½‘å¡çš„ IPã€‚åœ¨ discoveryAddress ä¸‹é¢æ·»åŠ ä¸€ä¸ªæ–°å±æ€§ï¼šcontrolPlaneAuthPolicy: NONEã€‚ ä¿®æ”¹åé…ç½®ç¤ºä¾‹ï¼š  ç¬¬äºŒæ­¥ï¼šé‡å¯ Higress Gateway kubectl rollout restart deployment higress-gateway -n higress-system  é‡å¯åæˆ‘ä»¬å¯ä»¥åœ¨ pilot çš„æ§åˆ¶å°è¾“å‡ºä¸­çœ‹åˆ° gateway è¿æ¥ä¸Šæ¥çš„å¹¶è·å–é…ç½®çš„æ—¥å¿—ã€‚  ","version":null,"tagName":"h3"},{"title":"æ€»ç»“â€‹","type":1,"pageTitle":"æ•™ç¨‹ï¼šå¦‚ä½•åœ¨æœ¬åœ°å¼€å‘å’Œè°ƒè¯• Higress Pilot","url":"/zh-cn/blog/pilot-debug#æ€»ç»“","content":"æœ¬åœ°è°ƒè¯•å’Œæµ‹è¯•æ˜¯å¼€å‘è¿‡ç¨‹ä¸­å¿…ä¸å¯å°‘çš„ç¯èŠ‚ã€‚é€šè¿‡æœ¬æ–‡çš„ä»‹ç»ï¼Œå¸Œæœ›å¤§å®¶å¯ä»¥æ›´åŠ æ–¹ä¾¿çš„å¯¹ pilot è¿›è¡Œæœ¬åœ°è°ƒè¯•å’Œe2eæµ‹è¯•ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚åŒæ—¶ä¹Ÿå¸Œæœ›èƒ½å¤Ÿæœ‰è¶Šæ¥è¶Šå¤šçš„å¼€å‘è€…åŠ å…¥åˆ° Higress ç ”å‘é˜Ÿä¼ä¸­ï¼Œä¸ºäº§å“çš„å‡çº§è¿­ä»£è´¡çŒ®ä¸€ä»½åŠ›é‡ã€‚ æ¬¢è¿å‚ä¸é˜¿é‡Œå¼€æºè´¡çŒ®ğŸ‘ ","version":null,"tagName":"h2"},{"title":"é€šä¹‰åƒé—®2.5â€œå®¢ä¸²â€ChatGPT4ï¼Œä½ åˆ†çš„æ¸…å—","type":0,"sectionRef":"#","url":"/zh-cn/blog/qwen-or-chatgpt","content":"","keywords":"Higress Wasm AI Qwen ChatGPT NextChat","version":null},{"title":"å¼•å­â€‹","type":1,"pageTitle":"é€šä¹‰åƒé—®2.5â€œå®¢ä¸²â€ChatGPT4ï¼Œä½ åˆ†çš„æ¸…å—","url":"/zh-cn/blog/qwen-or-chatgpt#å¼•å­","content":"OpenAI å‘å¸ƒäº†æœ€æ–°çš„ GPT-4o æ¨¡å‹ï¼Œé€šä¹‰åƒé—®ä¹Ÿåœ¨å‰ä¸ä¹…åˆšå‘å¸ƒé€šä¹‰åƒé—® 2.5ï¼Œå·²ç»å’Œ GPT-4-Turbo ä¸åˆ†ä¼¯ä»²ï¼š  æ—¢ç„¶ç›®å‰è¿˜æ²¡æœ‰å’Œ GPT-4o æ–‡æœ¬ç”Ÿæˆèƒ½åŠ›çš„å¯¹æ¯”æ•°æ®ï¼Œå°±è®©æˆ‘ä»¬æ¥å’Œå¤§æ¨¡å‹ä¸€èµ·åšä¸ªæ¸¸æˆæµ‹è¯•ä¸€ä¸‹ï¼š æˆ‘ä»¬è®©é€šä¹‰åƒé—® 2.5 æ‰®æ¼” GPT4ï¼Œæ¥å’ŒçœŸæ­£çš„ GPT4 è¿›è¡Œé—®ç­” PKï¼Œè¯»è€…ä¸å¦¨æ¥çŒœä¸€çŒœè°æ˜¯é€šä¹‰åƒé—®ã€‚ ä¸¤åé€‰æ‰‹çš„å¤´åƒå’Œæ˜µç§°åˆ†åˆ«æ˜¯ï¼š ğŸŒ ï¼šæˆ‘æ˜¯GPT4 ğŸŒš ï¼šå¦‚å‡åŒ…æ¢GPT4 è°æ˜¯é€šä¹‰åƒé—®ï¼Œè°æ˜¯ChatGPTï¼Œç­”æ¡ˆå°†åœ¨æ–‡æœ«æ­æ™“ã€‚ ","version":null,"tagName":"h2"},{"title":"Round 1â€‹","type":1,"pageTitle":"é€šä¹‰åƒé—®2.5â€œå®¢ä¸²â€ChatGPT4ï¼Œä½ åˆ†çš„æ¸…å—","url":"/zh-cn/blog/qwen-or-chatgpt#round-1","content":"ç¬¬ä¸€è½®ç”±â€œæˆ‘æ˜¯GPT4â€é€‰æ‰‹æé—®ï¼Œç”±â€œå¦‚å‡åŒ…æ¢GPT4â€é€‰æ‰‹ä½œç­” ğŸŒï¼šè§’è‰²è®¾å®š+ç¬¬ä¸€ä¸ªé—®é¢˜  ğŸŒš ï¼šè§’è‰²è®¾å®š+ç¬¬ä¸€ä¸ªå›ç­”   ğŸŒ ï¼šç¬¬äºŒä¸ªé—®é¢˜  ğŸŒš ï¼šç¬¬äºŒä¸ªå›ç­”  ğŸŒ ï¼šç¬¬ä¸‰ä¸ªé—®é¢˜  ğŸŒš ï¼šç¬¬ä¸‰ä¸ªå›ç­”  ","version":null,"tagName":"h2"},{"title":"Round 2â€‹","type":1,"pageTitle":"é€šä¹‰åƒé—®2.5â€œå®¢ä¸²â€ChatGPT4ï¼Œä½ åˆ†çš„æ¸…å—","url":"/zh-cn/blog/qwen-or-chatgpt#round-2","content":"ç¬¬äºŒè½®ç”±â€œå¦‚å‡åŒ…æ¢GPT4â€é€‰æ‰‹æé—®ï¼Œç”±â€œæˆ‘æ˜¯GPT4â€é€‰æ‰‹ä½œç­” ğŸŒš ï¼šè§’è‰²è®¾å®š+ç¬¬ä¸€ä¸ªé—®é¢˜  ğŸŒ ï¼šè§’è‰²è®¾å®š+ç¬¬ä¸€ä¸ªå›ç­”   ğŸŒš ï¼šç¬¬äºŒä¸ªé—®é¢˜  ğŸŒ ï¼šç¬¬äºŒä¸ªå›ç­”  ğŸŒš ï¼šç¬¬ä¸‰ä¸ªé—®é¢˜  ğŸŒ ï¼šç¬¬ä¸‰ä¸ªå›ç­”  ğŸŒš çš„å›ç­”æ›´ç®€çŸ­ï¼Œæ›´ç¬¦åˆè®¾å®šçš„è¦æ±‚ï¼Œä¹Ÿæ˜¯å› ä¸º ğŸŒ çš„æé—®æ ¹æ®ç»™å®šçš„è¦æ±‚æ›´èšç„¦ï¼Œç›¸æ¯”ä¸‹ ğŸŒš çš„é—®é¢˜æ›´å‘æ•£ï¼Œä¸”éƒ½åŒ…å«å­é—®é¢˜ï¼Œæ¯”è¾ƒéš¾ç”¨ä¸€ä¸¤å¥è¯æ¥ä½œç­”ã€‚æ•´ä½“æ¥è¯´ç¡®å®ä¸åˆ†ä¼¯ä»²ã€‚ ä¸è¿‡ï¼Œèªæ˜çš„ä½ ï¼Œå¯èƒ½å·²ç»æœ‰äº†ç­”æ¡ˆã€‚å¦‚æœæ€¥äºéªŒè¯ï¼Œå¯ä»¥ç›´æ¥åˆ’åˆ°æ–‡æœ«æŸ¥çœ‹ã€‚å¦‚æœä½ å¯¹ä¸Šé¢é€šä¹‰åƒé—®æ˜¯å¦‚ä½•æ‰®æ¼” ChatGPTï¼Œä»¥åŠèŠå¤©æ¡†å·¥å…·æ„Ÿåˆ°å¥½å¥‡ï¼Œä¸å¦¨å…ˆæ¥çœ‹æˆ‘ä»¬æ˜¯å¦‚ä½•æ­å»ºè¿™ä¸ªæµ‹è¯•åœºæ™¯çš„ã€‚ ","version":null,"tagName":"h2"},{"title":"æµ‹è¯•åœºæ™¯ä»‹ç»â€‹","type":1,"pageTitle":"é€šä¹‰åƒé—®2.5â€œå®¢ä¸²â€ChatGPT4ï¼Œä½ åˆ†çš„æ¸…å—","url":"/zh-cn/blog/qwen-or-chatgpt#æµ‹è¯•åœºæ™¯ä»‹ç»","content":"æˆ‘ä»¬ä½¿ç”¨äº†ä¸¤ä¸ªå¼€æºè½¯ä»¶å·¥å…·æ¥æ­å»ºï¼šNextChat å’Œ Higressã€‚ NextChat (ChatGPT Next Web) æ˜¯ä¸€ä¸ªå¯ä»¥ç§æœ‰åŒ–éƒ¨ç½²çš„å¼€æº ChatGPT ç½‘é¡µåº”ç”¨ï¼Œç›®å‰æ”¯æŒå¯¹æ¥ OpenAIã€Azure OpenAIã€Google Gemini Pro å’Œ Anthropic Claude è¿™äº› LLM æœåŠ¡æä¾›å•†ã€‚ Higress æ˜¯é˜¿é‡Œäº‘å¼€æºçš„é«˜é›†æˆã€æ˜“ä½¿ç”¨ã€æ˜“æ‰©å±•ã€çƒ­æ›´æ–°çš„äº‘åŸç”ŸAPIç½‘å…³ï¼Œéµå¾ªå¼€æº Ingress/Gateway API æ ‡å‡†ï¼Œæä¾›æµé‡è°ƒåº¦ã€æœåŠ¡æ²»ç†ã€å®‰å…¨é˜²æŠ¤ä¸‰åˆä¸€çš„ç½‘å…³èƒ½åŠ›ã€‚ æˆ‘ä»¬ä½¿ç”¨ NextChat æ¥æ­å»ºå‰ç«¯ï¼Œå¹¶ä½¿ç”¨ Higress å°†é€šä¹‰åƒé—®çš„åº”ç­”è½¬æ¢ä¸º OpenAI åè®®è¿”å›ç»™ NextChatã€‚ ","version":null,"tagName":"h2"},{"title":"å…·ä½“æ­å»ºæ­¥éª¤ï¼šâ€‹","type":1,"pageTitle":"é€šä¹‰åƒé—®2.5â€œå®¢ä¸²â€ChatGPT4ï¼Œä½ åˆ†çš„æ¸…å—","url":"/zh-cn/blog/qwen-or-chatgpt#å…·ä½“æ­å»ºæ­¥éª¤","content":"ç¬¬ä¸€æ­¥ï¼šå¯åŠ¨å®¹å™¨â€‹ å®Œæ•´çš„ docker compose é…ç½®è´´åœ¨ Higress ç¤¾åŒºçš„è¿™ä¸ª issue ä¸­ã€‚ æ³¨æ„ï¼š Higress å®¹å™¨ç¯å¢ƒå˜é‡ä¸­çš„ YOUR_DASHSCOPE_API_KEY éœ€è¦æ›¿æ¢ä¸ºä½ è‡ªå·±çš„é€šä¹‰åƒé—®çš„ API Keyã€‚ docker compose -p higress-ai up -d  ç¬¬äºŒæ­¥ï¼šåœ¨æµè§ˆå™¨é‡Œè®¿é—® http://localhost:3000/ï¼Œæ‰“å¼€ NextChat é¡µé¢ï¼›â€‹  ç¬¬ä¸‰æ­¥ï¼šç‚¹å‡»å¯¹è¯è¾“å…¥æ¡†å·¥å…·æ æœ€å³ä¾§çš„æ¨¡å‹è®¾ç½®æŒ‰é’®ï¼Œåˆ‡æ¢æ¨¡å‹â€‹ å› ä¸º Higress çš„ AI Proxy æ’ä»¶ï¼ˆå¯ä»¥è®¿é—® http://localhost:8001 ç™»å½• Higress çš„æ§åˆ¶å°æŸ¥çœ‹æ’ä»¶é…ç½®ï¼‰é…ç½®äº† gpt-4o åˆ° qwen-max ï¼ˆå³é€šä¹‰åƒé—® 2.5ï¼‰çš„æ¨¡å‹æ˜ å°„ï¼Œæ‰€ä»¥å®é™…ä¸Šè¿™é‡Œæä¾›çš„æ¨¡å‹æœåŠ¡æ˜¯ qwen-max  å®Œæˆï¼ç°åœ¨ä½ å°±å¯ä»¥ä¸ AI è¿›è¡Œå¯¹è¯äº†ã€‚â€‹ å¯ä»¥çœ‹åˆ° Higress å®ç°äº†æµå¼çš„æ•ˆæœï¼Œè¿™ä¸ä»…åŸºäº Higress åº•å±‚å¯¹ SSE ç­‰æµå¼åè®®çš„è‰¯å¥½æ”¯æŒï¼Œä¹Ÿä¾èµ– Higress çš„ Wasm æ’ä»¶æ‰©å±•æœºåˆ¶å¯ä»¥å®ç°é€šä¹‰åƒé—®åè®®åˆ° OpenAI åè®®çš„æµå¼è½¬æ¢  ","version":null,"tagName":"h3"},{"title":"Higress AI ç½‘å…³ä»‹ç»â€‹","type":1,"pageTitle":"é€šä¹‰åƒé—®2.5â€œå®¢ä¸²â€ChatGPT4ï¼Œä½ åˆ†çš„æ¸…å—","url":"/zh-cn/blog/qwen-or-chatgpt#higress-ai-ç½‘å…³ä»‹ç»","content":"éšç€ LLM æŠ€æœ¯è“¬å‹ƒå‘å±•ï¼ŒAI Web åº”ç”¨åˆ›æ–°å¦‚ç«å¦‚è¼ï¼Œå¯¹äºæ„å»ºä¸€æ¬¾ Web åº”ç”¨æ¥è¯´ï¼Œç½‘å…³æ˜¯å¿…é¡»çš„ã€‚è€Œ AI Web åº”ç”¨æµé‡æœ‰ä»¥ä¸‹ç‰¹å¾ï¼Œå’Œå¯¹ AI ç½‘å…³çš„éœ€æ±‚ï¼š é•¿è¿æ¥ï¼šç”± AI Web åº”ç”¨å¸¸è§çš„ Websocket å’Œ SSE åè®®å†³å®šï¼Œé•¿è¿æ¥çš„æ¯”ä¾‹å¾ˆé«˜ï¼Œè¦æ±‚ç½‘å…³æ›´æ–°é…ç½®æ“ä½œå¯¹é•¿è¿æ¥æ— å½±å“ï¼Œä¸å½±å“ä¸šåŠ¡é«˜å»¶æ—¶ï¼šLLM æ¨ç†çš„å“åº”å»¶æ—¶æ¯”æ™®é€š Web åº”ç”¨è¦é«˜å‡ºå¾ˆå¤šï¼Œä½¿å¾— AI Web åº”ç”¨é¢å‘ CC æ”»å‡»å¾ˆè„†å¼±ï¼Œå®¹æ˜“è¢«æ”»å‡»é•¿æ—¶é—´ç»´æŒä½å¤§é‡é•¿è¿æ¥ï¼Œæ¶ˆè€—å¤§é‡è®¡ç®—å’Œå­˜å‚¨èµ„æºå¤§å¸¦å®½ï¼šç»“åˆ LLM ä¸Šä¸‹æ–‡æ¥å›ä¼ è¾“ï¼Œä»¥åŠé«˜å»¶æ—¶çš„ç‰¹æ€§ï¼ŒAI Web åº”ç”¨å¯¹å¸¦å®½çš„æ¶ˆè€—è¿œè¶…æ™®é€šåº”ç”¨ï¼Œç½‘å…³æˆ–åç«¯å¦‚æœæ²¡æœ‰å®ç°è¾ƒå¥½çš„æµå¼å¤„ç†èƒ½åŠ›ï¼Œå®¹æ˜“å¯¼è‡´å†…å­˜å¿«é€Ÿä¸Šæ¶¨ï¼Œç»§è€Œè§¦å‘ OOM Higress å¯ä»¥å¾ˆå¥½åœ°è§£å†³è¿™äº›ç—›ç‚¹ï¼š é•¿è¿æ¥ï¼šä¸åŒäº Nginx å˜æ›´é…ç½®éœ€è¦ Reloadï¼Œå¯¼è‡´è¿æ¥æ–­å¼€ï¼ŒHigress åŸºäº Envoy å®ç°äº†è¿æ¥æ— æŸçš„çœŸæ­£é…ç½®çƒ­æ›´æ–°é«˜å»¶æ—¶ï¼šHigress åŸºäºå®‰å…¨ç½‘å…³èƒ½åŠ›å¯ä»¥æä¾› CC é˜²æŠ¤èƒ½åŠ›ï¼Œå¹¶é¢å‘ AI åœºæ™¯ï¼Œé™¤äº† QPSï¼Œè¿˜å¯ä»¥æ‰©å±•é’ˆå¯¹ Token ç”Ÿæˆçš„é™æµé˜²æŠ¤å¤§å¸¦å®½ï¼šHigress æ”¯æŒå®Œå…¨æµå¼è½¬å‘ï¼Œåœ¨ AI Web åº”ç”¨åœºæ™¯ä¸‹ï¼Œæ‰€éœ€çš„å†…å­˜å ç”¨æä½ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥å¼€å‘ Wasm æ’ä»¶å¯¹è¯·æ±‚å’Œå“åº”è¿›è¡Œè‡ªå®šä¹‰é€»è¾‘çš„æµå¼å¤„ç† ä»ä¸Šé¢çš„æµ‹è¯•ç¯å¢ƒæ­å»ºæµç¨‹æ¥çœ‹ï¼ŒHigress AI ä»£ç†æ’ä»¶å¯ä»¥å¾ˆæ–¹ä¾¿çš„è®© AI å¯¹è¯åº”ç”¨ç›´æ¥å¯¹æ¥é€šä¹‰åƒé—®ç­‰æ¥å£å¥‘çº¦ä¸åŒçš„å¤§æ¨¡å‹æœåŠ¡ã€‚é™¤äº†é€šä¹‰åƒé—®å’Œ ChatGPT ä¹‹å¤–ï¼Œè¿™ä¸ªæ’ä»¶è¿˜æ”¯æŒ Azure OpenAI å’Œæœˆä¹‹æš—é¢ï¼ˆMoonshotï¼‰ç­‰å¤§æ¨¡å‹æœåŠ¡æä¾›å•†ï¼Œå¹¶ä¸”æ”¯æŒé…ç½®ä¸€ä¸ªå¤–éƒ¨æ–‡ä»¶åœ°å€ä½œä¸ºèŠå¤©ä¸Šä¸‹æ–‡ï¼Œå¯ä»¥ç”¨æ¥å¿«é€Ÿæ­å»ºä¸€ä¸ªä¸ªäºº AI åŠ©ç†æœåŠ¡ã€‚ æ•´ä¸ªæ’ä»¶ä½¿ç”¨ Go è¯­è¨€è¿›è¡Œå¼€å‘ï¼Œä»£ç å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°ï¼šhttps://github.com/alibaba/higress/tree/main/plugins/wasm-go/extensions/ai-proxy å¯¹äºæµå¼ç›¸åº”çš„å¤„ç†æ–¹æ³•ï¼Œå¤§å®¶å¯ä»¥å‚è€ƒè¿™æ®µä»£ç ï¼š // è¿™ä¸ª handler å‡½æ•°ä¼šé‡å…¥ã€‚åœ¨æ”¶åˆ°å“åº” body çš„æµå¼åˆ†å—åï¼Œæ¯æ¬¡è°ƒç”¨æ­¤å‡½æ•°ä¼šä¼ å…¥ä¸€ä¸ªåˆ†å—ï¼ˆchunkï¼‰ã€‚isLastChunk æ ‡è¯†æ˜¯å¦æ˜¯æœ€åä¸€ä¸ªåˆ†å—ã€‚æ–¹æ³•å¤„ç†å®Œéœ€è¦è¿”å›ä¿®æ”¹åçš„åˆ†å—ã€‚ func onStreamingResponseBody(ctx wrapper.HttpContext, pluginConfig config.PluginConfig, chunk []byte, isLastChunk bool, log wrapper.Log) []byte { activeProvider := pluginConfig.GetProvider() if activeProvider == nil { log.Debugf(&quot;[onStreamingResponseBody] no active provider, skip processing&quot;) return chunk } log.Debugf(&quot;[onStreamingResponseBody] provider=%s&quot;, activeProvider.GetProviderType()) log.Debugf(&quot;isLastChunk=%v chunk: %s&quot;, isLastChunk, string(chunk)) if handler, ok := activeProvider.(provider.StreamingResponseBodyHandler); ok { apiName := ctx.GetContext(ctxKeyApiName).(provider.ApiName) modifiedChunk, err := handler.OnStreamingResponseBody(ctx, apiName, chunk, isLastChunk, log) if err == nil &amp;&amp; modifiedChunk != nil { return modifiedChunk } return chunk } return chunk }  æœ‰å…´è¶£å‚ä¸ Higress ç¤¾åŒºè´¡çŒ®ï¼Œå®ç°æ›´å¤šå¤§æ¨¡å‹ API çš„é€‚é…ï¼Œå¯ä»¥åˆ°è¿™ä¸ª issue ä¸‹è®¤é¢†ä»»åŠ¡ï¼š https://github.com/alibaba/higress/issues/940 ä¹Ÿæ¬¢è¿å‚ä¸ NextChat ç¤¾åŒºè´¡çŒ®ï¼Œå‚ä¸åˆ° 3.0 ç‰ˆæœ¬çš„å»ºè®¾ä¸­ï¼š https://github.com/ChatGPTNextWeb/ChatGPT-Next-Web/issues/4622 æœ‰ä»»ä½•ä½¿ç”¨é—®é¢˜ï¼Œä¹Ÿæ¬¢è¿åˆ°ç¤¾åŒºæ issueï¼Œä¹Ÿå¯ä»¥è¿›å¾®ä¿¡æˆ–é’‰é’‰ç¾¤äº¤æµï¼š  æ­¤å¤–ï¼Œç”±ä¸­å›½ç§‘å­¦é™¢è½¯ä»¶ç ”ç©¶æ‰€â€œå¼€æºè½¯ä»¶ä¾›åº”é“¾ç‚¹äº®è®¡åˆ’â€å‘èµ·å¹¶é•¿æœŸæ”¯æŒçš„æš‘æœŸå¼€æºæ´»åŠ¨â€œå¼€æºä¹‹å¤â€æ­£åœ¨è¿›è¡Œä¸­ã€‚Higress ä¹Ÿæœ‰ä¸¤ä¸ªä¸ AI ç½‘å…³ç›¸å…³çš„é¡¹ç›®å‚ä¸å…¶ä¸­ï¼Œåˆ†åˆ«æ˜¯â€œåŸºäºå‘é‡ç›¸ä¼¼åº¦å®ç°LLMç»“æœå¬å›çš„WASMæ’ä»¶â€å’Œâ€œåŸºäºAIç½‘å…³å®ç°AIæ¨¡å‹çš„è½»é‡åŒ–éƒ¨ç½²â€ã€‚æ¬¢è¿å„ä½åœ¨æ ¡åŒå­¦ç§¯ææŠ¥åå‚ä¸ã€‚ è¯¦æƒ…å¯æŸ¥çœ‹å¼€æºä¹‹å¤çš„ Higress ç¤¾åŒºé¡µé¢ã€‚ ","version":null,"tagName":"h2"},{"title":"ç­”æ¡ˆæ­æ™“â€‹","type":1,"pageTitle":"é€šä¹‰åƒé—®2.5â€œå®¢ä¸²â€ChatGPT4ï¼Œä½ åˆ†çš„æ¸…å—","url":"/zh-cn/blog/qwen-or-chatgpt#ç­”æ¡ˆæ­æ™“","content":"æœ€åï¼Œæˆ‘ä»¬æ¥æ­æ™“å‰é¢é—®é¢˜çš„ç­”æ¡ˆã€‚ä¸çŸ¥é“å„ä½çŒœå¯¹äº†å—ï¼Ÿ  ","version":null,"tagName":"h2"},{"title":"higress-coreæºç åˆ†æ","type":0,"sectionRef":"#","url":"/zh-cn/blog/higress-code","content":"","keywords":"higress","version":null},{"title":"å¼•è¨€â€‹","type":1,"pageTitle":"higress-coreæºç åˆ†æ","url":"/zh-cn/blog/higress-code#å¼•è¨€","content":"åœ¨å¼€æºç¤¾åŒºä¸­ï¼Œæºç åˆ†ææ˜¯æ·±å…¥ç†è§£é¡¹ç›®å†…éƒ¨æœºåˆ¶çš„å…³é”®æ­¥éª¤ã€‚é€šè¿‡ä»”ç»†ç ”ç©¶é¡¹ç›®çš„æºä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥æ­ç¤ºèƒŒåçš„è®¾è®¡åŸç†ã€ç®—æ³•å’Œå·¥ä½œæµç¨‹ã€‚è¿™ä¸ä»…æœ‰åŠ©äºæé«˜æˆ‘ä»¬çš„ç¼–ç¨‹æŠ€èƒ½ï¼Œè¿˜å¯ä»¥ä¸ºå¼€å‘è€…ç¤¾åŒºæä¾›å®è´µçš„å­¦ä¹ èµ„æºã€‚ æœ¬æ–‡å°†èšç„¦äºåˆ†æHigressçš„æºç ï¼Œè¯¥é¡¹ç›®åœ¨å¼€æºç•Œå¤‡å—ç©ç›®ã€‚é€šè¿‡æµè§ˆé˜…è¯»å…¶ä»£ç ï¼Œæˆ‘ä»¬å°†åˆæ­¥å±•ç°å…¶æ ¸å¿ƒç‰¹æ€§ã€æ¶æ„è®¾è®¡å’Œå®ç°ç»†èŠ‚ã€‚å¸Œæœ›å„ä½ç”¨æˆ·ä»¥åŠå¼€å‘è€…åœ¨æœ¬æ–‡ä¸­èƒ½å¤Ÿæ‰¾åˆ°æœ‰ä»·å€¼çš„è§è§£ã€‚ ","version":null,"tagName":"h2"},{"title":"å…³äºHigressâ€‹","type":1,"pageTitle":"higress-coreæºç åˆ†æ","url":"/zh-cn/blog/higress-code#å…³äºhigress","content":"Higressæ˜¯åŸºäºé˜¿é‡Œå†…éƒ¨çš„Envoy Gatewayå®è·µæ²‰æ·€ã€ä»¥å¼€æºIstio + Envoyä¸ºæ ¸å¿ƒæ„å»ºçš„ä¸‹ä¸€ä»£äº‘åŸç”Ÿç½‘å…³ï¼Œå®ç°äº†æµé‡ç½‘å…³ + å¾®æœåŠ¡ç½‘å…³ + å®‰å…¨ç½‘å…³ä¸‰åˆä¸€çš„é«˜é›†æˆèƒ½åŠ›ï¼Œæ·±åº¦é›†æˆDubboã€Nacosã€Sentinelç­‰å¾®æœåŠ¡æŠ€æœ¯æ ˆï¼Œèƒ½å¤Ÿå¸®åŠ©ç”¨æˆ·æå¤§çš„é™ä½ç½‘å…³çš„éƒ¨ç½²åŠè¿ç»´æˆæœ¬ä¸”èƒ½åŠ›ä¸æ‰“æŠ˜ï¼›åœ¨æ ‡å‡†ä¸Šå…¨é¢æ”¯æŒIngressä¸Gateway APIï¼Œç§¯ææ‹¥æŠ±äº‘åŸç”Ÿä¸‹çš„æ ‡å‡†APIè§„èŒƒï¼›åŒæ—¶ï¼ŒHigress Controllerä¹Ÿæ”¯æŒNginx Ingresså¹³æ»‘è¿ç§»ï¼Œå¸®åŠ©ç”¨æˆ·é›¶æˆæœ¬å¿«é€Ÿè¿ç§»åˆ°Higressã€‚ ","version":null,"tagName":"h2"},{"title":"ä»£ç ç›®å½•è¯´æ˜â€‹","type":1,"pageTitle":"higress-coreæºç åˆ†æ","url":"/zh-cn/blog/higress-code#ä»£ç ç›®å½•è¯´æ˜","content":"cmd: å‘½ä»¤è¡Œå‚æ•°è§£æç­‰å¤„ç†ä»£ç pkg/ingress: Ingress èµ„æºè½¬æ¢ä¸º Istio èµ„æºç­‰ç›¸å…³ä»£ç pkg/bootstrap: åŒ…æ‹¬å¯åŠ¨ gRPC/xDS/HTTP server ç­‰çš„ä»£ç registry: å®ç°å¯¹æ¥å¤šç§æ³¨å†Œä¸­å¿ƒè¿›è¡ŒæœåŠ¡å‘ç°çš„ä»£ç envoy: ä¾èµ–çš„ envoy å®˜æ–¹ä»“åº“ commitï¼Œä»¥åŠå¯¹åº”çš„è¡¥ä¸ä»£ç istio: ä¾èµ–çš„ istio å®˜æ–¹ä»“åº“ commitï¼Œä»¥åŠå¯¹åº”çš„è¡¥ä¸ä»£ç plugins: Higress æ’ä»¶ sdkï¼Œä»¥åŠå®˜æ–¹å†…ç½®æ’ä»¶ä»£ç script: ç¼–è¯‘ç›¸å…³è„šæœ¬docker: docker é•œåƒæ„å»ºç›¸å…³è„šæœ¬ æœ¬æ–‡ä¸»è¦å›´ç»•ç€higress-coreç»„ä»¶çš„æºç ï¼Œç ”ç©¶higress-coreè‡ªå¯åŠ¨ä»¥æ¥åšäº†å“ªäº›äº‹æƒ…ã€‚higress-coreçš„ä»£ç ä¸»è¦ä½äºpkgç›®å½•ä¸‹ã€‚ ","version":null,"tagName":"h2"},{"title":"higress-coreæºç æ•´ä½“åˆ†æâ€‹","type":1,"pageTitle":"higress-coreæºç åˆ†æ","url":"/zh-cn/blog/higress-code#higress-coreæºç æ•´ä½“åˆ†æ","content":"","version":null,"tagName":"h2"},{"title":"å¯åŠ¨å…¥å£ï¼špkg/cmd/server.goâ€‹","type":1,"pageTitle":"higress-coreæºç åˆ†æ","url":"/zh-cn/blog/higress-code#å¯åŠ¨å…¥å£pkgcmdservergo","content":"åœ¨è¯¥æ–‡ä»¶ä¸‹ï¼Œä¸»è¦è¿›è¡Œäº†å‘½ä»¤å‚æ•°çš„è§£æï¼Œå¹¶è°ƒç”¨NewServeræ¥åˆ›å»ºä¸€ä¸ªServerå®ä¾‹ï¼Œè°ƒç”¨è¯¥å®ä¾‹çš„Startæ–¹æ³•æ¥å¯åŠ¨å®ä¾‹Serverï¼Œè°ƒç”¨waitForMonitorSignalæ–¹æ³•æ¥ç›‘å¬è¿›ç¨‹çš„é€€å‡ºã€‚ æ˜¾ç„¶è¿™é‡Œæœ‰ä¸¤ä¸ªå¾ˆé‡è¦çš„æ–¹æ³•å‡½æ•°ï¼šNewServerå’ŒStartï¼Œæ¥ä¸‹æ¥é’ˆå¯¹è¿™ä¸¤ä¸ªå‡½æ•°è¿›è¡Œå…·ä½“åˆ†æã€‚ ","version":null,"tagName":"h3"},{"title":"åˆ›å»ºå®ä¾‹ï¼šNewServerâ€‹","type":1,"pageTitle":"higress-coreæºç åˆ†æ","url":"/zh-cn/blog/higress-code#åˆ›å»ºå®ä¾‹newserver","content":"åˆå§‹åŒ–Pilotçš„ç¯å¢ƒ APImodel.Environmentâ€‹ model.Environmentä¸ºPilot ä¸­çš„æ ¸å¿ƒç¯å¢ƒå¯¹è±¡ï¼Œé›†æˆäº†è®¸å¤šä¸åŒçš„ç»„ä»¶ï¼ŒåŒ…æ‹¬æœåŠ¡å‘ç°ã€é…ç½®å­˜å‚¨ã€ç½‘ç»œè§‚å¯Ÿç­‰ï¼Œä»¥æä¾›ä¸€ä¸ªå®Œæ•´çš„ç¯å¢ƒ APIã€‚ e := &amp;model.Environment{ PushContext: model.NewPushContext(), DomainSuffix: constants.DefaultKubernetesDomain, MCPMode: true, }  ä¸ºmodel.Environmentè®¾ç½®Ledgerâ€‹ e.SetLedger(buildLedger(args.RegistryOptions))  Ledger æ˜¯ä¸€ä¸ªè¡¨ç¤ºç»è¿‡ä¿®æ”¹çš„ map çš„æ¥å£ã€‚è¿™ä¸ª map å…·æœ‰ä¸‰ä¸ªç‹¬ç‰¹çš„ç‰¹å¾ï¼š æ¯ä¸ª map çš„å”¯ä¸€çŠ¶æ€éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„å“ˆå¸Œå€¼ã€‚map çš„å…ˆå‰çŠ¶æ€åœ¨å›ºå®šçš„æ—¶é—´å†…è¢«ä¿ç•™ã€‚ç»™å®šå…ˆå‰çš„å“ˆå¸Œå€¼ï¼Œæˆ‘ä»¬å¯ä»¥ä» map ä¸­æ£€ç´¢å…ˆå‰çš„çŠ¶æ€ï¼ˆå¦‚æœä»ç„¶è¢«ä¿ç•™ï¼‰ã€‚ Ledgeræä¾›äº†ä¸ªæ¥å£æ¥è·å–ä¹‹å‰ç‰ˆæœ¬çš„Valueï¼Œæ¥å£è¯¦æƒ…å¦‚ä¸‹ï¼š // GetPreviousValue executes a get against a previous version of the ledger, using that version's root hash. GetPreviousValue(previousRootHash, key string) (result string, err error)  ä¸ºmodel.Environmentè®¾ç½®æœåŠ¡å‘ç°çš„æ¥å£ServiceDiscoveryï¼Œç”¨äºåˆ—ä¸¾æœåŠ¡å’Œå®ä¾‹ã€‚â€‹ ac := aggregate.NewController(aggregate.Options{ MeshHolder: e, }) e.ServiceDiscovery = ac  åˆå§‹åŒ–Serverå®ä¾‹â€‹ s := &amp;Server{ ServerArgs: args, httpMux: http.NewServeMux(), environment: e, readinessProbes: make(map[string]readinessProbe), server: server.New(), } s.environment.Watcher = mesh.NewFixedWatcher(&amp;v1alpha1.MeshConfig{}) s.environment.Init()  è¿™é‡Œè¯´æ˜ä¸€ä¸‹Serverç»“æ„ä½“çš„å„ä¸ªå­—æ®µçš„å«ä¹‰ï¼š type Server struct { *ServerArgs // Serverå‚æ•°é…ç½® environment *model.Environment // Pilotç¯å¢ƒé…ç½® kubeClient higresskube.Client // ä¸ Kubernetes é›†æˆçš„å®¢æˆ·ç«¯ configController model.ConfigStoreCache // é…ç½®å­˜å‚¨æ§åˆ¶å™¨ configStores []model.ConfigStoreCache // å¤šä¸ªé…ç½®å­˜å‚¨çš„ç¼“å­˜ httpServer *http.Server // HTTP è¯·æ±‚å¤„ç†å™¨ httpMux *http.ServeMux // HTTP è¯·æ±‚å¤šè·¯å¤ç”¨å™¨ grpcServer *grpc.Server // grpcæœåŠ¡ xdsServer *xds.DiscoveryServer // xdsæœåŠ¡ server server.Instance // Pilot Serverå®ä¾‹é…ç½® readinessProbes map[string]readinessProbe // serverå†…éƒ¨æœåŠ¡è®°å½•è¡¨ï¼Œè®°å½•æœåŠ¡æ˜¯å¦å‡†å¤‡å¥½ }  åœ¨è¿™é‡Œï¼Œserver.Instanceç»´æŠ¤äº†ä¸€ä¸ªchanå˜é‡components chan Componentï¼ŒComponentåˆ™å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°æ–¹æ³•æ¨¡æ¿ã€‚å½“æˆ‘ä»¬è°ƒç”¨Instanceçš„RunComponent(t Component)æ–¹æ³•ï¼Œåˆ™ä¼šå°†å˜é‡tå‘é€ç»™componentsç®¡é“ï¼Œè€Œæˆ‘ä»¬è°ƒç”¨Instanceçš„Start(stop &lt;-chan struct{}) erroræ–¹æ³•ï¼Œåˆ™ä¼šä»componentsç®¡é“å»æ¥æ”¶Componentå¯¹è±¡ï¼Œå¹¶æ‰§è¡Œè¯¥å¯¹è±¡çš„å‡½æ•°æ–¹æ³•ã€‚ type Component func(stop &lt;-chan struct{}) error  åˆ›å»ºåˆå§‹å¯åŠ¨å‡½æ•°åˆ—è¡¨â€‹ initFuncList := []func() error{ s.initKubeClient, s.initXdsServer, s.initHttpServer, s.initConfigController, s.initRegistryEventHandlers, s.initAuthenticators, }  initKubeClientå‡½æ•° é¦–å…ˆåˆ¤æ–­kubeClientæ˜¯å¦ä¸ºç©ºï¼Œä¸ä¸ºç©ºè¿›è¡Œä¸‹ä¸€æ­¥ï¼› è°ƒç”¨istiokube.DefaultRestConfigæ–¹æ³•ï¼Œåˆ›å»ºä¸€ä¸ªå…·æœ‰ RESTful é£æ ¼çš„Kubernetes Configï¼› ä»¥Kubernetes Configä¸ºå…¥å‚ï¼Œè°ƒç”¨istiokube.NewClientConfigForRestConfigæ–¹æ³•åˆ›å»ºä¸€ä¸ªå…·æœ‰ RESTful é£æ ¼çš„Kubernetes Client Configï¼› è°ƒç”¨higresså®šä¹‰çš„NewClientæ–¹æ³•ï¼Œé›†æˆ Istio å®¢æˆ·ç«¯ã€Higress å®¢æˆ·ç«¯å’Œå¯èƒ½çš„ Kingress å®¢æˆ·ç«¯ï¼Œå¹¶ä¸ºæ¯ä¸ªå®¢æˆ·ç«¯è®¾ç½®äº†ç›¸åº”çš„ SharedInformerFactoryã€‚ initXdsServerå‡½æ•° è°ƒç”¨pliot xdsçš„NewDiscoveryServeræ–¹æ³•ï¼Œåˆ›å»ºä¸€ä¸ªxdsServerå®ä¾‹ï¼Œå¹¶åˆå§‹åŒ–ä¸€äº›èµ„æºã€‚ s.xdsServer = xds.NewDiscoveryServer(s.environment, nil, PodName, PodNamespace, s.RegistryOptions.KubeOptions.ClusterAliases) s.xdsServer.McpGenerators[gvk.WasmPlugin.String()] = &amp;mcp.WasmpluginGenerator{Server: s.xdsServer} s.xdsServer.McpGenerators[gvk.DestinationRule.String()] = &amp;mcp.DestinationRuleGenerator{Server: s.xdsServer} s.xdsServer.McpGenerators[gvk.EnvoyFilter.String()] = &amp;mcp.EnvoyFilterGenerator{Server: s.xdsServer} s.xdsServer.McpGenerators[gvk.Gateway.String()] = &amp;mcp.GatewayGenerator{Server: s.xdsServer} s.xdsServer.McpGenerators[gvk.VirtualService.String()] = &amp;mcp.VirtualServiceGenerator{Server: s.xdsServer} s.xdsServer.McpGenerators[gvk.ServiceEntry.String()] = &amp;mcp.ServiceEntryGenerator{Server: s.xdsServer} s.xdsServer.ProxyNeedsPush = func(proxy *model.Proxy, req *model.PushRequest) bool { return true } å°†xdsServerçš„Startæ–¹æ³•æ³¨å†Œç»™pilot server instanceï¼Œå¹¶è°ƒç”¨higress serverçš„initGrpcServeråˆå§‹åŒ–å‡½æ•°ï¼Œå°†xdsæœåŠ¡æ³¨å†Œåœ¨grpcæœåŠ¡ä¸Šï¼Œä½¿å¾—å¯ä»¥é€šè¿‡grpcåè®®ç«¯å£è¿›è¡Œxdsåè®®çš„é€šä¿¡ã€‚ initHttpServerå‡½æ•°ï¼Œåˆå§‹åŒ–http serverï¼Œæ·»åŠ 8888ç«¯å£çš„debugæ¥å£çš„å¤„ç†å™¨ï¼Œå¹¶æ·»åŠ /readyè·¯ç”±çš„å¤„ç†å™¨ï¼Œç”¨äºéå†higress serverçš„readinessProbesï¼Œåˆ¤æ–­å†…éƒ¨æœåŠ¡è®°å½•è¡¨å†…çš„æœåŠ¡æ˜¯å¦å‡†å¤‡å®Œæ¯•ã€‚ s.xdsServer.AddDebugHandlers(s.httpMux, nil, true, nil) s.httpMux.HandleFunc(&quot;/ready&quot;, s.readyHandler) initConfigControllerå‡½æ•°ï¼Œè¿™éƒ¨åˆ†å†…å®¹æ¯”è¾ƒæ ¸å¿ƒï¼Œå°†ä¼šåœ¨åé¢è¯¦ç»†å±•å¼€ï¼Œæš‚æ—¶å…ˆè·³è¿‡ã€‚ initRegistryEventHandlerså‡½æ•°ï¼Œè¿™éƒ¨åˆ†å†…å®¹è·ŸinitConfigControllerå‡½æ•°æœ‰å…³ï¼Œæš‚æ—¶å…ˆè·³è¿‡ã€‚ initAuthenticatorså‡½æ•°ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯åˆå§‹åŒ–è®¤è¯å™¨ï¼Œå¹¶å°†å…¶åº”ç”¨äº xDS æœåŠ¡å™¨ã€‚é€šè¿‡æ·»åŠ ä¸åŒçš„è®¤è¯å™¨ï¼Œå¯ä»¥æ”¯æŒä¸åŒçš„èº«ä»½éªŒè¯æ–¹å¼ï¼Œè¿™æ ·æœåŠ¡å™¨åœ¨å¤„ç†è¯·æ±‚æ—¶å¯ä»¥éªŒè¯å®¢æˆ·ç«¯çš„èº«ä»½ä¿¡æ¯ã€‚ éå†å¯åŠ¨å‡½æ•°åˆ—è¡¨ï¼Œæ‰§è¡Œå¯åŠ¨å‡½æ•°â€‹ for _, f := range initFuncList { if err := f(); err != nil { return nil, err } }  æ³¨å†ŒPilot Serverâ€‹ s.server.RunComponent(func(stop &lt;-chan struct{}) error { s.kubeClient.RunAndWait(stop) return nil })  æ³¨æ„è¿™é‡Œçš„kubeClientæ‰€è°ƒç”¨çš„æ–¹æ³•æ˜¯istioçš„Kuberneteså®¢æˆ·ç«¯æä¾›çš„ã€‚ åœ¨readyæœåŠ¡è®°å½•è¡¨é‡Œæ³¨å†ŒxdsæœåŠ¡â€‹ s.readinessProbes[&quot;xds&quot;] = func() (bool, error) { return s.xdsServer.IsServerReady(), nil }  ","version":null,"tagName":"h3"},{"title":"å¯åŠ¨å®ä¾‹ï¼šStartâ€‹","type":1,"pageTitle":"higress-coreæºç åˆ†æ","url":"/zh-cn/blog/higress-code#å¯åŠ¨å®ä¾‹start","content":"ç¬¬ä¸€éƒ¨åˆ†ï¼šéå†pilot serverçš„componentsï¼Œæ‰§è¡Œchanç®¡é“é‡Œçš„å‡½æ•° if err := s.server.Start(stop); err != nil { return err }  ç¬¬äºŒéƒ¨åˆ†ï¼šç­‰å¾…ç¼“å­˜åŒæ­¥å®Œæˆ if !s.waitForCacheSync(stop) { return fmt.Errorf(&quot;failed to sync cache&quot;) }  ç¬¬ä¸‰éƒ¨åˆ†ï¼šå¯åŠ¨grpcæœåŠ¡ grpcListener, err := net.Listen(&quot;tcp&quot;, s.GrpcAddress) if err != nil { return err } go func() { log.Infof(&quot;starting gRPC discovery service at %s&quot;, grpcListener.Addr()) if err := s.grpcServer.Serve(grpcListener); err != nil { log.Errorf(&quot;error serving GRPC server: %v&quot;, err) } }()  ç¬¬å››éƒ¨åˆ†ï¼šå¯åŠ¨httpæœåŠ¡ httpListener, err := net.Listen(&quot;tcp&quot;, s.HttpAddress) if err != nil { return err } go func() { log.Infof(&quot;starting HTTP service at %s&quot;, httpListener.Addr()) if err := s.httpServer.Serve(httpListener); err != nil { log.Errorf(&quot;error serving http server: %v&quot;, err) } }()  ","version":null,"tagName":"h3"},{"title":"higress-coreæ ¸å¿ƒæºç åˆ†æâ€‹","type":1,"pageTitle":"higress-coreæºç åˆ†æ","url":"/zh-cn/blog/higress-code#higress-coreæ ¸å¿ƒæºç åˆ†æ","content":"åœ¨å‰é¢æœ‰ä¸¤ä¸ªå‡½æ•°initConfigControllerå’ŒinitRegistryEventHandlersæˆ‘ä»¬æ²¡æœ‰ä»‹ç»ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°å¯ä»¥è¯´æ˜¯higress-coreçš„æ ¸å¿ƒä»£ç ï¼Œæ¥ä¸‹æ¥å¯¹è¿™ä¸¤ä¸ªå‡½æ•°è¿›è¡Œå…·ä½“å‰–æã€‚åœ¨åˆ†æä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹pkgå…¶ä»–ç›®å½•çš„åŠŸèƒ½ã€‚ . â”œâ”€â”€ common //å…¬å…±åŒ… â”œâ”€â”€ config //é…ç½®åŒ… â”œâ”€â”€ ingress //higresså®šä¹‰çš„ingressèµ„æºæ§åˆ¶å™¨ â”‚ â”œâ”€â”€ config //é…ç½®ingress configå’Œkingress config â”‚ â”œâ”€â”€ kube //é›†æˆKubernetesé…ç½® â”‚ â”‚ â”œâ”€â”€ annotations //å¤„ç† Ingress çš„æ³¨è§£ç›¸å…³çš„ä»£ç  â”‚ â”‚ â”œâ”€â”€ common //é€šç”¨çš„ä»£ç å’Œå·¥å…·å‡½æ•° â”‚ â”‚ â”œâ”€â”€ configmap //å¤„ç† ConfigMap ç›¸å…³çš„ä»£ç  â”‚ â”‚ â”œâ”€â”€ controller //æ§åˆ¶å™¨ç›¸å…³çš„ä»£ç  â”‚ â”‚ â”œâ”€â”€ http2rpc //å¤„ç† HTTP åˆ° RPC çš„è½¬æ¢çš„ä»£ç  â”‚ â”‚ â”œâ”€â”€ ingress //å¤„ç† Ingress é…ç½®çš„ä»£ç  â”‚ â”‚ â”œâ”€â”€ ingressv1 //Ingress çš„ API ç‰ˆæœ¬ v1 ç›¸å…³çš„ä»£ç  â”‚ â”‚ â”œâ”€â”€ kingress //å¤„ç† Kingress ç›¸å…³çš„ä»£ç  â”‚ â”‚ â”œâ”€â”€ mcpbridge //MCPï¼ˆMesh Configuration Protocolï¼‰çš„æ¡¥æ¥ç›¸å…³çš„ä»£ç  â”‚ â”‚ â”œâ”€â”€ secret //å¤„ç† Secret ç›¸å…³çš„ä»£ç  â”‚ â”‚ â”œâ”€â”€ util //é€šç”¨çš„å·¥å…·å‡½æ•° â”‚ â”‚ â””â”€â”€ wasmplugin //å¤„ç† WebAssembly æ’ä»¶ç›¸å…³çš„ä»£ç  â”‚ â”œâ”€â”€ log //æ—¥å¿— â”‚ â”œâ”€â”€ mcp â”‚ â””â”€â”€ translation //ç¿»è¯‘æ¨¡å— â””â”€â”€ kube //higresså®šä¹‰çš„Kuberneteså®¢æˆ·ç«¯ï¼ŒåŒ…å«äº†istioæä¾›çš„Kuberneteså®¢æˆ·ç«¯  é€šè¿‡ç›®å½•æˆ‘ä»¬å¯ä»¥æ¸…æ™°åœ°çœ‹åˆ°higressé›†æˆäº†å¤šä¸ªKubernetesèµ„æºä»¥åŠIngressé…ç½®ã€‚ ","version":null,"tagName":"h2"},{"title":"initConfigControllerå‡½æ•°å‰–æâ€‹","type":1,"pageTitle":"higress-coreæºç åˆ†æ","url":"/zh-cn/blog/higress-code#initconfigcontrollerå‡½æ•°å‰–æ","content":"æˆ‘ä»¬å…ˆå¤§è‡´åˆ†æä¸€ä¸‹è¿™ä¸ªå‡½æ•°çš„æµç¨‹ï¼Œå‡½æ•°çš„å…·ä½“é€»è¾‘ç¨ååˆ†æã€‚æœ€åä¼šç»™å‡ºä¸€ä¸ªå‡½æ•°è°ƒç”¨çš„æµç¨‹å›¾ï¼Œå¯ä»¥ç»“åˆæµç¨‹å›¾è¿›è¡Œæºç çš„ç†è§£åˆ†æã€‚ è®¾ç½® common.Options ç»“æ„ä½“çš„ä¸€äº›é€‰é¡¹ï¼Œè¿™äº›é€‰é¡¹å¯èƒ½å½±å“é…ç½®æ§åˆ¶å™¨çš„è¡Œä¸ºã€‚è¿™äº›é€‰é¡¹åŒ…æ‹¬æ˜¯å¦å¯ç”¨æ§åˆ¶å™¨ã€é›†ç¾¤ IDã€Ingress ç±»ç­‰åˆ›å»ºä¸€ä¸ª translation.NewIngressTranslation å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ç”¨äºå¤„ç† Ingress çš„ç¿»è¯‘å’Œé…ç½®å‘ ingressConfig ä¸­æ·»åŠ æœ¬åœ°é›†ç¾¤çš„é…ç½®ï¼Œå¹¶è·å–å¯¹åº”çš„ Ingress æ§åˆ¶å™¨å’Œ Kingress æ§åˆ¶å™¨ä½¿ç”¨ configaggregate.MakeCache åˆ›å»ºä¸€ä¸ªå¸¦æœ‰ç¼“å­˜çš„é…ç½®æ§åˆ¶å™¨åˆ›å»ºä¸€ä¸ª Istio é…ç½®å­˜å‚¨ï¼Œå¹¶å°†å…¶è®¾ç½®åˆ° Server å¯¹è±¡çš„ environment.IstioConfigStore ä¸­å°† ingressConfig è®¾ç½®åˆ° Server å¯¹è±¡çš„ environment.IngressStore ä¸­å°†åŒ…å«é…ç½®å’Œå¯åŠ¨ Ingress æ§åˆ¶å™¨ã€Kingress æ§åˆ¶å™¨ä»¥åŠç›¸å…³çš„é…ç½®æ§åˆ¶å™¨çš„å‡½æ•°æ–¹æ³•æ³¨å†Œåˆ°pilot server instanceçš„componentsç®¡é“ä¸­ã€‚ æˆ‘ä»¬ä»ä¸­æŒ‘é€‰å‡ºå‡ ä¸ªæ¯”è¾ƒé‡è¦çš„å‡½æ•°å‡ºæ¥ï¼šNewIngressTranslationã€AddLocalClusterã€InitializeClusterä»¥åŠconfigControllerçš„Runæ–¹æ³•ï¼Œå…¶å®ƒçš„åƒMakeCacheã€MakeIstioStoreæ–¹æ³•åˆ™æ˜¯æœ‰istioæä¾›çš„å‡½æ•°æ–¹æ³•ï¼Œç”¨äºå¯¹æ¥higressä¸­çš„discoveryå®¹å™¨ä¸­Pilotç»„ä»¶ã€‚ç¡®å®šå¥½æ¥ä¸‹æ¥è¦åˆ†æçš„å†…å®¹ä¹‹åï¼Œæˆ‘ä»¬æ¥åˆ°pkg/ingress/translattionç›®å½•ï¼ŒæŸ¥çœ‹ä¸€ä¸‹translation.goã€‚ translation.goå‰–æâ€‹ IngressTranslationå®ç°äº†ä¸¤ä¸ªæ¥å£ï¼šmodel.ConfigStoreCacheå’Œmodel.IngressStoreï¼Œå…¶ä¸­model.ConfigStoreCacheè¿˜åŒ…å«äº†model.ConfigStoreæ¥å£ã€‚æˆ‘ä»¬å¯ä»¥å¤§è‡´æµè§ˆä¸€ä¸‹ï¼Œå¯ä»¥å‘ç°åŸºæœ¬ä¸Šæ˜¯è°ƒç”¨IngressTranslationç»“æ„ä½“ä¸­çš„ingressConfigå’ŒkingressConfigçš„æ–¹æ³•ï¼Œä½äºpkg/ingress/configç›®å½•ä¸‹ã€‚ é™¤äº†å®ç°æ¥å£æ–¹æ³•ä¹‹å¤–ï¼Œè¿˜æä¾›äº†NewIngressTranslationã€AddLocalClusterã€InitializeClusteræ–¹æ³•ã€‚åŒæ ·åœ°ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å‘ç°è¿™ä¸‰ä¸ªæ–¹æ³•æœ¬è´¨ä¸Šä¹Ÿæ˜¯è°ƒç”¨ingressConfigå’ŒkingressConfigçš„æ–¹æ³•ã€‚ æ—¢ç„¶translation.goæœ¬è´¨ä¸Šæ˜¯è°ƒç”¨pkg/ingress/configç›®å½•ä¸‹çš„å‡½æ•°ï¼Œä¸å¦¨æˆ‘ä»¬è¿›å…¥è¯¥ç›®å½•ï¼ŒæŸ¥çœ‹ä¸€ä¸‹ingress_config.goï¼Œå¯¹äºkingress_config.goï¼Œæˆ‘ä»¬æš‚ä¸åšåˆ†æã€‚ ingress_config.goå‰–æâ€‹ åœ¨ingress_config.goä¸­æœ‰ä¸€ä¸ªåä¸ºIngressConfigç»“æ„ä½“ï¼Œå†…å®¹å¦‚ä¸‹(é™„å¸¦æ³¨é‡Š)ï¼š type IngressConfig struct { // è¿œç¨‹ Ingress æ§åˆ¶å™¨çš„æ˜ å°„ï¼Œé”®ä¸ºé›†ç¾¤ IDï¼Œå€¼ä¸º common.IngressController remoteIngressControllers map[string]common.IngressController // ç”¨äºä¿æŠ¤å¹¶å‘è®¿é—® remoteIngressControllers çš„äº’æ–¥é” mutex sync.RWMutex // Ingress è·¯ç”±å’ŒåŸŸåçš„ç¼“å­˜ ingressRouteCache model.IngressRouteCollection ingressDomainCache model.IngressDomainCollection // æœ¬åœ° Kubernetes å®¢æˆ·ç«¯ localKubeClient kube.Client // å¤„ç† VirtualService äº‹ä»¶çš„äº‹ä»¶å¤„ç†ç¨‹åºåˆ‡ç‰‡ virtualServiceHandlers []model.EventHandler // å¤„ç† Gateway äº‹ä»¶çš„äº‹ä»¶å¤„ç†ç¨‹åºåˆ‡ç‰‡ gatewayHandlers []model.EventHandler // å¤„ç† DestinationRule äº‹ä»¶çš„äº‹ä»¶å¤„ç†ç¨‹åºåˆ‡ç‰‡ destinationRuleHandlers []model.EventHandler // å¤„ç† EnvoyFilter äº‹ä»¶çš„äº‹ä»¶å¤„ç†ç¨‹åºåˆ‡ç‰‡ envoyFilterHandlers []model.EventHandler // å¤„ç† ServiceEntry äº‹ä»¶çš„äº‹ä»¶å¤„ç†ç¨‹åºåˆ‡ç‰‡ serviceEntryHandlers []model.EventHandler // å¤„ç† WasmPlugin äº‹ä»¶çš„äº‹ä»¶å¤„ç†ç¨‹åºåˆ‡ç‰‡ wasmPluginHandlers []model.EventHandler // ç”¨äºå¤„ç†ç›‘è§†é”™è¯¯çš„å¤„ç†ç¨‹åº watchErrorHandler cache.WatchErrorHandler // ç¼“å­˜çš„ EnvoyFilter é…ç½® cachedEnvoyFilters []config.Config // æ­£åœ¨ç›‘è§†çš„ Secret é›†åˆ watchedSecretSet sets.Set // ç”¨äºåè°ƒæ³¨å†Œè¡¨çš„è°ƒè§£å™¨ RegistryReconciler *reconcile.Reconciler // MCP æ¡¥æ¥æ˜¯å¦å·²è°ƒè§£çš„æ ‡å¿— mcpbridgeReconciled *atomic.Bool // ç®¡ç† MCP æ¡¥æ¥ç›¸å…³çš„æ§åˆ¶å™¨å’Œåˆ—è¡¨ mcpbridgeController mcpbridge.McpBridgeController mcpbridgeLister netlisterv1.McpBridgeLister // ç®¡ç† WasmPlugin ç›¸å…³çš„æ§åˆ¶å™¨å’Œåˆ—è¡¨ wasmPluginController wasmplugin.WasmPluginController wasmPluginLister extlisterv1.WasmPluginLister // å·²æ³¨å†Œçš„ WasmPlugin é›†åˆï¼Œé”®ä¸º WasmPlugin åç§° wasmPlugins map[string]*extensions.WasmPlugin // ç®¡ç† HTTP2RPC ç›¸å…³çš„æ§åˆ¶å™¨å’Œåˆ—è¡¨ http2rpcController http2rpc.Http2RpcController http2rpcLister netlisterv1.Http2RpcLister // å·²æ³¨å†Œçš„ HTTP2RPC é›†åˆï¼Œé”®ä¸º HTTP2RPC åç§° http2rpcs map[string]*higressv1.Http2Rpc // Configmap çš„ç®¡ç†å™¨ configmapMgr *configmap.ConfigmapMgr // ç”¨äºæ›´æ–° XDS XDSUpdater model.XDSUpdater // å¤„ç†æ³¨è§£çš„æ³¨è§£å¤„ç†ç¨‹åº annotationHandler annotations.AnnotationHandler // å‘½åç©ºé—´ namespace string // é›†ç¾¤ ID clusterId string }  è¯¥ç»“æ„ä½“æä¾›äº†ä¸€äº›æ–¹æ³•ï¼Œå…¶å®è¿™ä¸ªç»“æ„ä½“æœ¬è´¨ä¸Šä¹Ÿæ˜¯å®ç°äº†translation.goæåˆ°çš„ä¸¤ä¸ªæ¥å£ï¼Œæ–¹æ³•åˆ—è¡¨å’Œtranslation.goæå…¶ç›¸ä¼¼ï¼Œæˆ‘ä»¬åˆ†æä¸€ä¸‹ä¸€äº›æ¯”è¾ƒå¤æ‚çš„æ–¹æ³•ï¼Œå‰©ä¸‹çš„å¯è‡ªè¡Œå®šä½åˆ°æºç æŸ¥çœ‹ï¼š NewIngressConfig åˆå§‹åŒ–IngressConfigï¼Œåˆ›å»ºå¤šä¸ªå­æ§åˆ¶å™¨(mcpbridgeã€wasmpluginã€http2rpcç­‰)å¹¶èµ‹å€¼ç»™å¯¹åº”çš„å­—æ®µä¸Šã€‚ä¸ºå¤šä¸ªå­æ§åˆ¶å™¨æ³¨å†Œäº‹ä»¶ç›‘å¬å™¨ï¼Œç”¨äºç›‘å¬Kubernetesèµ„æºçš„å˜åŒ–ï¼Œå¹¶è¿›è¡Œç›¸åº”çš„å¤„ç†ã€‚ config := &amp;IngressConfig{ remoteIngressControllers: make(map[string]common.IngressController), localKubeClient: localKubeClient, XDSUpdater: XDSUpdater, annotationHandler: annotations.NewAnnotationHandlerManager(), ... } mcpbridgeController := mcpbridge.NewController(localKubeClient, clusterId) mcpbridgeController.AddEventHandler(config.AddOrUpdateMcpBridge, config.DeleteMcpBridge) config.mcpbridgeController = mcpbridgeController config.mcpbridgeLister = mcpbridgeController.Lister() ...  åœ¨è¿™é‡Œï¼Œæœ‰å‡ ä¸ªæ–¹æ³•éœ€è¦æ³¨æ„ï¼š 1. `annotations.NewAnnotationHandlerManager()` 2. `mcpbridge.NewController(localKubeClient, clusterId)` 3. `wasmplugin.NewController(localKubeClient, clusterId)` 4. `http2rpc.NewController(localKubeClient, clusterId)` 5. `configmap.NewController(localKubeClient, clusterId, namespace)`  å¾ˆæ˜æ˜¾è¿™äº›æ–¹æ³•åˆ†åˆ«å¯¹åº”pkg/ingress/kubeç›®å½•ä¸‹ä¸€äº›è‡ªå®šä¹‰çš„èµ„æºé…ç½®æ–¹æ³•ï¼Œåé¢ä¼šé’ˆå¯¹è¯¥ç›®å½•è¿›è¡Œå•ç‹¬çš„ä»‹ç»ã€‚ RegisterEventHandler å¯¹kindå˜é‡è¿›è¡Œåˆ¤æ–­ï¼Œåˆ¤æ–­å±äºå“ªç§èµ„æºï¼Œå¹¶æ·»åŠ åˆ°å¯¹åº”çš„äº‹ä»¶å¤„ç†ç¨‹åºåˆ‡ç‰‡ switch kind { case gvk.VirtualService: m.virtualServiceHandlers = append(m.virtualServiceHandlers, f) ... } æ³¨å†Œäº‹ä»¶ç›‘å¬å™¨ for _, remoteIngressController := range m.remoteIngressControllers { remoteIngressController.RegisterEventHandler(kind, f) } æˆ‘ä»¬å¯ä»¥å®šä½ä¸€ä¸‹remoteIngressControllerçš„RegisterEventHandleræ–¹æ³•ï¼š func (c *controller) RegisterEventHandler(kind config.GroupVersionKind, f model.EventHandler) { switch kind { case gvk.VirtualService: c.virtualServiceHandlers = append(c.virtualServiceHandlers, f) ... } } AddLocalCluster åˆ›å»ºingressæ€»æ§åˆ¶å™¨ï¼Œå¹¶æ³¨å†Œåˆ°remoteIngressControllersä¸­ ingressController = ingress.NewController(m.localKubeClient, m.localKubeClient, options, secretController) m.remoteIngressControllers[options.ClusterId] = ingressController InitializeCluster è®¾ç½®é”™è¯¯ç›‘å¬å¤„ç†å™¨ _ = ingressController.SetWatchErrorHandler(m.watchErrorHandler) å…¶ä¸­SetWatchErrorHandleræ–¹æ³•å¦‚ä¸‹ï¼Œè°ƒç”¨å„ä¸ªinformerçš„SetWatchErrorHandleræ–¹æ³•ï¼š func (c *controller) SetWatchErrorHandler(handler func(r *cache.Reflector, err error)) error { var errs error if err := c.serviceInformer.SetWatchErrorHandler(handler); err != nil { errs = multierror.Append(errs, err) } if err := c.ingressInformer.SetWatchErrorHandler(handler); err != nil { errs = multierror.Append(errs, err) } ... return errs } é€šè¿‡goåç¨‹å¯åŠ¨ingressController go ingressController.Run(stop) List å‰æœŸæ£€æŸ¥ï¼Œé¢„é˜²ç©ºæŒ‡é’ˆæˆ–é€»è¾‘é”™è¯¯ if typ != gvk.Gateway &amp;&amp; typ != gvk.VirtualService &amp;&amp; typ != gvk.DestinationRule &amp;&amp; typ != gvk.EnvoyFilter &amp;&amp; typ != gvk.ServiceEntry &amp;&amp; typ != gvk.WasmPlugin { return nil, common.ErrUnsupportedOp } // Currently, only support list all namespaces gateways or virtualservices. if namespace != &quot;&quot; { IngressLog.Warnf(&quot;ingress store only support type %s of all namespace.&quot;, typ) return nil, common.ErrUnsupportedOp } å¦‚æœkindç±»å‹æ˜¯envoyfilterï¼Œæ‹¿å‡ºæ¥å¤„ç†æ‰ if typ == gvk.EnvoyFilter { ... // Build configmap envoy filters configmapEnvoyFilters, err := m.configmapMgr.ConstructEnvoyFilters() ... } å¦‚æœä¸æ˜¯ï¼Œè°ƒç”¨ingressæ§åˆ¶å™¨(å¦‚æœæœ‰kingressæ§åˆ¶å™¨ï¼Œä¹Ÿç»™å¸¦ä¸Š)çš„Listæ–¹æ³•ï¼Œæ·»åŠ åˆ°configåˆ—è¡¨ï¼Œä»¥ingressæ§åˆ¶å™¨çš„æ–¹æ³•ä¸ºä¾‹ï¼Œä¼šè·å–informerå¯¹è±¡çš„å­˜å‚¨å™¨ï¼Œå¹¶å¯¹å…¶è¿›è¡Œéå†ï¼Œå°†éå†åˆ°çš„å¯¹è±¡è¿›è¡Œæ·±æ‹·è´ï¼Œå¹¶è¿”å›configåˆ—è¡¨ã€‚ç”±äºListæ–¹æ³•æ˜¯å®ç°ConfigStoreæ¥å£çš„ï¼Œistioå†…éƒ¨ä¼šå¯¹è¿™ä¸ªconfigåˆ—è¡¨è¿›è¡Œä¸‹ä¸€æ­¥å¤„ç†ã€‚ var configs []config.Config m.mutex.RLock() for _, ingressController := range m.remoteIngressControllers { configs = append(configs, ingressController.List()...) } m.mutex.RUnlock() å¯¹configåˆ—è¡¨æ ¹æ®åˆ›å»ºæ—¶é—´è¿›è¡Œæ’åºï¼Œå¹¶åˆ›å»ºä¸€ä¸ªåŒ…è£…å¥½çš„configåˆ—è¡¨ï¼ŒwrapperConfigsé‡Œé™¤äº†Config``ï¼Œè¿˜ä¼šåŒ…å«AnnotationsConfig`æ³¨è§£é…ç½® common.SortIngressByCreationTime(configs) wrapperConfigs := m.createWrapperConfigs(configs) æ ¹æ®kindç±»å‹ï¼Œå°†wrapperConfigsè½¬æ¢ä¸ºå¯¹åº”çš„èµ„æºï¼Œä»£ç å¦‚ä¸‹ï¼Œå¹¶ä¸ºconvertGatewaysé™„åŠ æ³¨é‡Š switch typ { case gvk.Gateway: //1.åˆå§‹åŒ–ConvertOptions //2.è°ƒç”¨ingressæ§åˆ¶å™¨çš„ConvertGatewayæ–¹æ³•ï¼Œåœ¨è¿™é‡Œï¼Œingressæ§åˆ¶å™¨é¦–å…ˆåšä¸€äº›æ£€æŸ¥ï¼Œå¹¶éå†ruleè§„åˆ™åˆ—è¡¨ // ä¸ºæ¯ä¸ªruleåˆ›å»ºIngressDomainBuilderæ„é€ å™¨ï¼Œä¸­é—´è¿‡ç¨‹ä¼šæ„é€ gatewayåŒ…è£…å™¨ã€è·å–tlså¯†é’¥åç§°ç­‰ç­‰ // åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä¼šå¯¹configåŒ…è£…å™¨è¿›è¡Œä¿®æ”¹ //3.applyæ³¨è§£ //4.ç»„åˆæˆistioèƒ½å¤Ÿè¯†åˆ«çš„configåˆ—è¡¨ return m.convertGateways(wrapperConfigs), nil case gvk.VirtualService: return m.convertVirtualService(wrapperConfigs), nil case gvk.DestinationRule: return m.convertDestinationRule(wrapperConfigs), nil ... } è¿™å—å†…å®¹è¾ƒå¤šï¼Œå…·å¤‡ä¸€å®šçš„éš¾åº¦ï¼Œéœ€è¦å¯¹å„ä¸ªèµ„æºæœ‰ä¸€å®šçš„ç†è§£ã€‚ ä»¥ä¸‹å‡ ä¸ªæ–¹æ³•çš„ä½œç”¨æ˜¯æä¸ºç›¸ä¼¼çš„ AddOrUpdateWasmPluginDeleteWasmPluginAddOrUpdateMcpBridgeDeleteMcpBridgeAddOrUpdateHttp2RpcDeleteHttp2Rpc é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯åœ¨ç›‘å¬å¯¹åº”èµ„æºçš„è¿‡ç¨‹ä¸­ï¼Œå‘ç”Ÿèµ„æºçš„æ·»åŠ æˆ–è€…å˜æ›´æˆ–è€…åˆ é™¤è¿›è¡Œå¯¹åº”çš„æ“ä½œã€‚ ä»¥AddOrUpdateWasmPluginå’ŒDeleteWasmPluginä¸ºä¾‹ã€‚ AddOrUpdateWasmPlugin è·å–wasmplugin wasmPlugin, err := m.wasmPluginLister.WasmPlugins(clusterNamespacedName.Namespace).Get(clusterNamespacedName.Name) å°†wasmpluginè½¬åŒ–ä¸ºistioèƒ½å¤Ÿè¯†åˆ«çš„wasmplugin istioWasmPlugin, err := m.convertIstioWasmPlugin(&amp;wasmPlugin.Spec) æ›´æ–°IngressConfig m.wasmPlugins[clusterNamespacedName.Name] = istioWasmPlugin DeleteWasmPlugin æ›´æ–°IngressConfig delete(m.wasmPlugins, clusterNamespacedName.Name) å¦‚æœå­˜åœ¨è¯¥wasmpluginï¼Œè§¦å‘wasmPluginHandlersçš„äº‹ä»¶ç›‘å¬å™¨ï¼Œæ‰§è¡Œå¯¹åº”çš„æ“ä½œ for _, f := range m.wasmPluginHandlers { IngressLog.Debug(&quot;WasmPlugin triggerd update&quot;) f(config.Config{Meta: metadata}, config.Config{Meta: metadata}, model.EventDelete) }  åˆ°æ­¤ä¸ºæ­¤ï¼Œingress_config.goçš„å†…å®¹åŸºæœ¬ä»‹ç»å®Œæ¯•ï¼Œå¤§éƒ¨åˆ†å†…å®¹å¹¶æœªåšè¿‡å¤šæ·±å…¥ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥è‡ªè¡Œä¸‹è½½æºç æµè§ˆæŸ¥çœ‹ã€‚ æˆ‘ä»¬ç°åœ¨å›åˆ°æœ€å¼€å§‹çš„initConfigControllerå‡½æ•°ä¸Šï¼Œå¯ä»¥å‘ç°è¿™ä¸ªå‡½æ•°çš„æ ¸å¿ƒå†…å®¹å…¶å®å°±æ˜¯ingress_config.goï¼Œå½“ç„¶è¿˜æœ‰å¯¹åº”çš„å¤šä¸ªæ§åˆ¶å™¨ï¼Œå…³äºæ§åˆ¶å™¨çš„ä»‹ç»ï¼Œå°†åœ¨åé¢è¿›è¡Œä»‹ç»ã€‚ ","version":null,"tagName":"h3"},{"title":"initRegistryEventHandlerså‡½æ•°å‰–æâ€‹","type":1,"pageTitle":"higress-coreæºç åˆ†æ","url":"/zh-cn/blog/higress-code#initregistryeventhandlerså‡½æ•°å‰–æ","content":"è¯¥å‡½æ•°ç›¸å¯¹äºinitConfigControllerå‡½æ•°æ¥è¯´ç®€å•å¾ˆå¤šï¼Œå…¶ä¸»è¦åšçš„å†…å®¹å°±æ˜¯é…ç½®xdsæ›´æ–°å¤„ç†å™¨ï¼Œå¹¶å°†å…¶ä½œä¸ºäº‹ä»¶ç›‘å¬å™¨çš„äº‹ä»¶å¤„ç†ç¨‹åºï¼Œæ³¨å†Œç»™configControllerï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“å‘ç”Ÿèµ„æºçš„å˜æ›´æ—¶ï¼Œä¼šé€šè¿‡xdsåè®®è¿›è¡Œæ¨é€æ›´æ–°ã€‚ ","version":null,"tagName":"h3"},{"title":"pkg/ingress/kubeç›®å½•ä»‹ç»â€‹","type":1,"pageTitle":"higress-coreæºç åˆ†æ","url":"/zh-cn/blog/higress-code#pkgingresskubeç›®å½•ä»‹ç»","content":"è¿™éƒ¨åˆ†å†…å®¹è¾ƒå¤šï¼Œåç»­å¯è‡ªè¡Œé’ˆå¯¹æ„Ÿå…´è¶£çš„éƒ¨åˆ†è¿›è¡Œç²¾è¯»ã€‚ annotations è¿™é‡Œä¸»è¦å¤„ç†ingressæ³¨è§£çš„é…ç½®ï¼Œåœ¨NewAnnotationHandlerManageræ–¹æ³•é‡Œåˆ—å‡ºäº†ä¸€äº›å·²ç»æ”¯æŒçš„æ³¨è§£ï¼Œæ¯ä¸ªæ³¨è§£çš„å¤„ç†ç¨‹åºéœ€è¦å®ç°AnnotationHandleræ‰€å®šä¹‰çš„æ¥å£åˆ—è¡¨ã€‚ common è¿™é‡Œæ ¸å¿ƒçš„æ–‡ä»¶ä¸ºcontroller.goï¼Œä¸»è¦åšäº†ä¸€äº›èµ„æºçš„åŒ…è£…ï¼Œä»¥åŠå®šä¹‰äº†IngressControlleræ¥å£æ–¹æ³•ï¼Œå…¶å®ç°ç±»æœ‰pkg/ingress/kube/ingress/controller.goå’Œpkg/ingress/kube/ingressv1/controller.go configmap è¿™é‡Œä¸»è¦ä¸ºConfigMapæ·»åŠ äº†higressçš„KVå¯¹ï¼Œåœ¨controller.goä¸­å®šä¹‰äº†ItemControlleræ¥å£ï¼Œå’Œå‰è€…æåˆ°çš„ä¸€æ ·ï¼Œè¿™é‡Œä¹Ÿæä¾›äº†ç›¸ä¼¼çš„æ›´æ–°é…ç½®çš„æ–¹æ³•AddOrUpdateHigressConfigï¼ŒåŒæ ·åœ°ï¼Œä¹Ÿæ˜¯å…ˆè·å–å½“å‰çš„valueå€¼ï¼Œå¹¶è·å–æ—§çš„valueå€¼ï¼Œè¿›è¡Œä¸€ä¸ªæ¯”å¯¹ï¼Œæ¯”å¯¹ç»“æœå¯èƒ½ä¸ºæ–°å¢ã€æ›´æ–°ã€åˆ é™¤ï¼Œåˆ†åˆ«æ‰§è¡Œå¯¹åº”çš„äº‹ä»¶ç›‘å¬å™¨é‡Œæ‰€å®šä¹‰çš„äº‹ä»¶å¤„ç†å™¨ï¼Œä¹Ÿå°±æ˜¯XDSUpdaterã€‚ controller åœ¨å‰é¢çš„ä»‹ç»ä¸­ï¼Œæåˆ°äº†å¾ˆå¤šæ¬¡äº‹ä»¶ç›‘å¬å™¨ï¼Œå¯èƒ½ä¼šæœ‰äººç–‘é—®æ˜¯æ€ä¹ˆåšèµ„æºç›‘å¬çš„ï¼Œèµ„æºç›‘å¬çš„ä»£ç å°±ä½äºæœ¬ç›®å½•ä¸‹äº†ã€‚è¿™é‡Œå¯ä»¥ç€é‡ä»‹ç»ä¸€ä¸‹ï¼Œäº‹ä»¶ç›‘å¬çš„å…·ä½“å®ç°åŸç†ã€‚ å®šä¹‰äº†Controller[lister any]æ¥å£ï¼Œå…¶å®ç°ç±»ä¸ºCommonControllerã€‚ æˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸‹è¿™ä¸ªå®ç°ç»“æ„ä½“æœ‰å“ªäº›éœ€è¦æ³¨æ„çš„å­—æ®µã€‚ lister: è¿™ä¸ªå­—æ®µä¸ºanyç±»å‹ï¼Œä¼šåœ¨NewCommonControlleræ–¹æ³•é‡Œä¼ å…¥è¿›æ¥ï¼Œç‚¹å‡»æŸ¥çœ‹è¯¥æ–¹æ³•è°ƒç”¨æƒ…å†µï¼Œå¯ä»¥å‘ç°ä¼ å…¥è¯¥å­—æ®µçš„éƒ½æ˜¯å„ä¸ªèµ„æºçš„ç›‘å¬å™¨ï¼Œä¾‹å¦‚ConfigMapçš„ç›‘å¬å™¨å°±æ˜¯client.KubeInformer().Core().V1().ConfigMaps().Lister().ConfigMaps(namespace)ï¼Œå…¶å®ƒä¹Ÿæ˜¯å¦‚æ­¤ã€‚updateHandler: è¿™ä¸ªå­—æ®µä¸ºfunc(util.ClusterNamespacedName)ç±»å‹ï¼Œä¸»è¦ç”¨äºå­˜å‚¨å¯¹åº”ç›‘å¬å™¨listeræ‰€æä¾›çš„æ›´æ–°æˆ–è€…æ–°å¢äº‹ä»¶å¤„ç†å™¨ï¼Œå­˜å‚¨ä»£ç å¦‚ä¸‹ï¼š func (c *CommonController[lister]) AddEventHandler(addOrUpdate func(util.ClusterNamespacedName), delete ...func(util.ClusterNamespacedName)) { c.updateHandler = addOrUpdate if len(delete) &gt; 0 { c.removeHandler = delete[0] } } removeHandler: åŒupdateHandler æ¥å£æ–¹æ³•é™¤äº†åˆšåˆšä»‹ç»çš„AddEventHandleræ–¹æ³•ï¼Œè¿˜æœ‰ä¸ªRunæ–¹æ³•éœ€è¦æ³¨æ„ä¸€ä¸‹ func (c *CommonController[lister]) Run(stop &lt;-chan struct{}) { defer utilruntime.HandleCrash() defer c.queue.ShutDown() if !cache.WaitForCacheSync(stop, c.HasSynced) { IngressLog.Errorf(&quot;Failed to sync %s controller cache&quot;, c.typeName) return } IngressLog.Debugf(&quot;%s cache has synced&quot;, c.typeName) go wait.Until(c.worker, time.Second, stop) &lt;-stop } å¯ä»¥çœ‹æœ‰ä¸ªwait.Untilæ–¹æ³•ï¼Œç”¨äºæ¯ç§’é’Ÿæ‰§è¡Œc.workeræ–¹æ³•ï¼Œç›´åˆ°æ¥æ”¶åˆ°stopä¿¡å·ï¼Œæ–¹æ³•è°ƒç”¨é“¾å¦‚ä¸‹ï¼šc.worker-&gt;c.processNextWorkItem()-&gt;c.onEvent(ingressNamespacedName)-&gt;c.updateHandler(obj)ï¼Œå¯ä»¥çœ‹å‡ºæ¥å½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ§åˆ¶å™¨ï¼Œå¹¶ä¸ºå…¶æ³¨å†Œäº†ä¸€ä¸ªäº‹ä»¶ç›‘å¬å™¨ä»¥åŠäº‹ä»¶å¤„ç†å™¨(updateHandler)ï¼Œå› æ­¤æ¯ç§’é’Ÿä¼šæ‰§è¡Œäº‹ä»¶å¤„ç†å™¨ï¼Œä¹Ÿå°±å®ç°äº†ç›‘å¬çš„é€»è¾‘ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªç›®å½•ä¸‹ä¸»è¦å®šä¹‰äº†ä¸€ä¸ªå…¬å…±çš„æ§åˆ¶å™¨ï¼Œå¯ä»¥èŠ‚çœå¤§é‡ä»£ç çš„ç¼–å†™ï¼Œæˆ‘ä»¬åœ¨åˆ›å»ºä¸€ä¸ªæ–°çš„å­æ§åˆ¶å™¨çš„æ—¶å€™ï¼Œå¯ä»¥è°ƒç”¨NewCommonControlleræ–¹æ³•æ¥å®ç°ç›‘å¬é€»è¾‘ã€‚ http2rpc ä»£ç è¾ƒä¸ºç®€å•ï¼Œé€šè¿‡NewCommonControlleræ¥åˆ›å»ºHttp2RpcControllerï¼Œå¹¶æä¾›äº†GetHttp2Rpcæ–¹æ³•ã€‚ ingress Ingressæ§åˆ¶å™¨çš„æ ¸å¿ƒä»£ç é€»è¾‘ï¼Œä¸»è¦ä¸ºå‰æ–‡æåˆ°çš„ingress_config.goæ‰€è°ƒç”¨ã€‚éƒ¨åˆ†å†…å®¹åœ¨å‰æ–‡å·²ç»ç®€å•ä»‹ç»è¿‡ã€‚ ingressv1 Ingressçš„APIç‰ˆæœ¬v1ç›¸å…³çš„æ§åˆ¶å™¨ä»£ç ã€‚ kingress kingressç›¸å…³çš„æ§åˆ¶å™¨ä»£ç ã€‚ mcpbridge åŒhttp2rpcç›®å½•ã€‚ secret åŒhttp2rpcç›®å½•ã€‚ util å·¥å…·åŒ…ã€‚ wasmplugin åŒhttp2rpcç›®å½•ã€‚ ","version":null,"tagName":"h2"},{"title":"higress-coreæµç¨‹å›¾â€‹","type":1,"pageTitle":"higress-coreæºç åˆ†æ","url":"/zh-cn/blog/higress-code#higress-coreæµç¨‹å›¾","content":"ç»è¿‡å‰é¢çš„æºç åˆ†æï¼Œç›¸ä¿¡å¤§å®¶å¯¹higressæ ¸å¿ƒé€»è¾‘å·²ç»æœ‰äº†åˆæ­¥çš„ç†è§£ï¼Œåç»­å¯ä»¥é’ˆå¯¹è‡ªå·±æ„Ÿå…´è¶£çš„éƒ¨åˆ†ï¼Œè¿›è¡Œæ·±å…¥ç ”ç©¶ï¼Œå…¶ä¸­ä¼šæ¶‰åŠåˆ°Kubernetesèµ„æºé…ç½®çš„æ ¸å¿ƒé€»è¾‘ä»¥åŠIstioçš„åŸºæœ¬æŒæ¡ï¼Œå½“ç„¶ï¼Œå¦‚æœç»™å®ƒç ”ç©¶é€äº†ï¼Œå¯¹è¿™äº›åŸºæœ¬åŸç†çš„ç†è§£å°†ä¼šæ›´ä¸ºæ·±åˆ»ã€‚ æµç¨‹å›¾å¦‚ä¸‹ï¼š  å¯¹äºåˆå§‹åŒ–é…ç½®æ§åˆ¶å™¨éƒ¨åˆ†ï¼Œå¯è¿›ä¸€æ­¥ç»˜ç”»æµç¨‹å›¾ã€‚  å…³äºäº‹ä»¶ç›‘å¬éƒ¨åˆ†ï¼Œå…¶æµç¨‹å›¾å¦‚ä¸‹ï¼š  ","version":null,"tagName":"h2"},{"title":"æ€»ç»“â€‹","type":1,"pageTitle":"higress-coreæºç åˆ†æ","url":"/zh-cn/blog/higress-code#æ€»ç»“","content":"ä»¥ä¸Šæ˜¯å¯¹higressæºç çš„åˆæ­¥åˆ†æï¼Œå¸Œæœ›èƒ½å¤Ÿç»™ç”¨æˆ·ä»¥åŠå¼€å‘è€…å¯¹higressæœ‰ä¸ªåŸºæœ¬çš„äº†è§£ã€‚ ","version":null,"tagName":"h2"},{"title":"Higress 0.7.0 ç‰ˆæœ¬å‘å¸ƒï¼šGA è¿›å…¥å€’è®¡æ—¶","type":0,"sectionRef":"#","url":"/zh-cn/blog/release-070","content":"","keywords":"higress","version":null},{"title":"è¿›å±•æ¦‚è¦â€‹","type":1,"pageTitle":"Higress 0.7.0 ç‰ˆæœ¬å‘å¸ƒï¼šGA è¿›å…¥å€’è®¡æ—¶","url":"/zh-cn/blog/release-070#è¿›å±•æ¦‚è¦","content":"Higress æ§åˆ¶å°æ­£å¼ releaseï¼Œæ¶µç›– Higress çš„æœåŠ¡/è·¯ç”±/åŸŸå/è¯ä¹¦ç®¡ç†èƒ½åŠ›ï¼Œå¹¶æä¾›å¼€ç®±å³ç”¨çš„å¯è§‚æµ‹åŠŸèƒ½å®‰è£…/å‡çº§ Higress æ—¶æ”¯æŒè‡ªåŠ¨å®‰è£…å¯¹åº”ç‰ˆæœ¬çš„ Higress Consoleï¼Œé¿å…ç‰ˆæœ¬ä¸é€‚é…çš„é—®é¢˜æ”¯æŒå¼€å¯ Istio APIï¼Œå®ç°æ›´å¤šå¤æ‚çš„åŠŸèƒ½ï¼Œå¹¶ä¸”ä¹Ÿå¯ä»¥ç”¨äºå¹³æ»‘æ›¿æ¢ Istio Ingress Gateway ","version":null,"tagName":"h2"},{"title":"ç‰ˆæœ¬ç‰¹æ€§â€‹","type":1,"pageTitle":"Higress 0.7.0 ç‰ˆæœ¬å‘å¸ƒï¼šGA è¿›å…¥å€’è®¡æ—¶","url":"/zh-cn/blog/release-070#ç‰ˆæœ¬ç‰¹æ€§","content":"","version":null,"tagName":"h2"},{"title":"Higress æ§åˆ¶å°â€‹","type":1,"pageTitle":"Higress 0.7.0 ç‰ˆæœ¬å‘å¸ƒï¼šGA è¿›å…¥å€’è®¡æ—¶","url":"/zh-cn/blog/release-070#higress-æ§åˆ¶å°","content":"ç°åœ¨é€šè¿‡ helm å‘½ä»¤å®‰è£… Higress æ—¶å°†è‡ªåŠ¨å®‰è£…å¯¹åº”ç‰ˆæœ¬çš„ Higress Console, è¿™é‡Œé€šè¿‡ higress-console.domain å‚æ•°ï¼Œå¯ä»¥æŒ‡å®šæ§åˆ¶å°çš„åŸŸåã€‚ # å·²ç»æ·»åŠ è¿‡ repo çš„ï¼Œè¯·æ‰§è¡Œ helm repo update helm repo add higress.io https://higress.io/helm-charts helm install higress -n higress-system higress.io/higress --create-namespace --render-subchart-notes --set higress-console.domain=console.higress.io   æ³¨æ„ï¼šå®‰è£…å®Œæˆåä¼šè¾“å‡ºä¸€æ®µæ–‡æœ¬ï¼Œå…¶ä¸­åŒ…å«è·å–æ§åˆ¶å°ç™»å½•ä¿¡æ¯çš„å‘½ä»¤ã€‚è¯·æ‰§è¡Œè¯¥å‘½ä»¤å¹¶è®°å½•ç”¨æˆ·åå’Œå¯†ç ã€‚  æ­£å¼ç¯å¢ƒéƒ¨ç½²æ—¶ï¼Œå»ºè®®æ§åˆ¶å°å¼€å¯å¼ºåˆ¶ HTTPS è®¿é—®ï¼Œå…·ä½“æ“ä½œæ–¹å¼æ˜¯ï¼Œåœ¨ higress-system å‘½åç©ºé—´ä¸‹å…ˆåˆ›å»ºå¥½ TLS è¯ä¹¦å’Œç§é’¥å¯¹åº”çš„ secretï¼Œä¾‹å¦‚ï¼š apiVersion: v1 kind: Secret type: kubernetes.io/tls data: tls.crt: -----BEGIN CERTIFICATE-----... tls.key: -----BEGIN RSA PRIVATE KEY-----... metadata: name: my-tls-secret namespace: higress-system  ç„¶åé€šè¿‡ä¸‹é¢ helm å‘½ä»¤å¼€å¯å¼ºåˆ¶ HTTPS è®¿é—® helm upgrade higress -n higress-system higress.io/higress --set higress-console.tlsSecretName=my-tls-secret  å¦‚æœå¸Œæœ›å¯ç”¨ Higress è‡ªå¸¦çš„ Prometheus&amp;Grafanaï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢ helm å‘½ä»¤è¿›è¡Œå®‰è£…ï¼š helm upgrade higress -n higress-system higress.io/higress --set higress-console.o11y.enabled=true  è¿™æ · Higress æ§åˆ¶å°å°±å¯ä»¥çœ‹åˆ°è‡ªå¸¦çš„å¯è§‚æµ‹å¤§ç›˜äº†ï¼š  å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥å¯¹æ¥å·²æœ‰çš„ Prometheus&amp;Grafanaï¼Œä½¿ç”¨è¿™ä»½ Higress å®˜æ–¹æä¾›çš„ Dashboard é…ç½®å³å¯ï¼šhttps://higress.io/grafana/dashboard.json å¯ä»¥ç™»é™† Higress æ§åˆ¶å° Demo è¯•ç”¨ç°æœ‰æ‰€æœ‰åŠŸèƒ½: http://demo.higress.io ","version":null,"tagName":"h3"},{"title":"å¼€å¯ Istio APIâ€‹","type":1,"pageTitle":"Higress 0.7.0 ç‰ˆæœ¬å‘å¸ƒï¼šGA è¿›å…¥å€’è®¡æ—¶","url":"/zh-cn/blog/release-070#å¼€å¯-istio-api","content":"é€šè¿‡å¼€å¯ Istio APIï¼Œå¯ä»¥å®ç°ä½¿ç”¨ Higress å¹³æ»‘æ›¿æ¢ Istio Ingress Gatewayï¼Œå…·ä½“ helm å‘½ä»¤å¦‚ä¸‹ï¼š helm upgrade higress -n higress-system higress.io/higress --set global.enableIstioAPI=true  åŸºäº Istio APIï¼Œå¯ä»¥å®ç°ç›®å‰ Higress è¿˜æœªæä¾›ç›¸åº” Ingress æ³¨è§£çš„èƒ½åŠ›ï¼Œä¾‹å¦‚åŸºäº Istio EnvoyFilter æ¥å®ç° HTTP to Dubbo çš„åè®®è½¬æ¢é…ç½®æ–¹å¼ï¼š apiVersion: networking.istio.io/v1alpha3 kind: EnvoyFilter metadata: name: http-dubbo-transcoder namespace: higress-system spec: configPatches: - applyTo: HTTP_FILTER match: context: GATEWAY listener: filterChain: filter: name: envoy.filters.network.http_connection_manager subFilter: name: envoy.filters.http.router patch: operation: INSERT_BEFORE value: name: envoy.filters.http.http_dubbo_transcoder typed_config: '@type': type.googleapis.com/udpa.type.v1.TypedStruct type_url: type.googleapis.com/envoy.extensions.filters.http.http_dubbo_transcoder.v3.HttpDubboTranscoder - applyTo: HTTP_ROUTE match: context: GATEWAY routeConfiguration: vhost: route: name: test patch: operation: MERGE value: route: upgrade_configs: - connect_config: allow_post: true upgrade_type: CONNECT typed_per_filter_config: envoy.filters.http.http_dubbo_transcoder: '@type': type.googleapis.com/udpa.type.v1.TypedStruct type_url: type.googleapis.com/envoy.extensions.filters.http.http_dubbo_transcoder.v3.HttpDubboTranscoder value: request_validation_options: reject_unknown_method: true reject_unknown_query_parameters: true services_mapping: - group: dev method_mapping: - name: sayName parameter_mapping: - extract_key: p extract_key_spec: ALL_QUERY_PARAMETER mapping_type: java.lang.String passthrough_setting: passthrough_all_headers: true path_matcher: match_http_method_spec: ALL_GET match_pattern: /dubbo/hello name: com.alibaba.nacos.example.dubbo.service.DemoService version: 1.0.0 url_unescape_spec: ALL_CHARACTERS_EXCEPT_RESERVED  ä¸Šè¿°é…ç½®æ¯”è¾ƒå¤æ‚ï¼ŒåŸå› æ˜¯ä¸ºäº†æ–¹ä¾¿ Envoy æ•°æ®é¢ç¨‹åºé€»è¾‘å¤„ç†è€Œè®¾è®¡çš„ Schemaã€‚ç›®å‰ Higress ç¤¾åŒºå·²ç»åœ¨è®¾è®¡æ›´æ–¹ä¾¿ Ingress é…ç½®ä½¿ç”¨çš„ CRDï¼Œåç»­ä¹Ÿä¼šåœ¨ Higress æ§åˆ¶å°ä¸Šæä¾›å¯¹åº”çš„é…ç½®åŠŸèƒ½ã€‚ ","version":null,"tagName":"h3"},{"title":"GA ç‰ˆæœ¬è§„åˆ’â€‹","type":1,"pageTitle":"Higress 0.7.0 ç‰ˆæœ¬å‘å¸ƒï¼šGA è¿›å…¥å€’è®¡æ—¶","url":"/zh-cn/blog/release-070#ga-ç‰ˆæœ¬è§„åˆ’","content":"Higress é¢„è®¡å°†åœ¨3æœˆåº•/4æœˆåˆå‘å¸ƒé¦–ä¸ª GA ç‰ˆæœ¬, è¿™ä¸ªç‰ˆæœ¬çš„ä¸»è¦è§„åˆ’å¦‚ä¸‹ï¼š å®ç° HTTP to Dubbo åè®®è½¬æ¢çš„æ§åˆ¶é¢é…ç½®ç®€åŒ–Higress æ§åˆ¶å°æä¾› Wasm æ’ä»¶èƒ½åŠ›ï¼Œæ”¯æŒé…ç½®è‡ªå®šä¹‰æ’ä»¶æ¨å‡ºç¬¬ä¸€ç‰ˆ Higress Admin APIï¼Œå¯ä»¥è¢«å…¶ä»–å¹³å°/å·¥å…·é›†æˆå…¨é¢å®Œå–„ Higress å®˜ç½‘æ–‡æ¡£ï¼Œè¦†ç›– Higress å…¨éƒ¨åŠŸèƒ½çš„è¯¦ç»†è¯´æ˜ ","version":null,"tagName":"h2"},{"title":"Higress ç¤¾åŒºâ€‹","type":1,"pageTitle":"Higress 0.7.0 ç‰ˆæœ¬å‘å¸ƒï¼šGA è¿›å…¥å€’è®¡æ—¶","url":"/zh-cn/blog/release-070#higress-ç¤¾åŒº","content":"æ¬¢è¿è®¤é¢† Higress Issue ä»»åŠ¡ï¼šhttps://github.com/alibaba/higress/issues?q=is%3Aopen+is%3Aissue+label%3A%22help+wanted%22 å®Œæˆä¸€å®šæ•°é‡çš„ Issues å°±å¯ä»¥æˆä¸º Higress Committerï¼Œä¹Ÿæœ‰æœºä¼šè·å¾—å¼€æºç¤¾åŒºçš„ç¤¼ç‰©å’Œè£èª‰ğŸ† æ¬¢è¿åŠ å…¥ Higress ç¤¾åŒºç¾¤ï¼ŒåŠæ—¶äº†è§£æ›´å¤š Higress åŠ¨å‘ï¼š  ","version":null,"tagName":"h2"},{"title":"ä¸Šçº¿æ§åˆ¶å°ï¼Œé™ä½ä½¿ç”¨é—¨æ§› ï½œ Higress 1.0.0 RC ç‰ˆæœ¬å‘å¸ƒ","type":0,"sectionRef":"#","url":"/zh-cn/blog/release-100","content":"","keywords":"higress GA","version":null},{"title":"å‰è¨€â€‹","type":1,"pageTitle":"ä¸Šçº¿æ§åˆ¶å°ï¼Œé™ä½ä½¿ç”¨é—¨æ§› ï½œ Higress 1.0.0 RC ç‰ˆæœ¬å‘å¸ƒ","url":"/zh-cn/blog/release-100#å‰è¨€","content":"å†æ—¶ 5 ä¸ªå¤šæœˆï¼ŒHigress æ¨å‡ºäº†é¦–ä¸ª RC ï¼ˆRelease Candidateï¼Œå³æ­£å¼å‘å¸ƒçš„å€™é€‰ï¼‰ç‰ˆæœ¬ 1.0.0-rcï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡æ§åˆ¶å°ï¼Œå¼€ç®±å³ç”¨åœ°ä½¿ç”¨äº‘åŸç”Ÿç½‘å…³ã€‚ é€‰ç”¨ Higress ä½œä¸ºäº‘åŸç”Ÿç½‘å…³çš„æ ¸å¿ƒä¼˜åŠ¿å¦‚ä¸‹ï¼š æ˜“ç”¨æ€§ â€œäº‘åŸç”Ÿâ€å·²ç»ä¸å†æ˜¯ä¸€ä¸ªæ–°é²œè¯ï¼Œä½†ä¼ä¸šå¯¹äº‘åŸç”ŸæŠ€æœ¯çš„å­¦ä¹ ä½¿ç”¨æˆæœ¬ä»æœ‰è®¸å¤šé¡¾è™‘ï¼Œå¯¹äº‘åŸç”Ÿæ–°æ ‡å‡†çš„è¿½èµ¶åˆæœ‰å¾ˆå¤šç„¦è™‘ï¼› Higress åŒæ—¶æä¾›äº†æœ¬åœ°å®‰è£…/ç”Ÿäº§éƒ¨ç½²çš„ quickstartï¼Œå¯ä»¥ä¸€é”®éƒ¨ç½²ï¼Œå¹¶é€šè¿‡æ§åˆ¶å°æ“ä½œå¿«é€Ÿä¸Šæ‰‹ï¼›åŸºäºç®€å•æ˜“ç”¨çš„æ§åˆ¶å°ï¼ŒHigress å¯ä»¥å°è£… Ingress/Gateway API çš„æ ‡å‡†ç»†èŠ‚ï¼Œæ ¹æ²»æŠ€æœ¯è¿½èµ¶ç„¦è™‘ã€‚ æ ‡å‡†åŒ– K8s å¸¦æ¥äº†äº‘åŸç”Ÿçš„è·¯ç”±æ ‡å‡† Ingress/Gateway APIï¼Œå¦‚åŒ POSIX å®šä¹‰ Unix å¯ç§»æ¤æ“ä½œç³»ç»Ÿæ ‡å‡†ï¼Œå†æ—¶ 35 å¹´ç»ä¹…ä¸è¡°ï¼Œäº‘åŸç”Ÿçš„è·¯ç”±æ ‡å‡†çš„ç”Ÿå‘½å‘¨æœŸä¸€å®šä¼šè¿œè¶…è¿‡ K8s æœ¬èº«ï¼› Higress ç»“åˆé˜¿é‡Œå†…éƒ¨å®è·µä»¥åŠé˜¿é‡Œäº‘äº§å“æ²‰æ·€ï¼Œç§¯ç´¯äº†åŸºäº Ingress API çš„ä¸°å¯Œçš„è·¯ç”±ç­–ç•¥æ‰©å±•èƒ½åŠ›ï¼ŒåŒæ—¶è¿˜å…¼å®¹å¤§éƒ¨åˆ† Nginx Ingress èƒ½åŠ›ï¼Œè¿™äº›èƒ½åŠ›åç»­ä¹Ÿå°†åœ¨ Gateway API ä¸Šæ”¯æŒã€‚ é«˜é›†æˆ ä¼ä¸šå†…æœ‰å¤§é‡ä¼ ç»Ÿæ¶æ„éƒ¨ç½²çš„æœåŠ¡ï¼Œä¼šæˆä¸ºå‘äº‘åŸç”Ÿæ¶æ„æ¼”è¿›çš„æŠ€æœ¯è´Ÿæ‹…ï¼Œè¦æ±‚äº‘åŸç”Ÿç½‘å…³å…·å¤‡å¯¹æ¥å¼‚æ„æœåŠ¡æ¶æ„çš„èƒ½åŠ›ï¼› åŸºäº Higress æä¾›çš„å¤šç§æœåŠ¡å‘ç°æœºåˆ¶ï¼Œç½‘å…³è·¯ç”±ä¸ä»…å¯ä»¥è½¬å‘åˆ° K8s æœåŠ¡ï¼Œä¹Ÿå¯ä»¥ç›´æ¥é…ç½® IP è½¬å‘åˆ°åˆ°ç‰©ç†æœºä¸Šçš„æœåŠ¡ï¼›åŸºäº Nacos/ZooKeeper ç­‰æ³¨å†Œä¸­å¿ƒå¯¹æ¥ï¼Œè¿˜å¯ä»¥è½»æ¾å®ç° Spring Cloud å’Œ Dubbo å¾®æœåŠ¡çš„è·¯ç”±ï¼Œæ— è®ºå…¶æ˜¯å¦éƒ¨ç½²åœ¨ K8s å†…ã€‚ æ˜“æ‰©å±• åŸºäºæ‰©å±•æœºåˆ¶è¿›è¡ŒäºŒæ¬¡å¼€å‘çš„èƒ½åŠ›ï¼Œæ˜¯äº‘åŸç”Ÿç½‘å…³åœ¨ä¸åŒä¸šåŠ¡åœºæ™¯ä¸‹éƒ½èƒ½é€‚é…è½åœ°çš„å…³é”®ï¼› Higressæä¾›äº†çµæ´»çš„æ’ä»¶æ‰©å±•æœºåˆ¶ï¼Œç›®å‰æ’ä»¶å¸‚åœºå·²ç»æ¨å‡ºå¤šä¸ªå®˜æ–¹æ’ä»¶ï¼Œå¹¶æ”¯æŒç”¨æˆ·é€šè¿‡æ§åˆ¶å°ç›´æ¥ä¸Šä¼ è‡ªå·±å¼€å‘çš„æ’ä»¶ï¼ŒåŒæ—¶å¼€æºç¤¾åŒºçš„æ’ä»¶å¸‚åœºç”Ÿæ€ä¹Ÿåœ¨ä¸æ–­å»ºè®¾ä¸­ã€‚ çƒ­æ›´æ–° ä¼ ç»Ÿ Nginx æ›´æ–°è§„åˆ™éœ€è¦ reload ä¼šå¯¼è‡´é“¾æ¥æŠ–åŠ¨ï¼Œå¯¼è‡´æµé‡æŸå¤±ï¼Œå¯¹å®æ—¶é€šä¿¡ã€è§†é¢‘ã€IOTæ— æ³•å®¹å¿ï¼› å¯¹äºè·¯ç”±è§„åˆ™ï¼ŒWasm æ’ä»¶é€»è¾‘æ›´æ–°ï¼Œä»¥åŠè¯ä¹¦æ”¹åŠ¨ç­‰ç­‰ï¼ŒHigress å…¨éƒ¨æ”¯æŒçƒ­æ›´æ–°ï¼Œä¸ä¼šé€ æˆä»»ä½•è¿æ¥æŠ–åŠ¨ã€‚ ","version":null,"tagName":"h2"},{"title":"ä¼ä¸šè½åœ°æ”¯æŒâ€‹","type":1,"pageTitle":"ä¸Šçº¿æ§åˆ¶å°ï¼Œé™ä½ä½¿ç”¨é—¨æ§› ï½œ Higress 1.0.0 RC ç‰ˆæœ¬å‘å¸ƒ","url":"/zh-cn/blog/release-100#ä¼ä¸šè½åœ°æ”¯æŒ","content":"åœ¨ RC ç‰ˆæœ¬é˜¶æ®µä½¿ç”¨ Higress çš„ä¼ä¸šç”¨æˆ·ï¼Œç¤¾åŒºä¼šåœ¨è½åœ°é˜¶æ®µæä¾›æ›´å¤šå¸®åŠ©ï¼Œæˆ‘ä»¬å»ºç«‹äº† Higress ä¼ä¸šè½åœ°ç¾¤ï¼Œå¯ä»¥è”ç³»æˆ‘(å¾®ä¿¡:nomadao é’‰é’‰:chengtanzty)ï¼Œä¼šå°†ä½ åŠ è¿›ç¾¤ï¼Œç¾¤é‡Œæœ‰ç¤¾åŒºæ ¸å¿ƒç ”å‘åŒå­¦ï¼Œå¯ä»¥æä¾›æ›´åŠæ—¶çš„å“åº”å’Œå¸®åŠ©ã€‚ ","version":null,"tagName":"h3"},{"title":"å®‰è£…å‡çº§æ–¹å¼â€‹","type":1,"pageTitle":"ä¸Šçº¿æ§åˆ¶å°ï¼Œé™ä½ä½¿ç”¨é—¨æ§› ï½œ Higress 1.0.0 RC ç‰ˆæœ¬å‘å¸ƒ","url":"/zh-cn/blog/release-100#å®‰è£…å‡çº§æ–¹å¼","content":"å®‰è£… RC ç‰ˆæœ¬ï¼Œéœ€è¦ helm å®‰è£…æˆ–å‡çº§æ—¶éœ€è¦æŒ‡å®š--develå‚æ•°ï¼Œä¾‹å¦‚ï¼šhelm upgrade higress -n higress-system --devel 1.0.0 RC ç‰ˆæœ¬å·²ç»åœ¨ç¤¾åŒºå°ä¼™ä¼´çš„åä½œä¸‹å®Œæˆäº†å¤šè½®æµ‹è¯•å’Œä¿®å¤å·¥ä½œï¼Œæ¬¢è¿å¤§å®¶ä½¿ç”¨ã€‚æœ€ç»ˆçš„æ­£å¼ç‰ˆæœ¬ï¼Œä¹Ÿå°†åœ¨è¿‘æœŸå¾ˆå¿«æ¨å‡ºã€‚ ","version":null,"tagName":"h3"},{"title":"æ§åˆ¶å°åŠŸèƒ½é€Ÿè§ˆâ€‹","type":1,"pageTitle":"ä¸Šçº¿æ§åˆ¶å°ï¼Œé™ä½ä½¿ç”¨é—¨æ§› ï½œ Higress 1.0.0 RC ç‰ˆæœ¬å‘å¸ƒ","url":"/zh-cn/blog/release-100#æ§åˆ¶å°åŠŸèƒ½é€Ÿè§ˆ","content":"ä¸°å¯Œçš„å¯è§‚æµ‹ æä¾›å¼€ç®±å³ç”¨çš„å¯è§‚æµ‹ï¼ŒGrafana&amp;Prometheus å¯ä»¥ä½¿ç”¨å†…ç½®çš„ä¹Ÿå¯å¯¹æ¥è‡ªå»ºçš„ï¼Œå…·ä½“å¯ä»¥å‚è€ƒæ–‡æ¡£ æ’ä»¶æ‰©å±•æœºåˆ¶ å®˜æ–¹æä¾›äº†å¤šç§æ’ä»¶ï¼Œç”¨æˆ·ä¹Ÿå¯ä»¥å¼€å‘è‡ªå·±çš„æ’ä»¶ï¼Œæ„å»ºæˆ docker/oci é•œåƒååœ¨æ§åˆ¶å°é…ç½®ï¼Œå¯ä»¥å®æ—¶å˜æ›´æ’ä»¶é€»è¾‘ï¼Œå¯¹æµé‡å®Œå…¨æ— æŸã€‚ å¤šç§æœåŠ¡å‘ç° é»˜è®¤æä¾› K8s Service æœåŠ¡å‘ç°ï¼Œé€šè¿‡é…ç½®å¯ä»¥å¯¹æ¥ Nacos/ZooKeeper ç­‰æ³¨å†Œä¸­å¿ƒå®ç°æœåŠ¡å‘ç°ï¼Œä¹Ÿå¯ä»¥åŸºäºé™æ€ IP æˆ–è€… DNS æ¥å‘ç° åŸŸåå’Œè¯ä¹¦ å¯ä»¥åˆ›å»ºç®¡ç† TLS è¯ä¹¦ï¼Œå¹¶é…ç½®åŸŸåçš„ HTTP/HTTPS è¡Œä¸ºï¼ŒåŸŸåç­–ç•¥é‡Œæ”¯æŒå¯¹ç‰¹å®šåŸŸåç”Ÿæ•ˆæ’ä»¶ ä¸°å¯Œçš„è·¯ç”±èƒ½åŠ› åŸºäºä¸Šé¢é…ç½®çš„æœåŠ¡å‘ç°æœºåˆ¶ï¼Œå‘ç°çš„æœåŠ¡ä¼šå‡ºç°åœ¨æœåŠ¡åˆ—è¡¨ä¸­ï¼›åˆ›å»ºè·¯ç”±æ—¶ï¼Œé€‰æ‹©åŸŸåï¼Œå®šä¹‰è·¯ç”±åŒ¹é…æœºåˆ¶ï¼Œå†é€‰æ‹©ç›®æ ‡æœåŠ¡è¿›è¡Œè·¯ç”±ï¼›è·¯ç”±ç­–ç•¥é‡Œæ”¯æŒå¯¹ç‰¹å®šè·¯ç”±ç”Ÿæ•ˆæ’ä»¶ ","version":null,"tagName":"h2"},{"title":"è¿›é˜¶ä½¿ç”¨â€‹","type":1,"pageTitle":"ä¸Šçº¿æ§åˆ¶å°ï¼Œé™ä½ä½¿ç”¨é—¨æ§› ï½œ Higress 1.0.0 RC ç‰ˆæœ¬å‘å¸ƒ","url":"/zh-cn/blog/release-100#è¿›é˜¶ä½¿ç”¨","content":"Higress æ§åˆ¶å°çš„åŠŸèƒ½è¿˜åœ¨ä¸æ–­ä¸°å¯Œå’Œæ¼”è¿›ä¸­ï¼Œå½“å‰è¿˜æœ‰å¾ˆå¤š Higress Ingress æ³¨è§£çš„èƒ½åŠ›æ²¡æœ‰æ”¯æŒï¼Œå¦‚æœæœ‰è¿™éƒ¨åˆ†æ·±åº¦ä½¿ç”¨çš„éœ€æ±‚ï¼Œå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡æ¡£è¿›è¡Œè¿›é˜¶é…ç½® å¦‚æœå¸Œæœ›ä½¿ç”¨ Istio çš„èƒ½åŠ›è¿›è¡Œæµé‡æ²»ç†ï¼Œå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡æ¡£çš„æ”¯æŒ Istio CRD ä¸€èŠ‚ã€‚åŸºäº Istio çš„ EnvoyFilter API å¯ä»¥å®ç°æ›´å¤šç»†ç²’åº¦çš„ç®¡æ§èƒ½åŠ›ã€‚ ","version":null,"tagName":"h3"},{"title":"ç¤¾åŒºâ€‹","type":1,"pageTitle":"ä¸Šçº¿æ§åˆ¶å°ï¼Œé™ä½ä½¿ç”¨é—¨æ§› ï½œ Higress 1.0.0 RC ç‰ˆæœ¬å‘å¸ƒ","url":"/zh-cn/blog/release-100#ç¤¾åŒº","content":"æ¬¢è¿è®¤é¢† Higress Issue ä»»åŠ¡ï¼šhttps://github.com/alibaba/higress/issues?q=is%3Aopen+is%3Aissue+label%3A%22help+wanted%22 å®Œæˆä¸€å®šæ•°é‡çš„ Issues å°±å¯ä»¥æˆä¸º Higress Committerï¼Œä¹Ÿæœ‰æœºä¼šè·å¾—å¼€æºç¤¾åŒºçš„ç¤¼ç‰©å’Œè£èª‰ğŸ† æ¬¢è¿åŠ å…¥ Higress ç¤¾åŒºç¾¤ï¼ŒåŠæ—¶äº†è§£æ›´å¤š Higress åŠ¨å‘ï¼š  ","version":null,"tagName":"h2"},{"title":"Higress å¼€æºä¸€å‘¨å¹´ï¼šæ–°ç‰ˆæœ¬ï¼Œæ–°æ ‡å‡†ï¼Œæ–°å·¥å…·ï¼Œæ–°å¾ç¨‹","type":0,"sectionRef":"#","url":"/zh-cn/blog/release-1.3","content":"","keywords":"higress ingress Gateway API","version":null},{"title":"å†ç¨‹å›é¡¾â€‹","type":1,"pageTitle":"Higress å¼€æºä¸€å‘¨å¹´ï¼šæ–°ç‰ˆæœ¬ï¼Œæ–°æ ‡å‡†ï¼Œæ–°å·¥å…·ï¼Œæ–°å¾ç¨‹","url":"/zh-cn/blog/release-1.3#å†ç¨‹å›é¡¾","content":" Higress å¼€æºä¸€å¹´æ—¶é—´ï¼Œä¸€å…±å‘å¸ƒäº† 18 ä¸ª release ç‰ˆæœ¬ï¼Œæ”¶è·äº† 40 å¤šä½ç¤¾åŒºè´¡çŒ®è€…å’Œ 1800+ starï¼Œä¸Šå›¾æ˜¯è¿™ä¸€å¹´è¿‡æ¥è¾¾æˆçš„ä¸€äº›å…³é”®çš„é‡Œç¨‹ç¢‘ã€‚ å‰é¢åŠå¹´é€šè¿‡é›†æˆå¼€æºç”Ÿæ€ï¼Œæ‰“ç£¨å¼€æºç‰ˆæœ¬ç¨³å®šæ€§ï¼Œå¹¶åœ¨å‘å¸ƒ 1.0 GA ç‰ˆæœ¬åï¼Œç¤¾åŒºåˆé©¬ä¸åœè¹„å‘å¸ƒäº† 1.1 å’Œ 1.2 ä¸¤ä¸ªé‡è¦ç‰ˆæœ¬ï¼Œå®ç°äº†é K8s éƒ¨ç½²ï¼ŒKnative é€‚é…ç­‰æ ¸å¿ƒèƒ½åŠ›ã€‚ Higress 1.3 ç‰ˆæœ¬å·²ç»æ­£å¼å‘å¸ƒï¼Œé™¤äº†å¢åŠ çš„æ–°åŠŸèƒ½ï¼Œå·²æœ‰èƒ½åŠ›ä¹Ÿåœ¨å¤§é‡ç¤¾åŒºç”¨æˆ·åé¦ˆçš„è¿‡ç¨‹ä¸­ä¸æ–­å®Œå–„æ”¹è¿›ï¼Œè¿™ä¸ªç‰ˆæœ¬åŒæ—¶æ ‡å¿—ç€ 1.x è¿›å…¥å¯ä»¥å¤§è§„æ¨¡ç”Ÿäº§ä½¿ç”¨çš„çŠ¶æ€ã€‚ ","version":null,"tagName":"h2"},{"title":"æ–°ç‰ˆæœ¬ï¼šåŠŸèƒ½é€Ÿè§ˆâ€‹","type":1,"pageTitle":"Higress å¼€æºä¸€å‘¨å¹´ï¼šæ–°ç‰ˆæœ¬ï¼Œæ–°æ ‡å‡†ï¼Œæ–°å·¥å…·ï¼Œæ–°å¾ç¨‹","url":"/zh-cn/blog/release-1.3#æ–°ç‰ˆæœ¬åŠŸèƒ½é€Ÿè§ˆ","content":"è‡ªå‘å¸ƒ 1.2 ç‰ˆæœ¬è¿‡å»äº†ä¸€ä¸ªå¤šæœˆæ—¶é—´ï¼Œ1.3 ç‰ˆæœ¬æ­£å¼å‘å¸ƒï¼Œå¸¦æ¥ä¸¤ä¸ªå…¨æ–°èƒ½åŠ›ï¼š æ–°æ ‡å‡†ï¼šæ”¯æŒæœ€æ–°ç‰ˆæœ¬ Gateway API æ ‡å‡†ï¼Œå¹¶ä¸”å…·å¤‡ä» Ingress å¹³æ»‘æ¸è¿›æ¼”è¿›ï¼Œä»¥åŠå¯¹æ¥å¤šç§æœåŠ¡å‘ç°æœºåˆ¶çš„èƒ½åŠ›æ–°å·¥å…·ï¼šæ­£å¼ release äº† hgctl (Higress Crontroller) è¿™ä¸ª &quot;All in one&quot; çš„æ–°å·¥å…·ï¼Œä¸ä»…å¯ä»¥æ›¿ä»£ Helm å®ç°æ›´ç®€æ˜“çš„å®‰è£…ï¼Œè¿˜æä¾›äº† WASM æ’ä»¶å¼€å‘å·¥å…·åŒ…ï¼Œä»¥åŠç½‘å…³é…ç½®æ£€æŸ¥ç­‰ä¸°å¯ŒåŠŸèƒ½ é™¤äº†è¿™ä¸¤ä¸ªæ ¸å¿ƒåŠŸèƒ½å¤–ï¼Œè¿˜æœ‰ä¸€äº›å®ç”¨åŠŸèƒ½ï¼š æä¾›äº† Higress Admin Java SDKï¼Œå¯ä»¥ç»Ÿä¸€å¯¹æ¥ K8s å’Œé K8s ç¯å¢ƒï¼Œç®¡ç†åŸŸå/è·¯ç”±ç­‰é…ç½®æä¾›äº† OIDC æ’ä»¶ï¼Œæ”¯æŒå¯¹æ¥ Keycloak/Okta ç­‰ç¬¬ä¸‰æ–¹èº«ä»½è®¤è¯ç³»ç»ŸHigress Console çš„æ˜“ç”¨æ€§å’Œå®‰å…¨æ€§æå‡ï¼Œä¸å†é€šè¿‡è·¯ç”±æš´éœ²ï¼Œæ”¯æŒç•Œé¢åˆå§‹åŒ–/ä¿®æ”¹å¯†ç  ä¸æ­¤åŒæ—¶ï¼ŒHigress å¼€æºç¤¾åŒºå·²ç»å¼€å§‹å‡†å¤‡è¸ä¸Šä¸€æ®µå…¨æ–°çš„å¼€æºå¾ç¨‹... ","version":null,"tagName":"h2"},{"title":"æ–°æ ‡å‡†ï¼šæ”¯æŒæœ€æ–°ç‰ˆ Gateway APIâ€‹","type":1,"pageTitle":"Higress å¼€æºä¸€å‘¨å¹´ï¼šæ–°ç‰ˆæœ¬ï¼Œæ–°æ ‡å‡†ï¼Œæ–°å·¥å…·ï¼Œæ–°å¾ç¨‹","url":"/zh-cn/blog/release-1.3#æ–°æ ‡å‡†æ”¯æŒæœ€æ–°ç‰ˆ-gateway-api","content":"Gateway API åœ¨ 11 æœˆ 1 æ—¥æ­£å¼å‘å¸ƒäº† 1.0.0 ç‰ˆæœ¬ï¼Œå…¶ä¸­ GatewayClass, Gateway, HTTPRoute è¿™ä¸‰ä¸ª APIæ­£å¼å®£å¸ƒ GAï¼Œå‘å¸ƒäº† v1 ç‰ˆæœ¬ï¼šgateway.networking.k8s.io/v1ã€‚ ç›®å‰ Higress å·²ç»å¯ä»¥æ”¯æŒè¿™äº›æœ€æ–°ç‰ˆæœ¬çš„ API é…ç½®ï¼Œåªéœ€åœ¨å®‰è£…/å‡çº§ Higress æ—¶é…ç½®å¼€å¯ Gateway APIï¼š ä½¿ç”¨ Helm ï¼šé€šè¿‡å‚æ•° --set global.enableGatewayAPI=trueä½¿ç”¨ Hgctl ï¼šé€šè¿‡å‘½ä»¤è¡Œå‚æ•°æˆ–è€… install.yaml ä¸­é…ç½® global.enableGatewayAPI=true é¦–å…ˆåˆ›å»º GatewayClass èµ„æºï¼š  apiVersion: gateway.networking.k8s.io/v1 kind: GatewayClass metadata: name: higress-gateway spec: controllerName: &quot;higress.io/gateway-controller&quot;  æ¥ç€åœ¨å®‰è£… Higress çš„å‘½åç©ºé—´ä¸‹ï¼Œåˆ›å»º Gateway èµ„æºï¼Œé€šè¿‡ gatewayClassName å…³è”ä¸Šé¢åˆ›å»ºçš„ GatewayClass èµ„æºï¼ŒæŒ‡å®šç”± Higress æ¥ç®¡ç†æ­¤ Gateway é…ç½®ï¼Œä¸‹é¢ä¸ºåŸŸååŒæ—¶é…ç½®äº† HTTP å’Œ HTTPS å…¥å£ï¼Œå¹¶ä¸º HTTPS å…¥å£é…ç½®äº†è¯ä¹¦ï¼š  apiVersion: gateway.networking.k8s.io/v1 kind: Gateway metadata: name: higress-gateway namespace: higress-system spec: gatewayClassName: higress-gateway listeners: - name: foobar hostname: &quot;*.foobar.com&quot; port: 80 protocol: HTTP allowedRoutes: namespaces: from: All - name: foobar-https hostname: &quot;*.foobar.com&quot; port: 443 protocol: HTTPS allowedRoutes: namespaces: from: All tls: certificateRefs: - kind: Secret name: wildcard-foobar-com mode: Terminate  å› ä¸ºä¸Šé¢ Gateway é€šè¿‡ allowedRoutes é…ç½®äº†å…è®¸æ‰€æœ‰å‘½åç©ºé—´çš„è·¯ç”±æ¥å…³è”ï¼Œæ‰€ä»¥è¿™é‡Œåœ¨ default å‘½åç©ºé—´ä¸‹åˆ›å»º HTTPRouteï¼Œå…³è”ä¸Šé¢åˆ›å»ºçš„ Gatewayï¼Œå³å¯å®šä¹‰åŸŸåä¸‹çš„å…·ä½“è·¯ç”±ï¼š  apiVersion: gateway.networking.k8s.io/v1 kind: HTTPRoute metadata: name: foobar namespace: default spec: parentRefs: - name: higress-gateway namespace: higress-system hostnames: [&quot;www.foobar.com&quot;] rules: - matches: - path: type: PathPrefix value: /foo backendRefs: - name: foo-service port: 5678  ä»¥ä¸Šå°±æ˜¯ Gateway API çš„ä¸€ä¸ªç®€å•ç”¨æ³•ç¤ºä¾‹ï¼ŒGateway API è¿˜æœ‰å¾ˆå¤šåŠŸèƒ½å’Œç©æ³•ï¼Œåé¢ Higress å…¬ä¼—å·/åšå®¢ä¼šå‡ºä¸€ä¸ªç³»åˆ—è¿›è¡Œç³»ç»Ÿåˆ†äº«å’Œä»‹ç»ã€‚ æ¬¢è¿ç»“åˆå®˜æ–¹ API æ–‡æ¡£ï¼Œå¹¶ä½¿ç”¨ hgctl ï¼ˆè·å–æ–¹å¼è§ä¸‹æ–‡ï¼‰åœ¨è‡ªå·±ç”µè„‘ä¸Šå®‰è£…ä¸€ä¸ª local-k8s æ¨¡å¼çš„ Higressï¼Œæ¥å¼€å¯å¯¹è¿™ä¸€æ–°æ ‡å‡†çš„æ¢ç´¢ï¼š  # ä¸€é”®å®‰è£…, äº¤äº’å¼å‘½ä»¤é€‰æ‹©ç¬¬ä¸€ç§å®‰è£…æ¨¡å¼ local-k8sï¼Œå°†é»˜è®¤å®‰è£… Gateway API CRD hgctl install  ","version":null,"tagName":"h2"},{"title":"å¤šç§æœåŠ¡å‘ç°èƒ½åŠ›â€‹","type":1,"pageTitle":"Higress å¼€æºä¸€å‘¨å¹´ï¼šæ–°ç‰ˆæœ¬ï¼Œæ–°æ ‡å‡†ï¼Œæ–°å·¥å…·ï¼Œæ–°å¾ç¨‹","url":"/zh-cn/blog/release-1.3#å¤šç§æœåŠ¡å‘ç°èƒ½åŠ›","content":"åœ¨ Ingress API æ ‡å‡†ä¸‹ï¼ŒHigress å¯¹æ¥å¤šç§æœåŠ¡å‘ç°èƒ½åŠ›æ˜¯ç‹¬æ ‘ä¸€å¸œçš„ï¼Œåœ¨ Gateway API æ ‡å‡†ä¸‹ï¼Œ Higress ä»å°±ä¿æŒäº†è¿™ä¸€èƒ½åŠ›ä¼˜åŠ¿ï¼š é¦–å…ˆé€šè¿‡ McpBridge èµ„æºï¼Œå¯ä»¥å®šä¹‰å¤šç§æœåŠ¡å‘ç°æœºåˆ¶ï¼š  apiVersion: networking.higress.io/v1 kind: McpBridge metadata: name: default namespace: higress-system spec: registries: - domain: 127.0.0.1 nacosGroups: - DEFAULT_GROUP name: my-local-nacos port: 8848 type: nacos2 - domain: 127.0.0.1 name: my-local-zk port: 2181 type: zookeeper - domain: 127.0.0.1 name: my-local-eureka port: 8761 type: eureka - domain: 127.0.0.1 consulDatacenter: dc1 name: my-local-consul port: 8500 type: consul  åˆ›å»ºä¸€ä¸ª HTTPRoute èµ„æºï¼Œå¯ä»¥åŒæ—¶å¯¹æ¥ K8s æœåŠ¡ï¼Œå’Œæ³¨å†Œä¸­å¿ƒçš„æœåŠ¡ï¼Œå¹¶å®ç°ç°åº¦è·¯ç”±èƒ½åŠ›ï¼š  apiVersion: gateway.networking.k8s.io/v1 kind: HTTPRoute metadata: name: http namespace: default spec: parentRefs: - name: higress-gateway namespace: higress-system rules: - matches: - path: type: PathPrefix value: / backendRefs: - name: service-provider.DEFAULT-GROUP.public.nacos group: networking.higress.io port: 8080 weight: 90 - name: foo-service port: 5678 weight: 10  å’Œ K8s æœåŠ¡ä¸åŒçš„æ˜¯ï¼Œè¿™é‡Œ group ä¸º networking.higress.io çš„æœåŠ¡å¹¶ä¸éœ€è¦æå‰åˆ›å»º CRD èµ„æºï¼Œè¿™æ›´ç¬¦åˆä¼ ç»Ÿå¾®æœåŠ¡ç”¨æˆ·çš„ä¹ æƒ¯ï¼Œå³æœåŠ¡æ¨¡å‹ä¸éœ€è¦æå‰åˆ›å»ºï¼Œæ˜¯é€šè¿‡æœåŠ¡èŠ‚ç‚¹æ³¨å†Œè‡ªåŠ¨ç”Ÿæˆã€‚ ","version":null,"tagName":"h3"},{"title":"Ingress API å’Œ Gateway API ä¹‹é—´å¦‚ä½•é€‰æ‹©â€‹","type":1,"pageTitle":"Higress å¼€æºä¸€å‘¨å¹´ï¼šæ–°ç‰ˆæœ¬ï¼Œæ–°æ ‡å‡†ï¼Œæ–°å·¥å…·ï¼Œæ–°å¾ç¨‹","url":"/zh-cn/blog/release-1.3#ingress-api-å’Œ-gateway-api-ä¹‹é—´å¦‚ä½•é€‰æ‹©","content":"æœ‰äº† Gateway APIï¼Œæ˜¯å¦åº”è¯¥ç«‹å³æŠ›å¼ƒ Ingress APIï¼Ÿ åªæœ‰æœ€åˆé€‚çš„ï¼Œæ²¡æœ‰æœ€å¥½çš„ã€‚Gateway API è™½ç„¶ä¸ºæ›´å¤šç½‘å…³èƒ½åŠ›åšäº†æ ‡å‡†åŒ–ï¼Œä½† CRD çš„ç§ç±»å’Œå¤æ‚åº¦ä¹Ÿå¢åŠ äº†ï¼Œç›¸æ¯”ä¹‹ä¸‹å¯¹äºå¤§éƒ¨åˆ†ç®€å•ç”¨ä¾‹åœºæ™¯ï¼ŒIngress API æ›´åŠ ç®€å•æ˜“ç”¨ã€‚ å¯¹äºä»¥ä¸‹åœºæ™¯ï¼Œé‡‡ç”¨ Gateway API æ›¿ä»£ Ingress API ä¼šå¸¦æ¥å¾ˆå¤§å¸®åŠ©ï¼š å¤§å‹å›¢é˜Ÿåˆ’åˆ†äº† SRE è§’è‰²å’Œä¸šåŠ¡ç ”å‘è§’è‰²ï¼Œç”± SRE é€šè¿‡ Gateway èµ„æºç»Ÿä¸€ç®¡ç†ç«™ç‚¹åŸŸåå’Œè¯ä¹¦ï¼Œç”±ä¸šåŠ¡ç ”å‘é€šè¿‡ HTTPRoute èµ„æºç®¡ç†ä¸šåŠ¡è·¯ç”±ï¼Œå®ç°èŒè´£åˆ’åˆ†ï¼Œæƒé™æ”¶æ•›åˆ›å»ºçš„è·¯ç”±å’Œ Service æœ‰ä¸åœ¨ä¸€ä¸ªå‘½åç©ºé—´çš„éœ€æ±‚ï¼Œå¯ä»¥å€ŸåŠ© ReferenceGrant èµ„æºå®ç°æœ‰å¤§é‡è¯ä¹¦éœ€è¦é›†ä¸­å¼ç®¡ç†ï¼Œä¸å¸Œæœ›å°†è¯ä¹¦ Secret åŒæ­¥åˆ° Ingress æ‰€åœ¨å‘½åç©ºé—´ï¼Œå¸¦æ¥å®‰å…¨é£é™© Gateway API çš„å¦ä¸€ä¸ªå¥½å¤„æ˜¯å¯¹äºæ›´å¤šåŠŸèƒ½çš„æ ‡å‡†åŒ–å®šä¹‰ï¼Œæˆ‘ä»¬å»ºè®®é‡åˆ°å®é™…éœ€è¦å†è½¬æ¢åˆ°è¿™ä¸ªæ–°çš„æ ‡å‡†ï¼Œè€Œä¸å¿…ç›²ç›®è·Ÿéšã€‚ Higress æ”¯æŒ Gateway API å’Œ Ingress API æ··åˆä½¿ç”¨ï¼ŒGateway API ä¸‹çš„åŸŸåè·¯ç”±å°†æ¯” Ingress API ä¼˜å…ˆåŒ¹é…ï¼Œå’Œ Ingress ç›¸åŒèµ„æºåç§°çš„ HTTPRoute è¿˜ä¼šç»§æ‰¿ WASM æ’ä»¶é…ç½®ï¼Œè¿™æ ·ç”¨æˆ·å¯ä»¥æŒ‰éœ€é‡‡ç”¨ Gateway APIï¼Œå¹³æ»‘åœ°å®Œæˆä» Ingress API å‘ Gateway API çš„æ¼”è¿›ï¼Œæ— éœ€ç„¦è™‘ API æ ‡å‡†å‡çº§è¿‡ç¨‹ä¸­äº§ç”Ÿä¸šåŠ¡æŸå¤±ã€‚ ","version":null,"tagName":"h3"},{"title":"æ–°å·¥å…·ï¼šAll in one çš„ hgctlâ€‹","type":1,"pageTitle":"Higress å¼€æºä¸€å‘¨å¹´ï¼šæ–°ç‰ˆæœ¬ï¼Œæ–°æ ‡å‡†ï¼Œæ–°å·¥å…·ï¼Œæ–°å¾ç¨‹","url":"/zh-cn/blog/release-1.3#æ–°å·¥å…·all-in-one-çš„-hgctl","content":"","version":null,"tagName":"h2"},{"title":"æ›¿ä»£ Helm ç”¨äºå®‰è£…/å‡çº§â€‹","type":1,"pageTitle":"Higress å¼€æºä¸€å‘¨å¹´ï¼šæ–°ç‰ˆæœ¬ï¼Œæ–°æ ‡å‡†ï¼Œæ–°å·¥å…·ï¼Œæ–°å¾ç¨‹","url":"/zh-cn/blog/release-1.3#æ›¿ä»£-helm-ç”¨äºå®‰è£…å‡çº§","content":"åœ¨ K8s ä¸‹ç”¨ Helm å®‰è£…/å‡çº§ç»„ä»¶å¾ˆæ–¹ä¾¿ï¼Œä½†åœ¨ Higress çš„åœºæ™¯ä¸‹ä»ç„¶å­˜åœ¨ä¸€äº›é—®é¢˜ï¼š æ— æ³•æ”¯æŒé K8s åœºæ™¯ä¸‹çš„å®‰è£…/å‡çº§Higress æœ‰å¾ˆå¤šå®‰è£…å‚æ•°ï¼Œè¿›è¡Œå‡çº§ç­‰æ“ä½œæ—¶ä¸å¥½ç»´æŠ¤ï¼Œä½¿ç”¨reuse-values æœ‰ä¸€äº›å‰¯ä½œç”¨ï¼Œä¸”å®¹æ˜“è¯¯æ“ä½œæ— æ³•ç®¡ç† CRD è·Ÿéšç‰ˆæœ¬æ›´æ–°ï¼Œéœ€è¦æ‰‹åŠ¨æ›´æ–° Higress å€Ÿé‰´äº† istio çš„ istioctlï¼Œæä¾›äº† hgctl è¿™ä¸ªå‘½ä»¤è¡Œå·¥å…·è§£å†³äº†ä¸Šè¿°é—®é¢˜ï¼Œé€šè¿‡ä»¥ä¸‹å‘½ä»¤å³å¯å®‰è£… hgctl  # ä¸‹è½½æœ€æ–°ç‰ˆ Hgctlï¼š curl -Ls https://raw.githubusercontent.com/alibaba/higress/main/tools/hack/get-hgctl.sh | VERSION=latest bash  hgctl é›†æˆäº†ä¸‰ç§ Higress å®‰è£…æ¨¡å¼ï¼Œå¹¶ç»Ÿä¸€äº†å‡çº§/è¿ç»´æ“ä½œï¼š æœ¬åœ° K8s ç¯å¢ƒï¼ˆä¾‹å¦‚kind/k3sï¼‰æ¨¡å¼æ­£å¼ K8s ç¯å¢ƒæ¨¡å¼ä¸ä¾èµ– K8s çš„çº¯ Docker ç¯å¢ƒæ¨¡å¼ ç›´æ¥æ‰§è¡Œ hgctl install å‘½ä»¤å³å¯é€‰æ‹©ä»»æ„æ¨¡å¼è¿›è¡Œå®‰è£… å®‰è£…é…ç½®æ–‡ä»¶å°†å­˜è‡³ ~/.hgctl/profiles/install.yaml ç›®å½•ä¸‹ï¼ŒæŸ¥çœ‹è¯¥æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š  charts: higress: name: higress # å®‰è£…æ–‡ä»¶çš„ helm repo åœ°å€ url: https://higress.io/helm-charts # æ‰§è¡Œ hgctl upgrade æ—¶å°†è‡ªåŠ¨æ›´æ–°è‡³æœ€æ–°ç‰ˆæœ¬ version: latest console: # å¼€å¯å¯è§‚æµ‹ç»„ä»¶ o11YEnabled: true # æ§åˆ¶å°å®ä¾‹æ•° replicas: 1 controller: # æ§åˆ¶é¢ç»„ä»¶å®ä¾‹æ•° replicas: 1 gateway: # æ•°æ®é¢ç»„ä»¶å®ä¾‹æ•° replicas: 1 global: # å¼€å¯ Gateway API enableGatewayAPI: true # å¼€å¯ Istio API enableIstioAPI: true # è®¾ç½®ç›‘å¬çš„ ingress class ingressClass: higress # å®‰è£…æ¨¡å¼ install: local-k8s # å®‰è£…å‘½åç©ºé—´ namespace: higress-system # é…ç½®ä¼ é€’ç»™ helm çš„ values å‚æ•° values: {} profile: local-k8s  ä¿®æ”¹ä¸Šé¢æ–‡ä»¶çš„å†…å®¹åï¼Œæ‰§è¡Œhgctl upgardeå³å¯å®ç°å‚æ•°å˜æ›´ç”Ÿæ•ˆï¼Œå¦‚æœåªæƒ³ä¿®æ”¹å‚æ•°ï¼Œä¸æƒ³è§¦å‘ç‰ˆæœ¬å‡çº§ï¼Œå¯ä»¥å°† version å‚æ•°å›ºå®šä¸ºå½“å‰ç‰ˆæœ¬ã€‚ ","version":null,"tagName":"h3"},{"title":"WASM æ’ä»¶å¼€å‘å·¥å…·åŒ…â€‹","type":1,"pageTitle":"Higress å¼€æºä¸€å‘¨å¹´ï¼šæ–°ç‰ˆæœ¬ï¼Œæ–°æ ‡å‡†ï¼Œæ–°å·¥å…·ï¼Œæ–°å¾ç¨‹","url":"/zh-cn/blog/release-1.3#wasm-æ’ä»¶å¼€å‘å·¥å…·åŒ…","content":"ä¸ºäº†æ ‡å‡†åŒ–å¹¶ç®€åŒ– WASM æ’ä»¶çš„å¼€å‘/ç¼–è¯‘/æµ‹è¯•/å‘å¸ƒï¼ŒHigress æä¾›äº† hgctl plugin è¿™ä¸€å­å‘½ä»¤ï¼Œä½¿ç”¨æ–¹å¼ä¸ºï¼š hgctl plugin init: åˆå§‹åŒ– Golang WASM æ’ä»¶é¡¹ç›®ï¼ŒåŒ…æ‹¬ä¸‰ä¸ªæ–‡ä»¶ï¼›ç”¨æˆ·ç¼–å†™ WASM æ’ä»¶é€»è¾‘ï¼›hgctl plugin build --output-type files: æ„å»º WASM æ’ä»¶ï¼Œåœ¨æœ¬åœ°è¾“å‡ºæ„å»ºäº§ç‰©ï¼›hgctl plugin test: ä½¿ç”¨ docker compose åœ¨æœ¬åœ°æµ‹è¯• WASM æ’ä»¶ï¼Œå¦‚éœ€ä¿®æ”¹æ’ä»¶é€»è¾‘ï¼Œåˆ™è¿”å›ç¬¬ 2 æ­¥ï¼›hgctl plugin build --output-type image: æ„å»º WASM æ’ä»¶ä½œä¸º OCI é•œåƒä¸Šä¼ è‡³é•œåƒä»“åº“ï¼›hgctl plugin install: å®‰è£… WASM æ’ä»¶ï¼Œå¯ä»¥é€šè¿‡æœ¬åœ°çš„ yaml æ–‡ä»¶æˆ–æ’ä»¶é¡¹ç›®è¿›è¡Œå®‰è£…ã€‚ å¦å¤–ï¼Œè‹¥éœ€è¦æŸ¥çœ‹å·²å®‰è£…çš„æ’ä»¶ï¼Œåˆ™ä½¿ç”¨ hgctl plugin lsï¼›è‹¥éœ€è¦æ“ä½œæ’ä»¶é…ç½®ï¼Œåˆ™ä½¿ç”¨ hgctl plugin config é€šè¿‡è¿™ä¸ªå·¥å…·ï¼Œå¯ä»¥åœ¨æ„å»º WASM æ’ä»¶çš„åŒæ—¶ï¼Œæ ¹æ®é…ç½®ä»£ç è‡ªåŠ¨ç”Ÿæˆæ’ä»¶çš„é…ç½®è¯´æ˜æ–‡æ¡£ï¼Œä»¥åŠåŒ…å«æ’ä»¶é…ç½®çº¦æŸçš„å…ƒä¿¡æ¯æ–‡ä»¶ï¼Œè¿™äº›å†…å®¹éƒ½å°†å’Œ WASM æ–‡ä»¶ä¸€èµ·æ”¾å…¥ OCI é•œåƒåˆ¶å“ä¸­ï¼Œé€šè¿‡é•œåƒæ–¹å¼è¿›è¡Œç‰ˆæœ¬ç®¡ç†å’Œåˆ†å‘ã€‚è¿™ä¸€æœºåˆ¶æ˜¯åç»­ Higress å»ºè®¾ WASM æ’ä»¶å¸‚åœºçš„åŸºçŸ³ã€‚ ","version":null,"tagName":"h3"},{"title":"å…¶ä»–åŠŸèƒ½â€‹","type":1,"pageTitle":"Higress å¼€æºä¸€å‘¨å¹´ï¼šæ–°ç‰ˆæœ¬ï¼Œæ–°æ ‡å‡†ï¼Œæ–°å·¥å…·ï¼Œæ–°å¾ç¨‹","url":"/zh-cn/blog/release-1.3#å…¶ä»–åŠŸèƒ½","content":"å¦å¤–ä»‹ç»ä¸¤ä¸ªå®ç”¨çš„å­å‘½ä»¤ï¼š hgctl dashboard: ç”¨äºå‘¼å‡º UI ç•Œé¢ï¼Œä¾‹å¦‚ Higress æ§åˆ¶å°ï¼Œç›´æ¥é€šè¿‡ hgctl dashboard console å³å¯æ‰“å¼€  $ hgctl dashboard Access to Higress web UIs Usage: hgctl dashboard [flags] hgctl dashboard [command] Aliases: dashboard, dash, d Available Commands: console Open Console web UI controller Open Controller debug web UI envoy Open Envoy admin web UI grafana Open Grafana web UI prometheus Open Prometheus web UI  hgctl gateway-config: ç”¨äºæŸ¥çœ‹æ•°æ®é¢çš„ envoy é…ç½®ï¼Œå¯ä»¥å¿«é€ŸéªŒè¯é…ç½®æ˜¯å¦æ­£ç¡®ä¸‹å‘  $ hgctl gateway-config Retrieve information about Higress Gateway Configuration. Usage: hgctl gateway-config [command] Aliases: gateway-config, gc Available Commands: all Retrieves all Envoy xDS resources from the specified Higress Gateway bootstrap Retrieves bootstrap Envoy xDS resources from the specified Higress Gateway cluster Retrieves cluster Envoy xDS resources from the specified Higress Gateway endpoint Retrieves endpoint Envoy xDS resources from the specified Higress Gateway listener Retrieves listener Envoy xDS resources from the specified Higress Gateway route Retrieves route Envoy xDS resources from the specified Higress Gateway  ","version":null,"tagName":"h3"},{"title":"æ–°å¾ç¨‹ï¼šAPI Gatewayâ€‹","type":1,"pageTitle":"Higress å¼€æºä¸€å‘¨å¹´ï¼šæ–°ç‰ˆæœ¬ï¼Œæ–°æ ‡å‡†ï¼Œæ–°å·¥å…·ï¼Œæ–°å¾ç¨‹","url":"/zh-cn/blog/release-1.3#æ–°å¾ç¨‹api-gateway","content":"ä¸Šé¢è¯´äº† Gateway APIï¼Œæ¥ç€æˆ‘ä»¬èŠèŠ API Gateway ğŸ˜„ï¼ŒAPI Gateway æœ‰ä¸¤å±‚å®šä¹‰ï¼š ç‹­ä¹‰ä¸Šï¼šæ»¡è¶³ç»Ÿä¸€æ¥å…¥ï¼Œå°†è·¯ç”±è½¬å‘åˆ°ä¸åŒæœåŠ¡çš„è¿ç»´éœ€æ±‚ï¼Œå³å¯ç§°ä¸º API Gatewayï¼›è¿™é‡Œ API çš„å®šä¹‰æ˜¯æœåŠ¡çš„è·¯ç”±å¹¿ä¹‰ä¸Šï¼šåœ¨å®ç°æœåŠ¡è½¬å‘çš„åŸºç¡€ä¸Šï¼Œéœ€è¦è¯†åˆ«å¸¦ä¸šåŠ¡è¯­ä¹‰çš„æ¥å£ï¼Œå°†ä¸šåŠ¡èƒ½åŠ› API åŒ–ç®¡ç†ï¼Œç»Ÿä¸€å¯¹å¤–æä¾›æœåŠ¡ï¼›è¿™é‡Œ API çš„å®šä¹‰æ˜¯ä¸šåŠ¡åŠŸèƒ½æ¥å£ Higress å·²ç»å®ç°äº†ç‹­ä¹‰ä¸Šçš„ API Gateway èƒ½åŠ›ï¼Œå¹¶ä¸”æ˜¯åŸºäº Gateway/Ingress API è¿™äº›é€šç”¨è·¯ç”±æ ‡å‡†æ¥å®ç°çš„ã€‚è€Œä¸æœåŠ¡è·¯ç”±æ ‡å‡†ä¸åŒï¼Œä¸šåŠ¡åŠŸèƒ½æ¥å£çš„æ ‡å‡†æ˜¯ Swagger/OAS3/RPC IDL ç­‰ï¼Œåšä¸º API Gateway éœ€è¦æä¾›ä»¥ä¸‹å…³é”®èƒ½åŠ›ï¼š æ”¯æŒé€šè¿‡ä¸Šä¼  Swagger ç­‰æ¥å£å®šä¹‰æ–‡ä»¶çš„æ–¹å¼å¯¼å…¥ APIå¯¹ API å®ç°ç²¾ç»†åŒ–ç­–ç•¥ç®¡ç†ï¼Œä¾‹å¦‚æ ¹æ®å‡ºå…¥å‚å®šä¹‰å®ç°å‚æ•°æ˜ å°„/è½¬æ¢å®ç°ä»¥ API æ–¹å¼å¼€æ”¾èƒ½åŠ›æ—¶çš„è®¤è¯/é‰´æƒï¼Œè°ƒç”¨é‡æ§åˆ¶/å®¡è®¡èƒ½åŠ› Higress æ–°çš„å¼€æºå¾ç¨‹å°†å‘å…·å¤‡ä¸šåŠ¡ API ç®¡ç†èƒ½åŠ›çš„ API Gateway å½¢æ€è¿›å‘ã€‚åœ¨å®ç°æ–¹å¼ä¸Šï¼Œæˆ‘ä»¬å°†åŸºäº WASM æ’ä»¶å»æ‰©å±•è¿™ä¸€éƒ¨åˆ†èƒ½åŠ›ï¼Œè¿™å¯ä»¥é™ä½æˆ‘ä»¬å¯¹ä¸Šæ¸¸ Envoy ç¤¾åŒºçš„ä¾µå…¥æ€§æ”¹é€ ï¼ŒåŒæ—¶è®©å¯¹ API çš„ç²¾ç»†åŒ–ç­–ç•¥ç®¡ç†å…·å¤‡è‡ªå®šä¹‰æ‰©å±•èƒ½åŠ›ã€‚ ç›®å‰ç¤¾åŒºå·²ç»æœ‰ä¸€äº› Proposal ï¼Œæ¬¢è¿äº†è§£ï¼š https://github.com/alibaba/higress/issues/535 https://github.com/alibaba/higress/issues/601 æ¬¢è¿æœ‰æ›´å¤šå°ä¼™ä¼´åŠ å…¥ï¼Œå’Œæˆ‘ä»¬ä¸€èµ·è¸ä¸Šæ–°çš„å¾ç¨‹ï¼Œæœ‰å…´è¶£çš„å°ä¼™ä¼´å¯ä»¥è”ç³»æˆ‘(å¾®ä¿¡ï¼šnomadao)ï¼ŒåŠ å…¥ API Gateway çš„ SIGï¼ˆå…´è¶£å°ç»„ï¼‰ã€‚ ","version":null,"tagName":"h2"},{"title":"ç¤¾åŒºè‡´è°¢â€‹","type":1,"pageTitle":"Higress å¼€æºä¸€å‘¨å¹´ï¼šæ–°ç‰ˆæœ¬ï¼Œæ–°æ ‡å‡†ï¼Œæ–°å·¥å…·ï¼Œæ–°å¾ç¨‹","url":"/zh-cn/blog/release-1.3#ç¤¾åŒºè‡´è°¢","content":"é¦–å…ˆè¦æ„Ÿè°¢ Envoy å’Œ Istio ç¤¾åŒºï¼ŒHigress ç«™åœ¨è¿™ä¸¤ä¸ªè½¯ä»¶çš„è‚©è†€ä¸Šæ¼”è¿›èƒ½åŠ›ï¼Œå¾—ä»¥ï¼š é€šè¿‡ WASM æœºåˆ¶æ‰©å±• Envoy æ•°æ®é¢èƒ½åŠ›ï¼ŒæŒç»­ä¸æ–­åœ°æ‰©å¤§ç½‘å…³æ’ä»¶ç”Ÿæ€é€šè¿‡ä¸“æ³¨åœ¨ç½‘å…³é¢†åŸŸï¼Œåœ¨ Istio ä¼˜ç§€çš„æ§åˆ¶é¢åŸºç¡€ä¸Šï¼Œè¿›ä¸€æ­¥åšæŠ½è±¡å’Œç®€åŒ–ï¼Œé™ä½ä¸Šæ‰‹å’Œè¿ç»´é—¨æ§› è¿˜è¦æ„Ÿè°¢å‚ä¸ Higress å¼€æºè´¡çŒ®çš„å¼€å‘è€…ä»¬ï¼Œè¿™é‡Œé‡ç‚¹æ„Ÿè°¢ä¸‹ä¸º 1.3 ç‰ˆæœ¬åšå‡ºæ ¸å¿ƒè´¡çŒ®çš„å¼€å‘è€…ï¼š ","version":null,"tagName":"h2"},{"title":"Maintainerï¼šè‘£è‰ºèƒ(CH3CHO)â€‹","type":1,"pageTitle":"Higress å¼€æºä¸€å‘¨å¹´ï¼šæ–°ç‰ˆæœ¬ï¼Œæ–°æ ‡å‡†ï¼Œæ–°å·¥å…·ï¼Œæ–°å¾ç¨‹","url":"/zh-cn/blog/release-1.3#maintainerè‘£è‰ºèƒch3cho","content":"äººå¦‚å…¶åâ€œè‰ºå…¨â€ï¼Œåå…«èˆ¬æ­¦è‰ºæ ·æ ·ç²¾é€šï¼Œä¸ç®¡æ˜¯æ§åˆ¶å° TS å‰ç«¯ï¼ŒJava åå°ï¼Œè¿˜æ˜¯ Higress çš„ GO æ§åˆ¶é¢ï¼Œä»¥åŠ Standalone å®‰è£… Shell è„šæœ¬å’Œå„ç§ CICD æµç¨‹ï¼Œé€šé€šæ‰‹åˆ°æ“’æ¥ã€‚ åœ¨ 1.3 ç‰ˆæœ¬ä¸­ä¸»è¦è´Ÿè´£äº† Higress æ”¯æŒ Gateway API çš„èƒ½åŠ›ï¼Œä»¥åŠå®ç°äº† Higress Admin Java SDK å¯ä»¥æä¾›å¤–éƒ¨é›†æˆç”¨äºç®¡ç† Higress é…ç½®ï¼Œå¹¶æ”¹è¿›äº† Higress Console çš„å®‰å…¨æ€§å’Œæ˜“ç”¨æ€§ã€‚ é™¤äº†å¼€å‘è´¡çŒ®ä¹‹å¤–ï¼Œä»–è¿˜å¯¹ç¤¾åŒºç”¨æˆ·å……æ»¡å–„æ„å’Œçƒ­æƒ…ï¼Œæ— è®ºæ˜¯åœ¨ GitHub çš„ Issues/Discussionsï¼Œæˆ–æ˜¯ç¤¾åŒºäº¤æµå¾®ä¿¡/é’‰é’‰ç¾¤ï¼Œéšå¤„å¯è§ä»–å¸®åŠ©ç”¨æˆ·è§£å†³é—®é¢˜çš„èº«å½±ã€‚ ","version":null,"tagName":"h3"},{"title":"Approverï¼šå´æ–°å†›(Jun)ï¼Œåˆ˜è®­ç¼(Xunzhuo)â€‹","type":1,"pageTitle":"Higress å¼€æºä¸€å‘¨å¹´ï¼šæ–°ç‰ˆæœ¬ï¼Œæ–°æ ‡å‡†ï¼Œæ–°å·¥å…·ï¼Œæ–°å¾ç¨‹","url":"/zh-cn/blog/release-1.3#approverå´æ–°å†›junåˆ˜è®­ç¼xunzhuo","content":"ä¸¤ä½éƒ½åœ¨å¤šä¸ª Higress ç‰ˆæœ¬ä¸ºç¤¾åŒºåšå‡ºäº†è´¡çŒ®ï¼ŒJun çš„ä¸»è¦è´¡çŒ®æœ‰ï¼šåœ¨å¤šæ³¨å†Œä¸­å¿ƒçš„æœåŠ¡å‘ç°æ”¯æŒï¼Œå…¨å±€é…ç½®ç®¡ç†æ¶æ„æŠ½è±¡ï¼›Xunzhuo çš„ä¸»è¦è´¡çŒ®æœ‰ï¼šHigress E2E æµ‹è¯•æµç¨‹çš„æ­å»ºï¼ŒGitHub CI æµç¨‹çš„å»ºè®¾ï¼Œhgctl çš„æ•´ä½“æ¶æ„è®¾è®¡ã€‚ åœ¨ 1.3 ç‰ˆæœ¬ä¸­äºŒä½åä½œå®Œæˆäº† hgctl çš„å¤šæ ·åŒ–èƒ½åŠ›å»ºè®¾ï¼Œå¸®åŠ© Higress çš„æ˜“ç”¨æ€§åˆä¸Šåˆ°äº†ä¸€ä¸ªæ–°çš„å°é˜¶ã€‚ ä¸¤ä½åŒå­¦ä½œä¸º Approver ç§¯æå‚ä¸ç¤¾åŒºè´¡çŒ® PR çš„ Reviewï¼Œç›®å‰åˆ†åˆ«æ˜¯ Higress Tools SIG å’Œ Higress GatewayAPI SIG çš„é¢†å¯¼è€…ã€‚ ","version":null,"tagName":"h3"},{"title":"Memberï¼šéŸ¦é‘«(WeixinX)ï¼Œå°å®‡è…¾(Fkbqf)â€‹","type":1,"pageTitle":"Higress å¼€æºä¸€å‘¨å¹´ï¼šæ–°ç‰ˆæœ¬ï¼Œæ–°æ ‡å‡†ï¼Œæ–°å·¥å…·ï¼Œæ–°å¾ç¨‹","url":"/zh-cn/blog/release-1.3#memberéŸ¦é‘«weixinxå°å®‡è…¾fkbqf","content":"ä¸¤ä½éƒ½æ˜¯é€šè¿‡ä¸­ç§‘é™¢å¼€æºä¹‹å¤ï¼ˆOSPP 2023ï¼‰é¡¹ç›®å¼€å§‹å‚ä¸ Higress è´¡çŒ®ï¼ŒWeixinX æ˜¯ä¸€åç ”äºŒçš„å­¦ç”Ÿï¼ŒFkbqf æ˜¯ä¸€åå¤§ä¸‰çš„å­¦ç”Ÿã€‚ åœ¨ 1.3 ç‰ˆæœ¬ä¸­ï¼ŒWeixinX å®ç°äº† hgctl plugin å­å‘½ä»¤çš„èƒ½åŠ›ï¼ŒåŒæ—¶è´¡çŒ®äº† Go å®ç°çš„ Basic Auth æ’ä»¶ï¼Œä»¥åŠå¯¹æ ‡ Spring Cloud Gateway è¯·æ±‚å“åº”è½¬æ¢èƒ½åŠ›çš„ Transformer æ’ä»¶ï¼›Fkbqf åˆ™å®ç°äº†æ›´ä¸ºå¤æ‚çš„ OIDC æ’ä»¶ï¼Œå…·å¤‡æ¯” Envoy è‡ªå¸¦ OAuth2 Filter æ›´å¼ºå¤§çš„åŠŸèƒ½ï¼Œå¹¶ä¸”å…·å¤‡è‰¯å¥½çš„æ‰©å±•æ€§ã€‚ ä¸¤ä½åŒå­¦é™¤äº†å¼€å‘è´¡çŒ®ä»¥å¤–ï¼Œç”¨è¯¾ä½™æ—¶é—´ç§¯æå‚ä¸ Higress ç¤¾åŒºå‘¨ä¼šï¼Œä¸€èµ·æ¢è®¨å’Œå­¦ä¹ æŠ€æœ¯ï¼Œä¸äº¦ä¹ä¹ã€‚èƒ½å¤Ÿæˆä¸ºä½ ä»¬äººç”Ÿå­¦ä¸šè¿›é˜¶è·¯ä¸Šçš„é˜¶æ¢¯ï¼ŒHigress è£å¹¸ä¹‹è‡³ã€‚ Higress ç¤¾åŒºåç»­æ•´ä½“çš„ Roadmap è§„åˆ’å¦‚ä¸‹ï¼š  æ¬¢è¿æ›´å¤šå°ä¼™ä¼´ä¸€èµ·åŠ å…¥æˆ‘ä»¬ï¼š  ","version":null,"tagName":"h3"},{"title":"ç¾æ´½æ™ºèƒ½å®¢æœä½¿ç”¨ Higress ç»Ÿä¸€ç½‘å…³è½åœ°å®è·µ","type":0,"sectionRef":"#","url":"/zh-cn/blog/user-mq","content":"","keywords":"higress ç¾æ´½","version":null},{"title":"å…³äºç¾æ´½â€‹","type":1,"pageTitle":"ç¾æ´½æ™ºèƒ½å®¢æœä½¿ç”¨ Higress ç»Ÿä¸€ç½‘å…³è½åœ°å®è·µ","url":"/zh-cn/blog/user-mq#å…³äºç¾æ´½","content":"ç¾æ´½æ˜¯ä¸€å®¶å…¨çƒæ™ºèƒ½äº‘å®¢æœæœåŠ¡å•†ï¼Œæä¾›ä¸€ç«™å¼æ™ºèƒ½å®¢æœè§£å†³æ–¹æ¡ˆï¼Œæ——ä¸‹æ‹¥æœ‰åœ¨çº¿å®¢æœã€å·¥å•ç³»ç»Ÿã€å‘¼å«ä¸­å¿ƒã€å®¢æœæœºå™¨äººã€è¯­éŸ³æœºå™¨äººã€è¥é”€æœºå™¨äººç­‰äº§å“åŠæœåŠ¡ã€‚ç¾æ´½æˆç«‹äº2014å¹´ï¼Œæ€»éƒ¨ä½äºæˆéƒ½ï¼Œç›®å‰æœåŠ¡ä¼ä¸šç”¨æˆ·å·²è¶…è¿‡40ä¸‡å®¶ï¼Œè¦†ç›–å¤šä¸ªè¡Œä¸šé¢†åŸŸã€‚ç¾æ´½çš„å®¢æœç³»ç»Ÿæ”¯æŒå¤šå¹³å°ä½¿ç”¨ï¼ŒåŒ…æ‹¬Web ç½‘é¡µç«¯ã€æ‰‹æœºå®¢æˆ·ç«¯ã€PC å®¢æˆ·ç«¯ï¼ŒåŒæ—¶ç¾æ´½ä¹Ÿæä¾›äº†å¼€æ”¾ API å¹³å°ã€‚ ","version":null,"tagName":"h2"},{"title":"éœ€æ±‚èƒŒæ™¯â€‹","type":1,"pageTitle":"ç¾æ´½æ™ºèƒ½å®¢æœä½¿ç”¨ Higress ç»Ÿä¸€ç½‘å…³è½åœ°å®è·µ","url":"/zh-cn/blog/user-mq#éœ€æ±‚èƒŒæ™¯","content":"å¤šæ¡ä¸šåŠ¡çº¿ä½¿ç”¨äº†äº†ä¸åŒç¼–ç¨‹è¯­è¨€ï¼Œåœ¨å¾®æœåŠ¡åŒ–æ¼”è¿›çš„è·¯ä¸Šå›°éš¾é‡é‡ï¼›å†å²æ¶æ„ä½¿ç”¨å¤šä¸ªæµé‡è½¬å‘ä¸­é—´ä»¶å¯¼è‡´æµé‡è·¯å¾„å†—é•¿ã€å¤æ‚ä¸”æ•…éšœæ’æŸ¥å›°éš¾ï¼ˆLB + OpenResty + Nginx + Caddy + SpringCloud-Gatewayï¼‰ï¼›WebSocket é•¿è¿æ¥æœåŠ¡åœ¨å¤šé‡è·¯ç”±å±‚ä¸Šä¸æ”¯æŒçƒ­æ›´æ–°ï¼Œç»´æŠ¤æˆæœ¬é«˜ã€‚ å†å²æ¶æ„çš„æµé‡æ‹“æ‰‘å›¾å¦‚ä¸‹ï¼š  ","version":null,"tagName":"h2"},{"title":"éœ€æ±‚ç›®æ ‡â€‹","type":1,"pageTitle":"ç¾æ´½æ™ºèƒ½å®¢æœä½¿ç”¨ Higress ç»Ÿä¸€ç½‘å…³è½åœ°å®è·µ","url":"/zh-cn/blog/user-mq#éœ€æ±‚ç›®æ ‡","content":"æ‰¾åˆ°ä¸€ä¸ªç»Ÿä¸€ç½‘å…³ï¼Œèƒ½å¤Ÿä¸€æ¬¡æ€§è§£å†³æµé‡ç½‘å…³å’Œä¸šåŠ¡ç½‘å…³çš„è·¯ç”±è½¬å‘éœ€æ±‚ï¼›æ”¯æŒè·¯ç”±è§„åˆ™çƒ­æ›´æ–°ï¼Œè§£å†³ WebSocket è¿æ¥åœ¨è·¯ç”±æ›´æ–°æˆ–ç½‘ç»œæŠ–åŠ¨æ—¶äº§ç”Ÿçš„é‡è¿é£æš´ï¼›å‰ç½®API è¯·æ±‚æƒé™æ ¡éªŒã€ç­¾åæ ¡éªŒã€WAF æ‹¦æˆªã€CC æ‹¦æˆªï¼›å¯è§†åŒ–ç»Ÿä¸€ç½‘å…³çš„åå°æ“ä½œï¼Œè®©æ™®é€šå‘˜å·¥ä¹Ÿèƒ½ä¸Šæ‰‹ï¼›å¤šäº‘æ¶æ„ä¸‹ç§æœ‰åŒ–éƒ¨ç½²æ”¯æŒã€‚ ","version":null,"tagName":"h2"},{"title":"æ–¹æ¡ˆæ¨ªå‘å¯¹æ¯”â€‹","type":1,"pageTitle":"ç¾æ´½æ™ºèƒ½å®¢æœä½¿ç”¨ Higress ç»Ÿä¸€ç½‘å…³è½åœ°å®è·µ","url":"/zh-cn/blog/user-mq#æ–¹æ¡ˆæ¨ªå‘å¯¹æ¯”","content":"é€šè¿‡å¯¹ç›®å‰å¸‚é¢ä¸Šæµè¡Œçš„ç½‘å…³äº§å“è¿›è¡Œè¯¦ç»†çš„æ¨ªå‘å¯¹æ¯”ï¼Œå†ç»“åˆç¾æ´½å¯¹ç»Ÿä¸€ç½‘å…³çš„éœ€æ±‚ç›®æ ‡ï¼Œæˆ‘ä»¬ä»å¯¹æ¯”çš„è¡¨æ ¼å½“ä¸­ï¼Œçœ‹åˆ°äº† Higress æ‰€å¸¦æ¥çš„æœ€ä½³å¯¹æ¯”ç»“æœã€‚ åŒæ—¶ç¾æ´½é‡ç‚¹å…³æ³¨çš„å‡ ä¸ªç‚¹ï¼šK8S Ingress æ”¯æŒã€WebSocketæ”¯æŒã€Nacos æœåŠ¡å‘ç°ã€è·¯ç”±é…ç½®çƒ­æ›´æ–°ã€WASM æ’ä»¶éƒ½å¾—åˆ°äº†å¾ˆå¥½çš„æ”¯æŒã€‚  ","version":null,"tagName":"h2"},{"title":"ä¸ºä»€ä¹ˆé€‰æ‹© Higressâ€‹","type":1,"pageTitle":"ç¾æ´½æ™ºèƒ½å®¢æœä½¿ç”¨ Higress ç»Ÿä¸€ç½‘å…³è½åœ°å®è·µ","url":"/zh-cn/blog/user-mq#ä¸ºä»€ä¹ˆé€‰æ‹©-higress","content":"","version":null,"tagName":"h2"},{"title":"é¢å‘å¤šäº‘æ¶æ„å‹å¥½â€‹","type":1,"pageTitle":"ç¾æ´½æ™ºèƒ½å®¢æœä½¿ç”¨ Higress ç»Ÿä¸€ç½‘å…³è½åœ°å®è·µ","url":"/zh-cn/blog/user-mq#é¢å‘å¤šäº‘æ¶æ„å‹å¥½","content":"Higress åœ¨é˜¿é‡Œäº‘ä¸Šæœ‰æˆç†Ÿçš„ä¼ä¸šç‰ˆäº§å“ï¼šMSE äº‘åŸç”Ÿç½‘å…³ï¼Œæˆ‘ä»¬ä» 2021 å¹´å¼€å§‹ä½¿ç”¨è¿™æ¬¾äº§å“ï¼Œè¿™æ˜¯ä¸€æ¬¾å…¨æ‰˜ç®¡ï¼Œå®Œå…¨å…è¿ç»´çš„ SaaS ç½‘å…³äº§å“ï¼Œå¹¶ä¸”å…·å¤‡å¼ºåŠ²çš„æ€§èƒ½å’Œä¸°å¯Œçš„åŠŸèƒ½ï¼Œç›¸æ¯”è‡ªå»ºåŒååçš„ç½‘å…³ï¼Œæ•´ä½“æˆæœ¬æ˜¯æ›´ä½çš„ï¼Œå› æ­¤æˆ‘ä»¬åœ¨é˜¿é‡Œäº‘ä¸Šç›´æ¥ä½¿ç”¨äº†è¿™æ¬¾äº§å“ã€‚ ç¾æ´½é™¤äº†é˜¿é‡Œäº‘ï¼Œåœ¨å…¶ä»–äº‘ä¸Šä¹Ÿæœ‰éƒ¨ç½²ä¸šåŠ¡ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½ç»Ÿä¸€å¤šäº‘çš„ç»Ÿä¸€ç½‘å…³æŠ€æœ¯æ¶æ„ï¼Œå¼€æºç‰ˆ Higress æ­£å¥½ç¬¦åˆæˆ‘ä»¬çš„éœ€æ±‚ï¼Œç›¸æ¯”å•†ä¸šç‰ˆï¼Œåœ¨æ§åˆ¶å°åŠŸèƒ½ä¸Šï¼Œå¼€æºç‰ˆç›®å‰çš„èƒ½åŠ›ç›¸å¯¹è¾ƒå°‘ï¼Œä½†å¤§éƒ¨åˆ†åŠŸèƒ½ä¹Ÿéƒ½å¯ä»¥é€šè¿‡è‡ªå·±å®šä¹‰ K8s CRD é…ç½®çš„æ–¹å¼æ¥å®ç°ï¼Œå®Œå…¨æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ã€‚ ","version":null,"tagName":"h3"},{"title":"åŸç”Ÿæ”¯æŒ K8s Ingressâ€‹","type":1,"pageTitle":"ç¾æ´½æ™ºèƒ½å®¢æœä½¿ç”¨ Higress ç»Ÿä¸€ç½‘å…³è½åœ°å®è·µ","url":"/zh-cn/blog/user-mq#åŸç”Ÿæ”¯æŒ-k8s-ingress","content":"ç¾æ´½ä» 2021 å¹´ä¾¿å·²ç»å…¨é¢è¿ç§»åˆ° Kubernetes è¿›è¡Œèµ„æºè°ƒåº¦ï¼Œé‡åˆ°æœ€å¤§çš„å›°éš¾æ˜¯å†å²çš„ç½‘å…³ä¸­é—´ä»¶ï¼Œåœ¨å®¹å™¨åŒ–çš„æ¶æ„é‡Œé¢ï¼Œå„ç§æ°´åœŸä¸æœï¼Œè¦ä¹ˆéœ€è¦å€ŸåŠ© Nginx-Ingress-Controllerï¼Œè¦ä¹ˆéœ€è¦å¤–éƒ¨çš„ SLB è¿›è¡ŒæœåŠ¡ä¹‹é—´çš„è´Ÿè½½å‡è¡¡ä¸ç½‘ç»œé€šä¿¡ã€‚è¿™å¯¼è‡´äº†æ¯”å®¹å™¨åŒ–ä¹‹å‰æ›´åŠ å¤æ‚çš„æµé‡è·¯å¾„ï¼Œä¸€åº¦è®©æˆ‘ä»¬ä¸‹å®šå†³å¿ƒï¼Œå¿…é¡»ã€å¿…é¡»ã€å¿…é¡»è¦è§£å†³ç»Ÿä¸€ç½‘å…³çš„é—®é¢˜ï¼Œè¿˜å¿…é¡»äº‘åŸç”Ÿçš„ã€‚ 2021 å¹´åº•å¼€å§‹ï¼Œæˆ‘ä»¬å¼€å§‹å°è¯•ä½¿ç”¨é˜¿é‡Œäº‘ MSE ç½‘å…³ SaaS äº§å“ï¼Œå¼€å§‹å°†éƒ¨åˆ†æœåŠ¡ä» Nginx è·¯ç”±è¿ç§»åˆ° MSE ç½‘å…³ä¸Šï¼Œå¾ˆå¿«è§£å†³äº†Ngxin Configuration é…ç½®ç»´æŠ¤å¤æ‚ï¼Œæ•…éšœé¢‘å‘çš„é—®é¢˜ï¼Œå°åˆ°ç”œå¤´åï¼Œæˆ‘ä»¬ä¾¿å¼€å§‹è®¡åˆ’è¿›ä¸€æ­¥æ‰©å¤§ MSE ç½‘å…³çš„ä½¿ç”¨ï¼Œç»“åˆ Nacos å’Œ K8S çš„æœåŠ¡å‘ç°ï¼Œå°† 80% å¤§éƒ¨åˆ†å®¹å™¨åŒ–æœåŠ¡è·¯ç”±è½¬å‘å…¨éƒ¨è¿ç§»åˆ°äº†äº‘åŸç”Ÿç½‘å…³ä¸Šã€‚ è¿™å¸¦æ¥çš„æ”¶ç›Šå°±åŒ…æ‹¬ï¼š ç®€åŒ–äº†æµé‡è·¯å¾„ï¼Œå…¬ç½‘æµé‡é€šè¿‡ SLB ç›´æ¥åˆ°è¾¾ç½‘å…³ï¼Œç½‘å…³è·¯ç”±ç›´è¾¾å®¹å™¨ Podï¼›é‡Šæ”¾äº†ä½¿ç”¨ ECS è‡ªå»ºçš„ Nginx ã€OpenResty ã€Caddy æœåŠ¡ï¼Œé™ä½äº†å¤§é‡æœåŠ¡å™¨æˆæœ¬ï¼›æœåŠ¡å‘ç°å’ŒæœåŠ¡æ²»ç†ï¼Œä»¥åŠå„ä¸ªæœåŠ¡å½“å‰çš„å¥åº·çŠ¶æ€éƒ½ä»¥å¯è§†åŒ–çš„ Dashborad å‘ˆç°å‡ºæ¥ï¼› ","version":null,"tagName":"h3"},{"title":"æ§åˆ¶é¢å’Œæ•°æ®é¢è§£è€¦çš„æ¶æ„â€‹","type":1,"pageTitle":"ç¾æ´½æ™ºèƒ½å®¢æœä½¿ç”¨ Higress ç»Ÿä¸€ç½‘å…³è½åœ°å®è·µ","url":"/zh-cn/blog/user-mq#æ§åˆ¶é¢å’Œæ•°æ®é¢è§£è€¦çš„æ¶æ„","content":"æ§åˆ¶é¢å’Œæ•°æ®é¢è§£è€¦æ˜¯ä¸€ç§å¾ˆå¥½çš„è®¾è®¡æ¨¡å¼ï¼ŒæŠŠç®¡ç†æ§åˆ¶é€»è¾‘å’Œè¿è¡Œå¤„ç†é€»è¾‘åˆ†å¼€ï¼Œè¿™æ ·å¯ä»¥æ›´å¥½åœ°ç®¡ç†å’Œæ‰©å±•ç³»ç»Ÿã€‚ Console è´Ÿè´£ç®¡ç† å’Œ Gateway è´Ÿè´£å¤„ç†è¯·æ±‚ï¼Œçµæ´»å¯æ‰©å±•ï¼Œäº’è¡¥å¹²æ‰°ï¼›æ•´ä¸ªç³»ç»Ÿçš„æ€§èƒ½å’Œå¯ç”¨æ€§å¯ä»¥å¾—åˆ°å¾ˆå¥½çš„ä¿éšœï¼›å³ä½¿æ§åˆ¶é¢å‡ºç°é—®é¢˜ï¼Œæ•°æ®é¢ä»ç„¶å¯ä»¥ç»§ç»­å¤„ç†è¯·æ±‚ï¼Œåä¹‹äº¦ç„¶ã€‚ åœ¨ç¾æ´½å®¢æœè‡ªå·±çš„äº§å“ä¸­ï¼Œä¹Ÿå¤§é‡è¯•ç”¨äº†æ§åˆ¶é¢å’Œæ•°æ®é¢åˆ†ç¦»çš„è¿™ç§æ¶æ„è®¾è®¡æ¨¡å¼ï¼Œåœ¨é€‰æ‹© Higress ç»Ÿä¸€ç½‘å…³çš„è½åœ°å®è·µä¸­ï¼Œä¹Ÿæ›´å¥½çš„å¯ä»¥å’Œç¾æ´½äº§å“çš„æ¶æ„è¿›è¡Œé…åˆï¼Œä¾‹å¦‚æ§åˆ¶å°é‡‡ç”¨å¾®å‰ç«¯æŠ€æœ¯ç»Ÿä¸€ç¾æ´½è¿ç»´æ§åˆ¶å°ï¼ŒHigress æ§åˆ¶å°ï¼ŒNacos æ§åˆ¶å°ã€‚ ","version":null,"tagName":"h3"},{"title":"å®¹æ˜“ä¸Šæ‰‹çš„åå° Dashboardâ€‹","type":1,"pageTitle":"ç¾æ´½æ™ºèƒ½å®¢æœä½¿ç”¨ Higress ç»Ÿä¸€ç½‘å…³è½åœ°å®è·µ","url":"/zh-cn/blog/user-mq#å®¹æ˜“ä¸Šæ‰‹çš„åå°-dashboard","content":"åœ¨æ—©æœŸï¼Œç¾æ´½åœ¨ 2021 å¹´å¼€å§‹ä½¿ç”¨é˜¿é‡Œäº‘ MSE äº‘åŸç”Ÿç½‘å…³æ—¶ï¼Œå°±å·²ç»å¯¹ç½‘å…³çš„æ§åˆ¶å°ä½¿ç”¨æœ‰äº†å¾ˆå¤šçš„ç»éªŒåŸºç¡€ï¼Œå›¢é˜Ÿä¸­ QA åŒå­¦ä¹Ÿèƒ½ç†Ÿç»ƒä½¿ç”¨äº†ã€‚ç›®å‰åœ¨å…¶ä»–äº‘ä¸Šçš„é¡¹ç›®ï¼Œç§æœ‰åŒ–éƒ¨ç½²çš„å¼€æºç‰ˆHigressï¼Œåœ¨æ§åˆ¶å°æ–¹é¢åŠŸèƒ½ä¸æ“ä½œå’Œé˜¿é‡Œäº‘ MSE äº§å“çš„äº¤äº’ä¿æŒä¸€è‡´ï¼Œå›¢é˜Ÿä½¿ç”¨å¾ˆå¿«ä¾¿ä¸Šæ‰‹äº†ã€‚  æ’ä»¶æ–¹é¢ï¼Œç¾æ´½ä½¿ç”¨äº† JWT Auth é‰´æƒï¼ŒKey Rate Limit é™æµï¼ŒHMAC Auth è¯·æ±‚ç­¾åï¼ŒBot Detect å’Œ WAF åŠŸèƒ½æœ‰æ¶‰åŠã€‚  ","version":null,"tagName":"h3"},{"title":"ç¾æ´½çš„è½åœ°å®è·µâ€‹","type":1,"pageTitle":"ç¾æ´½æ™ºèƒ½å®¢æœä½¿ç”¨ Higress ç»Ÿä¸€ç½‘å…³è½åœ°å®è·µ","url":"/zh-cn/blog/user-mq#ç¾æ´½çš„è½åœ°å®è·µ","content":"","version":null,"tagName":"h2"},{"title":"é‡‡ç”¨ Helm åœ¨ K8s node ä¸Š ä¸€é”®éƒ¨ç½²â€‹","type":1,"pageTitle":"ç¾æ´½æ™ºèƒ½å®¢æœä½¿ç”¨ Higress ç»Ÿä¸€ç½‘å…³è½åœ°å®è·µ","url":"/zh-cn/blog/user-mq#é‡‡ç”¨-helm-åœ¨-k8s-node-ä¸Š-ä¸€é”®éƒ¨ç½²","content":"helm repo add higress.io &lt;https://higress.io/helm-charts&gt; helm install higress higress.io/higress -n higress-system --create-namespace  ","version":null,"tagName":"h3"},{"title":"å®Œå…¨æ›¿ä»£äº† Nginx ã€OpenRestyã€Caddy ã€SLB-Intranetâ€‹","type":1,"pageTitle":"ç¾æ´½æ™ºèƒ½å®¢æœä½¿ç”¨ Higress ç»Ÿä¸€ç½‘å…³è½åœ°å®è·µ","url":"/zh-cn/blog/user-mq#å®Œå…¨æ›¿ä»£äº†-nginx-openrestycaddy-slb-intranet","content":" ","version":null,"tagName":"h3"},{"title":"å½»åº•è§£å†³ WebSocket æ–­çº¿é‡è¿é—®é¢˜â€‹","type":1,"pageTitle":"ç¾æ´½æ™ºèƒ½å®¢æœä½¿ç”¨ Higress ç»Ÿä¸€ç½‘å…³è½åœ°å®è·µ","url":"/zh-cn/blog/user-mq#å½»åº•è§£å†³-websocket-æ–­çº¿é‡è¿é—®é¢˜","content":"ç¾æ´½çš„æ™ºèƒ½å®¢æœäº§å“ä¾§è¯•ç”¨äº† WebSocket è¿›è¡Œé•¿è¿æ¥ä¿æŒå’Œæ¶ˆæ¯é€šä¿¡ï¼Œæ‰€ä»¥éå¸¸ä¾èµ–ç½‘ç»œçš„ç¨³å®šï¼Œä»¥åŠæ›´æ–°ç½‘å…³é…ç½®æ‰€å¸¦æ¥çš„å‰¯ä½œç”¨ã€‚åœ¨ä½¿ç”¨ Nginx + OpenResty æ–¹æ¡ˆçš„æœŸé—´ï¼Œæ¯ä¸€æ¬¡çš„é…ç½®å˜æ›´éƒ½ä¼šå¸¦æ¥æå¤§çš„ä»£ä»·ï¼Œæ–­çº¿é‡è¿é£æš´æ—¶å¸¸å‘ç”Ÿã€‚ä¸€æ¬¡é…ç½®å˜æ›´ Pendding æˆ–è€…å˜æ›´å¤±è´¥å¸¦æ¥çš„ç¬æ—¶æ–­è”æ˜¯åŠå…¶ç—›è‹¦çš„ã€‚  åœ¨è¿ç§»åˆ° Higress ä¸Šä¹‹åï¼Œè·¯ç”±é…ç½®çƒ­æ›´æ–°ç‰¹æ€§ï¼Œä¸åœ¨éœ€è¦åƒ Nginx ä¸€æ ·éœ€è¦ Reload Gatewayï¼Œè§£å†³é…ç½®æ›´æ–° reload å¸¦æ¥çš„æ–­çº¿é‡è¿é£æš´é—®é¢˜ã€‚ å¦å¤–ï¼Œåœ¨ WebSocket Server æœåŠ¡å‡çº§è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡ç»™ Pod æ‰“ä¸Š stage æ ‡ç­¾ï¼Œåœ¨ Higress ä¾§é€šè¿‡æ ‡ç­¾è·¯ç”±è¿›è¡Œæ–°è€ç‰ˆæœ¬æ— æŸæµé‡åˆ‡æ¢ï¼Œç»™äº§å“å¿«é€Ÿè¿­ä»£å‡çº§å¸¦äº†å·¨å¤§çš„æ æ†æ•ˆåº”ã€‚ ","version":null,"tagName":"h3"},{"title":"ç†”æ–­é™æµâ€‹","type":1,"pageTitle":"ç¾æ´½æ™ºèƒ½å®¢æœä½¿ç”¨ Higress ç»Ÿä¸€ç½‘å…³è½åœ°å®è·µ","url":"/zh-cn/blog/user-mq#ç†”æ–­é™æµ","content":"åœ¨é¢å‘ 2B çš„ SaaS äº§å“ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œç»å¸¸ä¼šå‘ç”ŸæŸä¸€ä¸ªå®¢æˆ·çªå‘æµ·é‡æµé‡ï¼Œå æ®å¤§é‡å¸¦å®½ï¼Œå½±å“å…¶ä»–å®¢æˆ·æ­£å¸¸ä½¿ç”¨çš„æƒ…å†µï¼Œè¿™æ—¶æˆ‘ä»¬éœ€è¦é’ˆå¯¹å®¢æˆ·è§„æ¨¡å¯¹å•ä¸ªå®¢æˆ·çš„ API å¹¶å‘ä¸Šé™åšçµæ´»çš„åŠ¨æ€é™æµï¼Œä½¿ç”¨ Higress çš„æ’ä»¶Key Rate Limit å°±å¾ˆå¥½çš„è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œæ ¹æ®æµé‡å¤§ç›˜éšæ—¶è°ƒæ•´é™æµæ°´ä½çº¢çº¿ï¼Œåšåˆ°ç²¾å‡†ï¼Œçµæ´»çš„é™æµã€‚  ","version":null,"tagName":"h3"},{"title":"ç»éªŒæ€»ç»“â€‹","type":1,"pageTitle":"ç¾æ´½æ™ºèƒ½å®¢æœä½¿ç”¨ Higress ç»Ÿä¸€ç½‘å…³è½åœ°å®è·µ","url":"/zh-cn/blog/user-mq#ç»éªŒæ€»ç»“","content":"Higress ç½‘å…³çš„è½åœ°ï¼Œç»™ä¼ä¸šå…¨é¢è½åœ°äº‘åŸç”Ÿå¾®æœåŠ¡æ¶æ„æä¾›å¼ºæœ‰åŠ›çš„æ”¯æŒï¼Œå¯¹æˆ‘ä»¬æŠ€æœ¯äººå‘˜æ¥è¯´ï¼Œè¿™ç»å¯¹æ˜¯ä¸€ä¸ªæ æ†çº§åˆ«çš„å¼€æºäº§å“ï¼Œå¦å¤–ï¼Œåœ¨é˜¿é‡Œäº‘ä¸Šåˆæœ‰å¯¹ç­‰çš„ SaaS äº§å“ï¼Œè¿™æ ·çš„é…åˆï¼Œå°†å…¬æœ‰äº‘å’Œç§æœ‰åŒ–éƒ¨ç½²çš„ç»Ÿä¸€ç½‘å…³ä¸€æ¬¡æ€§å…¨éƒ¨è§£å†³ï¼Œå¯¹ä¼ä¸šæ¥è¯´æ˜¯ç»å¯¹çš„åˆ©å¥½ã€‚ ç»Ÿä¸€æµé‡ç½‘å…³+ä¸šåŠ¡ç½‘å…³èƒ½åŠ›ï¼Œå®ç°äº†ç»™ä¼ä¸šé™æœ¬ï¼Œä¸ºç ”å‘å¢æ•ˆï¼›ä¸ºäº‘åŸç”Ÿæ¶æ„æä¾›å¾ˆå¥½çš„åŸºåº§ï¼Œåœ¨å¼‚æ„è¯­è¨€æœåŠ¡åŒ–å±‚é¢æ’é™¤äº†ç½‘ç»œé€šä¿¡éš¾é¢˜ï¼›è·¯ç”±çƒ­æ›´æ–°ã€æ— æŸå‡çº§ã€å¯è§†åŒ– Consoleã€å¼€æ”¾çš„æ’ä»¶ã€åŸºäº Kubernetes å’Œ Istioï¼Œç»™æŠ€æœ¯æ¼”è¿›å¸¦æ¥äº†æ›´å¤šçš„å¯èƒ½æ€§ã€‚ æœ€åï¼Œæˆ‘ä»¬ç¥æ„¿ Higress åœ¨äº‘åŸç”Ÿçš„é“è·¯ä¸Šè¶Šèµ°è¶Šè¿œï¼Œå¤§å®¶ä¸€èµ·ç”¨å¼€æºã€å¼€æ”¾ã€åˆ†äº«çš„å¿ƒæ€å°† Higress å»ºè®¾åœ°è¶Šæ¥è¶Šå¥½ã€‚ ","version":null,"tagName":"h2"},{"title":"UUè·‘è…¿åŸºäºHigressçš„äº‘åŸç”Ÿç½‘å…³å®è·µ","type":0,"sectionRef":"#","url":"/zh-cn/blog/user-uu","content":"","keywords":"higress UUè·‘è…¿","version":null},{"title":"UUè·‘è…¿ä»‹ç»â€‹","type":1,"pageTitle":"UUè·‘è…¿åŸºäºHigressçš„äº‘åŸç”Ÿç½‘å…³å®è·µ","url":"/zh-cn/blog/user-uu#uuè·‘è…¿ä»‹ç»","content":"UUè·‘è…¿éš¶å±äºéƒ‘å·æ—¶ç©ºéš§é“ä¿¡æ¯æŠ€æœ¯æœ‰é™å…¬å¸ï¼Œæ˜¯æ›´ä¸“ä¸šçš„åŒåŸå³æ—¶ç”Ÿæ´»æœåŠ¡å¹³å°ï¼Œä»¥å…±äº«åŠ³åŠ¨åŠ›ä¸æ—¶é—´ä¸ºä¼—åŒ…ç†å¿µï¼Œäººäººéƒ½å¯æ³¨å†Œæˆä¸ºè·‘è…¿å¸ˆå‚…ï¼Œå¹¶ä¸ºé™„è¿‘çš„äººæä¾›å¸®å–é€ã€å¸®ä¹°ã€å…¨èƒ½å¸®ã€å¸®æ’é˜Ÿç­‰å¤šæ ·åŒ–åŒåŸå³æ—¶æœåŠ¡ï¼Œä¸ºä¸­å°ä¼ä¸šã€ç”µå•†ã€æœ¬åœ°å•†æˆ·æä¾›å®‰å…¨ä¸“ä¸šçš„é«˜ç«¯é…é€æœåŠ¡ã€‚UUè·‘è…¿ç§‰æ‰¿â€œè®©ç”Ÿæ´»æ›´ç¾å¥½â€çš„ç†å¿µï¼Œä¸æ–­åˆ›æ–°ã€ä¸æ–­è¿›æ­¥ï¼Œä¸ºç”¨æˆ·æä¾›æ›´åŠ ä¼˜è´¨çš„æœåŠ¡ä½“éªŒã€‚ ","version":null,"tagName":"h2"},{"title":"èƒŒæ™¯éœ€æ±‚â€‹","type":1,"pageTitle":"UUè·‘è…¿åŸºäºHigressçš„äº‘åŸç”Ÿç½‘å…³å®è·µ","url":"/zh-cn/blog/user-uu#èƒŒæ™¯éœ€æ±‚","content":"UUè·‘è…¿å¯¹äºäº‘åŸç”Ÿç½‘å…³çš„è¦æ±‚æ˜¯ï¼Œèƒ½åŒæ—¶æ»¡è¶³æµé‡ç½‘å…³ï¼Œå¾®æœåŠ¡ç½‘å…³ï¼Œä»¥åŠå®‰å…¨ç½‘å…³çš„åœºæ™¯è¯‰æ±‚ï¼Œç”¨ä¸€ä¸ªç½‘å…³æ¥è§£å†³ä¹‹å‰éœ€è¦éƒ¨ç½²å¤šä¸ªç½‘å…³æ‰èƒ½è§£å†³çš„é—®é¢˜ï¼š å…·å¤‡é«˜å¯é æ€§å’Œé«˜æ€§èƒ½ï¼Œå¯ä»¥æ›¿ä»£ä¹‹å‰éƒ¨ç½²çš„ Nginx Ingress æµé‡ç½‘å…³åŒæ—¶æ”¯æŒ K8s ç”Ÿæ€å’Œä¼ ç»Ÿå¾®æœåŠ¡ç”Ÿæ€æ¥å…¥ï¼Œæ”¯æŒï¼ˆHTTPè½¬Dubboï¼‰åè®®è½¬æ¢ï¼Œå¯ä»¥æ›¿ä»£ä¹‹å‰éƒ¨ç½²çš„ Spring Cloud Gateway å¾®æœåŠ¡ç½‘å…³èƒ½å¤Ÿæ”¯æŒåœ¨ç½‘å…³å…¥å£å¤„å®Œæˆé‰´æƒï¼Œé¿å…æ¯ä¸ªåç«¯æœåŠ¡é‡å¤å®ç°é‰´æƒåŠŸèƒ½ï¼Œå®ç°å®‰å…¨ç½‘å…³çš„èƒ½åŠ›å…·å¤‡æ˜“ç”¨çš„æ§åˆ¶å°è¿›è¡Œ API çš„æ²»ç†ï¼Œä»¥åŠå…·å¤‡ä¸°å¯Œçš„å¯è§‚æµ‹æŒ‡æ ‡ ","version":null,"tagName":"h2"},{"title":"è¿ç§» Higress å‰çš„æ¶æ„â€‹","type":1,"pageTitle":"UUè·‘è…¿åŸºäºHigressçš„äº‘åŸç”Ÿç½‘å…³å®è·µ","url":"/zh-cn/blog/user-uu#è¿ç§»-higress-å‰çš„æ¶æ„","content":" ä¹‹å‰å­˜åœ¨çš„ä¸»è¦ç—›ç‚¹ï¼š Spring Cloud Gateway è‡ªèº«å‚æ•°è°ƒæ•´æ”¹åŠ¨éœ€è¦é‡æ–°éƒ¨ç½²å½±å“æµé‡ï¼Œä¸”åŠ¨æ€è·¯ç”±éœ€è¦è¿›è¡Œå¤æ‚çš„é…ç½®ï¼ŒåŒ…æ‹¬è·¯ç”±è§„åˆ™ï¼Œå®¹æ˜“å‡ºç°é…ç½®é”™è¯¯å¯¼è‡´ç³»ç»Ÿå¼‚å¸¸è¿ç»´éœ€è¦åŒæ—¶ç»´æŠ¤ Nginx Ingress å’Œ Spring Cloud Gatewayï¼Œé¢å¯¹æµé‡é«˜å³°è¿›è¡Œè¿›è¡Œæ‰©å®¹ç›¸å…³æ“ä½œæ—¶ï¼Œè¿ç»´è´Ÿæ‹…æ¯”è¾ƒé‡ï¼Œè€Œä¸”è¿™æ ·ä¸¤å±‚ç½‘å…³çš„è¯·æ±‚çš„é“¾è·¯è¾ƒé•¿ï¼Œå¯ç”¨æ€§ä½ã€æˆæœ¬é«˜ ","version":null,"tagName":"h2"},{"title":"è¿ç§» Higress åçš„æ¶æ„â€‹","type":1,"pageTitle":"UUè·‘è…¿åŸºäºHigressçš„äº‘åŸç”Ÿç½‘å…³å®è·µ","url":"/zh-cn/blog/user-uu#è¿ç§»-higress-åçš„æ¶æ„","content":" Higressäº‘åŸç”Ÿç½‘å…³å®ç°è´Ÿè½½å‡è¡¡ã€è·¯ç”±ã€å®‰å…¨è®¤è¯ç­‰åŠŸèƒ½ã€‚é€šè¿‡ç½‘å…³å¯¹å¤–æä¾›æœåŠ¡ç»Ÿä¸€å…¥å£ï¼Œå¹¶å¯¹è¯·æ±‚è¿›è¡Œé‰´æƒã€é™æµå’Œç›‘æ§ç­‰æ“ä½œï¼Œç”¨ç®€å•çš„æ¶æ„ä¿è¯äº†æ•´ä½“ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚ åˆå¹¶æµé‡ç½‘å…³ï¼ˆK8s Nginx Ingressï¼‰å’Œå¾®æœåŠ¡ç½‘å…³ï¼ˆSpring Cloud Gateway ï¼‰ï¼Œé™ä½ç½‘å…³æˆæœ¬ï¼Œé«˜æ€§èƒ½æœåŠ¡ï¼›åŒæ—¶æ”¯æŒ K8s service å’Œ Nacos æœåŠ¡æ³¨å†Œå‘ç°ï¼Œæ»¡è¶³æŠ€æœ¯éœ€æ±‚å¯¹ K8s ç”Ÿæ€å’Œä¼ ç»Ÿå¾®æœåŠ¡ç”Ÿæ€æ¥å…¥ã€‚Nginx Ingress å®Œç¾è¿ç§»åˆ° Higressï¼Œååˆ†ä¸æ»‘ ","version":null,"tagName":"h2"},{"title":"ç»„ä»¶ç¼–è¯‘è¯´æ˜","type":0,"sectionRef":"#","url":"/zh-cn/docs/dev/architecture","content":"","keywords":"higress architecture","version":"Next"},{"title":"Higress Controllerâ€‹","type":1,"pageTitle":"ç»„ä»¶ç¼–è¯‘è¯´æ˜","url":"/zh-cn/docs/dev/architecture#higress-controller","content":"Higress çš„æ§åˆ¶é¢ç¨‹åºï¼Œä¼šè¿æ¥ Istio ï¼Œç”¨äºç”Ÿæˆ Istio API å¯¹è±¡ï¼Œé€šè¿‡ xDS åè®®å‘é€ç»™ Istioã€‚ åœ¨ higress ä»“åº“ç›®å½•ä¸‹æ‰§è¡Œ make build å³å¯è¿›è¡Œæœ¬åœ°ç¯å¢ƒèƒ½è¿è¡Œçš„äºŒè¿›åˆ¶ç¼–è¯‘ è‹¥éœ€è¦ç¼–è¯‘ docker é•œåƒï¼Œè¯·æ‰§è¡Œ make docker-buildã€‚Higress Controllerä½¿ç”¨çš„Istio piloté•œåƒä½¿ç”¨make build-istio-local ç¼–è¯‘ã€‚ ","version":"Next","tagName":"h2"},{"title":"Higress Gatewayâ€‹","type":1,"pageTitle":"ç»„ä»¶ç¼–è¯‘è¯´æ˜","url":"/zh-cn/docs/dev/architecture#higress-gateway","content":"Higress çš„æ•°æ®é¢ç¨‹åºï¼Œç”¨äºå®ç°ç½‘å…³è·¯ç”±è½¬å‘ç­‰èƒ½åŠ›ã€‚ ","version":"Next","tagName":"h2"},{"title":"å¿«é€Ÿæ„å»ºâ€‹","type":1,"pageTitle":"ç»„ä»¶ç¼–è¯‘è¯´æ˜","url":"/zh-cn/docs/dev/architecture#å¿«é€Ÿæ„å»º","content":"é€‚ç”¨åœºæ™¯ï¼šæœªå¯¹ Envoy æœ¬ä½“è¿›è¡Œäº†ä¿®æ”¹ï¼Œå³ä¸éœ€è¦é‡æ–°ç¼–è¯‘ Envoy æœ¬ä½“çš„æƒ…å†µ æ„å»ºæ­¥éª¤ï¼š åœ¨å‘½ä»¤è¡Œä¸‹è¿›å…¥ higress ä»“åº“ç›®å½•ï¼›æ‰§è¡Œ make build-gateway-local å‘½ä»¤ï¼Œè¿›è¡Œ Higress Gateway é•œåƒçš„æ„å»ºï¼›æ„å»ºå®Œæˆåä¼šè¾“å‡ºé•œåƒ tagã€‚ ","version":"Next","tagName":"h3"},{"title":"å®Œæ•´æ„å»ºâ€‹","type":1,"pageTitle":"ç»„ä»¶ç¼–è¯‘è¯´æ˜","url":"/zh-cn/docs/dev/architecture#å®Œæ•´æ„å»º","content":"é€‚ç”¨åœºæ™¯ï¼šéœ€è¦é‡æ–°ç¼–è¯‘ Envoy æœ¬ä½“çš„æƒ…å†µ æ„å»ºæ­¥éª¤ï¼š åœ¨å‘½ä»¤è¡Œä¸‹è¿›å…¥ higress ä»“åº“ç›®å½•ï¼›æ‰§è¡Œ cd external/proxy; BUILD_WITH_CONTAINER=1 make test_release å‘½ä»¤ï¼Œæ„å»º Envoy æœ¬ä½“ï¼›æ„å»ºå®Œæˆåï¼Œç”Ÿæˆçš„ envoy.tar.gz æ–‡ä»¶ä¼šæ”¾åœ¨ higress ä»“åº“ç›®å½•çš„ external/package å­ç›®å½•å†…ï¼›å°†æ„å»ºå®Œæˆåè¾“å‡ºçš„ envoy.tar.gz æ–‡ä»¶ï¼Œæ ¹æ®æœ¬æœºçš„ç³»ç»Ÿæ¶æ„é‡å‘½åä¸º envoy-amd64.tar.gz æˆ– envoy-arm64.tar.gzï¼›å¦‚æœéœ€è¦æ„å»ºå¤šå¹³å°é•œåƒï¼Œé‚£ä¹ˆéœ€è¦åœ¨å¦ä¸€ä¸ªå¹³å°çš„ç³»ç»Ÿä¸Šå®Œæˆ Envoy çš„æ„å»ºï¼Œå¹¶å°†å…¶ç”Ÿæˆçš„ envoy.tar.gz æ–‡ä»¶é‡å‘½ååå¤åˆ¶åˆ°æœ¬æœºä¸Šï¼ˆå‚è€ƒä»¥ä¸Š 2ã€3 ä¸¤æ­¥ï¼‰ï¼›å‚è€ƒä¸Šé¢çš„å¿«é€Ÿæ„å»ºæ­¥éª¤ï¼Œæ„å»º Higress Gateway é•œåƒã€‚ ","version":"Next","tagName":"h3"},{"title":"æºç é˜…è¯»æŒ‡å¼•","type":0,"sectionRef":"#","url":"/zh-cn/docs/dev/code","content":"æºç é˜…è¯»æŒ‡å¼• å¦‚æœæ‚¨æƒ³ç»™ Higress è´¡çŒ®ä»£ç ï¼Œè¯·å‚è€ƒå‚ä¸è´¡çŒ® ä»£ç ç›®å½•ç»“æ„è¯´æ˜ cmd: å‘½ä»¤è¡Œå‚æ•°è§£æç­‰å¤„ç†ä»£ç  pkg/ingress: Ingress èµ„æºè½¬æ¢ä¸º Istio èµ„æºç­‰ç›¸å…³ä»£ç  pkg/bootstrap: åŒ…æ‹¬å¯åŠ¨ gRPC/xDS/HTTP server ç­‰çš„ä»£ç  registry: å®ç°å¯¹æ¥å¤šç§æ³¨å†Œä¸­å¿ƒè¿›è¡ŒæœåŠ¡å‘ç°çš„ä»£ç  envoy: ä¾èµ–çš„ envoy å®˜æ–¹ä»“åº“ commitï¼Œä»¥åŠå¯¹åº”çš„è¡¥ä¸ä»£ç  istio: ä¾èµ–çš„ istio å®˜æ–¹ä»“åº“ commitï¼Œä»¥åŠå¯¹åº”çš„è¡¥ä¸ä»£ç  plugins: Higress æ’ä»¶ sdkï¼Œä»¥åŠå®˜æ–¹å†…ç½®æ’ä»¶ä»£ç  script: ç¼–è¯‘ç›¸å…³è„šæœ¬ docker: docker é•œåƒæ„å»ºç›¸å…³è„šæœ¬ åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ä¼šè‡ªåŠ¨æ‰§è¡Œmake prebuildï¼Œå°†äº§ç”Ÿ external ç›®å½•ï¼Œè¿™æ˜¯å°†ç”¨åˆ°çš„ envoy å’Œ istio ä¾èµ–ï¼Œæ‰“ä¸Šå¯¹åº”çš„è¡¥ä¸ä»£ç åç”Ÿæˆã€‚ å¦‚æœè¦ä¿®æ”¹ envoy å’Œ istio ä»£ç ï¼Œå¹¶äº§ç”Ÿæ–°çš„è¡¥ä¸æ–‡ä»¶ï¼Œå¯ä»¥ç›´æ¥åœ¨ external ç›®å½•ä¸‹ä¿®æ”¹ï¼Œå¹¶è¿›è¡Œé‡å‘½åï¼Œå†æ‰§è¡Œ prebuildï¼Œä¹‹åå¯¹æ¯”ç”Ÿæˆè¡¥ä¸æ–‡ä»¶ï¼Œä¾‹å¦‚: mv external/envoy external/envoy_new make prebuild cd external diff -Naur envoy envoy_new &gt; ../envoy/1.20/patches/envoy/$(date +%Y%m%d)-what-changed.patch æ³¨æ„è¡¥ä¸æ‰§è¡Œé¡ºåºæŒ‰ç…§æ–‡ä»¶åå­—ç¬¦é¡ºåºï¼Œè¯·ä»¥æ—¶é—´æˆ³å¼€å¤´","keywords":"higress coding","version":"Next"},{"title":"æ•™ç¨‹ï¼šå¦‚ä½•åœ¨æœ¬åœ°è¿›è¡Œhigressè°ƒè¯•å’Œç«¯åˆ°ç«¯æµ‹è¯•","type":0,"sectionRef":"#","url":"/zh-cn/docs/dev/e2e-debug","content":"æ•™ç¨‹ï¼šå¦‚ä½•åœ¨æœ¬åœ°è¿›è¡Œhigressè°ƒè¯•å’Œç«¯åˆ°ç«¯æµ‹è¯• æ•™ç¨‹é“¾æ¥","keywords":"higress","version":"Next"},{"title":"æ•™ç¨‹ï¼šå¦‚ä½•åœ¨æœ¬åœ°å¼€å‘å’Œè°ƒè¯• Higress æ§åˆ¶å°","type":0,"sectionRef":"#","url":"/zh-cn/docs/dev/console-dev","content":"æ•™ç¨‹ï¼šå¦‚ä½•åœ¨æœ¬åœ°å¼€å‘å’Œè°ƒè¯• Higress æ§åˆ¶å° æ•™ç¨‹é“¾æ¥","keywords":"higress console","version":"Next"},{"title":"Higressè‡ªå®šä¹‰CRDå¼€å‘æŒ‡å¼•","type":0,"sectionRef":"#","url":"/zh-cn/docs/dev/CustomResourceDefinition","content":"","keywords":"higress CRD","version":"Next"},{"title":"CRDæ¨¡å‹å®šä¹‰â€‹","type":1,"pageTitle":"Higressè‡ªå®šä¹‰CRDå¼€å‘æŒ‡å¼•","url":"/zh-cn/docs/dev/CustomResourceDefinition#crdæ¨¡å‹å®šä¹‰","content":"","version":"Next","tagName":"h2"},{"title":"è¿›å…¥apiç›®å½•â€‹","type":1,"pageTitle":"Higressè‡ªå®šä¹‰CRDå¼€å‘æŒ‡å¼•","url":"/zh-cn/docs/dev/CustomResourceDefinition#è¿›å…¥apiç›®å½•","content":"higress/api æ ¹æ®æ‰€è¦æ–°å»ºCRDçš„apiç±»å‹ï¼Œé€‰æ‹©ç›¸å¯¹äºçš„å­ç›®å½•ï¼Œæ¯”å¦‚ networking/v1 ","version":"Next","tagName":"h3"},{"title":"ç¼–å†™CRDæ¨¡å‹â€‹","type":1,"pageTitle":"Higressè‡ªå®šä¹‰CRDå¼€å‘æŒ‡å¼•","url":"/zh-cn/docs/dev/CustomResourceDefinition#ç¼–å†™crdæ¨¡å‹","content":"æ¯”å¦‚æˆ‘è¿™é‡Œæƒ³å®šä¹‰ä¸€ä¸ªhttp_2_rpcçš„CRDèµ„æº http_2_rpc.proto // Copyright (c) 2022 Alibaba Group Holding Ltd. // // Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); // you may not use this file except in compliance with the License. // You may obtain a copy of the License at // // http://www.apache.org/licenses/LICENSE-2.0 // // Unless required by applicable law or agreed to in writing, software // distributed under the License is distributed on an &quot;AS IS&quot; BASIS, // WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. // See the License for the specific language governing permissions and // limitations under the License. syntax = &quot;proto3&quot;; import &quot;google/api/field_behavior.proto&quot;; // $schema: higress.networking.v1.Http2Rpc // $title: Http2Rpc // $description: Configuration affecting service discovery from multi registries // $mode: none package higress.networking.v1; option go_package = &quot;github.com/alibaba/higress/api/networking/v1&quot;; // &lt;!-- crd generation tags // +cue-gen:Http2Rpc:groupName:networking.higress.io // +cue-gen:Http2Rpc:version:v1 // +cue-gen:Http2Rpc:storageVersion // +cue-gen:Http2Rpc:annotations:helm.sh/resource-policy=keep // +cue-gen:Http2Rpc:subresource:status // +cue-gen:Http2Rpc:scope:Namespaced // +cue-gen:Http2Rpc:resource:categories=higress-io,plural=http2rpcs // +cue-gen:Http2Rpc:preserveUnknownFields:false // --&gt; // // &lt;!-- go code generation tags // +kubetype-gen // +kubetype-gen:groupVersion=networking.higress.io/v1 // +genclient // +k8s:deepcopy-gen=true // --&gt; message Http2Rpc { oneof destination { DubboService dubbo = 1; GrpcService grpc = 2; } } message DubboService { string service = 1 [(google.api.field_behavior) = REQUIRED]; string version = 2 [(google.api.field_behavior) = REQUIRED]; string group = 3 [(google.api.field_behavior) = OPTIONAL]; repeated Method methods = 4 [(google.api.field_behavior) = REQUIRED]; } message Method { string service_method = 1 [(google.api.field_behavior) = REQUIRED]; string headers_attach = 2 [(google.api.field_behavior) = OPTIONAL]; string http_path = 3 [(google.api.field_behavior) = REQUIRED]; repeated string http_methods = 4 [(google.api.field_behavior) = REQUIRED]; repeated Param params = 5; } message Param { string param_source = 1 [(google.api.field_behavior) = REQUIRED]; string param_key = 2 [(google.api.field_behavior) = REQUIRED]; string param_type = 3 [(google.api.field_behavior) = REQUIRED]; } message GrpcService { oneof destination { string proto_descriptor_str = 1; string proto_descriptor_file_path = 2; } repeated string services = 3 [(google.api.field_behavior) = REQUIRED]; }  ","version":"Next","tagName":"h3"},{"title":"2ã€ä»£ç ç”Ÿæˆâ€‹","type":1,"pageTitle":"Higressè‡ªå®šä¹‰CRDå¼€å‘æŒ‡å¼•","url":"/zh-cn/docs/dev/CustomResourceDefinition#2ä»£ç ç”Ÿæˆ","content":"è¿™é‡Œä¾èµ–kubernetes code generatorsç”Ÿæˆç›¸å…³kubetypeã€clientã€informerã€listerç­‰ä»£ç ã€‚ åœ¨higressæ ¹ç›®å½•æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œ GENERATE_API=1 make gen-client æ‰§è¡Œä¸Šè¿°å‘½ä»¤åä¼šç”Ÿæˆï¼Œå¦‚ä¸‹ä»£ç  ","version":"Next","tagName":"h2"},{"title":"kubernetes customresuourceå®šä¹‰â€‹","type":1,"pageTitle":"Higressè‡ªå®šä¹‰CRDå¼€å‘æŒ‡å¼•","url":"/zh-cn/docs/dev/CustomResourceDefinition#kubernetes-customresuourceå®šä¹‰","content":"é€šè¿‡å°†è¿™ä¸ªå®šä¹‰æ³¨å†Œç»™kubernetesé›†ç¾¤ï¼Œç„¶åå°±èƒ½åˆ›å»ºå¯¹åº”çš„CRDèµ„æºå®ä¾‹ã€‚ ","version":"Next","tagName":"h3"},{"title":"CRDå¯¹åº”èµ„æºå¯¹è±¡Goè¯­è¨€çš„å®šä¹‰åŠæ“ä½œæ–¹æ³•â€‹","type":1,"pageTitle":"Higressè‡ªå®šä¹‰CRDå¼€å‘æŒ‡å¼•","url":"/zh-cn/docs/dev/CustomResourceDefinition#crdå¯¹åº”èµ„æºå¯¹è±¡goè¯­è¨€çš„å®šä¹‰åŠæ“ä½œæ–¹æ³•","content":"Hingress(IngressConfig)åˆå§‹åŒ–åŠè¿è¡Œé˜¶æ®µä¼šä½¿ç”¨è¿™é‡Œçš„apiæ¨¡å‹ã€‚ ","version":"Next","tagName":"h3"},{"title":"kubernetes client apisâ€‹","type":1,"pageTitle":"Higressè‡ªå®šä¹‰CRDå¼€å‘æŒ‡å¼•","url":"/zh-cn/docs/dev/CustomResourceDefinition#kubernetes-client-apis","content":"Hingressé›†æˆkubernetes clientä¸kube-apiserveräº¤äº’æ—¶ä¼šä½¿ç”¨è¿™é‡Œçš„æ¨¡å‹å¯¹è±¡ã€‚ ","version":"Next","tagName":"h3"},{"title":"kubernetes client apis operateâ€‹","type":1,"pageTitle":"Higressè‡ªå®šä¹‰CRDå¼€å‘æŒ‡å¼•","url":"/zh-cn/docs/dev/CustomResourceDefinition#kubernetes-client-apis-operate","content":" ","version":"Next","tagName":"h3"},{"title":"kubernetes client informerâ€‹","type":1,"pageTitle":"Higressè‡ªå®šä¹‰CRDå¼€å‘æŒ‡å¼•","url":"/zh-cn/docs/dev/CustomResourceDefinition#kubernetes-client-informer","content":" ","version":"Next","tagName":"h3"},{"title":"kubernetes client informer listerâ€‹","type":1,"pageTitle":"Higressè‡ªå®šä¹‰CRDå¼€å‘æŒ‡å¼•","url":"/zh-cn/docs/dev/CustomResourceDefinition#kubernetes-client-informer-lister","content":" ","version":"Next","tagName":"h3"},{"title":"3ã€é›†æˆ Controllerâ€‹","type":1,"pageTitle":"Higressè‡ªå®šä¹‰CRDå¼€å‘æŒ‡å¼•","url":"/zh-cn/docs/dev/CustomResourceDefinition#3é›†æˆ-controller","content":"è¿™é‡Œä¸»è¦æ˜¯åœ¨ingress_configï¼Œæ·»åŠ è‡ªå®šä¹‰CRD Resourceçš„å¼•ç”¨å¯¹è±¡ï¼Œå¹¶ä¸”é€šè¿‡informeræœºåˆ¶ç›‘å¬CRDå®ä¾‹çš„å˜åŒ–ï¼Œç„¶åå®ç°ç›¸å…³ä¸šåŠ¡é€»è¾‘ï¼Œæ¯”å¦‚ç”Ÿæˆistio EnvoyFilterç­‰ higress/pkg/ingress/config/ingress_config.go ","version":"Next","tagName":"h2"},{"title":"å®šä¹‰ç›¸å…³å±æ€§â€‹","type":1,"pageTitle":"Higressè‡ªå®šä¹‰CRDå¼€å‘æŒ‡å¼•","url":"/zh-cn/docs/dev/CustomResourceDefinition#å®šä¹‰ç›¸å…³å±æ€§","content":"//å¼‚æ­¥çº¿ç¨‹å¯åŠ¨åï¼Œå¯ä»¥ç›‘å¬CRD-http2rpcèµ„æºå˜åŒ–äº‹ä»¶ http2rpcController http2rpc.Http2RpcController //èµ„æºå˜åŒ–äº‹ä»¶å¤„ç†æ—¶é€šè¿‡Listerè·å–å‘é€å˜åŒ–çš„CRDå®ä¾‹å¯¹è±¡ http2rpcLister netlisterv1.Http2RpcLister //å­˜å‚¨å…¨é‡çš„http2rpcsèµ„æºå¯¹è±¡ï¼Œä»¥ä¾¿åœ¨å…¶ä»–äº‹ä»¶æµç¨‹ä¸­æ¶ˆè´¹ http2rpcs map[string]*higressv1.Http2Rpc   ","version":"Next","tagName":"h3"},{"title":"åœ¨higresså¯åŠ¨é˜¶æ®µåˆå§‹åŒ–ä¸Šè¿°å˜é‡â€‹","type":1,"pageTitle":"Higressè‡ªå®šä¹‰CRDå¼€å‘æŒ‡å¼•","url":"/zh-cn/docs/dev/CustomResourceDefinition#åœ¨higresså¯åŠ¨é˜¶æ®µåˆå§‹åŒ–ä¸Šè¿°å˜é‡","content":"è¿™é‡Œå°±ä¼šå¼•ç”¨è‡ªåŠ¨åŒ–ç”Ÿæˆçš„ä¸€äº›ä»£ç ï¼Œè¿›è¡ŒControllerçš„åˆ›å»ºåŠäº‹ä»¶ç»‘å®šã€‚ ","version":"Next","tagName":"h3"},{"title":"å®ç°CRDå˜æ›´äº‹ä»¶å¤„ç†é€»è¾‘â€‹","type":1,"pageTitle":"Higressè‡ªå®šä¹‰CRDå¼€å‘æŒ‡å¼•","url":"/zh-cn/docs/dev/CustomResourceDefinition#å®ç°crdå˜æ›´äº‹ä»¶å¤„ç†é€»è¾‘","content":" æ‰©å±•é˜…è¯» Kubernetes Controller æœºåˆ¶è¯¦è§£ï¼ˆä¸€ï¼‰ Kubernetes Informeræœºåˆ¶ ","version":"Next","tagName":"h3"},{"title":"ç»™é—®é¢˜æ‰“æ ‡ç­¾","type":0,"sectionRef":"#","url":"/zh-cn/docs/developers/committer-guide/label-an-issue-guide_dev","content":"ç»™é—®é¢˜æ‰“æ ‡ç­¾ å¦‚æœæ‚¨æ­£åœ¨å¤„ç†ä¸€ä¸ªé—®é¢˜ï¼Œè¯·è®°å¾—ç»™è¿™ä¸ªé—®é¢˜æ ‡è®°ä¸€ä¸ªæˆ–è€…å¤šä¸ªæ‚¨è®¤ä¸ºæœ‰æ„ä¹‰çš„æ ‡ç­¾ã€‚æœ‰äº†æ ‡ç­¾ï¼Œå…¶ä»–å¼€å‘äººå‘˜å°±ä¼šå¾ˆè½»æ¾åœ°è¯†åˆ«å‡ºé—®é¢˜ï¼Œä»¥ä¾¿å¯¹å…¶è¿›è¡Œåˆ†ç±»å¹¶è·Ÿè¸ªè¿›åº¦ã€‚ å¯¹äºéœ€è¦ç¼–ç å’Œå‘ç‰ˆä¿®å¤çš„issueså’Œpull requestsï¼Œéœ€è¦æ‚¨å°†å…¶æ ‡è®°ä¸ºmilestoneã€‚ ä¸€äº›å¸¸ç”¨çš„æ ‡ç­¾ï¼š è¯·æ±‚å¸®åŠ© help wantedgood first issue ä¼˜å…ˆçº§ priority/blockerpriority/highpriority/lowpriority/normal çŠ¶æ€ status/need-triagestatus/DO-NOT-MERGEstatus/READY-TO-MERGEstatus/invalidstatus/wontfix ç±»å‹ type/bugtype/documentationtype/enhancementtype/feature","keywords":"Higress","version":"Next"},{"title":"Higress é›†æˆ Skywalking å¯è§‚æµ‹æ€§æ¢ç´¢","type":0,"sectionRef":"#","url":"/zh-cn/blog/skywalking","content":"","keywords":"higress","version":null},{"title":"ä¸€ã€æ•´ä½“æ¶æ„å›¾â€‹","type":1,"pageTitle":"Higress é›†æˆ Skywalking å¯è§‚æµ‹æ€§æ¢ç´¢","url":"/zh-cn/blog/skywalking#ä¸€æ•´ä½“æ¶æ„å›¾","content":" æ•´ä½“åŒ…å«å››å¤§å—å†…å®¹ï¼š Higress ç»„ä»¶ï¼š higress-gateway, higress-console, higress-controllerSkywalking ç»„ä»¶ï¼š skywalking dashboard ui, skywalking aop serverä¸šåŠ¡åº”ç”¨ç»„ä»¶ï¼š bff, middle service, backend serviceIngress ç»„ä»¶ï¼š skywalking.higress.io, httpbin.example.com ","version":null,"tagName":"h2"},{"title":"äºŒã€Skywalking è°ƒç”¨é“¾è·¯è·Ÿè¸ªåŸç†â€‹","type":1,"pageTitle":"Higress é›†æˆ Skywalking å¯è§‚æµ‹æ€§æ¢ç´¢","url":"/zh-cn/blog/skywalking#äºŒskywalking-è°ƒç”¨é“¾è·¯è·Ÿè¸ªåŸç†","content":"SkyWalkingä¸ºæœåŠ¡(service)ï¼ŒæœåŠ¡å®ä¾‹(service instance)ï¼Œä»¥åŠç«¯ç‚¹(endpoint)æä¾›äº†å¯è§‚æµ‹èƒ½åŠ›ã€‚ æœåŠ¡(service)ï¼šè¡¨ç¤ºå¯¹è¯·æ±‚æä¾›ç›¸åŒè¡Œä¸ºçš„ä¸€ç»„å·¥ä½œè´Ÿè½½ã€‚åœ¨ä½¿ç”¨æ‰“ç‚¹ä»£ç†æˆ– SDK çš„æ—¶å€™ï¼Œå¯ä»¥å®šä¹‰æœåŠ¡çš„åå­—ã€‚æœåŠ¡å®ä¾‹(Service Instance)ï¼šä¸€ç»„å·¥ä½œè´Ÿè½½ä¸­çš„æ¯ä¸€ä¸ªå·¥ä½œè´Ÿè½½ç§°ä¸ºä¸€ä¸ªå®ä¾‹ã€‚ç«¯ç‚¹(Endpoint)ï¼š å¯¹äºç‰¹å®šæœåŠ¡æ‰€æ¥æ”¶çš„è¯·æ±‚è·¯å¾„ï¼Œå¦‚ HTTP çš„ URI è·¯å¾„å’Œ gRPC æœåŠ¡çš„ç±»å + æ–¹æ³•ç­¾åã€‚è¿›ç¨‹ï¼ˆProcessï¼‰ï¼š æ“ä½œç³»ç»Ÿè¿›ç¨‹. åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œä¸€ä¸ªæœåŠ¡å®ä¾‹å’Œè¿›ç¨‹ä¸æ˜¯ä¸€ä¸€å¯¹åº”ï¼Œ åœ¨k8séƒ¨ç½²ä¸‹ï¼Œä¸€ä¸ªPODå¯¹åº”å¤šä¸ªè¿›ç¨‹ã€‚ ","version":null,"tagName":"h2"},{"title":"Skywalking æ•´ä½“æ¶æ„â€‹","type":1,"pageTitle":"Higress é›†æˆ Skywalking å¯è§‚æµ‹æ€§æ¢ç´¢","url":"/zh-cn/blog/skywalking#skywalking-æ•´ä½“æ¶æ„","content":" ä¸»è¦ç”±å››ä¸ªæ ¸å¿ƒç»„ä»¶ç»„æˆï¼š æ¢é’ˆ: æ¢é’ˆç”¨äºæ”¶é›†ç›‘æµ‹æ•°æ®åŒ…æ‹¬æŒ‡æ ‡ï¼Œé“¾è·¯è·Ÿè¸ªï¼Œæ—¥å¿—å’Œäº‹ä»¶æ•°æ®æ¥æ”¶å’Œèšåˆ: å¹³å°åç«¯æ”¯æŒæ•°æ®èšåˆï¼Œæ•°æ®åˆ†æä»¥åŠé©±åŠ¨æ•°æ®æµä»æ¢é’ˆåˆ°ç”¨æˆ·ç•Œé¢çš„å¤„ç†å­˜å‚¨: é€šè¿‡å¼€æ”¾æ¥å£æ”¯æŒåç«¯å­˜å‚¨ç³»ç»Ÿæ”¯æŒElasticSearch, H2, MySQL, TiDB, BanyanDBç­‰UI: ä¸€ä¸ªå®šåˆ¶åŒ–çš„Webç³»ç»Ÿï¼Œç”¨æˆ·å¯ä»¥å¯è§†åŒ–æŸ¥çœ‹å’Œç®¡ç† SkyWalking æ•°æ® ","version":null,"tagName":"h3"},{"title":"åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªåŸç†åˆ†æâ€‹","type":1,"pageTitle":"Higress é›†æˆ Skywalking å¯è§‚æµ‹æ€§æ¢ç´¢","url":"/zh-cn/blog/skywalking#åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªåŸç†åˆ†æ","content":"åˆ†å¸ƒå¼é“¾è·¯ä»‹ç» åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªæ˜¯è®°å½•æ¥æºäºç”¨æˆ·è¯·æ±‚åœ¨å„ä¸ªç³»ç»Ÿæˆ–è€…æœåŠ¡ä¸­æ‰€ä¼ æ’­çš„è·¯å¾„ã€‚ A distributed trace, more commonly known as a trace, records the paths taken by requests (made by an application or end-user) as they propagate through multi-service architectures, like microservice and serverless applications. åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªå›¾ç¤ºå¦‚ä¸‹ï¼š  Skywalking åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ª ä¸»è¦åŒ…å«å››ä¸ªå†…å®¹ï¼š Trace: ä¸€ä¸ªå®Œæ•´çš„é“¾è·¯ç”±å¤šä¸ª Segment ç»„æˆSegment: ä¸€ä¸ªè¯·æ±‚åœ¨ä¸€ä¸ªè¿›ç¨‹å†…çš„è½¨è¿¹Span: ä¸€ä¸ªè¯·æ±‚åœ¨æŸä¸ªè¿›ç¨‹é‡Œçš„ä¸€ä¸ªç»„ä»¶é€»è¾‘å†…çš„è½¨è¿¹, æœ‰ Entry Spanï¼Œ Local Span å’Œ Exit Span ä¸‰ç±»Span context: è·¨è¿›ç¨‹æˆ–è€…æœåŠ¡ Trace ä¼ é€’ï¼Œè¿™é‡Œè®¨è®º http ä¼ é€’å¤´ sw8 åŸºæœ¬ç»„ä»¶å›¾ç¤ºå¦‚ä¸‹ï¼š  ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼š ä¸€ä¸ª Trace å†…çš„æ‰€æœ‰ span çš„ Trace ID æ˜¯ç›¸åŒçš„ä¸€ä¸ª Segment ä¸­æœ‰ä¸€ä¸ª EntrySpanï¼Œæ˜¯ Segment å†…å…¶ä»– Span çš„æ ¹ Parentåä¸€ä¸ª Segmentçš„ Entryspan æ€»æ˜¯ä¸å‰ä¸€ä¸ª Segment ä¸­çš„æŸä¸ª ExitSpan å…³è” Skywalking Trace çš„æ•°æ®åè®® å…·ä½“æ•°æ®åè®®å‚è€ƒ Skywalking Trace Data Protocol, è¿™é‡Œä¸»è¦è®²ä¸€ä¸‹ sw8 æ ¼å¼å’Œç»„æˆã€‚ sw8 æ ¼å¼: XXXXX-XXXXX-XXXX-XXXXï¼Œä»¥ - åˆ†å‰²ã€‚ æ ·ä¾‹: 1-MzYzMzM1NDctNTc0YS00MzZlLTgzNWEtNTY1YTQyNzk3YTY3-ZWQ3ODA2ZjYwNTI0MTFlZWE5ZDdmZTFhNTA5YTRmYTk=-1-bWlkZGxl-bWlkZGxlLTZmNGRkN2JmNmMtcWJ4cm0=-L0dFVC9zZXJ2aWNl-aHR0cDovL2JhY2tlbmQv å…·ä½“å†…å®¹å¦‚ä¸‹ï¼š é‡‡æ ·æ ‡è®°(Sample): 0 æˆ–è€… 1ï¼Œ 0 è¡¨ç¤ºä¸é‡‡æ · 1 è¡¨ç¤ºé‡‡æ ·è·Ÿè¸ªID(Trace ID): å­—ç¬¦(BASE64 ç¼–ç )çˆ¶Sengment ID (Parent trace segment ID): å­—ç¬¦(BASE64 ç¼–ç )çˆ¶ Span IDï¼ˆParent span ID): æ•´å‹çˆ¶æœåŠ¡åç§°(Parent service): å­—ç¬¦(BASE64 ç¼–ç )çˆ¶æœåŠ¡å®ä¾‹(Parent service instance): å­—ç¬¦(BASE64 ç¼–ç )çˆ¶Endpoint(Parent endpoint): å­—ç¬¦(BASE64 ç¼–ç )ç›®æ ‡åœ°å€ï¼šå­—ç¬¦(BASE64 ç¼–ç ) ","version":null,"tagName":"h3"},{"title":"ä¸‰ã€Higress æ¶æ„â€‹","type":1,"pageTitle":"Higress é›†æˆ Skywalking å¯è§‚æµ‹æ€§æ¢ç´¢","url":"/zh-cn/blog/skywalking#ä¸‰higress-æ¶æ„","content":"Higressæ˜¯åŸºäºé˜¿é‡Œå†…éƒ¨çš„Envoy Gatewayå®è·µæ²‰æ·€ã€ä»¥å¼€æº Istio + Envoy ä¸ºæ ¸å¿ƒæ„å»ºçš„ä¸‹ä¸€ä»£äº‘åŸç”Ÿç½‘å…³ï¼Œå®ç°äº†æµé‡ç½‘å…³ + å¾®æœåŠ¡ç½‘å…³ + å®‰å…¨ç½‘å…³ä¸‰åˆä¸€çš„é«˜é›†æˆèƒ½åŠ›ï¼Œæ·±åº¦é›†æˆDubboã€Nacosã€Sentinelç­‰å¾®æœåŠ¡æŠ€æœ¯æ ˆï¼Œèƒ½å¤Ÿå¸®åŠ©ç”¨æˆ·æå¤§çš„é™ä½ç½‘å…³çš„éƒ¨ç½²åŠè¿ç»´æˆæœ¬ä¸”èƒ½åŠ›ä¸æ‰“æŠ˜ï¼› åœ¨æ ‡å‡†ä¸Šå…¨é¢æ”¯æŒ Ingressä¸ Gateway APIï¼Œç§¯ææ‹¥æŠ±äº‘åŸç”Ÿä¸‹çš„æ ‡å‡†APIè§„èŒƒï¼› åŒæ—¶ï¼ŒHigress Controllerä¹Ÿæ”¯æŒNginx Ingresså¹³æ»‘è¿ç§»ï¼Œå¸®åŠ©ç”¨æˆ·é›¶æˆæœ¬å¿«é€Ÿè¿ç§»åˆ°Higressã€‚  ","version":null,"tagName":"h2"},{"title":"å››ã€ä¸šåŠ¡åº”ç”¨é›†æˆ Skywalkingâ€‹","type":1,"pageTitle":"Higress é›†æˆ Skywalking å¯è§‚æµ‹æ€§æ¢ç´¢","url":"/zh-cn/blog/skywalking#å››ä¸šåŠ¡åº”ç”¨é›†æˆ-skywalking","content":"ä¸šåŠ¡åº”ç”¨é€šè¿‡ä¸ go2sky é¡¹ç›®é›†æˆ SkyWalking ç›‘æ§ Golang åº”ç”¨ç¨‹åºï¼Œä¸»è¦é€šè¿‡ Gin middleware å’Œ Http è¯·æ±‚æ‰‹åŠ¨åŸ‹ç‚¹ã€‚ 1ã€é›†æˆ Gin middleware func middleware(engine *gin.Engine, tracer *go2sky.Tracer) gin.HandlerFunc { if engine == nil || tracer == nil { return func(c *gin.Context) { c.Next() } } return func(c *gin.Context) { if strings.HasPrefix(c.Request.URL.String(), skipProbPrefix) || strings.HasPrefix(c.Request.URL.String(), skipMetricsPrefix) { c.Next() return } span, ctx, err := tracer.CreateEntrySpan(c.Request.Context(), getOperationName(c), func(key string) (string, error) { return c.Request.Header.Get(key), nil }) if err != nil { c.Next() return } span.SetComponent(componentIDGINHttpServer) span.Tag(go2sky.TagHTTPMethod, c.Request.Method) span.Tag(go2sky.TagURL, c.Request.Host+c.Request.URL.Path) span.SetSpanLayer(agentv3.SpanLayer_Http) c.Request = c.Request.WithContext(ctx) c.Next() if len(c.Errors) &gt; 0 { span.Error(time.Now(), c.Errors.String()) } span.Tag(go2sky.TagStatusCode, strconv.Itoa(c.Writer.Status())) span.End() } } func getOperationName(c *gin.Context) string { return fmt.Sprintf(&quot;/%s%s&quot;, c.Request.Method, c.FullPath()) }  2ã€Httpè¯·æ±‚æ‰‹åŠ¨åŸ‹ç‚¹ func traceHttpCall(c *gin.Context, req *http.Request, url string, fn func(req *http.Request) (*http.Response, error)) (*http.Response, error) { tracer := go2sky.GetGlobalTracer() if tracer == nil { resp, err := fn(req) return resp, err } reqSpan, err := go2sky.GetGlobalTracer().CreateExitSpan(c.Request.Context(), &quot;invoke&quot;, url, func(headerKey, headerValue string) error { req.Header.Set(headerKey, headerValue) return nil }) reqSpan.SetComponent(2) reqSpan.SetSpanLayer(v3.SpanLayer_Http) resp, err2 := fn(req) reqSpan.Tag(go2sky.TagHTTPMethod, http.MethodGet) reqSpan.Tag(go2sky.TagURL, url) reqSpan.End() return resp, err2 }  ","version":null,"tagName":"h2"},{"title":"äº”ã€æœ¬åœ°æµ‹è¯•ç¯å¢ƒæ­å»ºâ€‹","type":1,"pageTitle":"Higress é›†æˆ Skywalking å¯è§‚æµ‹æ€§æ¢ç´¢","url":"/zh-cn/blog/skywalking#äº”æœ¬åœ°æµ‹è¯•ç¯å¢ƒæ­å»º","content":"æœ¬åœ°å®‰è£… kubectl, kind, helm å¯ä»¥å‚è€ƒ Higress å¿«é€Ÿå¼€å§‹å®‰è£… kubectl, kindã€‚ helm å®‰è£…å‚è€ƒå®‰è£…æ–‡æ¡£ å®‰è£… higress å’Œ istio CRD å¯ä»¥å‚è€ƒ higress å¿«é€Ÿå¼€å§‹ å’Œ å®‰è£…éƒ¨ç½² æ¥éƒ¨ç½²ï¼Œè¿™é‡Œéœ€è¦å®‰è£… Istio CRDã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªå‚è€ƒå®‰è£…å‘½ä»¤: helm install higress -n higress-system --set global.onlyPushRouteCluster=false --set higress-core.skywalking.enabled=true --set higress-core.skywalking.service.address=skywalking-oap-server.op-system.svc.cluster.local --set higress-core.skywalking.service.port=11800 higress.io/higress  éƒ¨ç½² Skywalkingï¼Œä¸šåŠ¡åº”ç”¨å’Œ Ingress $ export KUBECONFIG=${HOME}/.kube/config_higress $ kubectl apply -f skywalking.yaml $ kubectl apply -f app.yaml $ kubectl apply -f ingress.yaml  æ£€æŸ¥ POD è¿è¡ŒçŠ¶æ€å’Œ Ingress çŠ¶æ€ $ export KUBECONFIG=${HOME}/.kube/config_higress $ kubectl get pods -n higress-system NAME READY STATUS RESTARTS AGE higress-console-6f554978dc-cclg7 1/1 Running 0 100m higress-console-grafana-7495766db4-4flq5 1/1 Running 0 131m higress-console-prometheus-6d7bdccfb-hxtsq 1/1 Running 0 131m higress-controller-689c5b965f-7wsmt 2/2 Running 0 131m higress-gateway-59966b45d9-z7ltd 1/1 Running 0 131m $ kubectl get pods -n op-system NAME READY STATUS RESTARTS AGE skywalking-oap-dashboard-65f496ccc9-dr96l 1/1 Running 0 99m skywalking-oap-server-859694656b-p8vcq 1/1 Running 0 99m $ kubectl get pods -n app-system NAME READY STATUS RESTARTS AGE backend-6b9549bc64-f98tr 1/1 Running 0 99m backend-6b9549bc64-x2btl 1/1 Running 0 99m bff-766967f8db-8ght7 1/1 Running 0 99m bff-766967f8db-gflbh 1/1 Running 0 99m middle-6f4dd7bf6c-qdjqj 1/1 Running 0 99m middle-6f4dd7bf6c-stzf4 1/1 Running 0 99m $ kubectl get svc -n app-system NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE backend ClusterIP 10.96.179.140 &lt;none&gt; 80/TCP 99m bff ClusterIP 10.96.121.62 &lt;none&gt; 80/TCP 99m middle ClusterIP 10.96.55.8 &lt;none&gt; 80/TCP 99m $ kubectl get ingress -n higress-system NAME CLASS HOSTS ADDRESS PORTS AGE httpbin higress httpbin.example.com 80 8s skywalking-dashboard higress skywalking.higress.io 80 8s  æµ‹è¯• Higress Console, Skywalking Dashboard, Bff æœåŠ¡ 1ï¼‰ç¼–è¾‘ /etc/hosts æ–‡ä»¶æ·»åŠ ä»¥ä¸‹ä¸‰ä¸ªåŸŸå 127.0.0.1 skywalking.higress.io 127.0.0.1 httpbin.example.com  2ï¼‰æ‰“å¼€ higress-gateway ç«¯å£è½¬å‘ $ export KUBECONFIG=${HOME}/.kube/config_higress $ kubectl -n higress-system port-forward service/higress-gateway 8080:80 $ kubectl -n higress-system port-forward service/higress-console 18080:8080  3ï¼‰é€šè¿‡æµè§ˆå™¨æ‰“å¼€è®¿é—®ä¸Šé¢ä¸‰ä¸ªåŸŸå Higress æ§åˆ¶å°: http://127.0.0.1:8080ã€‚é¦–æ¬¡è®¿é—®æ§åˆ¶å°æ—¶éœ€è¦å…ˆåˆå§‹åŒ–ç®¡ç†å‘˜ç”¨æˆ·ã€‚åˆå§‹åŒ–å®Œæˆåä½¿ç”¨å¯¹åº”çš„ç”¨æˆ·åå¯†ç ç™»å½•å³å¯ã€‚  Skywalking Dashboard: http://skywalking.higress.io:8080  Bff æœåŠ¡ï¼š http://httpbin.example.com:8080/hostname  ","version":null,"tagName":"h2"},{"title":"å…­ã€Higress é›†æˆ Skywalking è°ƒç”¨é“¾è·¯è·Ÿè¸ªé…ç½®â€‹","type":1,"pageTitle":"Higress é›†æˆ Skywalking å¯è§‚æµ‹æ€§æ¢ç´¢","url":"/zh-cn/blog/skywalking#å…­higress-é›†æˆ-skywalking-è°ƒç”¨é“¾è·¯è·Ÿè¸ªé…ç½®","content":"é€šè¿‡ä¿®æ”¹ Higress configmap å…¨å±€é…ç½® higress-config æ¥æ¿€æ´» Higress é›†æˆ Skywalking è°ƒç”¨é“¾è·¯è·Ÿè¸ªã€‚ $ export KUBECONFIG=${HOME}/.kube/config_higress $ kubectl edit configmap higgress-config -n higress-system  åœ¨ data ä¸‹å¢åŠ  higress é…ç½®é¡¹ç„¶åä¿å­˜ï¼Œå…·ä½“é…ç½®å†…å®¹å¦‚ä¸‹ï¼š data: higress: |- tracing: enable: true sampling: 100 timeout: 500 skywalking: service: skywalking-oap-server.op-system.svc.cluster.local port: 11800  ","version":null,"tagName":"h2"},{"title":"ä¸ƒã€Skywalking é“¾è·¯è·Ÿè¸ªâ€‹","type":1,"pageTitle":"Higress é›†æˆ Skywalking å¯è§‚æµ‹æ€§æ¢ç´¢","url":"/zh-cn/blog/skywalking#ä¸ƒskywalking-é“¾è·¯è·Ÿè¸ª","content":"","version":null,"tagName":"h2"},{"title":"è¿è¡Œå‹æµ‹è„šæœ¬â€‹","type":1,"pageTitle":"Higress é›†æˆ Skywalking å¯è§‚æµ‹æ€§æ¢ç´¢","url":"/zh-cn/blog/skywalking#è¿è¡Œå‹æµ‹è„šæœ¬","content":"for i in $(seq 1 1000) do curl -v -H &quot;Host:httpbin.example.com&quot; http://127.0.0.1:8080/hostname curl -v -H &quot;Host:httpbin.example.com&quot; http://127.0.0.1:8080/ curl -v -H &quot;Host:httpbin.example.com&quot; http://127.0.0.1:8080/service?services=middle,backend done  ","version":null,"tagName":"h3"},{"title":"è°ƒç”¨ bff æœåŠ¡ /service æ¥å£æ¥æ¨¡æ‹Ÿè°ƒç”¨é“¾è·¯â€‹","type":1,"pageTitle":"Higress é›†æˆ Skywalking å¯è§‚æµ‹æ€§æ¢ç´¢","url":"/zh-cn/blog/skywalking#è°ƒç”¨-bff-æœåŠ¡-service-æ¥å£æ¥æ¨¡æ‹Ÿè°ƒç”¨é“¾è·¯","content":"curl -v -H &quot;Host:httpbin.example.com&quot; http://127.0.0.1:8080/service?services=middle,backend  éƒ¨åˆ†è¿”å›å“åº”ä½“æƒ…å†µå¦‚ä¸‹ï¼š { &quot;args&quot;: { }, &quot;form&quot;: { }, &quot;headers&quot;: { &quot;accept-encoding&quot;: &quot;gzip&quot;, &quot;sw8&quot;: &quot;1-MzYzMzM1NDctNTc0YS00MzZlLTgzNWEtNTY1YTQyNzk3YTY3-ZWQ3ODA2ZjYwNTI0MTFlZWE5ZDdmZTFhNTA5YTRmYTk=-1-bWlkZGxl-bWlkZGxlLTZmNGRkN2JmNmMtcWJ4cm0=-L0dFVC9zZXJ2aWNl-aHR0cDovL2JhY2tlbmQv&quot;, &quot;sw8-correlation&quot;: &quot;&quot;, &quot;user-agent&quot;: &quot;Go-http-client/1.1&quot;, &quot;x-httpbin-trace-host&quot;: &quot;bff-766967f8db-jwn2g/middle-6f4dd7bf6c-qbxrm/backend-6b9549bc64-8twnx&quot;, &quot;x-httpbin-trace-service&quot;: &quot;bff/middle/backend&quot;, &quot;x-request-id&quot;: &quot;e5a1b250-ebe3-931d-91d7-90e3ee2fc867&quot; }, &quot;method&quot;: &quot;GET&quot;, &quot;origin&quot;: &quot;&quot;, &quot;url&quot;: &quot;/&quot;, &quot;envs&quot;: { &quot;NODE_NAME&quot;: &quot;higress-worker2&quot;, &quot;PATH&quot;: &quot;/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;, &quot;POD_IP&quot;: &quot;10.244.1.7&quot;, &quot;POD_NAME&quot;: &quot;backend-6b9549bc64-8twnx&quot;, &quot;POD_NAMESPACE&quot;: &quot;app-system&quot;, &quot;SERVICE_ACCOUNT&quot;: &quot;backend&quot;, &quot;SERVICE_NAME&quot;: &quot;backend&quot;, &quot;VERSION&quot;: &quot;v1&quot; }, &quot;host_name&quot;: &quot;backend-6b9549bc64-8twnx&quot;, &quot;body&quot;: &quot;&quot; }  å“åº”å¤´ä¸­å’Œè°ƒç”¨é“¾è·¯è·Ÿè¸ªç›¸å…³æœ‰å¦‚ä¸‹ï¼š &quot;sw8&quot;: &quot;1-MzYzMzM1NDctNTc0YS00MzZlLTgzNWEtNTY1YTQyNzk3YTY3-ZWQ3ODA2ZjYwNTI0MTFlZWE5ZDdmZTFhNTA5YTRmYTk=-1-bWlkZGxl-bWlkZGxlLTZmNGRkN2JmNmMtcWJ4cm0=-L0dFVC9zZXJ2aWNl-aHR0cDovL2JhY2tlbmQv&quot;, &quot;x-httpbin-trace-host&quot;: &quot;bff-766967f8db-jwn2g/middle-6f4dd7bf6c-qbxrm/backend-6b9549bc64-8twnx&quot;, &quot;x-httpbin-trace-service&quot;: &quot;bff/middle/backend&quot;,  å…¶ä¸­ï¼š sw8: Skywalking ç”¨äºè·Ÿè¸ªçš„ Http Headerx-httpbin-trace-host: è°ƒç”¨é“¾è·¯ç»è¿‡ POD_NAMEx-httpbin-trace-service: è°ƒç”¨é“¾è·¯ç»è¿‡ SERVICE_NAME åœ¨ Skywalking dashboard ä¸­æŸ¥çœ‹å¦‚ä¸‹ï¼š æœåŠ¡æˆªå›¾  è°ƒç”¨é“¾è·¯æˆªå›¾  è°ƒç”¨é“¾è·¯æ‹“æ‰‘æˆªå›¾  ","version":null,"tagName":"h3"},{"title":"å…«ã€Higress gateway æŒ‡æ ‡å’Œç›‘æ§é¢æ¿â€‹","type":1,"pageTitle":"Higress é›†æˆ Skywalking å¯è§‚æµ‹æ€§æ¢ç´¢","url":"/zh-cn/blog/skywalking#å…«higress-gateway-æŒ‡æ ‡å’Œç›‘æ§é¢æ¿","content":"å¯ä»¥é€šè¿‡åº¦é‡å„ä¸ªç»„ä»¶çš„æ€§èƒ½æŒ‡æ ‡ï¼Œä¾‹å¦‚å“åº”æ—¶é—´ã€ååé‡ã€é”™è¯¯ç‡ã€èµ„æºä½¿ç”¨ç‡ç­‰æŒ‡æ ‡æ¥äº†è§£ç³»ç»Ÿçš„çŠ¶æ€å’Œæ€§èƒ½ã€‚ æŒ‡æ ‡æ•°æ®åŒ…å«æŒ‡æ ‡åç§°ï¼ŒæŒ‡æ ‡æ ‡ç­¾ï¼Œå’ŒæŒ‡æ ‡å€¼ï¼Œä¸‹é¢æ˜¯ envoy_cluster_upstream_cx_total upstreamï¼ˆæ€»è¿æ¥æ•°ï¼‰éƒ¨åˆ†æŒ‡æ ‡æ•°æ®ï¼Œ å…¶ä¸­ envoy_cluster_upstream_cx_total æ˜¯æŒ‡æ ‡åç§°ï¼Œcluster_name æ˜¯æŒ‡æ ‡æ ‡ç­¾ï¼Œ16 æ˜¯æŒ‡æ ‡å€¼ã€‚ # TYPE envoy_cluster_upstream_cx_total counter envoy_cluster_upstream_cx_total{cluster_name=&quot;outbound|80||bff.app-system.svc.cluster.local&quot;} 16  Higress æŒ‡æ ‡æ•°æ®å¤§ä½“å¯ä»¥åˆ†ä¸ºä¸‰ç±»: Downstream ä¸‹æ¸¸: æŒ‡æ ‡ä¸å¤–æ¥çš„è¿æ¥/è¯·æ±‚æœ‰å…³ï¼Œä¸»è¦ç”±ä¾¦å¬å™¨ï¼ŒHTTPè¿æ¥ç®¡ç†å™¨ç­‰UpStream ä¸Šæ¸¸: æŒ‡æ ‡ä¸å¤–å‘çš„è¿æ¥/è¯·æ±‚æœ‰å…³ï¼Œä¸»è¦ç”±è¿æ¥æ± ï¼Œè·¯ç”±å™¨ï¼Œè¿‡æ»¤å™¨ï¼Œç†”æ–­ç­‰Server è´Ÿè½½: æŒ‡æ ‡ä¿¡æ¯è®°å½• Higress gateway æœåŠ¡å™¨å®ä¾‹çš„è´Ÿè½½ç­‰ Higress æŒ‡æ ‡æ•°æ®ç±»å‹ä¸»è¦æœ‰ä¸‰ç±»: Counter: æ— ç¬¦å·æ•´æ•°ï¼Œåªä¼šå¢åŠ è€Œä¸ä¼šå‡å°‘ã€‚ä¾‹å¦‚ï¼Œæ€»è¯·æ±‚Gauge: å¢åŠ å’Œå‡å°‘çš„æ— ç¬¦å·æ•´æ•°ã€‚ä¾‹å¦‚ï¼Œå½“å‰æ´»åŠ¨çš„è¯·æ±‚Histogram: ä½œä¸ºæŒ‡æ ‡æµçš„ä¸€éƒ¨åˆ†çš„æ— ç¬¦å·æ•´æ•°ï¼Œç„¶åç”±æ”¶é›†å™¨èšåˆä»¥æœ€ç»ˆäº§ç”Ÿæ±‡æ€»çš„ç™¾åˆ†ä½å€¼(percentileï¼Œå³å¹³å¸¸è¯´çš„ P99/P50/Pxx)ã€‚ä¾‹å¦‚ï¼ŒUpstream å“åº”æ—¶é—´ é€šè¿‡ä»¥ä¸‹å‘½ä»¤å¯ä»¥è·å– Higress gateway æ”¯æŒçš„æŒ‡æ ‡å’Œç±»å‹ $ export HIGRESS_GATEWAY_POD=$(kubectl get pods -l app=higress-gateway -o 'jsonpath={.items[0].metadata.name}' -n higress-system) $ kubectl exec &quot;$HIGRESS_GATEWAY_POD&quot; -n higress-system -- curl -sS http://127.0.0.1:15020/stats/prometheus | grep &quot;# TYPE&quot;  éƒ¨åˆ†æŒ‡æ ‡å†…å®¹å¦‚ä¸‹ï¼š ... # TYPE envoy_cluster_upstream_cx_total counter # TYPE envoy_cluster_upstream_cx_tx_bytes_total counter # TYPE envoy_cluster_upstream_flow_control_backed_up_total counter # TYPE envoy_cluster_upstream_flow_control_drained_total counter # TYPE envoy_cluster_upstream_flow_control_paused_reading_total counter # TYPE envoy_cluster_upstream_flow_control_resumed_reading_total counter # TYPE envoy_cluster_upstream_internal_redirect_failed_total counter # TYPE envoy_cluster_upstream_internal_redirect_succeeded_total counter # TYPE envoy_cluster_upstream_rq counter # TYPE envoy_cluster_upstream_rq_101 counter # TYPE envoy_cluster_upstream_rq_200 counter # TYPE envoy_cluster_upstream_rq_201 counter # TYPE envoy_cluster_upstream_rq_301 counter # TYPE envoy_cluster_upstream_rq_302 counter # TYPE envoy_cluster_upstream_rq_304 counter # TYPE envoy_cluster_upstream_rq_401 counter # TYPE envoy_cluster_upstream_rq_404 counter # TYPE envoy_cluster_upstream_rq_cancelled counter # TYPE envoy_cluster_upstream_rq_completed counter # TYPE envoy_cluster_upstream_rq_maintenance_mode counter # TYPE envoy_cluster_upstream_rq_max_duration_reached counter # TYPE envoy_cluster_upstream_rq_pending_failure_eject counter # TYPE envoy_cluster_upstream_rq_pending_overflow counter # TYPE envoy_cluster_upstream_rq_pending_total counter # TYPE envoy_cluster_upstream_rq_per_try_idle_timeout counter # TYPE envoy_cluster_upstream_rq_per_try_timeout counter # TYPE envoy_cluster_upstream_rq_retry counter # TYPE envoy_cluster_upstream_rq_retry_backoff_exponential counter # TYPE envoy_cluster_upstream_rq_retry_backoff_ratelimited counter # TYPE envoy_cluster_upstream_rq_retry_limit_exceeded counter # TYPE envoy_cluster_upstream_rq_retry_overflow counter # TYPE envoy_cluster_upstream_rq_retry_success counter # TYPE envoy_cluster_upstream_rq_rx_reset counter # TYPE envoy_cluster_upstream_rq_timeout counter # TYPE envoy_cluster_upstream_rq_total counter # TYPE envoy_cluster_upstream_rq_tx_reset counter ... # TYPE envoy_http_downstream_cx_total counter # TYPE envoy_http_downstream_cx_tx_bytes_total counter # TYPE envoy_http_downstream_cx_upgrades_total counter # TYPE envoy_http_downstream_flow_control_paused_reading_total counter # TYPE envoy_http_downstream_flow_control_resumed_reading_total counter # TYPE envoy_http_downstream_rq counter # TYPE envoy_http_downstream_rq_completed counter # TYPE envoy_http_downstream_rq_failed_path_normalization counter # TYPE envoy_http_downstream_rq_header_timeout counter # TYPE envoy_http_downstream_rq_http1_total counter # TYPE envoy_http_downstream_rq_http2_total counter # TYPE envoy_http_downstream_rq_http3_total counter # TYPE envoy_http_downstream_rq_idle_timeout counter # TYPE envoy_http_downstream_rq_max_duration_reached counter # TYPE envoy_http_downstream_rq_non_relative_path counter # TYPE envoy_http_downstream_rq_overload_close counter # TYPE envoy_http_downstream_rq_redirected_with_normalized_path counter # TYPE envoy_http_downstream_rq_rejected_via_ip_detection counter # TYPE envoy_http_downstream_rq_response_before_rq_complete counter # TYPE envoy_http_downstream_rq_rx_reset counter # TYPE envoy_http_downstream_rq_timeout counter # TYPE envoy_http_downstream_rq_too_large counter # TYPE envoy_http_downstream_rq_total counter # TYPE envoy_http_downstream_rq_tx_reset counter # TYPE envoy_http_downstream_rq_ws_on_non_ws_route counter ...  å…·ä½“æŒ‡æ ‡å®šä¹‰å‚è€ƒå¦‚ä¸‹ï¼š cluster managerhttp connection managerlistenersserver å¦‚ä½•æŸ¥çœ‹ Higress æŒ‡æ ‡æ•°æ®ï¼š é€šè¿‡ http://127.0.0.1:18080/dashboard æŸ¥çœ‹ Higress gateway ç›‘æ§é¢æ¿é€šè¿‡ Skywalking Dashboard æŸ¥çœ‹ Higress gateway ç›‘æ§æ•°æ® é€šè¿‡ Skywalking Dashboard æŸ¥çœ‹ Higress gateway ç›‘æ§æ•°æ®éƒ¨åˆ†æˆªå›¾å¦‚ä¸‹ï¼š  ","version":null,"tagName":"h2"},{"title":"å‚è€ƒæ–‡æ¡£â€‹","type":1,"pageTitle":"Higress é›†æˆ Skywalking å¯è§‚æµ‹æ€§æ¢ç´¢","url":"/zh-cn/blog/skywalking#å‚è€ƒæ–‡æ¡£","content":"https://istio.io/latest/docs/tasks/observability/distributed-tracing/skywalking/http://peter.bourgon.org/blog/2017/02/21/metrics-tracing-and-logging.htmlhttps://skywalking.apache.org/docs/main/next/en/api/x-process-propagation-headers-v3/https://skywalking.apache.org/docs/main/next/en/api/trace-data-protocol-v3/ ","version":null,"tagName":"h2"},{"title":"æ–°è´¡çŒ®è€…å‘å¯¼","type":0,"sectionRef":"#","url":"/zh-cn/docs/developers/contributor-guide/new-contributor-guide_dev","content":"","keywords":"Higress","version":"Next"},{"title":"é‚®ä»¶åˆ—è¡¨æè¿°â€‹","type":1,"pageTitle":"æ–°è´¡çŒ®è€…å‘å¯¼","url":"/zh-cn/docs/developers/contributor-guide/new-contributor-guide_dev#é‚®ä»¶åˆ—è¡¨æè¿°","content":"TBD ","version":"Next","tagName":"h3"},{"title":"æŠ¥å‘Šé—®é¢˜â€‹","type":1,"pageTitle":"æ–°è´¡çŒ®è€…å‘å¯¼","url":"/zh-cn/docs/developers/contributor-guide/new-contributor-guide_dev#æŠ¥å‘Šé—®é¢˜","content":"æ‚¨å§‹ç»ˆå¯ä»¥é€šè¿‡Github Issues å‘HigressæŠ¥å‘Šé—®é¢˜ã€‚ å¦‚æœæ‚¨æ­£åœ¨æŠ¥å‘Šbugï¼Œè¯·å‚é˜…é—®é¢˜æŠ¥å‘Šæ¨¡ç‰ˆã€‚ å¦‚æœæ‚¨æ­£åœ¨æŠ¥å‘ŠåŠŸèƒ½è¦æ±‚ï¼Œè¯·å‚é˜…é—®é¢˜æŠ¥å‘Šæ¨¡ç‰ˆã€‚ å¦‚æœæ‚¨æ­£åœ¨æŠ¥å‘Šå¸¸è§„é—®é¢˜ï¼Œæ¯”å¦‚æå‡ºä¸€ä¸ªé—®é¢˜ï¼Œåˆ™å¯ä»¥æ‰“å¼€å¸¸è§„é—®é¢˜ ","version":"Next","tagName":"h3"},{"title":"å‘é€ pull requestâ€‹","type":1,"pageTitle":"æ–°è´¡çŒ®è€…å‘å¯¼","url":"/zh-cn/docs/developers/contributor-guide/new-contributor-guide_dev#å‘é€-pull-request","content":"å‚è€ƒpull request templateåœ¨æ‚¨å‘é€pull requestä¹‹å‰ï¼Œè¯·åŒæ­¥æ‚¨çš„githubä»“åº“å’Œè¿œç¨‹ä»“åº“ï¼Œè¿™ä¼šä½¿æ‚¨çš„pull requestç®€å•æ˜äº†ï¼Œå…·ä½“æ“ä½œè¯·çœ‹å¦‚ä¸‹æ‰€ç¤ºæ­¥éª¤ï¼š git remote add upstream git@github.com:alibaba/higress.git git fetch upstream git rebase upstream/main git checkout -b your_awesome_patch ... add some work git push origin your_awesome_patch  ","version":"Next","tagName":"h3"},{"title":"ç¼–ç è§„èŒƒâ€‹","type":1,"pageTitle":"æ–°è´¡çŒ®è€…å‘å¯¼","url":"/zh-cn/docs/developers/contributor-guide/new-contributor-guide_dev#ç¼–ç è§„èŒƒ","content":"è¯·æŒ‰ç…§CONTRIBUTING.mdä¸­çš„ç¼–ç è§„èŒƒå¯¹è‡ªå·±çš„ä»£ç è¿›è¡Œæ£€æŸ¥ã€‚ ","version":"Next","tagName":"h3"},{"title":"ç‰ˆæœ¬å‘å¸ƒå‘å¯¼","type":0,"sectionRef":"#","url":"/zh-cn/docs/developers/committer-guide/release-guide_dev","content":"ç‰ˆæœ¬å‘å¸ƒå‘å¯¼ TBD","keywords":"Higress","version":"Next"},{"title":"ç½‘ç«™å‘å¯¼","type":0,"sectionRef":"#","url":"/zh-cn/docs/developers/committer-guide/website-guide_dev","content":"ç½‘ç«™å‘å¯¼ Higress çš„ç½‘ç«™ä»“åº“æ˜¯ https://github.com/higress-group/higress-group.github.ioç½‘ç«™æ„å»ºå®Œæ¯•åï¼Œå®ƒä¼šè¢«è‡ªåŠ¨å‘å¸ƒåˆ° higress.io","keywords":"Higress","version":"Next"},{"title":"æŠ¥å‘Šå®‰å…¨é—®é¢˜","type":0,"sectionRef":"#","url":"/zh-cn/docs/developers/contributor-guide/reporting-security-issues_dev","content":"","keywords":"Higress","version":"Next"},{"title":"æŠ¥å‘Šæ¼æ´â€‹","type":1,"pageTitle":"æŠ¥å‘Šå®‰å…¨é—®é¢˜","url":"/zh-cn/docs/developers/contributor-guide/reporting-security-issues_dev#æŠ¥å‘Šæ¼æ´","content":"å¦‚æœæ‚¨å¯¹Higressçš„å®‰å…¨æ€§æœ‰æ‹…å¿ƒï¼Œæˆ–è€…å‘ç°æ¼æ´æˆ–æ½œåœ¨å¨èƒï¼Œè¯·å‘é€ç”µå­é‚®ä»¶è‡³higress@googlegroups.comä¸Higresså®‰å…¨å›¢é˜Ÿè”ç³»ã€‚åœ¨é‚®ä»¶ä¸­ï¼ŒæŒ‡å®šé—®é¢˜æˆ–æ½œåœ¨å¨èƒçš„æè¿°ã€‚è¿˜æ•¦ä¿ƒæ‚¨æ¨èé‡ç°å’Œå¤åˆ¶é—®é¢˜çš„æ–¹æ³•ã€‚Higressç¤¾åŒºä¼šåœ¨è¯„ä¼°å’Œåˆ†æè°ƒæŸ¥ç»“æœä¹‹åä¸æ‚¨è”ç³»ã€‚ è¯·å…ˆæ³¨æ„åœ¨å®‰å…¨ç”µå­é‚®ä»¶ä¸­æŠ¥å‘Šå®‰å…¨é—®é¢˜ï¼Œç„¶åå†åœ¨å…¬å…±é¢†åŸŸå…¬å¼€è¯¥é—®é¢˜ã€‚ ","version":"Next","tagName":"h2"},{"title":"æ¼æ´å¤„ç†â€‹","type":1,"pageTitle":"æŠ¥å‘Šå®‰å…¨é—®é¢˜","url":"/zh-cn/docs/developers/contributor-guide/reporting-security-issues_dev#æ¼æ´å¤„ç†","content":"æ¼æ´å¤„ç†è¿‡ç¨‹çš„æ¦‚è¿°æ˜¯ï¼š æŠ¥å‘Šè€…å°†æ¼æ´ç§˜å¯†æŠ¥å‘Šç»™Higressã€‚ç›¸åº”é¡¹ç›®çš„å®‰å…¨å›¢é˜Ÿä¸æŠ¥å‘Šè€…ç§ä¸‹åˆä½œæ¥è§£å†³æ¼æ´ã€‚åˆ¶ä½œäº†åŒ…å«è¯¥ä¿®å¤ç¨‹åºçš„æœ‰å…³Higressäº§å“çš„æ–°ç‰ˆæœ¬ã€‚è¯¥æ¼æ´å·²å…¬å¼€å®£å¸ƒã€‚ ","version":"Next","tagName":"h2"},{"title":"æµ‹è¯•è¦†ç›–ç‡å‘å¯¼","type":0,"sectionRef":"#","url":"/zh-cn/docs/developers/contributor-guide/test-coverage-guide_dev","content":"","keywords":"Higress","version":"Next"},{"title":"æµ‹è¯•ç²’åº¦å¦‚ä½•åˆ’åˆ†â€‹","type":1,"pageTitle":"æµ‹è¯•è¦†ç›–ç‡å‘å¯¼","url":"/zh-cn/docs/developers/contributor-guide/test-coverage-guide_dev#æµ‹è¯•ç²’åº¦å¦‚ä½•åˆ’åˆ†","content":" æµ‹è¯•ç²’åº¦å¦‚ä½•åˆ’åˆ†æ˜¯ä¸ªå¤§é—®é¢˜ã€‚Chris Richardson åœ¨&quot; [é™ä½æµ‹è¯•é‡‘å­—å¡”ï¼šå¾®æœåŠ¡çš„æœ‰æ•ˆæµ‹è¯•ç­–ç•¥](https://microservices.io/microservices/testing/2019/09/20/oracle-code-one-testing.html)&quot; ä¸€æ–‡ä¸­å°†æœåŠ¡æµ‹è¯•åˆ’åˆ†ä¸ºï¼šå•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€ç»„ä»¶æµ‹è¯•ã€ç«¯åˆ°ç«¯çš„æµ‹è¯•ã€‚æˆ‘ä»¬å¯ä»¥åœ¨è®¾è®¡æµ‹è¯•ç”¨ä¾‹çš„è¿‡ç¨‹ä¸­,æ‹¿æ¥å€Ÿé‰´ã€‚ ","version":"Next","tagName":"h2"},{"title":"å•å…ƒæµ‹è¯•â€‹","type":1,"pageTitle":"æµ‹è¯•è¦†ç›–ç‡å‘å¯¼","url":"/zh-cn/docs/developers/contributor-guide/test-coverage-guide_dev#å•å…ƒæµ‹è¯•","content":"","version":"Next","tagName":"h2"},{"title":"1.å†™å•å…ƒæµ‹è¯•çš„æ”¶ç›Šâ€‹","type":1,"pageTitle":"æµ‹è¯•è¦†ç›–ç‡å‘å¯¼","url":"/zh-cn/docs/developers/contributor-guide/test-coverage-guide_dev#1å†™å•å…ƒæµ‹è¯•çš„æ”¶ç›Š","content":"å•å…ƒæµ‹è¯•èƒ½å¸®åŠ©æ¯ä¸ªäººæ·±å…¥ä»£ç ç»†èŠ‚ï¼Œäº†è§£ä»£ç çš„åŠŸèƒ½ã€‚é€šè¿‡æµ‹è¯•ç”¨ä¾‹æˆ‘ä»¬èƒ½å‘ç°bugï¼Œå¹¶æäº¤ä»£ç çš„å¥å£®æ€§ã€‚æµ‹è¯•ç”¨ä¾‹åŒæ—¶ä¹Ÿæ˜¯ä»£ç çš„demoç”¨æ³•ã€‚ ","version":"Next","tagName":"h3"},{"title":"2.å•å…ƒæµ‹è¯•ç”¨ä¾‹çš„ä¸€äº›è®¾è®¡åŸåˆ™â€‹","type":1,"pageTitle":"æµ‹è¯•è¦†ç›–ç‡å‘å¯¼","url":"/zh-cn/docs/developers/contributor-guide/test-coverage-guide_dev#2å•å…ƒæµ‹è¯•ç”¨ä¾‹çš„ä¸€äº›è®¾è®¡åŸåˆ™","content":"åº”è¯¥ç²¾å¿ƒè®¾è®¡å¥½æ­¥éª¤ï¼Œé¢—ç²’åº¦å’Œç»„åˆæ¡ä»¶ã€‚æ³¨æ„è¾¹ç•Œæ¡ä»¶ã€‚å•å…ƒæµ‹è¯•ä¹Ÿåº”è¯¥å¥½å¥½è®¾è®¡ï¼Œä¸è¦å†™æ— ç”¨çš„ä»£ç ã€‚å½“ä½ å‘ç°ä¸€ä¸ªæ–¹æ³•å¾ˆéš¾å†™å•å…ƒæµ‹è¯•æ—¶ï¼Œå¦‚æœå¯ä»¥ç¡®è®¤è¿™ä¸ªæ–¹æ³•æ˜¯è‡­ä»£ç ï¼Œé‚£ä¹ˆå°±å’Œå¼€å‘è€…ä¸€èµ·é‡æ„å®ƒã€‚Higressä¸­ç”¨çš„mockæ¡†æ¶æ˜¯: mockito. ä¸‹é¢æ˜¯ä¸€äº›å¼€å‘å‘å¯¼:mockito tutorial,mockito refcardTDDï¼ˆå¯é€‰ï¼‰ï¼šå½“ä½ å¼€å§‹å†™ä¸€ä¸ªæ–°çš„åŠŸèƒ½æ—¶ï¼Œä½ å¯ä»¥è¯•ç€å…ˆå†™æµ‹è¯•ç”¨ä¾‹ã€‚  ","version":"Next","tagName":"h3"},{"title":"3.æµ‹è¯•è¦†ç›–ç‡è®¾å®šå€¼â€‹","type":1,"pageTitle":"æµ‹è¯•è¦†ç›–ç‡å‘å¯¼","url":"/zh-cn/docs/developers/contributor-guide/test-coverage-guide_dev#3æµ‹è¯•è¦†ç›–ç‡è®¾å®šå€¼","content":"åœ¨ç°é˜¶æ®µï¼ŒDeltaæ›´æ”¹ä»£ç çš„æµ‹è¯•è¦†ç›–è®¾å®šå€¼ä¸ºï¼š&gt;ï¼80%ï¼Œè¶Šé«˜è¶Šå¥½ã€‚æˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªé¡µé¢ä¸­çœ‹åˆ°æµ‹è¯•æŠ¥å‘Š: https://codecov.io/gh/alibaba/higress ","version":"Next","tagName":"h3"},{"title":"4.é¡¹ç›®çº¦å®šâ€‹","type":1,"pageTitle":"æµ‹è¯•è¦†ç›–ç‡å‘å¯¼","url":"/zh-cn/docs/developers/contributor-guide/test-coverage-guide_dev#4é¡¹ç›®çº¦å®š","content":"Higress é¡¹ç›®çš„å•å…ƒæµ‹è¯•ç”¨ä¾‹åˆ†å¸ƒåœ¨é¡¹ç›®æ¯ä¸ªå­æ¨¡å—ä¸­ï¼Œæµ‹è¯•æ–­è¨€ç±»ä»¥Testç»“å°¾ã€‚ ","version":"Next","tagName":"h3"},{"title":"é›†æˆæµ‹è¯•â€‹","type":1,"pageTitle":"æµ‹è¯•è¦†ç›–ç‡å‘å¯¼","url":"/zh-cn/docs/developers/contributor-guide/test-coverage-guide_dev#é›†æˆæµ‹è¯•","content":"","version":"Next","tagName":"h2"},{"title":"é¡¹ç›®çº¦å®šâ€‹","type":1,"pageTitle":"æµ‹è¯•è¦†ç›–ç‡å‘å¯¼","url":"/zh-cn/docs/developers/contributor-guide/test-coverage-guide_dev#é¡¹ç›®çº¦å®š","content":"é›†æˆæµ‹è¯•åœ¨æœ¬é¡¹ç›®æ³›æŒ‡å•å…ƒæµ‹è¯•ä»¥ä¸Šçº§åˆ«çš„æµ‹è¯•ã€‚é¡¹ç›®ä½¿ç”¨github actionsã€jiblib maven æ’ä»¶ã€fabric maven æ’ä»¶ã€testContainersç­‰ç”¨æ¥æ„å»ºDockeré•œåƒï¼Œæ­å»ºé›†æˆæµ‹è¯•ç¯å¢ƒ åŒºåˆ«äºå•å…ƒæµ‹è¯•ï¼ŒæŸä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œéœ€è¦ä¾èµ–ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶çš„ï¼Œå¯ä»¥ä¸ç”¨Mock, ä½¿ç”¨ä¸Šé¢ä»‹ç»çš„å·¥å…·æ­å»ºdockerç¯å¢ƒ,è¿›è¡Œæµ‹è¯•ã€‚ä½†æ˜¯ä¹Ÿè¦æ³¨æ„æ­å»ºç»„ä»¶çš„ç²’åº¦ã€‚è¿‡äºå¤æ‚çš„ç¯å¢ƒï¼Œå¯ä»¥ï¼šæ ¸å¿ƒæµ‹è¯•ä¾èµ–çš„ä¸­é—´ä»¶å¯ä»¥dockeræ­å»ºï¼Œéå¼ºä¾èµ–çš„å¯ä»¥MockHigress é¡¹ç›®çš„é›†æˆæµ‹è¯•ç”¨ä¾‹åˆ†å¸ƒç»Ÿä¸€æ”¾åœ¨integration-testå­æ¨¡å—ä¸­ï¼Œæµ‹è¯•æ–­è¨€ç±»ä»¥ITç»“å°¾ã€‚è¿™é‡Œè¿˜ç”¨ Junit5ã€‚ æµ‹è¯•ç”¨ä¾‹å¹¶è¡Œè·‘çš„è¿‡ç¨‹ä¸­ï¼Œæ³¨æ„å…¬å…±ä¸­é—´ä»¶çš„éš”ç¦»çŠ¶æ€ï¼Œè§„åˆ’å¥½æ‰€é€ æ•°æ®ï¼Œé˜²æ­¢å†²çªã€‚ ","version":"Next","tagName":"h3"},{"title":"ä¸ºHigressè´¡çŒ®","type":0,"sectionRef":"#","url":"/zh-cn/docs/developers/guide_dev","content":"","keywords":"Higress","version":"Next"},{"title":"è¯é¢˜â€‹","type":1,"pageTitle":"ä¸ºHigressè´¡çŒ®","url":"/zh-cn/docs/developers/guide_dev#è¯é¢˜","content":"ä¸ºHigressè´¡çŒ® è¯é¢˜è´¡çŒ®æ’ä»¶æŠ¥å‘Šå®‰å…¨é—®é¢˜æŠ¥å‘Šä¸€èˆ¬é—®é¢˜ä»£ç å’Œæ–‡æ¡£è´¡çŒ® å·¥ä½œå‡†å¤‡åˆ†æ”¯å®šä¹‰æäº¤è§„åˆ™ æäº¤è®¯æ¯æäº¤å†…å®¹ PR è¯´æ˜ æµ‹è¯•ç”¨ä¾‹è´¡çŒ®è‡´åŠ›äºå¸®åŠ©ä»»ä½•äº‹æƒ… ","version":"Next","tagName":"h2"},{"title":"è´¡çŒ®æ’ä»¶â€‹","type":1,"pageTitle":"ä¸ºHigressè´¡çŒ®","url":"/zh-cn/docs/developers/guide_dev#è´¡çŒ®æ’ä»¶","content":"Higress åŸºäº WASM ç­‰æ–¹å¼å…·å¤‡äº†å¾ˆå¥½çš„å¯æ‰©å±•æ€§ï¼Œå…·ä½“è´¡çŒ®æ–¹å¼è¯·å‚è€ƒæ­¤å¤„è¯´æ˜ å¯¹äºä½¿ç”¨ GO è¯­è¨€å¼€å‘ WASM æ’ä»¶ï¼Œå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡æ¡£ ","version":"Next","tagName":"h2"},{"title":"æŠ¥å‘Šå®‰å…¨é—®é¢˜â€‹","type":1,"pageTitle":"ä¸ºHigressè´¡çŒ®","url":"/zh-cn/docs/developers/guide_dev#æŠ¥å‘Šå®‰å…¨é—®é¢˜","content":"å®‰å…¨é—®é¢˜åº”è¯¥å§‹ç»ˆå¾—åˆ°è®¤çœŸå¯¹å¾…ã€‚æŒ‰ç…§æˆ‘ä»¬é€šå¸¸çš„åŸåˆ™ï¼Œæˆ‘ä»¬ä¸é¼“åŠ±ä»»ä½•äººæ•£å¸ƒå®‰å…¨é—®é¢˜ã€‚å¦‚æœæ‚¨å‘ç°Higressçš„å®‰å…¨é—®é¢˜ï¼Œè¯·ä¸è¦å…¬å¼€è®¨è®ºï¼Œç”šè‡³ä¸è¦å…¬å¼€é—®é¢˜ã€‚ç›¸åï¼Œæˆ‘ä»¬å»ºè®®æ‚¨å‘æˆ‘ä»¬å‘é€ä¸€å°ç§äººç”µå­é‚®ä»¶è‡³higress@googlegroups.comè¿›è¡Œä¸¾æŠ¥ã€‚ ","version":"Next","tagName":"h2"},{"title":"æŠ¥å‘Šä¸€èˆ¬é—®é¢˜â€‹","type":1,"pageTitle":"ä¸ºHigressè´¡çŒ®","url":"/zh-cn/docs/developers/guide_dev#æŠ¥å‘Šä¸€èˆ¬é—®é¢˜","content":"å¦ç™½åœ°è¯´ï¼Œæˆ‘ä»¬è®¤ä¸ºHigressçš„æ¯ä½ç”¨æˆ·éƒ½æ˜¯éå¸¸å‹å¥½çš„è´¡çŒ®è€…ã€‚ä½“éªŒHigressä¹‹åï¼Œæ‚¨å¯èƒ½ä¼šå¯¹é¡¹ç›®æœ‰ä¸€äº›åé¦ˆã€‚ç„¶åéšæ—¶é€šè¿‡NEW ISSUEæ‰“å¼€é—®é¢˜ã€‚ å› ä¸ºæˆ‘ä»¬åœ¨ä¸€ä¸ªåˆ†å¸ƒå¼çš„æ–¹å¼åˆä½œé¡¹ç›®Higressï¼Œæˆ‘ä»¬å¯¹æ­¤è¡¨ç¤ºèµèµç¼–å†™è‰¯å¥½ï¼Œè¯¦ç»†ï¼Œæ˜ç¡®çš„é—®é¢˜æŠ¥å‘Šã€‚ä¸ºäº†æé«˜æ²Ÿé€šæ•ˆç‡ï¼Œæˆ‘ä»¬å¸Œæœ›æ¯ä¸ªäººéƒ½å¯ä»¥æœç´¢æ‚¨çš„é—®é¢˜æ˜¯å¦åœ¨æœç´¢åˆ—è¡¨ä¸­ã€‚å¦‚æœå‘ç°å®ƒå­˜åœ¨ï¼Œè¯·åœ¨ç°æœ‰é—®é¢˜ä¸‹çš„è¯„è®ºä¸­æ·»åŠ æ‚¨çš„è¯¦ç»†ä¿¡æ¯ï¼Œè€Œä¸è¦æ‰“å¼€ä¸€ä¸ªå…¨æ–°çš„issueã€‚ ä¸ºäº†ä½¿é—®é¢˜è¯¦ç»†ä¿¡æ¯å°½å¯èƒ½åœ°æ ‡å‡†ï¼Œæˆ‘ä»¬ä¸ºé—®é¢˜æŠ¥å‘Šè€…è®¾ç½®äº†â€œ é—®é¢˜æ¨¡æ¿ â€ã€‚è¯·åŠ¡å¿…æŒ‰ç…§è¯´æ˜å¡«å†™æ¨¡æ¿ä¸­çš„å­—æ®µã€‚ åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œæ‚¨å¯ä»¥æ‰“å¼€ä¸€ä¸ªé—®é¢˜ï¼š é”™è¯¯æŠ¥å‘ŠåŠŸèƒ½è¦æ±‚æ€§èƒ½é—®é¢˜åŠŸèƒ½ææ¡ˆåŠŸèƒ½è®¾è®¡éœ€è¦å¸®åŠ©docä¸å®Œæ•´æµ‹è¯•æ”¹è¿›æœ‰å…³é¡¹ç›®çš„ä»»ä½•é—®é¢˜ç­‰ç­‰ å¦å¤–ï¼Œæˆ‘ä»¬å¿…é¡»æé†’æ‚¨ï¼Œåœ¨å¡«å†™æ–°issueæ—¶ï¼Œè¯·è®°ä½ä»æ‚¨çš„å¸–å­ä¸­åˆ é™¤æ•æ„Ÿæ•°æ®ã€‚æ•æ„Ÿæ•°æ®å¯ä»¥æ˜¯å¯†ç ï¼Œå¯†é’¥ï¼Œç½‘ç»œä½ç½®ï¼Œç§äººä¸šåŠ¡æ•°æ®ç­‰ã€‚ ","version":"Next","tagName":"h2"},{"title":"ä»£ç å’Œæ–‡æ¡£è´¡çŒ®â€‹","type":1,"pageTitle":"ä¸ºHigressè´¡çŒ®","url":"/zh-cn/docs/developers/guide_dev#ä»£ç å’Œæ–‡æ¡£è´¡çŒ®","content":"é¼“åŠ±é‡‡å–ä¸€åˆ‡æªæ–½ä½¿Higressé¡¹ç›®å˜å¾—æ›´å¥½ã€‚åœ¨GitHubä¸Šï¼ŒHigressçš„æ¯ä¸ªæ”¹è¿›éƒ½å¯ä»¥é€šè¿‡PRï¼ˆæ‹‰å–è¯·æ±‚çš„ç¼©å†™ï¼‰æ¥å®ç°ã€‚ å¦‚æœå‘ç°é”™å­—ï¼Œè¯·å°è¯•è§£å†³ï¼å¦‚æœå‘ç°é”™è¯¯ï¼Œè¯·å°è¯•ä¿®å¤å®ƒï¼å¦‚æœå‘ç°ä¸€äº›å†—ä½™ä»£ç ï¼Œè¯·å°è¯•å°†å…¶åˆ é™¤ï¼å¦‚æœå‘ç°ç¼ºå°‘ä¸€äº›æµ‹è¯•ç”¨ä¾‹ï¼Œè¯·å°è¯•æ·»åŠ å®ƒä»¬ï¼å¦‚æœæ‚¨å¯ä»¥å¢å¼ºåŠŸèƒ½ï¼Œè¯·ä¸è¦çŠ¹è±«ï¼å¦‚æœå‘ç°éšå¼ä»£ç ï¼Œè¯·å°è¯•æ·»åŠ æ³¨é‡Šä»¥ä½¿å…¶æ¸…æ™°ï¼å¦‚æœæ‚¨å‘ç°ä»£ç ä¸‘é™‹ï¼Œè¯·å°è¯•é‡æ„å®ƒï¼å¦‚æœå¯ä»¥å¸®åŠ©æ”¹å–„æ–‡æ¡£ï¼Œé‚£å°±å†å¥½ä¸è¿‡äº†ï¼å¦‚æœå‘ç°æ–‡æ¡£ä¸æ­£ç¡®ï¼Œè¯·ç›´æ¥è§£å†³è¯¥é—®é¢˜ï¼... å®é™…ä¸Šï¼Œä¸å¯èƒ½å®Œå…¨åˆ—å‡ºå®ƒä»¬ã€‚åªè¦è®°ä½ä¸€ä¸ªåŸåˆ™ï¼š æˆ‘ä»¬æœŸå¾…æ‚¨çš„ä»»ä½•å›å¤ã€‚ ç”±äºæ‚¨å·²å‡†å¤‡å¥½é€šè¿‡PRæ”¹å–„Higressï¼Œå› æ­¤å»ºè®®æ‚¨åœ¨æ­¤å¤„æŸ¥çœ‹PRè§„åˆ™ã€‚ å·¥ä½œå‡†å¤‡åˆ†æ”¯å®šä¹‰æäº¤è§„åˆ™PRè¯´æ˜ ","version":"Next","tagName":"h2"},{"title":"å·¥ä½œå‡†å¤‡â€‹","type":1,"pageTitle":"ä¸ºHigressè´¡çŒ®","url":"/zh-cn/docs/developers/guide_dev#å·¥ä½œå‡†å¤‡","content":"è¦æå‡ºPRï¼Œæˆ‘ä»¬å‡è®¾æ‚¨å·²ç»æ³¨å†Œäº†GitHub IDã€‚ç„¶åï¼Œæ‚¨å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤å®Œæˆå‡†å¤‡å·¥ä½œï¼š FORK Higressåˆ†æ”¯åˆ°æ‚¨çš„å­˜å‚¨åº“ã€‚è¦ä½¿æ­¤å·¥ä½œæœ‰æ•ˆï¼Œæ‚¨åªéœ€è¦å•å‡»Higress / Higressä¸»é¡µå³è¾¹çš„æŒ‰é’®Fork ã€‚ç„¶åï¼Œæ‚¨å°†åœ¨https://github.com/&lt;your-username&gt;/Higressä¸­your-usernameæ‰¾åˆ°æ‚¨çš„å­˜å‚¨åº“ï¼Œè¿™æ˜¯æ‚¨çš„GitHubç”¨æˆ·åã€‚ CLONEæ‚¨è‡ªå·±çš„å­˜å‚¨åº“ä»¥åœ¨æœ¬åœ°è¿›è¡Œå¼€å‘ã€‚ç”¨äºgit clone git@github.com:&lt;your-username&gt;/Higress.gitå°†å­˜å‚¨åº“å…‹éš†åˆ°æœ¬åœ°è®¡ç®—æœºã€‚ç„¶åï¼Œæ‚¨å¯ä»¥åˆ›å»ºæ–°åˆ†æ”¯æ¥å®Œæˆæ‚¨å¸Œæœ›è¿›è¡Œçš„æ›´æ”¹ã€‚ Set Remoteä¸Šæ¸¸è®¾ç½®ä¸ºgit@github.com:alibaba/higress.gitä½¿ç”¨ä»¥ä¸‹ä¸¤ä¸ªå‘½ä»¤ï¼š git remote add upstream git@github.com:alibaba/higress.git git remote set-url --push upstream no-pushing  ä½¿ç”¨æ­¤è¿œç¨‹è®¾ç½®ï¼Œæ‚¨å¯ä»¥åƒè¿™æ ·æ£€æŸ¥gitè¿œç¨‹é…ç½®ï¼š $ git remote -v origin git@github.com:&lt;your-username&gt;/Higress.git (fetch) origin git@github.com:&lt;your-username&gt;/Higress.git (push) upstream git@github.com:alibaba/higress.git (fetch) upstream no-pushing (push)  åŠ ä¸Šè¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°å°†æœ¬åœ°åˆ†æ”¯ä¸ä¸Šæ¸¸åˆ†æ”¯åŒæ­¥ã€‚ ","version":"Next","tagName":"h3"},{"title":"åˆ†æ”¯å®šä¹‰â€‹","type":1,"pageTitle":"ä¸ºHigressè´¡çŒ®","url":"/zh-cn/docs/developers/guide_dev#åˆ†æ”¯å®šä¹‰","content":"ç°åœ¨ï¼Œæˆ‘ä»¬å‡è®¾é€šè¿‡æ‹‰å–è¯·æ±‚æ‰€åšçš„æ‰€æœ‰è´¡çŒ®éƒ½æ˜¯é’ˆå¯¹Higressä¸­çš„ä¸»åˆ†æ”¯ã€‚åœ¨åšå‡ºè´¡çŒ®ä¹‹å‰ï¼Œäº†è§£åˆ†æ”¯å®šä¹‰ä¼šæœ‰æ‰€å¸®åŠ©ã€‚ ä½œä¸ºè´¡çŒ®è€…ï¼Œè¯·å†æ¬¡è®°ä½ï¼Œé€šè¿‡æ‹‰å–è¯·æ±‚è¿›è¡Œçš„æ¯ä¸ªè´¡çŒ®éƒ½æ˜¯ä¸ºäº†åˆ†æ”¯å‘å±•ã€‚åœ¨Higressé¡¹ç›®ä¸­ï¼Œè¿˜æœ‰å…¶ä»–å‡ ä¸ªåˆ†æ”¯ï¼Œæˆ‘ä»¬é€šå¸¸ç§°å®ƒä»¬ä¸ºå‘å¸ƒåˆ†æ”¯ï¼ˆä¾‹å¦‚0.6.0ã€0.6.1ï¼‰\\åŠŸèƒ½åˆ†æ”¯ï¼Œä¿®è¡¥ç¨‹åºåˆ†æ”¯å’Œä¸»åˆ†æ”¯ã€‚ æ­£å¼å‘å¸ƒç‰ˆæœ¬æ—¶ï¼Œå°†æœ‰ä¸€ä¸ªå‘å¸ƒåˆ†æ”¯ï¼Œå¹¶ä»¥ç‰ˆæœ¬å·å‘½åã€‚ å‘å¸ƒä¹‹åï¼Œæˆ‘ä»¬å°†å‘å¸ƒåˆ†æ”¯çš„æäº¤åˆå¹¶åˆ°masteråˆ†æ”¯ä¸­ã€‚ å½“å‘ç°æŸä¸ªç‰ˆæœ¬ä¸­å­˜åœ¨é”™è¯¯æ—¶ï¼Œæˆ‘ä»¬å°†å†³å®šåœ¨æ›´é«˜ç‰ˆæœ¬ä¸­è¿›è¡Œä¿®å¤æˆ–åœ¨ç‰¹å®šä¿®è¡¥ç¨‹åºç‰ˆæœ¬ä¸­è¿›è¡Œä¿®å¤ã€‚å½“æˆ‘ä»¬å†³å®šä¿®å¤æ­¤ä¿®è¡¥ç¨‹åºç‰ˆæœ¬æ—¶ï¼Œæˆ‘ä»¬å°†æ ¹æ®ç›¸åº”çš„å‘è¡Œåˆ†æ”¯æ£€å‡ºè¯¥ä¿®è¡¥ç¨‹åºåˆ†æ”¯ï¼Œæ‰§è¡Œä»£ç ä¿®å¤å’ŒéªŒè¯ï¼Œç„¶åå°†å…¶åˆå¹¶åˆ°å¼€å‘åˆ†æ”¯å’Œmasteråˆ†æ”¯ä¸­ã€‚ å¯¹äºæ›´å¤§çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬å°†æ‹‰å‡ºåŠŸèƒ½åˆ†æ”¯ä»¥è¿›è¡Œå¼€å‘å’ŒéªŒè¯ã€‚ ","version":"Next","tagName":"h3"},{"title":"æäº¤è§„åˆ™â€‹","type":1,"pageTitle":"ä¸ºHigressè´¡çŒ®","url":"/zh-cn/docs/developers/guide_dev#æäº¤è§„åˆ™","content":"å®é™…ä¸Šï¼Œåœ¨Higressä¸­ï¼Œæˆ‘ä»¬åœ¨æäº¤æ—¶è¦è®¤çœŸå¯¹å¾…ä¸¤ä¸ªè§„åˆ™ï¼š æäº¤è®¯æ¯æäº¤å†…å®¹ æäº¤è®¯æ¯â€‹ æäº¤æ¶ˆæ¯å¯ä»¥å¸®åŠ©å®¡ç¨¿äººæ›´å¥½åœ°äº†è§£æäº¤çš„PRçš„ç›®çš„ã€‚å®ƒä¹Ÿå¯ä»¥å¸®åŠ©åŠ å¿«ä»£ç å®¡æŸ¥è¿‡ç¨‹ã€‚æˆ‘ä»¬é¼“åŠ±è´¡çŒ®è€…æ¸…æ¥šæ˜ç™½æäº¤æ¶ˆæ¯è€Œä¸æ˜¯æ¨¡æ£±ä¸¤å¯çš„æ¶ˆæ¯ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬æå€¡ä»¥ä¸‹æäº¤æ¶ˆæ¯ç±»å‹ï¼š docsï¼šxxxxã€‚ä¾‹å¦‚ï¼Œâ€œ docsï¼šæ·»åŠ æœ‰å…³Higressç¾¤é›†å®‰è£…çš„æ–‡æ¡£â€ã€‚featureï¼šxxxxã€‚ä¾‹å¦‚ï¼Œâ€œæ–°åŠŸèƒ½ï¼šåœ¨ATæ¨¡å¼ä¸‹æ”¯æŒoracleâ€ã€‚bugfixï¼šxxxxã€‚ä¾‹å¦‚ï¼Œâ€œé”™è¯¯ä¿®æ­£ï¼šä¿®æ­£äº†è¾“å…¥nilå‚æ•°æ—¶çš„é”™è¯¯â€ã€‚refactorï¼šxxxxã€‚ä¾‹å¦‚ï¼Œâ€œé‡æ„ï¼šç®€åŒ–ä»¥ä½¿ä»£ç æ›´å…·å¯è¯»æ€§â€ã€‚testï¼šxxxã€‚ä¾‹å¦‚ï¼Œâ€œæµ‹è¯•ï¼šä¸ºfunc InsertIntoArrayæ·»åŠ å•å…ƒæµ‹è¯•ç”¨ä¾‹â€ã€‚å…¶ä»–å¯è¯»å’Œæ˜¾å¼çš„è¡¨è¾¾æ–¹å¼ã€‚ å¦ä¸€æ–¹é¢ï¼Œæˆ‘ä»¬ä¸é¼“åŠ±æåŠ©è€…åƒä»¥ä¸‹æ–¹å¼æäº¤æ¶ˆæ¯ï¼š ä¿®æ­£é”™è¯¯æ›´æ–°æ·»åŠ æ–‡æ¡£ å¦‚æœæ‚¨è¿·è·¯äº†ï¼Œè¯·å‚é˜…ã€Šå¦‚ä½•ç¼–å†™Gitæäº¤æ¶ˆæ¯ã€‹ä½œä¸ºå¼€å§‹ã€‚ æäº¤å†…å®¹â€‹ æäº¤å†…å®¹è¡¨ç¤ºä¸€æ¬¡æäº¤ä¸­åŒ…å«çš„æ‰€æœ‰å†…å®¹æ›´æ”¹ã€‚æˆ‘ä»¬æœ€å¥½å°†å†…å®¹åŒ…å«åœ¨ä¸€ä¸ªæäº¤ä¸­ï¼Œè¿™æ ·å¯ä»¥åœ¨æ²¡æœ‰ä»»ä½•å…¶ä»–æäº¤å¸®åŠ©çš„æƒ…å†µä¸‹æ”¯æŒå®¡é˜…è€…çš„å®Œæ•´å®¡é˜…ã€‚æ¢å¥è¯è¯´ï¼Œä¸€æ¬¡æäº¤ä¸­çš„å†…å®¹å¯ä»¥ä¼ é€’CIä»¥é¿å…ä»£ç æ··ä¹±ã€‚ç®€è€Œè¨€ä¹‹ï¼Œæˆ‘ä»¬è¦è®°ä½ä¸‰ä¸ªå°è§„åˆ™ï¼š é¿å…åœ¨æäº¤ä¸­è¿›è¡Œå¾ˆå¤§çš„æ›´æ”¹ï¼›æ¯æ¬¡æäº¤å‡å®Œæ•´ä¸”å¯å®¡æŸ¥ã€‚æäº¤æ—¶æ£€æŸ¥git configï¼ˆuser.nameï¼Œuser.emailï¼‰ä»¥ç¡®ä¿å®ƒä¸æ‚¨çš„GitHub IDç›¸å…³è”ã€‚ å¦å¤–ï¼Œåœ¨ä»£ç æ›´æ”¹éƒ¨åˆ†ï¼Œæˆ‘ä»¬å»ºè®®æ‰€æœ‰è´¡çŒ®è€…éƒ½åº”é˜…è¯»Higressçš„ä»£ç æ ·å¼ã€‚ æ— è®ºæäº¤æ¶ˆæ¯è¿˜æ˜¯æäº¤å†…å®¹ï¼Œæˆ‘ä»¬éƒ½æ›´åŠ æ³¨é‡ä»£ç å®¡æŸ¥ã€‚ ","version":"Next","tagName":"h3"},{"title":"PR è¯´æ˜â€‹","type":1,"pageTitle":"ä¸ºHigressè´¡çŒ®","url":"/zh-cn/docs/developers/guide_dev#pr-è¯´æ˜","content":"PRæ˜¯æ›´æ”¹Higressé¡¹ç›®æ–‡ä»¶çš„å”¯ä¸€æ–¹æ³•ã€‚ä¸ºäº†å¸®åŠ©å®¡ç¨¿äººæ›´å¥½åœ°å®ç°ç›®æ ‡ï¼ŒPR è¯´æ˜ä¸èƒ½å¤ªè¯¦ç»†ã€‚æˆ‘ä»¬é¼“åŠ±è´¡çŒ®è€…éµå¾ªPRæ¨¡æ¿å®Œæˆè¯·æ±‚è¯·æ±‚ã€‚ ","version":"Next","tagName":"h3"},{"title":"æµ‹è¯•ç”¨ä¾‹è´¡çŒ®â€‹","type":1,"pageTitle":"ä¸ºHigressè´¡çŒ®","url":"/zh-cn/docs/developers/guide_dev#æµ‹è¯•ç”¨ä¾‹è´¡çŒ®","content":"ä»»ä½•æµ‹è¯•ç”¨ä¾‹éƒ½å°†å—åˆ°æ¬¢è¿ã€‚å½“å‰ï¼ŒHigressåŠŸèƒ½æµ‹è¯•ç”¨ä¾‹æ˜¯é«˜åº¦ä¼˜å…ˆçš„ã€‚ ","version":"Next","tagName":"h2"},{"title":"è‡´åŠ›äºå¸®åŠ©ä»»ä½•äº‹æƒ…â€‹","type":1,"pageTitle":"ä¸ºHigressè´¡çŒ®","url":"/zh-cn/docs/developers/guide_dev#è‡´åŠ›äºå¸®åŠ©ä»»ä½•äº‹æƒ…","content":"æˆ‘ä»¬é€‰æ‹©GitHubä½œä¸ºHigressåˆä½œçš„ä¸»è¦åœºæ‰€ã€‚å› æ­¤ï¼ŒHigressçš„æœ€æ–°æ›´æ–°å§‹ç»ˆåœ¨è¿™é‡Œã€‚å°½ç®¡é€šè¿‡PRææ¬¾æ˜¯ä¸€ç§æ˜ç¡®çš„å¸®åŠ©æ–¹å¼ï¼Œä½†æˆ‘ä»¬ä»ç„¶å‘¼åå…¶ä»–æ–¹å¼ã€‚ å¦‚æœå¯ä»¥çš„è¯ï¼Œå›å¤ä»–äººçš„é—®é¢˜ï¼›å¸®åŠ©è§£å†³å…¶ä»–ç”¨æˆ·çš„é—®é¢˜ï¼›å¸®åŠ©å®¡æŸ¥ä»–äººçš„PRè®¾è®¡ï¼›å¸®åŠ©å®¡æŸ¥PRä¸­å…¶ä»–äººçš„ä»£ç ï¼›è®¨è®ºæœ‰å…³Higressçš„é—®é¢˜ï¼Œä»¥ä½¿äº‹æƒ…æ›´åŠ æ¸…æ™°ï¼›åœ¨GitHubä¹‹å¤–å€¡å¯¼HigressæŠ€æœ¯;åœ¨Higressä¸Šå†™åšå®¢ï¼Œç­‰ç­‰ã€‚ ","version":"Next","tagName":"h2"},{"title":"åŸºäº Docker Compose è¿›è¡Œç‹¬ç«‹éƒ¨ç½²","type":0,"sectionRef":"#","url":"/zh-cn/docs/ops/deploy-by-docker-compose","content":"","keywords":"deploy docker compose docker ops","version":"Next"},{"title":"å®‰è£… Higressâ€‹","type":1,"pageTitle":"åŸºäº Docker Compose è¿›è¡Œç‹¬ç«‹éƒ¨ç½²","url":"/zh-cn/docs/ops/deploy-by-docker-compose#å®‰è£…-higress","content":"åŸºäº Docker Compose éƒ¨ç½²æ—¶ï¼ŒHigress ç½‘å…³ç”±å¦‚ä¸‹å‡ ä¸ªæœåŠ¡ç»„æˆï¼š apiserverï¼šåŸºç¡€è®¾æ–½æœåŠ¡ã€‚è´Ÿè´£æ¨¡æ‹Ÿ K8s çš„ API Serverï¼›controllerï¼šæ§åˆ¶é¢æœåŠ¡ä¸€å·ã€‚è´Ÿè´£é…ç½®æ”¶é›†æ•´åˆæ‰€æœ‰çš„é…ç½®æ•°æ®å’ŒæœåŠ¡åˆ—è¡¨ï¼›pilotï¼šæ§åˆ¶é¢æœåŠ¡ä¸€å·ã€‚è´Ÿè´£ä¸‹å‘ç½‘å…³è·¯ç”±æ•°æ®ï¼›gatewayï¼šæ•°æ®é¢æœåŠ¡ã€‚è´Ÿè´£æ‰¿è½½å®é™…çš„ç½‘å…³è¯·æ±‚ï¼›consoleï¼šHigress ç½‘å…³æ§åˆ¶å° ","version":"Next","tagName":"h2"},{"title":"å®‰è£…å‘½ä»¤â€‹","type":1,"pageTitle":"åŸºäº Docker Compose è¿›è¡Œç‹¬ç«‹éƒ¨ç½²","url":"/zh-cn/docs/ops/deploy-by-docker-compose#å®‰è£…å‘½ä»¤","content":"curl -fsSL https://higress.io/standalone/get-higress.sh | bash -s -- [DESTINATION] [OPTIONS...]  ","version":"Next","tagName":"h3"},{"title":"å®‰è£…å‚æ•°â€‹","type":1,"pageTitle":"åŸºäº Docker Compose è¿›è¡Œç‹¬ç«‹éƒ¨ç½²","url":"/zh-cn/docs/ops/deploy-by-docker-compose#å®‰è£…å‚æ•°","content":"å‚æ•°å\tå‚æ•°è¯´æ˜\té»˜è®¤å€¼DESTINATION\tç›®æ ‡å®‰è£…ç›®å½•\t./higress -a --auto-run\té…ç½®å®Œæˆåè‡ªåŠ¨å¯åŠ¨ Higress ç½‘å…³\tæ—  -c CONFIG_URL --config-url CONFIG_URL\té…ç½®æœåŠ¡çš„ URLã€‚ - è‹¥ä½¿ç”¨ç‹¬ç«‹éƒ¨ç½²çš„ Nacos æœåŠ¡ï¼ˆç‰ˆæœ¬ä¸ä½äº 2.0.0ï¼‰ï¼ŒURL æ ¼å¼ä¸ºï¼šnacos://192.168.0.1:8848 - è‹¥åœ¨æœ¬åœ°ç£ç›˜ä¸Šä¿å­˜é…ç½®ï¼ŒURL æ ¼å¼ä¸ºï¼šfile://opt/higress/conf\tæ—  --use-builtin-nacos\tä½¿ç”¨å†…ç½®çš„ Nacos æœåŠ¡ã€‚ä¸å»ºè®®ç”¨äºç”Ÿäº§ç¯å¢ƒã€‚å¦‚æœè®¾ç½®æœ¬å‚æ•°ï¼Œåˆ™æ— éœ€è®¾ç½®-cå‚æ•°\tæ—  --nacos-ns=NACOS_NAMESPACE\tç”¨äºä¿å­˜ Higress é…ç½®çš„ Nacos å‘½åç©ºé—´ ID\thigress-system --nacos-username=NACOS_USERNAME\tç”¨äºè®¿é—® Nacos çš„ç”¨æˆ·åã€‚ä»…ç”¨äº Nacos å¯åŠ¨äº†è®¤è¯çš„æƒ…å†µä¸‹\tæ—  --nacos-password=NACOS_PASSWORD\tç”¨äºè®¿é—® Nacos çš„ç”¨æˆ·å¯†ç ã€‚ä»…ç”¨äº Nacos å¯åŠ¨äº†è®¤è¯çš„æƒ…å†µä¸‹\tæ—  -k KEY --data-enc-key=KEY\tç”¨äºåŠ å¯†æ•æ„Ÿé…ç½®æ•°æ®çš„å¯†é’¥ã€‚é•¿åº¦å¿…é¡»ä¸º 32 ä¸ªå­—ç¬¦ã€‚è‹¥æœªè®¾ç½®ï¼ŒHigress å°†è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªéšæœºçš„å¯†é’¥ã€‚è‹¥éœ€é›†ç¾¤éƒ¨ç½²ï¼Œæ­¤é¡¹å¿…é¡»è®¾ç½®\téšæœºå­—ç¬¦ä¸² --nacos-port=NACOS_PORT\tå†…ç½® NACOS æœåŠ¡åœ¨æœåŠ¡å™¨æœ¬åœ°ç›‘å¬çš„ç«¯å£\t8848 --gateway-http-port=GATEWAY_HTTP_PORT\tHigress Gateway åœ¨æœåŠ¡å™¨æœ¬åœ°ç›‘å¬çš„ HTTP ç«¯å£\t80 --gateway-https-port=GATEWAY_HTTPS_PORT\tHigress Gateway åœ¨æœåŠ¡å™¨æœ¬åœ°ç›‘å¬çš„ HTTPS ç«¯å£\t443 --gateway-metrics-port=GATEWAY_METRIC_PORT\tHigress Gateway åœ¨æœåŠ¡å™¨æœ¬åœ°ç›‘å¬çš„ç”¨äºæš´éœ²è¿è¡ŒæŒ‡æ ‡ç«¯å£\t15020 --console-port=CONSOLE_PORT\tHigress Console åœ¨æœåŠ¡å™¨æœ¬åœ°ç›‘å¬çš„ç«¯å£\t8080 -r --rerun\tåœ¨ Higress å·²é…ç½®å®Œæˆåé‡æ–°æ‰§è¡Œé…ç½®æµç¨‹\tæ—  -h --help\tæ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯\tæ—  ","version":"Next","tagName":"h3"},{"title":"å¼€å‘äººå‘˜","type":0,"sectionRef":"#","url":"/zh-cn/docs/developers/developers_dev","content":"","keywords":"Higress ç»´æŠ¤è€…","version":"Next"},{"title":"å¼€å‘äººå‘˜â€‹","type":1,"pageTitle":"å¼€å‘äººå‘˜","url":"/zh-cn/docs/developers/developers_dev#å¼€å‘äººå‘˜","content":"æœ¬é¡µé¢å±•ç¤ºäº†Higressçš„å¼€å‘å›¢é˜Ÿã€‚è¯·é€šè¿‡æäº¤PRçš„æ–¹å¼æŠŠè‡ªå·±çš„ä¿¡æ¯æ·»åŠ åˆ°åˆ—è¡¨ä¸Šã€‚ æ³¨ï¼šæ’åæŒ‰ github id é¦–å­—æ¯ ","version":"Next","tagName":"h2"},{"title":"Higress Maintainersâ€‹","type":1,"pageTitle":"å¼€å‘äººå‘˜","url":"/zh-cn/docs/developers/developers_dev#higress-maintainers","content":"å§“å\tgithub\tå…¬å¸è‘£è‰ºèƒ\tCH3CHO\tTrip.com è€¿è•¾è•¾\tgengleilei\tAlibaba å¼ æ·»ç¿¼\tjohnlanni\tAlibaba èŒƒæ‰¬\tSpecialYang\tAlibaba å­£æ•\tslievrly\tAlibaba ","version":"Next","tagName":"h2"},{"title":"Higress Approversâ€‹","type":1,"pageTitle":"å¼€å‘äººå‘˜","url":"/zh-cn/docs/developers/developers_dev#higress-approvers","content":"å§“å\tgithub\tå…¬å¸å´æ–°å†›\t2456868764 åˆ˜è®­ç¼\tXunzhuo\tTencent ","version":"Next","tagName":"h2"},{"title":"Higress Reviewersâ€‹","type":1,"pageTitle":"å¼€å‘äººå‘˜","url":"/zh-cn/docs/developers/developers_dev#higress-reviewers","content":"å§“å\tgithub\tå…¬å¸å‡Œè½¶ç¾¤\tLynskylate\teBay åˆ˜æ™“ç‘\trinfx\tAlibaba èµµç‚³å ƒ\tsjtuzbk\tAlibaba éŸ¦é‘«\tWeixinX\tNUAA ","version":"Next","tagName":"h2"},{"title":"Higress Membersâ€‹","type":1,"pageTitle":"å¼€å‘äººå‘˜","url":"/zh-cn/docs/developers/developers_dev#higress-members","content":"å§“å\tgithub\tç»„ç»‡å¼ æ­£å¥½\talexzzh\tkoal safety æå¼ºæ—\tCharlie17Li\tZJU å°å®‡è…¾\tFfyyt\tXUPT éŸ©è´¤æ¶›\thanxiantao\tFinv ç”°äºšæ¶›\tHinsteny\tAnt å±ˆæ™—ç…œ\tInk-33\tDGUT ç¨‹æ²»ç®\tSe7en\tSAP é‚µä½³æˆ\tsjcsjc123\tHDU å®‹é¹è¿œ\tsongpengyuan\tOkki.com å½­ä¸‡å±±\tUncle-Justice\tHUST èµµä¼ŸåŸº\tvikizhao156\tSJTU ","version":"Next","tagName":"h2"},{"title":"è·å–Higresså¼€å‘è€…å¤´è¡”â€‹","type":1,"pageTitle":"å¼€å‘äººå‘˜","url":"/zh-cn/docs/developers/developers_dev#è·å–higresså¼€å‘è€…å¤´è¡”","content":"å¤´è¡”æœ¬èº«æ˜¯ä¸€ç§è£èª‰è±¡å¾ï¼Œæ¯ä¸€ä½å‚ä¸Higressçš„è´¡çŒ®è€…åœ¨å¼€æºç¤¾åŒºçš„åœ°ä½éƒ½æ˜¯å¹³ç­‰çš„ æ¯ç§çš„å¤´è¡”çš„è·å–æ–¹å¼å¦‚ä¸‹ï¼š ","version":"Next","tagName":"h2"},{"title":"Memberâ€‹","type":1,"pageTitle":"å¼€å‘äººå‘˜","url":"/zh-cn/docs/developers/developers_dev#member","content":"æ¡ä»¶ï¼š è·å¾— 8 ä¸ªå®Œæˆ issue çš„ç§¯åˆ†ï¼ˆgood-issue +0.5, easy +1ï¼Œnormal +2ï¼Œchallenge +4ï¼‰ Higresså¼€æºç¤¾åŒºä¸ºæ¯ä¸ªå¯è®¤é¢†ï¼ˆhelp wantedæ ‡ç­¾ï¼‰çš„issueéƒ½æ ‡è®°äº†éš¾åº¦æ ‡ç­¾ï¼šç®€å•(level/easy)ï¼Œæ™®é€š(level/normal)ï¼Œæœ‰æŒ‘æˆ˜(level/challenge)ï¼Œå®Œæˆissueåå¯ä»¥è·å¾—å¯¹åº”ç§¯åˆ† åˆ›å»ºæœ‰ä»·å€¼çš„ issueï¼ˆè¢«æ ‡è®°ä¸º good-issue æ ‡ç­¾ï¼‰ï¼Œä¹Ÿå¯ä»¥å¾— 0.5 åˆ† è´¡çŒ®ä»£ç ï¼ˆåŒ…å«æ–‡æ¡£ï¼‰DIFF è¡Œæ•°ï¼ˆåŒ…å«å¢åˆ ï¼‰è¾¾åˆ° 500+ ä¸ä»…åªæœ‰è´¡çŒ®ä»£ç ï¼Œåœ¨Higresså®˜ç½‘ä»“åº“(https://github.com/higress-group/higress-group.github.io)è´¡çŒ®æ–‡æ¡£ï¼Œä¹Ÿå¯ä»¥æ»¡è¶³æ­¤è¦æ±‚ åœ¨ç¤¾åŒºå‘¨ä¼šè¿›è¡Œ 1 æ¬¡ä¸»é¢˜åˆ†äº« é‡ç‚¹ä¸æ˜¯åˆ†äº«çš„å†…å®¹ï¼Œæ˜¯é€šè¿‡åˆ†äº«è®©å¤§å®¶è®¤è¯†ä½  ç”³è¯·æ–¹å¼ï¼š æ»¡è¶³æ¡ä»¶ï¼Œæœ¬äººç›´æ¥ç¼–è¾‘æœ¬æ–‡æ¡£ï¼Œæ PR ç”³è¯· ","version":"Next","tagName":"h3"},{"title":"Reviewerâ€‹","type":1,"pageTitle":"å¼€å‘äººå‘˜","url":"/zh-cn/docs/developers/developers_dev#reviewer","content":"æ¡ä»¶ï¼š æ»¡è¶³ Member æ¡ä»¶åœ¨ SIG çš„æ ¸å¿ƒ issue ä¸­åšå‡ºè´¡çŒ® ç”³è¯·æ–¹å¼ï¼š ç”± Approvers/Maintainer æåï¼Œç¼–è¾‘æœ¬æ–‡æ¡£ï¼Œæ PR ç”³è¯· ","version":"Next","tagName":"h3"},{"title":"Approverâ€‹","type":1,"pageTitle":"å¼€å‘äººå‘˜","url":"/zh-cn/docs/developers/developers_dev#approver","content":"æ¡ä»¶ï¼š æ»¡è¶³ Reviewer æ¡ä»¶ä¸»å¯¼ä¸€ä¸ª SIG Proposal è‰æ¡ˆï¼Œç»„ç»‡å¹¶æ¨è¿›æ ¸å¿ƒ issue çš„ tasklist å®Œæˆ ç”³è¯·æ–¹å¼ï¼š ç”± Maintainer æåï¼Œç¼–è¾‘æœ¬æ–‡æ¡£ï¼Œæ PR ç”³è¯· ","version":"Next","tagName":"h3"},{"title":"Maintainerâ€‹","type":1,"pageTitle":"å¼€å‘äººå‘˜","url":"/zh-cn/docs/developers/developers_dev#maintainer","content":"Maintaineræ˜¯å¯¹Higressé¡¹ç›®ï¼ˆåŒ…æ‹¬Higressä¸‹çš„é¡¹ç›®ï¼‰çš„æ¼”è¿›å’Œå‘å±•åšå‡ºæ˜¾è‘—è´¡çŒ®çš„ä¸ªäººã€‚åœ¨ç¤¾åŒºä¸­å…·æœ‰æœ‰ç›®å…±ç¹çš„å½±å“åŠ›ï¼Œèƒ½å¤Ÿä»£è¡¨Higresså‚åŠ é‡è¦çš„ç¤¾åŒºä¼šè®®å’Œæ´»åŠ¨ã€‚ æ¡ä»¶ï¼š æ»¡è¶³ Approver æ¡ä»¶ä¸»å¯¼å¤šä¸ª SIG Proposal è‰æ¡ˆï¼Œç»„ç»‡å¹¶æ¨è¿›æ ¸å¿ƒ issue çš„ tasklist å®Œæˆç§¯æå‚ä¸å¼€æºç¤¾åŒºçš„æ—¥å¸¸å·¥ä½œï¼šå¼•å¯¼æ–°äººå¼€å‘ï¼Œç”¨æˆ·é—®é¢˜è§£ç­”ç­‰ ç”³è¯·æ–¹å¼ï¼š ç”± 2 åä»¥ä¸ŠMaintainer æåï¼Œç¼–è¾‘æœ¬æ–‡æ¡£ï¼Œæ PR ç”³è¯· ","version":"Next","tagName":"h3"},{"title":"ä½¿ç”¨ Helm è¿›è¡Œäº‘åŸç”Ÿéƒ¨ç½²","type":0,"sectionRef":"#","url":"/zh-cn/docs/ops/deploy-by-helm","content":"","keywords":"deploy helm kubernetes k8s ops","version":"Next"},{"title":"å®‰è£… Higressâ€‹","type":1,"pageTitle":"ä½¿ç”¨ Helm è¿›è¡Œäº‘åŸç”Ÿéƒ¨ç½²","url":"/zh-cn/docs/ops/deploy-by-helm#å®‰è£…-higress","content":"Higress ç½‘å…³ç”±æ§åˆ¶é¢ç»„ä»¶ higress-controller å’Œæ•°æ®é¢ç»„ä»¶ higress-gateway ç»„æˆã€‚higress-gatewayè´Ÿè´£æ‰¿è½½æ•°æ®æµé‡ï¼Œhigress-controller è´Ÿè´£ç®¡ç†é…ç½®ä¸‹å‘ã€‚ ","version":"Next","tagName":"h2"},{"title":"Helm å®‰è£…å‘½ä»¤â€‹","type":1,"pageTitle":"ä½¿ç”¨ Helm è¿›è¡Œäº‘åŸç”Ÿéƒ¨ç½²","url":"/zh-cn/docs/ops/deploy-by-helm#helm-å®‰è£…å‘½ä»¤","content":"helm repo add higress.io https://higress.io/helm-charts helm install higress higress.io/higress -n higress-system --create-namespace  ","version":"Next","tagName":"h3"},{"title":"å¸¸ç”¨å®‰è£…å‚æ•°â€‹","type":1,"pageTitle":"ä½¿ç”¨ Helm è¿›è¡Œäº‘åŸç”Ÿéƒ¨ç½²","url":"/zh-cn/docs/ops/deploy-by-helm#å¸¸ç”¨å®‰è£…å‚æ•°","content":"å®Œæ•´å‚æ•°ä»‹ç»è¯·æŸ¥çœ‹è¿ç»´å‚æ•°è¯´æ˜ å‚æ•°å\tå‚æ•°è¯´æ˜\té»˜è®¤å€¼å…¨å±€å‚æ•° global.local\tå¦‚æœè¦å®‰è£…è‡³æœ¬åœ° K8s é›†ç¾¤ï¼ˆå¦‚ Kindã€Rancher Desktop ç­‰ï¼‰ï¼Œè¯·è®¾ç½®ä¸º true\tfalse global.ingressClass\tç”¨äºè¿‡æ»¤è¢« Higress Controller ç›‘å¬çš„ Ingress èµ„æºçš„ IngressClassã€‚ åœ¨é›†ç¾¤å†…éƒ¨ç½²äº†å¤šä¸ªç½‘å…³æ—¶ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸€å‚æ•°æ¥åŒºåˆ†æ¯ä¸ªç½‘å…³çš„èŒè´£èŒƒå›´ã€‚ IngressClass æœ‰ä¸€äº›ç‰¹æ®Šçš„å–å€¼ï¼š 1. å¦‚æœè®¾ç½®ä¸ºâ€œnginxâ€ï¼ŒHigress Controller å°†ç›‘å¬ Ingress ä¸º nginx æˆ–ä¸ºç©ºçš„ Ingress èµ„æºã€‚ 2. å¦‚æœè®¾ä¸ºç©ºï¼ŒHigress Controller å°†ç›‘å¬ K8s é›†ç¾¤å†…çš„å…¨éƒ¨ Ingress èµ„æºã€‚\thigress global.watchNamespace\tå¦‚æœå€¼ä¸ä¸ºç©ºï¼ŒHigress Controller å°†åªä¼šç›‘å¬æŒ‡å®šå‘½åç©ºé—´ä¸‹çš„èµ„æºã€‚ å½“åŸºäº K8s å‘½åç©ºé—´è¿›è¡Œä¸šåŠ¡ç³»ç»Ÿéš”ç¦»æ—¶ï¼Œè‹¥éœ€è¦å¯¹æ¯ä¸ªå‘½åç©ºé—´éƒ¨ç½²ä¸€å¥—ç‹¬ç«‹çš„ç½‘å…³ï¼Œå¯ä»¥é€šè¿‡è¿™ä¸€å‚æ•°æ¥é™åˆ¶ Higress ç›‘å¬æŒ‡å®šå‘½åç©ºé—´å†…çš„ Ingressã€‚\t&quot;&quot; global.disableAlpnH2\tæ˜¯å¦åœ¨ ALPN ä¸­ç¦ç”¨ HTTP/2 åè®®\ttrue global.enableStatus\tè‹¥ä¸ºtrueï¼Œ Higress Controller å°†ä¼šæ›´æ–° Ingress èµ„æºçš„ status å­—æ®µã€‚ ä¸ºé¿å…ä» Nginx Ingress è¿ç§»è¿‡ç¨‹ä¸­ï¼Œè¦†ç›– Ingress å¯¹è±¡çš„ status å­—æ®µï¼Œå¯ä»¥å°†è¿™ä¸€å‚æ•°è®¾ç½®ä¸ºfalseï¼Œè¿™æ · Higress é»˜è®¤å°±ä¸ä¼šå°†å…¥å£ IP å†™å…¥ Ingress çš„ status å­—æ®µã€‚\ttrue global.enableIstioAPI\tè‹¥ä¸ºtrueï¼ŒHigress Controller å°†åŒæ—¶ç›‘å¬ istio èµ„æº\tfalse global.enableGatewayAPI\tè‹¥ä¸ºtrueï¼ŒHigress Controller å°†åŒæ—¶ç›‘å¬ Gateway API èµ„æº\tfalse global.onlyPushRouteCluster\tè‹¥ä¸ºtrueï¼ŒHigress Controller å°†ä¼šåªæ¨é€è¢«è·¯ç”±å…³è”çš„æœåŠ¡\ttrue æ ¸å¿ƒç»„ä»¶å‚æ•° higress-core.gateway.replicas\tHigress Gateway çš„ pod æ•°é‡\t2 higress-core.controller.replicas\tHigress Controller çš„ pod æ•°é‡\t1 æ§åˆ¶å°å‚æ•° higress-console.replicaCount\tHigress Console çš„ pod æ•°é‡\t1 higress-console.service.type\tHigress Console æ‰€ä½¿ç”¨çš„ K8s Service ç±»å‹\tClusterIP higress-console.web.login.prompt\tç™»å½•é¡µé¢ä¸Šæ˜¾ç¤ºçš„æç¤ºä¿¡æ¯\t&quot;&quot; higress-console.o11y.enabled\tè‹¥ä¸º trueï¼Œå°†åŒæ—¶å®‰è£…å¯è§‚æµ‹æ€§å¥—ä»¶ï¼ˆGrafana + Promethuesï¼‰\tfalse higress-console.pvc.rwxSupported\tæ ‡è¯†ç›®æ ‡ K8s é›†ç¾¤æ˜¯å¦æ”¯æŒ PersistentVolumeClaim çš„ ReadWriteMany æ“ä½œæ–¹å¼ã€‚\ttrue ","version":"Next","tagName":"h3"},{"title":"æ”¯æŒ Istio CRDï¼ˆå¯é€‰ï¼‰â€‹","type":1,"pageTitle":"ä½¿ç”¨ Helm è¿›è¡Œäº‘åŸç”Ÿéƒ¨ç½²","url":"/zh-cn/docs/ops/deploy-by-helm#æ”¯æŒ-istio-crdå¯é€‰","content":"é›†ç¾¤é‡Œéœ€è¦æå‰å®‰è£…å¥½ Istio çš„ CRDï¼Œå¦‚æœä¸å¸Œæœ›å®‰è£… Istioï¼Œä¹Ÿå¯ä»¥åªå®‰è£… Istio çš„ CRDï¼š helm repo add istio https://istio-release.storage.googleapis.com/charts helm install istio-base istio/base -n istio-system --create-namespace  è¿™ç§æ¨¡å¼ä¸‹ï¼Œéœ€è¦æ›´æ–° Higress çš„éƒ¨ç½²å‚æ•°ï¼š helm upgrade higress -n higress-system --set global.enableIstioAPI=true higress.io/higress --reuse-values  ","version":"Next","tagName":"h2"},{"title":"æ”¯æŒ Gateway API CRDï¼ˆå¯é€‰ï¼‰â€‹","type":1,"pageTitle":"ä½¿ç”¨ Helm è¿›è¡Œäº‘åŸç”Ÿéƒ¨ç½²","url":"/zh-cn/docs/ops/deploy-by-helm#æ”¯æŒ-gateway-api-crdå¯é€‰","content":"é›†ç¾¤é‡Œéœ€è¦æå‰å®‰è£…å¥½ Gateway API çš„ CRDï¼šhttps://github.com/kubernetes-sigs/gateway-api/releases ä»¥1.0.0ä¸ºä¾‹ï¼š kubectl apply -f https://github.com/kubernetes-sigs/gateway-api/releases/download/v1.0.0/experimental-install.yaml  è¿™ç§æ¨¡å¼ä¸‹ï¼Œéœ€è¦æ›´æ–° Higress çš„éƒ¨ç½²å‚æ•°ï¼š helm upgrade higress -n higress-system --set global.enableGatewayAPI=true higress.io/higress --reuse-values  ","version":"Next","tagName":"h2"},{"title":"ç‰ˆæœ¬å‡çº§","type":0,"sectionRef":"#","url":"/zh-cn/docs/ops/upgrade","content":"","keywords":"Upgrade","version":"Next"},{"title":"äº‘åŸç”Ÿéƒ¨ç½²â€‹","type":1,"pageTitle":"ç‰ˆæœ¬å‡çº§","url":"/zh-cn/docs/ops/upgrade#äº‘åŸç”Ÿéƒ¨ç½²","content":"","version":"Next","tagName":"h2"},{"title":"åŸºäº Helm å®ç°ç‰ˆæœ¬å‡çº§â€‹","type":1,"pageTitle":"ç‰ˆæœ¬å‡çº§","url":"/zh-cn/docs/ops/upgrade#åŸºäº-helm-å®ç°ç‰ˆæœ¬å‡çº§","content":"# ${higress_version} çš„å€¼ç¤ºä¾‹: v1.1.0 kubectl apply -f https://raw.githubusercontent.com/alibaba/higress/${higress_version}/helm/core/crds/customresourcedefinitions.gen.yaml helm repo update helm upgrade higress -n higress-system higress.io/higress  ","version":"Next","tagName":"h3"},{"title":"ç‹¬ç«‹éƒ¨ç½²â€‹","type":1,"pageTitle":"ç‰ˆæœ¬å‡çº§","url":"/zh-cn/docs/ops/upgrade#ç‹¬ç«‹éƒ¨ç½²","content":"# ${higress_dir} ä¸º Higress ç‹¬ç«‹éƒ¨ç½²çš„å®‰è£…ç›®å½• curl -fsSL https://higress.io/standalone/get-higress.sh | bash -s -- &quot;${higress_dir}&quot; -u  ","version":"Next","tagName":"h2"},{"title":"ç‰ˆæœ¬è®¡åˆ’","type":0,"sectionRef":"#","url":"/zh-cn/docs/overview/roadmap","content":"ç‰ˆæœ¬è®¡åˆ’ ç‰ˆæœ¬å·\tç‰ˆæœ¬æ ¸å¿ƒç›®æ ‡\té¢„è®¡å‘å¸ƒæ—¶é—´v0.6.0\tK8s ä¸‹é»‘å±æ“ä½œ(kubectl)è¾¾åˆ°GAçŠ¶æ€ï¼›å‘å¸ƒæ§åˆ¶å°é¢„è§ˆç‰ˆï¼Œæé«˜å®‰è£…éƒ¨ç½²çš„æ˜“ç”¨æ€§\t2023-01 v0.7.0\tæ§åˆ¶å°å‘å¸ƒæ­£å¼ç‰ˆæœ¬ï¼Œé›†æˆå¼€ç®±å³ç”¨çš„å¯è§‚æµ‹\t2023-02 v1.0.0\tæ•´ä½“è¾¾åˆ°GAçŠ¶æ€\t2023-05 v1.1.0\tå¢å¼ºæ§åˆ¶å°åŠŸèƒ½ä¸­å¾®æœåŠ¡ç½‘å…³ç›¸å…³èƒ½åŠ›ï¼›æ”¯æŒé K8s ä¸‹å®‰è£…éƒ¨ç½²\t2023-07 v1.2.0\tæ”¯æŒä½œä¸º Knative çš„ç½‘ç»œå±‚ä½¿ç”¨ï¼›æ”¯æŒ ARM æ¶æ„éƒ¨ç½²ï¼›æ”¯æŒå¯¹æ¥ Consul\t2023-08 v1.3.0\tå®Œæ•´æ”¯æŒ GatewayAPIï¼›æ”¯æŒ Operator æ¨¡å¼éƒ¨ç½²\t2023-11 v1.4.0\tWASM æ”¯æŒ redis è°ƒç”¨ï¼›ç®€åŒ– HTTPS è¯ä¹¦ç®¡ç†\t2024-05 v2.0.0\tIstio/Envoy å†…æ ¸ç‰ˆæœ¬å‡çº§ï¼Œæ›´ä¸°å¯Œçš„ API ç½‘å…³èƒ½åŠ›\t2024-06","keywords":"Higress roadmap","version":"Next"},{"title":"FAQ","type":0,"sectionRef":"#","url":"/zh-cn/docs/overview/faq","content":"","keywords":"Higress","version":"Next"},{"title":"Q: Higress ç°åœ¨é€‚åˆä¸Šç”Ÿäº§ç³»ç»Ÿä¹ˆï¼Ÿâ€‹","type":1,"pageTitle":"FAQ","url":"/zh-cn/docs/overview/faq#1","content":"A:å»ºè®®å‡çº§åˆ° v1.0.0 åŠä»¥ä¸Šç‰ˆæœ¬ å…·ä½“å¯ä»¥å‚è€ƒæˆ‘ä»¬çš„Roadmap  ","version":"Next","tagName":"h3"},{"title":"Q: Higress å’Œ Envoy Gateway æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿâ€‹","type":1,"pageTitle":"FAQ","url":"/zh-cn/docs/overview/faq#2","content":"A:Higress æ˜¯åŸºäº Envoy å®ç°å’Œæ‰©å±•çš„ï¼Œå’Œ Envoy Gateway ä¸€æ ·éµå¾ª Gateway API æ ‡å‡†ï¼Œä¸åŒçš„æ˜¯ï¼Œè¿˜æä¾›äº†ï¼š Waf é˜²æŠ¤ã€è®¤è¯é‰´æƒç­‰å®‰å…¨æ’ä»¶èƒ½åŠ›å¤šæ³¨å†Œä¸­å¿ƒã€åè®®è½¬åŒ–ã€é™æµé™çº§ç­‰æœåŠ¡ç®¡ç†æ’ä»¶èƒ½åŠ›ï¼Œä¾‹å¦‚ï¼Œå¯¹äºä¼ ç»Ÿä½¿ç”¨ Dubbo çš„å¾®æœåŠ¡ç”¨æˆ·å¸Œæœ›ä½¿ç”¨åŸç”Ÿ RPC æ–¹å¼æš´éœ²å¯¹å¤–æœåŠ¡ï¼Œä½†é€šå¸¸æä¾›å¤–éƒ¨è®¿é—®çš„æœåŠ¡ä»¥ä½¿ç”¨ HTTP ä¸ºä¸»ï¼Œä¸ºäº†å¸®åŠ© Dubbo ç”¨æˆ·é™ä½æœåŠ¡æš´éœ²çš„å¼€å‘æˆæœ¬ï¼ŒHigress æä¾›äº† HTTP è½¬ Dubbo åè®®åŠŸèƒ½ï¼Œä¸”é€šè¿‡ Console ä¸ºç”¨æˆ·æä¾›ç™½å±åŒ–çš„é…ç½®æ–¹å¼ï¼ŒæŸå®¢æˆ·ä½¿ç”¨ååé¦ˆâ€œè¿™æ˜¯ä¸šç•Œå®Œæˆåº¦æœ€é«˜çš„ HTTP è½¬ Dubbo åè®®â€åŠŸèƒ½ã€‚æ”¯æŒ WASMã€Lua ç­‰è‡ªå®šä¹‰æ’ä»¶ï¼Œä¾‹å¦‚ Nginx ç”¨æˆ·ï¼Œæˆ‘ä»¬è¿˜ä¼šæ”¯æŒè¿›ç¨‹å¤–æ’ä»¶ï¼Œæ»¡è¶³å¤šè¯­è¨€ç”¨æˆ·è¯‰æ±‚ï¼Œå°¤å…¶æ˜¯ Java ç”¨æˆ·å› ç°é˜¶æ®µ Java ç¤¾åŒºå¯¹ WebAssembly æ”¯æŒå°šä¸å®Œå–„ä½†åˆå¸Œæœ›å¯¹ç½‘å…³è¿›è¡Œæ‰©å±•çš„è¯‰æ±‚ã€‚  ","version":"Next","tagName":"h3"},{"title":"Q: Higress å’Œé˜¿é‡Œå·´å·´çš„å¦ä¸€æ¬¾å¼€æºç½‘å…³ Tengine æœ‰å“ªäº›ä¸åŒï¼Ÿâ€‹","type":1,"pageTitle":"FAQ","url":"/zh-cn/docs/overview/faq#3","content":"A: Tengine æ˜¯åŸºäº Nginx å®ç°ï¼Œé€šè¿‡ Lua æ‰©å±•ï¼ŒHigress åŸºäº istio + Envoyï¼Œé€šè¿‡ WASM æ‰©å±•ï¼Œåœ¨æŠ€æœ¯æ¶æ„ä¸Šä¸å¤ªä¸€æ ·ï¼Œå¼€å‘è€…å¯ä»¥æ ¹æ®ä¸šåŠ¡åœºæ™¯æ¥è¿›è¡Œé€‰å‹ã€‚Higress å·²ç»æ”¯æŒ Nginx Ingress æ³¨è§£å¹³æ»‘è¿ç§»çš„èƒ½åŠ›ï¼Œæ»¡è¶³éƒ¨åˆ†ç”¨æˆ·æœŸæœ›è¿ç§»åˆ° Higress ä½†åˆä¸å¸Œæœ›é‡æ–°é…ç½®ç½‘å…³çš„è¯‰æ±‚ï¼Œæ—¢å¯ä»¥å°† Higress ä½œä¸ºç»Ÿä¸€æ¥å…¥ç½‘å…³ä½¿ç”¨ï¼ŒåŒæ—¶åˆå¯ä»¥äº«å— Ingress çš„çº¢åˆ©ã€‚  ","version":"Next","tagName":"h3"},{"title":"Q: Higress é˜¿é‡Œäº‘ä¸Šçš„ MSE äº‘åŸç”Ÿç½‘å…³æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿæ˜¯åŸºäºæ­¤å­µåŒ–çš„å¼€æºé¡¹ç›®å—ï¼Ÿâ€‹","type":1,"pageTitle":"FAQ","url":"/zh-cn/docs/overview/faq#4","content":"A: MSE äº‘åŸç”Ÿç½‘å…³æ˜¯ Higress çš„å•†ä¸šåŒ–ç‰ˆæœ¬ï¼Œèƒ½åŠ›ä¸Šæ˜¯æœ‰å·®å¼‚çš„ï¼Œä¸»è¦ä½“ç°åœ¨æ€§èƒ½ã€ç¨³å®šæ€§ã€æ˜“ç”¨æ€§å’Œå®‰å…¨æ€§ä¸Šï¼Œå› ä¸ºè¿™äº›éƒ½éå¸¸ä¾èµ–äºäº‘ä¸Šçš„åŸºç¡€è®¾æ–½èƒ½åŠ›ï¼Œè¯¦ç»†èµ„æºè¿˜åœ¨æ•´ç†ï¼Œåç»­ä¼šåœ¨ MSE çš„äº§å“é¡µå’Œæ–‡æ¡£é¡µè¿›è¡Œå±•ç¤ºï¼Œæ–¹ä¾¿å¤§å®¶é€‰å‹ã€‚å½“ç„¶ï¼ŒHigress å¤„äºæ¼”è¿›è¿‡ç¨‹ä¸­ï¼ŒMSE äº‘åŸç”Ÿç½‘å…³ä¸Šçš„å“ªäº›èƒ½åŠ›å¯¹å¤–è¿›è¡Œå¼€æºï¼Œæˆ‘ä»¬ä¼šå’Œç¤¾åŒºä¸€èµ·å®šä¹‰ï¼Œå¼€æºä¸Šæˆ‘ä»¬ä¹Ÿä¼šè§„åˆ’ä¸€ä¸ªæ’ä»¶å¸‚åœºã€‚  ","version":"Next","tagName":"h3"},{"title":"Q: Higress å°†æµé‡ç½‘å…³ã€å¾®æœåŠ¡ç½‘å…³ã€å®‰å…¨ç½‘å…³ä¸‰åˆä¸€ï¼Œè¿™ç§åšæ³•ä¸šå†…æ˜¯å¦é€šç”¨ï¼Ÿæ˜¯å¦æ˜¯ä¸€ç§å‘å±•è¶‹åŠ¿ï¼Ÿâ€‹","type":1,"pageTitle":"FAQ","url":"/zh-cn/docs/overview/faq#5","content":"A: æµé‡ç½‘å…³ã€å¾®æœåŠ¡ç½‘å…³ã€å®‰å…¨ç½‘å…³åœ¨ä¸šç•Œä¸­ä¸€ç›´éƒ½æœ‰ä½¿ç”¨ï¼Œéƒ¨ç½²å½¢æ€å¤§å¤šé‡‡ç”¨å„è‡ªä½¿ç”¨ç‹¬ç«‹é›†ç¾¤éƒ¨ç½²ï¼Œåœ¨K8s ä¸»å¯¼çš„å®¹å™¨åŒ–èƒŒæ™¯ä¸‹ï¼ŒK8s é€šè¿‡ Ingress æ ‡å‡†åŒ–äº†å…¥å£ç½‘å…³ï¼Œä¼ ç»Ÿæµé‡ç½‘å…³ã€å¾®æœåŠ¡ç½‘å…³ã€å®‰å…¨ç½‘å…³ç‹¬ç«‹éƒ¨ç½²æ¨¡å¼åœ¨ K8s ä¸‹å°±æ˜¾å¾—éƒ¨ç½²æˆæœ¬é«˜ã€è¿ç»´å¤æ‚ï¼Œç«™åœ¨ç”¨æˆ·è§’åº¦åªéœ€è¦ä¸€æ¬¾åŠŸèƒ½ä¸°å¯Œçš„é«˜é›†æˆç½‘å…³å³å¯ï¼ŒåŸºäºæ­¤æˆ‘ä»¬åˆ¤æ–­é«˜é›†æˆç½‘å…³ä¼šæ˜¯æœªæ¥çš„ä¸€ç§å‘å±•è¶‹åŠ¿ã€‚  ","version":"Next","tagName":"h3"},{"title":"Q: Higress å¯¹ä¸Šæ¸¸è¿›è¡Œäº†å®šåˆ¶ï¼Œæ˜¯å¦å­˜åœ¨ç€æ— æ³•äº«å—ç¤¾åŒºç¦åˆ©ã€è¿˜è¦èƒŒè´Ÿç”Ÿæ€è·Ÿè¿›çš„é—®é¢˜ï¼Ÿâ€‹","type":1,"pageTitle":"FAQ","url":"/zh-cn/docs/overview/faq#6","content":"A: Higress æ ¸å¿ƒä»£ç åŸºæœ¬é‡‡ç”¨å¯æ’æ‹”çš„ Filter æ‰©å±•ï¼ŒåŠŸèƒ½æ–°å¢ä¹Ÿå°½é‡éµå¾ªå¯æ‰©å±•åŸåˆ™ï¼Œåœ¨ä¸Šæ¸¸è·Ÿè¿›ä¸Šä¸ºä¿æŒè‡ªèº«ç¨³å®šæ€§ä¹Ÿä¸ä¼šé©¬ä¸Šè·Ÿè¿›æœ€æ–°ç‰ˆæœ¬ï¼Œæ¯”å¦‚ APISIXã€Kong å†…æ ¸éƒ½æ˜¯åŸºäº Nginxï¼Œä½†ä»–ä»¬ä¾ç„¶å‘å±•çš„å¾ˆå¥½ï¼Œäº‹å®ä¹Ÿè¯´æ˜ä¸Šæ¸¸è·Ÿè¿›ä¸ä¼šæˆä¸ºé¡¹ç›®å‘å±•éšœç¢ã€‚  ","version":"Next","tagName":"h3"},{"title":"Q: Higress æ”¯æŒ Nacos çš„æœåŠ¡å‘ç°ï¼Œæ˜¯å¦æœ‰æ”¯æŒ Consul çš„è®¡åˆ’ï¼Ÿâ€‹","type":1,"pageTitle":"FAQ","url":"/zh-cn/docs/overview/faq#7","content":"A: é¢„è®¡å°†åœ¨ 1.2.0 ç‰ˆæœ¬æä¾›  ","version":"Next","tagName":"h3"},{"title":"Q: Higress æ˜¯å¦æœ‰ç¦»çº¿éƒ¨ç½²ç‰ˆæœ¬ï¼Ÿâ€‹","type":1,"pageTitle":"FAQ","url":"/zh-cn/docs/overview/faq#8","content":"A: ç›®å‰è¿˜æ²¡æœ‰ç°æˆçš„ï¼Œéœ€è¦æ‚¨è‡ªè¡Œæ„å»ºã€‚ç›®å‰ Docker é•œåƒéƒ½æ˜¯æä¾›çš„ï¼Œå¯ä»¥è‡ªè¡Œæ‹‰å–ä½¿ç”¨ã€‚  ","version":"Next","tagName":"h3"},{"title":"Q: Higress èƒ½è„±ç¦» K8s ç¯å¢ƒï¼ŒåªåŸºäº Docker è¿è¡Œå—ï¼Ÿâ€‹","type":1,"pageTitle":"FAQ","url":"/zh-cn/docs/overview/faq#9","content":"A: å·²ç»æ”¯æŒäº†ï¼Œå¯ä»¥çœ‹è¿™é‡Œï¼šhttps://higress.io/zh-cn/docs/user/quickstart#%E7%8E%AF%E5%A2%83%E4%BA%8C%E8%84%B1%E7%A6%BB-k8s-%E5%9C%A8-docker-compose-%E4%B8%AD%E4%BD%BF%E7%94%A8  ","version":"Next","tagName":"h3"},{"title":"Q: Higress é™¤äº†è¿è¡Œåœ¨ K8s ä¸Šï¼Œæ˜¯å¦æ”¯æŒåœ¨è™šæ‹Ÿæœºå’Œç‰©ç†æœºä¸Šè¿è¡Œå‘¢ï¼Ÿâ€‹","type":1,"pageTitle":"FAQ","url":"/zh-cn/docs/overview/faq#10","content":"A: åŒä¸Šï¼› ä¹Ÿå¯ä»¥è€ƒè™‘ä½¿ç”¨ Higress ä¼ä¸šç‰ˆï¼Œè¿™ä¸ªæ¨¡å¼ Higress æ˜¯å…¨æ‰˜ç®¡çš„ï¼Œæ— éœ€å…³å¿ƒ Higress çš„éƒ¨ç½²å’Œè¿ç»´ï¼Œå¯ç›´æ¥å¯¹æ¥è™šæ‹Ÿæœºå’Œç‰©ç†æœºä¸Šéƒ¨ç½²çš„åç«¯æœåŠ¡ã€‚  ","version":"Next","tagName":"h3"},{"title":"Q: Higress çš„ Dashboard ä¼šå¯¹å¤–å¼€æºä¹ˆï¼Ÿâ€‹","type":1,"pageTitle":"FAQ","url":"/zh-cn/docs/overview/faq#11","content":"A: å·²ç»å¼€æºäº†ï¼šhttps://github.com/higress-group/higress-console  ","version":"Next","tagName":"h3"},{"title":"Q: å½“å‰å¼€æºçš„ç‰ˆæœ¬æ”¯æŒ Waf åŠŸèƒ½ä¹ˆï¼Œæœ‰ç›¸å…³çš„æœ€ä½³å®è·µä¹ˆï¼Ÿâ€‹","type":1,"pageTitle":"FAQ","url":"/zh-cn/docs/overview/faq#12","content":"A: æ”¯æŒçš„ï¼Œå¯ä»¥çœ‹è¿™ç¯‡æ–‡æ¡£ï¼šhttps://higress.io/zh-cn/docs/user/waf/  ","version":"Next","tagName":"h3"},{"title":"Q: Higress æ˜¯å¦æ”¯æŒå¼¹æ€§ä¼¸ç¼©ï¼Œç½‘å…³æ˜¯æ— çŠ¶æ€çš„ä¹ˆï¼Ÿâ€‹","type":1,"pageTitle":"FAQ","url":"/zh-cn/docs/overview/faq#13","content":"A: Higress åŸºäº K8s HPAï¼Œæ˜¯æ”¯æŒå¼¹æ€§ä¼¸ç¼©çš„ï¼Œç½‘å…³æ— çŠ¶æ€ï¼Œæ˜¯ä¸ª deployment ã€‚  ","version":"Next","tagName":"h3"},{"title":"Q: Higress æœ‰ roadmap äº†ä¹ˆï¼Ÿâ€‹","type":1,"pageTitle":"FAQ","url":"/zh-cn/docs/overview/faq#14","content":"A: è¯·å‚è€ƒRoadmap  ","version":"Next","tagName":"h3"},{"title":"Q: å¦‚ä½•åŠ å…¥ Higress ç¤¾åŒºè¿›è¡Œè´¡çŒ®ï¼Œå·²ç»è¿«ä¸åŠå¾…äº† â€‹","type":1,"pageTitle":"FAQ","url":"/zh-cn/docs/overview/faq#15","content":"A: æˆ‘ä»¬éå¸¸æ¬¢è¿å¤§å®¶é€šè¿‡å„ç§å½¢å¼å‚ä¸åˆ°æˆ‘ä»¬é¡¹ç›®çš„å»ºè®¾ä¸­ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š æ¶æ„è®¾è®¡æ¨¡å—è®¾è®¡ä»£ç å®ç°Bug FixDemo æ ·ä¾‹æ–‡æ¡£ã€ç½‘ç«™å’Œç¿»è¯‘ å…·ä½“çš„å‚ä¸æ–¹æ³•å¯ä»¥å‚è§æˆ‘ä»¬å®˜ç½‘çš„å¼€å‘è€…æŒ‡å¼•æˆ–ä¸ higress@googlegroups.com è”ç³»ã€‚ å®é™…ä¸Šï¼Œæˆ‘ä»¬å¹¶ä¸æ‹˜æ³¥äºè´¡çŒ®çš„å½¢å¼ï¼Œå¼€å‘è€…æå‡ºçš„æ¯ä¸€ä¸ª issueï¼Œæ— è®ºæ˜¯ Bug Reportã€æ”¹è¿›å»ºè®®æˆ–è€…ç”šè‡³æ˜¯é—®é¢˜å’¨è¯¢éƒ½ä»£è¡¨ç€å¯¹é¡¹ç›®çš„å…³æ³¨å’Œå¸®åŠ©ã€‚å¸Œæœ› Higress é¡¹ç›®å’Œç¤¾åŒºä¸€èµ·å¥åº·æˆé•¿ï¼Œæˆä¸ºäº‘åŸç”Ÿç½‘å…³é¢†åŸŸä¸€ä¸ªä¼˜ç§€çš„è§£å†³æ–¹æ¡ˆã€‚  ","version":"Next","tagName":"h3"},{"title":"Q: ä¼ä¸šç‰ˆå’Œå¼€æºç‰ˆæœ‰åŠŸèƒ½å·®å¼‚å¯¹æ¯”å— â€‹","type":1,"pageTitle":"FAQ","url":"/zh-cn/docs/overview/faq#16","content":"A: ä¼ä¸šç‰ˆå’Œå¼€æºç‰ˆæœ¬çš„åŠŸèƒ½åŸºæœ¬ä¸€è‡´ï¼Œä¼ä¸šç‰ˆä¸»è¦æ˜¯ä»¥å¼€æºç‰ˆæœ¬ä¸ºåŠŸèƒ½å†…æ ¸ï¼Œæä¾›äº†æ›´å¤šç°æˆçš„è§£å†³æ–¹æ¡ˆï¼ŒåŒ…æ‹¬é«˜å¯ç”¨ã€å®‰å…¨ã€å¯è§‚æµ‹ç­‰æ–¹é¢ï¼Œè¯¦ç»†å¯ä»¥å‚è€ƒï¼š MSEäº‘åŸç”Ÿç½‘å…³å’Œå¼€æºHigresså¯¹æ¯” å…¸å‹çš„ä¼ä¸šç‰ˆè§£å†³æ–¹æ¡ˆï¼šåŒåŸå¤šæ´»  ","version":"Next","tagName":"h3"},{"title":"Higress Terminology","type":0,"sectionRef":"#","url":"/zh-cn/docs/overview/terminology","content":"","keywords":"Higress","version":"Next"},{"title":"Ingress æ³¨è§£(Annotation)â€‹","type":1,"pageTitle":"Higress Terminology","url":"/zh-cn/docs/overview/terminology#ingress-æ³¨è§£annotation","content":"Ingress èµ„æºä¸­çš„æ³¨è§£(Annotation)å­—æ®µï¼Œæ˜¯ä¸€ä¸ª kv å­—å…¸ç»“æ„ï¼Œå¯ä»¥é€šè¿‡ç”³æ˜å¼çš„æ–¹å¼æ¥å®ç°å„ç§è·¯ç”±ç­–ç•¥ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œæ˜¯ä½¿ç”¨æ³¨è§£å®ç°å¯¹è¯¥ Ingress è·¯ç”±å¼€å¯è·¨åŸŸè®¿é—®è®¸å¯ï¼š apiVersion: networking.k8s.io/v1 kind: Ingress metadata: name: ingress-example annotations: higress.io/enable-cors: &quot;true&quot; spec: ingressClassName: nginx-example rules: - http: paths: - path: /test pathType: Prefix backend: service: name: test port: number: 80  Higress æ”¯æŒçš„å…¶ä»–æ³¨è§£é…ç½®æ–¹å¼ï¼Œè¯·å‚è€ƒIngress Annotation é…ç½®è¯´æ˜ ","version":"Next","tagName":"h2"},{"title":"ä¸‹æ¸¸(Downstream)â€‹","type":1,"pageTitle":"Higress Terminology","url":"/zh-cn/docs/overview/terminology#ä¸‹æ¸¸downstream","content":"ä¸‹æ¸¸æŒ‡ Higress æ¥æ”¶åˆ°è¯·æ±‚çš„æ¥æºï¼Œä¸€èˆ¬æ˜¯å¦‚æµè§ˆå™¨ç­‰å®¢æˆ·ç«¯ ","version":"Next","tagName":"h2"},{"title":"ä¸Šæ¸¸(Upstream)â€‹","type":1,"pageTitle":"Higress Terminology","url":"/zh-cn/docs/overview/terminology#ä¸Šæ¸¸upstream","content":"ä¸Šæ¸¸æŒ‡ Higress è½¬å‘è¯·æ±‚çš„ç›®æ ‡åç«¯æœåŠ¡ ","version":"Next","tagName":"h2"},{"title":"Higressæ˜¯ä»€ä¹ˆ?","type":0,"sectionRef":"#","url":"/zh-cn/docs/overview/what-is-higress","content":"","keywords":"Higress","version":"Next"},{"title":"ä¼ ç»Ÿç½‘å…³åˆ†ç±»â€‹","type":1,"pageTitle":"Higressæ˜¯ä»€ä¹ˆ?","url":"/zh-cn/docs/overview/what-is-higress#ä¼ ç»Ÿç½‘å…³åˆ†ç±»","content":"è¡Œä¸šä¸­é€šå¸¸æŠŠç½‘å…³åˆ†ä¸ºä¸¤ä¸ªå¤§ç±»ï¼šæµé‡ç½‘å…³ä¸ä¸šåŠ¡ç½‘å…³ï¼Œæµé‡ç½‘å…³ä¸»è¦æä¾›å…¨å±€æ€§çš„ã€ä¸åç«¯ä¸šåŠ¡æ— å…³çš„ç­–ç•¥é…ç½®ï¼Œä¾‹å¦‚é˜¿é‡Œå†…éƒ¨çš„çš„ç»Ÿä¸€æ¥å…¥ç½‘å…³Tengineå°±æ˜¯å…¸å‹çš„æµé‡ç½‘å…³ï¼›ä¸šåŠ¡ç½‘å…³é¡¾åæ€ä¹‰ä¸»è¦æä¾›ç‹¬ç«‹ä¸šåŠ¡åŸŸçº§åˆ«çš„ã€ä¸åç«¯ä¸šåŠ¡ç´§è€¦åˆç­–ç•¥é…ç½®ï¼Œéšç€åº”ç”¨æ¶æ„æ¨¡å¼ä»å•ä½“æ¼”è¿›åˆ°ç°åœ¨çš„åˆ†å¸ƒå¼å¾®æœåŠ¡ï¼Œä¸šåŠ¡ç½‘å…³ä¹Ÿæœ‰äº†æ–°çš„å«æ³• - å¾®æœåŠ¡ç½‘å…³ï¼ˆå›¾ç¤ºè¯´æ˜å¦‚ä¸‹ï¼‰ã€‚åœ¨ç›®å‰å®¹å™¨æŠ€æœ¯ä¸K8sä¸»å¯¼çš„äº‘åŸç”Ÿæ—¶ä»£ï¼Œä¸‹ä¸€ä»£ç½‘å…³æ¨¡å¼ä¾ç„¶æ˜¯è¿™æ ·å—ï¼Ÿ  ","version":"Next","tagName":"h2"},{"title":"Higresså®šä½â€‹","type":1,"pageTitle":"Higressæ˜¯ä»€ä¹ˆ?","url":"/zh-cn/docs/overview/what-is-higress#higresså®šä½","content":"åœ¨è™šæ‹ŸåŒ–æ—¶æœŸçš„å¾®æœåŠ¡æ¶æ„ä¸‹ï¼Œä¸šåŠ¡é€šå¸¸é‡‡ç”¨æµé‡ç½‘å…³ + å¾®æœåŠ¡ç½‘å…³çš„ä¸¤å±‚æ¶æ„ï¼Œæµé‡ç½‘å…³è´Ÿè´£å—åŒ—å‘æµé‡è°ƒåº¦å’Œå®‰å…¨é˜²æŠ¤ï¼Œå¾®æœåŠ¡ç½‘å…³è´Ÿè´£ä¸œè¥¿å‘æµé‡è°ƒåº¦å’ŒæœåŠ¡æ²»ç†ï¼Œè€Œåœ¨å®¹å™¨å’Œ K8s ä¸»å¯¼çš„äº‘åŸç”Ÿæ—¶ä»£ï¼ŒIngress æˆä¸º K8s ç”Ÿæ€çš„ç½‘å…³æ ‡å‡†ï¼Œèµ‹äºˆäº†ç½‘å…³æ–°çš„ä½¿å‘½ï¼Œä½¿å¾—æµé‡ç½‘å…³ + å¾®æœåŠ¡ç½‘å…³åˆäºŒä¸ºä¸€æˆä¸ºå¯èƒ½ã€‚ ä½œä¸ºé¢å‘å—åŒ—å‘çš„å…¬ç½‘ç½‘å…³ï¼Œä½¿ç”¨Wafé˜²æŠ¤å¼‚å¸¸æµé‡æ˜¯å¾ˆå¸¸è§„çš„éœ€æ±‚ï¼Œè€Œä¸”éšç€äº’è”ç½‘ç¯å¢ƒå˜å¾—è¶Šæ¥è¶Šå¤æ‚ï¼Œç”¨æˆ·å¯¹é˜²æŠ¤çš„è¯‰æ±‚æ˜¯æŒç»­å¢å¼ºçš„ï¼Œå¸¸è§„åšæ³•æ˜¯å°†æµé‡å…ˆæ¥å…¥Wafå®‰å…¨ç½‘å…³ï¼Œè¿‡æ»¤åå†å°†æµé‡è½¬å‘ç»™æµé‡ç½‘å…³ï¼Œæœ€ååˆ°è¾¾å¾®æœåŠ¡ç½‘å…³ï¼›Higresså¸Œæœ›é€šè¿‡å†…ç½®Wafæ¨¡å—ï¼Œä½¿å¾—ç”¨æˆ·çš„è¯·æ±‚é“¾æ¥åªç»è¿‡Higresså°±å¯ä»¥åŒæ—¶å®ŒæˆWafé˜²æŠ¤ã€æµé‡åˆ†å‘ã€å¾®æœåŠ¡æ²»ç†ï¼Œæ—¢å¯ä»¥é™ä½é“¾è·¯RTï¼Œä¹Ÿå¯ä»¥é™ä½ç½‘å…³çš„è¿ç»´å¤æ‚åº¦ã€‚å› æ­¤Higresså®ç°äº†æµé‡ç½‘å…³ + å¾®æœåŠ¡ç½‘å…³ + å®‰å…¨ç½‘å…³ä¸‰åˆä¸€çš„é«˜é›†æˆèƒ½åŠ›ã€‚  ","version":"Next","tagName":"h2"},{"title":"Higressä¸ºä»€ä¹ˆé€‰æ‹©ä»¥Envoy + Istioä¸ºå†…æ ¸æ„å»º?â€‹","type":1,"pageTitle":"Higressæ˜¯ä»€ä¹ˆ?","url":"/zh-cn/docs/overview/what-is-higress#higressä¸ºä»€ä¹ˆé€‰æ‹©ä»¥envoy--istioä¸ºå†…æ ¸æ„å»º","content":"åœ¨å®¹å™¨åŒ–çš„äº‘åŸç”Ÿå¤§èƒŒæ™¯ä¸‹ï¼ŒKuberneteså·²ç»æˆä¸ºäº†åŸºç¡€è®¾æ–½ä¸ä¸Šå±‚åº”ç”¨çš„æ ‡å‡†æ¥å£ï¼ŒKubernetesé›†ç¾¤å¤©ç„¶çš„å†…å¤–ç½‘ç»œéš”ç¦»ç¯å¢ƒï¼Œä½¿å¾—å¤–éƒ¨æµé‡è¿›å…¥Kubernetesé›†ç¾¤å†…éƒ¨éœ€è¦é€šè¿‡å…¥å£ç½‘å…³ï¼Œå› æ­¤Kubernetesé€šè¿‡Ingressæ¥è§„èŒƒåŒ–å…¥å£ç½‘å…³çš„å®šä¹‰ä¸æ ‡å‡†ï¼Œè™½ç„¶Ingressæ ‡å‡†å­˜åœ¨ä¸€äº›å¦‚è·¯ç”±è¡¨è¾¾èƒ½åŠ›å¼±ç­‰ä¸è¶³ä¹‹å¤„ï¼Œç¤¾åŒºå·²ç»åœ¨ç§¯ææ¨è¿›Gateway APIæ ‡å‡†å®šä¹‰æ¥è§£å†³ï¼Œä½†ä¸å¯å¦è®¤çš„æ˜¯ç›®å‰Ingressæ ‡å‡†ä»ç„¶å æ®ä¸»æµï¼ŒCNCFå¹´åº¦æŠ¥å‘Šä¸­ä¹Ÿå•ç‹¬ç»Ÿè®¡äº†Ingress Providerï¼ˆIngressæ ‡å‡†çš„å®ç°æ–¹ç»Ÿç§°ä¸ºIngress Providerï¼‰çš„ä½¿ç”¨æƒ…å†µã€‚  ä»ä¸Šè¿°ç»Ÿè®¡æŠ¥å‘Šä¸­å¯ä»¥çœ‹åˆ°è™½ç„¶ç›®å‰Nginx Ingressä»ç„¶å æ®K8s Ingress Provideræ¦œé¦–ï¼Œä½†Envoyçš„å¢é•¿æ˜¯æœ€å¿«çš„ï¼Œå·²ç»ä»2019å¹´çš„ä¸è¶³20%å¢é•¿ä¸º2020å¹´çš„37%ï¼Œä¸”ä»…åœ¨Nginx Ingressä¹‹åï¼Œå¢é•¿åŠ¿å¤´éå¸¸è¿…çŒ›ï¼Œè¿™è¯´æ˜é€‰æ‹©ä»¥Envoyä¸ºå†…æ ¸æ˜¯ç¬¦åˆäº‘åŸç”Ÿå‘å±•è¶‹åŠ¿çš„ï¼›è€Œä¸”éšç€Service Meshé€æ­¥è¢«å¤§ä¼—è®¤å¯ï¼ŒIstio + Envoyçš„ä½“ç³»å¯ä»¥åŒæ—¶è¦†ç›–Meshä¸Ingressé¢†åŸŸï¼Œå®ç°ä»¥ä¸€å¥—æŠ€æœ¯æ¶æ„è°ƒåº¦ä¸œè¥¿å‘ã€å—åŒ—å‘å…¨åŸŸæµé‡çš„ç›®æ ‡ï¼Œè¿™å¯¹ç”¨æˆ·æ¥è¯´ä¹Ÿæ˜¯éå¸¸æœ‰æ„ä¹‰çš„ã€‚ ","version":"Next","tagName":"h2"},{"title":"Higressåœ¨é˜¿é‡Œå·´å·´å†…éƒ¨ä»‹ç»â€‹","type":1,"pageTitle":"Higressæ˜¯ä»€ä¹ˆ?","url":"/zh-cn/docs/overview/what-is-higress#higressåœ¨é˜¿é‡Œå·´å·´å†…éƒ¨ä»‹ç»","content":"Higresså­µåŒ–è‡ªé˜¿é‡Œå·´å·´å†…éƒ¨2020å¹´5æœˆçš„&quot;æœ¬åœ°ç”Ÿæ´»æˆ˜å½¹&quot;ï¼Œæœ€åˆæ˜¯ä¸ºæ»¡è¶³é˜¿é‡Œå·´å·´é›†å›¢ä¸èš‚èšé›†å›¢ç›´æ¥ä½¿ç”¨RPCè¯·æ±‚äº’è®¿çš„è¯‰æ±‚è€Œæ„å»ºï¼Œè€Œä¸”å€Ÿè¯¥é¡¹ç›®ä¹ŸæˆåŠŸå­µåŒ–äº†Dubbo 3.0çš„Tripleåè®®ï¼Œå› æ­¤Higressä¹Ÿæ˜¯å†…éƒ¨ç¬¬ä¸€ä¸ªæ”¯æŒTripleåè®®çš„åº”ç”¨ï¼ŒåŒå¹´Higressä¹ŸæˆåŠŸæ”¯æŒäº†åŒ11ã€åŒ12ç­‰å¤§ä¿ƒæ´»åŠ¨ï¼Œåç»­éšç€ä¸šåŠ¡èŒƒå›´çš„æ‰©å±•ï¼Œç›®å‰Higressåœ¨å†…éƒ¨å·²ç»æ”¯æŒä¼˜é…·ã€é’‰é’‰ã€è¾¾æ‘©é™¢ã€èš‚èšç­‰ä¸šåŠ¡ï¼Œä¸šåŠ¡åœºæ™¯ä¹Ÿæ‰©å±•åˆ°äº†ä¸œè¥¿å‘ã€å—åŒ—å‘çš„å…¨åŸŸæµé‡è°ƒåº¦ã€‚  ","version":"Next","tagName":"h2"},{"title":"æ—¥å¿—è¯´æ˜","type":0,"sectionRef":"#","url":"/zh-cn/docs/ops/log","content":"æ—¥å¿—è¯´æ˜ æŸ¥çœ‹æ—¥å¿—å¯ä»¥ä½¿ç”¨ä¸‹é¢å‘½ä»¤: kubectl logs -n higress-system -l app=higress-gateway --since=5m Higress é»˜è®¤ä½¿ç”¨çš„æ—¥å¿—æ ¼å¼ä¸º JSON æ ¼å¼ï¼Œå¦‚ä¸‹æ‰€ç¤º: { &quot;authority&quot;: &quot;%REQ(:AUTHORITY)%&quot;, &quot;bytes_received&quot;: &quot;%BYTES_RECEIVED%&quot;, &quot;bytes_sent&quot;: &quot;%BYTES_SENT%&quot;, &quot;downstream_local_address&quot;: &quot;%DOWNSTREAM_LOCAL_ADDRESS%&quot;, &quot;downstream_remote_address&quot;: &quot;%DOWNSTREAM_REMOTE_ADDRESS%&quot;, &quot;duration&quot;: &quot;%DURATION%&quot;, &quot;method&quot;: &quot;%REQ(:METHOD)%&quot;, &quot;path&quot;: &quot;%REQ(X-ENVOY-ORIGINAL-PATH?:PATH)%&quot;, &quot;protocol&quot;: &quot;%PROTOCOL%&quot;, &quot;request_id&quot;: &quot;%REQ(X-REQUEST-ID)%&quot;, &quot;requested_server_name&quot;: &quot;%REQUESTED_SERVER_NAME%&quot;, &quot;response_code&quot;: &quot;%RESPONSE_CODE%&quot;, &quot;response_flags&quot;: &quot;%RESPONSE_FLAGS%&quot;, &quot;route_name&quot;: &quot;%ROUTE_NAME%&quot;, &quot;start_time&quot;: &quot;%START_TIME%&quot;, &quot;trace_id&quot;: &quot;%REQ(X-B3-TRACEID)%&quot;, &quot;upstream_cluster&quot;: &quot;%UPSTREAM_CLUSTER%&quot;, &quot;upstream_host&quot;: &quot;%UPSTREAM_HOST%&quot;, &quot;upstream_local_address&quot;: &quot;%UPSTREAM_LOCAL_ADDRESS%&quot;, &quot;upstream_service_time&quot;: &quot;%RESP(X-ENVOY-UPSTREAM-SERVICE-TIME)%&quot;, &quot;upstream_transport_failure_reason&quot;: &quot;%UPSTREAM_TRANSPORT_FAILURE_REASON%&quot;, &quot;user_agent&quot;: &quot;%REQ(USER-AGENT)%&quot;, &quot;x_forwarded_for&quot;: &quot;%REQ(X-FORWARDED-FOR)%&quot; } Value çš„é…ç½®å«ä¹‰å¯ä»¥å‚è€ƒ envoy æ—¥å¿—è¯´æ˜ å­—æ®µå\tç±»å‹\tå«ä¹‰authority\tstring\tè¯·æ±‚æŠ¥æ–‡ä¸­çš„Host Headerã€‚ bytes_received\tlong\tè¯·æ±‚çš„Bodyå¤§å°ï¼ˆä¸åŒ…å«Headerï¼‰ã€‚ bytes_sent\tlong\tå“åº”çš„Bodyå¤§å°ï¼ˆä¸åŒ…å«Headerï¼‰ã€‚ downstream_local_address\tstring\tç½‘å…³Podåœ°å€ã€‚ downstream_remote_address\tstring\tè¿æ¥åˆ°ç½‘å…³çš„Clientç«¯åœ°å€ã€‚ duration\tlong\tè¯·æ±‚æ•´ä½“è€—æ—¶ã€‚ method\tstring\tHTTPæ–¹æ³•ã€‚ path\tstring\tHTTPè¯·æ±‚ä¸­çš„Pathã€‚ protocol\tstring\tHTTPçš„åè®®ç‰ˆæœ¬ã€‚ request_id\tstring\tç½‘å…³ä¼šä¸ºæ¯æ¬¡è¯·æ±‚äº§ç”Ÿä¸€ä¸ªIDï¼Œå¹¶æ”¾åœ¨Headerçš„x-request-idä¸­ï¼Œåç«¯å¯ä»¥æ ¹æ®è¿™ä¸ªå­—æ®µè®°å½•å¹¶è¿›è¡Œæ’æŸ¥ã€‚ requested_server_name\tstring\tSSLè¿æ¥æ—¶ä½¿ç”¨çš„Server Nameã€‚ response_code\tlong\tHTTPå“åº”çš„çŠ¶æ€ç ã€‚ response_flags\tstring\tå“åº”å¤±è´¥çš„åŸå› ã€‚ route_name\tstring\tè·¯ç”±åã€‚ start_time\tstring\tè¯·æ±‚å¼€å§‹æ—¶é—´ã€‚ trace_id\tstring\tTrace IDã€‚ upstream_cluster\tstring\tä¸Šæ¸¸é›†ç¾¤ã€‚ upstream_host\tstring\tä¸Šæ¸¸IPã€‚ upstream_local_address\tstring\tæœ¬åœ°è¿æ¥ä¸Šæ¸¸çš„åœ°å€ã€‚ upstream_service_time\tlong\tæœ€åä¸€æ¬¡è°ƒç”¨ä¸Šæ¸¸æœåŠ¡çš„æ—¶é—´ã€‚ upstream_transport_failure_reason\tstring\tä¸Šæ¸¸é“¾æ¥å¤±è´¥çš„åŸå› ã€‚ user_agent\tstring\tHTTP Headerä¸­çš„UserAgentã€‚ x_forwarded_for\tstring\tHTTP Headerä¸­çš„x-forwarded-forï¼Œé€šå¸¸ç”¨æ¥è¡¨ç¤ºHTTPè¯·æ±‚ç«¯çœŸå®IPã€‚","keywords":"higress log","version":"Next"},{"title":"AI ç¼“å­˜","type":0,"sectionRef":"#","url":"/zh-cn/docs/plugins/ai/ai-cache","content":"","keywords":"higress ai","version":"Next"},{"title":"åŠŸèƒ½è¯´æ˜â€‹","type":1,"pageTitle":"AI ç¼“å­˜","url":"/zh-cn/docs/plugins/ai/ai-cache#åŠŸèƒ½è¯´æ˜","content":"AI ç¼“å­˜æ’ä»¶å®ç°äº†å°† LLM å“åº”è¿›è¡ŒæŠ½å–å¹¶ç¼“å­˜çš„åŠŸèƒ½ï¼Œå¯¹äºå‘ LLM API é«˜é¢‘è¯·æ±‚ç›¸åŒé—®é¢˜çš„åœºæ™¯å¯ä»¥æ˜¾è‘—é™ä½å“åº”æ—¶å»¶å¹¶èŠ‚çœæˆæœ¬ã€‚é»˜è®¤é…ç½®æ–¹å¼å¯ä»¥ç›´æ¥ç”¨äº openai åè®®çš„ç»“æœç¼“å­˜ï¼ŒåŒæ—¶æ”¯æŒæµå¼å’Œéæµå¼å“åº”çš„ç¼“å­˜ã€‚ éœ€è¦æ•°æ®é¢çš„proxy wasmç‰ˆæœ¬å¤§äºç­‰äº0.2.100 ç¼–è¯‘æ—¶ï¼Œéœ€è¦å¸¦ä¸Šç‰ˆæœ¬çš„tagï¼Œä¾‹å¦‚ï¼štinygo build -o main.wasm -scheduler=none -target=wasi -gc=custom -tags=&quot;custommalloc nottinygc_finalizer proxy_wasm_version_0_2_100&quot; ./ ","version":"Next","tagName":"h2"},{"title":"é…ç½®è¯´æ˜â€‹","type":1,"pageTitle":"AI ç¼“å­˜","url":"/zh-cn/docs/plugins/ai/ai-cache#é…ç½®è¯´æ˜","content":"åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°cacheKeyFrom.requestBody\tstring\té€‰å¡«\t&quot;messages.@reverse.0.content&quot;\tä»è¯·æ±‚ Body ä¸­åŸºäº GJSON PATH è¯­æ³•æå–å­—ç¬¦ä¸² cacheValueFrom.responseBody\tstring\té€‰å¡«\t&quot;choices.0.message.content&quot;\tä»å“åº” Body ä¸­åŸºäº GJSON PATH è¯­æ³•æå–å­—ç¬¦ä¸² cacheStreamValueFrom.responseBody\tstring\té€‰å¡«\t&quot;choices.0.delta.content&quot;\tä»æµå¼å“åº” Body ä¸­åŸºäº GJSON PATH è¯­æ³•æå–å­—ç¬¦ä¸² cacheKeyPrefix\tstring\té€‰å¡«\t&quot;higress-ai-cache:&quot;\tRedisç¼“å­˜Keyçš„å‰ç¼€ cacheTTL\tinteger\té€‰å¡«\t0\tç¼“å­˜çš„è¿‡æœŸæ—¶é—´ï¼Œå•ä½æ˜¯ç§’ï¼Œé»˜è®¤å€¼ä¸º0ï¼Œå³æ°¸ä¸è¿‡æœŸ redis.serviceName\tstring\tå¿…å¡«\t-\tredis æœåŠ¡åç§°ï¼Œå¸¦æœåŠ¡ç±»å‹çš„å®Œæ•´ FQDN åç§°ï¼Œä¾‹å¦‚ my-redis.dnsã€redis.my-ns.svc.cluster.local redis.servicePort\tinteger\té€‰å¡«\t6379\tredis æœåŠ¡ç«¯å£ redis.timeout\tinteger\té€‰å¡«\t1000\tè¯·æ±‚ redis çš„è¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºæ¯«ç§’ redis.username\tstring\té€‰å¡«\t-\tç™»é™† redis çš„ç”¨æˆ·å redis.password\tstring\té€‰å¡«\t-\tç™»é™† redis çš„å¯†ç  returnResponseTemplate\tstring\té€‰å¡«\t{&quot;id&quot;:&quot;from-cache&quot;,&quot;choices&quot;:[%s],&quot;model&quot;:&quot;gpt-4o&quot;,&quot;object&quot;:&quot;chat.completion&quot;,&quot;usage&quot;:{&quot;prompt_tokens&quot;:0,&quot;completion_tokens&quot;:0,&quot;total_tokens&quot;:0}}\tè¿”å› HTTP å“åº”çš„æ¨¡ç‰ˆï¼Œç”¨ %s æ ‡è®°éœ€è¦è¢« cache value æ›¿æ¢çš„éƒ¨åˆ† returnStreamResponseTemplate\tstring\té€‰å¡«\tdata:{&quot;id&quot;:&quot;from-cache&quot;,&quot;choices&quot;:[{&quot;index&quot;:0,&quot;delta&quot;:{&quot;role&quot;:&quot;assistant&quot;,&quot;content&quot;:&quot;%s&quot;},&quot;finish_reason&quot;:&quot;stop&quot;}],&quot;model&quot;:&quot;gpt-4o&quot;,&quot;object&quot;:&quot;chat.completion&quot;,&quot;usage&quot;:{&quot;prompt_tokens&quot;:0,&quot;completion_tokens&quot;:0,&quot;total_tokens&quot;:0}}\\n\\ndata:[DONE]\\n\\n\tè¿”å›æµå¼ HTTP å“åº”çš„æ¨¡ç‰ˆï¼Œç”¨ %s æ ‡è®°éœ€è¦è¢« cache value æ›¿æ¢çš„éƒ¨åˆ† ","version":"Next","tagName":"h2"},{"title":"é…ç½®ç¤ºä¾‹â€‹","type":1,"pageTitle":"AI ç¼“å­˜","url":"/zh-cn/docs/plugins/ai/ai-cache#é…ç½®ç¤ºä¾‹","content":"redis: serviceName: my-redis.dns timeout: 2000  ","version":"Next","tagName":"h2"},{"title":"AI æç¤ºè¯æ¨¡æ¿","type":0,"sectionRef":"#","url":"/zh-cn/docs/plugins/ai/ai-prompt-template","content":"","keywords":"higress ai","version":"Next"},{"title":"åŠŸèƒ½è¯´æ˜â€‹","type":1,"pageTitle":"AI æç¤ºè¯æ¨¡æ¿","url":"/zh-cn/docs/plugins/ai/ai-prompt-template#åŠŸèƒ½è¯´æ˜","content":"AI æç¤ºè¯æ¨¡ç‰ˆæ’ä»¶ç”¨äºå¿«é€Ÿæ„å»ºå›ºå®šæ ¼å¼çš„ Promptï¼Œå¯¹äºç‰¹å®šåº”ç”¨éœ€è¦é™åˆ¶é—®é¢˜æ ¼å¼çš„åœºæ™¯ä¼šæ¯”è¾ƒæœ‰å¸®åŠ©ï¼Œå¯ä»¥åœ¨ç½‘å…³ä¸Šé…ç½® Prompt æ¨¡ç‰ˆï¼Œå¹¶åŸºäºå¤§æ¨¡å‹çš„èƒ½åŠ›æ¥æä¾›å¯¹åº”çš„ APIã€‚ ","version":"Next","tagName":"h2"},{"title":"é…ç½®è¯´æ˜â€‹","type":1,"pageTitle":"AI æç¤ºè¯æ¨¡æ¿","url":"/zh-cn/docs/plugins/ai/ai-prompt-template#é…ç½®è¯´æ˜","content":"åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°templates\tarray of object\tå¿…å¡«\t-\tæ¨¡æ¿è®¾ç½® template object é…ç½®è¯´æ˜ï¼š åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°name\tstring\tå¿…å¡«\t-\tæ¨¡æ¿åç§° template.model\tstring\tå¿…å¡«\t-\tæ¨¡å‹åç§° template.messages\tarray of object\tå¿…å¡«\t-\tå¤§æ¨¡å‹è¾“å…¥ message object é…ç½®è¯´æ˜ï¼š åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°role\tstring\tå¿…å¡«\t-\tè§’è‰² content\tstring\tå¿…å¡«\t-\tæ¶ˆæ¯ é…ç½®ç¤ºä¾‹å¦‚ä¸‹ï¼š templates: - name: &quot;developer-chat&quot; template: model: gpt-3.5-turbo messages: - role: system content: &quot;You are a {{program}} expert, in {{language}} programming language.&quot; - role: user content: &quot;Write me a {{program}} program.&quot;  ä½¿ç”¨ä»¥ä¸Šé…ç½®çš„è¯·æ±‚bodyç¤ºä¾‹ï¼š { &quot;template&quot;: &quot;developer-chat&quot;, &quot;properties&quot;: { &quot;program&quot;: &quot;quick sort&quot;, &quot;language&quot;: &quot;python&quot; } }  ","version":"Next","tagName":"h2"},{"title":"AI æç¤ºè¯ä¿®é¥°","type":0,"sectionRef":"#","url":"/zh-cn/docs/plugins/ai/ai-prompt-decorator","content":"","keywords":"higress ai","version":"Next"},{"title":"åŠŸèƒ½è¯´æ˜â€‹","type":1,"pageTitle":"AI æç¤ºè¯ä¿®é¥°","url":"/zh-cn/docs/plugins/ai/ai-prompt-decorator#åŠŸèƒ½è¯´æ˜","content":"AI æç¤ºè¯ä¿®é¥°æ’ä»¶ç”¨äºå¯¹ Prompt è¿›è¡Œè°ƒæ•´ï¼Œæ”¯æŒåœ¨ç”¨æˆ·è¾“å…¥çš„ Prompt å‰åæ·»åŠ é¢å¤–çš„ Promptï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨ Higress AI ç½‘å…³æ¥ç»Ÿä¸€å¤„ç†åº”ç”¨é€»è¾‘ä¸­éœ€è¦æ“æ§ Prompt çš„åœ°æ–¹ï¼Œè®©æ‰€æœ‰ LLM API æµé‡éƒ½ç»è¿‡ Higress è¿›è¡Œå¤„ç†ï¼Œè‡ªåŠ¨å®Œæˆ Prompt çš„ç»Ÿä¸€æ“æ§ã€‚ ","version":"Next","tagName":"h2"},{"title":"é…ç½®è¯´æ˜â€‹","type":1,"pageTitle":"AI æç¤ºè¯ä¿®é¥°","url":"/zh-cn/docs/plugins/ai/ai-prompt-decorator#é…ç½®è¯´æ˜","content":"åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°decorators\tarray of object\tå¿…å¡«\t-\tä¿®é¥°è®¾ç½® template object é…ç½®è¯´æ˜ï¼š åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°name\tstring\tå¿…å¡«\t-\tä¿®é¥°åç§° decorator.prepend\tarray of message object\tå¿…å¡«\t-\tåœ¨åˆå§‹è¾“å…¥ä¹‹å‰æ’å…¥çš„è¯­å¥ decorator.append\tarray of message object\tå¿…å¡«\t-\tåœ¨åˆå§‹è¾“å…¥ä¹‹åæ’å…¥çš„è¯­å¥ message object é…ç½®è¯´æ˜ï¼š åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°role\tstring\tå¿…å¡«\t-\tè§’è‰² content\tstring\tå¿…å¡«\t-\tæ¶ˆæ¯ ç¤ºä¾‹ é…ç½®ç¤ºä¾‹å¦‚ä¸‹ï¼š decorators: - name: &quot;hangzhou-guide&quot; decorator: prepend: - role: system content: &quot;You will always respond in the Chinese language.&quot; - role: user content: &quot;Assume you are from Hangzhou.&quot; append: - role: user content: &quot;Don't introduce Hangzhou's food.&quot;  ä½¿ç”¨ä»¥ä¸Šé…ç½®å‘èµ·è¯·æ±‚ï¼š { &quot;model&quot;: &quot;gpt-3.5-turbo&quot;, &quot;messages&quot;: [ { &quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;Please introduce your home.&quot; } ] }  å“åº”å¦‚ä¸‹ï¼š { &quot;id&quot;: &quot;chatcmpl-9UYwQlEg6GwAswEZBDYXl41RU4gab&quot;, &quot;object&quot;: &quot;chat.completion&quot;, &quot;created&quot;: 1717071182, &quot;model&quot;: &quot;gpt-3.5-turbo-0125&quot;, &quot;choices&quot;: [ { &quot;index&quot;: 0, &quot;message&quot;: { &quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;æ­å·æ˜¯ä¸€ä¸ªç¾ä¸½çš„åŸå¸‚ï¼Œæœ‰ç€æ‚ ä¹…çš„å†å²å’Œå¯Œæœ‰ç‰¹è‰²çš„æ–‡åŒ–ã€‚è¿™é‡Œé£æ™¯ä¼˜ç¾ï¼Œæœ‰è¥¿æ¹–ã€é›·å³°å¡”ç­‰è‘—åæ™¯ç‚¹ï¼Œå¸å¼•ç€è®¸å¤šæ¸¸å®¢å‰æ¥è§‚å…‰ã€‚æ­å·äººæ°‘çƒ­æƒ…å¥½å®¢ï¼ŒåŸå¸‚å®é™å®‰é€¸ï¼Œæ˜¯ä¸€ä¸ªé€‚åˆå±…ä½å’Œæ—…æ¸¸çš„åœ°æ–¹ã€‚&quot; }, &quot;logprobs&quot;: null, &quot;finish_reason&quot;: &quot;stop&quot; } ], &quot;usage&quot;: { &quot;prompt_tokens&quot;: 49, &quot;completion_tokens&quot;: 117, &quot;total_tokens&quot;: 166 }, &quot;system_fingerprint&quot;: null }  ","version":"Next","tagName":"h2"},{"title":"hgctl å·¥å…·ä½¿ç”¨è¯´æ˜","type":0,"sectionRef":"#","url":"/zh-cn/docs/ops/hgctl","content":"","keywords":"Ingress","version":"Next"},{"title":"å¦‚ä½•ä¸‹è½½ hgctlâ€‹","type":1,"pageTitle":"hgctl å·¥å…·ä½¿ç”¨è¯´æ˜","url":"/zh-cn/docs/ops/hgctl#å¦‚ä½•ä¸‹è½½-hgctl","content":"é€šè¿‡ curl å‘½ä»¤ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„ hgctl åˆ°æœ¬åœ°  curl -Ls https://raw.githubusercontent.com/alibaba/higress/main/tools/hack/get-hgctl.sh | VERSION=latest bash  ","version":"Next","tagName":"h2"},{"title":"å®‰è£… Profile è¯´æ˜â€‹","type":1,"pageTitle":"hgctl å·¥å…·ä½¿ç”¨è¯´æ˜","url":"/zh-cn/docs/ops/hgctl#å®‰è£…-profile-è¯´æ˜","content":"higress ç›®å‰æ”¯æŒä¸‰ä¸ªå†…ç½®é¢„å®šä¹‰ profile åŒ…æ‹¬: local-k8s , k8s, local-dockerã€‚ local-k8s profile å®‰è£… higress åˆ°æœ¬åœ° k8s é›†ç¾¤æ¯”å¦‚ kind é›†ç¾¤ï¼Œä¸»è¦ç”¨äºå¼€å‘å’Œæµ‹è¯• higress åŠŸèƒ½ã€‚ é»˜è®¤å®‰è£… higress æ ¸å¿ƒç»„ä»¶å¤–ï¼Œè¿˜å®‰è£…åŒ…æ‹¬å¯è§‚æµ‹ç»„ä»¶ï¼ˆGrafana + Promethuesï¼‰, IstioAPI, GatewayAPIç»„ä»¶ã€‚k8s profile å®‰è£… higress åˆ° k8s é›†ç¾¤, é»˜è®¤åªå®‰è£… higress æ ¸å¿ƒç»„ä»¶ã€‚local-docker profile å®‰è£… higress åˆ°æœ¬åœ° docker ç¯å¢ƒã€‚ ","version":"Next","tagName":"h2"},{"title":"1. æŸ¥çœ‹é»˜è®¤ profile åˆ—è¡¨å’Œå¯¼å‡º profileâ€‹","type":1,"pageTitle":"hgctl å·¥å…·ä½¿ç”¨è¯´æ˜","url":"/zh-cn/docs/ops/hgctl#1-æŸ¥çœ‹é»˜è®¤-profile-åˆ—è¡¨å’Œå¯¼å‡º-profile","content":"æŸ¥çœ‹ profile åˆ—è¡¨ hgctl profile list higress configuration profiles: k8s local-docker local-k8s  å¯¼å‡º profile local-k8s profile åˆ°æœ¬åœ° local-k8s.yaml æ–‡ä»¶ hgctl profile dump local-k8s -o ./local-k8s.yaml  ","version":"Next","tagName":"h3"},{"title":"2. å†…ç½®ä¸‰ä¸ª profile é…ç½®é¡¹è¯´æ˜â€‹","type":1,"pageTitle":"hgctl å·¥å…·ä½¿ç”¨è¯´æ˜","url":"/zh-cn/docs/ops/hgctl#2-å†…ç½®ä¸‰ä¸ª-profile-é…ç½®é¡¹è¯´æ˜","content":"profile å†…å®¹åŒ…å« global, console, gateway, controller, storage, values , charts ä¸ƒå¤§é…ç½®é¡¹ã€‚ local-k8s profile local-k8s profile å…·ä½“å†…å®¹å’Œè¯´æ˜å¦‚ä¸‹ï¼š profile: local-k8s # profile åç§° global: install: local-k8s # å®‰è£…æ¨¡å¼ k8s/local-k8s/local-docker ingressClass: higress # ç”¨äºè¿‡æ»¤è¢« Higress Controller ç›‘å¬çš„ Ingress èµ„æºçš„ IngressClassã€‚ enableIstioAPI: true # è‹¥ä¸ºtrueï¼ŒHigress Controller å°†åŒæ—¶ç›‘å¬ istio èµ„æº enableGatewayAPI: true # è‹¥ä¸ºtrue æ¿€æ´» gateway api namespace: higress-system # higress å®‰è£…åˆ°çš„å‘½åç©ºé—´ console: replicas: 1 # Higress Console çš„ pod æ•°é‡ o11yEnabled: true # è‹¥ä¸º trueï¼Œå°†åŒæ—¶å®‰è£…å¯è§‚æµ‹æ€§å¥—ä»¶ï¼ˆGrafana + Promethuesï¼‰ gateway: replicas: 1 # Higress Gateway çš„ pod æ•°é‡ controller: replicas: 1 # Higress Controller çš„ pod æ•°é‡ # å…¶ä»–è‡ªå®šä¹‰çš„ helm values values: charts: higress: url: https://higress.io/helm-charts # higress helm chart repo åœ°å€ name: higress # higress helm chart åç§° version: latest # higress helm chart ç‰ˆæœ¬ standalone: url: https://higress.io/standalone/get-higress.sh # higress standalone å®‰è£…å™¨åœ°å€ name: standalone # higress standalone å®‰è£…å™¨åç§° version: latest # higress standalone å®‰è£…å™¨ç‰ˆæœ¬  k8s profile k8s profile å’Œ local-k8s profile å·®å¼‚ä¸»è¦åœ¨å¯è§‚æµ‹ç»„ä»¶ï¼ˆGrafana + Promethuesï¼‰, IstioAPI, GatewayAPI é»˜è®¤æ˜¯æ²¡æœ‰æ¿€æ´»ï¼Œå¦‚æœéœ€è¦è¿™äº›åŠŸèƒ½ï¼Œéœ€è¦åœ¨å®‰è£…æ—¶è®¾ç½®è¿™äº›å±æ€§ k8s profile å…·ä½“å†…å®¹å’Œè¯´æ˜å¦‚ä¸‹ï¼š profile: k8s # profile åç§° global: install: k8s # å®‰è£…æ¨¡å¼ k8s/local-k8s/local-docker ingressClass: higress # ç”¨äºè¿‡æ»¤è¢« Higress Controller ç›‘å¬çš„ Ingress èµ„æºçš„ IngressClassã€‚ enableIstioAPI: false # è‹¥ä¸ºtrueï¼ŒHigress Controller å°†åŒæ—¶ç›‘å¬ istio èµ„æº enableGatewayAPI: false # è‹¥ä¸ºtrue æ¿€æ´» gateway api namespace: higress-system # higress å®‰è£…åˆ°çš„å‘½åç©ºé—´ console: replicas: 1 # Higress Console çš„ pod æ•°é‡ o11yEnabled: false # è‹¥ä¸º trueï¼Œå°†åŒæ—¶å®‰è£…å¯è§‚æµ‹æ€§å¥—ä»¶ï¼ˆGrafana + Promethuesï¼‰ gateway: replicas: 2 # Higress Gateway çš„ pod æ•°é‡ controller: replicas: 1 # Higress Controller çš„ pod æ•°é‡ # å…¶ä»–è‡ªå®šä¹‰çš„ helm values values: charts: higress: url: https://higress.io/helm-charts # higress helm chart repo åœ°å€ name: higress # higress helm chart åç§° version: latest # higress helm chart ç‰ˆæœ¬ standalone: url: https://higress.io/standalone/get-higress.sh # higress standalone å®‰è£…å™¨åœ°å€ name: standalone # higress standalone å®‰è£…å™¨åç§° version: latest # higress standalone å®‰è£…å™¨ç‰ˆæœ¬  local-docker profile local-docker profile å…·ä½“å†…å®¹å’Œè¯´æ˜å¦‚ä¸‹ï¼š profile: local-docker # profile åç§° global: install: local-docker # å®‰è£…æ¨¡å¼ k8s/local-k8s/local-docker console: port: 8080 # console ç›‘å¬ç«¯å£ gateway: httpPort: 80 # gateway ç›‘å¬ http ç«¯å£ httpsPort: 443 # gateway ç›‘å¬ https ç«¯å£ metricsPort: 15020 # gateway æŒ‡æ ‡è¾“å‡ºç›‘å¬ç«¯å£ controller: # åç«¯å­˜å‚¨ç³»ç»Ÿè®¾ç½®ï¼Œç°åœ¨æ”¯æŒæ–‡ä»¶ç³»ç»Ÿå’Œ nacos storage: url: file://${INSTALLPACKAGEPATH}/conf # é…ç½®æœåŠ¡çš„ URLã€‚è‹¥ä½¿ç”¨ç‹¬ç«‹éƒ¨ç½²çš„ Nacos æœåŠ¡ï¼ˆç‰ˆæœ¬ä¸ä½äº 2.0.0ï¼‰ï¼ŒURL æ ¼å¼ä¸ºï¼šnacos://192.168.0.1:8848 - è‹¥åœ¨æœ¬åœ°ç£ç›˜ä¸Šä¿å­˜é…ç½®ï¼ŒURL æ ¼å¼ä¸ºï¼šfile://opt/higress/conf ns: higress-system # ç”¨äºä¿å­˜ Higress é…ç½®çš„ Nacos å‘½åç©ºé—´ ID username: # ç”¨äºè®¿é—® Nacos çš„ç”¨æˆ·åã€‚ä»…ç”¨äº Nacos å¯åŠ¨äº†è®¤è¯çš„æƒ…å†µä¸‹ password: # ç”¨äºè®¿é—® Nacos çš„ç”¨æˆ·å¯†ç ã€‚ä»…ç”¨äº Nacos å¯åŠ¨äº†è®¤è¯çš„æƒ…å†µä¸‹ dataEncKey: # ç”¨äºåŠ å¯†æ•æ„Ÿé…ç½®æ•°æ®çš„å¯†é’¥ã€‚é•¿åº¦å¿…é¡»ä¸º 32 ä¸ªå­—ç¬¦ã€‚è‹¥æœªè®¾ç½®ï¼ŒHigress å°†è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªéšæœºçš„å¯†é’¥ã€‚è‹¥éœ€é›†ç¾¤éƒ¨ç½²ï¼Œæ­¤é¡¹å¿…é¡»è®¾ç½® charts: higress: url: https://higress.io/helm-charts # higress helm chart repo åœ°å€ name: higress # higress helm chart åç§° version: latest # higress helm chart ç‰ˆæœ¬ standalone: url: https://higress.io/standalone/get-higress.sh # higress standalone å®‰è£…å™¨åœ°å€ name: standalone # higress standalone å®‰è£…å™¨åç§° version: latest # higress standalone å®‰è£…å™¨ç‰ˆæœ¬  é…ç½®æœåŠ¡çš„ URL é»˜è®¤ file://${INSTALLPACKAGEPATH}/conf æ˜¯ä¿å­˜åœ¨æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸‹ï¼Œ å…¶ä¸­ ${INSTALLPACKAGEPATH} æ˜¯å½“å‰å®‰è£…ä¸‹ higress-standaloneç›®å½•ä¸‹åˆ›å»º conf ç›®å½• ","version":"Next","tagName":"h3"},{"title":"å®‰è£…å‘½ä»¤ï¼š hgctl installâ€‹","type":1,"pageTitle":"hgctl å·¥å…·ä½¿ç”¨è¯´æ˜","url":"/zh-cn/docs/ops/hgctl#å®‰è£…å‘½ä»¤-hgctl-install","content":"hgctl install å®‰è£…å‘½ä»¤å…·ä½“å‚æ•°å¦‚ä¸‹ï¼š hgctl install --help The install command generates an higress install manifest and applies it to a cluster. Usage: hgctl install [flags] Examples: # Apply a default higress installation hgctl install # Install higress on local kubernetes cluster hgctl install --set profile=local-k8s # Install higress on local docker environment with specific gateway port hgctl install --set profile=local-docker --set gateway.httpPort=80 --set gateway.httpsPort=443 # To override profile setting hgctl install --set profile=local-k8s --set global.enableIstioAPI=true --set gateway.replicas=2&quot; # To override helm setting hgctl install --set profile=local-k8s --set values.global.proxy.resources.requsts.cpu=500m&quot; Flags: --context string The name of the kubeconfig context to use. -f, --filename strings Path to file containing helm custom values -h, --help help for install --kubeconfig string Path to the kubeconfig file to use for CLI requests. -d, --manifests string Specify a path to a directory of profiles (e.g. ~/Downloads/higress/manifests). -s, --set stringArray Override an higress profile value, e.g. override profile values (--set gateway.replicas=2), or override helm values (--set values.global.proxy.resources.requsts.cpu=500m).  å®‰è£…å‚æ•°è¯´æ˜ï¼š hgctl install æ ¸å¿ƒå‚æ•°å°±æ˜¯ä¸¤ä¸ª -s (--set) å’Œ -f (--filename) ã€‚ --set å‚æ•°æ˜¯è®¾ç½® profile é…ç½®é¡¹çš„å€¼ï¼Œ -f ä¼ å…¥ helm è‡ªå®šä¹‰ values å€¼çš„ yaml æ–‡ä»¶åœ°å€ã€‚ é€šè¿‡ -s profile=profile å†…ç½® profile åç§°æˆ–è€… profile yaml æ–‡ä»¶åœ°å€æ¥æŒ‡å®šå®‰è£… profile æ¥æºã€‚ å®‰è£…æˆåŠŸåï¼Œä¼šåœ¨å½“å‰ç”¨æˆ· $HOME ç›®å½•ä¸‹å†™å…¥å½“å‰å®‰è£…çš„profileé…ç½® ~/.hgctl/profiles/install.yaml ï¼Œ å‡çº§æ—¶æ ¹æ®è¿™ä¸ª profile æ¥å‡çº§ã€‚ï¼ˆåç»­ç‰ˆæœ¬ä¼šæœ‰å˜åŒ–ï¼‰ ","version":"Next","tagName":"h2"},{"title":"å®‰è£…æ ·ä¾‹è¯´æ˜â€‹","type":1,"pageTitle":"hgctl å·¥å…·ä½¿ç”¨è¯´æ˜","url":"/zh-cn/docs/ops/hgctl#å®‰è£…æ ·ä¾‹è¯´æ˜","content":"é»˜è®¤å®‰è£… hgctl install Please select higress install configration profile: 1.Install higress to local kubernetes cluster like kind etc. 2.Install higress to kubernetes cluster 3.Install higress to local docker environment Please input 1, 2 or 3 to select, input your selection:  é»˜è®¤å®‰è£…æ²¡æœ‰æŒ‡å®š profile, ä¼šæç¤ºé€‰æ‹©å®‰è£… profileã€‚ æŒ‡å®š k8s profile å®‰è£… ï¼Œ åŒæ—¶æ¿€æ´» IstioAPIï¼Œ GatewayAPI å’Œ helm values è‡ªå®šä¹‰ console å’Œ gateway resources é…ç½®ã€‚ è‡ªå®šä¹‰ helm values.yaml å¦‚ä¸‹ï¼š global: istioNamespace: istio-system higress-console: resources: requests: cpu: 500m memory: 512Mi higress-core: gateway: resources: requests: cpu: 2000m memory: 2048Mi limits: cpu: 2000m memory: 2048Mi  helm è‡ªå®šä¹‰é…ç½®é¡¹å‚è€ƒæ–‡ä»¶å¦‚ä¸‹ï¼š global å’Œ higress-core é…ç½®é¡¹: https://github.com/alibaba/higress/blob/main/helm/core/values.yamlglobal å’Œ higress-console é…ç½®é¡¹: https://github.com/higress-group/higress-console/blob/main/helm/values.yaml å®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š hgctl install --set profile=k8s --set global.enableIstioAPI=true --set global.enableGatewayAPI=true --set gateway.replicas=1 -f ./values.yaml  æœ¬åœ° docker ç¯å¢ƒä¸‹å®‰è£…ï¼ŒåŒæ—¶æŒ‡å®š gateway http å’Œ https ç«¯å£  hgctl install --set profile=local-docker --set gateway.httpPort=80 --set gateway.httpsPort=443  é»˜è®¤å®‰è£…åç«¯å­˜å‚¨é‡‡ç”¨æ–‡ä»¶ç³»ç»Ÿä¿å­˜é…ç½®ï¼Œ å¦‚æœåç«¯å­˜å‚¨é‡‡ç”¨ nacos ä¿å­˜ï¼Œ å®‰è£…æ—¶ä¼ å…¥ --set storage.url=nacos://192.168.0.1:8848ï¼Œ è¿™é‡Œè®¾ç½®å…·ä½“ nacos æœåŠ¡åœ°å€ã€‚ å®‰è£…å®Œæˆåï¼Œåœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»º higress-standalone ç›®å½•ï¼Œå…·ä½“ç»“æ„å¦‚ä¸‹ï¼š â”œâ”€â”€ hgctl â”œâ”€â”€ higress-standalone â”‚ â”œâ”€â”€ conf â”‚ â”‚ â”œâ”€â”€ configmaps â”‚ â”‚ â”œâ”€â”€ endpoints â”‚ â”‚ â”œâ”€â”€ http2rpcs â”‚ â”‚ â”œâ”€â”€ ingressclasses â”‚ â”‚ â”œâ”€â”€ ingresses â”‚ â”‚ â”œâ”€â”€ mcpbridges â”‚ â”‚ â”œâ”€â”€ mutatingwebhookconfigurations â”‚ â”‚ â”œâ”€â”€ namespaces â”‚ â”‚ â”œâ”€â”€ nodes â”‚ â”‚ â”œâ”€â”€ pods â”‚ â”‚ â”œâ”€â”€ secrets â”‚ â”‚ â”œâ”€â”€ services â”‚ â”‚ â”œâ”€â”€ validatingwebhookconfigurations â”‚ â”‚ â””â”€â”€ wasmplugins â”‚ â”œâ”€â”€ get-higress.sh â”‚ â””â”€â”€ higress â”‚ â”œâ”€â”€ CODEOWNERS â”‚ â”œâ”€â”€ LICENSE â”‚ â”œâ”€â”€ README.md â”‚ â”œâ”€â”€ VERSION â”‚ â”œâ”€â”€ bin â”‚ â””â”€â”€ compose  ç›®å½•å’Œæ–‡ä»¶å…·ä½“å†…å®¹å¦‚ä¸‹ï¼š higress-standalone/conf: é…ç½®åç«¯å­˜å‚¨æ–‡ä»¶ç›®å½•higress-standalone/higress: higress å®‰è£…æ–‡ä»¶ç›®å½•higress-standalone/higress/composeï¼š higress docker compose é…ç½®ç›®å½•higress-standalone/higress/binï¼š ç®¡ç† higress è„šæœ¬ç›®å½•higress-standalone/higress/compose/.env: higress å®‰è£…åç”Ÿæˆé…ç½®æ–‡ä»¶ å®‰è£…æˆåŠŸåï¼Œä¼šåœ¨å½“å‰ç”¨æˆ· $HOME ç›®å½•ä¸‹å†™å…¥å½“å‰å®‰è£…çš„ profile é…ç½®: ~/.hgctl/profiles/install.yamlï¼Œ å‡çº§æ—¶æ ¹æ®è¿™ä¸ª profile æ¥å‡çº§ã€‚ï¼ˆåç»­ç‰ˆæœ¬ä¼šæœ‰å˜åŒ–ï¼‰ ","version":"Next","tagName":"h3"},{"title":"å‡çº§å‘½ä»¤ï¼š hgctl upgradeâ€‹","type":1,"pageTitle":"hgctl å·¥å…·ä½¿ç”¨è¯´æ˜","url":"/zh-cn/docs/ops/hgctl#å‡çº§å‘½ä»¤-hgctl-upgrade","content":"å‡çº§å‘½ä»¤å‚æ•°å¦‚ä¸‹ï¼š hgctl upgrade --help The upgrade command is an alias for the install command that performs additional upgrade-related checks. Usage: hgctl upgrade [flags] Flags: --context string The name of the kubeconfig context to use. -f, --filename strings Path to file containing helm custom values -h, --help help for upgrade --kubeconfig string Path to the kubeconfig file to use for CLI requests. -d, --manifests string Specify a path to a directory of profiles (e.g. ~/Downloads/higress/manifests). -s, --set stringArray Override an higress profile value, e.g. to choose a profile (--set profile=local-k8s), or override profile values (--set gateway.replicas=2), or override helm values (--set values.global.proxy.resources.requsts.cpu=500m).  å‡çº§å‘½ä»¤å‚æ•°å’Œå®‰è£…å‚æ•°æ—¶ä¸€è‡´çš„ï¼Œæ ¸å¿ƒå‚æ•°å°±æ˜¯ä¸¤ä¸ª -s (--set) å’Œ -f (--filename) ã€‚ ä¸»è¦å·®åˆ«æ˜¯ä¸èƒ½è®¾ç½®profile, å‡çº§ profile æ˜¯æ¥æºäºå®‰è£…æ—¶ä¿å­˜ï¼š ~/.hgctl/profiles/install.yaml ã€‚ ","version":"Next","tagName":"h2"},{"title":"Dashboard å‘½ä»¤: hgctl dashbaordâ€‹","type":1,"pageTitle":"hgctl å·¥å…·ä½¿ç”¨è¯´æ˜","url":"/zh-cn/docs/ops/hgctl#dashboard-å‘½ä»¤--hgctl-dashbaord","content":"å¯ä»¥é€šè¿‡ hgctl dashboard å‘½ä»¤æ‰“å¼€ Higress Console ç®¡ç†ç•Œé¢ï¼Œ Higress Controller Debugç•Œé¢ï¼Œ Envoy ç®¡ç†ç•Œé¢ï¼ŒGrafana å’Œ Prometheus ç®¡ç†ç•Œé¢ hgctl dashboard å‘½ä»¤å‚æ•°å¦‚ä¸‹ï¼š hgctl dashboard --help Usage: hgctl dashboard [flags] hgctl dashboard [command] Aliases: dashboard, dash, d Available Commands: console Open Console web UI controller Open Controller debug web UI envoy Open Envoy admin web UI grafana Open Grafana web UI prometheus Open Prometheus web UI Flags: --browser When --browser is supplied as false, hgctl dashboard will not open the browser. Default is true which means hgctl dashboard will always open a browser to view the dashboard. (default true) --context string The name of the kubeconfig context to use. -h, --help help for dashboard --kubeconfig string Path to the kubeconfig file to use for CLI requests. -n, --namespace string Namespace where the addon is running, if not specified, higress-system would be used (default &quot;higress-system&quot;) -p, --port int Local port to listen to Use &quot;hgctl dashboard [command] --help&quot; for more information about a command.  ","version":"Next","tagName":"h2"},{"title":"å¸è½½å‘½ä»¤: hgctl uninstallâ€‹","type":1,"pageTitle":"hgctl å·¥å…·ä½¿ç”¨è¯´æ˜","url":"/zh-cn/docs/ops/hgctl#å¸è½½å‘½ä»¤-hgctl-uninstall","content":"hgctl uninstall å‘½ä»¤å‚æ•°å¦‚ä¸‹ï¼š hgctl uninstall --help The uninstall command uninstalls higress from a cluster or local environment Usage: hgctl uninstall [flags] Examples: # Uninstall higress hgctl uninstal # Uninstall higress, istioAPI and GatewayAPI from a cluster hgctl uninstall --purge-resources Flags: --context string The name of the kubeconfig context to use. -h, --help help for uninstall --kubeconfig string Path to the kubeconfig file to use for CLI requests. --purge-resources Delete all of IstioAPI,GatewayAPI resources  hgctl uninstall å¸è½½æ—¶ä¸ä¼šè‡ªåŠ¨å¸è½½ IstioAPI, GatewayAPIç»„ä»¶ï¼Œ å¦‚æœè¦å¸è½½ IstioAPI, GatewayAPIç»„ä»¶ï¼Œå¸è½½æ—¶åŠ ä¸Š --purge-resourcesã€‚ ","version":"Next","tagName":"h2"},{"title":"æ’ä»¶å‘½ä»¤ï¼š hgctl plugin å‘½ä»¤â€‹","type":1,"pageTitle":"hgctl å·¥å…·ä½¿ç”¨è¯´æ˜","url":"/zh-cn/docs/ops/hgctl#æ’ä»¶å‘½ä»¤-hgctl-plugin-å‘½ä»¤","content":"TBD ","version":"Next","tagName":"h2"},{"title":"AI æ£€ç´¢å¢å¼ºç”Ÿæˆ","type":0,"sectionRef":"#","url":"/zh-cn/docs/plugins/ai/ai-rag","content":"","keywords":"higress ai rag","version":"Next"},{"title":"åŠŸèƒ½è¯´æ˜â€‹","type":1,"pageTitle":"AI æ£€ç´¢å¢å¼ºç”Ÿæˆ","url":"/zh-cn/docs/plugins/ai/ai-rag#åŠŸèƒ½è¯´æ˜","content":"åŸºäº AI æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰æ’ä»¶ï¼Œå¯ä»¥é€šè¿‡å¯¹æ¥é˜¿é‡Œäº‘å‘é‡æ£€ç´¢æœåŠ¡å®ç° LLM-RAG åº”ç”¨çš„å¼€å‘ï¼Œæµç¨‹å¦‚å›¾æ‰€ç¤ºï¼š  ","version":"Next","tagName":"h2"},{"title":"é…ç½®è¯´æ˜â€‹","type":1,"pageTitle":"AI æ£€ç´¢å¢å¼ºç”Ÿæˆ","url":"/zh-cn/docs/plugins/ai/ai-rag#é…ç½®è¯´æ˜","content":"åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°dashscope.apiKey\tstring\tå¿…å¡«\t-\tç”¨äºåœ¨è®¿é—®é€šä¹‰åƒé—®æœåŠ¡æ—¶è¿›è¡Œè®¤è¯çš„ä»¤ç‰Œã€‚ dashscope.serviceName\tstring\tå¿…å¡«\t-\té€šä¹‰åƒé—®æœåŠ¡å dashscope.servicePort\tint\tå¿…å¡«\t-\té€šä¹‰åƒé—®æœåŠ¡ç«¯å£ dashscope.domain\tstring\tå¿…å¡«\t-\tè®¿é—®é€šä¹‰åƒé—®æœåŠ¡æ—¶åŸŸå dashvector.apiKey\tstring\tå¿…å¡«\t-\tç”¨äºåœ¨è®¿é—®é˜¿é‡Œäº‘å‘é‡æ£€ç´¢æœåŠ¡æ—¶è¿›è¡Œè®¤è¯çš„ä»¤ç‰Œã€‚ dashvector.serviceName\tstring\tå¿…å¡«\t-\té˜¿é‡Œäº‘å‘é‡æ£€ç´¢æœåŠ¡å dashvector.servicePort\tint\tå¿…å¡«\t-\té˜¿é‡Œäº‘å‘é‡æ£€ç´¢æœåŠ¡ç«¯å£ dashvector.domain\tstring\tå¿…å¡«\t-\tè®¿é—®é˜¿é‡Œäº‘å‘é‡æ£€ç´¢æœåŠ¡æ—¶åŸŸå ç¤ºä¾‹ dashscope: apiKey: xxxxxxxxxxxxxxx serviceName: dashscope servicePort: 443 domain: dashscope.aliyuncs.com dashvector: apiKey: xxxxxxxxxxxxxxxxxxxx serviceName: dashvector servicePort: 443 domain: vrs-cn-xxxxxxxxxxxxxxx.dashvector.cn-hangzhou.aliyuncs.com collection: xxxxxxxxxxxxxxx  CEC-Corpus æ•°æ®é›†åŒ…å« 332 ç¯‡çªå‘äº‹ä»¶çš„æ–°é—»æŠ¥é“çš„è¯­æ–™å’Œæ ‡æ³¨æ•°æ®ï¼Œæå–å…¶åŸå§‹çš„æ–°é—»ç¨¿æ–‡æœ¬ï¼Œå°†å…¶å‘é‡åŒ–åæ·»åŠ åˆ°é˜¿é‡Œäº‘å‘é‡æ£€ç´¢æœåŠ¡ã€‚æ–‡æœ¬å‘é‡åŒ–çš„æ•™ç¨‹å¯ä»¥å‚è€ƒã€ŠåŸºäºå‘é‡æ£€ç´¢æœåŠ¡ä¸çµç§¯å®ç°è¯­ä¹‰æœç´¢ã€‹ã€‚ ä»¥ä¸‹ä¸ºä½¿ç”¨ RAG è¿›è¡Œå¢å¼ºçš„ä¾‹å­ï¼ŒåŸå§‹è¯·æ±‚ä¸ºï¼š æµ·å—è¿½å°¾äº‹æ•…ï¼Œå‘ç”Ÿåœ¨å“ªé‡Œï¼ŸåŸå› æ˜¯ä»€ä¹ˆï¼Ÿäººå‘˜ä¼¤äº¡æƒ…å†µå¦‚ä½•ï¼Ÿ  æœªç»è¿‡ RAG æ’ä»¶å¤„ç† LLM è¿”å›çš„ç»“æœä¸ºï¼š æŠ±æ­‰ï¼Œä½œä¸ºAIæ¨¡å‹ï¼Œæˆ‘æ— æ³•å®æ—¶è·å–å’Œæ›´æ–°æ–°é—»äº‹ä»¶çš„å…·ä½“ä¿¡æ¯ï¼ŒåŒ…æ‹¬åœ°ç‚¹ã€åŸå› ã€äººå‘˜ä¼¤äº¡ç­‰ç»†èŠ‚ã€‚å¯¹äºæ­¤ç±»å…·ä½“äº‹ä»¶ï¼Œå»ºè®®æ‚¨æŸ¥é˜…æœ€æ–°çš„æ–°é—»æŠ¥é“æˆ–å®˜æ–¹é€šæŠ¥ä»¥è·å–å‡†ç¡®ä¿¡æ¯ã€‚æ‚¨å¯ä»¥è®¿é—®ä¸»æµåª’ä½“ç½‘ç«™ã€ä½¿ç”¨æ–°é—»åº”ç”¨æˆ–è€…å…³æ³¨ç›¸å…³æ”¿åºœéƒ¨é—¨çš„å…¬å‘Šæ¥è·å–è¿™ç±»åŠ¨æ€èµ„è®¯ã€‚  ç»è¿‡ RAG æ’ä»¶å¤„ç†å LLM è¿”å›çš„ç»“æœä¸ºï¼š æµ·å—è¿½å°¾äº‹æ•…å‘ç”Ÿåœ¨æµ·æ–‡é«˜é€Ÿå…¬è·¯æ–‡æ˜Œè‡³æµ·å£æ–¹å‘37å…¬é‡Œå¤„ã€‚å…³äºäº‹æ•…çš„å…·ä½“åŸå› ï¼Œäº¤è­¦éƒ¨é—¨å½“æ—¶ä»åœ¨è¿›ä¸€æ­¥è°ƒæŸ¥ä¸­ï¼Œæ‰€ä»¥æ ¹æ®æä¾›çš„ä¿¡æ¯æ— æ³•ç¡®å®šäº‹æ•…çš„ç¡®åˆ‡åŸå› ã€‚äººå‘˜ä¼¤äº¡æƒ…å†µæ˜¯1äººæ­»äº¡ï¼ˆå¸æœºå½“åœºæ­»äº¡ï¼‰ï¼Œå¦æœ‰ 8 äººå—ä¼¤ï¼ˆåŒ…æ‹¬ 2 åå„¿ç«¥å’Œ 6 åæˆäººï¼‰ï¼Œæ‰€æœ‰å—ä¼¤äººå‘˜éƒ½è¢«è§£æ•‘å¹¶é€å¾€åŒ»é™¢è¿›è¡Œæ²»ç–—ã€‚  ","version":"Next","tagName":"h2"},{"title":"AI å†…å®¹å®‰å…¨","type":0,"sectionRef":"#","url":"/zh-cn/docs/plugins/ai/ai-security-guard","content":"","keywords":"higress ai","version":"Next"},{"title":"åŠŸèƒ½è¯´æ˜â€‹","type":1,"pageTitle":"AI å†…å®¹å®‰å…¨","url":"/zh-cn/docs/plugins/ai/ai-security-guard#åŠŸèƒ½è¯´æ˜","content":"å¤§æ¨¡å‹é€šå¸¸æ˜¯é€šè¿‡å­¦ä¹ äº’è”ç½‘ä¸Šå¹¿æ³›å¯ç”¨çš„æ•°æ®æ¥è®­ç»ƒçš„ï¼Œå®ƒä»¬æœ‰å¯èƒ½åœ¨è¿‡ç¨‹ä¸­å­¦ä¹ åˆ°å¹¶å¤ç°æœ‰å®³å†…å®¹æˆ–ä¸è‰¯è¨€è®ºï¼Œå› æ­¤ï¼Œå½“å¤§æ¨¡å‹æœªç»è¿‡é€‚å½“çš„è¿‡æ»¤å’Œç›‘æ§å°±ç”Ÿæˆå›åº”æ—¶ï¼Œå®ƒä»¬å¯èƒ½äº§ç”ŸåŒ…å«æœ‰å®³è¯­è¨€ã€è¯¯å¯¼ä¿¡æ¯ã€æ­§è§†æ€§è¨€è®ºç”šè‡³æ˜¯è¿åæ³•å¾‹æ³•è§„çš„å†…å®¹ã€‚æ­£æ˜¯å› ä¸ºè¿™ç§æ½œåœ¨çš„é£é™©ï¼Œå¤§æ¨¡å‹ä¸­çš„å†…å®¹å®‰å…¨å°±æ˜¾å¾—å¼‚å¸¸é‡è¦ã€‚ åœ¨ Higress ä¸­ï¼Œé€šè¿‡ç®€å•çš„é…ç½®å³å¯å¯¹æ¥é˜¿é‡Œäº‘å†…å®¹å®‰å…¨ï¼Œä¸ºå¤§æ¨¡å‹é—®ç­”çš„åˆè§„æ€§ä¿é©¾æŠ¤èˆªï¼Œå†…å®¹å®‰å…¨æä¾›äº†å¤šç§æ£€æµ‹èŒƒå›´ï¼Œç”¨æˆ·å¯ä»¥åœ¨æ§åˆ¶å°è¿›è¡Œé…ç½®ï¼š  ","version":"Next","tagName":"h2"},{"title":"é…ç½®è¯´æ˜â€‹","type":1,"pageTitle":"AI å†…å®¹å®‰å…¨","url":"/zh-cn/docs/plugins/ai/ai-security-guard#é…ç½®è¯´æ˜","content":"Name\tType\tRequirement\tDefault\tDescriptionserviceSource\tstring\trequried\t-\tæœåŠ¡æ¥æºï¼Œå¡«dns serviceName\tstring\trequried\t-\tæœåŠ¡å servicePort\tstring\trequried\t-\tæœåŠ¡ç«¯å£ domain\tstring\trequried\t-\té˜¿é‡Œäº‘å†…å®¹å®‰å…¨endpoint ak\tstring\trequried\t-\té˜¿é‡Œäº‘AK sk\tstring\trequried\t-\té˜¿é‡Œäº‘SK ","version":"Next","tagName":"h2"},{"title":"é…ç½®ç¤ºä¾‹â€‹","type":1,"pageTitle":"AI å†…å®¹å®‰å…¨","url":"/zh-cn/docs/plugins/ai/ai-security-guard#é…ç½®ç¤ºä¾‹","content":"serviceSource: &quot;dns&quot; serviceName: &quot;safecheck&quot; servicePort: 443 domain: &quot;green-cip.cn-shanghai.aliyuncs.com&quot; ak: &quot;XXXXXXXXX&quot; sk: &quot;XXXXXXXXXXXXXXX&quot;  é…ç½®åï¼Œå¦‚æœè¯·æ±‚/å“åº”ä¸­åŒ…å«äº†éæ³•å†…å®¹ï¼Œè¢«å†…å®¹å®‰å…¨æ‹¦æˆªåï¼Œç½‘å…³ä¼šè¿”å›å†…å®¹å®‰å…¨å»ºè®®çš„å›ç­”ï¼š  ","version":"Next","tagName":"h2"},{"title":"AI ç»Ÿè®¡","type":0,"sectionRef":"#","url":"/zh-cn/docs/plugins/ai/ai-statistics","content":"","keywords":"higress ai","version":"Next"},{"title":"åŠŸèƒ½è¯´æ˜â€‹","type":1,"pageTitle":"AI ç»Ÿè®¡","url":"/zh-cn/docs/plugins/ai/ai-statistics#åŠŸèƒ½è¯´æ˜","content":"ç›¸æ¯”äºä¼ ç»Ÿå¾®æœåŠ¡ï¼ŒLLM åº”ç”¨ä¸­ä¸»è¦é€šè¿‡ token æ¥è¡¡é‡æµé‡å¤§å°ï¼Œé’ˆå¯¹æ­¤ç‰¹ç‚¹ï¼ŒAI ç»Ÿè®¡æ’ä»¶æä¾›äº†è·¯ç”±çº§ã€æœåŠ¡çº§ã€æ¨¡å‹çº§çš„ token ç”¨é‡è§‚æµ‹èƒ½åŠ›ï¼ŒåŒ…æ‹¬æ—¥å¿—ã€ç›‘æ§ä»¥åŠå‘Šè­¦ã€‚ AI ç»Ÿè®¡æ’ä»¶éœ€è¦å¯¹æ¥ ai-proxy æ’ä»¶ï¼Œå¦‚æœä¸æ¥ ai-proxy æ’ä»¶çš„è¯ï¼Œåˆ™åªæ”¯æŒ openai åè®®ã€‚ ","version":"Next","tagName":"h2"},{"title":"é…ç½®è¯´æ˜â€‹","type":1,"pageTitle":"AI ç»Ÿè®¡","url":"/zh-cn/docs/plugins/ai/ai-statistics#é…ç½®è¯´æ˜","content":"åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°enable\tbool\tå¿…å¡«\t-\tæ˜¯å¦å¼€å¯aiç»Ÿè®¡åŠŸèƒ½ å¼€å¯å metrics ç¤ºä¾‹ï¼š route_upstream_model_input_token{ai_route=&quot;openai&quot;,ai_cluster=&quot;qwen&quot;,ai_model=&quot;qwen-max&quot;} 21 route_upstream_model_output_token{ai_route=&quot;openai&quot;,ai_cluster=&quot;qwen&quot;,ai_model=&quot;qwen-max&quot;} 17  æ—¥å¿—ç¤ºä¾‹ï¼š { &quot;model&quot;: &quot;qwen-max&quot;, &quot;input_token&quot;: &quot;21&quot;, &quot;output_token&quot;: &quot;17&quot;, &quot;authority&quot;: &quot;dashscope.aliyuncs.com&quot;, &quot;bytes_received&quot;: &quot;336&quot;, &quot;bytes_sent&quot;: &quot;1675&quot;, &quot;duration&quot;: &quot;1590&quot;, &quot;istio_policy_status&quot;: &quot;-&quot;, &quot;method&quot;: &quot;POST&quot;, &quot;path&quot;: &quot;/v1/chat/completions&quot;, &quot;protocol&quot;: &quot;HTTP/1.1&quot;, &quot;request_id&quot;: &quot;5895f5a9-e4e3-425b-98db-6c6a926195b7&quot;, &quot;requested_server_name&quot;: &quot;-&quot;, &quot;response_code&quot;: &quot;200&quot;, &quot;response_flags&quot;: &quot;-&quot;, &quot;route_name&quot;: &quot;openai&quot;, &quot;start_time&quot;: &quot;2024-06-18T09:37:14.078Z&quot;, &quot;trace_id&quot;: &quot;-&quot;, &quot;upstream_cluster&quot;: &quot;qwen&quot;, &quot;upstream_service_time&quot;: &quot;496&quot;, &quot;upstream_transport_failure_reason&quot;: &quot;-&quot;, &quot;user_agent&quot;: &quot;PostmanRuntime/7.37.3&quot;, &quot;x_forwarded_for&quot;: &quot;-&quot; }  ","version":"Next","tagName":"h2"},{"title":"AI è¯·æ±‚/å“åº”è½¬æ¢","type":0,"sectionRef":"#","url":"/zh-cn/docs/plugins/ai/ai-transformer","content":"","keywords":"higress ai transformer","version":"Next"},{"title":"åŠŸèƒ½è¯´æ˜â€‹","type":1,"pageTitle":"AI è¯·æ±‚/å“åº”è½¬æ¢","url":"/zh-cn/docs/plugins/ai/ai-transformer#åŠŸèƒ½è¯´æ˜","content":"é€šè¿‡é…ç½® AI è¯·æ±‚/å“åº”è½¬æ¢æ’ä»¶ï¼Œç”¨æˆ·å¯ä»¥ä¸ç”¨å†™ä»£ç ï¼Œç›´æ¥ä½¿ç”¨è‡ªç„¶è¯­è¨€çš„æ–¹å¼å¯¹ç½‘å…³çš„è¯·æ±‚/å“åº”è¿›è¡Œä¿®æ”¹ã€‚ä¾‹å¦‚æµ‹è¯•äººå‘˜åœ¨æµ‹è¯• API æ—¶ï¼Œå¯¹å¾…æµ‹ API è¿›è¡Œæ’ä»¶é…ç½®ï¼Œå°†åŸå§‹è¯·æ±‚/å“åº”ä½œä¸º exampleï¼Œæ¥ç”Ÿæˆè¿›è¡Œè¾¹ç•Œæ¡ä»¶æµ‹è¯•çš„è¯·æ±‚/å“åº”ã€‚å¤§æ¨¡å‹å¾ˆå¤šæ—¶å€™ä¼šæ¯”äººè€ƒè™‘çš„æ›´å…¨é¢ï¼Œæ›´å®¹æ˜“æµ‹è¯•å‡ºä¸€äº›è¾¹ç•Œ caseã€‚ ","version":"Next","tagName":"h2"},{"title":"é…ç½®è¯´æ˜â€‹","type":1,"pageTitle":"AI è¯·æ±‚/å“åº”è½¬æ¢","url":"/zh-cn/docs/plugins/ai/ai-transformer#é…ç½®è¯´æ˜","content":"åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°request.enable\tbool\tå¿…å¡«\t-\tæ˜¯å¦åœ¨requesté˜¶æ®µå¼€å¯è½¬æ¢ request.prompt\tstring\tå¿…å¡«\t-\trequesté˜¶æ®µè½¬æ¢ä½¿ç”¨çš„prompt response.enable\tstring\tå¿…å¡«\t-\tæ˜¯å¦åœ¨responseé˜¶æ®µå¼€å¯è½¬æ¢ response.prompt\tstring\tå¿…å¡«\t-\tresponseé˜¶æ®µè½¬æ¢ä½¿ç”¨çš„prompt provider.serviceName\tstring\tå¿…å¡«\t-\tDNSç±»å‹çš„æœåŠ¡åï¼Œç›®å‰ä»…æ”¯æŒé€šä¹‰åƒé—® provider.domain\tstring\tå¿…å¡«\t-\tLLMæœåŠ¡åŸŸå provider.apiKey\tstring\tå¿…å¡«\t-\té˜¿é‡Œäº‘dashscopeæœåŠ¡çš„API Key ","version":"Next","tagName":"h2"},{"title":"é…ç½®ç¤ºä¾‹â€‹","type":1,"pageTitle":"AI è¯·æ±‚/å“åº”è½¬æ¢","url":"/zh-cn/docs/plugins/ai/ai-transformer#é…ç½®ç¤ºä¾‹","content":"request: enable: false prompt: &quot;å¦‚æœè¯·æ±‚pathæ˜¯ä»¥/httpbinå¼€å¤´çš„ï¼Œå¸®æˆ‘å»æ‰/httpbinå‰ç¼€ï¼Œå…¶ä»–çš„ä¸è¦æ”¹ã€‚&quot; response: enable: true prompt: &quot;å¸®æˆ‘ä¿®æ”¹ä»¥ä¸‹HTTPåº”ç­”ä¿¡æ¯ï¼Œè¦æ±‚ï¼š1. content-typeä¿®æ”¹ä¸ºapplication/jsonï¼›2. bodyç”±xmlè½¬åŒ–ä¸ºjsonï¼›3. ç§»é™¤content-lengthã€‚&quot; provider: serviceName: qwen domain: dashscope.aliyuncs.com apiKey: xxxxxxxxxxxxx  è®¿é—®åŸå§‹çš„ httbin çš„ /xml æ¥å£ï¼Œç»“æœä¸ºï¼š &lt;?xml version='1.0' encoding='us-ascii'?&gt; &lt;!-- A SAMPLE set of slides --&gt; &lt;slideshow title=&quot;Sample Slide Show&quot; date=&quot;Date of publication&quot; author=&quot;Yours Truly&quot; &gt; &lt;!-- TITLE SLIDE --&gt; &lt;slide type=&quot;all&quot;&gt; &lt;title&gt;Wake up to WonderWidgets!&lt;/title&gt; &lt;/slide&gt; &lt;!-- OVERVIEW --&gt; &lt;slide type=&quot;all&quot;&gt; &lt;title&gt;Overview&lt;/title&gt; &lt;item&gt;Why &lt;em&gt;WonderWidgets&lt;/em&gt; are great&lt;/item&gt; &lt;item/&gt; &lt;item&gt;Who &lt;em&gt;buys&lt;/em&gt; WonderWidgets&lt;/item&gt; &lt;/slide&gt; &lt;/slideshow&gt;  ä½¿ç”¨ä»¥ä¸Šé…ç½®ï¼Œé€šè¿‡ç½‘å…³è®¿é—® httpbin çš„ /xml æ¥å£ï¼Œç»“æœä¸ºï¼š { &quot;slideshow&quot;: { &quot;title&quot;: &quot;Sample Slide Show&quot;, &quot;date&quot;: &quot;Date of publication&quot;, &quot;author&quot;: &quot;Yours Truly&quot;, &quot;slides&quot;: [ { &quot;type&quot;: &quot;all&quot;, &quot;title&quot;: &quot;Wake up to WonderWidgets!&quot; }, { &quot;type&quot;: &quot;all&quot;, &quot;title&quot;: &quot;Overview&quot;, &quot;items&quot;: [ &quot;Why &lt;em&gt;WonderWidgets&lt;/em&gt; are great&quot;, &quot;&quot;, &quot;Who &lt;em&gt;buys&lt;/em&gt; WonderWidgets&quot; ] } ] } }  ","version":"Next","tagName":"h2"},{"title":"Basic è®¤è¯","type":0,"sectionRef":"#","url":"/zh-cn/docs/plugins/authentication/basic-auth","content":"","keywords":"higress auth","version":"Next"},{"title":"åŠŸèƒ½è¯´æ˜â€‹","type":1,"pageTitle":"Basic è®¤è¯","url":"/zh-cn/docs/plugins/authentication/basic-auth#åŠŸèƒ½è¯´æ˜","content":"basic-auth æ’ä»¶å®ç°äº†åŸºäº HTTP Basic Auth æ ‡å‡†è¿›è¡Œè®¤è¯é‰´æƒçš„åŠŸèƒ½ã€‚ ","version":"Next","tagName":"h2"},{"title":"é…ç½®å­—æ®µâ€‹","type":1,"pageTitle":"Basic è®¤è¯","url":"/zh-cn/docs/plugins/authentication/basic-auth#é…ç½®å­—æ®µ","content":"","version":"Next","tagName":"h2"},{"title":"å…¨å±€é…ç½®â€‹","type":1,"pageTitle":"Basic è®¤è¯","url":"/zh-cn/docs/plugins/authentication/basic-auth#å…¨å±€é…ç½®","content":"åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°consumers\tarray of object\tå¿…å¡«\t-\té…ç½®æœåŠ¡çš„è°ƒç”¨è€…ï¼Œç”¨äºå¯¹è¯·æ±‚è¿›è¡Œè®¤è¯ global_auth\tbool\té€‰å¡«\t-\tè‹¥é…ç½®ä¸º trueï¼Œåˆ™å…¨å±€ç”Ÿæ•ˆè®¤è¯æœºåˆ¶; è‹¥é…ç½®ä¸º falseï¼Œåˆ™åªå¯¹åšäº†é…ç½®çš„åŸŸåå’Œè·¯ç”±ç”Ÿæ•ˆè®¤è¯æœºåˆ¶; è‹¥ä¸é…ç½®åˆ™ä»…å½“æ²¡æœ‰åŸŸåå’Œè·¯ç”±é…ç½®æ—¶å…¨å±€ç”Ÿæ•ˆï¼ˆå…¼å®¹æœºåˆ¶ï¼‰ consumers ä¸­æ¯ä¸€é¡¹çš„é…ç½®å­—æ®µè¯´æ˜å¦‚ä¸‹ï¼š åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°credential\tstring\tå¿…å¡«\t-\té…ç½®è¯¥ consumer çš„è®¿é—®å‡­è¯ name\tstring\tå¿…å¡«\t-\té…ç½®è¯¥ consumer çš„åç§° ","version":"Next","tagName":"h3"},{"title":"åŸŸåå’Œè·¯ç”±çº§é…ç½®â€‹","type":1,"pageTitle":"Basic è®¤è¯","url":"/zh-cn/docs/plugins/authentication/basic-auth#åŸŸåå’Œè·¯ç”±çº§é…ç½®","content":"åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°allow\tarray of string\tå¿…å¡«\t-\tå¯¹äºç¬¦åˆåŒ¹é…æ¡ä»¶çš„è¯·æ±‚ï¼Œé…ç½®å…è®¸è®¿é—®çš„ consumer åç§° æ³¨æ„ï¼š å¯¹äºé€šè¿‡è®¤è¯é‰´æƒçš„è¯·æ±‚ï¼Œè¯·æ±‚çš„ header ä¼šè¢«æ·»åŠ ä¸€ä¸ª X-Mse-Consumer å­—æ®µï¼Œç”¨ä»¥æ ‡è¯†è°ƒç”¨è€…çš„åç§°ã€‚ ","version":"Next","tagName":"h3"},{"title":"é…ç½®ç¤ºä¾‹â€‹","type":1,"pageTitle":"Basic è®¤è¯","url":"/zh-cn/docs/plugins/authentication/basic-auth#é…ç½®ç¤ºä¾‹","content":"","version":"Next","tagName":"h2"},{"title":"å¯¹ç‰¹å®šè·¯ç”±æˆ–åŸŸåå¼€å¯è®¤è¯å’Œé‰´æƒâ€‹","type":1,"pageTitle":"Basic è®¤è¯","url":"/zh-cn/docs/plugins/authentication/basic-auth#å¯¹ç‰¹å®šè·¯ç”±æˆ–åŸŸåå¼€å¯è®¤è¯å’Œé‰´æƒ","content":"ä»¥ä¸‹é…ç½®å°†å¯¹ç½‘å…³ç‰¹å®šè·¯ç”±æˆ–åŸŸåå¼€å¯ Basic Auth è®¤è¯å’Œé‰´æƒï¼Œæ³¨æ„å‡­è¯ä¿¡æ¯ä¸­çš„ç”¨æˆ·åå’Œå¯†ç ä¹‹é—´ä½¿ç”¨ &quot;:&quot; åˆ†éš”ï¼Œcredential å­—æ®µä¸èƒ½é‡å¤ å…¨å±€é…ç½® consumers: - credential: 'admin:123456' name: consumer1 - credential: 'guest:abc' name: consumer2 global_auth: false  è·¯ç”±çº§é…ç½® å¯¹ route-a å’Œ route-b è¿™ä¸¤ä¸ªè·¯ç”±åšå¦‚ä¸‹é…ç½®ï¼š allow: - consumer1  å¯¹ *.example.com å’Œ test.com åœ¨è¿™ä¸¤ä¸ªåŸŸååšå¦‚ä¸‹é…ç½®: allow: - consumer2  è‹¥æ˜¯åœ¨æ§åˆ¶å°è¿›è¡Œé…ç½®ï¼Œæ­¤ä¾‹æŒ‡å®šçš„ route-a å’Œ route-b å³åœ¨æ§åˆ¶å°åˆ›å»ºè·¯ç”±æ—¶å¡«å†™çš„è·¯ç”±åç§°ï¼Œå½“åŒ¹é…åˆ°è¿™ä¸¤ä¸ªè·¯ç”±æ—¶ï¼Œå°†å…è®¸ name ä¸º consumer1 çš„è°ƒç”¨è€…è®¿é—®ï¼Œå…¶ä»–è°ƒç”¨è€…ä¸å…è®¸è®¿é—®ï¼› æ­¤ä¾‹æŒ‡å®šçš„ *.example.com å’Œ test.com ç”¨äºåŒ¹é…è¯·æ±‚çš„åŸŸåï¼Œå½“å‘ç°åŸŸååŒ¹é…æ—¶ï¼Œå°†å…è®¸ name ä¸º consumer2 çš„è°ƒç”¨è€…è®¿é—®ï¼Œå…¶ä»–è°ƒç”¨è€…ä¸å…è®¸è®¿é—®ã€‚ æ ¹æ®è¯¥é…ç½®ï¼Œä¸‹åˆ—è¯·æ±‚å¯ä»¥å…è®¸è®¿é—®ã€‚ è¯·æ±‚æŒ‡å®šç”¨æˆ·åå¯†ç ã€‚ # å‡è®¾ä»¥ä¸‹è¯·æ±‚å°†ä¼šåŒ¹é…åˆ° route-a è·¯ç”± # ä½¿ç”¨ curl çš„ -u å‚æ•°æŒ‡å®š curl -u admin:123456 http://xxx.hello.com/test # æˆ–è€…ç›´æ¥æŒ‡å®š Authorization è¯·æ±‚å¤´ï¼Œç”¨æˆ·åå¯†ç ä½¿ç”¨ base64 ç¼–ç  curl -H 'Authorization: Basic YWRtaW46MTIzNDU2' http://xxx.hello.com/test  è®¤è¯é‰´æƒé€šè¿‡åï¼Œè¯·æ±‚çš„ header ä¸­ä¼šè¢«æ·»åŠ ä¸€ä¸ª X-Mse-Consumer å­—æ®µï¼Œåœ¨æ­¤ä¾‹ä¸­å…¶å€¼ä¸º consumer1ï¼Œç”¨ä»¥æ ‡è¯†è°ƒç”¨æ–¹çš„åç§° ä¸‹åˆ—è¯·æ±‚å°†æ‹’ç»è®¿é—®ã€‚ è¯·æ±‚æœªæä¾›ç”¨æˆ·åå¯†ç ï¼Œè¿”å› 401ã€‚ curl http://xxx.hello.com/test  è¯·æ±‚æä¾›çš„ç”¨æˆ·åå¯†ç é”™è¯¯ï¼Œè¿”å›401ã€‚ curl -u admin:abc http://xxx.hello.com/test  æ ¹æ®è¯·æ±‚çš„ç”¨æˆ·åå’Œå¯†ç åŒ¹é…åˆ°çš„è°ƒç”¨è€…æ— è®¿é—®æƒé™ï¼Œè¿”å› 403ã€‚ # consumer2 ä¸åœ¨ route-a çš„ allow åˆ—è¡¨é‡Œ curl -u guest:abc http://xxx.hello.com/test  ","version":"Next","tagName":"h3"},{"title":"ç›¸å…³é”™è¯¯ç â€‹","type":1,"pageTitle":"Basic è®¤è¯","url":"/zh-cn/docs/plugins/authentication/basic-auth#ç›¸å…³é”™è¯¯ç ","content":"HTTP çŠ¶æ€ç \tå‡ºé”™ä¿¡æ¯\tåŸå› è¯´æ˜401\tRequest denied by Basic Auth check. No Basic Authentication information found.\tè¯·æ±‚æœªæä¾›å‡­è¯ 401\tRequest denied by Basic Auth check. Invalid username and/or password\tè¯·æ±‚å‡­è¯æ— æ•ˆ 403\tRequest denied by Basic Auth check. Unauthorized consumer\tè¯·æ±‚çš„è°ƒç”¨æ–¹æ— è®¿é—®æƒé™ ","version":"Next","tagName":"h2"},{"title":"AI Token é™æµ","type":0,"sectionRef":"#","url":"/zh-cn/docs/plugins/ai/ai-token-ratelimit","content":"","keywords":"higress ai rate-limit","version":"Next"},{"title":"åŠŸèƒ½è¯´æ˜â€‹","type":1,"pageTitle":"AI Token é™æµ","url":"/zh-cn/docs/plugins/ai/ai-token-ratelimit#åŠŸèƒ½è¯´æ˜","content":"ai-token-ratelimit æ’ä»¶å®ç°äº†åŸºäºç‰¹å®šé”®å€¼å®ç° token é™æµï¼Œé”®å€¼æ¥æºå¯ä»¥æ˜¯ URL å‚æ•°ã€HTTP è¯·æ±‚å¤´ã€å®¢æˆ·ç«¯ IP åœ°å€ã€consumer åç§°ã€cookie ä¸­ key åç§°ã€‚ ","version":"Next","tagName":"h2"},{"title":"é…ç½®è¯´æ˜â€‹","type":1,"pageTitle":"AI Token é™æµ","url":"/zh-cn/docs/plugins/ai/ai-token-ratelimit#é…ç½®è¯´æ˜","content":"é…ç½®é¡¹\tæ•°æ®ç±»å‹\tå¿…å¡«\té»˜è®¤å€¼\tè¯´æ˜rule_name\tstring\tæ˜¯\t-\té™æµè§„åˆ™åç§°ï¼Œæ ¹æ®é™æµè§„åˆ™åç§° + é™æµç±»å‹ + é™æµ key åç§° + é™æµ key å¯¹åº”çš„å®é™…å€¼æ¥æ‹¼è£… redis key rule_items\tarray of object\tæ˜¯\t-\té™æµè§„åˆ™é¡¹ï¼ŒæŒ‰ç…§ rule_items ä¸‹çš„æ’åˆ—é¡ºåºï¼ŒåŒ¹é…ç¬¬ä¸€ä¸ª rule_item åå‘½ä¸­é™æµè§„åˆ™ï¼Œåç»­è§„åˆ™å°†è¢«å¿½ç•¥ rejected_code\tint\tå¦\t429\tè¯·æ±‚è¢«é™æµæ—¶ï¼Œè¿”å›çš„ HTTP çŠ¶æ€ç  rejected_msg\tstring\tå¦\tToo many requests\tè¯·æ±‚è¢«é™æµæ—¶ï¼Œè¿”å›çš„å“åº”ä½“ redis\tobject\tæ˜¯\t-\tredisç›¸å…³é…ç½® rule_items ä¸­æ¯ä¸€é¡¹çš„é…ç½®å­—æ®µè¯´æ˜ã€‚ é…ç½®é¡¹\tæ•°æ®ç±»å‹\tå¿…å¡«\té»˜è®¤å€¼\tè¯´æ˜limit_by_header\tstring\tå¦ï¼Œlimit_by_* ä¸­é€‰å¡«ä¸€é¡¹\t-\té…ç½®è·å–é™æµé”®å€¼çš„æ¥æº HTTP è¯·æ±‚å¤´åç§° limit_by_param\tstring\tå¦ï¼Œlimit_by_* ä¸­é€‰å¡«ä¸€é¡¹\t-\té…ç½®è·å–é™æµé”®å€¼çš„æ¥æº URL å‚æ•°åç§° limit_by_consumer\tstring\tå¦ï¼Œlimit_by_* ä¸­é€‰å¡«ä¸€é¡¹\t-\tæ ¹æ® consumer åç§°è¿›è¡Œé™æµï¼Œæ— éœ€æ·»åŠ å®é™…å€¼ limit_by_cookie\tstring\tå¦ï¼Œlimit_by_* ä¸­é€‰å¡«ä¸€é¡¹\t-\té…ç½®è·å–é™æµé”®å€¼çš„æ¥æº Cookieä¸­ key åç§° limit_by_per_header\tstring\tå¦ï¼Œlimit_by_* ä¸­é€‰å¡«ä¸€é¡¹\t-\tæŒ‰è§„åˆ™åŒ¹é…ç‰¹å®š HTTP è¯·æ±‚å¤´ï¼Œå¹¶å¯¹æ¯ä¸ªè¯·æ±‚å¤´åˆ†åˆ«è®¡ç®—é™æµï¼Œé…ç½®è·å–é™æµé”®å€¼çš„æ¥æº HTTP è¯·æ±‚å¤´åç§°ï¼Œé…ç½® limit_keys æ—¶æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼æˆ– * limit_by_per_param\tstring\tå¦ï¼Œlimit_by_* ä¸­é€‰å¡«ä¸€é¡¹\t-\tæŒ‰è§„åˆ™åŒ¹é…ç‰¹å®š URL å‚æ•°ï¼Œå¹¶å¯¹æ¯ä¸ªå‚æ•°åˆ†åˆ«è®¡ç®—é™æµï¼Œé…ç½®è·å–é™æµé”®å€¼çš„æ¥æº URL å‚æ•°åç§°ï¼Œé…ç½® limit_keys æ—¶æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼æˆ– * limit_by_per_consumer\tstring\tå¦ï¼Œlimit_by_* ä¸­é€‰å¡«ä¸€é¡¹\t-\tæŒ‰è§„åˆ™åŒ¹é…ç‰¹å®š consumerï¼Œå¹¶å¯¹æ¯ä¸ª consumer åˆ†åˆ«è®¡ç®—é™æµï¼Œæ ¹æ® consumer åç§°è¿›è¡Œé™æµï¼Œæ— éœ€æ·»åŠ å®é™…å€¼ï¼Œé…ç½®limit_keysæ—¶æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼æˆ–* limit_by_per_cookie\tstring\tå¦ï¼Œlimit_by_* ä¸­é€‰å¡«ä¸€é¡¹\t-\tæŒ‰è§„åˆ™åŒ¹é…ç‰¹å®š Cookieï¼Œå¹¶å¯¹æ¯ä¸ª Cookie åˆ†åˆ«è®¡ç®—é™æµï¼Œé…ç½®è·å–é™æµé”®å€¼çš„æ¥æº Cookie ä¸­ key åç§°ï¼Œé…ç½® limit_keys æ—¶æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼æˆ–* limit_by_per_ip\tstring\tå¦ï¼Œlimit_by_* ä¸­é€‰å¡«ä¸€é¡¹\t-\tæŒ‰è§„åˆ™åŒ¹é…ç‰¹å®š IPï¼Œå¹¶å¯¹æ¯ä¸ª IP åˆ†åˆ«è®¡ç®—é™æµï¼Œé…ç½®è·å–é™æµé”®å€¼çš„æ¥æº IP å‚æ•°åç§°ï¼Œä»è¯·æ±‚å¤´è·å–ï¼Œä»¥ from-header-å¯¹åº”çš„headeråï¼Œç¤ºä¾‹ï¼šfrom-header-x-forwarded-forï¼Œç›´æ¥è·å–å¯¹ç«¯ socket ipï¼Œé…ç½®ä¸º from-remote-addr limit_keys\tarray of object\tæ˜¯\t-\té…ç½®åŒ¹é…é”®å€¼åçš„é™æµæ¬¡æ•° limit_keys ä¸­æ¯ä¸€é¡¹çš„é…ç½®å­—æ®µè¯´æ˜ã€‚ é…ç½®é¡¹\tæ•°æ®ç±»å‹\tå¿…å¡«\té»˜è®¤å€¼\tè¯´æ˜key\tstring\tæ˜¯\t-\tåŒ¹é…çš„é”®å€¼ï¼Œlimit_by_per_header,limit_by_per_param,limit_by_per_consumer,limit_by_per_cookie ç±»å‹æ”¯æŒé…ç½®æ­£åˆ™è¡¨è¾¾å¼ï¼ˆä»¥ regexp: å¼€å¤´åé¢è·Ÿæ­£åˆ™è¡¨è¾¾å¼ï¼‰æˆ–è€… *ï¼ˆä»£è¡¨æ‰€æœ‰ï¼‰ï¼Œæ­£åˆ™è¡¨è¾¾å¼ç¤ºä¾‹ï¼šregexp:^d.*ï¼ˆä»¥då¼€å¤´çš„æ‰€æœ‰å­—ç¬¦ä¸²ï¼‰ï¼›limit_by_per_ip æ”¯æŒé…ç½® IP åœ°å€æˆ– IP æ®µ token_per_second\tint\tå¦ï¼Œtoken_per_second,token_per_minute,token_per_hour,token_per_day ä¸­é€‰å¡«ä¸€é¡¹\t-\tå…è®¸æ¯ç§’è¯·æ±‚ token æ•° token_per_minute\tint\tå¦ï¼Œtoken_per_second,token_per_minute,token_per_hour,token_per_day ä¸­é€‰å¡«ä¸€é¡¹\t-\tå…è®¸æ¯åˆ†é’Ÿè¯·æ±‚ token æ•° token_per_hour\tint\tå¦ï¼Œtoken_per_second,token_per_minute,token_per_hour,token_per_day ä¸­é€‰å¡«ä¸€é¡¹\t-\tå…è®¸æ¯å°æ—¶è¯·æ±‚ token æ•° token_per_day\tint\tå¦ï¼Œtoken_per_second,token_per_minute,token_per_hour,token_per_day ä¸­é€‰å¡«ä¸€é¡¹\t-\tå…è®¸æ¯å¤©è¯·æ±‚ token æ•° redis ä¸­æ¯ä¸€é¡¹çš„é…ç½®å­—æ®µè¯´æ˜ã€‚ é…ç½®é¡¹\tæ•°æ®ç±»å‹\tå¿…å¡«\té»˜è®¤å€¼\tè¯´æ˜service_name\tstring\tå¿…å¡«\t-\tredis æœåŠ¡åç§°ï¼Œå¸¦æœåŠ¡ç±»å‹çš„å®Œæ•´ FQDN åç§°ï¼Œä¾‹å¦‚ my-redis.dnsã€redis.my-ns.svc.cluster.local service_port\tint\tå¦\tæœåŠ¡ç±»å‹ä¸ºå›ºå®šåœ°å€ï¼ˆstatic serviceï¼‰é»˜è®¤å€¼ä¸º 80ï¼Œå…¶ä»–ä¸º 6379\tè¾“å…¥ redis æœåŠ¡çš„æœåŠ¡ç«¯å£ username\tstring\tå¦\t-\tredis ç”¨æˆ·å password\tstring\tå¦\t-\tredis å¯†ç  timeout\tint\tå¦\t1000\tredis è¿æ¥è¶…æ—¶æ—¶é—´ï¼Œå•ä½æ¯«ç§’ ","version":"Next","tagName":"h2"},{"title":"é…ç½®ç¤ºä¾‹â€‹","type":1,"pageTitle":"AI Token é™æµ","url":"/zh-cn/docs/plugins/ai/ai-token-ratelimit#é…ç½®ç¤ºä¾‹","content":"","version":"Next","tagName":"h2"},{"title":"è¯†åˆ«è¯·æ±‚å‚æ•° apikeyï¼Œè¿›è¡ŒåŒºåˆ«é™æµâ€‹","type":1,"pageTitle":"AI Token é™æµ","url":"/zh-cn/docs/plugins/ai/ai-token-ratelimit#è¯†åˆ«è¯·æ±‚å‚æ•°-apikeyè¿›è¡ŒåŒºåˆ«é™æµ","content":"rule_name: default_rule rule_items: - limit_by_param: apikey limit_keys: - key: 9a342114-ba8a-11ec-b1bf-00163e1250b5 token_per_minute: 10 - key: a6a6d7f2-ba8a-11ec-bec2-00163e1250b5 token_per_hour: 100 - limit_by_per_param: apikey limit_keys: # æ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…ä»¥ a å¼€å¤´çš„æ‰€æœ‰å­—ç¬¦ä¸²ï¼Œæ¯ä¸ª apikey å¯¹åº”çš„è¯·æ±‚ 10qds - key: &quot;regexp:^a.*&quot; token_per_second: 10 # æ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…ä»¥ b å¼€å¤´çš„æ‰€æœ‰å­—ç¬¦ä¸²ï¼Œæ¯ä¸ª apikey å¯¹åº”çš„è¯·æ±‚ 100qd - key: &quot;regexp:^b.*&quot; token_per_minute: 100 # å…œåº•ç”¨ï¼ŒåŒ¹é…æ‰€æœ‰è¯·æ±‚ï¼Œæ¯ä¸ª apikey å¯¹åº”çš„è¯·æ±‚ 1000qdh - key: &quot;*&quot; token_per_hour: 1000 redis: service_name: redis.static  ","version":"Next","tagName":"h3"},{"title":"è¯†åˆ«è¯·æ±‚å¤´ x-ca-keyï¼Œè¿›è¡ŒåŒºåˆ«é™æµâ€‹","type":1,"pageTitle":"AI Token é™æµ","url":"/zh-cn/docs/plugins/ai/ai-token-ratelimit#è¯†åˆ«è¯·æ±‚å¤´-x-ca-keyè¿›è¡ŒåŒºåˆ«é™æµ","content":"rule_name: default_rule rule_items: - limit_by_header: x-ca-key limit_keys: - key: 102234 token_per_minute: 10 - key: 308239 token_per_hour: 10 - limit_by_per_header: x-ca-key limit_keys: # æ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…ä»¥ a å¼€å¤´çš„æ‰€æœ‰å­—ç¬¦ä¸²ï¼Œæ¯ä¸ª apikey å¯¹åº”çš„è¯·æ±‚ 10qds - key: &quot;regexp:^a.*&quot; token_per_second: 10 # æ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…ä»¥ b å¼€å¤´çš„æ‰€æœ‰å­—ç¬¦ä¸²ï¼Œæ¯ä¸ª apikey å¯¹åº”çš„è¯·æ±‚ 100qd - key: &quot;regexp:^b.*&quot; token_per_minute: 100 # å…œåº•ç”¨ï¼ŒåŒ¹é…æ‰€æœ‰è¯·æ±‚ï¼Œæ¯ä¸ª apikey å¯¹åº”çš„è¯·æ±‚ 1000qdh - key: &quot;*&quot; token_per_hour: 1000 redis: service_name: redis.static  ","version":"Next","tagName":"h3"},{"title":"æ ¹æ®è¯·æ±‚å¤´ x-forwarded-for è·å–å¯¹ç«¯ IPï¼Œè¿›è¡ŒåŒºåˆ«é™æµâ€‹","type":1,"pageTitle":"AI Token é™æµ","url":"/zh-cn/docs/plugins/ai/ai-token-ratelimit#æ ¹æ®è¯·æ±‚å¤´-x-forwarded-for-è·å–å¯¹ç«¯-ipè¿›è¡ŒåŒºåˆ«é™æµ","content":"rule_name: default_rule rule_items: - limit_by_per_ip: from-header-x-forwarded-for limit_keys: # ç²¾ç¡® ip - key: 1.1.1.1 token_per_day: 10 # ip æ®µï¼Œç¬¦åˆè¿™ä¸ª ip æ®µçš„ ipï¼Œæ¯ä¸ª ip 100qpd - key: 1.1.1.0/24 token_per_day: 100 # å…œåº•ç”¨ï¼Œå³é»˜è®¤æ¯ä¸ª ip 1000qpd - key: 0.0.0.0/0 token_per_day: 1000 redis: service_name: redis.static  ","version":"Next","tagName":"h3"},{"title":"è¯†åˆ« consumerï¼Œè¿›è¡ŒåŒºåˆ«é™æµâ€‹","type":1,"pageTitle":"AI Token é™æµ","url":"/zh-cn/docs/plugins/ai/ai-token-ratelimit#è¯†åˆ«-consumerè¿›è¡ŒåŒºåˆ«é™æµ","content":"rule_name: default_rule rule_items: - limit_by_consumer: '' limit_keys: - key: consumer1 token_per_second: 10 - key: consumer2 token_per_hour: 100 - limit_by_per_consumer: '' limit_keys: # æ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…ä»¥ a å¼€å¤´çš„æ‰€æœ‰å­—ç¬¦ä¸²ï¼Œæ¯ä¸ª consumer å¯¹åº”çš„è¯·æ±‚ 10qds - key: &quot;regexp:^a.*&quot; token_per_second: 10 # æ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…ä»¥ b å¼€å¤´çš„æ‰€æœ‰å­—ç¬¦ä¸²ï¼Œæ¯ä¸ª consumer å¯¹åº”çš„è¯·æ±‚ 100qd - key: &quot;regexp:^b.*&quot; token_per_minute: 100 # å…œåº•ç”¨ï¼ŒåŒ¹é…æ‰€æœ‰è¯·æ±‚ï¼Œæ¯ä¸ª consumer å¯¹åº”çš„è¯·æ±‚ 1000qdh - key: &quot;*&quot; token_per_hour: 1000 redis: service_name: redis.static  ","version":"Next","tagName":"h3"},{"title":"è¯†åˆ« cookie ä¸­çš„é”®å€¼å¯¹ï¼Œè¿›è¡ŒåŒºåˆ«é™æµâ€‹","type":1,"pageTitle":"AI Token é™æµ","url":"/zh-cn/docs/plugins/ai/ai-token-ratelimit#è¯†åˆ«-cookie-ä¸­çš„é”®å€¼å¯¹è¿›è¡ŒåŒºåˆ«é™æµ","content":"rule_name: default_rule rule_items: - limit_by_cookie: key1 limit_keys: - key: value1 token_per_minute: 10 - key: value2 token_per_hour: 100 - limit_by_per_cookie: key1 limit_keys: # æ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…ä»¥ a å¼€å¤´çš„æ‰€æœ‰å­—ç¬¦ä¸²ï¼Œæ¯ä¸ª cookie ä¸­çš„ value å¯¹åº”çš„è¯·æ±‚ 10qds - key: &quot;regexp:^a.*&quot; token_per_second: 10 # æ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…ä»¥ b å¼€å¤´çš„æ‰€æœ‰å­—ç¬¦ä¸²ï¼Œæ¯ä¸ª cookie ä¸­çš„ value å¯¹åº”çš„è¯·æ±‚ 100qd - key: &quot;regexp:^b.*&quot; token_per_minute: 100 # å…œåº•ç”¨ï¼ŒåŒ¹é…æ‰€æœ‰è¯·æ±‚ï¼Œæ¯ä¸ª cookie ä¸­çš„ value å¯¹åº”çš„è¯·æ±‚ 1000qdh - key: &quot;*&quot; token_per_hour: 1000 rejected_code: 200 rejected_msg: '{&quot;code&quot;:-1,&quot;msg&quot;:&quot;Too many requests&quot;}' redis: service_name: redis.static  ","version":"Next","tagName":"h3"},{"title":"HMAC è®¤è¯","type":0,"sectionRef":"#","url":"/zh-cn/docs/plugins/authentication/hmac-auth","content":"","keywords":"higress auth","version":"Next"},{"title":"åŠŸèƒ½è¯´æ˜â€‹","type":1,"pageTitle":"HMAC è®¤è¯","url":"/zh-cn/docs/plugins/authentication/hmac-auth#åŠŸèƒ½è¯´æ˜","content":"hmac-auth æ’ä»¶å®ç°äº†åŸºäº HMAC ç®—æ³•ä¸º HTTP è¯·æ±‚ç”Ÿæˆä¸å¯ä¼ªé€ çš„ç­¾åï¼Œå¹¶åŸºäºç­¾åå®ç°èº«ä»½è®¤è¯å’Œé‰´æƒã€‚ ","version":"Next","tagName":"h2"},{"title":"é…ç½®å­—æ®µâ€‹","type":1,"pageTitle":"HMAC è®¤è¯","url":"/zh-cn/docs/plugins/authentication/hmac-auth#é…ç½®å­—æ®µ","content":"","version":"Next","tagName":"h2"},{"title":"å…¨å±€é…ç½®â€‹","type":1,"pageTitle":"HMAC è®¤è¯","url":"/zh-cn/docs/plugins/authentication/hmac-auth#å…¨å±€é…ç½®","content":"åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°consumers\tarray of object\tå¿…å¡«\t-\té…ç½®æœåŠ¡çš„è°ƒç”¨è€…ï¼Œç”¨äºå¯¹è¯·æ±‚è¿›è¡Œè®¤è¯ date_offset\tnumber\té€‰å¡«\t-\té…ç½®å…è®¸çš„å®¢æˆ·ç«¯æœ€å¤§æ—¶é—´åç§»ï¼Œå•ä½ä¸ºç§’ï¼Œæ ¹æ®è¯·æ±‚å¤´ Date è§£æå®¢æˆ·ç«¯ UTC æ—¶é—´ï¼Œå¯ç”¨äºé¿å…è¯·æ±‚é‡æ”¾ï¼›æœªé…ç½®æ—¶ï¼Œä¸åšæ ¡éªŒ global_auth\tbool\té€‰å¡«\t-\tè‹¥é…ç½®ä¸ºtrueï¼Œåˆ™å…¨å±€ç”Ÿæ•ˆè®¤è¯æœºåˆ¶; è‹¥é…ç½®ä¸º falseï¼Œåˆ™åªå¯¹åšäº†é…ç½®çš„åŸŸåå’Œè·¯ç”±ç”Ÿæ•ˆè®¤è¯æœºåˆ¶; è‹¥ä¸é…ç½®åˆ™ä»…å½“æ²¡æœ‰åŸŸåå’Œè·¯ç”±é…ç½®æ—¶å…¨å±€ç”Ÿæ•ˆï¼ˆå…¼å®¹æœºåˆ¶ï¼‰ consumers ä¸­æ¯ä¸€é¡¹çš„é…ç½®å­—æ®µè¯´æ˜å¦‚ä¸‹ï¼š åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°key\tstring\tå¿…å¡«\t-\té…ç½®ä»è¯·æ±‚çš„ x-ca-key å¤´ä¸­æå–çš„ key secret\tstring\tå¿…å¡«\t-\té…ç½®ç”¨äºç”Ÿæˆç­¾åçš„ secret name\tstring\tå¿…å¡«\t-\té…ç½®è¯¥ consumer çš„åç§° ","version":"Next","tagName":"h3"},{"title":"åŸŸåå’Œè·¯ç”±çº§é…ç½®â€‹","type":1,"pageTitle":"HMAC è®¤è¯","url":"/zh-cn/docs/plugins/authentication/hmac-auth#åŸŸåå’Œè·¯ç”±çº§é…ç½®","content":"åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°allow\tarray of string\tå¿…å¡«\t-\tå¯¹äºç¬¦åˆåŒ¹é…æ¡ä»¶çš„è¯·æ±‚ï¼Œé…ç½®å…è®¸è®¿é—®çš„ consumer åç§° æ³¨æ„ï¼š å¯¹äºé€šè¿‡è®¤è¯é‰´æƒçš„è¯·æ±‚ï¼Œè¯·æ±‚çš„ header ä¼šè¢«æ·»åŠ ä¸€ä¸ª X-Mse-Consumer å­—æ®µï¼Œç”¨ä»¥æ ‡è¯†è°ƒç”¨è€…çš„åç§°ã€‚ ","version":"Next","tagName":"h3"},{"title":"é…ç½®ç¤ºä¾‹â€‹","type":1,"pageTitle":"HMAC è®¤è¯","url":"/zh-cn/docs/plugins/authentication/hmac-auth#é…ç½®ç¤ºä¾‹","content":"ä»¥ä¸‹é…ç½®å°†å¯¹ç½‘å…³ç‰¹å®šè·¯ç”±æˆ–åŸŸåå¼€å¯ Hmac Auth è®¤è¯å’Œé‰´æƒï¼Œæ³¨æ„ key å­—æ®µä¸èƒ½é‡å¤ã€‚ ","version":"Next","tagName":"h2"},{"title":"å¯¹ç‰¹å®šè·¯ç”±æˆ–åŸŸåå¼€å¯â€‹","type":1,"pageTitle":"HMAC è®¤è¯","url":"/zh-cn/docs/plugins/authentication/hmac-auth#å¯¹ç‰¹å®šè·¯ç”±æˆ–åŸŸåå¼€å¯","content":"å…¨å±€é…ç½® consumers: - key: appKey-example-1 secret: appSecret-example-1 name: consumer-1 - key: appKey-example-2 secret: appSecret-example-2 name: consumer-2 global_auth: false  è·¯ç”±çº§é…ç½® å¯¹ route-a å’Œ route-b è¿™ä¸¤ä¸ªè·¯ç”±åšå¦‚ä¸‹é…ç½®ï¼š allow: - consumer1  å¯¹ *.exmaple.com å’Œ test.com åœ¨è¿™ä¸¤ä¸ªåŸŸååšå¦‚ä¸‹é…ç½®ï¼š allow: - consumer2  æ¯æ¡åŒ¹é…è§„åˆ™ä¸‹çš„ allow å­—æ®µç”¨äºæŒ‡å®šè¯¥åŒ¹é…æ¡ä»¶ä¸‹å…è®¸è®¿é—®çš„è°ƒç”¨è€…åˆ—è¡¨ï¼› è‹¥æ˜¯åœ¨æ§åˆ¶å°è¿›è¡Œé…ç½®ï¼Œæ­¤ä¾‹æŒ‡å®šçš„ route-a å’Œ route-b å³åœ¨æ§åˆ¶å°åˆ›å»ºè·¯ç”±æ—¶å¡«å†™çš„è·¯ç”±åç§°ï¼Œå½“åŒ¹é…åˆ°è¿™ä¸¤ä¸ªè·¯ç”±æ—¶ï¼Œå°†å…è®¸ name ä¸º consumer1 çš„è°ƒç”¨è€…è®¿é—®ï¼Œå…¶ä»–è°ƒç”¨è€…ä¸å…è®¸è®¿é—®ï¼› æ­¤ä¾‹æŒ‡å®šçš„ *.example.com å’Œ test.com ç”¨äºåŒ¹é…è¯·æ±‚çš„åŸŸåï¼Œå½“å‘ç°åŸŸååŒ¹é…æ—¶ï¼Œå°†å…è®¸ name ä¸º consumer2 çš„è°ƒç”¨è€…è®¿é—®ï¼Œå…¶ä»–è°ƒç”¨è€…ä¸å…è®¸è®¿é—®ã€‚ è®¤è¯æˆåŠŸåï¼Œè¯·æ±‚çš„headerä¸­ä¼šè¢«æ·»åŠ ä¸€ä¸ª X-Mse-Consumer å­—æ®µï¼Œå…¶å€¼ä¸ºè°ƒç”¨æ–¹çš„åç§°ï¼Œä¾‹å¦‚ consumer-1ã€‚ ","version":"Next","tagName":"h3"},{"title":"ç­¾åæœºåˆ¶è¯´æ˜â€‹","type":1,"pageTitle":"HMAC è®¤è¯","url":"/zh-cn/docs/plugins/authentication/hmac-auth#ç­¾åæœºåˆ¶è¯´æ˜","content":"","version":"Next","tagName":"h2"},{"title":"é…ç½®å‡†å¤‡â€‹","type":1,"pageTitle":"HMAC è®¤è¯","url":"/zh-cn/docs/plugins/authentication/hmac-auth#é…ç½®å‡†å¤‡","content":"å¦‚ä¸ŠæŒ‡å¼•ï¼Œåœ¨æ’ä»¶é…ç½®ä¸­é…ç½®ç”Ÿæˆå’ŒéªŒè¯ç­¾åéœ€è¦ç”¨çš„å‡­è¯é…ç½® key: ç”¨äºè¯·æ±‚å¤´ x-ca-key ä¸­è®¾ç½®secret: ç”¨äºç”Ÿæˆè¯·æ±‚ç­¾å ","version":"Next","tagName":"h3"},{"title":"å®¢æˆ·ç«¯ç­¾åç”Ÿæˆæ–¹å¼â€‹","type":1,"pageTitle":"HMAC è®¤è¯","url":"/zh-cn/docs/plugins/authentication/hmac-auth#å®¢æˆ·ç«¯ç­¾åç”Ÿæˆæ–¹å¼","content":"æµç¨‹ç®€ä»‹â€‹ å®¢æˆ·ç«¯ç”Ÿæˆç­¾åä¸€å…±åˆ†ä¸‰æ­¥å¤„ç†ï¼š ä»åŸå§‹è¯·æ±‚ä¸­æå–å…³é”®æ•°æ®ï¼Œå¾—åˆ°ä¸€ä¸ªç”¨æ¥ç­¾åçš„å­—ç¬¦ä¸² ä½¿ç”¨åŠ å¯†ç®—æ³•å’Œé…ç½®çš„ secret å¯¹å…³é”®æ•°æ®ç­¾åä¸²è¿›è¡ŒåŠ å¯†å¤„ç†ï¼Œå¾—åˆ°ç­¾å å°†ç­¾åæ‰€ç›¸å…³çš„æ‰€æœ‰å¤´åŠ å…¥åˆ°åŸå§‹HTTPè¯·æ±‚ä¸­ï¼Œå¾—åˆ°æœ€ç»ˆHTTPè¯·æ±‚ å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š  ç­¾åä¸²æå–æµç¨‹â€‹ å®¢æˆ·ç«¯éœ€è¦ä»Httpè¯·æ±‚ä¸­æå–å‡ºå…³é”®æ•°æ®ï¼Œç»„åˆæˆä¸€ä¸ªç­¾åä¸²ï¼Œç”Ÿæˆçš„ç­¾åä¸²çš„æ ¼å¼å¦‚ä¸‹ï¼š HTTPMethod Accept Content-MD5 Content-Type Date Headers PathAndParameters  ä»¥ä¸Š7ä¸ªå­—æ®µæ„æˆæ•´ä¸ªç­¾åä¸²ï¼Œå­—æ®µä¹‹é—´ä½¿ç”¨\\né—´éš”ï¼Œå¦‚æœHeadersä¸ºç©ºï¼Œåˆ™ä¸éœ€è¦åŠ \\nï¼Œå…¶ä»–å­—æ®µå¦‚æœä¸ºç©ºéƒ½éœ€è¦ä¿ç•™\\nã€‚ç­¾åå¤§å°å†™æ•æ„Ÿã€‚ä¸‹é¢ä»‹ç»ä¸‹æ¯ä¸ªå­—æ®µçš„æå–è§„åˆ™ï¼š HTTPMethodï¼šHTTP çš„æ–¹æ³•ï¼Œå…¨éƒ¨å¤§å†™ï¼Œæ¯”å¦‚ POST Acceptï¼šè¯·æ±‚ä¸­çš„ Accept å¤´çš„å€¼ï¼Œå¯ä¸ºç©ºã€‚å»ºè®®æ˜¾å¼è®¾ç½® Accept Headerã€‚å½“ Accept ä¸ºç©ºæ—¶ï¼Œéƒ¨åˆ† Http å®¢æˆ·ç«¯ä¼šç»™ Accept è®¾ç½®é»˜è®¤å€¼ä¸º */*ï¼Œå¯¼è‡´ç­¾åæ ¡éªŒå¤±è´¥ã€‚ Content-MD5ï¼šè¯·æ±‚ä¸­çš„ Content-MD5 å¤´çš„å€¼ï¼Œå¯ä¸ºç©ºåªæœ‰åœ¨è¯·æ±‚å­˜åœ¨ Body ä¸” Body ä¸ºé Form å½¢å¼æ—¶æ‰è®¡ç®— Content-MD5 å¤´ï¼Œä¸‹é¢æ˜¯ Java çš„ Content-MD5 å€¼çš„å‚è€ƒè®¡ç®—æ–¹å¼ï¼š String content-MD5 = Base64.encodeBase64(MD5(bodyStream.getbytes(&quot;UTF-8&quot;)));  Content-Typeï¼šè¯·æ±‚ä¸­çš„ Content-Type å¤´çš„å€¼ï¼Œå¯ä¸ºç©º Dateï¼šè¯·æ±‚ä¸­çš„ Date å¤´çš„å€¼ï¼Œå½“æœªå¼€å¯ date_offset é…ç½®æ—¶ï¼Œå¯ä¸ºç©ºï¼Œå¦åˆ™å°†ç”¨äºæ—¶é—´åç§»æ ¡éªŒ Headersï¼šç”¨æˆ·å¯ä»¥é€‰å–æŒ‡å®šçš„ header å‚ä¸ç­¾åï¼Œå…³äº header çš„ç­¾åä¸²æ‹¼æ¥æ–¹å¼æœ‰ä»¥ä¸‹è§„åˆ™ï¼š å‚ä¸ç­¾åè®¡ç®—çš„ Header çš„ Key æŒ‰ç…§å­—å…¸æ’åºåä½¿ç”¨å¦‚ä¸‹æ–¹å¼æ‹¼æ¥ HeaderKey1 + &quot;:&quot; + HeaderValue1 + &quot;\\n&quot;\\+ HeaderKey2 + &quot;:&quot; + HeaderValue2 + &quot;\\n&quot;\\+ ... HeaderKeyN + &quot;:&quot; + HeaderValueN + &quot;\\n&quot; æŸä¸ª Header çš„ Value ä¸ºç©ºï¼Œåˆ™ä½¿ç”¨ HeaderKey+&quot;:&quot;+&quot;\\n&quot; å‚ä¸ç­¾åï¼Œéœ€è¦ä¿ç•™ Key å’Œè‹±æ–‡å†’å·æ‰€æœ‰å‚ä¸ç­¾åçš„ Header çš„ Key çš„é›†åˆä½¿ç”¨è‹±æ–‡é€—å·åˆ†å‰²æ”¾åˆ° Key ä¸º X-Ca-Signature-Headers çš„ Header ä¸­ä»¥ä¸‹ Header ä¸å‚ä¸ Header ç­¾åè®¡ç®—ï¼šX-Ca-Signatureã€X-Ca-Signature-Headersã€Acceptã€Content-MD5ã€Content-Typeã€Date PathAndParametersï¼šè¿™ä¸ªå­—æ®µåŒ…å« Pathï¼ŒQuery å’Œ Form ä¸­çš„æ‰€æœ‰å‚æ•°ï¼Œå…·ä½“ç»„ç»‡å½¢å¼å¦‚ä¸‹ï¼š Path + &quot;?&quot; + Key1 + &quot;=&quot; + Value1 + &quot;&amp;&quot; + Key2 + &quot;=&quot; + Value2 + ... &quot;&amp;&quot; + KeyN + &quot;=&quot; + ValueN  æ³¨æ„ï¼š Query å’Œ Form å‚æ•°å¯¹çš„ Key æŒ‰ç…§å­—å…¸æ’åºåä½¿ç”¨ä¸Šé¢çš„æ–¹å¼æ‹¼æ¥Query å’Œ Form å‚æ•°ä¸ºç©ºæ—¶ï¼Œåˆ™ç›´æ¥ä½¿ç”¨ Pathï¼Œä¸éœ€è¦æ·»åŠ ?å‚æ•°çš„ Value ä¸ºç©ºæ—¶åªä¿ç•™ Key å‚ä¸ç­¾åï¼Œç­‰å·ä¸éœ€è¦å†åŠ å…¥ç­¾åQuery å’Œ Form å­˜åœ¨æ•°ç»„å‚æ•°æ—¶ï¼ˆkey ç›¸åŒï¼Œvalue ä¸åŒçš„å‚æ•°ï¼‰ ï¼Œå–ç¬¬ä¸€ä¸ª Value å‚ä¸ç­¾åè®¡ç®— ç­¾åä¸²æå–ç¤ºä¾‹â€‹ åˆå§‹çš„ HTTP è¯·æ±‚ï¼š POST /http2test/test?param1=test HTTP/1.1 host:api.aliyun.com accept:application/json; charset=utf-8 ca_version:1 content-type:application/x-www-form-urlencoded; charset=utf-8 x-ca-timestamp:1525872629832 date:Wed, 09 May 2018 13:30:29 GMT+00:00 user-agent:ALIYUN-ANDROID-DEMO x-ca-nonce:c9f15cbf-f4ac-4a6c-b54d-f51abf4b5b44 content-length:33 username=xiaoming&amp;password=123456789  ç”Ÿæˆçš„æ­£ç¡®ç­¾åä¸²ä¸ºï¼š POST application/json; charset=utf-8 application/x-www-form-urlencoded; charset=utf-8 Wed, 09 May 2018 13:30:29 GMT+00:00 x-ca-key:203753385 x-ca-nonce:c9f15cbf-f4ac-4a6c-b54d-f51abf4b5b44 x-ca-signature-method:HmacSHA256 x-ca-timestamp:1525872629832 /http2test/test?param1=test&amp;password=123456789&amp;username=xiaoming  ç­¾åè®¡ç®—æµç¨‹â€‹ å®¢æˆ·ç«¯ä» HTTP è¯·æ±‚ä¸­æå–å‡ºå…³é”®æ•°æ®ç»„è£…æˆç­¾åä¸²åï¼Œéœ€è¦å¯¹ç­¾åä¸²è¿›è¡ŒåŠ å¯†åŠç¼–ç å¤„ç†ï¼Œå½¢æˆæœ€ç»ˆçš„ç­¾åã€‚ å…·ä½“çš„åŠ å¯†å½¢å¼å¦‚ä¸‹ï¼Œå…¶ä¸­ stringToSign æ˜¯æå–å‡ºæ¥çš„ç­¾åä¸²ï¼Œsecret å°±æ˜¯æ’ä»¶é…ç½®ä¸­å¡«å†™çš„ï¼Œsign æ˜¯æœ€ç»ˆç”Ÿæˆçš„ç­¾åï¼š Mac hmacSha256 = Mac.getInstance(&quot;HmacSHA256&quot;); byte[] secretBytes = secret.getBytes(&quot;UTF-8&quot;); hmacSha256.init(new SecretKeySpec(secretBytes, 0, secretBytes.length, &quot;HmacSHA256&quot;)); byte[] result = hmacSha256.doFinal(stringToSign.getBytes(&quot;UTF-8&quot;)); String sign = Base64.encodeBase64String(result);  æ€»ç»“ä¸€ä¸‹ï¼Œå°±æ˜¯å°† stringToSign ä½¿ç”¨ UTF-8 è§£ç åå¾—åˆ° Byte æ•°ç»„ï¼Œç„¶åä½¿ç”¨åŠ å¯†ç®—æ³•å¯¹ Byte æ•°ç»„è¿›è¡ŒåŠ å¯†ï¼Œç„¶åä½¿ç”¨ Base64 ç®—æ³•è¿›è¡Œç¼–ç ï¼Œå½¢æˆæœ€ç»ˆçš„ç­¾åã€‚ æ·»åŠ ç­¾åæµç¨‹â€‹ å®¢æˆ·ç«¯éœ€è¦å°†ä»¥ä¸‹å››ä¸ª Header æ”¾åœ¨ HTTP è¯·æ±‚ä¸­ä¼ è¾“ç»™ API ç½‘å…³ï¼Œè¿›è¡Œç­¾åæ ¡éªŒï¼š x-ca-keyï¼šå–å€¼ APP Keyï¼Œå¿…é€‰ x-ca-signature-methodï¼šç­¾åç®—æ³•ï¼Œå–å€¼ HmacSHA256 æˆ–è€… HmacSHA1ï¼Œå¯é€‰ï¼Œé»˜è®¤å€¼ä¸º HmacSHA256 x-ca-signature-headersï¼šæ‰€æœ‰ç­¾åå¤´çš„ Key çš„é›†åˆï¼Œä½¿ç”¨è‹±æ–‡é€—å·åˆ†éš”ï¼Œå¯é€‰ x-ca-signatureï¼šç­¾åï¼Œå¿…é€‰ ä¸‹é¢æ˜¯æºå¸¦ç­¾åçš„æ•´ä¸ª HTTP è¯·æ±‚çš„ç¤ºä¾‹ï¼š POST /http2test/test?param1=test HTTP/1.1 host:api.aliyun.com accept:application/json; charset=utf-8 ca_version:1 content-type:application/x-www-form-urlencoded; charset=utf-8 x-ca-timestamp:1525872629832 date:Wed, 09 May 2018 13:30:29 GMT+00:00 user-agent:ALIYUN-ANDROID-DEMO x-ca-nonce:c9f15cbf-f4ac-4a6c-b54d-f51abf4b5b44 x-ca-key:203753385 x-ca-signature-method:HmacSHA256 x-ca-signature-headers:x-ca-timestamp,x-ca-key,x-ca-nonce,x-ca-signature-method x-ca-signature:xfX+bZxY2yl7EB/qdoDy9v/uscw3Nnj1pgoU+Bm6xdM= content-length:33 username=xiaoming&amp;password=123456789  ","version":"Next","tagName":"h3"},{"title":"æœåŠ¡ç«¯ç­¾åéªŒè¯æ–¹å¼â€‹","type":1,"pageTitle":"HMAC è®¤è¯","url":"/zh-cn/docs/plugins/authentication/hmac-auth#æœåŠ¡ç«¯ç­¾åéªŒè¯æ–¹å¼","content":"æµç¨‹ç®€ä»‹â€‹ æœåŠ¡å™¨éªŒè¯å®¢æˆ·ç«¯ç­¾åä¸€å…±åˆ†å››æ­¥å¤„ç†ï¼š ä»æ¥æ”¶åˆ°çš„è¯·æ±‚ä¸­æå–å…³é”®æ•°æ®ï¼Œå¾—åˆ°ä¸€ä¸ªç”¨æ¥ç­¾åçš„å­—ç¬¦ä¸² ä»æ¥æ”¶åˆ°çš„è¯·æ±‚ä¸­è¯»å– key ï¼Œé€šè¿‡ key æŸ¥è¯¢åˆ°å¯¹åº”çš„ secret ä½¿ç”¨åŠ å¯†ç®—æ³•å’Œ secret å¯¹å…³é”®æ•°æ®ç­¾åä¸²è¿›è¡ŒåŠ å¯†å¤„ç†ï¼Œå¾—åˆ°ç­¾å ä»æ¥æ”¶åˆ°çš„è¯·æ±‚ä¸­è¯»å–å®¢æˆ·ç«¯ç­¾åï¼Œå¯¹æ¯”æœåŠ¡å™¨ç«¯ç­¾åå’Œå®¢æˆ·ç«¯ç­¾åçš„ä¸€è‡´æ€§ å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ","version":"Next","tagName":"h3"},{"title":"ç­¾åæ’é”™æ–¹æ³•â€‹","type":1,"pageTitle":"HMAC è®¤è¯","url":"/zh-cn/docs/plugins/authentication/hmac-auth#ç­¾åæ’é”™æ–¹æ³•","content":"ç½‘å…³ç­¾åæ ¡éªŒå¤±è´¥æ—¶ï¼Œä¼šå°†æœåŠ¡ç«¯çš„ç­¾åä¸²ï¼ˆStringToSignï¼‰æ”¾åˆ° HTTP Response çš„ Header ä¸­è¿”å›åˆ°å®¢æˆ·ç«¯ï¼ŒKey ä¸ºï¼šX-Ca-Error-Messageï¼Œç”¨æˆ·åªéœ€è¦å°†æœ¬åœ°è®¡ç®—çš„ç­¾åä¸²ï¼ˆStringToSignï¼‰ä¸æœåŠ¡ç«¯è¿”å›çš„ç­¾åä¸²è¿›è¡Œå¯¹æ¯”å³å¯æ‰¾åˆ°é—®é¢˜ï¼› å¦‚æœæœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯çš„ StringToSign ä¸€è‡´è¯·æ£€æŸ¥ç”¨äºç­¾åè®¡ç®—çš„ APP Secret æ˜¯å¦æ­£ç¡®ï¼› å› ä¸º HTTP Header ä¸­æ— æ³•è¡¨ç¤ºæ¢è¡Œï¼Œå› æ­¤ StringToSign ä¸­çš„æ¢è¡Œç¬¦éƒ½è¢«æ›¿æ¢æˆ#ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š X-Ca-Error-Message: Server StringToSign:`GET#application/json##application/json##X-Ca-Key:200000#X-Ca-Timestamp:1589458000000#/app/v1/config/keys?keys=TEST`  ","version":"Next","tagName":"h3"},{"title":"ç›¸å…³é”™è¯¯ç â€‹","type":1,"pageTitle":"HMAC è®¤è¯","url":"/zh-cn/docs/plugins/authentication/hmac-auth#ç›¸å…³é”™è¯¯ç ","content":"HTTP çŠ¶æ€ç \tå‡ºé”™ä¿¡æ¯\tåŸå› è¯´æ˜401\tInvalid Key\tè¯·æ±‚å¤´æœªæä¾› x-ca-keyï¼Œæˆ–è€… x-ca-key æ— æ•ˆ 401\tEmpty Signature\tè¯·æ±‚å¤´æœªæä¾› x-ca-signature ç­¾åä¸² 400\tInvalid Signature\tè¯·æ±‚å¤´ x-ca-signature ç­¾åä¸²ï¼Œä¸æœåŠ¡ç«¯è®¡ç®—å¾—åˆ°ç­¾åä¸ä¸€è‡´ 400\tInvalid Content-MD5\tè¯·æ±‚å¤´ content-md5 ä¸æ­£ç¡® 400\tInvalid Date\tæ ¹æ®è¯·æ±‚å¤´ date è®¡ç®—æ—¶é—´åç§»è¶…è¿‡é…ç½®çš„ date_offset 413\tRequest Body Too Large\tè¯·æ±‚ Body è¶…è¿‡é™åˆ¶å¤§å°ï¼š32 MB 413\tPayload Too Large\tè¯·æ±‚ Body è¶…è¿‡å…¨å±€é…ç½® DownstreamConnectionBufferLimits 403\tUnauthorized Consumer\tè¯·æ±‚çš„è°ƒç”¨æ–¹æ— è®¿é—®æƒé™ ","version":"Next","tagName":"h2"},{"title":"Key è®¤è¯","type":0,"sectionRef":"#","url":"/zh-cn/docs/plugins/authentication/key-auth","content":"","keywords":"higress auth","version":"Next"},{"title":"åŠŸèƒ½è¯´æ˜â€‹","type":1,"pageTitle":"Key è®¤è¯","url":"/zh-cn/docs/plugins/authentication/key-auth#åŠŸèƒ½è¯´æ˜","content":"key-auth æ’ä»¶å®ç°äº†åŸºäº API Key è¿›è¡Œè®¤è¯é‰´æƒçš„åŠŸèƒ½ï¼Œæ”¯æŒä» HTTP è¯·æ±‚çš„ URL å‚æ•°æˆ–è€…è¯·æ±‚å¤´è§£æ API Keyï¼ŒåŒæ—¶éªŒè¯è¯¥ API Key æ˜¯å¦æœ‰æƒé™è®¿é—®ã€‚ ","version":"Next","tagName":"h2"},{"title":"é…ç½®å­—æ®µâ€‹","type":1,"pageTitle":"Key è®¤è¯","url":"/zh-cn/docs/plugins/authentication/key-auth#é…ç½®å­—æ®µ","content":"åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°global_auth\tbool\té€‰å¡«\t-\tè‹¥é…ç½®ä¸ºtrueï¼Œåˆ™å…¨å±€ç”Ÿæ•ˆè®¤è¯æœºåˆ¶; è‹¥é…ç½®ä¸ºfalseï¼Œåˆ™åªå¯¹åšäº†é…ç½®çš„åŸŸåå’Œè·¯ç”±ç”Ÿæ•ˆè®¤è¯æœºåˆ¶; è‹¥ä¸é…ç½®åˆ™ä»…å½“æ²¡æœ‰åŸŸåå’Œè·¯ç”±é…ç½®æ—¶å…¨å±€ç”Ÿæ•ˆï¼ˆå…¼å®¹æœºåˆ¶ï¼‰ consumers\tarray of object\tå¿…å¡«\t-\té…ç½®æœåŠ¡çš„è°ƒç”¨è€…ï¼Œç”¨äºå¯¹è¯·æ±‚è¿›è¡Œè®¤è¯ keys\tarray of string\tå¿…å¡«\t-\tAPI Key çš„æ¥æºå­—æ®µåç§°ï¼Œå¯ä»¥æ˜¯ URL å‚æ•°æˆ–è€… HTTP è¯·æ±‚å¤´åç§° in_query\tbool\tin_query å’Œ in_header è‡³å°‘æœ‰ä¸€ä¸ªä¸º true\ttrue\té…ç½® true æ—¶ï¼Œç½‘å…³ä¼šå°è¯•ä» URL å‚æ•°ä¸­è§£æ API Key in_header\tbool\tin_query å’Œ in_header è‡³å°‘æœ‰ä¸€ä¸ªä¸º true\ttrue\té…ç½® true æ—¶ï¼Œç½‘å…³ä¼šå°è¯•ä» HTTP è¯·æ±‚å¤´ä¸­è§£æ API Key consumers ä¸­æ¯ä¸€é¡¹çš„é…ç½®å­—æ®µè¯´æ˜å¦‚ä¸‹ï¼š åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°credential\tstring\tå¿…å¡«\t-\té…ç½®è¯¥ consumer çš„è®¿é—®å‡­è¯ name\tstring\tå¿…å¡«\t-\té…ç½®è¯¥ consumer çš„åç§° æ³¨æ„ï¼š å¯¹äºé€šè¿‡è®¤è¯é‰´æƒçš„è¯·æ±‚ï¼Œè¯·æ±‚çš„ header ä¼šè¢«æ·»åŠ ä¸€ä¸ª X-Mse-Consumer å­—æ®µï¼Œç”¨ä»¥æ ‡è¯†è°ƒç”¨è€…çš„åç§°ã€‚ ","version":"Next","tagName":"h2"},{"title":"é…ç½®ç¤ºä¾‹â€‹","type":1,"pageTitle":"Key è®¤è¯","url":"/zh-cn/docs/plugins/authentication/key-auth#é…ç½®ç¤ºä¾‹","content":"","version":"Next","tagName":"h2"},{"title":"å¯¹ç‰¹å®šè·¯ç”±æˆ–åŸŸåå¼€å¯â€‹","type":1,"pageTitle":"Key è®¤è¯","url":"/zh-cn/docs/plugins/authentication/key-auth#å¯¹ç‰¹å®šè·¯ç”±æˆ–åŸŸåå¼€å¯","content":"ä»¥ä¸‹é…ç½®å°†å¯¹ç½‘å…³ç‰¹å®šè·¯ç”±æˆ–åŸŸåå¼€å¯ Key Auth è®¤è¯å’Œé‰´æƒï¼Œæ³¨æ„ credential å­—æ®µä¸èƒ½é‡å¤ã€‚ global_auth: true consumers: - credential: 2bda943c-ba2b-11ec-ba07-00163e1250b5 name: consumer1 - credential: c8c8e9ca-558e-4a2d-bb62-e700dcc40e35 name: consumer2 keys: - apikey - x-api-key  è·¯ç”±çº§é…ç½® å¯¹ route-a å’Œ route-b è¿™ä¸¤ä¸ªè·¯ç”±åšå¦‚ä¸‹é…ç½®ï¼š allow: - consumer1  å¯¹ *.example.com å’Œ test.com åœ¨è¿™ä¸¤ä¸ªåŸŸååšå¦‚ä¸‹é…ç½®: allow: - consumer2  æ ¹æ®è¯¥é…ç½®ï¼Œä¸‹åˆ—è¯·æ±‚å¯ä»¥å…è®¸è®¿é—®ã€‚ å‡è®¾ä»¥ä¸‹è¯·æ±‚ä¼šåŒ¹é…åˆ° route-a è¿™æ¡è·¯ç”±ã€‚ å°† API Key è®¾ç½®åœ¨ url å‚æ•°ä¸­ã€‚ curl http://xxx.hello.com/test?apikey=2bda943c-ba2b-11ec-ba07-00163e1250b5  å°† API Key è®¾ç½®åœ¨ http è¯·æ±‚å¤´ä¸­ã€‚ curl http://xxx.hello.com/test -H 'x-api-key: 2bda943c-ba2b-11ec-ba07-00163e1250b5'  è®¤è¯é‰´æƒé€šè¿‡åï¼Œè¯·æ±‚çš„headerä¸­ä¼šè¢«æ·»åŠ ä¸€ä¸ª X-Mse-Consumer å­—æ®µï¼Œåœ¨æ­¤ä¾‹ä¸­å…¶å€¼ä¸º consumer1ï¼Œç”¨ä»¥æ ‡è¯†è°ƒç”¨æ–¹çš„åç§° ä¸‹åˆ—è¯·æ±‚å°†æ‹’ç»è®¿é—®ã€‚ è¯·æ±‚æœªæä¾› API Keyï¼Œè¿”å› 401ã€‚ curl http://xxx.hello.com/test  è¯·æ±‚æä¾›çš„ API Key æ— æƒè®¿é—®ï¼Œè¿”å› 401ã€‚ curl http://xxx.hello.com/test?apikey=926d90ac-ba2e-11ec-ab68-00163e1250b5  æ ¹æ®è¯·æ±‚æä¾›çš„ API KeyåŒ¹é…åˆ°çš„è°ƒç”¨è€…æ— è®¿é—®æƒé™ï¼Œè¿”å› 403ã€‚ # consumer2ä¸åœ¨route-açš„allowåˆ—è¡¨é‡Œ curl http://xxx.hello.com/test?apikey=c8c8e9ca-558e-4a2d-bb62-e700dcc40e35  ","version":"Next","tagName":"h3"},{"title":"ç½‘å…³å®ä¾‹çº§åˆ«å¼€å¯â€‹","type":1,"pageTitle":"Key è®¤è¯","url":"/zh-cn/docs/plugins/authentication/key-auth#ç½‘å…³å®ä¾‹çº§åˆ«å¼€å¯","content":"ä»¥ä¸‹é…ç½®æœªæŒ‡å®š matchRules å­—æ®µï¼Œå› æ­¤å°†å¯¹ç½‘å…³å®ä¾‹çº§åˆ«å¼€å¯å…¨å±€ Key Auth è®¤è¯. defaultConfig consumers: - credential: 2bda943c-ba2b-11ec-ba07-00163e1250b5 name: consumer1 - credential: c8c8e9ca-558e-4a2d-bb62-e700dcc40e35 name: consumer2 keys: - apikey in_query: true  å¼€å¯ matchRules æ–¹å¼å¦‚ä¸‹ï¼š matchRules: - config: allow: - consumer1  ","version":"Next","tagName":"h3"},{"title":"ç›¸å…³é”™è¯¯ç â€‹","type":1,"pageTitle":"Key è®¤è¯","url":"/zh-cn/docs/plugins/authentication/key-auth#ç›¸å…³é”™è¯¯ç ","content":"HTTP çŠ¶æ€ç \tå‡ºé”™ä¿¡æ¯\tåŸå› è¯´æ˜401\tRequest denied by Key Auth check. Muti API key found in request\tè¯·æ±‚æä¾›å¤šä¸ª API Key 401\tRequest denied by Key Auth check. No API key found in request\tè¯·æ±‚æœªæä¾› API Key 401\tRequest denied by Key Auth check. Invalid API key\tä¸å…è®¸å½“å‰ API Key è®¿é—® 403\tRequest denied by Key Auth check. Unauthorized consumer\tè¯·æ±‚çš„è°ƒç”¨æ–¹æ— è®¿é—®æƒé™ ","version":"Next","tagName":"h2"},{"title":"OIDC è®¤è¯","type":0,"sectionRef":"#","url":"/zh-cn/docs/plugins/authentication/oidc","content":"","keywords":"higress auth","version":"Next"},{"title":"åŠŸèƒ½è¯´æ˜â€‹","type":1,"pageTitle":"OIDC è®¤è¯","url":"/zh-cn/docs/plugins/authentication/oidc#åŠŸèƒ½è¯´æ˜","content":"oidc æ’ä»¶å®ç°äº† OIDC è®¤è¯èƒ½åŠ›, æ’ä»¶ç›®å‰å­˜åœ¨çš„ CSRF æ”»å‡»é—®é¢˜ï¼Œä¸å»ºè®®ç”¨äºç”Ÿäº§ç¯å¢ƒã€‚ ","version":"Next","tagName":"h2"},{"title":"é…ç½®å­—æ®µâ€‹","type":1,"pageTitle":"OIDC è®¤è¯","url":"/zh-cn/docs/plugins/authentication/oidc#é…ç½®å­—æ®µ","content":"å­—æ®µ\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°issuer\tstring\tå¿…å¡«\t-\tè®¾ç½®è®¤è¯æœåŠ¡çš„ issuer ï¼Œå³ç­¾å‘äººã€‚ client_id\tstring\tå¿…å¡«\t-\tè¾“å…¥æœåŠ¡æ³¨å†Œçš„åº”ç”¨ ID ã€‚ client_secret\tstring\tå¿…å¡«\t-\tè¾“å…¥æœåŠ¡æ³¨å†Œçš„åº”ç”¨ Secret ã€‚ redirect_url\tstring\tå¿…å¡«\t-\tè¾“å…¥æˆæƒæˆåŠŸåçš„é‡å®šå‘åœ°å€ï¼Œéœ€è¦ä¸ OIDC ä¸­é…ç½®çš„é‡å®šå‘åœ°å€ä¿æŒä¸€è‡´ã€‚è¯¥åœ°å€çš„åç¼€éœ€ä¸º (oauth2/callback)ã€‚ client_url\tstring\tå¿…å¡«\t-\tç™»é™†æˆåŠŸè·³è½¬åçš„åœ°å€ï¼Œå¦‚æœæœªè·³è½¬æˆåŠŸï¼Œè¯·æ£€æŸ¥è®¾ç½®çš„ cookiename æ˜¯å¦é‡å¤ã€‚ scopes\tArray\tå¿…å¡«\t-\tè¾“å…¥æˆæƒä½œç”¨åŸŸçš„æ•°ç»„ã€‚ skip_expiry_check\tbool\té€‰å¡«\tfalse\tæ§åˆ¶æ˜¯å¦æ£€æµ‹ IDToken çš„è¿‡æœŸçŠ¶æ€ã€‚ skip_nonce_check\tbool\té€‰å¡«\ttrue\tæ§åˆ¶æ˜¯å¦æ£€æµ‹ Nonce å€¼ã€‚ timeout_millis\tint\té€‰å¡«\t500\tè®¾ç½®è¯·æ±‚ä¸è®¤è¯æœåŠ¡è¿æ¥çš„è¶…æ—¶æ—¶é•¿ã€‚å¦‚æœé¢‘ç¹é‡åˆ°è¶…æ—¶é”™è¯¯ï¼Œå»ºè®®å¢åŠ è¯¥æ—¶é•¿ã€‚ cookie_name\tstring\té€‰å¡«\t&quot;_oidc_wasm&quot;\tè®¾ç½® cookie çš„åç§°, å¦‚æœä¸€ä¸ªåŸŸåä¸‹å¤šä¸ªè·¯ç”±è®¾ç½®ä¸åŒçš„è®¤è¯æœåŠ¡ï¼Œå»ºè®®è®¾ç½®ä¸åŒåç§°ã€‚ cookie_domain\tstring\tå¿…å¡«\t-\tè®¾ç½® cookie çš„åŸŸåã€‚ cookie_path\tstring\té€‰å¡«\t&quot;/&quot;\tè®¾ç½® cookie çš„å­˜å‚¨è·¯å¾„ã€‚ cookie_secure\tbool\té€‰å¡«\tfalse\tæ§åˆ¶ cookie æ˜¯å¦åªåœ¨ HTTPS ä¸‹ä¼ è¾“ã€‚ cookie_httponly\tbool\té€‰å¡«\ttrue\tæ§åˆ¶ cookie æ˜¯å¦ä»…é™äº HTTP ä¼ è¾“ï¼Œç¦æ­¢JavaScriptè®¿é—®ã€‚ cookie_samesite\tstring\té€‰å¡«\t&quot;Lax&quot;\tè®¾ç½® cookie çš„ SameSite å±æ€§ï¼Œå¦‚ï¼š&quot;Lax&quot;, &quot;none&quot;ã€‚ç¬¬ä¸‰æ–¹è·³è½¬ä¸€èˆ¬å»ºè®®é»˜è®¤è®¾ç½®ä¸ºLax service_source\tstring\tå¿…å¡«\t-\tç±»å‹ä¸ºå›ºå®š ip æˆ–è€… DNS ,è¾“å…¥è®¤è¯ oidc æœåŠ¡çš„æ³¨å†Œæ¥æºã€‚ service_name\tstring\tå¿…å¡«\t-\tè¾“å…¥è®¤è¯ oidc æœåŠ¡çš„æ³¨å†Œåç§°ã€‚ service_port\tint\tå¿…å¡«\t-\tè¾“å…¥è®¤è¯ oidc æœåŠ¡çš„æœåŠ¡ç«¯å£ã€‚ service_host\tstring\tå¿…å¡«\t-\tå½“ç±»å‹ä¸ºå›ºå®šipæ—¶å¿…é¡»å¡«å†™,è¾“å…¥è®¤è¯ oidc æœåŠ¡çš„ä¸»æœºåã€‚ service_domain\tstring\tå¿…å¡«\t-\tå½“ç±»å‹ä¸ºDNSæ—¶å¿…é¡»å¡«å†™ï¼Œè¾“å…¥è®¤è¯ oidc æœåŠ¡çš„domainã€‚ è¿™æ˜¯ä¸€ä¸ªç”¨äº OIDC è®¤è¯é…ç½®çš„è¡¨æ ¼ï¼Œç¡®ä¿åœ¨æä¾›æ‰€æœ‰å¿…è¦çš„ä¿¡æ¯æ—¶éµå¾ªä¸Šè¿°æŒ‡å¯¼ã€‚ ","version":"Next","tagName":"h2"},{"title":"é…ç½®ç¤ºä¾‹â€‹","type":1,"pageTitle":"OIDC è®¤è¯","url":"/zh-cn/docs/plugins/authentication/oidc#é…ç½®ç¤ºä¾‹","content":"","version":"Next","tagName":"h2"},{"title":"å›ºå®š IPâ€‹","type":1,"pageTitle":"OIDC è®¤è¯","url":"/zh-cn/docs/plugins/authentication/oidc#å›ºå®š-ip","content":"issuer: &quot;http://127.0.0.1:9090/realms/myrealm&quot; redirect_url: &quot;http://foo.bar.com/bar/oauth2/callback&quot; client_url: &quot;http://foo.bar.com/&quot; scopes: - &quot;openid&quot; - &quot;email&quot; cookie_name: &quot;_oauth2_wasm_keyclocak&quot; cookie_domain: &quot;foo.bar.com&quot; client_id: &quot;xxxxxxxxxxxx&quot; client_secret: &quot;xxxxxxxxxxxxxx&quot; service_host: &quot;127.0.0.1:9090&quot; service_name: &quot;keyclocak&quot; service_port: 80 service_source: &quot;ip&quot;  ","version":"Next","tagName":"h3"},{"title":"DNSåŸŸåâ€‹","type":1,"pageTitle":"OIDC è®¤è¯","url":"/zh-cn/docs/plugins/authentication/oidc#dnsåŸŸå","content":"åœ¨æœåŠ¡æ¥æºä¸­æ³¨å†Œå¥½æœåŠ¡åï¼Œåˆ›å»ºå¯¹åº”çš„ ingressã€‚ apiVersion: networking.k8s.io/v1 kind: Ingress metadata: name: example-ingress annotations: higress.io/destination: okta.dns higress.io/backend-protocol: &quot;HTTPS&quot; higress.io/ignore-path-case: &quot;false&quot; spec: ingressClassName: higress rules: - host: foo.bar.com http: paths: - path: / pathType: Prefix backend: resource: apiGroup: networking.higress.io kind: McpBridge name: default  ","version":"Next","tagName":"h3"},{"title":"åˆ›å»º Wasm æ’ä»¶â€‹","type":1,"pageTitle":"OIDC è®¤è¯","url":"/zh-cn/docs/plugins/authentication/oidc#åˆ›å»º-wasm-æ’ä»¶","content":"issuer: &quot;https://dev-65874123.okta.com&quot; redirect_url: &quot;http://foo.bar.com/a/oauth2/callback&quot; scopes: - &quot;openid&quot; - &quot;email&quot; client_url: &quot;http://foo.bar.com/a&quot; cookie_domain: &quot;foo.bar.com&quot; client_id: &quot;xxxxxxxxxxxxxxx&quot; client_secret: &quot;xxxxxxx&quot; service_domain: &quot;dev-65874123.okta.com&quot; service_name: &quot;okta&quot; service_port: 443 service_source: &quot;dns&quot; timeout_millis: 2000  åœ¨é€šè¿‡æ’ä»¶éªŒè¯åä¼šæºå¸¦ Authorizationçš„æ ‡å¤´æºå¸¦ä»¤ç‰Œã€‚ ","version":"Next","tagName":"h3"},{"title":"è‡ªå®šä¹‰æ’ä»¶","type":0,"sectionRef":"#","url":"/zh-cn/docs/plugins/custom","content":"","keywords":"higress custom plugin","version":"Next"},{"title":"ç¼–è¾‘ Wasm æ–‡ä»¶â€‹","type":1,"pageTitle":"è‡ªå®šä¹‰æ’ä»¶","url":"/zh-cn/docs/plugins/custom#ç¼–è¾‘-wasm-æ–‡ä»¶","content":"ç”¨äºä½¿ç”¨ Go è¯­è¨€å¼€å‘ Higress çš„ Wasm æ’ä»¶çš„SDKæ’ä»¶å¼€å‘ç¤ºä¾‹ ","version":"Next","tagName":"h2"},{"title":"æ„å»º Wasm é•œåƒâ€‹","type":1,"pageTitle":"è‡ªå®šä¹‰æ’ä»¶","url":"/zh-cn/docs/plugins/custom#æ„å»º-wasm-é•œåƒ","content":"ä½ ä¹Ÿå¯ä»¥é€‰æ‹©å…ˆåœ¨æœ¬åœ°å°† wasm æ„å»ºå‡ºæ¥ï¼Œå†æ‹·è´åˆ° Docker é•œåƒä¸­ã€‚è¿™è¦æ±‚ä½ è¦å…ˆåœ¨æœ¬åœ°æ­å»ºæ„å»ºç¯å¢ƒã€‚ ç¼–è¯‘ç¯å¢ƒè¦æ±‚å¦‚ä¸‹ï¼š Go ç‰ˆæœ¬: &gt;= 1.18ï¼ˆéœ€è¦æ”¯æŒæ³›å‹ç‰¹æ€§ï¼‰ TinyGo ç‰ˆæœ¬: &gt;= 0.28.1ï¼ˆå»ºè®®ä½¿ç”¨ 0.28.1 ï¼‰ ä¸‹é¢æ˜¯æœ¬åœ°æ­¥éª¤æ„å»º request-block æ’ä»¶çš„ä¾‹å­ã€‚ ","version":"Next","tagName":"h2"},{"title":"step1. ç¼–è¯‘ wasmâ€‹","type":1,"pageTitle":"è‡ªå®šä¹‰æ’ä»¶","url":"/zh-cn/docs/plugins/custom#step1-ç¼–è¯‘-wasm","content":"tinygo build -o main.wasm -scheduler=none -target=wasi -gc=custom -tags='custommalloc nottinygc_finalizer' ./main.go  ","version":"Next","tagName":"h3"},{"title":"step2. æ„å»ºå¹¶æ¨é€æ’ä»¶çš„ docker é•œåƒâ€‹","type":1,"pageTitle":"è‡ªå®šä¹‰æ’ä»¶","url":"/zh-cn/docs/plugins/custom#step2-æ„å»ºå¹¶æ¨é€æ’ä»¶çš„-docker-é•œåƒ","content":"ä½¿ç”¨è¿™ä»½ç®€å•çš„ Dockerfile FROM scratch COPY main.wasm plugin.wasm  docker build -t &lt;your_registry_hub&gt;/request-block:1.0.0 -f &lt;your_dockerfile&gt; . docker push &lt;your_registry_hub&gt;/request-block:1.0.0  ","version":"Next","tagName":"h3"},{"title":"ç”Ÿæ•ˆ Wasm æ’ä»¶â€‹","type":1,"pageTitle":"è‡ªå®šä¹‰æ’ä»¶","url":"/zh-cn/docs/plugins/custom#ç”Ÿæ•ˆ-wasm-æ’ä»¶","content":"","version":"Next","tagName":"h2"},{"title":"ä½¿ç”¨ Higress æ§åˆ¶å°â€‹","type":1,"pageTitle":"è‡ªå®šä¹‰æ’ä»¶","url":"/zh-cn/docs/plugins/custom#ä½¿ç”¨-higress-æ§åˆ¶å°","content":"åœ¨æ’ä»¶å¸‚åœºä¸­åˆ›å»ºç‚¹å‡»åˆ›å»ºæŒ‰é’®ï¼Œå°±å¯ä»¥åˆ›å»ºè‡ªå®šä¹‰æ’ä»¶ï¼Œåœ¨é•œåƒåœ°å€ä¸€æ ä¸­å¡«å…¥ä¸Šé¢æ„å»ºå‡ºçš„ Wasm é•œåƒåœ°å€å³å¯ï¼› åˆ›å»ºå®Œæˆåï¼Œç‚¹å‡»æ’ä»¶å¡ç‰‡çš„é…ç½®æŒ‰é’®ï¼Œå¡«å…¥æ’ä»¶çš„é…ç½®ï¼ˆå¦‚æœæœ‰ï¼‰ï¼Œæ‰“å¼€å¼€å¯å¼€å…³å°±ç”Ÿæ•ˆäº†ã€‚ å¦‚æœæ’ä»¶é€»è¾‘å‘ç”Ÿäº†å˜æ›´ï¼Œå¯ä»¥æ„å»ºä¸€ä¸ªæ–°çš„é•œåƒï¼Œå¹¶ä½¿ç”¨ä¸åŒçš„é•œåƒ tagï¼Œç‚¹æ’ä»¶å¡ç‰‡å³ä¸Šæ–¹èœå•ä¸­çš„ç¼–è¾‘æŒ‰é’®ï¼Œå°† Wasm é•œåƒåœ°å€ä¿®æ”¹ä¸ºæ–°ç‰ˆæœ¬çš„åœ°å€å³å¯ã€‚ ","version":"Next","tagName":"h3"},{"title":"ä½¿ç”¨ CRDâ€‹","type":1,"pageTitle":"è‡ªå®šä¹‰æ’ä»¶","url":"/zh-cn/docs/plugins/custom#ä½¿ç”¨-crd","content":"ç¼–å†™ WasmPlugin èµ„æºå¦‚ä¸‹ï¼š apiVersion: extensions.higress.io/v1alpha1 kind: WasmPlugin metadata: name: request-block namespace: higress-system spec: defaultConfig: block_urls: - &quot;swagger.html&quot; url: oci://&lt;your_registry_hub&gt;/request-block:1.0.0 # ä¹‹å‰æ„å»ºå’Œæ¨é€çš„ image åœ°å€  ä½¿ç”¨ kubectl apply -f &lt;your-wasm-plugin-yaml&gt; ä½¿èµ„æºç”Ÿæ•ˆã€‚ èµ„æºç”Ÿæ•ˆåï¼Œå¦‚æœè¯·æ±‚urlæºå¸¦ swagger.html, åˆ™è¿™ä¸ªè¯·æ±‚å°±ä¼šè¢«æ‹’ç»ï¼Œä¾‹å¦‚ï¼š curl &lt;your_gateway_address&gt;/api/user/swagger.html  HTTP/1.1 403 Forbidden date: Wed, 09 Nov 2022 12:12:32 GMT server: istio-envoy content-length: 0  ","version":"Next","tagName":"h3"},{"title":"JWT è®¤è¯","type":0,"sectionRef":"#","url":"/zh-cn/docs/plugins/authentication/jwt-auth","content":"","keywords":"higress auth","version":"Next"},{"title":"åŠŸèƒ½è¯´æ˜â€‹","type":1,"pageTitle":"JWT è®¤è¯","url":"/zh-cn/docs/plugins/authentication/jwt-auth#åŠŸèƒ½è¯´æ˜","content":"jwt-auth æ’ä»¶å®ç°äº†åŸºäº JWT(JSON Web Tokens) è¿›è¡Œè®¤è¯é‰´æƒçš„åŠŸèƒ½ï¼Œæ”¯æŒä» HTTP è¯·æ±‚çš„ URL å‚æ•°ã€è¯·æ±‚å¤´ã€Cookie å­—æ®µè§£æ JWTï¼ŒåŒæ—¶éªŒè¯è¯¥ Token æ˜¯å¦æœ‰æƒé™è®¿é—®ã€‚ ","version":"Next","tagName":"h2"},{"title":"é…ç½®å­—æ®µâ€‹","type":1,"pageTitle":"JWT è®¤è¯","url":"/zh-cn/docs/plugins/authentication/jwt-auth#é…ç½®å­—æ®µ","content":"","version":"Next","tagName":"h2"},{"title":"å…¨å±€é…ç½®â€‹","type":1,"pageTitle":"JWT è®¤è¯","url":"/zh-cn/docs/plugins/authentication/jwt-auth#å…¨å±€é…ç½®","content":"åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°consumers\tarray of object\tå¿…å¡«\t-\té…ç½®æœåŠ¡çš„è°ƒç”¨è€…ï¼Œç”¨äºå¯¹è¯·æ±‚è¿›è¡Œè®¤è¯ global_auth\tbool\té€‰å¡«\t-\tè‹¥é…ç½®ä¸º trueï¼Œåˆ™å…¨å±€ç”Ÿæ•ˆè®¤è¯æœºåˆ¶; è‹¥é…ç½®ä¸º falseï¼Œåˆ™åªå¯¹åšäº†é…ç½®çš„åŸŸåå’Œè·¯ç”±ç”Ÿæ•ˆè®¤è¯æœºåˆ¶; è‹¥ä¸é…ç½®åˆ™ä»…å½“æ²¡æœ‰åŸŸåå’Œè·¯ç”±é…ç½®æ—¶å…¨å±€ç”Ÿæ•ˆï¼ˆå…¼å®¹æœºåˆ¶ï¼‰ consumers ä¸­æ¯ä¸€é¡¹çš„é…ç½®å­—æ®µè¯´æ˜å¦‚ä¸‹ï¼š åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°name\tstring\tå¿…å¡«\t-\té…ç½®è¯¥ consumer çš„åç§° jwks\tstring\tå¿…å¡«\t-\thttps://www.rfc-editor.org/rfc/rfc7517 æŒ‡å®šçš„ json æ ¼å¼å­—ç¬¦ä¸²ï¼Œæ˜¯ç”±éªŒè¯ JWT ä¸­ç­¾åçš„å…¬é’¥ï¼ˆæˆ–å¯¹ç§°å¯†é’¥ï¼‰ç»„æˆçš„ Json Web Key Set issuer\tstring\tå¿…å¡«\t-\tJWT çš„ç­¾å‘è€…ï¼Œéœ€è¦å’Œ payload ä¸­çš„ iss å­—æ®µä¿æŒä¸€è‡´ claims_to_headers\tarray of object\té€‰å¡«\t-\tæŠ½å– JWT çš„ payload ä¸­æŒ‡å®šå­—æ®µï¼Œè®¾ç½®åˆ°æŒ‡å®šçš„è¯·æ±‚å¤´ä¸­è½¬å‘ç»™åç«¯ from_headers\tarray of object\té€‰å¡«\t[{&quot;name&quot;:&quot;Authorization&quot;,&quot;value_prefix&quot;:&quot;Bearer &quot;}]\tä»æŒ‡å®šçš„è¯·æ±‚å¤´ä¸­æŠ½å– JWT from_params\tarray of string\té€‰å¡«\taccess_token\tä»æŒ‡å®šçš„ URL å‚æ•°ä¸­æŠ½å– JWT from_cookies\tarray of string\té€‰å¡«\t-\tä»æŒ‡å®šçš„ cookie ä¸­æŠ½å– JWT clock_skew_seconds\tnumber\té€‰å¡«\t60\tæ ¡éªŒ JWT çš„ exp å’Œ iat å­—æ®µæ—¶å…è®¸çš„æ—¶é’Ÿåç§»é‡ï¼Œå•ä½ä¸ºç§’ keep_token\tbool\té€‰å¡«\ttrue\tè½¬å‘ç»™åç«¯æ—¶æ˜¯å¦ä¿ç•™ JWT æ³¨æ„ï¼š åªæœ‰å½“from_headers,from_params,from_cookieså‡æœªé…ç½®æ—¶ï¼Œæ‰ä¼šä½¿ç”¨é»˜è®¤å€¼ from_headers ä¸­æ¯ä¸€é¡¹çš„é…ç½®å­—æ®µè¯´æ˜å¦‚ä¸‹ï¼š åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°name\tstring\tå¿…å¡«\t-\tæŠ½å– JWT çš„è¯·æ±‚ header value_prefix\tstring\tå¿…å¡«\t-\tå¯¹è¯·æ±‚ header çš„ value å»é™¤æ­¤å‰ç¼€ï¼Œå‰©ä½™éƒ¨åˆ†ä½œä¸º JWT claims_to_headers ä¸­æ¯ä¸€é¡¹çš„é…ç½®å­—æ®µè¯´æ˜å¦‚ä¸‹ï¼š åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°claim\tstring\tå¿…å¡«\t-\tJWT payload ä¸­çš„æŒ‡å®šå­—æ®µï¼Œè¦æ±‚å¿…é¡»æ˜¯å­—ç¬¦ä¸²æˆ–æ— ç¬¦å·æ•´æ•°ç±»å‹ header\tstring\tå¿…å¡«\t-\tä»payload å–å‡ºå­—æ®µçš„å€¼è®¾ç½®åˆ°è¿™ä¸ªè¯·æ±‚å¤´ä¸­ï¼Œè½¬å‘ç»™åç«¯ override\tbool\té€‰å¡«\ttrue\ttrue æ—¶ï¼Œå­˜åœ¨åŒåè¯·æ±‚å¤´ä¼šè¿›è¡Œè¦†ç›–ï¼›false æ—¶ï¼Œè¿½åŠ åŒåè¯·æ±‚å¤´ ","version":"Next","tagName":"h3"},{"title":"åŸŸåå’Œè·¯ç”±çº§é…ç½®â€‹","type":1,"pageTitle":"JWT è®¤è¯","url":"/zh-cn/docs/plugins/authentication/jwt-auth#åŸŸåå’Œè·¯ç”±çº§é…ç½®","content":"åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°allow\tarray of string\tå¿…å¡«\t-\tå¯¹äºç¬¦åˆåŒ¹é…æ¡ä»¶çš„è¯·æ±‚ï¼Œé…ç½®å…è®¸è®¿é—®çš„ consumer åç§° æ³¨æ„ï¼š å¯¹äºé€šè¿‡è®¤è¯é‰´æƒçš„è¯·æ±‚ï¼Œè¯·æ±‚çš„headerä¼šè¢«æ·»åŠ ä¸€ä¸ªX-Mse-Consumerå­—æ®µï¼Œç”¨ä»¥æ ‡è¯†è°ƒç”¨è€…çš„åç§°ã€‚ ","version":"Next","tagName":"h3"},{"title":"é…ç½®ç¤ºä¾‹â€‹","type":1,"pageTitle":"JWT è®¤è¯","url":"/zh-cn/docs/plugins/authentication/jwt-auth#é…ç½®ç¤ºä¾‹","content":"","version":"Next","tagName":"h2"},{"title":"å¯¹ç‰¹å®šè·¯ç”±æˆ–åŸŸåå¼€å¯â€‹","type":1,"pageTitle":"JWT è®¤è¯","url":"/zh-cn/docs/plugins/authentication/jwt-auth#å¯¹ç‰¹å®šè·¯ç”±æˆ–åŸŸåå¼€å¯","content":"ä»¥ä¸‹é…ç½®å°†å¯¹ç½‘å…³ç‰¹å®šè·¯ç”±æˆ–åŸŸåå¼€å¯ Jwt Auth è®¤è¯å’Œé‰´æƒï¼Œæ³¨æ„å¦‚æœä¸€ä¸ª JWT èƒ½åŒ¹é…å¤šä¸ª jwksï¼Œåˆ™æŒ‰ç…§é…ç½®é¡ºåºå‘½ä¸­ç¬¬ä¸€ä¸ªåŒ¹é…çš„ consumerã€‚ å…¨å±€é…ç½® consumers: - name: consumer1 issuer: abcd jwks: | { &quot;keys&quot;: [ { &quot;kty&quot;: &quot;oct&quot;, &quot;kid&quot;: &quot;123&quot;, &quot;k&quot;: &quot;hM0k3AbXBPpKOGg__Ql2Obcq7s60myWDpbHXzgKUQdYo7YCRp0gUqkCnbGSvZ2rGEl4YFkKqIqW7mTHdj-bcqXpNr-NOznEyMpVPOIlqG_NWVC3dydBgcsIZIdD-MR2AQceEaxriPA_VmiUCwfwL2Bhs6_i7eolXoY11EapLQtutz0BV6ZxQQ4dYUmct--7PLNb4BWJyQeWu0QfbIthnvhYllyl2dgeLTEJT58wzFz5HeNMNz8ohY5K0XaKAe5cepryqoXLhA-V-O1OjSG8lCNdKS09OY6O0fkyweKEtuDfien5tHHSsHXoAxYEHPFcSRL4bFPLZ0orTt1_4zpyfew&quot;, &quot;alg&quot;: &quot;HS256&quot; } ] } - name: consumer2 issuer: abc jwks: | { &quot;keys&quot;: [ { &quot;kty&quot;: &quot;RSA&quot;, &quot;e&quot;: &quot;AQAB&quot;, &quot;use&quot;: &quot;sig&quot;, &quot;kid&quot;: &quot;123&quot;, &quot;alg&quot;: &quot;RS256&quot;, &quot;n&quot;: &quot;i0B67f1jggT9QJlZ_8QL9QQ56LfurrqDhpuu8BxtVcfxrYmaXaCtqTn7OfCuca7cGHdrJIjq99rz890NmYFZuvhaZ-LMt2iyiSb9LZJAeJmHf7ecguXS_-4x3hvbsrgUDi9tlg7xxbqGYcrco3anmalAFxsbswtu2PAXLtTnUo6aYwZsWA6ksq4FL3-anPNL5oZUgIp3HGyhhLTLdlQcC83jzxbguOim-0OEz-N4fniTYRivK7MlibHKrJfO3xa_6whBS07HW4Ydc37ZN3Rx9Ov3ZyV0idFblU519nUdqp_inXj1eEpynlxH60Ys_aTU2POGZh_25KXGdF_ZC_MSRw&quot; } ] } global_auth: false  è·¯ç”±çº§é…ç½® å¯¹ route-a å’Œ route-b è¿™ä¸¤ä¸ªè·¯ç”±åšå¦‚ä¸‹é…ç½®ï¼š allow: - consumer1  å¯¹ *.exmaple.com å’Œ test.com åœ¨è¿™ä¸¤ä¸ªåŸŸååšå¦‚ä¸‹é…ç½®ï¼š allow: - consumer2  æ¯æ¡åŒ¹é…è§„åˆ™ä¸‹çš„ allow å­—æ®µç”¨äºæŒ‡å®šè¯¥åŒ¹é…æ¡ä»¶ä¸‹å…è®¸è®¿é—®çš„è°ƒç”¨è€…åˆ—è¡¨ï¼› è‹¥æ˜¯åœ¨æ§åˆ¶å°è¿›è¡Œé…ç½®ï¼Œæ­¤ä¾‹æŒ‡å®šçš„ route-a å’Œ route-b å³åœ¨æ§åˆ¶å°åˆ›å»ºè·¯ç”±æ—¶å¡«å†™çš„è·¯ç”±åç§°ï¼Œå½“åŒ¹é…åˆ°è¿™ä¸¤ä¸ªè·¯ç”±æ—¶ï¼Œå°†å…è®¸ name ä¸º consumer1 çš„è°ƒç”¨è€…è®¿é—®ï¼Œå…¶ä»–è°ƒç”¨è€…ä¸å…è®¸è®¿é—®ï¼› æ­¤ä¾‹æŒ‡å®šçš„ *.example.com å’Œ test.com ç”¨äºåŒ¹é…è¯·æ±‚çš„åŸŸåï¼Œå½“å‘ç°åŸŸååŒ¹é…æ—¶ï¼Œå°†å…è®¸ name ä¸º consumer2 çš„è°ƒç”¨è€…è®¿é—®ï¼Œå…¶ä»–è°ƒç”¨è€…ä¸å…è®¸è®¿é—®ã€‚ è®¤è¯æˆåŠŸåï¼Œè¯·æ±‚çš„headerä¸­ä¼šè¢«æ·»åŠ ä¸€ä¸ª X-Mse-Consumer å­—æ®µï¼Œå…¶å€¼ä¸ºè°ƒç”¨æ–¹çš„åç§°ï¼Œä¾‹å¦‚ consumer-1ã€‚ æ ¹æ®è¯¥é…ç½®ï¼Œä¸‹åˆ—è¯·æ±‚å¯ä»¥å…è®¸è®¿é—® å‡è®¾ä»¥ä¸‹è¯·æ±‚ä¼šåŒ¹é…åˆ° route-a è¿™æ¡è·¯ç”±ã€‚ å°† JWT è®¾ç½®åœ¨ URL å‚æ•°ä¸­ã€‚ curl 'http://xxx.hello.com/test?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjEyMyJ9.eyJpc3MiOiJhYmNkIiwic3ViIjoidGVzdCIsImlhdCI6MTY2NTY2MDUyNywiZXhwIjoxODY1NjczODE5fQ.-vBSV0bKeDwQcuS6eeSZN9dLTUnSnZVk8eVCXdooCQ4'  å°† JWT è®¾ç½®åœ¨ HTTP è¯·æ±‚å¤´ä¸­ã€‚ curl http://xxx.hello.com/test -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjEyMyJ9.eyJpc3MiOiJhYmNkIiwic3ViIjoidGVzdCIsImlhdCI6MTY2NTY2MDUyNywiZXhwIjoxODY1NjczODE5fQ.-vBSV0bKeDwQcuS6eeSZN9dLTUnSnZVk8eVCXdooCQ4'  è®¤è¯é‰´æƒé€šè¿‡åï¼Œè¯·æ±‚çš„ header ä¸­ä¼šè¢«æ·»åŠ ä¸€ä¸ª X-Mse-Consumer å­—æ®µï¼Œåœ¨æ­¤ä¾‹ä¸­å…¶å€¼ä¸º consumer1ï¼Œç”¨ä»¥æ ‡è¯†è°ƒç”¨æ–¹çš„åç§°ã€‚ ä¸‹åˆ—è¯·æ±‚å°†æ‹’ç»è®¿é—® è¯·æ±‚æœªæä¾› JWTï¼Œè¿”å› 401ã€‚ curl http://xxx.hello.com/test  æ ¹æ®è¯·æ±‚æä¾›çš„ JWT åŒ¹é…åˆ°çš„è°ƒç”¨è€…æ— è®¿é—®æƒé™ï¼Œè¿”å› 403ã€‚ ## consumer1 ä¸åœ¨ *.example.com çš„ allow åˆ—è¡¨é‡Œ curl 'http://xxx.example.com/test' -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjEyMyJ9.eyJpc3MiOiJhYmNkIiwic3ViIjoidGVzdCIsImlhdCI6MTY2NTY2MDUyNywiZXhwIjoxODY1NjczODE5fQ.-vBSV0bKeDwQcuS6eeSZN9dLTUnSnZVk8eVCXdooCQ4'  ","version":"Next","tagName":"h3"},{"title":"å¸¸è§é”™è¯¯ç è¯´æ˜â€‹","type":1,"pageTitle":"JWT è®¤è¯","url":"/zh-cn/docs/plugins/authentication/jwt-auth#å¸¸è§é”™è¯¯ç è¯´æ˜","content":"HTTP çŠ¶æ€ç \tå‡ºé”™ä¿¡æ¯\tåŸå› è¯´æ˜401\tJwt missing\tè¯·æ±‚å¤´æœªæä¾›JWT 401\tJwt expired\tJWTå·²ç»è¿‡æœŸ 401\tJwt verification fails\tJWT payloadæ ¡éªŒå¤±è´¥ï¼Œå¦‚issä¸åŒ¹é… 403\tAccess Denied\tæ— æƒé™è®¿é—®å½“å‰è·¯ç”± ","version":"Next","tagName":"h3"},{"title":"æœºåˆ¶è¯´æ˜â€‹","type":1,"pageTitle":"JWT è®¤è¯","url":"/zh-cn/docs/plugins/authentication/jwt-auth#æœºåˆ¶è¯´æ˜","content":"","version":"Next","tagName":"h2"},{"title":"1 åŸºäº token çš„è®¤è¯â€‹","type":1,"pageTitle":"JWT è®¤è¯","url":"/zh-cn/docs/plugins/authentication/jwt-auth#1-åŸºäº-token-çš„è®¤è¯","content":"1.1 ç®€ä»‹â€‹ å¾ˆå¤šå¯¹å¤–å¼€æ”¾çš„ API éœ€è¦è¯†åˆ«è¯·æ±‚è€…çš„èº«ä»½ï¼Œå¹¶æ®æ­¤åˆ¤æ–­æ‰€è¯·æ±‚çš„èµ„æºæ˜¯å¦å¯ä»¥è¿”å›ç»™è¯·æ±‚è€…ã€‚token å°±æ˜¯ä¸€ç§ç”¨äºèº«ä»½éªŒè¯çš„æœºåˆ¶ï¼ŒåŸºäºè¿™ç§æœºåˆ¶ï¼Œåº”ç”¨ä¸éœ€è¦åœ¨æœåŠ¡ç«¯ä¿ç•™ç”¨æˆ·çš„è®¤è¯ä¿¡æ¯æˆ–è€…ä¼šè¯ä¿¡æ¯ï¼Œå¯å®ç°æ— çŠ¶æ€ã€åˆ†å¸ƒå¼çš„ Web åº”ç”¨æˆæƒï¼Œä¸ºåº”ç”¨çš„æ‰©å±•æä¾›äº†ä¾¿åˆ©ã€‚ 1.2 æµç¨‹æè¿°â€‹  ä¸Šå›¾æ˜¯ç½‘å…³åˆ©ç”¨ JWT å®ç°è®¤è¯çš„æ•´ä¸ªä¸šåŠ¡æµç¨‹æ—¶åºå›¾ï¼Œä¸‹é¢æˆ‘ä»¬ç”¨æ–‡å­—æ¥è¯¦ç»†æè¿°å›¾ä¸­æ ‡æ³¨çš„æ­¥éª¤ï¼š å®¢æˆ·ç«¯å‘ API ç½‘å…³å‘èµ·è®¤è¯è¯·æ±‚ï¼Œè¯·æ±‚ä¸­ä¸€èˆ¬ä¼šæºå¸¦ç»ˆç«¯ç”¨æˆ·çš„ç”¨æˆ·åå’Œå¯†ç ï¼› ç½‘å…³å°†è¯·æ±‚ç›´æ¥è½¬å‘ç»™åç«¯æœåŠ¡ï¼› åç«¯æœåŠ¡è¯»å–è¯·æ±‚ä¸­çš„éªŒè¯ä¿¡æ¯ï¼ˆæ¯”å¦‚ç”¨æˆ·åã€å¯†ç ï¼‰è¿›è¡ŒéªŒè¯ï¼ŒéªŒè¯é€šè¿‡åä½¿ç”¨ç§é’¥ç”Ÿæˆæ ‡å‡†çš„ tokenï¼Œè¿”å›ç»™ç½‘å…³ï¼› ç½‘å…³å°†æºå¸¦ token çš„åº”ç­”è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯éœ€è¦å°†è¿™ä¸ª token ç¼“å­˜åˆ°æœ¬åœ°ï¼› å®¢æˆ·ç«¯å‘ API ç½‘å…³å‘é€ä¸šåŠ¡è¯·æ±‚ï¼Œè¯·æ±‚ä¸­æºå¸¦ tokenï¼› ç½‘å…³ä½¿ç”¨ç”¨æˆ·è®¾å®šçš„å…¬é’¥å¯¹è¯·æ±‚ä¸­çš„ token è¿›è¡ŒéªŒè¯ï¼ŒéªŒè¯é€šè¿‡åï¼Œå°†è¯·æ±‚é€ä¼ ç»™åç«¯æœåŠ¡ï¼› åç«¯æœåŠ¡è¿›è¡Œä¸šåŠ¡å¤„ç†ååº”ç­”ï¼› ç½‘å…³å°†ä¸šåŠ¡åº”ç­”è¿”å›ç»™å®¢æˆ·ç«¯ã€‚ åœ¨è¿™ä¸ªæ•´ä¸ªè¿‡ç¨‹ä¸­, ç½‘å…³åˆ©ç”¨ token è®¤è¯æœºåˆ¶ï¼Œå®ç°äº†ç”¨æˆ·ä½¿ç”¨è‡ªå·±çš„ç”¨æˆ·ä½“ç³»å¯¹è‡ªå·±APIè¿›è¡Œæˆæƒçš„èƒ½åŠ›ã€‚ä¸‹é¢æˆ‘ä»¬å°±è¦ä»‹ç»ç½‘å…³å®ç° token è®¤è¯æ‰€ä½¿ç”¨çš„ç»“æ„åŒ–ä»¤ç‰Œ Json Web Token(JWT)ã€‚ 1.3 JWTâ€‹ 1.3.1 ç®€ä»‹â€‹ Json Web Tokeï¼ˆJWTï¼‰ï¼Œæ˜¯ä¸ºäº†åœ¨ç½‘ç»œåº”ç”¨ç¯å¢ƒé—´ä¼ é€’å£°æ˜è€Œæ‰§è¡Œçš„ä¸€ç§åŸºäº JSON çš„å¼€æ”¾æ ‡å‡† RFC7519ã€‚JWT ä¸€èˆ¬å¯ä»¥ç”¨ä½œç‹¬ç«‹çš„èº«ä»½éªŒè¯ä»¤ç‰Œï¼Œå¯ä»¥åŒ…å«ç”¨æˆ·æ ‡è¯†ã€ç”¨æˆ·è§’è‰²å’Œæƒé™ç­‰ä¿¡æ¯ï¼Œä»¥ä¾¿äºä»èµ„æºæœåŠ¡å™¨è·å–èµ„æºï¼Œä¹Ÿå¯ä»¥å¢åŠ ä¸€äº›é¢å¤–çš„å…¶å®ƒä¸šåŠ¡é€»è¾‘æ‰€å¿…é¡»çš„å£°æ˜ä¿¡æ¯ï¼Œç‰¹åˆ«é€‚ç”¨äºåˆ†å¸ƒå¼ç«™ç‚¹çš„ç™»å½•åœºæ™¯ã€‚ 1.3.2 JWTçš„æ„æˆâ€‹ eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWV9.TJVA95OrM7E2cBab30RMHrHDcEfxjoYZgeFONFh7HgQ å¦‚ä¸Šé¢çš„ä¾‹å­æ‰€ç¤ºï¼ŒJWT å°±æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç”±ä¸‰éƒ¨åˆ†æ„æˆï¼š Headerï¼ˆå¤´éƒ¨ï¼‰Payloadï¼ˆæ•°æ®ï¼‰Signatureï¼ˆç­¾åï¼‰ Header JWT çš„å¤´éƒ¨æ‰¿è½½ä¸¤ä¸ªä¿¡æ¯ï¼š å£°æ˜ç±»å‹ï¼Œè¿™é‡Œæ˜¯ JWTå£°æ˜åŠ å¯†çš„ç®—æ³• ç½‘å…³æ”¯æŒçš„åŠ å¯†ç®—æ³•å¦‚ä¸‹ï¼š ES256, ES384, ES512, HS256, HS384, HS512, RS256, RS384, RS512, PS256, PS384, PS512, EdDSA  å®Œæ•´çš„å¤´éƒ¨å°±åƒä¸‹é¢è¿™æ ·çš„ JSONï¼š { 'typ': 'JWT', 'alg': 'HS256' }  ç„¶åå°†å¤´éƒ¨è¿›è¡Œ Base64 ç¼–ç ï¼ˆè¯¥ç¼–ç æ˜¯å¯ä»¥å¯¹ç§°è§£ç çš„ï¼‰ï¼Œæ„æˆäº†ç¬¬ä¸€éƒ¨åˆ†ã€‚ eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9 Payload è½½è·å°±æ˜¯å­˜æ”¾æœ‰æ•ˆä¿¡æ¯çš„åœ°æ–¹ã€‚å®šä¹‰ç»†èŠ‚å¦‚ä¸‹ï¼š issï¼šä»¤ç‰Œé¢å‘è€…ã€‚è¡¨ç¤ºè¯¥ä»¤ç‰Œç”±è°åˆ›å»ºï¼Œè¯¥å£°æ˜æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸² sub: Subject Identifierï¼Œiss æä¾›çš„ç»ˆç«¯ç”¨æˆ·çš„æ ‡è¯†ï¼Œåœ¨ iss èŒƒå›´å†…å”¯ä¸€ï¼Œæœ€é•¿ä¸º 255 ä¸ª ASCII ä¸ªå­—ç¬¦ï¼ŒåŒºåˆ†å¤§å°å†™ audï¼šAudience(s)ï¼Œä»¤ç‰Œçš„å—ä¼—ï¼Œåˆ†å¤§å°å†™çš„å­—ç¬¦ä¸²æ•°ç»„ expï¼šExpiration timeï¼Œä»¤ç‰Œçš„è¿‡æœŸæ—¶é—´æˆ³ã€‚è¶…è¿‡æ­¤æ—¶é—´çš„ token ä¼šä½œåºŸï¼Œ è¯¥å£°æ˜æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œæ˜¯ 1970 å¹´ 1 æœˆ 1 æ—¥ä»¥æ¥çš„ç§’æ•° iat: ä»¤ç‰Œçš„é¢å‘æ—¶é—´ï¼Œè¯¥å£°æ˜æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œæ˜¯ 1970 å¹´ 1 æœˆ 1 æ—¥ä»¥æ¥çš„ç§’æ•° jti: ä»¤ç‰Œçš„å”¯ä¸€æ ‡è¯†ï¼Œè¯¥å£°æ˜çš„å€¼åœ¨ä»¤ç‰Œé¢å‘è€…åˆ›å»ºçš„æ¯ä¸€ä¸ªä»¤ç‰Œä¸­éƒ½æ˜¯å”¯ä¸€çš„ï¼Œä¸ºäº†é˜²æ­¢å†²çªï¼Œå®ƒé€šå¸¸æ˜¯ä¸€ä¸ªå¯†ç å­¦éšæœºå€¼ã€‚è¿™ä¸ªå€¼ç›¸å½“äºå‘ç»“æ„åŒ–ä»¤ç‰Œä¸­åŠ å…¥äº†ä¸€ä¸ªæ”»å‡»è€…æ— æ³•è·å¾—çš„éšæœºç†µç»„ä»¶ï¼Œæœ‰åˆ©äºé˜²æ­¢ä»¤ç‰ŒçŒœæµ‹æ”»å‡»å’Œé‡æ”¾æ”»å‡»ã€‚  ä¹Ÿå¯ä»¥æ–°å¢ç”¨æˆ·ç³»ç»Ÿéœ€è¦ä½¿ç”¨çš„è‡ªå®šä¹‰å­—æ®µï¼Œæ¯”å¦‚ä¸‹é¢çš„ä¾‹å­æ·»åŠ äº† name ç”¨æˆ·æ˜µç§°ï¼š { &quot;sub&quot;: &quot;1234567890&quot;, &quot;name&quot;: &quot;John Doe&quot; }  ç„¶åå°†å…¶è¿›è¡Œ Base64 ç¼–ç ï¼Œå¾—åˆ°JWTçš„ç¬¬äºŒéƒ¨åˆ†ï¼š JTdCJTBBJTIwJTIwJTIyc3ViJTIyJTNBJTIwJTIyMTIzNDU2Nzg5MCUyMiUyQyUwQSUyMCUyMCUyMm5hbWUlMjIlM0ElMjAlMjJKb2huJTIwRG9lJTIyJTBBJTdE Signature è¿™ä¸ªéƒ¨åˆ†éœ€è¦ Base64 ç¼–ç åçš„ Header å’Œ Base64 ç¼–ç åçš„ Payload ä½¿ç”¨ . è¿æ¥ç»„æˆçš„å­—ç¬¦ä¸²ï¼Œç„¶åé€šè¿‡ Header ä¸­å£°æ˜çš„åŠ å¯†æ–¹å¼è¿›è¡ŒåŠ å¯†ï¼ˆ$secret è¡¨ç¤ºç”¨æˆ·çš„ç§é’¥ï¼‰ï¼Œç„¶åå°±æ„æˆäº† jwt çš„ç¬¬ä¸‰éƒ¨åˆ†ã€‚ var encodedString = base64UrlEncode(header) + '.' + base64UrlEncode(payload); var signature = HMACSHA256(encodedString, '$secret');  å°†è¿™ä¸‰éƒ¨åˆ†ç”¨ . è¿æ¥æˆä¸€ä¸ªå®Œæ•´çš„å­—ç¬¦ä¸²ï¼Œå°±æ„æˆäº† 1.3.2 èŠ‚æœ€å¼€å§‹çš„ JWT ç¤ºä¾‹ã€‚ 1.3.3 æ—¶æ•ˆâ€‹ ç½‘å…³ä¼šéªŒè¯ token ä¸­çš„ exp å­—æ®µï¼Œä¸€æ—¦è¿™ä¸ªå­—æ®µè¿‡æœŸäº†ï¼Œç½‘å…³ä¼šè®¤ä¸ºè¿™ä¸ª token æ— æ•ˆè€Œå°†è¯·æ±‚ç›´æ¥æ‰“å›ã€‚è¿‡æœŸæ—¶é—´è¿™ä¸ªå€¼å¿…é¡»è®¾ç½®ã€‚ 1.3.4 JWT çš„å‡ ä¸ªç‰¹ç‚¹â€‹ JWT é»˜è®¤æ˜¯ä¸åŠ å¯†ï¼Œä¸èƒ½å°†ç§˜å¯†æ•°æ®å†™å…¥ JWTã€‚JWT ä¸ä»…å¯ä»¥ç”¨äºè®¤è¯ï¼Œä¹Ÿå¯ä»¥ç”¨äºäº¤æ¢ä¿¡æ¯ã€‚æœ‰æ•ˆä½¿ç”¨ JWTï¼Œå¯ä»¥é™ä½æœåŠ¡å™¨æŸ¥è¯¢æ•°æ®åº“çš„æ¬¡æ•°ã€‚JWT çš„æœ€å¤§ç¼ºç‚¹æ˜¯ï¼Œç”±äºæœåŠ¡å™¨ä¸ä¿å­˜ session çŠ¶æ€ï¼Œå› æ­¤æ— æ³•åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­åºŸæ­¢æŸä¸ª tokenï¼Œæˆ–è€…æ›´æ”¹ token çš„æƒé™ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€æ—¦ JWT ç­¾å‘äº†ï¼Œåœ¨åˆ°æœŸä¹‹å‰å°±ä¼šå§‹ç»ˆæœ‰æ•ˆï¼Œé™¤éæœåŠ¡å™¨éƒ¨ç½²é¢å¤–çš„é€»è¾‘ã€‚JWT æœ¬èº«åŒ…å«äº†è®¤è¯ä¿¡æ¯ï¼Œä¸€æ—¦æ³„éœ²ï¼Œä»»ä½•äººéƒ½å¯ä»¥è·å¾—è¯¥ä»¤ç‰Œçš„æ‰€æœ‰æƒé™ã€‚ä¸ºäº†å‡å°‘ç›—ç”¨ï¼ŒJWT çš„æœ‰æ•ˆæœŸåº”è¯¥è®¾ç½®å¾—æ¯”è¾ƒçŸ­ã€‚å¯¹äºä¸€äº›æ¯”è¾ƒé‡è¦çš„æƒé™ï¼Œä½¿ç”¨æ—¶åº”è¯¥å†æ¬¡å¯¹ç”¨æˆ·è¿›è¡Œè®¤è¯ã€‚ä¸ºäº†å‡å°‘ç›—ç”¨ï¼ŒJWT ä¸åº”è¯¥ä½¿ç”¨ HTTP åè®®æ˜ç ä¼ è¾“ï¼Œè¦ä½¿ç”¨HTTPS åè®®ä¼ è¾“ã€‚ ","version":"Next","tagName":"h3"},{"title":"2 ç”¨æˆ·ç³»ç»Ÿå¦‚ä½•åº”ç”¨ JWT æ’ä»¶ä¿æŠ¤ APIâ€‹","type":1,"pageTitle":"JWT è®¤è¯","url":"/zh-cn/docs/plugins/authentication/jwt-auth#2-ç”¨æˆ·ç³»ç»Ÿå¦‚ä½•åº”ç”¨-jwt-æ’ä»¶ä¿æŠ¤-api","content":"2.1 ç”Ÿæˆä¸€å¯¹ JWKï¼ˆJSON Web å¯†é’¥ï¼‰â€‹ æ–¹æ³•ä¸€ã€åœ¨çº¿ç”Ÿæˆï¼š ç”¨æˆ·å¯ä»¥åœ¨è¿™ä¸ªç«™ç‚¹https://mkjwk.org ç”Ÿæˆç”¨äº token ç”Ÿæˆä¸éªŒè¯çš„ç§é’¥ä¸å…¬é’¥ï¼Œ ç§é’¥ç”¨äºæˆæƒæœåŠ¡ç­¾å‘ JWTï¼Œå…¬é’¥é…ç½®åˆ° JWT æ’ä»¶ä¸­ç”¨äºç½‘å…³å¯¹è¯·æ±‚éªŒç­¾ï¼Œæ³¨æ„ç½‘å…³ä½¿ç”¨çš„ jwks æ ¼å¼é…ç½®ï¼Œä¸‹å›¾ä¸­Public Keyéœ€è¦æ”¾åˆ°keysç»“æ„ä½“ä¸­ï¼Œå¦‚ï¼š{&quot;keys&quot;:[{&quot;kty&quot;:&quot;RSA&quot;,&quot;e&quot;:&quot;AQAB&quot;,...}]}  æ–¹æ³•äºŒã€æœ¬åœ°ç”Ÿæˆï¼š æœ¬æ–‡åº”ç”¨ Java ç¤ºä¾‹è¯´æ˜ï¼Œå…¶ä»–è¯­è¨€ç”¨æˆ·ä¹Ÿå¯ä»¥æ‰¾åˆ°ç›¸å…³çš„å·¥å…·ç”Ÿæˆå¯†é’¥å¯¹ã€‚ æ–°å»ºä¸€ä¸ª Maven é¡¹ç›®ï¼ŒåŠ å…¥å¦‚ä¸‹ä¾èµ–ï¼š &lt;dependency&gt; &lt;groupId&gt;org.bitbucket.b_c&lt;/groupId&gt; &lt;artifactId&gt;jose4j&lt;/artifactId&gt; &lt;version&gt;0.7.0&lt;/version&gt; &lt;/dependency&gt;  ä½¿ç”¨å¦‚ä¸‹çš„ä»£ç ç”Ÿæˆä¸€å¯¹RSAå¯†é’¥ï¼š RsaJsonWebKey rsaJsonWebKey = RsaJwkGenerator.generateJwk(2048); final String publicKeyString = rsaJsonWebKey.toJson(JsonWebKey.OutputControlLevel.PUBLIC_ONLY); final String privateKeyString = rsaJsonWebKey.toJson(JsonWebKey.OutputControlLevel.INCLUDE_PRIVATE);  2.2 ä½¿ç”¨ JWK ä¸­çš„ç§é’¥å®ç°é¢å‘ token çš„è®¤è¯æœåŠ¡â€‹ éœ€è¦ä½¿ç”¨ 2.1 èŠ‚ä¸­åœ¨çº¿ç”Ÿæˆçš„ Keypair JSON å­—ç¬¦ä¸²ï¼ˆä¸‰ä¸ªæ–¹æ¡†å†…çš„ç¬¬ä¸€ä¸ªï¼‰æˆ–è€…æœ¬åœ°ç”Ÿæˆçš„ privateKeyString JSON å­—ç¬¦ä¸²ä½œä¸ºç§é’¥æ¥é¢å‘ tokenï¼Œç”¨äºæˆæƒå¯ä¿¡çš„ç”¨æˆ·è®¿é—®å—ä¿æŠ¤çš„ APIï¼Œå…·ä½“å®ç°å¯ä»¥å‚è€ƒä¸‹æ–¹ç¤ºä¾‹ã€‚ å‘å®¢æˆ·é¢å‘tokençš„å½¢å¼ç”±ç”¨æˆ·æ ¹æ®å…·ä½“çš„ä¸šåŠ¡åœºæ™¯å†³å®šï¼Œå¯ä»¥å°†é¢å‘tokençš„åŠŸèƒ½éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒï¼Œé…ç½®æˆæ™®é€š API åç”±è®¿é—®è€…é€šè¿‡ç”¨æˆ·åå¯†ç è·å¾—ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åœ¨æœ¬åœ°ç¯å¢ƒç”Ÿæˆ token åï¼Œç›´æ¥æ‹·è´ç»™æŒ‡å®šç”¨æˆ·ä½¿ç”¨ã€‚ import java.security.PrivateKey; import org.jose4j.json.JsonUtil; import org.jose4j.jwk.RsaJsonWebKey; import org.jose4j.jwk.RsaJwkGenerator; import org.jose4j.jws.AlgorithmIdentifiers; import org.jose4j.jws.JsonWebSignature; import org.jose4j.jwt.JwtClaims; import org.jose4j.jwt.NumericDate; import org.jose4j.lang.JoseException; public class GenerateJwtDemo { public static void main(String[] args) throws JoseException { String keyId = &quot;uniq_key&quot;; //ä½¿ç”¨æœ¬æ–‡ 2.1 èŠ‚ç”Ÿæˆçš„ Keypair String privateKeyJson = &quot;{\\n&quot; + &quot; \\&quot;kty\\&quot;: \\&quot;RSA\\&quot;,\\n&quot; + &quot; \\&quot;d\\&quot;: &quot; + &quot;\\&quot;O9MJSOgcjjiVMNJ4jmBAh0mRHF_TlaVva70Imghtlgwxl8BLfcf1S8ueN1PD7xV6Cnq8YenSKsfiNOhC6yZ_fjW1syn5raWfj68eR7cjHWjLOvKjwVY33GBPNOvspNhVAFzeqfWneRTBbga53Agb6jjN0SUcZdJgnelzz5JNdOGaLzhacjH6YPJKpbuzCQYPkWtoZHDqWTzCSb4mJ3n0NRTsWy7Pm8LwG_Fd3pACl7JIY38IanPQDLoighFfo-Lriv5z3IdlhwbPnx0tk9sBwQBTRdZ8JkqqYkxUiB06phwr7mAnKEpQJ6HvhZBQ1cCnYZ_nIlrX9-I7qomrlE1UoQ\\&quot;,\\n&quot; + &quot; \\&quot;e\\&quot;: \\&quot;AQAB\\&quot;,\\n&quot; + &quot; \\&quot;alg\\&quot;: \\&quot;RS256\\&quot;,\\n&quot; + &quot; \\&quot;n\\&quot;: \\&quot;vCuB8MgwPZfziMSytEbBoOEwxsG7XI3MaVMoocziP4SjzU4IuWuE_DodbOHQwb_thUru57_Efe&quot; + &quot;--sfATHEa0Odv5ny3QbByqsvjyeHk6ZE4mSAV9BsHYa6GWAgEZtnDceeeDc0y76utXK2XHhC1Pysi2KG8KAzqDa099Yh7s31AyoueoMnrYTmWfEyDsQL_OAIiwgXakkS5U8QyXmWicCwXntDzkIMh8MjfPskesyli0XQD1AmCXVV3h2Opm1Amx0ggSOOiINUR5YRD6mKo49_cN-nrJWjtwSouqDdxHYP-4c7epuTcdS6kQHiQERBd1ejdpAxV4c0t0FHF7MOy9kw\\&quot;\\n&quot; + &quot;}&quot;; JwtClaims claims = new JwtClaims(); claims.setGeneratedJwtId(); claims.setIssuedAtToNow(); //è¿‡æœŸæ—¶é—´ä¸€å®šè¦è®¾ç½® NumericDate date = NumericDate.now(); date.addSeconds(120*60); claims.setExpirationTime(date); claims.setNotBeforeMinutesInThePast(1); claims.setSubject(&quot;YOUR_SUBJECT&quot;); claims.setAudience(&quot;YOUR_AUDIENCE&quot;); //æ·»åŠ è‡ªå®šä¹‰å‚æ•°ï¼Œæ‰€æœ‰å€¼è¯·éƒ½ä½¿ç”¨Stringç±»å‹ claims.setClaim(&quot;userId&quot;, &quot;1213234&quot;); claims.setClaim(&quot;email&quot;, &quot;userEmail@youapp.com&quot;); JsonWebSignature jws = new JsonWebSignature(); jws.setAlgorithmHeaderValue(AlgorithmIdentifiers.RSA_USING_SHA256); jws.setKeyIdHeaderValue(keyId); jws.setPayload(claims.toJson()); PrivateKey privateKey = new RsaJsonWebKey(JsonUtil.parseJson(privateKeyJson)).getPrivateKey(); jws.setKey(privateKey); String jwtResult = jws.getCompactSerialization(); System.out.println(&quot;Generate Json Web token , result is &quot; + jwtResult); } }  ","version":"Next","tagName":"h3"},{"title":"Wasm æ’ä»¶ä½¿ç”¨ç®€ä»‹","type":0,"sectionRef":"#","url":"/zh-cn/docs/plugins/intro","content":"","keywords":"higress wasm","version":"Next"},{"title":"é€šè¿‡ Higress æ§åˆ¶å°è¿›è¡Œé…ç½®â€‹","type":1,"pageTitle":"Wasm æ’ä»¶ä½¿ç”¨ç®€ä»‹","url":"/zh-cn/docs/plugins/intro#é€šè¿‡-higress-æ§åˆ¶å°è¿›è¡Œé…ç½®","content":"Higress æ§åˆ¶å°æä¾›äº† 3 ä¸ªå…¥å£è¿›è¡Œæ’ä»¶é…ç½®: å…¨å±€é…ç½®ï¼šæ’ä»¶å¸‚åœº-&gt;é€‰æ‹©æ’ä»¶è¿›è¡Œé…ç½®åŸŸåçº§é…ç½®ï¼šåŸŸåç®¡ç†-&gt;é€‰æ‹©åŸŸå-&gt;ç‚¹å‡»ç­–ç•¥-&gt;é€‰æ‹©æ’ä»¶è¿›è¡Œé…ç½®è·¯ç”±çº§é…ç½®: è·¯ç”±é…ç½®-&gt;é€‰æ‹©è·¯ç”±-&gt;ç‚¹å‡»ç­–ç•¥-&gt;é€‰æ‹©æ’ä»¶è¿›è¡Œé…ç½® è¿™ä¸‰ä¸ªé…ç½®çš„ç”Ÿæ•ˆä¼˜å…ˆçº§æ˜¯: è·¯ç”±çº§ &gt; åŸŸåçº§ &gt; å…¨å±€ å³å¯¹äºæ²¡æœ‰åŒ¹é…åˆ°å…·ä½“è·¯ç”±æˆ–åŸŸåçš„è¯·æ±‚æ‰ä¼šç”Ÿæ•ˆå…¨å±€é…ç½® å¯¹äºä¸€èˆ¬çš„æ’ä»¶ï¼ŒåŒ…æ‹¬è‡ªå®šä¹‰æ’ä»¶åœ¨å†…ï¼Œè·¯ç”±/åŸŸåçº§çš„é…ç½®å­—æ®µå’Œå…¨å±€é…ç½®å­—æ®µæ˜¯å®Œå…¨ä¸€æ ·çš„ï¼› å¯¹äºè®¤è¯ç±»æ’ä»¶(Key è®¤è¯ï¼ŒHMAC è®¤è¯ï¼ŒBasic è®¤è¯ï¼ŒJWT è®¤è¯ç­‰)åˆ™ä¸åŒï¼Œå…¨å±€é…ç½®ä»…åš Consumer å‡­è¯é…ç½®ï¼Œä»¥åŠæ˜¯å¦å¼€å¯å…¨å±€è®¤è¯ï¼Œè€Œåœ¨è·¯ç”±/åŸŸåçº§é€šè¿‡ allow å­—æ®µé…ç½®å…è®¸è®¿é—®çš„ Consumer åˆ—è¡¨ï¼Œè¯¦æƒ…å¯ä»¥æŸ¥çœ‹ Key è®¤è¯çš„é…ç½®è¯´æ˜ã€‚ ","version":"Next","tagName":"h2"},{"title":"é€šè¿‡ Higress WasmPlugin CRD è¿›è¡Œé…ç½®â€‹","type":1,"pageTitle":"Wasm æ’ä»¶ä½¿ç”¨ç®€ä»‹","url":"/zh-cn/docs/plugins/intro#é€šè¿‡-higress-wasmplugin-crd-è¿›è¡Œé…ç½®","content":"Higress WasmPlugin CRD åœ¨ Istio WasmPlugin CRD çš„åŸºç¡€ä¸Šè¿›è¡Œäº†æ‰©å±•ï¼Œæ–°å¢ä»¥ä¸‹é…ç½®å­—æ®µï¼š å­—æ®µåç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\tæè¿°defaultConfig\tobject\té€‰å¡«\tæ’ä»¶é»˜è®¤é…ç½®ï¼Œå…¨å±€ç”Ÿæ•ˆäºæ²¡æœ‰åŒ¹é…å…·ä½“åŸŸåå’Œè·¯ç”±é…ç½®çš„è¯·æ±‚ matchRules\tarray of object\té€‰å¡«\tåŒ¹é…åŸŸåæˆ–è·¯ç”±ç”Ÿæ•ˆçš„é…ç½® matchRules ä¸­æ¯ä¸€é¡¹çš„é…ç½®å­—æ®µè¯´æ˜ï¼š å­—æ®µåç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té…ç½®ç¤ºä¾‹\tæè¿°ingress\tarray of string\tingress å’Œ domain ä¸­å¿…å¡«ä¸€é¡¹\t[&quot;default/foo&quot;,&quot;default/bar&quot;]\tåŒ¹é… ingress èµ„æºå¯¹è±¡ï¼ŒåŒ¹é…æ ¼å¼ä¸º: å‘½åç©ºé—´/ingressåç§° domain\tarray of string\tingress å’Œ domain ä¸­å¿…å¡«ä¸€é¡¹\t[&quot;example.com&quot;,&quot;*.test.com&quot;]\tåŒ¹é…åŸŸåï¼Œæ”¯æŒæ³›åŸŸå config\tobject\té€‰å¡«\t-\tåŒ¹é…åç”Ÿæ•ˆçš„æ’ä»¶é…ç½® ä»¥è¯·æ±‚å±è”½æ’ä»¶ä¸¾ä¾‹è¯´æ˜ï¼Œå¦‚æœå¸Œæœ›å…¨å±€ç”Ÿæ•ˆæ’ä»¶çš„å¦‚ä¸‹é…ç½®ï¼ˆè¯·æŸ¥çœ‹è¯·æ±‚å±è”½æ–‡æ¡£äº†è§£é…ç½®å­—æ®µè¯´æ˜ï¼‰ï¼š block_urls: - swagger.html - foo=bar case_sensitive: false  åˆ™å¯¹åº”çš„ WasmPlugin éœ€è¦é…ç½®å¦‚ä¸‹ï¼š apiVersion: extensions.higress.io/v1alpha1 kind: WasmPlugin metadata: name: request-block namespace: higress-system spec: defaultConfig: block_urls: - swagger.html - foo=bar case_sensitive: false url: oci://higress-registry.cn-hangzhou.cr.aliyuncs.com/plugins/request-block:1.0.0  é…ç½®åä¸‹åˆ—è¯·æ±‚å°†ç«‹å³è¢«ç¦æ­¢è®¿é—®: curl http://example.com?foo=Bar curl http://example.com/foo/Swagger.html  å¦‚æœå¸Œæœ›å¯¹ default å‘½åç©ºé—´ä¸‹åç§°ä¸º foo çš„ Ingress (åŒ¹é… path å‰ç¼€ä¸º /foo çš„è¯·æ±‚)ç”Ÿæ•ˆå¦‚ä¸‹é…ç½®: block_headers: - example-key - example-value  åˆ™å¯¹åº”çš„ WasmPlugin éœ€è¦é…ç½®å¦‚ä¸‹ï¼š apiVersion: extensions.higress.io/v1alpha1 kind: WasmPlugin metadata: name: request-block namespace: higress-system spec: defaultConfig: block_urls: - swagger.html - foo=bar case_sensitive: false matchRules: # è·¯ç”±çº§ç”Ÿæ•ˆé…ç½® - ingress: - default/foo # default å‘½åç©ºé—´ä¸‹åä¸º foo çš„ ingress ä¼šæ‰§è¡Œä¸‹é¢è¿™ä¸ªé…ç½® config: block_headers: - example-key - example-value url: oci://higress-registry.cn-hangzhou.cr.aliyuncs.com/plugins/request-block:1.0.0  é…ç½®åï¼Œä¸‹é¢è¯·æ±‚ä¸ä¼šåŒ¹é…åˆ°å…·ä½“çš„ ingressï¼Œå› æ­¤ä»ç„¶å‘½ä¸­å…¨å±€é»˜è®¤é…ç½®ï¼Œè¢«æ‹’ç»è®¿é—®ï¼š curl http://example.com?foo=Bar  ä¸‹é¢è¯·æ±‚ç”±äºåŒ¹é…åˆ° foo è¿™ä¸ª Ingressï¼Œå› æ­¤èµ°è·¯ç”±çº§çš„é…ç½®ï¼Œä¸å—é»˜è®¤é…ç½®å½±å“ï¼Œä¸ä¼šè¢«æ‹’ç»è®¿é—®: curl http://exmaple.com/foo/Swagger.html  å› ä¸ºè·¯ç”±çº§é…ç½®å±è”½äº†è¯·æ±‚ Header ä¸­å‡ºç° example-key å­—ç¬¦çš„è¯·æ±‚ï¼Œæ‰€ä»¥ä¸‹é¢è¿™ä¸ªè¯·æ±‚ä¼šè¢«æ‹’ç»è®¿é—®: curl http://exmaple.com/foo -H 'exmaple-key: 123'  å½“ matchRules ä¸­å­˜åœ¨å¤šä¸ªè§„åˆ™æ—¶ï¼ŒæŒ‰è§„åˆ™æ’åˆ—é¡ºåºä¼˜å…ˆåŒ¹é…ï¼Œå»ºè®®å°† ingress åŒ¹é…é…ç½®æ”¾åœ¨ domain åŒ¹é…ä¹‹å‰ï¼Œè¿™ä¹Ÿæ˜¯ Higress æ§åˆ¶å°çš„åšæ³•ã€‚ ","version":"Next","tagName":"h2"},{"title":"å®˜æ–¹æ’ä»¶é•œåƒåœ°å€â€‹","type":1,"pageTitle":"Wasm æ’ä»¶ä½¿ç”¨ç®€ä»‹","url":"/zh-cn/docs/plugins/intro#å®˜æ–¹æ’ä»¶é•œåƒåœ°å€","content":"æ’ä»¶åç§°\té•œåƒåœ°å€Key è®¤è¯\thigress-registry.cn-hangzhou.cr.aliyuncs.com/plugins/key-auth:1.0.0 Basic è®¤è¯\thigress-registry.cn-hangzhou.cr.aliyuncs.com/plugins/basic-auth:1.0.0 HMAC è®¤è¯\thigress-registry.cn-hangzhou.cr.aliyuncs.com/plugins/hmac-auth:1.0.0 JWT è®¤è¯\thigress-registry.cn-hangzhou.cr.aliyuncs.com/plugins/jwt-auth:1.0.0 æœºå™¨äººæ‹¦æˆª\thigress-registry.cn-hangzhou.cr.aliyuncs.com/plugins/bot-detect:1.0.0 è‡ªå®šä¹‰åº”ç­”\thigress-registry.cn-hangzhou.cr.aliyuncs.com/plugins/custom-response:1.0.0 è¯·æ±‚å±è”½\thigress-registry.cn-hangzhou.cr.aliyuncs.com/plugins/request-block:1.0.0 åŸºäº Key é™æµ\thigress-registry.cn-hangzhou.cr.aliyuncs.com/plugins/key-rate-limit:1.0.0 WAF é˜²æŠ¤\thigress-registry.cn-hangzhou.cr.aliyuncs.com/plugins/waf:1.0.0 ","version":"Next","tagName":"h3"},{"title":"Wasm æ’ä»¶åŸç†ä»‹ç»â€‹","type":1,"pageTitle":"Wasm æ’ä»¶ä½¿ç”¨ç®€ä»‹","url":"/zh-cn/docs/plugins/intro#wasm-æ’ä»¶åŸç†ä»‹ç»","content":"","version":"Next","tagName":"h2"},{"title":"ä»€ä¹ˆæ˜¯ Wasmâ€‹","type":1,"pageTitle":"Wasm æ’ä»¶ä½¿ç”¨ç®€ä»‹","url":"/zh-cn/docs/plugins/intro#ä»€ä¹ˆæ˜¯-wasm","content":"// TODO... ","version":"Next","tagName":"h3"},{"title":"æ’ä»¶ç”Ÿæ•ˆæµç¨‹â€‹","type":1,"pageTitle":"Wasm æ’ä»¶ä½¿ç”¨ç®€ä»‹","url":"/zh-cn/docs/plugins/intro#æ’ä»¶ç”Ÿæ•ˆæµç¨‹","content":"// TODO... ","version":"Next","tagName":"h3"},{"title":"æ’ä»¶æ‰§è¡Œé¡ºåºç¼–æ’â€‹","type":1,"pageTitle":"Wasm æ’ä»¶ä½¿ç”¨ç®€ä»‹","url":"/zh-cn/docs/plugins/intro#æ’ä»¶æ‰§è¡Œé¡ºåºç¼–æ’","content":"// TODO... ","version":"Next","tagName":"h3"},{"title":"Wasm æ’ä»¶å¦‚ä½•åšåˆ°å˜æ›´æ—¶æµé‡æ— æŸâ€‹","type":1,"pageTitle":"Wasm æ’ä»¶ä½¿ç”¨ç®€ä»‹","url":"/zh-cn/docs/plugins/intro#wasm-æ’ä»¶å¦‚ä½•åšåˆ°å˜æ›´æ—¶æµé‡æ— æŸ","content":"// TODO... ","version":"Next","tagName":"h3"},{"title":"æœºå™¨äººæ‹¦æˆª","type":0,"sectionRef":"#","url":"/zh-cn/docs/plugins/security/bot-detect","content":"","keywords":"higress bot detect","version":"Next"},{"title":"åŠŸèƒ½è¯´æ˜â€‹","type":1,"pageTitle":"æœºå™¨äººæ‹¦æˆª","url":"/zh-cn/docs/plugins/security/bot-detect#åŠŸèƒ½è¯´æ˜","content":"bot-detect æ’ä»¶å¯ä»¥ç”¨äºè¯†åˆ«å¹¶é˜»æ­¢äº’è”ç½‘çˆ¬è™«å¯¹ç«™ç‚¹èµ„æºçš„çˆ¬å–ã€‚ ","version":"Next","tagName":"h2"},{"title":"é…ç½®å­—æ®µâ€‹","type":1,"pageTitle":"æœºå™¨äººæ‹¦æˆª","url":"/zh-cn/docs/plugins/security/bot-detect#é…ç½®å­—æ®µ","content":"åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°allow\tarray of string\té€‰å¡«\t-\té…ç½®åŒ¹é… User-Agent è¯·æ±‚å¤´çš„æ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…å‘½ä¸­æ—¶å°†å…è®¸å…¶è®¿é—® deny\tarray of string\té€‰å¡«\t-\té…ç½®åŒ¹é… User-Agent è¯·æ±‚å¤´çš„æ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…å‘½ä¸­æ—¶å°†å±è”½è¯·æ±‚ blocked_code\tnumber\té€‰å¡«\t403\té…ç½®è¯·æ±‚è¢«å±è”½æ—¶è¿”å›çš„ HTTP çŠ¶æ€ç  blocked_message\tstring\té€‰å¡«\t-\té…ç½®è¯·æ±‚è¢«å±è”½æ—¶è¿”å›çš„ HTTP åº”ç­” Body allow å’Œ deny å­—æ®µå¯ä»¥å‡ä¸é…ç½®ï¼Œåˆ™æ‰§è¡Œé»˜è®¤çš„çˆ¬è™«åˆ¤æ–­é€»è¾‘ï¼Œé€šè¿‡é…ç½® allow å­—æ®µå¯ä»¥å°†åŸæœ¬å‘½ä¸­é»˜è®¤çˆ¬è™«åˆ¤æ–­é€»è¾‘çš„è¯·æ±‚æ”¾è¡Œï¼Œé€šè¿‡é…ç½® deny å­—æ®µå¯ä»¥å¢åŠ é¢å¤–çš„çˆ¬è™«åˆ¤æ–­é€»è¾‘ã€‚ é»˜è®¤çš„çˆ¬è™«åˆ¤æ–­æ­£åˆ™è¡¨è¾¾å¼é›†åˆå¦‚ä¸‹ï¼š # Bots General matcher 'name/0.0' (?:\\/[A-Za-z0-9\\.]+|) {0,5}([A-Za-z0-9 \\-_\\!\\[\\]:]{0,50}(?:[Aa]rchiver|[Ii]ndexer|[Ss]craper|[Bb]ot|[Ss]pider|[Cc]rawl[a-z]{0,50}))[/ ](\\d+)(?:\\.(\\d+)(?:\\.(\\d+)|)|) # Bots General matcher 'name 0.0' (?:\\/[A-Za-z0-9\\.]+|) {0,5}([A-Za-z0-9 \\-_\\!\\[\\]:]{0,50}(?:[Aa]rchiver|[Ii]ndexer|[Ss]craper|[Bb]ot|[Ss]pider|[Cc]rawl[a-z]{0,50})) (\\d+)(?:\\.(\\d+)(?:\\.(\\d+)|)|) # Bots containing spider|scrape|bot(but not CUBOT)|Crawl ((?:[A-z0-9]{1,50}|[A-z\\-]{1,50} ?|)(?: the |)(?:[Ss][Pp][Ii][Dd][Ee][Rr]|[Ss]crape|[Cc][Rr][Aa][Ww][Ll])[A-z0-9]{0,50})(?:(?:[ /]| v)(\\d+)(?:\\.(\\d+)|)(?:\\.(\\d+)|)|) # Bots Pattern '/name-0.0' /((?:Ant-)?Nutch|[A-z]+[Bb]ot|[A-z]+[Ss]pider|Axtaris|fetchurl|Isara|ShopSalad|Tailsweep)[ \\-](\\d+)(?:\\.(\\d+)(?:\\.(\\d+))?)? # Bots Pattern 'name/0.0' \\b(008|Altresium|Argus|BaiduMobaider|BoardReader|DNSGroup|DataparkSearch|EDI|Goodzer|Grub|INGRID|Infohelfer|LinkedInBot|LOOQ|Nutch|OgScrper|PathDefender|Peew|PostPost|Steeler|Twitterbot|VSE|WebCrunch|WebZIP|Y!J-BR[A-Z]|YahooSeeker|envolk|sproose|wminer)/(\\d+)(?:\\.(\\d+)|)(?:\\.(\\d+)|) # More bots (CSimpleSpider|Cityreview Robot|CrawlDaddy|CrawlFire|Finderbots|Index crawler|Job Roboter|KiwiStatus Spider|Lijit Crawler|QuerySeekerSpider|ScollSpider|Trends Crawler|USyd-NLP-Spider|SiteCat Webbot|BotName\\/\\$BotVersion|123metaspider-Bot|1470\\.net crawler|50\\.nu|8bo Crawler Bot|Aboundex|Accoona-[A-z]{1,30}-Agent|AdsBot-Google(?:-[a-z]{1,30}|)|altavista|AppEngine-Google|archive.{0,30}\\.org_bot|archiver|Ask Jeeves|[Bb]ai[Dd]u[Ss]pider(?:-[A-Za-z]{1,30})(?:-[A-Za-z]{1,30}|)|bingbot|BingPreview|blitzbot|BlogBridge|Bloglovin|BoardReader Blog Indexer|BoardReader Favicon Fetcher|boitho.com-dc|BotSeer|BUbiNG|\\b\\w{0,30}favicon\\w{0,30}\\b|\\bYeti(?:-[a-z]{1,30}|)|Catchpoint(?: bot|)|[Cc]harlotte|Checklinks|clumboot|Comodo HTTP\\(S\\) Crawler|Comodo-Webinspector-Crawler|ConveraCrawler|CRAWL-E|CrawlConvera|Daumoa(?:-feedfetcher|)|Feed Seeker Bot|Feedbin|findlinks|Flamingo_SearchEngine|FollowSite Bot|furlbot|Genieo|gigabot|GomezAgent|gonzo1|(?:[a-zA-Z]{1,30}-|)Googlebot(?:-[a-zA-Z]{1,30}|)|Google SketchUp|grub-client|gsa-crawler|heritrix|HiddenMarket|holmes|HooWWWer|htdig|ia_archiver|ICC-Crawler|Icarus6j|ichiro(?:/mobile|)|IconSurf|IlTrovatore(?:-Setaccio|)|InfuzApp|Innovazion Crawler|InternetArchive|IP2[a-z]{1,30}Bot|jbot\\b|KaloogaBot|Kraken|Kurzor|larbin|LEIA|LesnikBot|Linguee Bot|LinkAider|LinkedInBot|Lite Bot|Llaut|lycos|Mail\\.RU_Bot|masscan|masidani_bot|Mediapartners-Google|Microsoft .{0,30} Bot|mogimogi|mozDex|MJ12bot|msnbot(?:-media {0,2}|)|msrbot|Mtps Feed Aggregation System|netresearch|Netvibes|NewsGator[^/]{0,30}|^NING|Nutch[^/]{0,30}|Nymesis|ObjectsSearch|OgScrper|Orbiter|OOZBOT|PagePeeker|PagesInventory|PaxleFramework|Peeplo Screenshot Bot|PlantyNet_WebRobot|Pompos|Qwantify|Read%20Later|Reaper|RedCarpet|Retreiver|Riddler|Rival IQ|scooter|Scrapy|Scrubby|searchsight|seekbot|semanticdiscovery|SemrushBot|Simpy|SimplePie|SEOstats|SimpleRSS|SiteCon|Slackbot-LinkExpanding|Slack-ImgProxy|Slurp|snappy|Speedy Spider|Squrl Java|Stringer|TheUsefulbot|ThumbShotsBot|Thumbshots\\.ru|Tiny Tiny RSS|Twitterbot|WhatsApp|URL2PNG|Vagabondo|VoilaBot|^vortex|Votay bot|^voyager|WASALive.Bot|Web-sniffer|WebThumb|WeSEE:[A-z]{1,30}|WhatWeb|WIRE|WordPress|Wotbox|www\\.almaden\\.ibm\\.com|Xenu(?:.s|) Link Sleuth|Xerka [A-z]{1,30}Bot|yacy(?:bot|)|YahooSeeker|Yahoo! Slurp|Yandex\\w{1,30}|YodaoBot(?:-[A-z]{1,30}|)|YottaaMonitor|Yowedo|^Zao|^Zao-Crawler|ZeBot_www\\.ze\\.bz|ZooShot|ZyBorg)(?:[ /]v?(\\d+)(?:\\.(\\d+)(?:\\.(\\d+)|)|)|)  ","version":"Next","tagName":"h2"},{"title":"é…ç½®ç¤ºä¾‹â€‹","type":1,"pageTitle":"æœºå™¨äººæ‹¦æˆª","url":"/zh-cn/docs/plugins/security/bot-detect#é…ç½®ç¤ºä¾‹","content":"","version":"Next","tagName":"h2"},{"title":"æ”¾è¡ŒåŸæœ¬å‘½ä¸­çˆ¬è™«è§„åˆ™çš„è¯·æ±‚â€‹","type":1,"pageTitle":"æœºå™¨äººæ‹¦æˆª","url":"/zh-cn/docs/plugins/security/bot-detect#æ”¾è¡ŒåŸæœ¬å‘½ä¸­çˆ¬è™«è§„åˆ™çš„è¯·æ±‚","content":"allow: - &quot;.*Go-http-client.*&quot;  è‹¥ä¸ä½œè¯¥é…ç½®ï¼Œé»˜è®¤çš„ Golang ç½‘ç»œåº“è¯·æ±‚ä¼šè¢«è§†åšçˆ¬è™«ï¼Œè¢«ç¦æ­¢è®¿é—®ã€‚ ","version":"Next","tagName":"h3"},{"title":"å¢åŠ çˆ¬è™«åˆ¤æ–­â€‹","type":1,"pageTitle":"æœºå™¨äººæ‹¦æˆª","url":"/zh-cn/docs/plugins/security/bot-detect#å¢åŠ çˆ¬è™«åˆ¤æ–­","content":"deny: - &quot;spd-tools.*&quot;  æ ¹æ®è¯¥é…ç½®ï¼Œä¸‹åˆ—è¯·æ±‚å°†è¢«ç¦æ­¢è®¿é—®ï¼š curl http://example.com -H 'User-Agent: spd-tools/1.1' curl http://exmaple.com -H 'User-Agent: spd-tools'  ","version":"Next","tagName":"h3"},{"title":"WAF é˜²æŠ¤","type":0,"sectionRef":"#","url":"/zh-cn/docs/plugins/security/waf","content":"","keywords":"higress waf","version":"Next"},{"title":"åŠŸèƒ½è¯´æ˜â€‹","type":1,"pageTitle":"WAF é˜²æŠ¤","url":"/zh-cn/docs/plugins/security/waf#åŠŸèƒ½è¯´æ˜","content":"å¼€æºç‰ˆ WAF æ’ä»¶ï¼Œæ”¯æŒåŸºäº OWASP ModSecurity Core Rule Set (CRS) çš„ WAF è§„åˆ™é…ç½®ã€‚ ","version":"Next","tagName":"h2"},{"title":"é…ç½®å­—æ®µâ€‹","type":1,"pageTitle":"WAF é˜²æŠ¤","url":"/zh-cn/docs/plugins/security/waf#é…ç½®å­—æ®µ","content":"åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°useCRS\tbool\té€‰å¡«\tfalse\tæ˜¯å¦å¼€å¯ OWASP CRSï¼Œè¯¦æƒ…å¯å‚è€ƒ coreruleset secRules\tarray of string\té€‰å¡«\t-\tç”¨æˆ·è‡ªå®šä¹‰çš„wafé˜²æŠ¤è§„åˆ™ï¼Œè¯­æ³•è§„åˆ™å¯å‚è€ƒ SecLang è¯­æ³•å‚è€ƒ å’Œ ModSecurity ä¸­æ–‡æ‰‹å†Œ ","version":"Next","tagName":"h2"},{"title":"é…ç½®ç¤ºä¾‹â€‹","type":1,"pageTitle":"WAF é˜²æŠ¤","url":"/zh-cn/docs/plugins/security/waf#é…ç½®ç¤ºä¾‹","content":"","version":"Next","tagName":"h2"},{"title":"è§‚å¯Ÿæ¨¡å¼ï¼ˆåªä¼šè®°å½•æ—¥å¿—)â€‹","type":1,"pageTitle":"WAF é˜²æŠ¤","url":"/zh-cn/docs/plugins/security/waf#è§‚å¯Ÿæ¨¡å¼åªä¼šè®°å½•æ—¥å¿—","content":"useCRS: true secRules: - &quot;SecRuleEngine DetectionOnly&quot;  ","version":"Next","tagName":"h3"},{"title":"é˜²æŠ¤æ¨¡å¼â€‹","type":1,"pageTitle":"WAF é˜²æŠ¤","url":"/zh-cn/docs/plugins/security/waf#é˜²æŠ¤æ¨¡å¼","content":"useCRS: true secRules: - &quot;SecRuleEngine On&quot;  ","version":"Next","tagName":"h3"},{"title":"æµ‹è¯•è‡ªå®šä¹‰è§„åˆ™â€‹","type":1,"pageTitle":"WAF é˜²æŠ¤","url":"/zh-cn/docs/plugins/security/waf#æµ‹è¯•è‡ªå®šä¹‰è§„åˆ™","content":"useCRS: true secRules: - &quot;SecRuleEngine On&quot; - &quot;SecRule REQUEST_URI \\&quot;@streq /admin\\&quot; \\&quot;id:101,phase:1,t:lowercase,deny\\&quot;&quot;  æ ¹æ®è¯¥é…ç½®ï¼Œä»¥ä¸‹è¯·æ±‚å°†è¢«ç¦æ­¢è®¿é—®ï¼š curl http://example.com/admin  ","version":"Next","tagName":"h3"},{"title":"IP é™åˆ¶","type":0,"sectionRef":"#","url":"/zh-cn/docs/plugins/traffic/ip-restriction","content":"","keywords":"higress","version":"Next"},{"title":"åŠŸèƒ½è¯´æ˜â€‹","type":1,"pageTitle":"IP é™åˆ¶","url":"/zh-cn/docs/plugins/traffic/ip-restriction#åŠŸèƒ½è¯´æ˜","content":"ip-restriction æ’ä»¶å¯ä»¥é€šè¿‡å°† IP åœ°å€åˆ—å…¥ç™½åå•æˆ–é»‘åå•æ¥é™åˆ¶å¯¹æœåŠ¡æˆ–è·¯ç”±çš„è®¿é—®ã€‚æ”¯æŒå¯¹å•ä¸ª IP åœ°å€ã€å¤šä¸ª IP åœ°å€å’Œç±»ä¼¼ 10.10.10.0/24 çš„ CIDR èŒƒå›´çš„é™åˆ¶ã€‚ ","version":"Next","tagName":"h2"},{"title":"é…ç½®è¯´æ˜â€‹","type":1,"pageTitle":"IP é™åˆ¶","url":"/zh-cn/docs/plugins/traffic/ip-restriction#é…ç½®è¯´æ˜","content":"é…ç½®é¡¹\tç±»å‹\tå¿…å¡«\té»˜è®¤å€¼\tè¯´æ˜ip_source_type\tstring\tå¦\torigin-source\tå¯é€‰å€¼ï¼š1. å¯¹ç«¯ socket ipï¼šorigin-source; 2. é€šè¿‡ header è·å–ï¼šheader ip_header_name\tstring\tå¦\tx-forwarded-for\tå½“ ip_source_type ä¸º header æ—¶ï¼ŒæŒ‡å®šè‡ªå®šä¹‰ IP æ¥æºå¤´ allow\tarray\tå¦\t[]\tç™½åå•åˆ—è¡¨ deny\tarray\tå¦\t[]\té»‘åå•åˆ—è¡¨ status\tint\tå¦\t403\tæ‹’ç»è®¿é—®æ—¶çš„ HTTP çŠ¶æ€ç  message\tstring\tå¦\tYour IP address is blocked.\tæ‹’ç»è®¿é—®æ—¶çš„è¿”å›ä¿¡æ¯ ip_source_type: origin-source allow: - 10.0.0.1 - 192.168.0.0/16  ip_source_type: header ip_header_name: x-real-iP deny: - 10.0.0.1 - 192.169.0.0/16  ","version":"Next","tagName":"h2"},{"title":"AI ä»£ç†","type":0,"sectionRef":"#","url":"/zh-cn/docs/plugins/ai/ai-proxy","content":"","keywords":"higress ai proxy","version":"Next"},{"title":"åŠŸèƒ½è¯´æ˜â€‹","type":1,"pageTitle":"AI ä»£ç†","url":"/zh-cn/docs/plugins/ai/ai-proxy#åŠŸèƒ½è¯´æ˜","content":"AI ä»£ç†æ’ä»¶å®ç°äº†åŸºäº OpenAI API å¥‘çº¦çš„ AI ä»£ç†åŠŸèƒ½ã€‚ç›®å‰æ”¯æŒ OpenAIã€Azure OpenAIã€æœˆä¹‹æš—é¢ï¼ˆMoonshotï¼‰å’Œé€šä¹‰åƒé—®ç­‰ AI æœåŠ¡æä¾›å•†ã€‚ ","version":"Next","tagName":"h2"},{"title":"é…ç½®å­—æ®µâ€‹","type":1,"pageTitle":"AI ä»£ç†","url":"/zh-cn/docs/plugins/ai/ai-proxy#é…ç½®å­—æ®µ","content":"","version":"Next","tagName":"h2"},{"title":"åŸºæœ¬é…ç½®â€‹","type":1,"pageTitle":"AI ä»£ç†","url":"/zh-cn/docs/plugins/ai/ai-proxy#åŸºæœ¬é…ç½®","content":"åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°provider\tobject\tå¿…å¡«\t-\té…ç½®ç›®æ ‡ AI æœåŠ¡æä¾›å•†çš„ä¿¡æ¯ providerçš„é…ç½®å­—æ®µè¯´æ˜å¦‚ä¸‹ï¼š åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°type\tstring\tå¿…å¡«\t-\tAI æœåŠ¡æä¾›å•†åç§° apiTokens\tarray of string\tå¿…å¡«\t-\tç”¨äºåœ¨è®¿é—® AI æœåŠ¡æ—¶è¿›è¡Œè®¤è¯çš„ä»¤ç‰Œã€‚å¦‚æœé…ç½®äº†å¤šä¸ª tokenï¼Œæ’ä»¶ä¼šåœ¨è¯·æ±‚æ—¶éšæœºè¿›è¡Œé€‰æ‹©ã€‚éƒ¨åˆ†æœåŠ¡æä¾›å•†åªæ”¯æŒé…ç½®ä¸€ä¸ª tokenã€‚ timeout\tnumber\téå¿…å¡«\t-\tè®¿é—® AI æœåŠ¡çš„è¶…æ—¶æ—¶é—´ã€‚å•ä½ä¸ºæ¯«ç§’ã€‚é»˜è®¤å€¼ä¸º 120000ï¼Œå³ 2 åˆ†é’Ÿ modelMapping\tmap of string\téå¿…å¡«\t-\tAI æ¨¡å‹æ˜ å°„è¡¨ï¼Œç”¨äºå°†è¯·æ±‚ä¸­çš„æ¨¡å‹åç§°æ˜ å°„ä¸ºæœåŠ¡æä¾›å•†æ”¯æŒæ¨¡å‹åç§°ã€‚ å¯ä»¥ä½¿ç”¨ &quot;*&quot; ä¸ºé”®æ¥é…ç½®é€šç”¨å…œåº•æ˜ å°„å…³ç³» protocol\tstring\téå¿…å¡«\t-\tæ’ä»¶å¯¹å¤–æä¾›çš„ API æ¥å£å¥‘çº¦ã€‚ç›®å‰æ”¯æŒä»¥ä¸‹å–å€¼ï¼šopenaiï¼ˆé»˜è®¤å€¼ï¼Œä½¿ç”¨ OpenAI çš„æ¥å£å¥‘çº¦ï¼‰ã€originalï¼ˆä½¿ç”¨ç›®æ ‡æœåŠ¡æä¾›å•†çš„åŸå§‹æ¥å£å¥‘çº¦ï¼‰ context\tobject\téå¿…å¡«\t-\té…ç½® AI å¯¹è¯ä¸Šä¸‹æ–‡ä¿¡æ¯ contextçš„é…ç½®å­—æ®µè¯´æ˜å¦‚ä¸‹ï¼š åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°fileUrl\tstring\tå¿…å¡«\t-\tä¿å­˜ AI å¯¹è¯ä¸Šä¸‹æ–‡çš„æ–‡ä»¶ URLã€‚ä»…æ”¯æŒçº¯æ–‡æœ¬ç±»å‹çš„æ–‡ä»¶å†…å®¹ serviceName\tstring\tå¿…å¡«\t-\tURL æ‰€å¯¹åº”çš„ Higress åç«¯æœåŠ¡å®Œæ•´åç§° servicePort\tnumber\tå¿…å¡«\t-\tURL æ‰€å¯¹åº”çš„ Higress åç«¯æœåŠ¡è®¿é—®ç«¯å£ ","version":"Next","tagName":"h3"},{"title":"æä¾›å•†ç‰¹æœ‰é…ç½®â€‹","type":1,"pageTitle":"AI ä»£ç†","url":"/zh-cn/docs/plugins/ai/ai-proxy#æä¾›å•†ç‰¹æœ‰é…ç½®","content":"OpenAIâ€‹ OpenAI æ‰€å¯¹åº”çš„ type ä¸º openaiã€‚å®ƒå¹¶æ— ç‰¹æœ‰çš„é…ç½®å­—æ®µã€‚ Azure OpenAIâ€‹ Azure OpenAI æ‰€å¯¹åº”çš„ type ä¸º azureã€‚å®ƒç‰¹æœ‰çš„é…ç½®å­—æ®µå¦‚ä¸‹ï¼š åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°azureServiceUrl\tstring\tå¿…å¡«\t-\tAzure OpenAI æœåŠ¡çš„ URLï¼Œé¡»åŒ…å« api-version æŸ¥è¯¢å‚æ•°ã€‚ æ³¨æ„ï¼š Azure OpenAI åªæ”¯æŒé…ç½®ä¸€ä¸ª API Tokenã€‚ æœˆä¹‹æš—é¢ï¼ˆMoonshotï¼‰â€‹ æœˆä¹‹æš—é¢æ‰€å¯¹åº”çš„ type ä¸º moonshotã€‚å®ƒç‰¹æœ‰çš„é…ç½®å­—æ®µå¦‚ä¸‹ï¼š åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°moonshotFileId\tstring\téå¿…å¡«\t-\té€šè¿‡æ–‡ä»¶æ¥å£ä¸Šä¼ è‡³æœˆä¹‹æš—é¢çš„æ–‡ä»¶ IDï¼Œå…¶å†…å®¹å°†è¢«ç”¨åš AI å¯¹è¯çš„ä¸Šä¸‹æ–‡ã€‚ä¸å¯ä¸ context å­—æ®µåŒæ—¶é…ç½®ã€‚ é€šä¹‰åƒé—®ï¼ˆQwenï¼‰â€‹ é€šä¹‰åƒé—®æ‰€å¯¹åº”çš„ type ä¸º qwenã€‚å®ƒç‰¹æœ‰çš„é…ç½®å­—æ®µå¦‚ä¸‹ï¼š åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°qwenEnableSearch\tboolean\téå¿…å¡«\t-\tæ˜¯å¦å¯ç”¨é€šä¹‰åƒé—®å†…ç½®çš„äº’è”ç½‘æœç´¢åŠŸèƒ½ã€‚ qwenFileIds\tarray of string\téå¿…å¡«\t-\té€šè¿‡æ–‡ä»¶æ¥å£ä¸Šä¼ è‡³Dashscopeçš„æ–‡ä»¶ IDï¼Œå…¶å†…å®¹å°†è¢«ç”¨åš AI å¯¹è¯çš„ä¸Šä¸‹æ–‡ã€‚ä¸å¯ä¸ context å­—æ®µåŒæ—¶é…ç½®ã€‚ ç™¾å·æ™ºèƒ½ (Baichuan AI)â€‹ ç™¾å·æ™ºèƒ½æ‰€å¯¹åº”çš„ type ä¸º baichuan ã€‚å®ƒå¹¶æ— ç‰¹æœ‰çš„é…ç½®å­—æ®µã€‚ é›¶ä¸€ä¸‡ç‰©ï¼ˆYiï¼‰â€‹ é›¶ä¸€ä¸‡ç‰©æ‰€å¯¹åº”çš„ type ä¸º yiã€‚å®ƒå¹¶æ— ç‰¹æœ‰çš„é…ç½®å­—æ®µã€‚ æ™ºè°±AIï¼ˆZhipu AIï¼‰â€‹ æ™ºè°±AIæ‰€å¯¹åº”çš„ type ä¸º zhipuaiã€‚å®ƒå¹¶æ— ç‰¹æœ‰çš„é…ç½®å­—æ®µã€‚ DeepSeekï¼ˆDeepSeekï¼‰â€‹ DeepSeekæ‰€å¯¹åº”çš„ type ä¸º deepseekã€‚å®ƒå¹¶æ— ç‰¹æœ‰çš„é…ç½®å­—æ®µã€‚ Groqâ€‹ Groq æ‰€å¯¹åº”çš„ type ä¸º groqã€‚å®ƒå¹¶æ— ç‰¹æœ‰çš„é…ç½®å­—æ®µã€‚ æ–‡å¿ƒä¸€è¨€ï¼ˆBaiduï¼‰â€‹ æ–‡å¿ƒä¸€è¨€æ‰€å¯¹åº”çš„ type ä¸º baiduã€‚å®ƒå¹¶æ— ç‰¹æœ‰çš„é…ç½®å­—æ®µã€‚ MiniMaxâ€‹ MiniMaxæ‰€å¯¹åº”çš„ type ä¸º minimaxã€‚å®ƒç‰¹æœ‰çš„é…ç½®å­—æ®µå¦‚ä¸‹ï¼š åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°minimaxGroupId\tstring\tå½“ä½¿ç”¨abab6.5-chat, abab6.5s-chat, abab5.5s-chat, abab5.5-chatå››ç§æ¨¡å‹æ—¶å¿…å¡«\t-\tå½“ä½¿ç”¨abab6.5-chat, abab6.5s-chat, abab5.5s-chat, abab5.5-chatå››ç§æ¨¡å‹æ—¶ä¼šä½¿ç”¨ChatCompletion Proï¼Œéœ€è¦è®¾ç½®groupID Anthropic Claudeâ€‹ Anthropic Claude æ‰€å¯¹åº”çš„ type ä¸º claudeã€‚å®ƒç‰¹æœ‰çš„é…ç½®å­—æ®µå¦‚ä¸‹ï¼š åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°claudeVersion\tstring\tå¯é€‰\t-\tClaude æœåŠ¡çš„ API ç‰ˆæœ¬ï¼Œé»˜è®¤ä¸º 2023-06-01 Ollamaâ€‹ Ollama æ‰€å¯¹åº”çš„ type ä¸º ollamaã€‚å®ƒç‰¹æœ‰çš„é…ç½®å­—æ®µå¦‚ä¸‹ï¼š åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°ollamaServerHost\tstring\tå¿…å¡«\t-\tOllama æœåŠ¡å™¨çš„ä¸»æœºåœ°å€ ollamaServerPort\tnumber\tå¿…å¡«\t-\tOllama æœåŠ¡å™¨çš„ç«¯å£å·ï¼Œé»˜è®¤ä¸º11434 æ··å…ƒâ€‹ æ··å…ƒæ‰€å¯¹åº”çš„ type ä¸º hunyuanã€‚å®ƒç‰¹æœ‰çš„é…ç½®å­—æ®µå¦‚ä¸‹ï¼š åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°hunyuanAuthId\tstring\tå¿…å¡«\t-\tæ··å…ƒç”¨äºv3ç‰ˆæœ¬è®¤è¯çš„id hunyuanAuthKey\tstring\tå¿…å¡«\t-\tæ··å…ƒç”¨äºv3ç‰ˆæœ¬è®¤è¯çš„key é˜¶è·ƒæ˜Ÿè¾° (Stepfun)â€‹ é˜¶è·ƒæ˜Ÿè¾°æ‰€å¯¹åº”çš„ type ä¸º stepfunã€‚å®ƒå¹¶æ— ç‰¹æœ‰çš„é…ç½®å­—æ®µã€‚ ","version":"Next","tagName":"h3"},{"title":"ç”¨æ³•ç¤ºä¾‹â€‹","type":1,"pageTitle":"AI ä»£ç†","url":"/zh-cn/docs/plugins/ai/ai-proxy#ç”¨æ³•ç¤ºä¾‹","content":"","version":"Next","tagName":"h2"},{"title":"ä½¿ç”¨ OpenAI åè®®ä»£ç† Azure OpenAI æœåŠ¡â€‹","type":1,"pageTitle":"AI ä»£ç†","url":"/zh-cn/docs/plugins/ai/ai-proxy#ä½¿ç”¨-openai-åè®®ä»£ç†-azure-openai-æœåŠ¡","content":"ä½¿ç”¨æœ€åŸºæœ¬çš„ Azure OpenAI æœåŠ¡ï¼Œä¸é…ç½®ä»»ä½•ä¸Šä¸‹æ–‡ã€‚ é…ç½®ä¿¡æ¯ provider: type: azure apiTokens: - &quot;YOUR_AZURE_OPENAI_API_TOKEN&quot; azureServiceUrl: &quot;https://YOUR_RESOURCE_NAME.openai.azure.com/openai/deployments/YOUR_DEPLOYMENT_NAME/chat/completions?api-version=2024-02-15-preview&quot;,  è¯·æ±‚ç¤ºä¾‹ { &quot;model&quot;: &quot;gpt-3&quot;, &quot;messages&quot;: [ { &quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;ä½ å¥½ï¼Œä½ æ˜¯è°ï¼Ÿ&quot; } ], &quot;temperature&quot;: 0.3 }  å“åº”ç¤ºä¾‹ { &quot;choices&quot;: [ { &quot;content_filter_results&quot;: { &quot;hate&quot;: { &quot;filtered&quot;: false, &quot;severity&quot;: &quot;safe&quot; }, &quot;self_harm&quot;: { &quot;filtered&quot;: false, &quot;severity&quot;: &quot;safe&quot; }, &quot;sexual&quot;: { &quot;filtered&quot;: false, &quot;severity&quot;: &quot;safe&quot; }, &quot;violence&quot;: { &quot;filtered&quot;: false, &quot;severity&quot;: &quot;safe&quot; } }, &quot;finish_reason&quot;: &quot;stop&quot;, &quot;index&quot;: 0, &quot;logprobs&quot;: null, &quot;message&quot;: { &quot;content&quot;: &quot;ä½ å¥½ï¼æˆ‘æ˜¯ä¸€ä¸ªAIåŠ©æ‰‹ï¼Œå¯ä»¥å›ç­”ä½ çš„é—®é¢˜å’Œæä¾›å¸®åŠ©ã€‚æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®åˆ°ä½ çš„å—ï¼Ÿ&quot;, &quot;role&quot;: &quot;assistant&quot; } } ], &quot;created&quot;: 1714807624, &quot;id&quot;: &quot;chatcmpl-abcdefg1234567890&quot;, &quot;model&quot;: &quot;gpt-35-turbo-16k&quot;, &quot;object&quot;: &quot;chat.completion&quot;, &quot;prompt_filter_results&quot;: [ { &quot;prompt_index&quot;: 0, &quot;content_filter_results&quot;: { &quot;hate&quot;: { &quot;filtered&quot;: false, &quot;severity&quot;: &quot;safe&quot; }, &quot;self_harm&quot;: { &quot;filtered&quot;: false, &quot;severity&quot;: &quot;safe&quot; }, &quot;sexual&quot;: { &quot;filtered&quot;: false, &quot;severity&quot;: &quot;safe&quot; }, &quot;violence&quot;: { &quot;filtered&quot;: false, &quot;severity&quot;: &quot;safe&quot; } } } ], &quot;system_fingerprint&quot;: null, &quot;usage&quot;: { &quot;completion_tokens&quot;: 40, &quot;prompt_tokens&quot;: 15, &quot;total_tokens&quot;: 55 } }  ","version":"Next","tagName":"h3"},{"title":"ä½¿ç”¨ OpenAI åè®®ä»£ç†é€šä¹‰åƒé—®æœåŠ¡â€‹","type":1,"pageTitle":"AI ä»£ç†","url":"/zh-cn/docs/plugins/ai/ai-proxy#ä½¿ç”¨-openai-åè®®ä»£ç†é€šä¹‰åƒé—®æœåŠ¡","content":"ä½¿ç”¨é€šä¹‰åƒé—®æœåŠ¡ï¼Œå¹¶é…ç½®ä» OpenAI å¤§æ¨¡å‹åˆ°é€šä¹‰åƒé—®çš„æ¨¡å‹æ˜ å°„å…³ç³»ã€‚ é…ç½®ä¿¡æ¯ provider: type: qwen apiTokens: - &quot;YOUR_QWEN_API_TOKEN&quot; modelMapping: 'gpt-3': &quot;qwen-turbo&quot; 'gpt-35-turbo': &quot;qwen-plus&quot; 'gpt-4-turbo': &quot;qwen-max&quot; '*': &quot;qwen-turbo&quot;  è¯·æ±‚ç¤ºä¾‹ { &quot;model&quot;: &quot;gpt-3&quot;, &quot;messages&quot;: [ { &quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;ä½ å¥½ï¼Œä½ æ˜¯è°ï¼Ÿ&quot; } ], &quot;temperature&quot;: 0.3 }  å“åº”ç¤ºä¾‹ { &quot;id&quot;: &quot;c2518bd3-0f46-97d1-be34-bb5777cb3108&quot;, &quot;choices&quot;: [ { &quot;index&quot;: 0, &quot;message&quot;: { &quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;æˆ‘æ˜¯é€šä¹‰åƒé—®ï¼Œç”±é˜¿é‡Œäº‘å¼€å‘çš„AIåŠ©æ‰‹ã€‚æˆ‘å¯ä»¥å›ç­”å„ç§é—®é¢˜ã€æä¾›ä¿¡æ¯å’Œä¸ç”¨æˆ·è¿›è¡Œå¯¹è¯ã€‚æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®åŠ©ä½ çš„å—ï¼Ÿ&quot; }, &quot;finish_reason&quot;: &quot;stop&quot; } ], &quot;created&quot;: 1715175072, &quot;model&quot;: &quot;qwen-turbo&quot;, &quot;object&quot;: &quot;chat.completion&quot;, &quot;usage&quot;: { &quot;prompt_tokens&quot;: 24, &quot;completion_tokens&quot;: 33, &quot;total_tokens&quot;: 57 } }  ","version":"Next","tagName":"h3"},{"title":"ä½¿ç”¨é€šä¹‰åƒé—®é…åˆçº¯æ–‡æœ¬ä¸Šä¸‹æ–‡ä¿¡æ¯â€‹","type":1,"pageTitle":"AI ä»£ç†","url":"/zh-cn/docs/plugins/ai/ai-proxy#ä½¿ç”¨é€šä¹‰åƒé—®é…åˆçº¯æ–‡æœ¬ä¸Šä¸‹æ–‡ä¿¡æ¯","content":"ä½¿ç”¨é€šä¹‰åƒé—®æœåŠ¡ï¼ŒåŒæ—¶é…ç½®çº¯æ–‡æœ¬ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚ é…ç½®ä¿¡æ¯ provider: type: qwen apiTokens: - &quot;YOUR_QWEN_API_TOKEN&quot; modelMapping: &quot;*&quot;: &quot;qwen-turbo&quot; context: - fileUrl: &quot;http://file.default.svc.cluster.local/ai/context.txt&quot;, serviceName: &quot;file.dns&quot;, servicePort: 80  è¯·æ±‚ç¤ºä¾‹ { &quot;model&quot;: &quot;gpt-3&quot;, &quot;messages&quot;: [ { &quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;è¯·æ¦‚è¿°æ–‡æ¡ˆå†…å®¹&quot; } ], &quot;temperature&quot;: 0.3 }  å“åº”ç¤ºä¾‹ { &quot;id&quot;: &quot;cmpl-77861a17681f4987ab8270dbf8001936&quot;, &quot;object&quot;: &quot;chat.completion&quot;, &quot;created&quot;: 9756990, &quot;model&quot;: &quot;moonshot-v1-128k&quot;, &quot;choices&quot;: [ { &quot;index&quot;: 0, &quot;message&quot;: { &quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;è¿™ä»½æ–‡æ¡ˆæ˜¯ä¸€ä»½å…³äº...&quot; }, &quot;finish_reason&quot;: &quot;stop&quot; } ], &quot;usage&quot;: { &quot;prompt_tokens&quot;: 20181, &quot;completion_tokens&quot;: 439, &quot;total_tokens&quot;: 20620 } }  ","version":"Next","tagName":"h3"},{"title":"ä½¿ç”¨é€šä¹‰åƒé—®é…åˆå…¶åŸç”Ÿçš„æ–‡ä»¶ä¸Šä¸‹æ–‡â€‹","type":1,"pageTitle":"AI ä»£ç†","url":"/zh-cn/docs/plugins/ai/ai-proxy#ä½¿ç”¨é€šä¹‰åƒé—®é…åˆå…¶åŸç”Ÿçš„æ–‡ä»¶ä¸Šä¸‹æ–‡","content":"æå‰ä¸Šä¼ æ–‡ä»¶è‡³é€šä¹‰åƒé—®ï¼Œä»¥æ–‡ä»¶å†…å®¹ä½œä¸ºä¸Šä¸‹æ–‡ä½¿ç”¨å…¶ AI æœåŠ¡ã€‚ é…ç½®ä¿¡æ¯ provider: type: qwen apiTokens: - &quot;YOUR_QWEN_API_TOKEN&quot; modelMapping: &quot;*&quot;: &quot;qwen-long&quot; # é€šä¹‰åƒé—®çš„æ–‡ä»¶ä¸Šä¸‹æ–‡åªèƒ½åœ¨ qwen-long æ¨¡å‹ä¸‹ä½¿ç”¨ qwenFileIds: - &quot;file-fe-xxx&quot; - &quot;file-fe-yyy&quot;  è¯·æ±‚ç¤ºä¾‹ { &quot;model&quot;: &quot;gpt-4-turbo&quot;, &quot;messages&quot;: [ { &quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;è¯·æ¦‚è¿°æ–‡æ¡ˆå†…å®¹&quot; } ], &quot;temperature&quot;: 0.3 }  å“åº”ç¤ºä¾‹ { &quot;output&quot;: { &quot;choices&quot;: [ { &quot;finish_reason&quot;: &quot;stop&quot;, &quot;message&quot;: { &quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;æ‚¨ä¸Šä¼ äº†ä¸¤ä¸ªæ–‡ä»¶ï¼Œ`context.txt` å’Œ `context_2.txt`ï¼Œå®ƒä»¬ä¼¼ä¹éƒ½åŒ…å«äº†å…³äºxxxx&quot; } } ] }, &quot;usage&quot;: { &quot;total_tokens&quot;: 2023, &quot;output_tokens&quot;: 530, &quot;input_tokens&quot;: 1493 }, &quot;request_id&quot;: &quot;187e99ba-5b64-9ffe-8f69-01dafbaf6ed7&quot; }  ","version":"Next","tagName":"h3"},{"title":"ä½¿ç”¨æœˆä¹‹æš—é¢é…åˆå…¶åŸç”Ÿçš„æ–‡ä»¶ä¸Šä¸‹æ–‡â€‹","type":1,"pageTitle":"AI ä»£ç†","url":"/zh-cn/docs/plugins/ai/ai-proxy#ä½¿ç”¨æœˆä¹‹æš—é¢é…åˆå…¶åŸç”Ÿçš„æ–‡ä»¶ä¸Šä¸‹æ–‡","content":"æå‰ä¸Šä¼ æ–‡ä»¶è‡³æœˆä¹‹æš—é¢ï¼Œä»¥æ–‡ä»¶å†…å®¹ä½œä¸ºä¸Šä¸‹æ–‡ä½¿ç”¨å…¶ AI æœåŠ¡ã€‚ é…ç½®ä¿¡æ¯ provider: type: moonshot apiTokens: - &quot;YOUR_MOONSHOT_API_TOKEN&quot; moonshotFileId: &quot;YOUR_MOONSHOT_FILE_ID&quot;, modelMapping: '*': &quot;moonshot-v1-32k&quot;  è¯·æ±‚ç¤ºä¾‹ { &quot;model&quot;: &quot;gpt-4-turbo&quot;, &quot;messages&quot;: [ { &quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;è¯·æ¦‚è¿°æ–‡æ¡ˆå†…å®¹&quot; } ], &quot;temperature&quot;: 0.3 }  å“åº”ç¤ºä¾‹ { &quot;id&quot;: &quot;cmpl-e5ca873642ca4f5d8b178c1742f9a8e8&quot;, &quot;object&quot;: &quot;chat.completion&quot;, &quot;created&quot;: 1872961, &quot;model&quot;: &quot;moonshot-v1-128k&quot;, &quot;choices&quot;: [ { &quot;index&quot;: 0, &quot;message&quot;: { &quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;æ–‡æ¡ˆå†…å®¹æ˜¯å…³äºä¸€ä¸ªåä¸ºâ€œxxxxâ€çš„æ”¯ä»˜å¹³å°...&quot; }, &quot;finish_reason&quot;: &quot;stop&quot; } ], &quot;usage&quot;: { &quot;prompt_tokens&quot;: 11, &quot;completion_tokens&quot;: 498, &quot;total_tokens&quot;: 509 } }  ","version":"Next","tagName":"h3"},{"title":"ä½¿ç”¨ OpenAI åè®®ä»£ç† Groq æœåŠ¡â€‹","type":1,"pageTitle":"AI ä»£ç†","url":"/zh-cn/docs/plugins/ai/ai-proxy#ä½¿ç”¨-openai-åè®®ä»£ç†-groq-æœåŠ¡","content":"é…ç½®ä¿¡æ¯ provider: type: groq apiTokens: - &quot;YOUR_GROQ_API_TOKEN&quot;  è¯·æ±‚ç¤ºä¾‹ { &quot;model&quot;: &quot;llama3-8b-8192&quot;, &quot;messages&quot;: [ { &quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;ä½ å¥½ï¼Œä½ æ˜¯è°ï¼Ÿ&quot; } ] }  å“åº”ç¤ºä¾‹ { &quot;id&quot;: &quot;chatcmpl-26733989-6c52-4056-b7a9-5da791bd7102&quot;, &quot;object&quot;: &quot;chat.completion&quot;, &quot;created&quot;: 1715917967, &quot;model&quot;: &quot;llama3-8b-8192&quot;, &quot;choices&quot;: [ { &quot;index&quot;: 0, &quot;message&quot;: { &quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;ğŸ˜Š Ni Hao! (That's \\&quot;hello\\&quot; in Chinese!)\\n\\nI am LLaMA, an AI assistant developed by Meta AI that can understand and respond to human input in a conversational manner. I'm not a human, but a computer program designed to simulate conversations and answer questions to the best of my ability. I'm happy to chat with you in Chinese or help with any questions or topics you'd like to discuss! ğŸ˜Š&quot; }, &quot;logprobs&quot;: null, &quot;finish_reason&quot;: &quot;stop&quot; } ], &quot;usage&quot;: { &quot;prompt_tokens&quot;: 16, &quot;prompt_time&quot;: 0.005, &quot;completion_tokens&quot;: 89, &quot;completion_time&quot;: 0.104, &quot;total_tokens&quot;: 105, &quot;total_time&quot;: 0.109 }, &quot;system_fingerprint&quot;: &quot;fp_dadc9d6142&quot;, &quot;x_groq&quot;: { &quot;id&quot;: &quot;req_01hy2awmcxfpwbq56qh6svm7qz&quot; } }  ","version":"Next","tagName":"h3"},{"title":"ä½¿ç”¨ OpenAI åè®®ä»£ç† Claude æœåŠ¡â€‹","type":1,"pageTitle":"AI ä»£ç†","url":"/zh-cn/docs/plugins/ai/ai-proxy#ä½¿ç”¨-openai-åè®®ä»£ç†-claude-æœåŠ¡","content":"é…ç½®ä¿¡æ¯ provider: type: claude apiTokens: - &quot;YOUR_CLAUDE_API_TOKEN&quot; claudeVersion: &quot;2023-06-01&quot; modelMapping&quot;: - &quot;gpt-3&quot;: &quot;claude-3-opus-20240229&quot;, - &quot;*&quot;: &quot;claude-3-sonnet-20240229&quot;  è¯·æ±‚ç¤ºä¾‹ { &quot;model&quot;: &quot;gpt-3&quot;, &quot;messages&quot;: [ { &quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;ä½ å¥½ï¼Œä½ æ˜¯è°ï¼Ÿ&quot; } ] }  å“åº”ç¤ºä¾‹ { &quot;id&quot;: &quot;msg_01Jt3GzyjuzymnxmZERJguLK&quot;, &quot;choices&quot;: [ { &quot;index&quot;: 0, &quot;message&quot;: { &quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;æ‚¨å¥½,æˆ‘æ˜¯ä¸€ä¸ªç”±äººå·¥æ™ºèƒ½å…¬å¸Anthropicå¼€å‘çš„èŠå¤©åŠ©æ‰‹ã€‚æˆ‘çš„åå­—å«Claude,æ˜¯ä¸€ä¸ªèªæ˜å‹å–„ã€çŸ¥è¯†æ¸Šåšçš„å¯¹è¯ç³»ç»Ÿã€‚å¾ˆé«˜å…´è®¤è¯†æ‚¨!æˆ‘å¯ä»¥å°±å„ç§è¯é¢˜ä¸æ‚¨èŠå¤©,å›ç­”é—®é¢˜,æä¾›å»ºè®®å’Œå¸®åŠ©ã€‚æˆ‘ä¼šå°½æœ€å¤§åŠªåŠ›ç»™æ‚¨æœ‰å¸®åŠ©çš„å›å¤ã€‚å¸Œæœ›æˆ‘ä»¬èƒ½æœ‰ä¸ªæ„‰å¿«çš„äº¤æµ!&quot; }, &quot;finish_reason&quot;: &quot;stop&quot; } ], &quot;created&quot;: 1717385918, &quot;model&quot;: &quot;claude-3-opus-20240229&quot;, &quot;object&quot;: &quot;chat.completion&quot;, &quot;usage&quot;: { &quot;prompt_tokens&quot;: 16, &quot;completion_tokens&quot;: 126, &quot;total_tokens&quot;: 142 } }  ","version":"Next","tagName":"h3"},{"title":"ä½¿ç”¨ OpenAI åè®®ä»£ç†æ··å…ƒæœåŠ¡â€‹","type":1,"pageTitle":"AI ä»£ç†","url":"/zh-cn/docs/plugins/ai/ai-proxy#ä½¿ç”¨-openai-åè®®ä»£ç†æ··å…ƒæœåŠ¡","content":"é…ç½®ä¿¡æ¯ provider: type: &quot;hunyuan&quot; hunyuanAuthKey: &quot;&lt;YOUR AUTH KEY&gt;&quot; apiTokens: - &quot;&quot; hunyuanAuthId: &quot;&lt;YOUR AUTH ID&gt;&quot; timeout: 1200000 modelMapping: &quot;*&quot;: &quot;hunyuan-lite&quot;  è¯·æ±‚ç¤ºä¾‹è¯·æ±‚è„šæœ¬ï¼š  curl --location 'http://&lt;your higress domain&gt;/v1/chat/completions' \\ --header 'Content-Type: application/json' \\ --data '{ &quot;model&quot;: &quot;gpt-3&quot;, &quot;messages&quot;: [ { &quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;ä½ æ˜¯ä¸€ä¸ªåä¸“ä¸šçš„å¼€å‘äººå‘˜ï¼&quot; }, { &quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;ä½ å¥½ï¼Œä½ æ˜¯è°ï¼Ÿ&quot; } ], &quot;temperature&quot;: 0.3, &quot;stream&quot;: false }'  å“åº”ç¤ºä¾‹ { &quot;id&quot;: &quot;fd140c3e-0b69-4b19-849b-d354d32a6162&quot;, &quot;choices&quot;: [ { &quot;index&quot;: 0, &quot;delta&quot;: { &quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;ä½ å¥½ï¼æˆ‘æ˜¯ä¸€åä¸“ä¸šçš„å¼€å‘äººå‘˜ã€‚&quot; }, &quot;finish_reason&quot;: &quot;stop&quot; } ], &quot;created&quot;: 1717493117, &quot;model&quot;: &quot;hunyuan-lite&quot;, &quot;object&quot;: &quot;chat.completion&quot;, &quot;usage&quot;: { &quot;prompt_tokens&quot;: 15, &quot;completion_tokens&quot;: 9, &quot;total_tokens&quot;: 24 } }  ","version":"Next","tagName":"h3"},{"title":"ä½¿ç”¨ OpenAI åè®®ä»£ç†ç™¾åº¦æ–‡å¿ƒä¸€è¨€æœåŠ¡â€‹","type":1,"pageTitle":"AI ä»£ç†","url":"/zh-cn/docs/plugins/ai/ai-proxy#ä½¿ç”¨-openai-åè®®ä»£ç†ç™¾åº¦æ–‡å¿ƒä¸€è¨€æœåŠ¡","content":"é…ç½®ä¿¡æ¯ provider: type: baidu apiTokens: - &quot;YOUR_BAIDU_API_TOKEN&quot; modelMapping: 'gpt-3': &quot;ERNIE-4.0&quot; '*': &quot;ERNIE-4.0&quot;  è¯·æ±‚ç¤ºä¾‹ { &quot;model&quot;: &quot;gpt-4-turbo&quot;, &quot;messages&quot;: [ { &quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;ä½ å¥½ï¼Œä½ æ˜¯è°ï¼Ÿ&quot; } ], &quot;stream&quot;: false }  å“åº”ç¤ºä¾‹ { &quot;id&quot;: &quot;as-e90yfg1pk1&quot;, &quot;choices&quot;: [ { &quot;index&quot;: 0, &quot;message&quot;: { &quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;ä½ å¥½ï¼Œæˆ‘æ˜¯æ–‡å¿ƒä¸€è¨€ï¼Œè‹±æ–‡åæ˜¯ERNIE Botã€‚æˆ‘èƒ½å¤Ÿä¸äººå¯¹è¯äº’åŠ¨ï¼Œå›ç­”é—®é¢˜ï¼ŒååŠ©åˆ›ä½œï¼Œé«˜æ•ˆä¾¿æ·åœ°å¸®åŠ©äººä»¬è·å–ä¿¡æ¯ã€çŸ¥è¯†å’Œçµæ„Ÿã€‚&quot; }, &quot;finish_reason&quot;: &quot;stop&quot; } ], &quot;created&quot;: 1717251488, &quot;model&quot;: &quot;ERNIE-4.0&quot;, &quot;object&quot;: &quot;chat.completion&quot;, &quot;usage&quot;: { &quot;prompt_tokens&quot;: 4, &quot;completion_tokens&quot;: 33, &quot;total_tokens&quot;: 37 } }  ","version":"Next","tagName":"h3"},{"title":"ä½¿ç”¨ OpenAI åè®®ä»£ç†MiniMaxæœåŠ¡â€‹","type":1,"pageTitle":"AI ä»£ç†","url":"/zh-cn/docs/plugins/ai/ai-proxy#ä½¿ç”¨-openai-åè®®ä»£ç†minimaxæœåŠ¡","content":"é…ç½®ä¿¡æ¯ provider: type: minimax apiTokens: - &quot;YOUR_MINIMAX_API_TOKEN&quot; modelMapping: &quot;gpt-3&quot;: &quot;abab6.5g-chat&quot; &quot;gpt-4&quot;: &quot;abab6.5-chat&quot; &quot;*&quot;: &quot;abab6.5g-chat&quot; minimaxGroupId: &quot;YOUR_MINIMAX_GROUP_ID&quot;  è¯·æ±‚ç¤ºä¾‹ { &quot;model&quot;: &quot;gpt-4-turbo&quot;, &quot;messages&quot;: [ { &quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;ä½ å¥½ï¼Œä½ æ˜¯è°ï¼Ÿ&quot; } ], &quot;stream&quot;: false }  å“åº”ç¤ºä¾‹ { &quot;id&quot;: &quot;02b2251f8c6c09d68c1743f07c72afd7&quot;, &quot;choices&quot;: [ { &quot;finish_reason&quot;: &quot;stop&quot;, &quot;index&quot;: 0, &quot;message&quot;: { &quot;content&quot;: &quot;ä½ å¥½ï¼æˆ‘æ˜¯MMæ™ºèƒ½åŠ©ç†ï¼Œä¸€æ¬¾ç”±MiniMaxè‡ªç ”çš„å¤§å‹è¯­è¨€æ¨¡å‹ã€‚æˆ‘å¯ä»¥å¸®åŠ©ä½ è§£ç­”é—®é¢˜ï¼Œæä¾›ä¿¡æ¯ï¼Œè¿›è¡Œå¯¹è¯ç­‰ã€‚æœ‰ä»€ä¹ˆå¯ä»¥å¸®åŠ©ä½ çš„å—ï¼Ÿ&quot;, &quot;role&quot;: &quot;assistant&quot; } } ], &quot;created&quot;: 1717760544, &quot;model&quot;: &quot;abab6.5s-chat&quot;, &quot;object&quot;: &quot;chat.completion&quot;, &quot;usage&quot;: { &quot;total_tokens&quot;: 106 }, &quot;input_sensitive&quot;: false, &quot;output_sensitive&quot;: false, &quot;input_sensitive_type&quot;: 0, &quot;output_sensitive_type&quot;: 0, &quot;base_resp&quot;: { &quot;status_code&quot;: 0, &quot;status_msg&quot;: &quot;&quot; } }  ","version":"Next","tagName":"h3"},{"title":"å®Œæ•´é…ç½®ç¤ºä¾‹â€‹","type":1,"pageTitle":"AI ä»£ç†","url":"/zh-cn/docs/plugins/ai/ai-proxy#å®Œæ•´é…ç½®ç¤ºä¾‹","content":"","version":"Next","tagName":"h2"},{"title":"Kubernetes ç¤ºä¾‹â€‹","type":1,"pageTitle":"AI ä»£ç†","url":"/zh-cn/docs/plugins/ai/ai-proxy#kubernetes-ç¤ºä¾‹","content":"ä»¥ä¸‹ä»¥ä½¿ç”¨ OpenAI åè®®ä»£ç† Groq æœåŠ¡ä¸ºä¾‹ï¼Œå±•ç¤ºå®Œæ•´çš„æ’ä»¶é…ç½®ç¤ºä¾‹ã€‚ apiVersion: extensions.higress.io/v1alpha1 kind: WasmPlugin metadata: name: ai-proxy-groq namespace: higress-system spec: matchRules: - config: provider: type: groq apiTokens: - &quot;YOUR_API_TOKEN&quot; ingress: - groq url: oci://higress-registry.cn-hangzhou.cr.aliyuncs.com/plugins/ai-proxy:1.0.0 --- apiVersion: networking.k8s.io/v1 kind: Ingress metadata: annotations: higress.io/backend-protocol: HTTPS higress.io/destination: groq.dns higress.io/proxy-ssl-name: api.groq.com higress.io/proxy-ssl-server-name: &quot;on&quot; labels: higress.io/resource-definer: higress name: groq namespace: higress-system spec: ingressClassName: higress rules: - host: &lt;YOUR-DOMAIN&gt; http: paths: - backend: resource: apiGroup: networking.higress.io kind: McpBridge name: default path: / pathType: Prefix --- apiVersion: networking.higress.io/v1 kind: McpBridge metadata: name: default namespace: higress-system spec: registries: - domain: api.groq.com name: groq port: 443 type: dns  è®¿é—®ç¤ºä¾‹ï¼š curl &quot;http://&lt;YOUR-DOMAIN&gt;/v1/chat/completions&quot; -H &quot;Content-Type: application/json&quot; -d '{ &quot;model&quot;: &quot;llama3-8b-8192&quot;, &quot;messages&quot;: [ { &quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;ä½ å¥½ï¼Œä½ æ˜¯è°ï¼Ÿ&quot; } ] }'  ","version":"Next","tagName":"h3"},{"title":"Docker-Compose ç¤ºä¾‹â€‹","type":1,"pageTitle":"AI ä»£ç†","url":"/zh-cn/docs/plugins/ai/ai-proxy#docker-compose-ç¤ºä¾‹","content":"docker-compose.yml é…ç½®æ–‡ä»¶ï¼š version: '3.7' services: envoy: image: higress-registry.cn-hangzhou.cr.aliyuncs.com/higress/envoy:1.20 entrypoint: /usr/local/bin/envoy # å¼€å¯äº† debug çº§åˆ«æ—¥å¿—æ–¹ä¾¿è°ƒè¯• command: -c /etc/envoy/envoy.yaml --component-log-level wasm:debug networks: - higress-net ports: - &quot;10000:10000&quot; volumes: - ./envoy.yaml:/etc/envoy/envoy.yaml - ./plugin.wasm:/etc/envoy/plugin.wasm networks: higress-net: {}  envoy.yaml é…ç½®æ–‡ä»¶ï¼š admin: address: socket_address: protocol: TCP address: 0.0.0.0 port_value: 9901 static_resources: listeners: - name: listener_0 address: socket_address: protocol: TCP address: 0.0.0.0 port_value: 10000 filter_chains: - filters: - name: envoy.filters.network.http_connection_manager typed_config: &quot;@type&quot;: type.googleapis.com/envoy.extensions.filters.network.http_connection_manager.v3.HttpConnectionManager scheme_header_transformation: scheme_to_overwrite: https stat_prefix: ingress_http # Output envoy logs to stdout access_log: - name: envoy.access_loggers.stdout typed_config: &quot;@type&quot;: type.googleapis.com/envoy.extensions.access_loggers.stream.v3.StdoutAccessLog # Modify as required route_config: name: local_route virtual_hosts: - name: local_service domains: [ &quot;*&quot; ] routes: - match: prefix: &quot;/&quot; route: cluster: claude timeout: 300s http_filters: - name: claude typed_config: &quot;@type&quot;: type.googleapis.com/udpa.type.v1.TypedStruct type_url: type.googleapis.com/envoy.extensions.filters.http.wasm.v3.Wasm value: config: name: claude vm_config: runtime: envoy.wasm.runtime.v8 code: local: filename: /etc/envoy/plugin.wasm configuration: &quot;@type&quot;: &quot;type.googleapis.com/google.protobuf.StringValue&quot; value: | # æ’ä»¶é…ç½® { &quot;provider&quot;: { &quot;type&quot;: &quot;claude&quot;, &quot;apiTokens&quot;: [ &quot;YOUR_API_TOKEN&quot; ] } } - name: envoy.filters.http.router clusters: - name: claude connect_timeout: 30s type: LOGICAL_DNS dns_lookup_family: V4_ONLY lb_policy: ROUND_ROBIN load_assignment: cluster_name: claude endpoints: - lb_endpoints: - endpoint: address: socket_address: address: api.anthropic.com # API æœåŠ¡åœ°å€ port_value: 443 transport_socket: name: envoy.transport_sockets.tls typed_config: &quot;@type&quot;: type.googleapis.com/envoy.extensions.transport_sockets.tls.v3.UpstreamTlsContext &quot;sni&quot;: &quot;api.anthropic.com&quot;  è®¿é—®ç¤ºä¾‹ï¼š curl &quot;http://localhost:10000/v1/chat/completions&quot; -H &quot;Content-Type: application/json&quot; -d '{ &quot;model&quot;: &quot;claude-3-opus-20240229&quot;, &quot;max_tokens&quot;: 1024, &quot;messages&quot;: [ { &quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;ä½ å¥½ï¼Œä½ æ˜¯è°ï¼Ÿ&quot; } ] }'  ","version":"Next","tagName":"h3"},{"title":"CORS","type":0,"sectionRef":"#","url":"/zh-cn/docs/plugins/security/cors","content":"","keywords":"higress cors","version":"Next"},{"title":"åŠŸèƒ½è¯´æ˜â€‹","type":1,"pageTitle":"CORS","url":"/zh-cn/docs/plugins/security/cors#åŠŸèƒ½è¯´æ˜","content":"cors æ’ä»¶å¯ä»¥ä¸ºæœåŠ¡ç«¯å¯ç”¨ CORSï¼ˆCross-Origin Resource Sharingï¼Œè·¨åŸŸèµ„æºå…±äº«ï¼‰çš„è¿”å› HTTP å“åº”å¤´ã€‚ ","version":"Next","tagName":"h2"},{"title":"é…ç½®å­—æ®µâ€‹","type":1,"pageTitle":"CORS","url":"/zh-cn/docs/plugins/security/cors#é…ç½®å­—æ®µ","content":"åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°allow_origins\tarray of string\té€‰å¡«\t*\tå…è®¸è·¨åŸŸè®¿é—®çš„ Originï¼Œæ ¼å¼ä¸º scheme://host:portï¼Œç¤ºä¾‹å¦‚ http://example.com:8081ã€‚å½“ allow_credentials ä¸º false æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ * æ¥è¡¨ç¤ºå…è®¸æ‰€æœ‰ Origin é€šè¿‡ allow_origin_patterns\tarray of string\té€‰å¡«\t-\tå…è®¸è·¨åŸŸè®¿é—®çš„ Origin æ¨¡å¼åŒ¹é…ï¼Œ ç”¨ åŒ¹é…åŸŸåæˆ–è€…ç«¯å£ï¼Œ æ¯”å¦‚ http://.example.com -- åŒ¹é…åŸŸåï¼Œ http://.example.com:[8080,9090] -- åŒ¹é…åŸŸåå’ŒæŒ‡å®šç«¯å£ï¼Œ http://.example.com:[*] -- åŒ¹é…åŸŸåå’Œæ‰€æœ‰ç«¯å£ã€‚å•ç‹¬ * è¡¨ç¤ºåŒ¹é…æ‰€æœ‰åŸŸåå’Œç«¯å£ allow_methods\tarray of string\té€‰å¡«\tGET, PUT, POST, DELETE, PATCH, OPTIONS\tå…è®¸è·¨åŸŸè®¿é—®çš„ Methodï¼Œæ¯”å¦‚ï¼šGETï¼ŒPOST ç­‰ã€‚å¯ä»¥ä½¿ç”¨ * æ¥è¡¨ç¤ºå…è®¸æ‰€æœ‰ Methodã€‚ allow_headers\tarray of string\té€‰å¡«\tDNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-Withï¼Œ If-Modified-Since,Cache-Control,Content-Type,Authorization\tå…è®¸è·¨åŸŸè®¿é—®æ—¶è¯·æ±‚æ–¹æºå¸¦å“ªäº›é CORS è§„èŒƒä»¥å¤–çš„ Headerã€‚å¯ä»¥ä½¿ç”¨ * æ¥è¡¨ç¤ºå…è®¸ä»»æ„ Headerã€‚ expose_headers\tarray of string\té€‰å¡«\t-\tå…è®¸è·¨åŸŸè®¿é—®æ—¶å“åº”æ–¹æºå¸¦å“ªäº›é CORS è§„èŒƒä»¥å¤–çš„ Headerã€‚å¯ä»¥ä½¿ç”¨ * æ¥è¡¨ç¤ºå…è®¸ä»»æ„ Headerã€‚ allow_credentials\tbool\té€‰å¡«\tfalse\tæ˜¯å¦å…è®¸è·¨åŸŸè®¿é—®çš„è¯·æ±‚æ–¹æºå¸¦å‡­æ®ï¼ˆå¦‚ Cookie ç­‰ï¼‰ã€‚æ ¹æ® CORS è§„èŒƒï¼Œå¦‚æœè®¾ç½®è¯¥é€‰é¡¹ä¸º trueï¼Œåœ¨ allow_origins ä¸èƒ½ä½¿ç”¨ ï¼Œ æ›¿æ¢æˆä½¿ç”¨ allow_origin_patterns max_age\tnumber\té€‰å¡«\t86400ç§’\tæµè§ˆå™¨ç¼“å­˜ CORS ç»“æœçš„æœ€å¤§æ—¶é—´ï¼Œå•ä½ä¸ºç§’ã€‚ åœ¨è¿™ä¸ªæ—¶é—´èŒƒå›´å†…ï¼Œæµè§ˆå™¨ä¼šå¤ç”¨ä¸Šä¸€æ¬¡çš„æ£€æŸ¥ç»“æœ æ³¨æ„ allow_credentials æ˜¯ä¸€ä¸ªå¾ˆæ•æ„Ÿçš„é€‰é¡¹ï¼Œè¯·è°¨æ…å¼€å¯ã€‚å¼€å¯ä¹‹åï¼Œallow_credentials å’Œ allow_origins ä¸º ä¸èƒ½åŒæ—¶ä½¿ç”¨ï¼ŒåŒæ—¶è®¾ç½®æ—¶ï¼Œ allow_origins å€¼ä¸º &quot;&quot; ç”Ÿæ•ˆã€‚allow_origins å’Œ allow_origin_patterns å¯ä»¥åŒæ—¶è®¾ç½®ï¼Œ å…ˆæ£€æŸ¥ allow_origins æ˜¯å¦åŒ¹é…ï¼Œç„¶åå†æ£€æŸ¥ allow_origin_patterns æ˜¯å¦åŒ¹é…ã€‚éæ³• CORS è¯·æ±‚ï¼Œ HTTP çŠ¶æ€ç è¿”å›æ˜¯ 403ï¼Œ è¿”å›ä½“å†…å®¹ä¸º &quot;Invalid CORS request&quot;ã€‚ ","version":"Next","tagName":"h2"},{"title":"é…ç½®ç¤ºä¾‹â€‹","type":1,"pageTitle":"CORS","url":"/zh-cn/docs/plugins/security/cors#é…ç½®ç¤ºä¾‹","content":"","version":"Next","tagName":"h2"},{"title":"å…è®¸æ‰€æœ‰è·¨åŸŸè®¿é—®, ä¸å…è®¸è¯·æ±‚æ–¹æºå¸¦å‡­æ®â€‹","type":1,"pageTitle":"CORS","url":"/zh-cn/docs/plugins/security/cors#å…è®¸æ‰€æœ‰è·¨åŸŸè®¿é—®-ä¸å…è®¸è¯·æ±‚æ–¹æºå¸¦å‡­æ®","content":"allow_origins: - '*' allow_methods: - '*' allow_headers: - '*' expose_headers: - '*' allow_credentials: false max_age: 7200  ","version":"Next","tagName":"h3"},{"title":"å…è®¸æ‰€æœ‰è·¨åŸŸè®¿é—®,åŒæ—¶å…è®¸è¯·æ±‚æ–¹æºå¸¦å‡­æ®â€‹","type":1,"pageTitle":"CORS","url":"/zh-cn/docs/plugins/security/cors#å…è®¸æ‰€æœ‰è·¨åŸŸè®¿é—®åŒæ—¶å…è®¸è¯·æ±‚æ–¹æºå¸¦å‡­æ®","content":"allow_origin_patterns: - '*' allow_methods: - '*' allow_headers: - '*' expose_headers: - '*' allow_credentials: true max_age: 7200  ","version":"Next","tagName":"h3"},{"title":"å…è®¸ç‰¹å®šå­åŸŸï¼Œç‰¹å®šæ–¹æ³•ï¼Œç‰¹å®šè¯·æ±‚å¤´è·¨åŸŸè®¿é—®ï¼ŒåŒæ—¶å…è®¸è¯·æ±‚æ–¹æºå¸¦å‡­æ®â€‹","type":1,"pageTitle":"CORS","url":"/zh-cn/docs/plugins/security/cors#å…è®¸ç‰¹å®šå­åŸŸç‰¹å®šæ–¹æ³•ç‰¹å®šè¯·æ±‚å¤´è·¨åŸŸè®¿é—®åŒæ—¶å…è®¸è¯·æ±‚æ–¹æºå¸¦å‡­æ®","content":"allow_origin_patterns: - http://*.example.com - http://*.example.org:[8080,9090] allow_methods: - GET - PUT - POST - DELETE allow_headers: - Token - Content-Type - Authorization expose_headers: - '*' allow_credentials: true max_age: 7200  ","version":"Next","tagName":"h3"},{"title":"æµ‹è¯•â€‹","type":1,"pageTitle":"CORS","url":"/zh-cn/docs/plugins/security/cors#æµ‹è¯•","content":"","version":"Next","tagName":"h2"},{"title":"æµ‹è¯•é…ç½®â€‹","type":1,"pageTitle":"CORS","url":"/zh-cn/docs/plugins/security/cors#æµ‹è¯•é…ç½®","content":"apiVersion: networking.higress.io/v1 kind: McpBridge metadata: name: mcp-cors-httpbin namespace: higress-system spec: registries: - domain: httpbin.org name: httpbin port: 80 type: dns --- apiVersion: networking.k8s.io/v1 kind: Ingress metadata: annotations: higress.io/destination: httpbin.dns higress.io/upstream-vhost: &quot;httpbin.org&quot; higress.io/backend-protocol: HTTP name: ingress-cors-httpbin namespace: higress-system spec: ingressClassName: higress rules: - host: httpbin.example.com http: paths: - backend: resource: apiGroup: networking.higress.io kind: McpBridge name: mcp-cors-httpbin path: / pathType: Prefix --- apiVersion: extensions.higress.io/v1alpha1 kind: WasmPlugin metadata: name: wasm-cors-httpbin namespace: higress-system spec: defaultConfigDisable: true matchRules: - config: allow_origins: - http://httpbin.example.net allow_origin_patterns: - http://*.example.com:[*] - http://*.example.org:[9090,8080] allow_methods: - GET - POST - PATCH allow_headers: - Content-Type - Token - Authorization expose_headers: - X-Custom-Header - X-Env-UTM allow_credentials: true max_age: 3600 configDisable: false ingress: - ingress-cors-httpbin url: oci://higress-registry.cn-hangzhou.cr.aliyuncs.com/plugins/cors:1.0.0 imagePullPolicy: Always  ","version":"Next","tagName":"h3"},{"title":"è¯·æ±‚æµ‹è¯•â€‹","type":1,"pageTitle":"CORS","url":"/zh-cn/docs/plugins/security/cors#è¯·æ±‚æµ‹è¯•","content":"ç®€å•è¯·æ±‚ curl -v -H &quot;Origin: http://httpbin2.example.org:9090&quot; -H &quot;Host: httpbin.example.com&quot; http://127.0.0.1/anything/get\\?foo\\=1 &lt; HTTP/1.1 200 OK &gt; x-cors-version: 1.0.0 &gt; access-control-allow-origin: http://httpbin2.example.org:9090 &gt; access-control-expose-headers: X-Custom-Header,X-Env-UTM &gt; access-control-allow-credentials: true  é¢„æ£€è¯·æ±‚ curl -v -X OPTIONS -H &quot;Origin: http://httpbin2.example.org:9090&quot; -H &quot;Host: httpbin.example.com&quot; -H &quot;Access-Control-Request-Method: POST&quot; -H &quot;Access-Control-Request-Headers: Content-Type, Token&quot; http://127.0.0.1/anything/get\\?foo\\=1 &lt; HTTP/1.1 200 OK &lt; x-cors-version: 1.0.0 &lt; access-control-allow-origin: http://httpbin2.example.org:9090 &lt; access-control-allow-methods: GET,POST,PATCH &lt; access-control-allow-headers: Content-Type,Token,Authorization &lt; access-control-expose-headers: X-Custom-Header,X-Env-UTM &lt; access-control-allow-credentials: true &lt; access-control-max-age: 3600 &lt; date: Tue, 23 May 2023 11:41:28 GMT &lt; server: istio-envoy &lt; content-length: 0 &lt; * Connection #0 to host 127.0.0.1 left intact * Closing connection 0  éæ³• CORS Origin é¢„æ£€è¯·æ±‚ curl -v -X OPTIONS -H &quot;Origin: http://httpbin2.example.org&quot; -H &quot;Host: httpbin.example.com&quot; -H &quot;Access-Control-Request-Method: GET&quot; http://127.0.0.1/anything/get\\?foo\\=1 HTTP/1.1 403 Forbidden &lt; content-length: 70 &lt; content-type: text/plain &lt; x-cors-version: 1.0.0 &lt; date: Tue, 23 May 2023 11:27:01 GMT &lt; server: istio-envoy &lt; * Connection #0 to host 127.0.0.1 left intact Invalid CORS request  éæ³• CORS Method é¢„æ£€è¯·æ±‚ curl -v -X OPTIONS -H &quot;Origin: http://httpbin2.example.org:9090&quot; -H &quot;Host: httpbin.example.com&quot; -H &quot;Access-Control-Request-Method: DELETE&quot; http://127.0.0.1/anything/get\\?foo\\=1 &lt; HTTP/1.1 403 Forbidden &lt; content-length: 49 &lt; content-type: text/plain &lt; x-cors-version: 1.0.0 &lt; date: Tue, 23 May 2023 11:28:51 GMT &lt; server: istio-envoy &lt; * Connection #0 to host 127.0.0.1 left intact Invalid CORS request  éæ³• CORS Header é¢„æ£€è¯·æ±‚  curl -v -X OPTIONS -H &quot;Origin: http://httpbin2.example.org:9090&quot; -H &quot;Host: httpbin.example.com&quot; -H &quot;Access-Control-Request-Method: GET&quot; -H &quot;Access-Control-Request-Headers: TokenView&quot; http://127.0.0.1/anything/get\\?foo\\=1 &lt; HTTP/1.1 403 Forbidden &lt; content-length: 52 &lt; content-type: text/plain &lt; x-cors-version: 1.0.0 &lt; date: Tue, 23 May 2023 11:31:03 GMT &lt; server: istio-envoy &lt; * Connection #0 to host 127.0.0.1 left intact Invalid CORS request  ","version":"Next","tagName":"h3"},{"title":"å‚è€ƒæ–‡æ¡£â€‹","type":1,"pageTitle":"CORS","url":"/zh-cn/docs/plugins/security/cors#å‚è€ƒæ–‡æ¡£","content":"https://www.ruanyifeng.com/blog/2016/04/cors.htmlhttps://fetch.spec.whatwg.org/#http-cors-protocol ","version":"Next","tagName":"h2"},{"title":"åŸºäº Key é™æµ","type":0,"sectionRef":"#","url":"/zh-cn/docs/plugins/traffic/key-rate-limit","content":"","keywords":"higress rate-limit","version":"Next"},{"title":"åŠŸèƒ½è¯´æ˜â€‹","type":1,"pageTitle":"åŸºäº Key é™æµ","url":"/zh-cn/docs/plugins/traffic/key-rate-limit#åŠŸèƒ½è¯´æ˜","content":"key-rate-limit æ’ä»¶å®ç°äº†åŸºäºç‰¹å®šé”®å€¼å®ç°é™æµï¼Œé”®å€¼æ¥æºå¯ä»¥æ˜¯ URL å‚æ•°ã€HTTP è¯·æ±‚å¤´ã€‚ ","version":"Next","tagName":"h2"},{"title":"é…ç½®å­—æ®µâ€‹","type":1,"pageTitle":"åŸºäº Key é™æµ","url":"/zh-cn/docs/plugins/traffic/key-rate-limit#é…ç½®å­—æ®µ","content":"åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°limit_by_header\tstring\té€‰å¡«ï¼Œlimit_by_header,limit_by_param ä¸­é€‰å¡«ä¸€é¡¹\t-\té…ç½®è·å–é™æµé”®å€¼çš„æ¥æº http è¯·æ±‚å¤´åç§° limit_by_param\tstring\té€‰å¡«ï¼Œlimit_by_header,limit_by_param ä¸­é€‰å¡«ä¸€é¡¹\t-\té…ç½®è·å–é™æµé”®å€¼çš„æ¥æº URL å‚æ•°åç§° limit_keys\tarray of object\tå¿…å¡«\t-\té…ç½®åŒ¹é…é”®å€¼åçš„é™æµæ¬¡æ•° limit_keys ä¸­æ¯ä¸€é¡¹çš„é…ç½®å­—æ®µè¯´æ˜ã€‚ åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°key\tstring\tå¿…å¡«\t-\tåŒ¹é…çš„é”®å€¼ query_per_second\tnumber\té€‰å¡«ï¼Œquery_per_second,query_per_minute,query_per_hour,query_per_day ä¸­é€‰å¡«ä¸€é¡¹\t-\tå…è®¸æ¯ç§’è¯·æ±‚æ¬¡æ•° query_per_minute\tnumber\té€‰å¡«ï¼Œquery_per_second,query_per_minute,query_per_hour,query_per_day ä¸­é€‰å¡«ä¸€é¡¹\t-\tå…è®¸æ¯åˆ†é’Ÿè¯·æ±‚æ¬¡æ•° query_per_hour\tnumber\té€‰å¡«ï¼Œquery_per_second,query_per_minute,query_per_hour,query_per_day ä¸­é€‰å¡«ä¸€é¡¹\t-\tå…è®¸æ¯å°æ—¶è¯·æ±‚æ¬¡æ•° query_per_day\tnumber\té€‰å¡«ï¼Œquery_per_second,query_per_minute,query_per_hour,query_per_day ä¸­é€‰å¡«ä¸€é¡¹\t-\tå…è®¸æ¯å¤©è¯·æ±‚æ¬¡æ•° ","version":"Next","tagName":"h2"},{"title":"é…ç½®ç¤ºä¾‹â€‹","type":1,"pageTitle":"åŸºäº Key é™æµ","url":"/zh-cn/docs/plugins/traffic/key-rate-limit#é…ç½®ç¤ºä¾‹","content":"","version":"Next","tagName":"h2"},{"title":"è¯†åˆ«è¯·æ±‚å‚æ•° apikeyï¼Œè¿›è¡ŒåŒºåˆ«é™æµâ€‹","type":1,"pageTitle":"åŸºäº Key é™æµ","url":"/zh-cn/docs/plugins/traffic/key-rate-limit#è¯†åˆ«è¯·æ±‚å‚æ•°-apikeyè¿›è¡ŒåŒºåˆ«é™æµ","content":"limit_by_param: apikey limit_keys: - key: 9a342114-ba8a-11ec-b1bf-00163e1250b5 query_per_second: 10 - key: a6a6d7f2-ba8a-11ec-bec2-00163e1250b5 query_per_minute: 100  ","version":"Next","tagName":"h3"},{"title":"è¯†åˆ«è¯·æ±‚å¤´ x-ca-keyï¼Œè¿›è¡ŒåŒºåˆ«é™æµâ€‹","type":1,"pageTitle":"åŸºäº Key é™æµ","url":"/zh-cn/docs/plugins/traffic/key-rate-limit#è¯†åˆ«è¯·æ±‚å¤´-x-ca-keyè¿›è¡ŒåŒºåˆ«é™æµ","content":"limit_by_header: x-ca-key limit_keys: - key: 102234 query_per_second: 10 - key: 308239 query_per_hour: 10  ","version":"Next","tagName":"h3"},{"title":"è¯·æ±‚å±è”½","type":0,"sectionRef":"#","url":"/zh-cn/docs/plugins/traffic/request-block","content":"","keywords":"higress","version":"Next"},{"title":"åŠŸèƒ½è¯´æ˜â€‹","type":1,"pageTitle":"è¯·æ±‚å±è”½","url":"/zh-cn/docs/plugins/traffic/request-block#åŠŸèƒ½è¯´æ˜","content":"request-block æ’ä»¶å®ç°äº†åŸºäº URLã€è¯·æ±‚å¤´ç­‰ç‰¹å¾å±è”½ HTTP è¯·æ±‚ï¼Œå¯ä»¥ç”¨äºé˜²æŠ¤éƒ¨åˆ†ç«™ç‚¹èµ„æºä¸å¯¹å¤–éƒ¨æš´éœ²ã€‚ ","version":"Next","tagName":"h2"},{"title":"é…ç½®å­—æ®µâ€‹","type":1,"pageTitle":"è¯·æ±‚å±è”½","url":"/zh-cn/docs/plugins/traffic/request-block#é…ç½®å­—æ®µ","content":"åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°block_urls\tarray of string\té€‰å¡«ï¼Œblock_urls,block_headers,block_bodies ä¸­è‡³å°‘å¿…å¡«ä¸€é¡¹\t-\té…ç½®ç”¨äºåŒ¹é…éœ€è¦å±è”½ URL çš„å­—ç¬¦ä¸² block_exact_urls\tarray of string\té€‰å¡«ï¼Œblock_urls,block_headers,block_bodies ä¸­è‡³å°‘å¿…å¡«ä¸€é¡¹\t-\té…ç½®ç”¨äºåŒ¹é…éœ€è¦ç²¾ç¡®å±è”½ URL çš„å­—ç¬¦ä¸² block_regexp_urls\tarray of string\té€‰å¡«ï¼Œblock_urls,block_headers,block_bodies ä¸­è‡³å°‘å¿…å¡«ä¸€é¡¹\t-\té…ç½®ç”¨äºåŒ¹é…éœ€è¦å±è”½ URL çš„æ­£åˆ™è¡¨è¾¾å¼ block_headers\tarray of string\té€‰å¡«ï¼Œblock_urls,block_headers,block_bodies ä¸­è‡³å°‘å¿…å¡«ä¸€é¡¹\t-\té…ç½®ç”¨äºåŒ¹é…éœ€è¦å±è”½è¯·æ±‚ Header çš„å­—ç¬¦ä¸² block_bodies\tarray of string\té€‰å¡«ï¼Œblock_urls,block_headers,block_bodies ä¸­è‡³å°‘å¿…å¡«ä¸€é¡¹\t-\té…ç½®ç”¨äºåŒ¹é…éœ€è¦å±è”½è¯·æ±‚ Body çš„å­—ç¬¦ä¸² blocked_code\tnumber\té€‰å¡«\t403\té…ç½®è¯·æ±‚è¢«å±è”½æ—¶è¿”å›çš„ HTTP çŠ¶æ€ç  blocked_message\tstring\té€‰å¡«\t-\té…ç½®è¯·æ±‚è¢«å±è”½æ—¶è¿”å›çš„ HTTP åº”ç­” Body case_sensitive\tbool\té€‰å¡«\ttrue\té…ç½®åŒ¹é…æ—¶æ˜¯å¦åŒºåˆ†å¤§å°å†™ï¼Œé»˜è®¤åŒºåˆ† ","version":"Next","tagName":"h2"},{"title":"é…ç½®ç¤ºä¾‹â€‹","type":1,"pageTitle":"è¯·æ±‚å±è”½","url":"/zh-cn/docs/plugins/traffic/request-block#é…ç½®ç¤ºä¾‹","content":"","version":"Next","tagName":"h2"},{"title":"å±è”½è¯·æ±‚ URL è·¯å¾„â€‹","type":1,"pageTitle":"è¯·æ±‚å±è”½","url":"/zh-cn/docs/plugins/traffic/request-block#å±è”½è¯·æ±‚-url-è·¯å¾„","content":"block_urls: - swagger.html - foo=bar case_sensitive: false  æ ¹æ®è¯¥é…ç½®ï¼Œä¸‹åˆ—è¯·æ±‚å°†è¢«ç¦æ­¢è®¿é—®ï¼š curl http://example.com?foo=Bar curl http://exmaple.com/Swagger.html  ","version":"Next","tagName":"h3"},{"title":"å±è”½è¯·æ±‚ Headerâ€‹","type":1,"pageTitle":"è¯·æ±‚å±è”½","url":"/zh-cn/docs/plugins/traffic/request-block#å±è”½è¯·æ±‚-header","content":"block_headers: - example-key - example-value  æ ¹æ®è¯¥é…ç½®ï¼Œä¸‹åˆ—è¯·æ±‚å°†è¢«ç¦æ­¢è®¿é—®ï¼š curl http://example.com -H 'example-key: 123' curl http://exmaple.com -H 'my-header: example-value'  ","version":"Next","tagName":"h3"},{"title":"å±è”½è¯·æ±‚ Bodyâ€‹","type":1,"pageTitle":"è¯·æ±‚å±è”½","url":"/zh-cn/docs/plugins/traffic/request-block#å±è”½è¯·æ±‚-body","content":"block_bodies: - &quot;hello world&quot; case_sensitive: false  æ ¹æ®è¯¥é…ç½®ï¼Œä¸‹åˆ—è¯·æ±‚å°†è¢«ç¦æ­¢è®¿é—®ï¼š curl http://example.com -d 'Hello World' curl http://exmaple.com -d 'hello world'  ","version":"Next","tagName":"h3"},{"title":"å¯¹ç‰¹å®šè·¯ç”±æˆ–åŸŸåå¼€å¯â€‹","type":1,"pageTitle":"è¯·æ±‚å±è”½","url":"/zh-cn/docs/plugins/traffic/request-block#å¯¹ç‰¹å®šè·¯ç”±æˆ–åŸŸåå¼€å¯","content":"# ä½¿ç”¨ matchRules å­—æ®µè¿›è¡Œç»†ç²’åº¦è§„åˆ™é…ç½® matchRules: # è§„åˆ™ä¸€ï¼šæŒ‰ Ingress åç§°åŒ¹é…ç”Ÿæ•ˆ - ingress: - default/foo - default/bar block_bodies: - &quot;hello world&quot; # è§„åˆ™äºŒï¼šæŒ‰åŸŸååŒ¹é…ç”Ÿæ•ˆ - domain: - &quot;*.example.com&quot; - test.com block_urls: - &quot;swagger.html&quot; block_bodies: - &quot;hello world&quot;  æ­¤ä¾‹ ingress ä¸­æŒ‡å®šçš„ default/foo å’Œ default/bar å¯¹åº” default å‘½åç©ºé—´ä¸‹åä¸º foo å’Œ bar çš„ Ingressï¼Œå½“åŒ¹é…åˆ°è¿™ä¸¤ä¸ª Ingress æ—¶ï¼Œå°†ä½¿ç”¨æ­¤æ®µé…ç½®ï¼› æ­¤ä¾‹ domain ä¸­æŒ‡å®šçš„ *.example.com å’Œ test.com ç”¨äºåŒ¹é…è¯·æ±‚çš„åŸŸåï¼Œå½“å‘ç°åŸŸååŒ¹é…æ—¶ï¼Œå°†ä½¿ç”¨æ­¤æ®µé…ç½®ï¼› é…ç½®çš„åŒ¹é…ç”Ÿæ•ˆé¡ºåºï¼Œå°†æŒ‰ç…§ matchRules ä¸‹è§„åˆ™çš„æ’åˆ—é¡ºåºï¼ŒåŒ¹é…ç¬¬ä¸€ä¸ªè§„åˆ™åç”Ÿæ•ˆå¯¹åº”é…ç½®ï¼Œåç»­è§„åˆ™å°†è¢«å¿½ç•¥ã€‚ ","version":"Next","tagName":"h3"},{"title":"è¯·æ±‚ Body å¤§å°é™åˆ¶â€‹","type":1,"pageTitle":"è¯·æ±‚å±è”½","url":"/zh-cn/docs/plugins/traffic/request-block#è¯·æ±‚-body-å¤§å°é™åˆ¶","content":"å½“é…ç½®äº† block_bodies æ—¶ï¼Œä»…æ”¯æŒå°äº 32 MB çš„è¯·æ±‚ Body è¿›è¡ŒåŒ¹é…ã€‚è‹¥è¯·æ±‚ Body å¤§äºæ­¤é™åˆ¶ï¼Œå¹¶ä¸”ä¸å­˜åœ¨åŒ¹é…åˆ°çš„ block_urls å’Œ block_headers é¡¹æ—¶ï¼Œä¸ä¼šå¯¹è¯¥è¯·æ±‚æ‰§è¡Œå±è”½æ“ä½œã€‚ å½“é…ç½®äº† block_bodies æ—¶ï¼Œè‹¥è¯·æ±‚ Body è¶…è¿‡å…¨å±€é…ç½® DownstreamConnectionBufferLimitsï¼Œå°†è¿”å› 413 Payload Too Largeã€‚ ","version":"Next","tagName":"h2"},{"title":"ç¼“å­˜æ§åˆ¶","type":0,"sectionRef":"#","url":"/zh-cn/docs/plugins/transformation/cache-control","content":"","keywords":"higress transformer","version":"Next"},{"title":"åŠŸèƒ½è¯´æ˜â€‹","type":1,"pageTitle":"ç¼“å­˜æ§åˆ¶","url":"/zh-cn/docs/plugins/transformation/cache-control#åŠŸèƒ½è¯´æ˜","content":"cache-control æ’ä»¶å®ç°äº†åŸºäº URL æ–‡ä»¶åç¼€æ¥ä¸ºè¯·æ±‚çš„å“åº”å¤´éƒ¨æ·»åŠ  Expires å’Œ Cache-Control å¤´éƒ¨ï¼Œä»è€Œæ–¹ä¾¿æµè§ˆå™¨å¯¹ç‰¹å®šåç¼€çš„æ–‡ä»¶è¿›è¡Œç¼“å­˜ï¼Œä¾‹å¦‚ jpgã€png ç­‰å›¾ç‰‡æ–‡ä»¶ã€‚ ","version":"Next","tagName":"h2"},{"title":"é…ç½®å­—æ®µâ€‹","type":1,"pageTitle":"ç¼“å­˜æ§åˆ¶","url":"/zh-cn/docs/plugins/transformation/cache-control#é…ç½®å­—æ®µ","content":"åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°suffix\tstring\té€‰å¡«ï¼Œè¡¨ç¤ºåŒ¹é…çš„æ–‡ä»¶åç¼€åï¼Œä¾‹å¦‚ jpgã€png ç­‰ã€‚ å¦‚æœéœ€è¦åŒ¹é…å¤šç§åç¼€ï¼Œéœ€è¦ç”¨ \\| è¿›è¡Œåˆ†å‰²ï¼Œä¾‹å¦‚ png\\|jpgã€‚ å¦‚æœä¸å¡«å†™ï¼Œè¡¨ç¤ºåŒ¹é…æ‰€æœ‰åç¼€\t-\té…ç½®ç”¨äºåŒ¹é…çš„è¯·æ±‚æ–‡ä»¶åç¼€ expires\tstring\tå¿…å¡«ï¼Œè¡¨ç¤ºç¼“å­˜çš„æœ€é•¿æ—¶é—´ã€‚ å½“å¡«å…¥çš„å­—ç¬¦ä¸²ä¸ºæ•°å­—æ—¶ï¼Œå•ä½ä¸ºç§’ï¼Œä¾‹å¦‚éœ€è¦ç¼“å­˜ 1 å°æ—¶ï¼Œéœ€å¡«å†™ 3600ã€‚ å¦å¤–ï¼Œè¿˜å¯ä»¥å¡«å†™ epoch æˆ– max ï¼Œä¸ nginx ä¸­è¯­ä¹‰ç›¸åŒã€‚\t-\té…ç½®ç¼“å­˜çš„æœ€å¤§æ—¶é—´ ","version":"Next","tagName":"h2"},{"title":"é…ç½®ç¤ºä¾‹â€‹","type":1,"pageTitle":"ç¼“å­˜æ§åˆ¶","url":"/zh-cn/docs/plugins/transformation/cache-control#é…ç½®ç¤ºä¾‹","content":"ç¼“å­˜åç¼€ä¸º jpg, png, jpeg çš„æ–‡ä»¶ï¼Œç¼“å­˜æ—¶é—´ä¸ºä¸€å°æ—¶ã€‚ suffix: jpg|png|jpeg expires: 3600  æ ¹æ®è¯¥é…ç½®ï¼Œä¸‹åˆ—è¯·æ±‚åœ¨è®¿é—®æ—¶ï¼Œå°†ä¼šåœ¨å“åº”å¤´ä¸­æ·»åŠ  Expires å’Œ Cache-Control å­—æ®µï¼Œä¸”è¿‡æœŸæ—¶é—´ä¸º 1 å°æ—¶åã€‚ curl http://example.com/test.png curl http://exmaple.com/test.jpg  ç¼“å­˜æ‰€æœ‰æ–‡ä»¶ï¼Œä¸”ç¼“å­˜è‡³æœ€å¤§æ—¶é—´ â€œThu, 31 Dec 2037 23:55:55 GMTâ€ expires: max  ","version":"Next","tagName":"h2"},{"title":"è¯·æ±‚æ ¡éªŒ","type":0,"sectionRef":"#","url":"/zh-cn/docs/plugins/traffic/request-validation","content":"","keywords":"higress","version":"Next"},{"title":"åŠŸèƒ½è¯´æ˜â€‹","type":1,"pageTitle":"è¯·æ±‚æ ¡éªŒ","url":"/zh-cn/docs/plugins/traffic/request-validation#åŠŸèƒ½è¯´æ˜","content":"request-validation æ’ä»¶ç”¨äºæå‰éªŒè¯å‘ä¸Šæ¸¸æœåŠ¡è½¬å‘çš„è¯·æ±‚ã€‚è¯¥æ’ä»¶ä½¿ç”¨ JSON Schema æœºåˆ¶è¿›è¡Œæ•°æ®éªŒè¯ï¼Œå¯ä»¥éªŒè¯è¯·æ±‚çš„ Body ä»¥åŠ Header çš„æ•°æ®ã€‚ ","version":"Next","tagName":"h2"},{"title":"é…ç½®å­—æ®µâ€‹","type":1,"pageTitle":"è¯·æ±‚æ ¡éªŒ","url":"/zh-cn/docs/plugins/traffic/request-validation#é…ç½®å­—æ®µ","content":"åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°header_schema\tobject\té€‰å¡«\t-\té…ç½®ç”¨äºéªŒè¯è¯·æ±‚ Header çš„JSON Schema body_schema\tobject\té€‰å¡«\t-\té…ç½®ç”¨äºéªŒè¯è¯·æ±‚ Body çš„ JSON Schema rejected_code\tnumber\té€‰å¡«\t403\té…ç½®è¯·æ±‚è¢«æ‹’ç»æ—¶è¿”å›çš„ HTTP çŠ¶æ€ç  rejected_msg\tstring\té€‰å¡«\t-\té…ç½®è¯·æ±‚è¢«æ‹’ç»æ—¶è¿”å›çš„ HTTP åº”ç­” Body enable_swagger\tbool\té€‰å¡«\tfalse\té…ç½®æ˜¯å¦å¼€å¯ Swagger æ–‡æ¡£éªŒè¯ enable_oas3\tbool\té€‰å¡«\tfalse\té…ç½®æ˜¯å¦å¼€å¯ OAS3 æ–‡æ¡£éªŒè¯ æ ¡éªŒè§„åˆ™å¯¹ Header å’Œ Body æ˜¯ä¸€æ ·çš„ï¼Œä¸‹é¢ä»¥ Body ä¸ºä¾‹è¯´æ˜ã€‚ ","version":"Next","tagName":"h2"},{"title":"é…ç½®ç¤ºä¾‹â€‹","type":1,"pageTitle":"è¯·æ±‚æ ¡éªŒ","url":"/zh-cn/docs/plugins/traffic/request-validation#é…ç½®ç¤ºä¾‹","content":"","version":"Next","tagName":"h2"},{"title":"æšä¸¾ï¼ˆEnumï¼‰éªŒè¯â€‹","type":1,"pageTitle":"è¯·æ±‚æ ¡éªŒ","url":"/zh-cn/docs/plugins/traffic/request-validation#æšä¸¾enuméªŒè¯","content":"body_schema: type: object required: - enum_payload properties: enum_payload: type: string enum: - &quot;enum_string_1&quot; - &quot;enum_string_2&quot; default: &quot;enum_string_1&quot;  ","version":"Next","tagName":"h3"},{"title":"å¸ƒå°”ï¼ˆBooleanï¼‰éªŒè¯â€‹","type":1,"pageTitle":"è¯·æ±‚æ ¡éªŒ","url":"/zh-cn/docs/plugins/traffic/request-validation#å¸ƒå°”booleanéªŒè¯","content":"body_schema: type: object required: - boolean_payload properties: boolean_payload: type: boolean default: true  ","version":"Next","tagName":"h3"},{"title":"æ•°å­—èŒƒå›´ï¼ˆNumber or Integerï¼‰éªŒè¯â€‹","type":1,"pageTitle":"è¯·æ±‚æ ¡éªŒ","url":"/zh-cn/docs/plugins/traffic/request-validation#æ•°å­—èŒƒå›´number-or-integeréªŒè¯","content":"body_schema: type: object required: - integer_payload properties: integer_payload: type: integer minimum: 1 maximum: 10  ","version":"Next","tagName":"h3"},{"title":"å­—ç¬¦ä¸²é•¿åº¦ï¼ˆStringï¼‰éªŒè¯â€‹","type":1,"pageTitle":"è¯·æ±‚æ ¡éªŒ","url":"/zh-cn/docs/plugins/traffic/request-validation#å­—ç¬¦ä¸²é•¿åº¦stringéªŒè¯","content":"body_schema: type: object required: - string_payload properties: string_payload: type: string minLength: 1 maxLength: 10  ","version":"Next","tagName":"h3"},{"title":"æ­£åˆ™è¡¨è¾¾å¼ï¼ˆRegexï¼‰éªŒè¯â€‹","type":1,"pageTitle":"è¯·æ±‚æ ¡éªŒ","url":"/zh-cn/docs/plugins/traffic/request-validation#æ­£åˆ™è¡¨è¾¾å¼regexéªŒè¯","content":"body_schema: type: object required: - regex_payload properties: regex_payload: type: string minLength: 1 maxLength: 10 pattern: &quot;^[a-zA-Z0-9_]+$&quot;  ","version":"Next","tagName":"h3"},{"title":"æ•°ç»„ï¼ˆArrayï¼‰éªŒè¯â€‹","type":1,"pageTitle":"è¯·æ±‚æ ¡éªŒ","url":"/zh-cn/docs/plugins/traffic/request-validation#æ•°ç»„arrayéªŒè¯","content":"body_schema: type: object required: - array_payload properties: array_payload: type: array minItems: 1 items: type: integer minimum: 1 maximum: 10 uniqueItems: true default: [1, 2, 3]  ","version":"Next","tagName":"h3"},{"title":"å¤šå­—æ®µç»„åˆï¼ˆCombinedï¼‰éªŒè¯â€‹","type":1,"pageTitle":"è¯·æ±‚æ ¡éªŒ","url":"/zh-cn/docs/plugins/traffic/request-validation#å¤šå­—æ®µç»„åˆcombinedéªŒè¯","content":"body_schema: type: object required: - boolean_payload - array_payload - regex_payload properties: boolean_payload: type: boolean array_payload: type: array minItems: 1 items: type: integer minimum: 1 maximum: 10 uniqueItems: true default: [1, 2, 3] regex_payload: type: string minLength: 1 maxLength: 10 pattern: &quot;^[a-zA-Z0-9_]+$&quot;  ","version":"Next","tagName":"h3"},{"title":"è‡ªå®šä¹‰æ‹’ç»ä¿¡æ¯â€‹","type":1,"pageTitle":"è¯·æ±‚æ ¡éªŒ","url":"/zh-cn/docs/plugins/traffic/request-validation#è‡ªå®šä¹‰æ‹’ç»ä¿¡æ¯","content":"body_schema: type: object required: - boolean_payload properties: boolean_payload: type: boolean rejected_code: 403 rejected_msg: &quot;è¯·æ±‚è¢«æ‹’ç»&quot;  ","version":"Next","tagName":"h3"},{"title":"è‡ªå®šä¹‰åº”ç­”","type":0,"sectionRef":"#","url":"/zh-cn/docs/plugins/transformation/custom-response","content":"","keywords":"higress transformer","version":"Next"},{"title":"åŠŸèƒ½è¯´æ˜â€‹","type":1,"pageTitle":"è‡ªå®šä¹‰åº”ç­”","url":"/zh-cn/docs/plugins/transformation/custom-response#åŠŸèƒ½è¯´æ˜","content":"custom-response æ’ä»¶æ”¯æŒé…ç½®è‡ªå®šä¹‰çš„å“åº”ï¼ŒåŒ…æ‹¬è‡ªå®šä¹‰ HTTP åº”ç­”çŠ¶æ€ç ã€HTTP åº”ç­”å¤´ï¼Œä»¥åŠ HTTP åº”ç­” Bodyã€‚å¯ä»¥ç”¨äº Mock å“åº”ï¼Œä¹Ÿå¯ä»¥ç”¨äºåˆ¤æ–­ç‰¹å®šçŠ¶æ€ç åç»™å‡ºè‡ªå®šä¹‰åº”ç­”ï¼Œä¾‹å¦‚åœ¨è§¦å‘ç½‘å…³é™æµç­–ç•¥æ—¶å®ç°è‡ªå®šä¹‰å“åº”ã€‚ ","version":"Next","tagName":"h2"},{"title":"é…ç½®å­—æ®µâ€‹","type":1,"pageTitle":"è‡ªå®šä¹‰åº”ç­”","url":"/zh-cn/docs/plugins/transformation/custom-response#é…ç½®å­—æ®µ","content":"åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°status_code\tnumber\té€‰å¡«\t200\tè‡ªå®šä¹‰ HTTP åº”ç­”çŠ¶æ€ç  headers\tarray of string\té€‰å¡«\t-\tè‡ªå®šä¹‰ HTTP åº”ç­”å¤´ï¼Œkey å’Œ value ç”¨=åˆ†éš” body\tstring\té€‰å¡«\t-\tè‡ªå®šä¹‰ HTTP åº”ç­” Body enable_on_status\tarray of number\té€‰å¡«\t-\tåŒ¹é…åŸå§‹çŠ¶æ€ç ï¼Œç”Ÿæˆè‡ªå®šä¹‰å“åº”ï¼Œä¸å¡«å†™æ—¶ï¼Œä¸åˆ¤æ–­åŸå§‹çŠ¶æ€ç  ","version":"Next","tagName":"h2"},{"title":"é…ç½®ç¤ºä¾‹â€‹","type":1,"pageTitle":"è‡ªå®šä¹‰åº”ç­”","url":"/zh-cn/docs/plugins/transformation/custom-response#é…ç½®ç¤ºä¾‹","content":"","version":"Next","tagName":"h2"},{"title":"Mock åº”ç­”åœºæ™¯â€‹","type":1,"pageTitle":"è‡ªå®šä¹‰åº”ç­”","url":"/zh-cn/docs/plugins/transformation/custom-response#mock-åº”ç­”åœºæ™¯","content":"status_code: 200 headers: - Content-Type=application/json - Hello=World body: &quot;{\\&quot;hello\\&quot;:\\&quot;world\\&quot;}&quot;  æ ¹æ®è¯¥é…ç½®ï¼Œè¯·æ±‚å°†è¿”å›è‡ªå®šä¹‰åº”ç­”å¦‚ä¸‹ï¼š HTTP/1.1 200 OK Content-Type: application/json Hello: World Content-Length: 17 {&quot;hello&quot;:&quot;world&quot;}  ","version":"Next","tagName":"h3"},{"title":"è§¦å‘é™æµæ—¶è‡ªå®šä¹‰å“åº”â€‹","type":1,"pageTitle":"è‡ªå®šä¹‰åº”ç­”","url":"/zh-cn/docs/plugins/transformation/custom-response#è§¦å‘é™æµæ—¶è‡ªå®šä¹‰å“åº”","content":"enable_on_status: - 429 status_code: 302 headers: - Location=https://example.com  è§¦å‘ç½‘å…³é™æµæ—¶ä¸€èˆ¬ä¼šè¿”å› 429 çŠ¶æ€ç ï¼Œè¿™æ—¶è¯·æ±‚å°†è¿”å›è‡ªå®šä¹‰åº”ç­”å¦‚ä¸‹ï¼š HTTP/1.1 302 Found Location: https://example.com  ä»è€Œå®ç°åŸºäºæµè§ˆå™¨ 302 é‡å®šå‘æœºåˆ¶ï¼Œå°†é™æµåçš„ç”¨æˆ·å¼•å¯¼åˆ°å…¶ä»–é¡µé¢ï¼Œæ¯”å¦‚å¯ä»¥æ˜¯ä¸€ä¸ª CDN ä¸Šçš„é™æ€é¡µé¢ã€‚ å¦‚æœå¸Œæœ›è§¦å‘é™æµæ—¶ï¼Œæ­£å¸¸è¿”å›å…¶ä»–åº”ç­”ï¼Œå‚è€ƒ Mock åº”ç­”åœºæ™¯é…ç½®ç›¸åº”çš„å­—æ®µå³å¯ã€‚ ","version":"Next","tagName":"h3"},{"title":"å¯¹ç‰¹å®šè·¯ç”±æˆ–åŸŸåå¼€å¯â€‹","type":1,"pageTitle":"è‡ªå®šä¹‰åº”ç­”","url":"/zh-cn/docs/plugins/transformation/custom-response#å¯¹ç‰¹å®šè·¯ç”±æˆ–åŸŸåå¼€å¯","content":"# ä½¿ç”¨ matchRules å­—æ®µè¿›è¡Œç»†ç²’åº¦è§„åˆ™é…ç½® matchRules: # è§„åˆ™ä¸€ï¼šæŒ‰ Ingress åç§°åŒ¹é…ç”Ÿæ•ˆ - ingress: - default/foo - default/bar body: &quot;{\\&quot;hello\\&quot;:\\&quot;world\\&quot;}&quot; # è§„åˆ™äºŒï¼šæŒ‰åŸŸååŒ¹é…ç”Ÿæ•ˆ - domain: - &quot;*.example.com&quot; - test.com enable_on_status: - 429 status_code: 200 headers: - Content-Type=application/json body: &quot;{\\&quot;errmsg\\&quot;: \\&quot;rate limited\\&quot;}&quot;  æ­¤ä¾‹ ingress ä¸­æŒ‡å®šçš„ default/foo å’Œ default/bar å¯¹åº” default å‘½åç©ºé—´ä¸‹åä¸º foo å’Œ bar çš„ Ingressï¼Œå½“åŒ¹é…åˆ°è¿™ä¸¤ä¸ª Ingress æ—¶ï¼Œå°†ä½¿ç”¨æ­¤æ®µé…ç½®ï¼› æ­¤ä¾‹ domain ä¸­æŒ‡å®šçš„ *.example.com å’Œ test.com ç”¨äºåŒ¹é…è¯·æ±‚çš„åŸŸåï¼Œå½“å‘ç°åŸŸååŒ¹é…æ—¶ï¼Œå°†ä½¿ç”¨æ­¤æ®µé…ç½®ï¼› é…ç½®çš„åŒ¹é…ç”Ÿæ•ˆé¡ºåºï¼Œå°†æŒ‰ç…§ matchRules ä¸‹è§„åˆ™çš„æ’åˆ—é¡ºåºï¼ŒåŒ¹é…ç¬¬ä¸€ä¸ªè§„åˆ™åç”Ÿæ•ˆå¯¹åº”é…ç½®ï¼Œåç»­è§„åˆ™å°†è¢«å¿½ç•¥ã€‚ ","version":"Next","tagName":"h3"},{"title":"åŸºäº Key é›†ç¾¤é™æµ","type":0,"sectionRef":"#","url":"/zh-cn/docs/plugins/traffic/cluster-key-rate-limit","content":"","keywords":"higress rate-limit","version":"Next"},{"title":"åŠŸèƒ½è¯´æ˜â€‹","type":1,"pageTitle":"åŸºäº Key é›†ç¾¤é™æµ","url":"/zh-cn/docs/plugins/traffic/cluster-key-rate-limit#åŠŸèƒ½è¯´æ˜","content":"key-cluster-rate-limit æ’ä»¶å®ç°äº†åŸºäºç‰¹å®š Key å®ç°é›†ç¾¤é™æµï¼Œé”®å€¼æ¥æºå¯ä»¥æ˜¯ URL å‚æ•°ã€HTTP è¯·æ±‚å¤´ã€å®¢æˆ·ç«¯ IP åœ°å€ã€consumer åç§°ã€Cookie ä¸­ Key åç§°ã€‚ ","version":"Next","tagName":"h2"},{"title":"é…ç½®è¯´æ˜â€‹","type":1,"pageTitle":"åŸºäº Key é›†ç¾¤é™æµ","url":"/zh-cn/docs/plugins/traffic/cluster-key-rate-limit#é…ç½®è¯´æ˜","content":"é…ç½®é¡¹\tç±»å‹\tå¿…å¡«\té»˜è®¤å€¼\tè¯´æ˜rule_name\tstring\tæ˜¯\t-\té™æµè§„åˆ™åç§°ï¼Œæ ¹æ®é™æµè§„åˆ™åç§° + é™æµç±»å‹ + é™æµ key åç§° + é™æµ key å¯¹åº”çš„å®é™…å€¼æ¥æ‹¼è£… redis key rule_items\tarray of object\tæ˜¯\t-\té™æµè§„åˆ™é¡¹ï¼ŒæŒ‰ç…§ rule_items ä¸‹çš„æ’åˆ—é¡ºåºï¼ŒåŒ¹é…ç¬¬ä¸€ä¸ª rule_item åå‘½ä¸­é™æµè§„åˆ™ï¼Œåç»­è§„åˆ™å°†è¢«å¿½ç•¥ show_limit_quota_header\tbool\tå¦\tfalse\tå“åº”å¤´ä¸­æ˜¯å¦æ˜¾ç¤º X-RateLimit-Limitï¼ˆé™åˆ¶çš„æ€»è¯·æ±‚æ•°ï¼‰å’Œ X-RateLimit-Remainingï¼ˆå‰©ä½™è¿˜å¯ä»¥å‘é€çš„è¯·æ±‚æ•°ï¼‰ rejected_code\tint\tå¦\t429\tè¯·æ±‚è¢«é™æµæ—¶ï¼Œè¿”å›çš„ HTTP çŠ¶æ€ç  rejected_msg\tstring\tå¦\tToo many requests\tè¯·æ±‚è¢«é™æµæ—¶ï¼Œè¿”å›çš„å“åº”ä½“ redis\tobject\tæ˜¯\t-\tredis ç›¸å…³é…ç½® rule_items ä¸­æ¯ä¸€é¡¹çš„é…ç½®å­—æ®µè¯´æ˜ã€‚ é…ç½®é¡¹\tç±»å‹\tå¿…å¡«\té»˜è®¤å€¼\tè¯´æ˜limit_by_header\tstring\tå¦ï¼Œlimit_by_* ä¸­é€‰å¡«ä¸€é¡¹\t-\té…ç½®è·å–é™æµé”®å€¼çš„æ¥æº HTTP è¯·æ±‚å¤´åç§° limit_by_param\tstring\tå¦ï¼Œlimit_by_* ä¸­é€‰å¡«ä¸€é¡¹\t-\té…ç½®è·å–é™æµé”®å€¼çš„æ¥æº URL å‚æ•°åç§° limit_by_consumer\tstring\tå¦ï¼Œlimit_by_* ä¸­é€‰å¡«ä¸€é¡¹\t-\tæ ¹æ® consumer åç§°è¿›è¡Œé™æµï¼Œæ— éœ€æ·»åŠ å®é™…å€¼ limit_by_cookie\tstring\tå¦ï¼Œlimit_by_* ä¸­é€‰å¡«ä¸€é¡¹\t-\té…ç½®è·å–é™æµé”®å€¼çš„æ¥æº Cookieä¸­ key åç§° limit_by_per_header\tstring\tå¦ï¼Œlimit_by_* ä¸­é€‰å¡«ä¸€é¡¹\t-\tæŒ‰è§„åˆ™åŒ¹é…ç‰¹å®š HTTP è¯·æ±‚å¤´ï¼Œå¹¶å¯¹æ¯ä¸ªè¯·æ±‚å¤´åˆ†åˆ«è®¡ç®—é™æµï¼Œé…ç½®è·å–é™æµé”®å€¼çš„æ¥æº HTTP è¯·æ±‚å¤´åç§°ï¼Œé…ç½® limit_keys æ—¶æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼æˆ– * limit_by_per_param\tstring\tå¦ï¼Œlimit_by_* ä¸­é€‰å¡«ä¸€é¡¹\t-\tæŒ‰è§„åˆ™åŒ¹é…ç‰¹å®š URL å‚æ•°ï¼Œå¹¶å¯¹æ¯ä¸ªå‚æ•°åˆ†åˆ«è®¡ç®—é™æµï¼Œé…ç½®è·å–é™æµé”®å€¼çš„æ¥æº URL å‚æ•°åç§°ï¼Œé…ç½® limit_keys æ—¶æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼æˆ– * limit_by_per_consumer\tstring\tå¦ï¼Œlimit_by_* ä¸­é€‰å¡«ä¸€é¡¹\t-\tæŒ‰è§„åˆ™åŒ¹é…ç‰¹å®š consumerï¼Œå¹¶å¯¹æ¯ä¸ª consumer åˆ†åˆ«è®¡ç®—é™æµï¼Œæ ¹æ® consumer åç§°è¿›è¡Œé™æµï¼Œæ— éœ€æ·»åŠ å®é™…å€¼ï¼Œé…ç½® limit_keys æ—¶æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼æˆ– * limit_by_per_cookie\tstring\tå¦ï¼Œlimit_by_* ä¸­é€‰å¡«ä¸€é¡¹\t-\tæŒ‰è§„åˆ™åŒ¹é…ç‰¹å®š Cookieï¼Œå¹¶å¯¹æ¯ä¸ª Cookie åˆ†åˆ«è®¡ç®—é™æµï¼Œé…ç½®è·å–é™æµé”®å€¼çš„æ¥æº Cookieä¸­ key åç§°ï¼Œé…ç½® limit_keys æ—¶æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼æˆ– * limit_by_per_ip\tstring\tå¦ï¼Œlimit_by_* ä¸­é€‰å¡«ä¸€é¡¹\t-\tæŒ‰è§„åˆ™åŒ¹é…ç‰¹å®š IPï¼Œå¹¶å¯¹æ¯ä¸ª IP åˆ†åˆ«è®¡ç®—é™æµï¼Œé…ç½®è·å–é™æµé”®å€¼çš„æ¥æº IP å‚æ•°åç§°ï¼Œä»è¯·æ±‚å¤´è·å–ï¼Œä»¥ from-header-å¯¹åº”çš„headeråï¼Œç¤ºä¾‹ï¼šfrom-header-x-forwarded-forï¼Œç›´æ¥è·å–å¯¹ç«¯ socket ipï¼Œé…ç½®ä¸º from-remote-addr limit_keys\tarray of object\tæ˜¯\t-\té…ç½®åŒ¹é…é”®å€¼åçš„é™æµæ¬¡æ•° limit_keys ä¸­æ¯ä¸€é¡¹çš„é…ç½®å­—æ®µè¯´æ˜ã€‚ é…ç½®é¡¹\tç±»å‹\tå¿…å¡«\té»˜è®¤å€¼\tè¯´æ˜key\tstring\tæ˜¯\t-\tåŒ¹é…çš„é”®å€¼ï¼Œlimit_by_per_header,limit_by_per_param,limit_by_per_consumer,limit_by_per_cookie ç±»å‹æ”¯æŒé…ç½®æ­£åˆ™è¡¨è¾¾å¼ï¼ˆä»¥regexp:å¼€å¤´åé¢è·Ÿæ­£åˆ™è¡¨è¾¾å¼ï¼‰æˆ–è€…ï¼ˆä»£è¡¨æ‰€æœ‰ï¼‰ï¼Œæ­£åˆ™è¡¨è¾¾å¼ç¤ºä¾‹ï¼š`regexp:^d.ï¼ˆä»¥då¼€å¤´çš„æ‰€æœ‰å­—ç¬¦ä¸²ï¼‰ï¼›limit_by_per_ip`æ”¯æŒé…ç½® IP åœ°å€æˆ– IP æ®µ query_per_second\tint\tå¦ï¼Œquery_per_second,query_per_minute,query_per_hour,query_per_day ä¸­é€‰å¡«ä¸€é¡¹\t-\tå…è®¸æ¯ç§’è¯·æ±‚æ¬¡æ•° query_per_minute\tint\tå¦ï¼Œquery_per_second,query_per_minute,query_per_hour,query_per_day ä¸­é€‰å¡«ä¸€é¡¹\t-\tå…è®¸æ¯åˆ†é’Ÿè¯·æ±‚æ¬¡æ•° query_per_hour\tint\tå¦ï¼Œquery_per_second,query_per_minute,query_per_hour,query_per_day ä¸­é€‰å¡«ä¸€é¡¹\t-\tå…è®¸æ¯å°æ—¶è¯·æ±‚æ¬¡æ•° query_per_day\tint\tå¦ï¼Œquery_per_second,query_per_minute,query_per_hour,query_per_day ä¸­é€‰å¡«ä¸€é¡¹\t-\tå…è®¸æ¯å¤©è¯·æ±‚æ¬¡æ•° redis ä¸­æ¯ä¸€é¡¹çš„é…ç½®å­—æ®µè¯´æ˜ã€‚ é…ç½®é¡¹\tç±»å‹\tå¿…å¡«\té»˜è®¤å€¼\tè¯´æ˜service_name\tstring\tå¿…å¡«\t-\tredis æœåŠ¡åç§°ï¼Œå¸¦æœåŠ¡ç±»å‹çš„å®Œæ•´ FQDN åç§°ï¼Œä¾‹å¦‚ my-redis.dnsã€redis.my-ns.svc.cluster.local service_port\tint\tå¦\tæœåŠ¡ç±»å‹ä¸ºå›ºå®šåœ°å€ï¼ˆstatic serviceï¼‰é»˜è®¤å€¼ä¸º80ï¼Œå…¶ä»–ä¸º6379\tè¾“å…¥redisæœåŠ¡çš„æœåŠ¡ç«¯å£ username\tstring\tå¦\t-\tredis ç”¨æˆ·å password\tstring\tå¦\t-\tredis å¯†ç  timeout\tint\tå¦\t1000\tredis è¿æ¥è¶…æ—¶æ—¶é—´ï¼Œå•ä½æ¯«ç§’ ","version":"Next","tagName":"h2"},{"title":"é…ç½®ç¤ºä¾‹â€‹","type":1,"pageTitle":"åŸºäº Key é›†ç¾¤é™æµ","url":"/zh-cn/docs/plugins/traffic/cluster-key-rate-limit#é…ç½®ç¤ºä¾‹","content":"","version":"Next","tagName":"h2"},{"title":"è¯†åˆ«è¯·æ±‚å‚æ•° apikeyï¼Œè¿›è¡ŒåŒºåˆ«é™æµâ€‹","type":1,"pageTitle":"åŸºäº Key é›†ç¾¤é™æµ","url":"/zh-cn/docs/plugins/traffic/cluster-key-rate-limit#è¯†åˆ«è¯·æ±‚å‚æ•°-apikeyè¿›è¡ŒåŒºåˆ«é™æµ","content":"rule_name: default_rule rule_items: - limit_by_param: apikey limit_keys: - key: 9a342114-ba8a-11ec-b1bf-00163e1250b5 query_per_minute: 10 - key: a6a6d7f2-ba8a-11ec-bec2-00163e1250b5 query_per_hour: 100 - limit_by_per_param: apikey limit_keys: # æ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…ä»¥ a å¼€å¤´çš„æ‰€æœ‰å­—ç¬¦ä¸²ï¼Œæ¯ä¸ª apikey å¯¹åº”çš„è¯·æ±‚ 10qds - key: &quot;regexp:^a.*&quot; query_per_second: 10 # æ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…ä»¥ b å¼€å¤´çš„æ‰€æœ‰å­—ç¬¦ä¸²ï¼Œæ¯ä¸ª apikey å¯¹åº”çš„è¯·æ±‚ 100qd - key: &quot;regexp:^b.*&quot; query_per_minute: 100 # å…œåº•ç”¨ï¼ŒåŒ¹é…æ‰€æœ‰è¯·æ±‚ï¼Œæ¯ä¸ª apikey å¯¹åº”çš„è¯·æ±‚ 1000qdh - key: &quot;*&quot; query_per_hour: 1000 redis: service_name: redis.static show_limit_quota_header: true  ","version":"Next","tagName":"h3"},{"title":"è¯†åˆ«è¯·æ±‚å¤´ x-ca-keyï¼Œè¿›è¡ŒåŒºåˆ«é™æµâ€‹","type":1,"pageTitle":"åŸºäº Key é›†ç¾¤é™æµ","url":"/zh-cn/docs/plugins/traffic/cluster-key-rate-limit#è¯†åˆ«è¯·æ±‚å¤´-x-ca-keyè¿›è¡ŒåŒºåˆ«é™æµ","content":"rule_name: default_rule rule_items: - limit_by_header: x-ca-key limit_keys: - key: 102234 query_per_minute: 10 - key: 308239 query_per_hour: 10 - limit_by_per_header: x-ca-key limit_keys: # æ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…ä»¥ a å¼€å¤´çš„æ‰€æœ‰å­—ç¬¦ä¸²ï¼Œæ¯ä¸ª apikey å¯¹åº”çš„è¯·æ±‚ 10qds - key: &quot;regexp:^a.*&quot; query_per_second: 10 # æ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…ä»¥bå¼€å¤´çš„æ‰€æœ‰å­—ç¬¦ä¸²ï¼Œæ¯ä¸ª apikey å¯¹åº”çš„è¯·æ±‚ 100qd - key: &quot;regexp:^b.*&quot; query_per_minute: 100 # å…œåº•ç”¨ï¼ŒåŒ¹é…æ‰€æœ‰è¯·æ±‚ï¼Œæ¯ä¸ª apikey å¯¹åº”çš„è¯·æ±‚ 1000qdh - key: &quot;*&quot; query_per_hour: 1000 redis: service_name: redis.static show_limit_quota_header: true  ","version":"Next","tagName":"h3"},{"title":"æ ¹æ®è¯·æ±‚å¤´ x-forwarded-for è·å–å¯¹ç«¯ IPï¼Œè¿›è¡ŒåŒºåˆ«é™æµâ€‹","type":1,"pageTitle":"åŸºäº Key é›†ç¾¤é™æµ","url":"/zh-cn/docs/plugins/traffic/cluster-key-rate-limit#æ ¹æ®è¯·æ±‚å¤´-x-forwarded-for-è·å–å¯¹ç«¯-ipè¿›è¡ŒåŒºåˆ«é™æµ","content":"rule_name: default_rule rule_items: - limit_by_per_ip: from-header-x-forwarded-for limit_keys: # ç²¾ç¡® IP - key: 1.1.1.1 query_per_day: 10 # IP æ®µï¼Œç¬¦åˆè¿™ä¸ª IP æ®µçš„ IPï¼Œæ¯ä¸ª IP 100qpd - key: 1.1.1.0/24 query_per_day: 100 # å…œåº•ç”¨ï¼Œå³é»˜è®¤æ¯ä¸ª IP 1000 qpd - key: 0.0.0.0/0 query_per_day: 1000 redis: service_name: redis.static show_limit_quota_header: true  ","version":"Next","tagName":"h3"},{"title":"è¯†åˆ« consumerï¼Œè¿›è¡ŒåŒºåˆ«é™æµâ€‹","type":1,"pageTitle":"åŸºäº Key é›†ç¾¤é™æµ","url":"/zh-cn/docs/plugins/traffic/cluster-key-rate-limit#è¯†åˆ«-consumerè¿›è¡ŒåŒºåˆ«é™æµ","content":"rule_name: default_rule rule_items: - limit_by_consumer: '' limit_keys: - key: consumer1 query_per_second: 10 - key: consumer2 query_per_hour: 100 - limit_by_per_consumer: '' limit_keys: # æ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…ä»¥ a å¼€å¤´çš„æ‰€æœ‰å­—ç¬¦ä¸²ï¼Œæ¯ä¸ª consumer å¯¹åº”çš„è¯·æ±‚ 10qds - key: &quot;regexp:^a.*&quot; query_per_second: 10 # æ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…ä»¥ b å¼€å¤´çš„æ‰€æœ‰å­—ç¬¦ä¸²ï¼Œæ¯ä¸ª consumer å¯¹åº”çš„è¯·æ±‚ 100qd - key: &quot;regexp:^b.*&quot; query_per_minute: 100 # å…œåº•ç”¨ï¼ŒåŒ¹é…æ‰€æœ‰è¯·æ±‚ï¼Œæ¯ä¸ª consumer å¯¹åº”çš„è¯·æ±‚ 1000qdh - key: &quot;*&quot; query_per_hour: 1000 redis: service_name: redis.static show_limit_quota_header: true  ","version":"Next","tagName":"h3"},{"title":"è¯†åˆ« Cookie ä¸­çš„é”®å€¼å¯¹ï¼Œè¿›è¡ŒåŒºåˆ«é™æµâ€‹","type":1,"pageTitle":"åŸºäº Key é›†ç¾¤é™æµ","url":"/zh-cn/docs/plugins/traffic/cluster-key-rate-limit#è¯†åˆ«-cookie-ä¸­çš„é”®å€¼å¯¹è¿›è¡ŒåŒºåˆ«é™æµ","content":"rule_name: default_rule rule_items: - limit_by_cookie: key1 limit_keys: - key: value1 query_per_minute: 10 - key: value2 query_per_hour: 100 - limit_by_per_cookie: key1 limit_keys: # æ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…ä»¥ a å¼€å¤´çš„æ‰€æœ‰å­—ç¬¦ä¸²ï¼Œæ¯ä¸ª cookie ä¸­çš„ value å¯¹åº”çš„è¯·æ±‚ 10qds - key: &quot;regexp:^a.*&quot; query_per_second: 10 # æ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…ä»¥ b å¼€å¤´çš„æ‰€æœ‰å­—ç¬¦ä¸²ï¼Œæ¯ä¸ª cookie ä¸­çš„ value å¯¹åº”çš„è¯·æ±‚ 100qd - key: &quot;regexp:^b.*&quot; query_per_minute: 100 # å…œåº•ç”¨ï¼ŒåŒ¹é…æ‰€æœ‰è¯·æ±‚ï¼Œæ¯ä¸ª cookie ä¸­çš„ value å¯¹åº”çš„è¯·æ±‚ 1000qdh - key: &quot;*&quot; query_per_hour: 1000 rejected_code: 200 rejected_msg: '{&quot;code&quot;:-1,&quot;msg&quot;:&quot;Too many requests&quot;}' redis: service_name: redis.static show_limit_quota_header: true  ","version":"Next","tagName":"h3"},{"title":"DeGraphQL","type":0,"sectionRef":"#","url":"/zh-cn/docs/plugins/transformation/de-graphql","content":"","keywords":"higress transformer","version":"Next"},{"title":"åŠŸèƒ½è¯´æ˜â€‹","type":1,"pageTitle":"DeGraphQL","url":"/zh-cn/docs/plugins/transformation/de-graphql#åŠŸèƒ½è¯´æ˜","content":"de-graphql æ’ä»¶ç”¨äºå°† Restful API è½¬æ¢ä¸º GraphQL è¯·æ±‚ã€‚ ","version":"Next","tagName":"h2"},{"title":"GraphQL ç®€ä»‹â€‹","type":1,"pageTitle":"DeGraphQL","url":"/zh-cn/docs/plugins/transformation/de-graphql#graphql-ç®€ä»‹","content":"","version":"Next","tagName":"h2"},{"title":"GraphQL ç«¯ç‚¹â€‹","type":1,"pageTitle":"DeGraphQL","url":"/zh-cn/docs/plugins/transformation/de-graphql#graphql-ç«¯ç‚¹","content":"REST API æœ‰å¤šä¸ªç«¯ç‚¹ï¼ŒGraphQL API åªæœ‰ä¸€ä¸ªç«¯ç‚¹ã€‚ https://api.github.com/graphql  ","version":"Next","tagName":"h3"},{"title":"ä¸ GraphQL é€šä¿¡â€‹","type":1,"pageTitle":"DeGraphQL","url":"/zh-cn/docs/plugins/transformation/de-graphql#ä¸-graphql-é€šä¿¡","content":"ç”±äº GraphQL æ“ä½œç”±å¤šè¡Œ JSON ç»„æˆï¼Œå¯ä»¥ä½¿ç”¨ curl æˆ–ä»»ä½•å…¶ä»–é‡‡ç”¨ HTTP çš„åº“ã€‚ åœ¨ REST ä¸­ï¼ŒHTTP è°“è¯ç¡®å®šæ‰§è¡Œçš„æ“ä½œã€‚ åœ¨ GraphQL ä¸­ï¼Œæ‰§è¡ŒæŸ¥è¯¢è¦æä¾› JSON è¯·æ±‚ä½“ï¼Œå› æ­¤ HTTP è°“è¯ä¸º POSTã€‚ å”¯ä¸€çš„ä¾‹å¤–æ˜¯å†…çœæŸ¥è¯¢ï¼Œå®ƒæ˜¯ä¸€ç§ç®€å•çš„ GET åˆ°ç»ˆç»“ç‚¹æŸ¥è¯¢ã€‚ ","version":"Next","tagName":"h3"},{"title":"GraphQL POST è¯·æ±‚å‚æ•°â€‹","type":1,"pageTitle":"DeGraphQL","url":"/zh-cn/docs/plugins/transformation/de-graphql#graphql-post-è¯·æ±‚å‚æ•°","content":"æ ‡å‡†çš„ GraphQL POST è¯·æ±‚æƒ…å†µå¦‚ä¸‹ï¼š æ·»åŠ  HTTP è¯·æ±‚å¤´ï¼š Content-Type: application/jsonä½¿ç”¨ JSON æ ¼å¼çš„è¯·æ±‚ä½“JSON è¯·æ±‚ä½“åŒ…å«ä¸‰ä¸ªå­—æ®µ queryï¼šæŸ¥è¯¢æ–‡æ¡£ï¼Œå¿…å¡«variablesï¼šå˜é‡ï¼Œé€‰å¡«operationNameï¼šæ“ä½œåç§°ï¼Œé€‰å¡«ï¼ŒæŸ¥è¯¢æ–‡æ¡£æœ‰å¤šä¸ªæ“ä½œæ—¶å¿…å¡« { &quot;query&quot;: &quot;{viewer{name}}&quot;, &quot;operationName&quot;: &quot;&quot;, &quot;variables&quot;: { &quot;name&quot;: &quot;value&quot; } }  ","version":"Next","tagName":"h3"},{"title":"GraphQL åŸºæœ¬å‚æ•°ç±»å‹â€‹","type":1,"pageTitle":"DeGraphQL","url":"/zh-cn/docs/plugins/transformation/de-graphql#graphql-åŸºæœ¬å‚æ•°ç±»å‹","content":"åŸºæœ¬å‚æ•°ç±»å‹åŒ…å«ï¼š String, Int, Float, Boolean[ç±»å‹]ä»£è¡¨æ•°ç»„ï¼Œä¾‹å¦‚ï¼š[Int]ä»£è¡¨æ•´å‹æ•°ç»„GraphQL åŸºæœ¬å‚æ•°ä¼ é€’ å°æ‹¬å·å†…å®šä¹‰å½¢å‚ï¼Œæ³¨æ„ï¼šå‚æ•°éœ€è¦å®šä¹‰ç±»å‹!ï¼ˆå¹å·ï¼‰ä»£è¡¨å‚æ•°ä¸èƒ½ä¸ºç©º query ($owner : String!, $name : String!) { repository(owner: $owner, name: $name) { name forkCount description } }  ","version":"Next","tagName":"h3"},{"title":"GitHub GraphQL æµ‹è¯•â€‹","type":1,"pageTitle":"DeGraphQL","url":"/zh-cn/docs/plugins/transformation/de-graphql#github-graphql-æµ‹è¯•","content":"ä½¿ç”¨ curl å‘½ä»¤æŸ¥è¯¢ GraphQLï¼Œ ç”¨æœ‰æ•ˆ JSON è¯·æ±‚ä½“å‘å‡º POST è¯·æ±‚ã€‚ æœ‰æ•ˆè¯·æ±‚ä½“å¿…é¡»åŒ…å«ä¸€ä¸ªåä¸º query çš„å­—ç¬¦ä¸²ã€‚  curl https://api.github.com/graphql -X POST \\ -H &quot;Authorization: bearer &lt;PAT&gt;&quot; \\ -d &quot;{\\&quot;query\\&quot;: \\&quot;query { viewer { login }}\\&quot;}&quot; { &quot;data&quot;: { &quot;viewer&quot;: { &quot;login&quot;: &quot;2456868764&quot; } } }  curl 'https://api.github.com/graphql' -X POST \\ -H 'Authorization: bearer &lt;PAT&gt;' \\ -d '{&quot;query&quot;:&quot;query ($owner: String!, $name: String!) {\\n repository(owner: $owner, name: $name) {\\n name\\n forkCount\\n description\\n }\\n}\\n&quot;,&quot;variables&quot;:{&quot;owner&quot;:&quot;2456868764&quot;,&quot;name&quot;:&quot;higress&quot;}}' { &quot;data&quot;: { &quot;repository&quot;: { &quot;name&quot;: &quot;higress&quot;, &quot;forkCount&quot;: 149, &quot;description&quot;: &quot;Next-generation Cloud Native Gateway | ä¸‹ä¸€ä»£äº‘åŸç”Ÿç½‘å…³&quot; } } }  ","version":"Next","tagName":"h3"},{"title":"DeGraphQL æ’ä»¶â€‹","type":1,"pageTitle":"DeGraphQL","url":"/zh-cn/docs/plugins/transformation/de-graphql#degraphql-æ’ä»¶","content":"","version":"Next","tagName":"h2"},{"title":"å‚æ•°é…ç½®â€‹","type":1,"pageTitle":"DeGraphQL","url":"/zh-cn/docs/plugins/transformation/de-graphql#å‚æ•°é…ç½®","content":"å‚æ•°\tæè¿°\té»˜è®¤gql\tgraphql æŸ¥è¯¢\tä¸èƒ½ä¸ºç©º endpoint\tgraphql æŸ¥è¯¢ç«¯ç‚¹\t/graphql timeout\tæŸ¥è¯¢è¿æ¥è¶…æ—¶ï¼Œå•ä½æ¯«ç§’\t5000 domain\tæœåŠ¡åŸŸåï¼Œå½“æœåŠ¡æ¥æºæ˜¯dnsé…ç½®\t ","version":"Next","tagName":"h3"},{"title":"æ’ä»¶ä½¿ç”¨â€‹","type":1,"pageTitle":"DeGraphQL","url":"/zh-cn/docs/plugins/transformation/de-graphql#æ’ä»¶ä½¿ç”¨","content":"æµ‹è¯•é…ç½®ã€‚ apiVersion: networking.higress.io/v1 kind: McpBridge metadata: name: default namespace: higress-system spec: registries: - domain: api.github.com name: github port: 443 type: dns --- apiVersion: networking.k8s.io/v1 kind: Ingress metadata: annotations: higress.io/destination: github.dns higress.io/upstream-vhost: &quot;api.github.com&quot; higress.io/backend-protocol: HTTPS name: github-api namespace: higress-system spec: ingressClassName: higress rules: - http: paths: - backend: resource: apiGroup: networking.higress.io kind: McpBridge name: default path: /api pathType: Prefix --- apiVersion: extensions.higress.io/v1alpha1 kind: WasmPlugin metadata: name: de-graphql-github-api namespace: higress-system spec: matchRules: - ingress: - github-api config: timeout: 5000 endpoint: /graphql domain: api.github.com gql: | query ($owner:String! $name:String!){ repository(owner:$owner, name:$name) { name forkCount description } } url: oci://higress-registry.cn-hangzhou.cr.aliyuncs.com/plugins/de-graphql:1.0.0  æµ‹è¯•ç»“æœã€‚ curl &quot;http://localhost/api?owner=alibaba&amp;name=higress&quot; -H &quot;Authorization: Bearer some-token&quot; { &quot;data&quot;: { &quot;repository&quot;: { &quot;description&quot;: &quot;Next-generation Cloud Native Gateway&quot;, &quot;forkCount&quot;: 149, &quot;name&quot;: &quot;higress&quot; } } }  ","version":"Next","tagName":"h3"},{"title":"å‚è€ƒæ–‡æ¡£â€‹","type":1,"pageTitle":"DeGraphQL","url":"/zh-cn/docs/plugins/transformation/de-graphql#å‚è€ƒæ–‡æ¡£","content":"https://github.com/graphql/graphql-spechttps://docs.github.com/zh/graphql/guides/forming-calls-with-graphqlhttps://github.com/altair-graphql/altair ","version":"Next","tagName":"h2"},{"title":"Ingress Annotaion é…ç½®è¯´æ˜","type":0,"sectionRef":"#","url":"/zh-cn/docs/user/annotation","content":"","keywords":"Ingress","version":"Next"},{"title":"Ingress Annotationâ€‹","type":1,"pageTitle":"Ingress Annotaion é…ç½®è¯´æ˜","url":"/zh-cn/docs/user/annotation#ingress-annotation","content":"","version":"Next","tagName":"h2"},{"title":"ç‰¹æ®Šè¯´æ˜â€‹","type":1,"pageTitle":"Ingress Annotaion é…ç½®è¯´æ˜","url":"/zh-cn/docs/user/annotation#ç‰¹æ®Šè¯´æ˜","content":"Annotation Key å‰ç¼€â€‹ ä»¥ä¸‹å‡ºç°çš„Nginx Ingress Annotationéƒ½å·²è¢«Higressæ”¯æŒï¼Œæ‚¨å¯ä»¥æ ¹æ®ä½¿ç”¨ä¹ æƒ¯ç»§ç»­ä½¿ç”¨Nginx Ingressçš„Annotationå‰ç¼€nginx.ingress.kubernetes.ioï¼Œæˆ–è€…ä½¿ç”¨Higress Ingressçš„Annotationå‰ç¼€higress.ioï¼Œä¸¤è€…æ˜¯ç­‰ä»·çš„ã€‚ ä½œç”¨åŸŸè¯´æ˜â€‹ Ingressï¼šä½œç”¨åŸŸä¸ºIngressçš„Annotationçš„ä½œç”¨èŒƒå›´ä»…é™å½“å‰Ingressä¸Šå®šä¹‰çš„è·¯ç”±è§„åˆ™ã€‚åŸŸåï¼šä½œç”¨åŸŸä¸ºåŸŸåçš„Annotationï¼Œå…¶ä½œç”¨èŒƒå›´ä¸ºæ‰€æœ‰Ingressä¸Šå‡ºç°çš„ç›¸åŒHostã€‚æœåŠ¡ï¼šä½œç”¨åŸŸä¸ºæœåŠ¡çš„Annotationï¼Œå…¶ä½œç”¨èŒƒå›´ä¸ºæ‰€æœ‰Ingressä¸Šå‡ºç°çš„ç›¸åŒServiceã€‚ ","version":"Next","tagName":"h3"},{"title":"æµé‡æ²»ç†â€‹","type":1,"pageTitle":"Ingress Annotaion é…ç½®è¯´æ˜","url":"/zh-cn/docs/user/annotation#æµé‡æ²»ç†","content":"ç°åº¦å‘å¸ƒâ€‹ æ³¨è§£\tä½œç”¨åŸŸ\tæ”¯æŒåº¦\tè¯´æ˜nginx.ingress.kubernetes.io/canary\tIngress\tå…¼å®¹\tå¼€å¯æˆ–å…³é—­ç°åº¦å‘å¸ƒ nginx.ingress.kubernetes.io/canary-by-header\tIngress\tå…¼å®¹\tåŸºäºRequest Header Key æµé‡åˆ‡åˆ† nginx.ingress.kubernetes.io/canary-by-header-value\tIngress\tå…¼å®¹\tåŸºäºRequest Header Value æµé‡åˆ‡åˆ†ï¼ŒValueä¸ºç²¾ç¡®åŒ¹é… nginx.ingress.kubernetes.io/canary-by-header-pattern\tIngress\tå…¼å®¹\tåŸºäºRequest Header Value æµé‡åˆ‡åˆ†ï¼ŒValueä¸ºæ­£åˆ™åŒ¹é… nginx.ingress.kubernetes.io/canary-by-cookie\tIngress\tå…¼å®¹\tåŸºäºRequest Cookie Key æµé‡åˆ‡åˆ† nginx.ingress.kubernetes.io/canary-weight\tIngress\tå…¼å®¹\tåŸºäºæƒé‡ æµé‡åˆ‡åˆ† nginx.ingress.kubernetes.io/canary-weight-total\tIngress\tå…¼å®¹\tæƒé‡æ€»å’Œ Fallbackï¼ˆå®¹ç¾ï¼‰â€‹ æ³¨è§£\tä½œç”¨åŸŸ\tæ”¯æŒåº¦\tè¯´æ˜nginx.ingress.kubernetes.io/default-backend\tIngress\tå…¼å®¹\tå®¹ç¾æœåŠ¡ã€‚å½“Ingresså®šä¹‰çš„æœåŠ¡æ²¡æœ‰å¯ç”¨èŠ‚ç‚¹æ—¶ï¼Œè¯·æ±‚ä¼šè‡ªåŠ¨è½¬å‘è¯¥å®¹ç¾æœåŠ¡ã€‚ nginx.ingress.kubernetes.io/custom-http-errors\tIngress\tå…¼å®¹\tè¯¥æ³¨è§£å’Œdefault-backendä¸€èµ·å·¥ä½œã€‚å½“åç«¯æœåŠ¡è¿”å›æŒ‡å®šHTTPå“åº”ç ï¼ŒåŸå§‹è¯·æ±‚ä¼šè¢«å†æ¬¡è½¬å‘è‡³å®¹ç¾æœåŠ¡ã€‚ &gt; æ³¨æ„ï¼šè½¬å‘è‡³å®¹ç¾æœåŠ¡æ—¶ï¼Œè¯·æ±‚çš„Pathä¼šè¢«é‡å†™ä¸º/ï¼Œè¯¥è¡Œä¸ºä¸ingress-nginxä¿æŒä¸€è‡´ é‡å†™â€‹ æ³¨è§£\tä½œç”¨åŸŸ\tæ”¯æŒåº¦\tè¯´æ˜nginx.ingress.kubernetes.io/rewrite-target\tIngress\tå…¼å®¹\tå°†Ingresså®šä¹‰çš„åŸpathé‡å†™ä¸ºæŒ‡å®šç›®æ ‡ï¼Œæ”¯æŒGroup Capture. nginx.ingress.kubernetes.io/upstream-vhost\tIngress\tå…¼å®¹\tåŒ¹é…Ingresså®šä¹‰çš„è·¯ç”±çš„è¯·æ±‚åœ¨è½¬å‘ç»™åç«¯æœåŠ¡æ—¶ï¼Œä¿®æ”¹å¤´éƒ¨hostå€¼ä¸ºæŒ‡å®šå€¼ã€‚ é‡å®šå‘â€‹ æ³¨è§£\tä½œç”¨åŸŸ\tæ”¯æŒåº¦\tè¯´æ˜nginx.ingress.kubernetes.io/ssl-redirect\tIngress\tå…¼å®¹\tHTTP é‡å®šå‘ä¸ºHTTPS nginx.ingress.kubernetes.io/force-ssl-redirect\tIngress\tå…¼å®¹\tHTTP é‡å®šå‘ä¸ºHTTPS nginx.ingress.kubernetes.io/permanent-redirect\tIngress\tå…¼å®¹\tæ°¸ä¹…é‡å®šå‘ nginx.ingress.kubernetes.io/permanent-redirect-code\tIngress\tå…¼å®¹\tæ°¸ä¹…é‡å®šå‘çŠ¶æ€ç  nginx.ingress.kubernetes.io/temporal-redirect\tIngress\tå…¼å®¹\tä¸´æ—¶é‡å®šå‘ nginx.ingress.kubernetes.io/app-root\tIngress\tå…¼å®¹\tä¿®æ”¹åº”ç”¨æ ¹è·¯å¾„ï¼Œå¯¹äºè®¿é—®/çš„è¯·æ±‚å°†ä¼šè¢«é‡å®šå‘ä¸ºè®¾ç½®çš„æ–°è·¯å¾„ è·¨åŸŸâ€‹ æ³¨è§£\tä½œç”¨åŸŸ\tæ”¯æŒåº¦\tè¯´æ˜nginx.ingress.kubernetes.io/enable-cors\tIngress\tå…¼å®¹\tå¼€å¯æˆ–å…³é—­è·¨åŸŸ nginx.ingress.kubernetes.io/cors-allow-origin\tIngress\tå…¼å®¹\tå…è®¸çš„ç¬¬ä¸‰æ–¹ç«™ç‚¹ nginx.ingress.kubernetes.io/cors-allow-methods\tIngress\tå…¼å®¹\tå…è®¸çš„è¯·æ±‚æ–¹æ³•ï¼Œå¦‚GETã€POSTã€PUTç­‰ nginx.ingress.kubernetes.io/cors-allow-headers\tIngress\tå…¼å®¹\tå…è®¸çš„è¯·æ±‚Header nginx.ingress.kubernetes.io/cors-expose-headers\tIngress\tå…¼å®¹\tå…è®¸çš„æš´éœ²ç»™æµè§ˆå™¨çš„å“åº”Header nginx.ingress.kubernetes.io/cors-allow-credentials\tIngress\tå…¼å®¹\tæ˜¯å¦å…è®¸æºå¸¦å‡­è¯ä¿¡æ¯ nginx.ingress.kubernetes.io/cors-max-age\tIngress\tå…¼å®¹\té¢„æ£€ç»“æœçš„æœ€å¤§ç¼“å­˜æ—¶é—´ è¶…æ—¶â€‹ æ³¨è§£\tä½œç”¨åŸŸ\tæ”¯æŒåº¦\tè¯´æ˜higress.io/timeout\tIngress\tHigress æ‰©å±•\tè¯·æ±‚çš„è¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºç§’ã€‚é»˜è®¤æœªé…ç½®è¶…æ—¶æ—¶é—´ã€‚è¶…æ—¶è®¾ç½®ä½œç”¨åœ¨åº”ç”¨å±‚ï¼Œéä¼ è¾“å±‚TCPã€‚ å•æœºé™æµâ€‹ æ³¨è§£\tä½œç”¨åŸŸ\tæ”¯æŒåº¦\tè¯´æ˜higress.io/route-limit-rpm\tIngress\tHigress æ‰©å±•\tè¯¥Ingresså®šä¹‰çš„è·¯ç”±åœ¨æ¯ä¸ªç½‘å…³å®ä¾‹ä¸Šæ¯åˆ†é’Ÿæœ€å¤§è¯·æ±‚æ¬¡æ•°ã€‚ç¬æ—¶æœ€å¤§è¯·æ±‚æ¬¡æ•°ä¸ºè¯¥å€¼ä¹˜ä»¥limit-burst-multiplierã€‚ higress.io/route-limit-rps\tIngress\tHigress æ‰©å±•\tè¯¥Ingresså®šä¹‰çš„è·¯ç”±åœ¨æ¯ä¸ªç½‘å…³å®ä¾‹ä¸Šæ¯ç§’æœ€å¤§è¯·æ±‚æ¬¡æ•°ã€‚ç¬æ—¶æœ€å¤§è¯·æ±‚æ¬¡æ•°ä¸ºè¯¥å€¼ä¹˜ä»¥limit-burst-multiplierã€‚ higress.io/route-limit-burst-multiplier\tIngress\tHigress æ‰©å±•\tç¬æ—¶æœ€å¤§è¯·æ±‚æ¬¡æ•°çš„å› å­ï¼Œé»˜è®¤ä¸º5ã€‚ é‡è¯•â€‹ æ³¨è§£\tä½œç”¨åŸŸ\tæ”¯æŒåº¦\tè¯´æ˜nginx.ingress.kubernetes.io/proxy-next-upstream-tries\tIngress\tå…¼å®¹\tè¯·æ±‚çš„æœ€å¤§é‡è¯•æ¬¡æ•°ã€‚é»˜è®¤3æ¬¡ã€‚ nginx.ingress.kubernetes.io/proxy-next-upstream-timeout\tIngress\tå…¼å®¹\tè¯·æ±‚é‡è¯•çš„è¶…æ—¶æ—¶é—´ï¼Œå•ä½ç§’ã€‚é»˜è®¤æœªé…ç½®è¶…æ—¶æ—¶é—´ã€‚ nginx.ingress.kubernetes.io/proxy-next-upstream\tIngress\tå…¼å®¹\tè¯·æ±‚é‡è¯•æ¡ä»¶ï¼Œå‚è€ƒhttp://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_next_upstream åç«¯æœåŠ¡ä½¿ç”¨çš„åè®®â€‹ æ³¨è§£\tä½œç”¨åŸŸ\tæ”¯æŒåº¦\tè¯´æ˜nginx.ingress.kubernetes.io/backend-protocol\tæœåŠ¡\téƒ¨åˆ†å…¼å®¹ã€‚ä¸æ”¯æŒAJPå’ŒFCGI\tæŒ‡å®šåç«¯æœåŠ¡ä½¿ç”¨çš„åè®®ï¼Œé»˜è®¤ä¸ºHTTPï¼Œæ”¯æŒHTTPã€HTTP2ã€HTTPSã€GRPCå’ŒGRPCS è´Ÿè½½å‡è¡¡â€‹ æ³¨è§£\tä½œç”¨åŸŸ\tæ”¯æŒåº¦\tè¯´æ˜nginx.ingress.kubernetes.io/load-balance\tæœåŠ¡\téƒ¨åˆ†å…¼å®¹ã€‚ä¸æ”¯æŒewmaç®—æ³•\tåç«¯æœåŠ¡çš„æ™®é€šè´Ÿè½½å‡è¡¡ç®—æ³•ã€‚é»˜è®¤ä¸ºround_robinã€‚ åˆæ³•å€¼å¦‚ä¸‹ï¼š - round_robinï¼šåŸºäºè½®è¯¢çš„è´Ÿè½½å‡è¡¡ã€‚ - least_connï¼šåŸºäºæœ€å°è¯·æ±‚æ•°çš„è´Ÿè½½å‡è¡¡ã€‚ - randomï¼šåŸºäºéšæœºçš„è´Ÿè½½å‡è¡¡ã€‚ &gt; æ³¨æ„ï¼šHigressä¸æ”¯æŒewmaç®—æ³•ï¼Œè‹¥é…ç½®ä¸ºewmaç®—æ³•ï¼Œä¼šå›é€€åˆ°round_robinç®—æ³•ã€‚ nginx.ingress.kubernetes.io/upstream-hash-by\tæœåŠ¡\téƒ¨åˆ†å…¼å®¹ã€‚æš‚ä¸æ”¯æŒNginxå˜é‡ã€å¸¸é‡çš„ç»„åˆä½¿ç”¨æ–¹å¼\tåŸºäºä¸€è‡´Hashçš„è´Ÿè½½å‡è¡¡ç®—æ³•ï¼ŒHigressæ”¯æŒä»¥ä¸‹å‡ ç§å½¢å¼ï¼š 1. Higressæ”¯æŒé…ç½®éƒ¨åˆ†nginxå˜é‡ï¼š - $request_uriï¼šè¯·æ±‚çš„Pathï¼ˆåŒ…æ‹¬è·¯å¾„å‚æ•°ï¼‰ä½œä¸ºHash Key - $hostï¼šè¯·æ±‚çš„Hostä½œä¸ºHash Key - $remote_addrï¼šè¯·æ±‚çš„å®¢æˆ·ç«¯IPä½œä¸ºHash Keyã€‚ 2. åŸºäºè¯·æ±‚headerçš„ä¸€è‡´æ€§Hashã€‚æ‚¨åªéœ€é…ç½®ä¸º$http_headerNameã€‚ 3. åŸºäºè¯·æ±‚è·¯å¾„å‚æ•°çš„ä¸€è‡´æ€§Hashã€‚æ‚¨åªéœ€é…ç½®ä¸º$arg_varName Cookieäº²å’Œæ€§â€‹ æ³¨è§£\tä½œç”¨\tæ”¯æŒåº¦\tè¯´æ˜nginx.ingress.kubernetes.io/affinity\tæœåŠ¡\tå…¼å®¹\täº²å’Œæ€§ç§ç±»ï¼Œç›®å‰åªæ”¯æŒcookieï¼Œé»˜è®¤ä¸ºcookieã€‚ nginx.ingress.kubernetes.io/affinity-mode\tæœåŠ¡\téƒ¨åˆ†å…¼å®¹ã€‚æš‚ä¸æ”¯æŒpersistentæ¨¡å¼\täº²å’Œæ€§æ¨¡å¼ï¼Œäº‘åŸç”Ÿç½‘å…³ç›®å‰åªæ”¯æŒbalancedæ¨¡å¼ï¼Œé»˜è®¤ä¸ºbalancedæ¨¡å¼ã€‚ nginx.ingress.kubernetes.io/session-cookie-name\tæœåŠ¡\tå…¼å®¹\té…ç½®æŒ‡å®šCookieçš„å€¼ä½œä¸ºHash Key nginx.ingress.kubernetes.io/session-cookie-path\tæœåŠ¡\tå…¼å®¹\tå½“æŒ‡å®šCookieä¸å­˜åœ¨ï¼Œç”Ÿæˆçš„Cookieçš„Pathå€¼ï¼Œé»˜è®¤ä¸º/ nginx.ingress.kubernetes.io/session-cookie-max-age\tæœåŠ¡\tå…¼å®¹\tå½“æŒ‡å®šCookieä¸å­˜åœ¨ï¼Œç”Ÿæˆçš„Cookieçš„è¿‡æœŸæ—¶é—´ï¼Œå•ä½ä¸ºç§’ï¼Œé»˜è®¤ä¸ºSessionä¼šè¯çº§åˆ«ã€‚ nginx.ingress.kubernetes.io/session-cookie-expires\tæœåŠ¡\tå…¼å®¹\tå½“æŒ‡å®šCookieä¸å­˜åœ¨ï¼Œç”Ÿæˆçš„Cookieçš„è¿‡æœŸæ—¶é—´ï¼Œå•ä½ä¸ºç§’ï¼Œé»˜è®¤ä¸ºSessionä¼šè¯çº§åˆ«ã€‚ IPè®¿é—®æ§åˆ¶â€‹ æ³¨è§£\tä½œç”¨åŸŸ\tæ”¯æŒåº¦\tè¯´æ˜nginx.ingress.kubernetes.io/whitelist-source-range\tIngress\tå…¼å®¹\tæŒ‡å®šè·¯ç”±ä¸Šçš„IPç™½åå•ï¼Œæ”¯æŒIPåœ°å€æˆ–CIDRåœ°å€å—ï¼Œä»¥é€—å·åˆ†éš”ã€‚ ","version":"Next","tagName":"h3"},{"title":"å®‰å…¨é˜²æŠ¤â€‹","type":1,"pageTitle":"Ingress Annotaion é…ç½®è¯´æ˜","url":"/zh-cn/docs/user/annotation#å®‰å…¨é˜²æŠ¤","content":"å®¢æˆ·ç«¯ä¸ç½‘å…³ä¹‹å‰çš„é€šä¿¡åŠ å¯†â€‹ æ³¨è§£\tä½œç”¨åŸŸ\tæ”¯æŒåº¦\tè¯´æ˜nginx.ingress.kubernetes.io/ssl-cipher\tåŸŸå\tå…¼å®¹\tæŒ‡å®štlsçš„åŠ å¯†å¥—ä»¶ï¼Œå¯ä»¥æŒ‡å®šå¤šä¸ªï¼Œè‹±æ–‡é€—å·åˆ†éš”ï¼Œä»…å½“tlsæ¡æ‰‹æ—¶é‡‡ç”¨TLSv1.0-1.2ç”Ÿæ•ˆã€‚ é»˜è®¤åŠ å¯†å¥—ä»¶å¦‚ä¸‹ï¼š - ECDHE-ECDSA-AES128-GCM-SHA256 - ECDHE-RSA-AES128-GCM-SHA256 - ECDHE-ECDSA-AES128-SHA - ECDHE-RSA-AES128-SHA - AES128-GCM-SHA256 - AES128-SHA - ECDHE-ECDSA-AES256-GCM-SHA384 - ECDHE-RSA-AES256-GCM-SHA384 - ECDHE-ECDSA-AES256-SHA - ECDHE-RSA-AES256-SHA - AES256-GCM-SHA384 - AES256-SHA nginx.ingress.kubernetes.io/auth-tls-secret\tåŸŸå\téƒ¨åˆ†å…¼å®¹ã€‚secretåå­—æ ¼å¼å¿…é¡»æ˜¯ï¼š(è¯¥åŸŸåè¯ä¹¦æ‰€åœ¨çš„secretçš„åå­—)-cacert\tç½‘å…³ä½¿ç”¨çš„CAè¯ä¹¦ï¼Œç”¨äºéªŒè¯MTLSæ¡æ‰‹æœŸé—´ï¼Œå®¢æˆ·ç«¯æä¾›çš„è¯ä¹¦ã€‚è¯¥æ³¨è§£ä¸»è¦åº”ç”¨äºç½‘å…³éœ€è¦éªŒè¯å®¢æˆ·ç«¯èº«ä»½çš„åœºæ™¯ã€‚ ç½‘å…³ä¸åç«¯æœåŠ¡ä¹‹é—´é€šä¿¡åŠ å¯†â€‹ æ³¨è§£\tä½œç”¨åŸŸ\tæ”¯æŒåº¦\tè¯´æ˜nginx.ingress.kubernetes.io/proxy-ssl-secret\tæœåŠ¡\tå…¼å®¹\tç½‘å…³ä½¿ç”¨çš„å®¢æˆ·ç«¯è¯ä¹¦ï¼Œç”¨äºåç«¯æœåŠ¡å¯¹ç½‘å…³è¿›è¡Œèº«ä»½è®¤è¯ nginx.ingress.kubernetes.io/proxy-ssl-name\tæœåŠ¡\tå…¼å®¹\tTLSæ¡æ‰‹æœŸé—´ä½¿ç”¨çš„SNI nginx.ingress.kubernetes.io/proxy-ssl-server-name\tæœåŠ¡\tå…¼å®¹\tå¼€å¯æˆ–å…³é—­TLSæ¡æ‰‹æœŸé—´ä½¿ç”¨SNI å®‰å…¨è®¤è¯â€‹ Basicâ€‹ æ³¨è§£\tä½œç”¨åŸŸ\tæ”¯æŒåº¦\tè¯´æ˜nginx.ingress.kubernetes.io/auth-type\tIngress\téƒ¨åˆ†å…¼å®¹ã€‚æš‚åªæ”¯æŒBasicã€‚\tè®¤è¯ç±»å‹ nginx.ingress.kubernetes.io/auth-secret\tIngress\tå…¼å®¹\tSecretåå­—ï¼Œæ ¼å¼æ”¯æŒ&lt;namespace&gt;/&lt;name&gt;ï¼ŒåŒ…å«è¢«æˆäºˆèƒ½å¤Ÿè®¿é—®è¯¥Ingressä¸Šå®šä¹‰çš„è·¯ç”±çš„è®¿é—®æƒé™çš„ç”¨æˆ·åå’Œå¯†ç ã€‚ nginx.ingress.kubernetes.io/auth-secret-type\tIngress\tå…¼å®¹\tSecretå†…å®¹æ ¼å¼ã€‚ - auth-fileï¼šdataçš„keyä¸ºauthï¼›valueä¸ºç”¨æˆ·åå’Œå¯†ç ï¼Œå¤šå¸å·å›è½¦åˆ†éš” - auth-mapï¼šdataçš„keyä¸ºç”¨æˆ·åï¼›valueä¸ºå¯†ç  nginx.ingress.kubernetes.io/auth-realm\tIngress\tå…¼å®¹\tä¿æŠ¤åŸŸã€‚ç›¸åŒçš„ä¿æŠ¤åŸŸå…±äº«ç”¨æˆ·åå’Œå¯†ç ã€‚ ","version":"Next","tagName":"h3"},{"title":"å¤‡æ³¨â€‹","type":1,"pageTitle":"Ingress Annotaion é…ç½®è¯´æ˜","url":"/zh-cn/docs/user/annotation#å¤‡æ³¨","content":"å…³äºä»¥ä¸Šæåˆ°çš„Nginx Ingress Annotationçš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…å®˜æ–¹æ–‡æ¡£ï¼ˆhttps://kubernetes.github.io/ingress-nginx/user-guide/nginx-configuration/annotations/#annotationsï¼‰ã€‚ ","version":"Next","tagName":"h2"},{"title":"å…¨å±€é…ç½®è¯´æ˜","type":0,"sectionRef":"#","url":"/zh-cn/docs/user/configmap","content":"","keywords":"Ingress","version":"Next"},{"title":"é€šç”¨å…¨å±€é…ç½®â€‹","type":1,"pageTitle":"å…¨å±€é…ç½®è¯´æ˜","url":"/zh-cn/docs/user/configmap#é€šç”¨å…¨å±€é…ç½®","content":"Higress çš„å…¨å±€é…ç½® ConfigMap å¯¹è±¡ higress-config å¢åŠ  higress é¡¹ï¼Œ å‚è€ƒé…ç½®å¦‚ä¸‹ï¼š apiVersion: v1 data: higress: |- tracing: enable: true sampling: 100 timeout: 500 skywalking: service: skywalking-oap-server.op-system.svc.cluster.local port: 11800 gzip: enable: false minContentLength: 1024 contentType: - text/html - application/json - text/css - application/javascript - application/xhtml+xml - image/svg+xml disableOnEtagHeader: true memoryLevel: 5 windowBits: 12 chunkSize: 4096 compressionLevel: BEST_COMPRESSION compressionStrategy: DEFAULT_STRATEGY addXRealIpHeader: false disableXEnvoyHeaders: false downstream: connectionBufferLimits: 32768 http2: initialConnectionWindowSize: 1048576 initialStreamWindowSize: 65535 maxConcurrentStreams: 100 idleTimeout: 180 maxRequestHeadersKb: 60 upstream: connectionBufferLimits: 1048576 idleTimeout: 10 ... kind: ConfigMap metadata: name: higress-config namespace: higress-system  ","version":"Next","tagName":"h2"},{"title":"é…ç½®è¯´æ˜â€‹","type":1,"pageTitle":"å…¨å±€é…ç½®è¯´æ˜","url":"/zh-cn/docs/user/configmap#é…ç½®è¯´æ˜","content":"å­—æ®µ\tç±»å‹\tè¯´æ˜\té»˜è®¤addXRealIpHeader\tboolean\tæ˜¯å¦æ·»åŠ  x-real-ip è¯·æ±‚å¤´ï¼Œå¦‚æœæ˜¯trueï¼Œåˆ™ä¼šä¸ºè¯·æ±‚å¤´æ·»åŠ  x-real-ip å‚æ•°\tfalse disableXEnvoyHeaders\tboolean\tæ˜¯å¦å…³é—­é™„åŠ åœ¨è½¬å‘è¯·æ±‚ä¸­çš„ x-envoy å‰ç¼€è¯·æ±‚å¤´ï¼ˆä¾‹å¦‚ x-envoy-original-pathï¼‰ï¼Œå¦‚æœæ˜¯trueï¼Œåˆ™ä¼šå…³é—­\tfalse downstream\tå‚è€ƒä¸‹é¢ downstream è®¾ç½®\tdownstream è®¾ç½®\tå‚è€ƒä¸‹é¢ downstream é»˜è®¤å€¼ upstream\tå‚è€ƒä¸‹é¢ upstream è®¾ç½®\tupstream è®¾ç½®\tå‚è€ƒä¸‹é¢ upstream é»˜è®¤å€¼ tracing\tå‚è€ƒä¸‹é¢ tracing è®¾ç½®\ttracing è®¾ç½®\tå‚è€ƒä¸‹é¢ tracing é»˜è®¤å€¼ gzip\tå‚è€ƒä¸‹é¢ gzip è®¾ç½®\tgzip è®¾ç½®\tå‚è€ƒä¸‹é¢ gzip é»˜è®¤å€¼ Tracing é…ç½®è¯´æ˜â€‹ å­—æ®µ\tç±»å‹\tè¯´æ˜\té»˜è®¤enable\tboolean\tæ˜¯å¦å¼€å¯ tracing åŠŸèƒ½\tfalse sampling\tfloat\té‡‡æ ·ç‡ï¼Œ0.0 - 100.0 ä¹‹é—´\t100.0 timeout\tint\té“¾è·¯è·Ÿè¸ªä¸­é—´ä»¶ grpc è¿æ¥è¶…æ—¶ï¼Œå•ä½æ¯«ç§’\t500 skywalking\tå‚è€ƒä¸‹é¢ skywalking è®¾ç½®\tskywalking é…ç½®\tæœªè®¾ç½® zipkin\tå‚è€ƒä¸‹é¢ zipkin è®¾ç½®\tzipkin é…ç½®\tæœªè®¾ç½® skywalking é…ç½®â€‹ å­—æ®µ\tç±»å‹\tè¯´æ˜\té»˜è®¤service\tstring\tSkywalking grpc æœåŠ¡åœ°å€\tç©º port\tstring\tSkywalking grpc æœåŠ¡ç«¯å£\tç©º access_token\tstring\tSkywalking grpc æœåŠ¡è®¿é—®å‡­è¯\tç©º zipkin é…ç½®â€‹ å­—æ®µ\tç±»å‹\tè¯´æ˜\té»˜è®¤service\tstring\tzipkin æœåŠ¡åœ°å€\tç©º port\tstring\tzipkin æœåŠ¡ç«¯å£\tç©º æ³¨æ„ï¼š skywalking å’Œ zipkin ä¸èƒ½åŒæ—¶è®¾ç½®ï¼Œåªæœ‰ä¸€ä¸ªé…ç½®èƒ½ç”Ÿæ•ˆ Gzip é…ç½®è¯´æ˜â€‹ å­—æ®µ\tç±»å‹\tè¯´æ˜\té»˜è®¤enable\tboolean\tæ˜¯å¦å¼€å¯ gzip åŠŸèƒ½\tfalse minContentLength\tint\tå¯ç”¨å‹ç¼©è¾“å‡ºæœ€å°‘å­—èŠ‚é•¿åº¦\t1024 contentType\tarray\tå¯ç”¨å‹ç¼©è¾“å‡ºcontent-typeç±»å‹\ttext/html,application/json,text/css, application/javascript,application/xhtml+xml, image/svg+xml disableOnEtagHeader\tboolean\tå¦‚æœæ˜¯trueæ—¶, å½“ response åŒ…å« etag headeræ—¶ä¼šå…³é—­ gzipåŠŸèƒ½\ttrue memoryLevel\tint\tä» 1 åˆ° 9 æ§åˆ¶ zlibç”¨åˆ°å†…å­˜.\t5 windowBits\tint\tä» 9 åˆ° 15 è¡¨ç¤ºå‹ç¼©ç®—æ³•çª—å£å¤§å°.\t12 chunkSize\tint\tzlib bufferå¤§å°\t4096 compressionLevel\tstring\tzlib å‹ç¼©æ¯”ç‡\tBEST_COMPRESSION compressionStrategy\tstring\tzlib å‹ç¼©ç­–ç•¥\tDEFAULT_STRATEGY å…³äº gzip å‚æ•°é…ç½®è¯¦ç»†è¯´æ˜å¯ä»¥å‚è€ƒ envoy gzipå‹ç¼©æ–‡æ¡£ï¼š https://www.envoyproxy.io/docs/envoy/latest/api-v3/extensions/compression/gzip/compressor/v3/gzip.proto#envoy-v3-api-msg-extensions-compression-gzip-compressor-v3-gzip Downstream é…ç½®è¯´æ˜â€‹ å­—æ®µ\tç±»å‹\tè¯´æ˜\té»˜è®¤connectionBufferLimits\tint\tè¿æ¥ç¼“å†²åŒºå¤§å°ï¼Œå•ä½å­—èŠ‚\t32768 http2\tå‚è€ƒä¸‹é¢ http2 è®¾ç½®\thttp2 è®¾ç½®\tå‚è€ƒä¸‹é¢ http2 é»˜è®¤å€¼ idleTimeout\tint\tè¿æ¥ç©ºé—²è¶…æ—¶æ—¶é—´ï¼Œå•ä½ç§’ï¼Œ0è¡¨ç¤ºå…³é—­è¯¥é…ç½®\t180 maxRequestHeadersKb\tint\tæœ€å¤§è¯·æ±‚å¤´å¤§å°ï¼Œå•ä½Kbï¼Œæœ€å¤§ä¸º8192Kb\t60 http2 é…ç½®è¯´æ˜â€‹ å­—æ®µ\tç±»å‹\tè¯´æ˜\té»˜è®¤initialConnectionWindowSize\tint\thttp2 è¿æ¥çª—å£å¤§å°ï¼Œå•ä½å­—èŠ‚ï¼ŒèŒƒå›´ä¸º65535ï½2147483647\t1048576 initialStreamWindowSize\tint\thttp2 æµçª—å£å¤§å°ï¼Œå•ä½å­—èŠ‚ï¼ŒèŒƒå›´ä¸º65535ï½2147483647\t65535 maxConcurrentStreams\tint\thttp2 æœ€å¤§å¹¶å‘æµæ•°é‡ï¼ŒèŒƒå›´ä¸º1ï½2147483647\t100 Upstream é…ç½®è¯´æ˜â€‹ å­—æ®µ\tç±»å‹\tè¯´æ˜\té»˜è®¤connectionBufferLimits\tint\tè¿æ¥ç¼“å†²åŒºå¤§å°ï¼Œå•ä½å­—èŠ‚\t1048576 idleTimeout\tint\tè¿æ¥ç©ºé—²è¶…æ—¶æ—¶é—´(ç©ºé—²å®šä¹‰æ˜¯æ²¡æœ‰æœªå¤„ç†å®Œçš„è¯·æ±‚ï¼Œå¦‚æœæœ‰è¯·æ±‚åœ¨å¤„ç†ä¸­ï¼Œä¸ä¼šåˆ¤å®šä¸ºidle)ï¼Œå•ä½ç§’ï¼Œ0è¡¨ç¤ºå…³é—­è¯¥é…ç½®\t10 ","version":"Next","tagName":"h3"},{"title":"TLS è¯ä¹¦å…¨å±€é…ç½®â€‹","type":1,"pageTitle":"å…¨å±€é…ç½®è¯´æ˜","url":"/zh-cn/docs/user/configmap#tls-è¯ä¹¦å…¨å±€é…ç½®","content":"æ³¨æ„ï¼šå½“å‰ä»…å¯¹Ingressæ¨¡å¼ç”Ÿæ•ˆï¼ŒGateway APIæš‚ä¸æ”¯æŒ Higress TLS çš„å…¨å±€é…ç½® ConfigMap å¯¹è±¡ higress-https ï¼Œ å‚è€ƒé…ç½®å¦‚ä¸‹ï¼š apiVersion: v1 kind: ConfigMap metadata: name: higress-https namespace: higress-system data: cert: | automaticHttps: true renewBeforeDays: 30 fallbackForInvalidSecret: true acmeIssuer: - name: letsencrypt email: test@example.com credentialConfig: - tlsIssuer: letsencrypt domains: - foo.com tlsSecret: foo-com-secret  ","version":"Next","tagName":"h2"},{"title":"é…ç½®è¯´æ˜â€‹","type":1,"pageTitle":"å…¨å±€é…ç½®è¯´æ˜","url":"/zh-cn/docs/user/configmap#é…ç½®è¯´æ˜-1","content":"å­—æ®µ\tç±»å‹\tè¯´æ˜\té»˜è®¤name\tboolean\tæ˜¯å¦å¯åŠ¨é€šè¿‡ ACME Issuer æ¥ç­¾å‘è¯ä¹¦\ttrue renewBeforeDays\tint\tè¯ä¹¦è¿‡æœŸå‰å¤šå°‘å¤©è‡ªåŠ¨Renewï¼Œ æœ€å¤§å€¼ä¸º90å¤©\t30 fallbackForInvalidSecret\tboolean\tå¦‚æœå¼€å¯ï¼Œå½“ ingress TLS é‡Œé…ç½® secretName ä¸å­˜åœ¨æ—¶ï¼Œä¼šåœ¨ credentialConfig é…ç½®é‡Œæ ¹æ®åŸŸååŒ¹é… secret\tfalse acmeIssuer\tarray\tacmeIssuer è®¾ç½®\tå‚è€ƒä¸‹é¢ acmeIssuer credentialConfig\tarray\tcredentialConfig è®¾ç½®\tå‚è€ƒä¸‹é¢ credentialConfig ","version":"Next","tagName":"h3"},{"title":"credentialConfig é…ç½®â€‹","type":1,"pageTitle":"å…¨å±€é…ç½®è¯´æ˜","url":"/zh-cn/docs/user/configmap#credentialconfig-é…ç½®","content":"å­—æ®µ\tç±»å‹\tè¯´æ˜\té»˜è®¤tlsSecret\tstring\tè¯ä¹¦ secret åç§°\t- tlsIssuer\tstring\tå¯¹åº” ACME Issuer åç§°ï¼Œç°åœ¨åªæ”¯æŒ letsencryptã€‚ä¸å¡« tlsIssuer æ—¶ï¼Œdomainså¯ä»¥å¡«åˆ—è¡¨æˆ–æ³›åŸŸåï¼Œç”¨äºå…¨å±€ç®¡ç†è¿™äº›åŸŸåçš„secreté…ç½®ï¼› å¦‚æœè®¾ç½®ä¸º letsencryptï¼Œ domains ä¸‹åªèƒ½é…ç½®ä¸€ä¸ªåŸŸåï¼Œè€Œä¸”ä¸èƒ½æ˜¯æ³›åŸŸåï¼Œå¹¶ä¸” tlsSecret ä¸èƒ½æ˜¯å·²ç»å­˜åœ¨çš„é Higress åˆ›å»ºçš„è‡ªåŠ¨è¯ä¹¦\t- domains\tarray\tåŸŸåé…ç½®ï¼Œå¯ä»¥æ˜¯æ³›åŸŸå\t- ","version":"Next","tagName":"h3"},{"title":"acmeIssuer é…ç½®â€‹","type":1,"pageTitle":"å…¨å±€é…ç½®è¯´æ˜","url":"/zh-cn/docs/user/configmap#acmeissuer-é…ç½®","content":"å­—æ®µ\tç±»å‹\tè¯´æ˜\té»˜è®¤name\tstring\tACME Issuer åç§°ï¼Œåªæ”¯æŒ letsencrypt\t- email\tstring\tACME Issuer é‚®ç®±ï¼Œç”¨äºé€šçŸ¥è¯ä¹¦å˜æ›´ç­‰äº‹ä»¶\t- ","version":"Next","tagName":"h3"},{"title":"å¦‚ä½•å¼€å¯å’Œå…³é—­ ACME Issuer è‡ªåŠ¨ç®¡ç†è¯ä¹¦â€‹","type":1,"pageTitle":"å…¨å±€é…ç½®è¯´æ˜","url":"/zh-cn/docs/user/configmap#å¦‚ä½•å¼€å¯å’Œå…³é—­-acme-issuer-è‡ªåŠ¨ç®¡ç†è¯ä¹¦","content":"å®‰è£…æ—¶é»˜è®¤å¯åŠ¨ ACME Issuer è‡ªåŠ¨ç®¡ç†è¯ä¹¦å’Œç³»ç»Ÿéšæœºç”Ÿæˆé‚®ç®±åœ°å€ï¼Œå…·ä½“é…ç½®å‚æ•°å¦‚ä¸‹ï¼š å‚æ•°å\tå‚æ•°è¯´æ˜\té»˜è®¤å€¼higress-core.controller.automaticHttps.enabled\tæ˜¯å¦å¼€å¯ACME Issuerç­¾å‘è¯ä¹¦ï¼Œåªæ”¯æŒ letsencrypt\ttrue higress-core.controller.automaticHttps.email\tACME Issuer é‚®ç®±ï¼Œå¦‚æœä¸ºç©ºï¼Œç³»ç»Ÿéšæœºç”Ÿæˆé‚®ç®±åœ°å€\t- ","version":"Next","tagName":"h3"},{"title":"Higresså‚æ•°é…ç½®","type":0,"sectionRef":"#","url":"/zh-cn/docs/user/configurations","content":"","keywords":"Higress","version":"Next"},{"title":"Globalå‚æ•°â€‹","type":1,"pageTitle":"Higresså‚æ•°é…ç½®","url":"/zh-cn/docs/user/configurations#globalå‚æ•°","content":"å‚æ•°\tå‚æ•°è¯´æ˜\té»˜è®¤å€¼global.ingressClass\tIngressClass å‚æ•°ç”¨äºç­›é€‰ Higress æ§åˆ¶å™¨è¦ç›‘å¬çš„ Ingress èµ„æºã€‚åœ¨é›†ç¾¤å†…éƒ¨ç½²äº†å¤šä¸ªç½‘å…³æ—¶ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸€å‚æ•°æ¥åŒºåˆ†æ¯ä¸ªç½‘å…³çš„èŒè´£èŒƒå›´ ã€‚IngressClass æœ‰ä¸€äº›ç‰¹æ®Šçš„å–å€¼ï¼š1. å¦‚æœè®¾ç½®ä¸ºâ€œnginxâ€ï¼ŒHigress Controller å°†ç›‘å¬ Ingress ä¸º nginx æˆ–ä¸ºç©ºçš„ Ingress èµ„æºã€‚2. å¦‚æœè®¾ä¸ºç©ºï¼ŒHigress Controller å°†ç›‘å¬ K8s é›†ç¾¤å†…çš„å…¨éƒ¨ Ingress èµ„æºã€‚\thigress global.watchNamespace\tå¦‚æœå€¼ä¸ä¸ºç©ºï¼ŒHigress Controller å°†åªä¼šç›‘å¬æŒ‡å®šå‘½åç©ºé—´ä¸‹çš„èµ„æºã€‚å½“åŸºäº K8s å‘½åç©ºé—´è¿›è¡Œä¸šåŠ¡ç³»ç»Ÿéš”ç¦»æ—¶ï¼Œè‹¥éœ€è¦å¯¹æ¯ä¸ªå‘½åç©ºé—´éƒ¨ç½²ä¸€å¥—ç‹¬ç«‹çš„ç½‘å…³ï¼Œå¯ä»¥é€šè¿‡è¿™ä¸€å‚æ•°æ¥é™åˆ¶ Higress ç›‘å¬æŒ‡å®šå‘½åç©ºé—´å†…çš„ Ingressã€‚\t&quot;&quot; global.disableAlpnH2\tæ˜¯å¦åœ¨ ALPN ä¸­ç¦ç”¨ HTTP/2 åè®®\tfalse global.enableStatus\tè‹¥ä¸ºtrueï¼Œ Higress Controller å°†ä¼šæ›´æ–° Ingress èµ„æºçš„ status å­—æ®µã€‚ä¸ºé¿å…ä» Nginx Ingress è¿ç§»è¿‡ç¨‹ä¸­ï¼Œè¦†ç›– Ingress å¯¹è±¡çš„ status å­—æ®µï¼Œå¯ä»¥å°†è¿™ä¸€å‚æ•°è®¾ç½®ä¸ºfalseï¼Œè¿™æ · Higress é»˜è®¤å°±ä¸ä¼šå°†å…¥å£ IP å†™å…¥ Ingress çš„ status å­—æ®µã€‚\ttrue global.local\tå¦‚æœè¦å®‰è£…è‡³æœ¬åœ° K8s é›†ç¾¤ï¼ˆå¦‚ Kindã€Rancher Desktop ç­‰ï¼‰ï¼Œè¯·è®¾ç½®ä¸º true\tfalse global.enableIstioAPI\tè‹¥ä¸º trueï¼ŒHigress Controller å°†åŒæ—¶ç›‘å¬ istio èµ„æº\tfalse global.enableGatewayAPI\tè‹¥ä¸º trueï¼ŒHigress Controller å°†åŒæ—¶ç›‘å¬ Gateway API èµ„æº\tfalse global.imagePullPolicy\tå¦‚æœä¸å¸Œæœ›ä½¿ç”¨é»˜è®¤è¡Œä¸ºï¼Œåˆ™å¯ä»¥æŒ‡å®šé•œåƒæ‹‰å–ç­–ç•¥ã€‚é»˜è®¤è¡Œä¸ºï¼šæœ€æ–°çš„é•œåƒå°†å§‹ç»ˆä»¥ Always æ–¹å¼æ‹‰å–ï¼Œå¦åˆ™å°†ä»¥ IfNotPresent æ–¹å¼æ‹‰å–ã€‚\t&quot;&quot; global.imagePullSecrets\tä¸ºæ‰€æœ‰ ServiceAccount é…ç½® ImagePullSecretsï¼Œå³åœ¨åŒä¸€å‘½åç©ºé—´ä¸­åˆ—å‡ºçš„ä¸€ç»„å¯†é’¥ï¼Œç”¨äºæ‹‰å–ä»»ä½•å¼•ç”¨æ­¤ ServiceAccount çš„ pod ä¸­çš„é•œåƒã€‚å¯¹äºä¸ä½¿ç”¨ ServiceAccount çš„ç»„ä»¶ï¼ˆä¾‹å¦‚ grafanaã€servicegraphã€tracingï¼‰ï¼ŒImagePullSecrets å°†è¢«æ·»åŠ åˆ°ç›¸åº”çš„ Deploymentï¼ˆStatefulSetï¼‰å¯¹è±¡ä¸­ã€‚å¯¹äºé…ç½®äº†ç§æœ‰ Docker Registry çš„ä»»ä½•é›†ç¾¤ï¼Œéƒ½å¿…é¡»è®¾ç½®æ­¤é¡¹ã€‚\t[] global.defaultUpstreamConcurrencyThreshold\tå•ä¸ªæ•°æ®é¢å®ä¾‹å’Œåç«¯æœåŠ¡ä¹‹é—´çš„æœ€å¤§å¹¶å‘ï¼ˆä¸åŒæœåŠ¡ç‹¬ç«‹è®¡ç®—ï¼‰ï¼Œæ³¨æ„è¿‡å¤šå¹¶å‘å¯èƒ½å¯¼è‡´ç½‘å…³å†…å­˜è¿‡é«˜ï¼Œè¯·ç›¸åº”è°ƒé«˜æ•°æ®é¢å†…å­˜é™åˆ¶\t10000 ","version":"Next","tagName":"h2"},{"title":"meshConfigå‚æ•°â€‹","type":1,"pageTitle":"Higresså‚æ•°é…ç½®","url":"/zh-cn/docs/user/configurations#meshconfigå‚æ•°","content":"å‚æ•°\tå‚æ•°è¯´æ˜\té»˜è®¤å€¼higress-core.meshConfig.enablePrometheusMerge\tç”¨äºå¯ç”¨æˆ–ç¦ç”¨å°† Prometheus æŒ‡æ ‡è¿›è¡Œåˆå¹¶çš„é€‰é¡¹ã€‚é€šè¿‡å¯ç”¨å®ƒï¼ŒIstio å°†èƒ½å¤Ÿå°†æ¥è‡ªå¤šä¸ªä»£ç†çš„æŒ‡æ ‡è¿›è¡Œèšåˆå’Œå±•ç¤ºã€‚\ttrue higress-core.meshConfig.rootNamespace\tè¡¨ç¤ºæ ¹å‘½åç©ºé—´ã€‚å¦‚æœæœªæŒ‡å®šï¼Œåˆ™é»˜è®¤ä¸º &quot;istio-system&quot;ã€‚\tnull higress-core.meshConfig.trustDomain\tè¡¨ç¤ºä¿¡ä»»åŸŸã€‚é»˜è®¤ä¸º &quot;cluster.local&quot;ã€‚ä¿¡ä»»åŸŸç”¨äºç¡®å®šæœåŠ¡ä¹‹é—´çš„å®‰å…¨é€šä¿¡ï¼Œå®ƒå°†ç”¨äºç”ŸæˆæœåŠ¡çš„è¯ä¹¦å’Œ JWT Tokenã€‚\tcluster.local ","version":"Next","tagName":"h2"},{"title":"Gatewayå‚æ•°â€‹","type":1,"pageTitle":"Higresså‚æ•°é…ç½®","url":"/zh-cn/docs/user/configurations#gatewayå‚æ•°","content":"å‚æ•°\tå‚æ•°è¯´æ˜\té»˜è®¤å€¼higress-core.gateway.replicas\tHigress Gateway çš„ pod æ•°é‡ã€‚\t2 higress-core.gateway.rbac.enabled\tå¦‚æœå¯ç”¨ï¼Œåˆ™å°†åˆ›å»º roles ä»¥ä¾¿ä» Gateways è®¿é—®è¯ä¹¦ã€‚ä½†åœ¨ä½¿ç”¨ http://gateway-api.org/ æ—¶ï¼Œè¿™ä¸æ˜¯å¿…éœ€çš„\ttrue higress-core.gateway.serviceAccount.create\tæŒ‡å®šæ˜¯å¦åˆ›å»º ServiceAccount, å¦åˆ™ï¼Œä½¿ç”¨é»˜è®¤å€¼ã€‚\ttrue higress-core.gateway.serviceAccount.annotations\tæŒ‡å®šéœ€è¦æ·»åŠ åˆ° ServiceAccount ä¸Šçš„æ³¨é‡Šã€‚\t{} higress-core.gateway.serviceAccount.name\tæŒ‡å®šè¦ä½¿ç”¨çš„ ServiceAccount çš„åç§°ã€‚\t&quot;&quot; higress-core.gateway.env\tæŒ‡å®š Gateway ä½¿ç”¨çš„ç¯å¢ƒå˜é‡ã€‚\t{} higress-core.gateway.hostNetwork\tæŒ‡å®šæ˜¯å¦ä½¿ç”¨å®¿ä¸»æœºç½‘ç»œã€‚\tfalse higress-core.gateway.labels\tæŒ‡å®šåº”ç”¨äºæ‰€æœ‰ gateway èµ„æºçš„æ ‡ç­¾ã€‚\t{} higress-core.gateway.annotations\tæŒ‡å®šè¦åº”ç”¨äºæ‰€æœ‰ gateway èµ„æºçš„æ³¨é‡Šã€‚\t{} higress-core.gateway.podAnnotations.prometheus.io/port\tæŒ‡å®š Prometheus ç›‘æ§çš„ç«¯å£ã€‚\t15020 higress-core.gateway.podAnnotations.prometheus.io/scrape\tæŒ‡ç¤º Prometheus æ˜¯å¦åº”è¯¥ç›‘æ§è¯¥ Pod ã€‚å¦‚æœè¯¥å€¼ä¸º&quot;true&quot;ï¼Œåˆ™ Prometheus å°†ç›‘æ§è¯¥ Pod ï¼›å¦‚æœè¯¥å€¼ä¸º &quot;false&quot; ï¼Œåˆ™ä¸ä¼šç›‘æ§è¯¥ Pod ã€‚\ttrue higress-core.gateway.podAnnotations.prometheus.io/path\tæŒ‡å®š Prometheus ç›‘æ§è¯¥ Pod æ—¶ï¼Œéœ€è¦è®¿é—®çš„ URL è·¯å¾„ã€‚åœ¨è¿™é‡Œè®¾ç½®ä¸º&quot;/stats/prometheus&quot;ã€‚\t/stats/prometheus higress-core.gateway.service.type\tæŒ‡å®š Service çš„ç±»å‹\tLoadBalancer higress-core.gateway.service.loadBalancerIP\tæŒ‡å®š LoadBalancer çš„ IP åœ°å€\t&quot;&quot; higress-core.gateway.service.loadBalancerSourceRanges\tæŒ‡å®š LoadBalancer å…è®¸çš„æº IP èŒƒå›´ã€‚\t[] higress-core.gateway.service.annotations\tæŒ‡å®šè¦åº”ç”¨åˆ° Service ä¸Šçš„æ³¨é‡Šã€‚\t{} higress-core.gateway.service.externalTrafficPolicy\tæŒ‡å®š Service çš„å¤–éƒ¨æµé‡ç­–ç•¥ã€‚\t&quot;&quot; higress-core.gateway.rollingMaxSurge\tæŒ‡å®šæ»šåŠ¨æ›´æ–°æœŸé—´çš„æœ€å¤§æ‰©å®¹æ•°é‡\t100% higress-core.gateway.rollingMaxUnavailable\tæŒ‡å®šæ»šåŠ¨æ›´æ–°æœŸé—´çš„æœ€å¤§ä¸å¯ç”¨æ•°é‡ã€‚\t25% higress-core.gateway.resources.limits.cpu\tæŒ‡å®š gateway å®¹å™¨çš„CPUè¯·æ±‚èµ„æºé™åˆ¶ã€‚\t2000m higress-core.gateway.resources.limits.memory\tæŒ‡å®š gateway å®¹å™¨çš„å†…å­˜è¯·æ±‚èµ„æºé™åˆ¶ã€‚\t2048Mi higress-core.gateway.resources.requests.cpu\tæŒ‡å®š gateway å®¹å™¨çš„CPUè¯·æ±‚èµ„æºã€‚\t2000m higress-core.gateway.resources.requests.memory\tæŒ‡å®š gateway å®¹å™¨çš„å†…å­˜è¯·æ±‚èµ„æºã€‚\t2048Mi higress-core.gateway.autoscaling.enabled\tæŒ‡å®šæ˜¯å¦å¯ç”¨ gateway Pod è‡ªåŠ¨ç¼©æ”¾ã€‚\tfalse higress-core.gateway.autoscaling.minReplicas\tå…è®¸çš„æœ€å°å‰¯æœ¬æ•°ã€‚\t1 higress-core.gateway.autoscaling.maxReplicas\tå…è®¸çš„æœ€å¤§å‰¯æœ¬æ•°ã€‚\t5 higress-core.gateway.autoscaling.targetCPUUtilizationPercentage\tè¡¨ç¤º HPA åº”è¯¥å°è¯•å°† Pod çš„ CPU åˆ©ç”¨ç‡ç»´æŒåœ¨ä»€ä¹ˆæ°´å¹³ã€‚\t80 higress-core.gateway.nodeSelector\tèŠ‚ç‚¹é€‰æ‹©å™¨ï¼Œç”¨äºç¡®å®š gatyway å®¹å™¨å°†éƒ¨ç½²åœ¨å“ªäº›èŠ‚ç‚¹ä¸Šã€‚\t{} higress-core.gateway.tolerations\tå®¹å¿åº¦ï¼Œç”¨äºå…è®¸ gateway å®¹å™¨è°ƒåº¦åˆ°å…·æœ‰æŒ‡å®šæ±¡ç‚¹çš„èŠ‚ç‚¹ã€‚\t[] higress-core.gateway.affinity\täº²å’Œæ€§ï¼Œç”¨äºæ§åˆ¶ gatewayå®¹å™¨å¦‚ä½•è°ƒåº¦ï¼Œä½¿å…¶ä¸å…¶ä»– Pod æˆ–èŠ‚ç‚¹ä¿æŒäº²å’Œæˆ–åäº²å’Œã€‚\t{} higress-core.gateway.networkGateway\tç”¨äºæŒ‡å®šç½‘ç»œç½‘å…³çš„åç§°æˆ– IP åœ°å€ã€‚\t&quot;&quot; ","version":"Next","tagName":"h2"},{"title":"Controllerå‚æ•°â€‹","type":1,"pageTitle":"Higresså‚æ•°é…ç½®","url":"/zh-cn/docs/user/configurations#controllerå‚æ•°","content":"å‚æ•°\tå‚æ•°è¯´æ˜\té»˜è®¤å€¼higress-core.controller.replicas\tHigress Controller çš„ pod æ•°é‡ã€‚\t1 higress-core.controller.env\tæŒ‡å®šå®¹å™¨æ‰€éœ€çš„ä»»ä½•ç¯å¢ƒå˜é‡ã€‚\t{} higress-core.controller.labels\tæŒ‡å®šéƒ¨ç½² controller å®¹å™¨çš„æ ‡ç­¾\t{} higress-core.controller.probe.httpGet.path\tå®¹å™¨çš„å¥åº·æ£€æŸ¥é…ç½®ä¿¡æ¯ï¼Œä½¿ç”¨ HTTP GET è¯·æ±‚æ£€æŸ¥å®¹å™¨çš„ /ready è·¯å¾„\t/ready higress-core.controller.probe.httpGet.port\tæŒ‡å®šå¥åº·æ£€æŸ¥é…ç½®ç«¯å£ã€‚\t8888 higress-core.controller.probe.initialDelaySeconds\tæŒ‡å®šå®¹å™¨å¯åŠ¨åé¦–æ¬¡è¿›è¡Œå¥åº·æ£€æŸ¥çš„å»¶è¿Ÿæ—¶é—´ã€‚\t1 higress-core.controller.probe.periodSeconds\tæŒ‡å®šè¿›è¡Œå¥åº·æ£€æŸ¥çš„æ—¶é—´é—´éš”ã€‚\t3 higress-core.controller.probe.timeoutSeconds\tæŒ‡å®šç­‰å¾…å¥åº·æ£€æŸ¥å“åº”çš„è¶…æ—¶æ—¶é—´\t5 higress-core.controller.imagePullSecrets\tæŒ‡å®šç”¨äºæ‹‰å–å®¹å™¨é•œåƒçš„å¯†é’¥ä¿¡æ¯\t[] higress-core.controller.rbac.create\tå®šä¹‰æ˜¯å¦åº”è¯¥åˆ›å»ºä¸æ­¤éƒ¨ç½²ç›¸å…³çš„ RBAC è§„åˆ™ã€‚\ttrue higress-core.controller.serviceAccount.create\tæŒ‡å®šæ˜¯å¦åº”è¯¥åˆ›å»º serviceAccount ã€‚\ttrue higress-core.controller.serviceAccount.annotations\tæŒ‡å®šè¦æ·»åŠ åˆ° serviceAccount çš„æ³¨é‡Šã€‚\t{} higress-core.controller.serviceAccount.name\tæŒ‡å®šè¦ä½¿ç”¨çš„ serviceAccount çš„åç§°ï¼Œå¦‚æœæœªè®¾ç½®ä¸” create ä¸º true ï¼Œåˆ™ä½¿ç”¨ fullname æ¨¡æ¿ç”Ÿæˆåç§°ã€‚\t&quot;&quot; higress-core.controller.podAnnotations\tæŒ‡å®šè¦æ·»åŠ åˆ° controller å®¹å™¨çš„æ³¨é‡Šã€‚\t{} higress-core.controller.podSecurityContext\tæŒ‡å®š Pod çš„å®‰å…¨ä¸Šä¸‹æ–‡ã€‚\t{} higress-core.controller.service.type\tæŒ‡å®š Service çš„ç±»å‹ä¸º ClusterIPã€‚\tClusterIP higress-core.controller.securityContext\tæŒ‡å®š controller å®¹å™¨çš„å®‰å…¨ä¸Šä¸‹æ–‡ã€‚\t{} higress-core.controller.resources.requests.cpu\tåˆ†é…ç»™ controller çš„ CPU èµ„æºè¯·æ±‚ã€‚\t500m higress-core.controller.resources.requests.memory\tåˆ†é…ç»™ controller çš„å†…å­˜èµ„æºè¯·æ±‚ã€‚\t2048Mi higress-core.controller.resources.limits.cpu\tåˆ†é…ç»™ controller çš„ CPU èµ„æºè¯·æ±‚é™åˆ¶ã€‚\t1000m higress-core.controller.resources.limits.memory\tåˆ†é…ç»™ controller çš„å†…å­˜èµ„æºè¯·æ±‚é™åˆ¶ã€‚\t2048Mi higress-core.controller.nodeSelector\tç”¨äºæŒ‡å®š Pod è°ƒåº¦åˆ°ç‰¹å®šèŠ‚ç‚¹çš„æ ‡ç­¾é€‰æ‹©å™¨\t{} higress-core.controller.tolerations\tç”¨äºæŒ‡å®š Pod çš„å®¹å¿æ€§ï¼Œå³å®¹å¿æŸäº›èŠ‚ç‚¹ä¸Šçš„ç‰¹å®šæ±¡ç‚¹ã€‚\t[] higress-core.controller.affinity\tç”¨äºæŒ‡å®š Pod çš„äº²å’Œæ€§ï¼Œå³å°† Pod è°ƒåº¦åˆ°ç‰¹å®šèŠ‚ç‚¹æˆ–èŠ‚ç‚¹ç»„ã€‚\t{} higress-core.controller.autoscaling.enabled\tæŒ‡å®šæ˜¯å¦å¯ç”¨ Pod çš„è‡ªåŠ¨ç¼©æ”¾ã€‚\tfalse higress-core.controller.autoscaling.minReplicas\tæŒ‡å®šè‡ªåŠ¨ç¼©æ”¾çš„æœ€å° Pod æ•°é‡ã€‚\t1 higress-core.autoscaling.maxReplicas\tæŒ‡å®šè‡ªåŠ¨ç¼©æ”¾çš„æœ€å¤§ Pod æ•°é‡ã€‚\t5 higress-core.autoscaling.targetCPUUtilizationPercentage\tæŒ‡å®šè‡ªåŠ¨ç¼©æ”¾è°ƒæ•´ Pod æ•°é‡çš„ç›®æ ‡ CPU åˆ©ç”¨ç‡ç™¾åˆ†æ¯”ã€‚\t80 ","version":"Next","tagName":"h2"},{"title":"Pilotå‚æ•°â€‹","type":1,"pageTitle":"Higresså‚æ•°é…ç½®","url":"/zh-cn/docs/user/configurations#pilotå‚æ•°","content":"å‚æ•°\tå‚æ•°è¯´æ˜\té»˜è®¤å€¼higress-core.pilot.autoscaleEnabled\tæ˜¯å¦å¯ç”¨ Pilot çš„è‡ªåŠ¨ä¼¸ç¼©ã€‚\tfalse higress-core.pilot.autoscaleMin\tè‡ªåŠ¨ä¼¸ç¼©æ—¶æœ€å°çš„å‰¯æœ¬æ•°ã€‚\t1 higress-core.pilot.autoscaleMax\tè‡ªåŠ¨ä¼¸ç¼©æ—¶æœ€å¤§çš„å‰¯æœ¬æ•°ã€‚\t5 higress-core.pilot.replicaCount\tPilot çš„ pod æ•°é‡ã€‚\t1 higress-core.pilot.rollingMaxSurge\tåœ¨è¿›è¡Œæ»šåŠ¨æ›´æ–°æ—¶ï¼Œå…è®¸åŒæ—¶å¢åŠ çš„ Pod æ•°é‡çš„æœ€å¤§æ¯”ä¾‹ã€‚\t100% higress-core.pilot.rollingMaxUnavailable\tåœ¨è¿›è¡Œæ»šåŠ¨æ›´æ–°æ—¶ï¼Œå…è®¸åŒæ—¶ä¸å¯ç”¨çš„ Pod æ•°é‡çš„æœ€å¤§æ¯”ä¾‹ã€‚\t25% higress-core.pilot.traceSampling\tæŒ‡å®šåº”ç”¨ç¨‹åºçš„è·Ÿè¸ªé‡‡æ ·ç‡ï¼Œè¿™é‡Œæ˜¯1.0ï¼ˆå³100%ï¼‰ã€‚\t1 higress-core.pilot.resources.requests.cpu\tåˆ†é…ç»™ pilot çš„ CPU èµ„æºè¯·æ±‚ã€‚\t500m higress-core.pilot.resources.requests.memory\tåˆ†é…ç»™ pilot çš„å†…å­˜èµ„æºè¯·æ±‚ã€‚\t2048Mi higress-core.pilot.env.PILOT_SCOPE_GATEWAY_TO_NAMESPACE\tå¦‚æœè®¾ç½®ä¸º true ï¼Œåˆ™ä½¿ç½‘å…³åªèƒ½è®¿é—®å…¶æ‰€åœ¨çš„å‘½åç©ºé—´ä¸­çš„æœåŠ¡ã€‚\ttrue higress-core.pilot.env.PILOT_ENABLE_METADATA_EXCHANGE\tå¦‚æœè®¾ç½®ä¸º false ï¼Œåˆ™ç¦ç”¨ä¸ Envoy ä¹‹é—´çš„å…ƒæ•°æ®äº¤æ¢ã€‚\tfalse higress-core.pilot.env.PILOT_ENABLE_CROSS_CLUSTER_WORKLOAD_ENTRY\tå¦‚æœè®¾ç½®ä¸º false ï¼Œåˆ™ç¦ç”¨è·¨é›†ç¾¤å·¥ä½œè´Ÿè½½å…¥å£ã€‚\tfalse higress-core.pilot.env.VALIDATION_ENABLED\tå¦‚æœè®¾ç½®ä¸º false ï¼Œåˆ™ç¦ç”¨å¯¹é…ç½®æ–‡ä»¶çš„éªŒè¯ã€‚\tfalse higress-core.pilot.cpu.targetAverageUtilization\tæŒ‡å®š Pod åº”è¯¥å°è¯•è¾¾åˆ°çš„ CPU åˆ©ç”¨ç‡ç™¾åˆ†æ¯”ï¼Œä»¥ä¾¿è§¦å‘è‡ªåŠ¨ç¼©æ”¾ã€‚ä¾‹å¦‚ï¼Œå¦‚æœè®¾ç½®ä¸º80ï¼Œåˆ™å½“ Pod çš„ CPU åˆ©ç”¨ç‡è¾¾åˆ°80ï¼…æ—¶ï¼Œå°†å¯åŠ¨æ›´å¤šçš„ Pod ä»¥å¤„ç†æ›´å¤šçš„è´Ÿè½½ã€‚\t80 higress-core.pilot.enableProtocolSniffingForOutbound\tæ˜¯å¦åœ¨å‡ºç«™æµé‡ä¸Šå¯ç”¨åè®®å—…æ¢ï¼Œè¿™é‡Œæ˜¯ true ã€‚\ttrue higress-core.pilot.enableProtocolSniffingForInbound\tæ˜¯å¦åœ¨å…¥ç«™æµé‡ä¸Šå¯ç”¨åè®®å—…æ¢ï¼Œè¿™é‡Œæ˜¯ true ã€‚\ttrue higress-core.pilot.nodeSelector\tæŒ‡å®šåº”è¯¥éƒ¨ç½²æ­¤åº”ç”¨ç¨‹åºçš„èŠ‚ç‚¹æ ‡ç­¾ã€‚\t{} higress-core.pilot.podAnnotations\tæŒ‡å®šè¦æ·»åŠ åˆ° Pod çš„æ³¨é‡Šã€‚\t{} higress-core.pilot.serviceAnnotations\tæŒ‡å®šè¦æ·»åŠ åˆ° Service çš„æ³¨é‡Šã€‚\t{} higress-core.pilot.jwksResolverExtraRootCA\tæä¾› PEM æ ¼å¼çš„æ ¹è¯ä¹¦ï¼Œä»¥ä¾¿åœ¨è§£æ JWKS URI æ—¶ç”± pilot ä¿¡ä»»ã€‚\t&quot;&quot; higress-core.pilot.configSource.subscribedResources\tæŒ‡å®šé…ç½®æºçš„æ¥æºï¼Œå¦‚æœæœªæŒ‡å®šï¼Œåˆ™ä½¿ç”¨é»˜è®¤çš„ MCP ã€‚æŒ‡å®šè®¢é˜…çš„ Kubernetes èµ„æºåˆ—è¡¨ã€‚\t[] higress-core.pilot.plugins\tæŒ‡å®šè¦å¯ç”¨çš„æ’ä»¶åˆ—è¡¨ã€‚\t[] higress-core.pilot.keepaliveMaxServerConnectionAge\té™åˆ¶ gateway ä¸ controller è¿æ¥çš„æœ€é•¿æ—¶é—´ã€‚\t30m higress-core.pilot.deploymentLabels\tä¸ºéƒ¨ç½²æ·»åŠ é¢å¤–çš„æ ‡ç­¾ã€‚\t{} higress-core.pilot.configMap\tå®‰è£…ç”±values.yamlç”Ÿæˆçš„ mesh config ï¼Œå¦‚æœä¸º false ï¼Œåˆ™ Pilot å°†ä½¿ç”¨é»˜è®¤å€¼ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼‰æˆ–ç”¨æˆ·æä¾›çš„å€¼ï¼Œå¦‚æœä¸º false ï¼Œåˆ™ Pilot å°†ä½¿ç”¨é»˜è®¤å€¼ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼‰æˆ–ç”¨æˆ·æä¾›çš„å€¼\ttrue higress-core.pilot.podLabels\tä¸º Pod æ·»åŠ é¢å¤–çš„æ ‡ç­¾ï¼Œä»¥ç”¨äºç›‘æ§å’Œæ—¥å¿—è®°å½•é…ç½®ã€‚\t{} ","version":"Next","tagName":"h2"},{"title":"skywalking å‚æ•°â€‹","type":1,"pageTitle":"Higresså‚æ•°é…ç½®","url":"/zh-cn/docs/user/configurations#skywalking-å‚æ•°","content":"å‚æ•°\tå‚æ•°è¯´æ˜\té»˜è®¤å€¼higress-core.skywalking.enabled\tæ˜¯å¦å¯ç”¨ SkyWalking\tfalse higress-core.skywalking.service.address\tSkyWalking æœåŠ¡åœ°å€ï¼Œå¦‚æœä¸æŒ‡å®šåˆ™ä½¿ç”¨é»˜è®¤å€¼\t~ higress-core.skywalking.service.port\tSkyWalking æœåŠ¡ç«¯å£ï¼Œé»˜è®¤ä¸º 11800\t11800 ","version":"Next","tagName":"h2"},{"title":"æ§åˆ¶å°å‚æ•°â€‹","type":1,"pageTitle":"Higresså‚æ•°é…ç½®","url":"/zh-cn/docs/user/configurations#æ§åˆ¶å°å‚æ•°","content":"å‚æ•°\tå‚æ•°è¯´æ˜\té»˜è®¤å€¼higress-console.replicaCount\tHigress Console çš„ pod æ•°é‡\t1 higress-console.dnsPolicy\tæŒ‡å®š DNS ç­–ç•¥ï¼Œè¿™é‡Œä¸º ClusterFirst ã€‚\tClusterFirst higress-console.restartPolicy\tæŒ‡å®šé‡å¯ç­–ç•¥ï¼Œè¿™é‡ŒæŒ‡å®šä¸º Always ã€‚\tAlways higress-console.service.type\tæŒ‡å®šæ§åˆ¶å° service ç±»å‹ã€‚\tClusterIP higress-console.resources.requests.cpu\tåˆ†é…ç»™ console çš„ CPU èµ„æºè¯·æ±‚ã€‚\t250m higress-console.resources.requests.memory\tåˆ†é…ç»™ console çš„å†…å­˜èµ„æºè¯·æ±‚ã€‚\t512Mi higress-console.web.login.prompt\tç™»å½•é¡µé¢ä¸Šæ˜¾ç¤ºçš„æç¤ºä¿¡æ¯ï¼Œé»˜è®¤ä¸ºç©ºã€‚\t&quot;&quot; higress-console.certmanager.enabled\tæŒ‡å®šæ˜¯å¦å¯ç”¨è¯ä¹¦ç®¡ç†å™¨ã€‚\tfalse higress-console.certmanager.replicas\tCertmanage pod çš„æ•°é‡ã€‚\t1 higress-console.o11y.enabled\tè‹¥ä¸º trueï¼Œå°†åŒæ—¶å®‰è£…å¯è§‚æµ‹æ€§å¥—ä»¶ï¼ˆGrafana + Promethuesï¼‰ã€‚\tfalse higress-console.o11y.grafana.replicas\tGrafana pod çš„æ•°é‡ã€‚\t1 higress-console.o11y.grafana.storage\tåˆ†é…ç»™ Grafana çš„å­˜å‚¨ç±»å¤§å°ã€‚\t1Gi higress-console.o11y.grafana.pvc.storageClassName\tGrafana çš„å­˜å‚¨ç±»åç§°ã€‚\t&quot;&quot; higress-console.o11y.prometheus.replicas\tPrometheus pod çš„æ•°é‡ã€‚\t1 higress-console.o11y.prometheus.storage\tåˆ†é…ç»™ prometheus çš„å­˜å‚¨ç±»å¤§å°ã€‚\t1Gi higress-console.o11y.prometheus.pvc.storageClassName\tPrometheus çš„å­˜å‚¨ç±»åç§°ã€‚\t&quot;&quot; higress-console.o11y.prometheus.resources.limits.cpu\tåˆ†é…ç»™ prometheus çš„ CPU èµ„æºé™åˆ¶ã€‚\t500m higress-console.o11y.prometheus.resources.limits.memory\tåˆ†é…ç»™ prometheus çš„å†…å­˜èµ„æºé™åˆ¶ã€‚\t2Gi higress-console.pvc.rwxSupported\tRwxSupported å‚æ•°ç”¨äºæŒ‡ç¤ºæ˜¯å¦æ”¯æŒè¯»å†™å¤šä¸ª Podï¼Œå³æ˜¯å¦æ”¯æŒå…±äº«å·ã€‚å¦‚æœè¯¥å‚æ•°è®¾ç½®ä¸º trueï¼Œåˆ™è¡¨æ˜æ”¯æŒå…±äº«å·ï¼Œå¤šä¸ª Pod å¯ä»¥åŒæ—¶æŒ‚è½½è¯¥ PVCï¼Œè¿›è¡Œè¯»å†™æ“ä½œã€‚å¦‚æœè®¾ç½®ä¸º falseï¼Œåˆ™è¡¨æ˜ä¸æ”¯æŒå…±äº«å·ï¼Œåªæœ‰ä¸€ä¸ª Pod å¯ä»¥æŒ‚è½½è¯¥ PVC è¿›è¡Œè¯»å†™æ“ä½œã€‚\ttrue ","version":"Next","tagName":"h2"},{"title":"HTTPè½¬Dubbo é…ç½®è¯´æ˜","type":0,"sectionRef":"#","url":"/zh-cn/docs/user/dubbo-http2rpc","content":"","keywords":"Dubbo discovery","version":"Next"},{"title":"spec.dubboâ€‹","type":1,"pageTitle":"HTTPè½¬Dubbo é…ç½®è¯´æ˜","url":"/zh-cn/docs/user/dubbo-http2rpc#specdubbo","content":"å­—æ®µ\tç±»å‹\tè¯´æ˜\tservice\tthe dubbo interface name\tdubboæœåŠ¡æ¥å£å\tä¾‹å¦‚ï¼š&quot;com.alibaba.nacos.example.dubbo.service.DemoService&quot; version\tthe dubbo service version\tdubboæœåŠ¡ç‰ˆæœ¬å·\tä¾‹å¦‚ï¼š&quot;1.0.0&quot; group\tthe dubbo service group\tdubboæœåŠ¡åˆ†ç»„\tä¾‹ï¼š&quot;dev&quot; methods\tlist of spec.dubbo.methods\tæ¯ä¸€é¡¹å¯¹åº”äº†ä¸€æ¡æ–¹æ³•æ˜ å°„è§„åˆ™\t ","version":"Next","tagName":"h3"},{"title":"spec.dubbo.methodsâ€‹","type":1,"pageTitle":"HTTPè½¬Dubbo é…ç½®è¯´æ˜","url":"/zh-cn/docs/user/dubbo-http2rpc#specdubbomethods","content":"å­—æ®µ\tç±»å‹\tè¯´æ˜\tserviceMethod\tstring\tdubboæœåŠ¡æ¥å£çš„æ–¹æ³•å\tä¾‹ï¼š&quot;sayName&quot; headersAttach\tstring\téœ€è¦é€ä¼ çš„http headers\t1ã€ç©º: ä¸è®¾ç½®è¡¨ç¤ºä¸é€ä¼ ä»»ä½•å€¼; 2ã€*: è¡¨ç¤ºé€ä¼ æ‰€æœ‰headers; 3ã€ç”¨è‹±æ–‡é€—å·éš”å¼€éœ€è¦é€å‡ºçš„headers key: header-A,header-B,header-C, httpPath\tstring\tæŒ‡å®šç»‘å®šserviceMethodçš„http-path\tä¾‹ï¼š&quot;/dubbo/hello&quot; httpMethods\tlist of HTTP_METHOD_TYPE\thttp-pathçš„è¯·æ±‚æ–¹å¼\tä¾‹ï¼š&quot;POST&quot; params\tlist of spec.dubbo.methods.params\tæŒ‡å®šå‚æ•°æå–æ–¹å¼ paramFromEntireBody\tParamFromEntireBody\tæŒ‡å®šå°†æ•´ä¸ªè¯·æ±‚bodyä½œä¸ºå‚æ•°ï¼Œå¦‚æœåŒæ—¶é…ç½®äº†paramFromEntireBodyå’Œparamsï¼Œparamså­—æ®µçš„å†…å®¹å°†è¢«å¿½ç•¥\t ","version":"Next","tagName":"h3"},{"title":"spec.dubbo.methods.paramsâ€‹","type":1,"pageTitle":"HTTPè½¬Dubbo é…ç½®è¯´æ˜","url":"/zh-cn/docs/user/dubbo-http2rpc#specdubbomethodsparams","content":"å­—æ®µ\tç±»å‹\tè¯´æ˜\tparamKey\tstring\tå‚æ•°åç§°\tä¾‹ï¼š&quot;p&quot; paramSource\tPARAM_SOURCE_TYPE\tå‚æ•°æ¥æº\t&quot;QUERY&quot; paramType\tstring\tDubboæ–¹æ³•å…¥å‚çš„å‚æ•°ç±»å‹\t&quot;java.lang.String&quot; ","version":"Next","tagName":"h3"},{"title":"spec.dubbo.methods.paramFromEntireBodyâ€‹","type":1,"pageTitle":"HTTPè½¬Dubbo é…ç½®è¯´æ˜","url":"/zh-cn/docs/user/dubbo-http2rpc#specdubbomethodsparamfromentirebody","content":"å­—æ®µ\tç±»å‹\tè¯´æ˜\tparamType\tstring\tDubboæ–¹æ³•å…¥å‚çš„å‚æ•°ç±»å‹\t&quot;java.lang.String&quot; ","version":"Next","tagName":"h3"},{"title":"HTTP_METHOD_TYPEâ€‹","type":1,"pageTitle":"HTTPè½¬Dubbo é…ç½®è¯´æ˜","url":"/zh-cn/docs/user/dubbo-http2rpc#http_method_type","content":"å€¼\tè¯´æ˜GET\thttp GET method POST\thttp POST method PUT\thttp PUT method DELETE\thttp DELETE method PATCH\thttp PATCH method ","version":"Next","tagName":"h3"},{"title":"PARAM_SOURCE_TYPEâ€‹","type":1,"pageTitle":"HTTPè½¬Dubbo é…ç½®è¯´æ˜","url":"/zh-cn/docs/user/dubbo-http2rpc#param_source_type","content":"å€¼\tè¯´æ˜QUERY\thttp url param HEADER\thttp header PATH\thttp url path BODY\thttp request body ","version":"Next","tagName":"h3"},{"title":"Higress å¯¹æ¥ Dubbo æœåŠ¡","type":0,"sectionRef":"#","url":"/zh-cn/docs/user/dubbo","content":"","keywords":"Dubbo discovery","version":"Next"},{"title":"å‰ææ¡ä»¶â€‹","type":1,"pageTitle":"Higress å¯¹æ¥ Dubbo æœåŠ¡","url":"/zh-cn/docs/user/dubbo#å‰ææ¡ä»¶","content":"Higressç›®å‰æ”¯æŒçš„Dubboæ¡†æ¶çš„ç‰ˆæœ¬ä¸º2.xã€‚è‹¥æ‚¨ä½¿ç”¨Dubbo3.0ï¼Œè¦æ±‚ä½¿ç”¨dubboåè®®ï¼ˆç›®å‰æš‚ä¸æ”¯æŒTripleåè®®ã€‚Tripleåè®®åº•å±‚åŸºäºgRPCï¼Œå¯ä»¥ç›´æ¥ä»£ç†ï¼Œæ— éœ€åšåè®®è½¬åŒ–ï¼‰ã€‚ ","version":"Next","tagName":"h2"},{"title":"éƒ¨ç½²DubboæœåŠ¡â€‹","type":1,"pageTitle":"Higress å¯¹æ¥ Dubbo æœåŠ¡","url":"/zh-cn/docs/user/dubbo#éƒ¨ç½²dubboæœåŠ¡","content":"æ‚¨å¯ä»¥é€‰ç”¨Naocsæˆ–è€…Zookeeperä»»æ„ä¸€ç§ä½œä¸ºæ³¨å†Œä¸­å¿ƒï¼Œéƒ¨ç½²ä¸€ä¸ªDubboæœåŠ¡ã€‚å…·ä½“å¯ä»¥å‚è€ƒä»¥ä¸‹æ–‡æ¡£ï¼š https://cn.dubbo.apache.org/zh-cn/overview/what/ecosystem/registry/nacos/ https://cn.dubbo.apache.org/zh-cn/overview/what/ecosystem/registry/zookeeper/ å‡è®¾æˆ‘ä»¬ç°åœ¨å·²ç»éƒ¨ç½²äº†å¦‚ä¸‹ä¸€ä¸ªDubboæœåŠ¡ï¼Œå…¶æœåŠ¡åä¸ºcom.alibaba.nacos.example.dubbo.service.DemoServiceï¼Œå¹¶æŒ‡å®šäº†è¯¥æœåŠ¡çš„versionä¸ºâ€œ1.0.0â€ï¼Œgroupä¸ºâ€œdevâ€ï¼Œä¸‹é¢æˆ‘ä»¬å°†ä»‹ç»å¦‚ä½•ä¸ºè¯¥æœåŠ¡é…ç½®åè®®è½¬æ¢ã€‚ package com.alibaba.nacos.example.dubbo.service; public interface DemoService { String sayName(String name); }  ","version":"Next","tagName":"h2"},{"title":"é€šè¿‡Ingressè½¬å‘è¯·æ±‚åˆ°DubboæœåŠ¡â€‹","type":1,"pageTitle":"Higress å¯¹æ¥ Dubbo æœåŠ¡","url":"/zh-cn/docs/user/dubbo#é€šè¿‡ingressè½¬å‘è¯·æ±‚åˆ°dubboæœåŠ¡","content":"Higresså¯ä»¥é€šè¿‡McpBridgeæ¥å¯¹æ¥Nacosæˆ–è€…Zookeeperä½œä¸ºæœåŠ¡æ¥æºã€‚è¿™é‡Œæˆ‘ä»¬ä»¥Nacosä¸ºä¾‹ï¼Œå‡è®¾Naocsçš„ipåœ°å€ä¸º192.xxx.xx.32ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨K8sé›†ç¾¤ä¸­applyä»¥ä¸‹èµ„æºæ¥é…ç½®McpBridge apiVersion: networking.higress.io/v1 kind: McpBridge metadata: name: default namespace: higress-system spec: registries: - domain: 192.xxx.xx.32 nacosGroups: - DEFAULT_GROUP name: nacos-service-resource port: 8848 type: nacos2  é€šè¿‡McpBridgeï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä»Nacosä¸­å‘ç°DubboæœåŠ¡ï¼Œå¹¶ä¸ºå…¶åˆ›å»ºè·¯ç”±ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬åˆ›å»ºå¦‚ä¸‹Ingressï¼Œä»è€Œåˆ›å»ºä¸€æ¡æŒ‡å‘DubboæœåŠ¡çš„HTTPè·¯ç”±ï¼š apiVersion: networking.k8s.io/v1 kind: Ingress metadata: annotations: higress.io/destination: providers:com.alibaba.nacos.example.dubbo.service.DemoService:1.0.0:dev.DEFAULT-GROUP.public.nacos higress.io/rpc-destination-name: httproute-http2rpc-demo name: httproute-http2rpc-demo-ingress namespace: higress-system spec: ingressClassName: higress rules: - http: paths: - backend: resource: apiGroup: networking.higress.io kind: McpBridge name: default path: /dubbo pathType: Prefix  è¿™æ ·ï¼Œpathå‰ç¼€ä¸º/dubboçš„è¯·æ±‚å°±ä¼šè¢«è·¯ç”±åˆ°æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„DubboæœåŠ¡ä¸Šã€‚ ","version":"Next","tagName":"h2"},{"title":"é€šè¿‡Higressè‡ªå®šä¹‰çš„CRD-Http2Rpcé…ç½®HTTPåˆ°Dubboçš„åè®®è½¬æ¢è§„åˆ™â€‹","type":1,"pageTitle":"Higress å¯¹æ¥ Dubbo æœåŠ¡","url":"/zh-cn/docs/user/dubbo#é€šè¿‡higressè‡ªå®šä¹‰çš„crd-http2rpcé…ç½®httpåˆ°dubboçš„åè®®è½¬æ¢è§„åˆ™","content":"ç»è¿‡ä¸Šè¿°æ­¥éª¤ï¼Œæˆ‘ä»¬å·²ç»é€šè¿‡Ingresså°†pathå‰ç¼€ä¸º/dubboçš„è¯·æ±‚è·¯ç”±åˆ°æˆ‘ä»¬çš„DubboæœåŠ¡ä¸Šã€‚ä½†å…‰æ˜¯è¿™æ ·æ˜¯æ— æ³•æ­£å¸¸é€šä¿¡çš„ï¼Œå› ä¸ºDubboæœåŠ¡ä½¿ç”¨çš„æ˜¯å®šåˆ¶çš„Dubboåè®®ï¼Œæ— æ³•å¤©ç„¶ä¸HTTPåè®®è¿›è¡Œå…¼å®¹ã€‚å› æ­¤æ¥ä¸‹æ¥æˆ‘ä»¬è¿˜è¦é…ç½®å…·ä½“çš„HTTPåˆ°Dubboçš„åè®®è½¬æ¢è§„åˆ™ï¼Œä»è€Œå®ç°ç”¨HTTPè¯·æ±‚æ¥è°ƒç”¨DubboæœåŠ¡ã€‚ apiVersion: networking.higress.io/v1 kind: Http2Rpc metadata: name: httproute-http2rpc-demo namespace: higress-system spec: dubbo: service: com.alibaba.nacos.example.dubbo.service.DemoService version: 1.0.0 group: dev methods: - serviceMethod: sayName headersAttach: &quot;*&quot; httpMethods: - &quot;GET&quot; httpPath: &quot;/dubbo/hello&quot; params: - paramKey: p paramSource: QUERY paramType: &quot;java.lang.String&quot;  åœ¨ä»¥ä¸ŠHttp2Rpcä¸­ï¼Œæˆ‘ä»¬é…ç½®äº†å°†pathä¸º/dubbo/helloçš„HTTPè¯·æ±‚è½¬å‘åˆ°DubboæœåŠ¡com.alibaba.nacos.example.dubbo.service.DemoService:1.0.0:devä¸­ï¼Œå¹¶è°ƒç”¨å…¶sayNameæ–¹æ³•ï¼Œè€Œè¯¥æ–¹æ³•çš„å‚æ•°åˆ™é€šè¿‡HTTP urlä¸­çš„çš„queryå‚æ•°pæ¥æŒ‡å®šã€‚ ","version":"Next","tagName":"h2"},{"title":"è¯·æ±‚éªŒè¯â€‹","type":1,"pageTitle":"Higress å¯¹æ¥ Dubbo æœåŠ¡","url":"/zh-cn/docs/user/dubbo#è¯·æ±‚éªŒè¯","content":"é€šè¿‡ä»¥ä¸Šé…ç½®ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ‰§è¡Œä»¥ä¸‹curlå‘½ä»¤æ¥è°ƒç”¨è¿™ä¸ªdubboæœåŠ¡äº†ï¼š $curl &quot;localhost/dubbo/hello?p=abc&quot; {&quot;result&quot;:&quot;Service [name :demoService , port : 20880] sayName(\\&quot;abc\\&quot;) : Hello,abc&quot;}  ","version":"Next","tagName":"h2"},{"title":"å°†æ•´ä¸ªè¯·æ±‚bodyä½œä¸ºæ–¹æ³•å‚æ•°â€‹","type":1,"pageTitle":"Higress å¯¹æ¥ Dubbo æœåŠ¡","url":"/zh-cn/docs/user/dubbo#å°†æ•´ä¸ªè¯·æ±‚bodyä½œä¸ºæ–¹æ³•å‚æ•°","content":"Http2Rpcæ”¯æŒå°†æ•´ä¸ªè¯·æ±‚bodyåºåˆ—åŒ–ä¸ºDubboæ–¹æ³•çš„å…¥å‚ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š apiVersion: networking.higress.io/v1 kind: Http2Rpc metadata: name: httproute-http2rpc-demo namespace: higress-system spec: dubbo: service: com.alibaba.nacos.example.dubbo.service.DemoService version: 1.0.0 group: dev methods: - serviceMethod: sayName headersAttach: &quot;*&quot; httpMethods: - &quot;POST&quot; httpPath: &quot;/dubbo/hello&quot; paramFromEntireBody: paramType: &quot;java.lang.String&quot;  é€šè¿‡paramFromEntireBodyå­—æ®µï¼Œå³å¯å°†æ•´ä¸ªè¯·æ±‚bodyåºåˆ—åŒ–ä¸ºDubboæ–¹æ³•çš„å…¥å‚ã€‚å‚æ•°çš„ç±»å‹é€šè¿‡paramFromEntireBody.paramTypeå­—æ®µæ¥æŒ‡å®šã€‚è¯¥åœºæ™¯é€‚ç”¨äºDubboæ–¹æ³•åªæœ‰ä¸€ä¸ªå‚æ•°çš„æƒ…å†µï¼Œå¦‚æœåŒæ—¶æŒ‡å®šäº†paramFromEntireBodyå’Œparamsï¼Œparamså­—æ®µçš„å†…å®¹å°†è¢«å¿½ç•¥ã€‚ é€šè¿‡ä»¥ä¸Šé…ç½®ï¼Œæˆ‘ä»¬å¯ä»¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥è°ƒç”¨dubboæœåŠ¡ï¼Œæ³¨æ„è¯·æ±‚çš„bodyå¿…é¡»ç¬¦åˆjsonæ ¼å¼ï¼š $curl &quot;localhost/dubbo/hello&quot; -X POST -d '&quot;abc&quot;' {&quot;result&quot;:&quot;Service [name :demoService , port : 20880] sayName(\\&quot;abc\\&quot;) : Hello,abc&quot;}  ","version":"Next","tagName":"h2"},{"title":"é…ç½®å‚è€ƒâ€‹","type":1,"pageTitle":"Higress å¯¹æ¥ Dubbo æœåŠ¡","url":"/zh-cn/docs/user/dubbo#é…ç½®å‚è€ƒ","content":"Http2Rpcçš„ç›¸å…³é…ç½®é¡¹å‚è€ƒHTTPè½¬Dubboé…ç½®è¯´æ˜ ","version":"Next","tagName":"h2"},{"title":"é€šè¿‡Ingress Annotationå®ç°é«˜é˜¶æµé‡æ²»ç†","type":0,"sectionRef":"#","url":"/zh-cn/docs/user/annotation-use-case","content":"","keywords":"Ingress Annotation","version":"Next"},{"title":"å‰ææ¡ä»¶â€‹","type":1,"pageTitle":"é€šè¿‡Ingress Annotationå®ç°é«˜é˜¶æµé‡æ²»ç†","url":"/zh-cn/docs/user/annotation-use-case#å‰ææ¡ä»¶","content":"å®‰è£…Higresså·²æ‹¥æœ‰ä¸€ä¸ªKubernetesé›†ç¾¤ï¼Œä¸”é…ç½®äº†kubectlå‘½ä»¤è¡Œå·¥å…· ","version":"Next","tagName":"h2"},{"title":"ç°åº¦å‘å¸ƒâ€‹","type":1,"pageTitle":"é€šè¿‡Ingress Annotationå®ç°é«˜é˜¶æµé‡æ²»ç†","url":"/zh-cn/docs/user/annotation-use-case#ç°åº¦å‘å¸ƒ","content":"Higressæä¾›å¤æ‚çš„è·¯ç”±å¤„ç†èƒ½åŠ›ï¼Œæ”¯æŒåŸºäºHeaderã€Cookieä»¥åŠæƒé‡çš„ç°åº¦å‘å¸ƒåŠŸèƒ½ã€‚ç°åº¦å‘å¸ƒåŠŸèƒ½å¯ä»¥é€šè¿‡è®¾ç½®æ³¨è§£æ¥å®ç°ï¼Œä¸ºäº†å¯ç”¨ç°åº¦å‘å¸ƒåŠŸèƒ½ï¼Œéœ€è¦è®¾ç½®æ³¨è§£higress.io/canary: &quot;true&quot;ã€‚é€šè¿‡ä¸åŒæ³¨è§£å¯ä»¥å®ç°ä¸åŒçš„ç°åº¦å‘å¸ƒåŠŸèƒ½ã€‚ è¯´æ˜ï¼šå½“å¤šç§æ–¹å¼åŒæ—¶é…ç½®æ—¶ï¼Œç°åº¦æ–¹å¼é€‰æ‹©ä¼˜å…ˆçº§ä¸ºï¼šåŸºäºHeader &gt; åŸºäºCookie &gt; åŸºäºæƒé‡ï¼ˆä»é«˜åˆ°ä½ï¼‰ã€‚ ","version":"Next","tagName":"h2"},{"title":"åŸºäºHeaderç°åº¦å‘å¸ƒâ€‹","type":1,"pageTitle":"é€šè¿‡Ingress Annotationå®ç°é«˜é˜¶æµé‡æ²»ç†","url":"/zh-cn/docs/user/annotation-use-case#åŸºäºheaderç°åº¦å‘å¸ƒ","content":"åªé…ç½®higress.io/canary-by-headerï¼šåŸºäºRequest Headerçš„åç§°è¿›è¡Œæµé‡åˆ‡åˆ†ã€‚å½“è¯·æ±‚åŒ…å«è¯¥Headerå¹¶å…¶å€¼ä¸ºalwaysæ—¶ï¼Œè¯·æ±‚æµé‡ä¼šè¢«åˆ†é…åˆ°ç°åº¦æœåŠ¡å…¥å£ï¼›å…¶ä»–æƒ…å†µæ—¶ï¼Œè¯·æ±‚æµé‡ä¸ä¼šåˆ†é…åˆ°ç°åº¦æœåŠ¡ã€‚åŒæ—¶é…ç½®higress.io/canary-by-headerå’Œhigress.io/canary-by-header-valueï¼šåŸºäºRequest Headerçš„åç§°å’Œå€¼è¿›è¡Œæµé‡åˆ‡åˆ†ã€‚å½“è¯·æ±‚ä¸­çš„headerçš„åç§°å’Œheaderçš„å€¼ä¸è¯¥é…ç½®åŒ¹é…æ—¶ï¼Œè¯·æ±‚æµé‡ä¼šè¢«åˆ†é…åˆ°ç°åº¦æœåŠ¡ï¼›å…¶ä»–æƒ…å†µæ—¶ï¼Œè¯·æ±‚æµé‡ä¸ä¼šåˆ†é…åˆ°ç°åº¦æœåŠ¡ã€‚ Higressç°åº¦å‘å¸ƒæ—¶æ”¯æŒå¤šä¸ªç‰ˆæœ¬æœåŠ¡ï¼ˆæ— ä¸Šé™ï¼‰ã€‚ è¯·æ±‚Headerä¸ºhigressï¼šalwaysæ—¶å°†è®¿é—®ç°åº¦æœåŠ¡demo-service-canaryï¼›å…¶ä»–æƒ…å†µå°†è®¿é—®æ­£å¼æœåŠ¡demo-serviceï¼Œé…ç½®å¦‚ä¸‹ï¼š apiVersion: networking.k8s.io/v1 kind: Ingress metadata: annotations: higress.io/canary: &quot;true&quot; higress.io/canary-by-header: &quot;higress&quot; name: demo-canary spec: ingressClassName: higress rules: - http: paths: - backend: service: name: demo-service-canary port: number: 80 path: /hello pathType: Exact --- apiVersion: networking.k8s.io/v1 kind: Ingress metadata: name: demo spec: ingressClassName: higress rules: - http: paths: - backend: service: name: demo-service port: number: 80 path: /hello pathType: Exact  è¯·æ±‚Headerä¸ºhigressï¼šv1æ—¶å°†è®¿é—®ç°åº¦æœåŠ¡demo-service-canary-v1ï¼›è¯·æ±‚Headerä¸ºhigressï¼šv2æ—¶å°†è®¿é—®ç°åº¦æœåŠ¡demo-service-canary-v2ï¼›å…¶ä»–æƒ…å†µå°†è®¿é—®æ­£å¼æœåŠ¡demo-serviceï¼Œé…ç½®å¦‚ä¸‹ï¼š apiVersion: networking.k8s.io/v1 kind: Ingress metadata: annotations: higress.io/canary: &quot;true&quot; higress.io/canary-by-header: &quot;higress&quot; higress.io/canary-by-header-value: &quot;v1&quot; name: demo-canary-v1 spec: ingressClassName: higress rules: - http: paths: - backend: service: name: demo-service-canary-v1 port: number: 80 path: /hello pathType: Exact --- apiVersion: networking.k8s.io/v1 kind: Ingress metadata: annotations: higress.io/canary: &quot;true&quot; higress.io/canary-by-header: &quot;higress&quot; higress.io/canary-by-header-value: &quot;v2&quot; name: demo-canary-v2 spec: ingressClassName: higress rules: - http: paths: - backend: service: name: demo-service-canary-v2 port: number: 80 path: /hello pathType: Exact --- apiVersion: networking.k8s.io/v1 kind: Ingress metadata: name: demo spec: ingressClassName: higress rules: - http: paths: - backend: service: name: demo-service port: number: 80 path: /hello pathType: Exact  ","version":"Next","tagName":"h3"},{"title":"åŸºäºCookieç°åº¦å‘å¸ƒâ€‹","type":1,"pageTitle":"é€šè¿‡Ingress Annotationå®ç°é«˜é˜¶æµé‡æ²»ç†","url":"/zh-cn/docs/user/annotation-use-case#åŸºäºcookieç°åº¦å‘å¸ƒ","content":"higress.io/canary-by-cookieï¼šåŸºäºCookieçš„Keyè¿›è¡Œæµé‡åˆ‡åˆ†ã€‚å½“è¯·æ±‚çš„Cookieä¸­å«æœ‰è¯¥Keyä¸”å…¶å€¼ä¸ºalwaysæ—¶ï¼Œè¯·æ±‚æµé‡å°†è¢«åˆ†é…åˆ°ç°åº¦æœåŠ¡ï¼›å…¶ä»–æƒ…å†µæ—¶ï¼Œè¯·æ±‚æµé‡å°†ä¸ä¼šåˆ†é…åˆ°ç°åº¦æœåŠ¡ã€‚ è¯´æ˜ï¼šåŸºäºCookieçš„ç°åº¦å‘å¸ƒä¸æ”¯æŒè‡ªå®šä¹‰è®¾ç½®Keyå¯¹åº”çš„å€¼ï¼Œåªèƒ½æ˜¯alwaysã€‚ è¯·æ±‚çš„Cookieä¸ºdemo=alwaysæ—¶å°†è®¿é—®ç°åº¦æœåŠ¡demo-service-canaryï¼›å…¶ä»–æƒ…å†µå°†è®¿é—®æ­£å¼æœåŠ¡demo-serviceã€‚é…ç½®å¦‚ä¸‹ï¼š apiVersion: networking.k8s.io/v1 kind: Ingress metadata: annotations: higress.io/canary: &quot;true&quot; higress.io/canary-by-cookie: &quot;demo&quot; name: demo-canary spec: ingressClassName: higress rules: - http: paths: - backend: service: name: demo-service-canary port: number: 80 path: /hello pathType: Exact --- apiVersion: networking.k8s.io/v1 kind: Ingress metadata: name: demo spec: ingressClassName: higress rules: - http: paths: - backend: service: name: demo-service port: number: 80 path: /hello pathType: Exact  ","version":"Next","tagName":"h3"},{"title":"åŸºäºæƒé‡ç°åº¦å‘å¸ƒâ€‹","type":1,"pageTitle":"é€šè¿‡Ingress Annotationå®ç°é«˜é˜¶æµé‡æ²»ç†","url":"/zh-cn/docs/user/annotation-use-case#åŸºäºæƒé‡ç°åº¦å‘å¸ƒ","content":"higress.io/canary-weightï¼šè®¾ç½®è¯·æ±‚åˆ°æŒ‡å®šæœåŠ¡çš„ç™¾åˆ†æ¯”ï¼ˆå€¼ä¸º0~100çš„æ•´æ•°ï¼‰higress.io/canary-weight-totalï¼šè®¾ç½®æƒé‡æ€»å’Œï¼Œé»˜è®¤ä¸º100 é…ç½®ç°åº¦æœåŠ¡demo-service-canary-v1çš„æƒé‡ä¸º30%ï¼Œé…ç½®ç°åº¦æœåŠ¡demo-service-canary-v2çš„æƒé‡ä¸º20%ï¼Œé…ç½®æ­£å¼æœåŠ¡demo-serviceçš„æƒé‡ä¸º50%ã€‚ apiVersion: networking.k8s.io/v1 kind: Ingress metadata: annotations: higress.io/canary: &quot;true&quot; higress.io/canary-weight: &quot;30&quot; name: demo-canary-v1 spec: ingressClassName: higress rules: - http: paths: - backend: service: name: demo-service-canary-v1 port: number: 80 path: /hello pathType: Exact --- apiVersion: networking.k8s.io/v1 kind: Ingress metadata: annotations: higress.io/canary: &quot;true&quot; higress.io/canary-weight: &quot;20&quot; name: demo-canary-v2 spec: ingressClassName: higress rules: - http: paths: - backend: service: name: demo-service-canary-v2 port: number: 80 path: /hello pathType: Exact --- apiVersion: networking.k8s.io/v1 kind: Ingress metadata: name: demo spec: ingressClassName: higress rules: - http: paths: - backend: service: name: demo-service port: number: 80 path: /hello pathType: Exact  ","version":"Next","tagName":"h3"},{"title":"è·¨åŸŸâ€‹","type":1,"pageTitle":"é€šè¿‡Ingress Annotationå®ç°é«˜é˜¶æµé‡æ²»ç†","url":"/zh-cn/docs/user/annotation-use-case#è·¨åŸŸ","content":"è·¨åŸŸèµ„æºå…±äº«CORSï¼ˆCross-Origin Resource Sharingï¼‰æ˜¯æŒ‡å…è®¸Webåº”ç”¨æœåŠ¡å™¨è¿›è¡Œè·¨åŸŸè®¿é—®æ§åˆ¶ï¼Œä»è€Œå®ç°è·¨åŸŸæ•°æ®å®‰å…¨ä¼ è¾“ã€‚ higress.io/enable-corsï¼š&quot;true&quot; or &quot;false&quot;ã€‚å¼€å¯æˆ–å…³é—­è·¨åŸŸã€‚higress.io/cors-allow-originï¼šå…è®¸çš„ç¬¬ä¸‰æ–¹ç«™ç‚¹ï¼Œæ”¯æŒæ³›åŸŸåï¼Œé€—å·åˆ†éš”ï¼›æ”¯æŒé€šé…ç¬¦ã€‚é»˜è®¤å€¼ä¸ºï¼Œå³å…è®¸æ‰€æœ‰ç¬¬ä¸‰æ–¹ç«™ç‚¹ã€‚higress.io/cors-allow-methodsï¼šå…è®¸çš„è¯·æ±‚æ–¹æ³•ï¼Œå¦‚GETã€POSTï¼Œé€—å·åˆ†éš”ï¼›æ”¯æŒé€šé…ç¬¦*ã€‚é»˜è®¤å€¼ä¸ºGET, PUT, POST, DELETE, PATCH, OPTIONSã€‚higress.io/cors-allow-headersï¼šå…è®¸çš„è¯·æ±‚å¤´éƒ¨ï¼Œé€—å·åˆ†éš”ï¼›æ”¯æŒé€šé…ç¬¦*ã€‚é»˜è®¤å€¼ä¸ºDNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Authorizationã€‚higress.io/cors-expose-headersï¼šå…è®¸çš„å“åº”å¤´éƒ¨ï¼Œé€—å·åˆ†éš”ã€‚higress.io/cors-allow-credentialsï¼š&quot;true&quot; or &quot;false&quot;ã€‚æ˜¯å¦å…è®¸æºå¸¦å‡­è¯ä¿¡æ¯ã€‚é»˜è®¤å…è®¸ã€‚higress.io/cors-max-ageï¼šé¢„æ£€ç»“æœçš„æœ€å¤§ç¼“å­˜æ—¶é—´ï¼Œå•ä½ä¸ºç§’ï¼›é»˜è®¤å€¼ä¸º1728000ã€‚ è·¨åŸŸè¯·æ±‚è¢«é™åˆ¶ä¸ºåªèƒ½æ¥è‡ªexample.comåŸŸçš„è¯·æ±‚ï¼Œå¹¶ä¸”HTTPæ–¹æ³•åªèƒ½æ˜¯GETå’ŒPOSTï¼Œå…è®¸çš„è¯·æ±‚å¤´éƒ¨ä¸ºX-Foo-Barï¼Œä¸å…è®¸æºå¸¦å‡­è¯ä¿¡æ¯ã€‚ apiVersion: networking.k8s.io/v1 kind: Ingress metadata: annotations: higress.io/enable-cors: &quot;true&quot; higress.io/cors-allow-origin: &quot;example.com&quot; higress.io/cors-allow-methods: &quot;GET,POST&quot; higress.io/cors-allow-headers: &quot;X-Foo-Bar&quot; higress.io/cors-allow-credentials: &quot;false&quot; name: demo spec: ingressClassName: higress rules: - http: paths: - backend: service: name: demo-service port: number: 80 path: /hello pathType: Exact  ","version":"Next","tagName":"h2"},{"title":"Rewriteé‡å†™Pathå’ŒHostâ€‹","type":1,"pageTitle":"é€šè¿‡Ingress Annotationå®ç°é«˜é˜¶æµé‡æ²»ç†","url":"/zh-cn/docs/user/annotation-use-case#rewriteé‡å†™pathå’Œhost","content":"åœ¨è¯·æ±‚è½¬å‘ç»™ç›®æ ‡åç«¯æœåŠ¡ä¹‹å‰ï¼Œé‡å†™å¯ä»¥ä¿®æ”¹åŸå§‹è¯·æ±‚çš„è·¯å¾„ï¼ˆPathï¼‰å’Œä¸»æœºåŸŸï¼ˆHost)ã€‚ higress.io/rewrite-targetï¼šé‡å†™Pathï¼Œæ”¯æŒæ•è·ç»„ï¼ˆCapture Group)ã€‚higress.io/upstream-vhostï¼šé‡å†™Hostã€‚ ","version":"Next","tagName":"h2"},{"title":"Rewriteé‡å†™Pathâ€‹","type":1,"pageTitle":"é€šè¿‡Ingress Annotationå®ç°é«˜é˜¶æµé‡æ²»ç†","url":"/zh-cn/docs/user/annotation-use-case#rewriteé‡å†™path","content":"å°†è¯·æ±‚example.com/teståœ¨è½¬å‘è‡³åç«¯æœåŠ¡ä¹‹å‰ï¼Œé‡å†™ä¸ºexample.com/dev apiVersion: networking.k8s.io/v1 kind: Ingress metadata: annotations: higress.io/rewrite-target: &quot;/dev&quot; name: demo spec: ingressClassName: higress rules: - host: example.com http: paths: - backend: service: name: demo-service port: number: 80 path: /test pathType: Exact  å°†è¯·æ±‚example.com/v1/appåœ¨è½¬å‘è‡³åç«¯æœåŠ¡ä¹‹å‰ï¼Œå»æ‰Pathå‰ç¼€/v1 apiVersion: networking.k8s.io/v1 kind: Ingress metadata: annotations: higress.io/rewrite-target: &quot;/$2&quot; name: demo spec: ingressClassName: higress rules: - host: example.com http: paths: - backend: service: name: demo-service port: number: 80 path: /v1(/|$)(.*) pathType: ImplementationSpecific  å°†è¯·æ±‚example.com/v1/appåœ¨è½¬å‘è‡³åç«¯æœåŠ¡ä¹‹å‰ï¼Œå°†Pathå‰ç¼€/v1æ›´æ”¹ä¸º/v2 apiVersion: networking.k8s.io/v1 kind: Ingress metadata: annotations: higress.io/rewrite-target: &quot;/v2/$2&quot; name: demo spec: ingressClassName: higress rules: - host: example.com http: paths: - backend: service: name: demo-service port: number: 80 path: /v1(/|$)(.*) pathType: ImplementationSpecific  ","version":"Next","tagName":"h3"},{"title":"Rewriteé‡å†™Hostâ€‹","type":1,"pageTitle":"é€šè¿‡Ingress Annotationå®ç°é«˜é˜¶æµé‡æ²»ç†","url":"/zh-cn/docs/user/annotation-use-case#rewriteé‡å†™host","content":"å°†è¯·æ±‚example.com/teståœ¨è½¬å‘è‡³åç«¯æœåŠ¡ä¹‹å‰ï¼Œé‡å†™ä¸ºtest.com/test apiVersion: networking.k8s.io/v1 kind: Ingress metadata: annotations: higress.io/upstream-vhost: &quot;test.com&quot; name: demo spec: ingressClassName: higress rules: - host: example.com http: paths: - backend: service: name: demo-service port: number: 80 path: /test pathType: Exact  ","version":"Next","tagName":"h3"},{"title":"é‡å®šå‘â€‹","type":1,"pageTitle":"é€šè¿‡Ingress Annotationå®ç°é«˜é˜¶æµé‡æ²»ç†","url":"/zh-cn/docs/user/annotation-use-case#é‡å®šå‘","content":"é€šè¿‡é‡å®šå‘å¯ä»¥å°†åŸå§‹å®¢æˆ·ç«¯è¯·æ±‚æ›´æ”¹ä¸ºç›®æ ‡è¯·æ±‚ã€‚ ","version":"Next","tagName":"h2"},{"title":"é…ç½®HTTPé‡å®šå‘è‡³HTTPSâ€‹","type":1,"pageTitle":"é€šè¿‡Ingress Annotationå®ç°é«˜é˜¶æµé‡æ²»ç†","url":"/zh-cn/docs/user/annotation-use-case#é…ç½®httpé‡å®šå‘è‡³https","content":"higress.io/ssl-redirectï¼šHTTPé‡å®šå‘åˆ°HTTPShigress.io/force-ssl-redirect: HTTPé‡å®šå‘åˆ°HTTPS è¯´æ˜ï¼šHigresså¯¹äºä»¥ä¸Šä¸¤ä¸ªæ³¨è§£ä¸åŒºåˆ†å¯¹å¾…ï¼Œéƒ½æ˜¯å¼ºåˆ¶å°†HTTPé‡å®šå‘åˆ°HTTPSã€‚ å°†è¯·æ±‚http://example.com/testé‡å®šå‘ä¸ºhttps://example.com/testã€‚ apiVersion: networking.k8s.io/v1 kind: Ingress metadata: annotations: higress.io/ssl-redirect: &quot;true&quot; name: demo spec: ingressClassName: higress rules: - host: example.com http: paths: - backend: service: name: demo-service port: number: 80 path: /test pathType: Exact  ","version":"Next","tagName":"h3"},{"title":"æ°¸ä¹…é‡å®šå‘â€‹","type":1,"pageTitle":"é€šè¿‡Ingress Annotationå®ç°é«˜é˜¶æµé‡æ²»ç†","url":"/zh-cn/docs/user/annotation-use-case#æ°¸ä¹…é‡å®šå‘","content":"higress.io/permanent-redirectï¼šæ°¸ä¹…é‡å®šå‘çš„ç›®æ ‡urlï¼Œå¿…é¡»åŒ…å«schemeï¼ˆhttp or https)ã€‚higress.io/permanent-redirect-codeï¼šæ°¸ä¹…é‡å®šå‘çš„HTTPçŠ¶æ€ç ï¼Œé»˜è®¤ä¸º301ã€‚ å°†è¯·æ±‚http://example.com/testæ°¸ä¹…é‡å®šå‘ä¸ºhttp://example.com/appã€‚ apiVersion: networking.k8s.io/v1 kind: Ingress metadata: annotations: higress.io/permanent-redirect: &quot;http://example.com/app&quot; name: demo spec: ingressClassName: higress rules: - host: example.com http: paths: - backend: service: name: demo-service port: number: 80 path: /test pathType: Exact  ","version":"Next","tagName":"h3"},{"title":"ä¸´æ—¶é‡å®šå‘â€‹","type":1,"pageTitle":"é€šè¿‡Ingress Annotationå®ç°é«˜é˜¶æµé‡æ²»ç†","url":"/zh-cn/docs/user/annotation-use-case#ä¸´æ—¶é‡å®šå‘","content":"higress.io/temporal-redirectï¼šä¸´æ—¶é‡å®šå‘çš„ç›®æ ‡urlï¼Œå¿…é¡»åŒ…å«schemeï¼ˆhttp or https)ã€‚ å°†è¯·æ±‚http://example.com/testä¸´æ—¶é‡å®šå‘ä¸ºhttp://example.com/appã€‚ apiVersion: networking.k8s.io/v1 kind: Ingress metadata: annotations: higress.io/temporal-redirect: &quot;http://example.com/app&quot; name: demo spec: ingressClassName: higress rules: - host: example.com http: paths: - backend: service: name: demo-service port: number: 80 path: /test pathType: Exact  ","version":"Next","tagName":"h3"},{"title":"Headeræ§åˆ¶â€‹","type":1,"pageTitle":"é€šè¿‡Ingress Annotationå®ç°é«˜é˜¶æµé‡æ²»ç†","url":"/zh-cn/docs/user/annotation-use-case#headeræ§åˆ¶","content":"é€šè¿‡Headeræ§åˆ¶ï¼Œæ‚¨å¯ä»¥åœ¨è½¬å‘è¯·æ±‚åˆ°åç«¯æœåŠ¡ä¹‹å‰å¯¹è¯·æ±‚Headerè¿›è¡Œå¢åˆ æ”¹ï¼Œåœ¨æ”¶åˆ°å“åº”è½¬å‘ç»™å®¢æˆ·ç«¯æ—¶å¯¹å“åº”Headerè¿›è¡Œå¢åˆ æ”¹ã€‚ ","version":"Next","tagName":"h2"},{"title":"è¯·æ±‚Headeræ§åˆ¶â€‹","type":1,"pageTitle":"é€šè¿‡Ingress Annotationå®ç°é«˜é˜¶æµé‡æ²»ç†","url":"/zh-cn/docs/user/annotation-use-case#è¯·æ±‚headeræ§åˆ¶","content":"higress.io/request-header-control-addï¼šè¯·æ±‚åœ¨è½¬å‘ç»™åç«¯æœåŠ¡æ—¶ï¼Œæ·»åŠ æŒ‡å®šHeaderã€‚è‹¥è¯¥Headerå­˜åœ¨ï¼Œåˆ™å…¶å€¼æ‹¼æ¥åœ¨åŸæœ‰å€¼åé¢ã€‚è¯­æ³•å¦‚ä¸‹ï¼š å•ä¸ªHeaderï¼šKey Valueå¤šä¸ªHeaderï¼šä½¿ç”¨yamlç‰¹æ®Šç¬¦å· |ï¼Œæ¯å¯¹Key Valueå•ç‹¬å¤„äºä¸€è¡Œ higress.io/request-header-control-updateï¼šè¯·æ±‚åœ¨è½¬å‘ç»™åç«¯æœåŠ¡æ—¶ï¼Œä¿®æ”¹æŒ‡å®šHeaderã€‚è‹¥è¯¥headerå­˜åœ¨ï¼Œåˆ™å…¶å€¼è¦†ç›–åŸæœ‰å€¼ã€‚è¯­æ³•å¦‚ä¸‹ï¼š å•ä¸ªHeaderï¼šKey Valueå¤šä¸ªHeaderï¼šä½¿ç”¨yamlç‰¹æ®Šç¬¦å· |ï¼Œæ¯å¯¹Key Valueå•ç‹¬å¤„äºä¸€è¡Œ higress.io/request-header-control-removeï¼šè¯·æ±‚åœ¨è½¬å‘ç»™åç«¯æœåŠ¡æ—¶ï¼Œåˆ é™¤æŒ‡å®šHeaderã€‚è¯­æ³•å¦‚ä¸‹ï¼š å•ä¸ªHeaderï¼šKeyå¤šä¸ªHeaderï¼šé€—å·åˆ†éš” å¯¹äºè¯·æ±‚example.com/testæ·»åŠ ä¸¤ä¸ªHeaderï¼Œfoo: barå’Œtest: trueã€‚ apiVersion: networking.k8s.io/v1 kind: Ingress metadata: annotations: higress.io/request-header-control-add: | foo bar test true name: demo spec: ingressClassName: higress rules: - host: example.com http: paths: - backend: service: name: demo-service port: number: 80 path: /test pathType: Exact  Headeræ§åˆ¶å¯ä»¥ç»“åˆç°åº¦å‘å¸ƒï¼Œå¯¹ç°åº¦æµé‡è¿›è¡ŒæŸ“è‰²ã€‚è¯·æ±‚Headerä¸ºhigressï¼šv1æ—¶å°†è®¿é—®ç°åº¦æœåŠ¡demo-service-canary-v1ï¼Œå¹¶æ·»åŠ Headerï¼Œstage: grayï¼›å…¶ä»–æƒ…å†µå°†è®¿é—®æ­£å¼æœåŠ¡demo-serviceï¼Œå¹¶æ·»åŠ Headerï¼Œstage: productionã€‚é…ç½®å¦‚ä¸‹ï¼š apiVersion: networking.k8s.io/v1 kind: Ingress metadata: annotations: higress.io/canary: &quot;true&quot; higress.io/canary-by-header: &quot;higress&quot; higress.io/canary-by-header-value: &quot;v1&quot; higress.io/request-header-control-add: &quot;stage gray&quot; name: demo-canary-v1 spec: ingressClassName: higress rules: - http: paths: - backend: service: name: demo-service-canary-v1 port: number: 80 path: /hello pathType: Exact --- apiVersion: networking.k8s.io/v1 kind: Ingress metadata: annotations: higress.io/request-header-control-add: &quot;stage production&quot; name: demo spec: ingressClassName: higress rules: - http: paths: - backend: service: name: demo-service port: number: 80 path: /hello pathType: Exact  ","version":"Next","tagName":"h3"},{"title":"å“åº”Headeræ§åˆ¶â€‹","type":1,"pageTitle":"é€šè¿‡Ingress Annotationå®ç°é«˜é˜¶æµé‡æ²»ç†","url":"/zh-cn/docs/user/annotation-use-case#å“åº”headeræ§åˆ¶","content":"higress.io/response-header-control-addï¼šè¯·æ±‚åœ¨æ”¶åˆ°åç«¯æœåŠ¡å“åº”ä¹‹åå¹¶ä¸”è½¬å‘å“åº”ç»™å®¢æˆ·ç«¯ä¹‹å‰ï¼Œæ·»åŠ æŒ‡å®šHeaderã€‚è‹¥è¯¥Headerå­˜åœ¨ï¼Œåˆ™å…¶å€¼æ‹¼æ¥åœ¨åŸæœ‰å€¼åé¢ã€‚è¯­æ³•å¦‚ä¸‹ï¼š å•ä¸ªHeaderï¼šKey Valueå¤šä¸ªHeaderï¼šä½¿ç”¨yamlç‰¹æ®Šç¬¦å· |ï¼Œæ¯å¯¹Key Valueå•ç‹¬å¤„äºä¸€è¡Œ higress.io/response-header-control-updateï¼šè¯·æ±‚åœ¨æ”¶åˆ°åç«¯æœåŠ¡å“åº”ä¹‹åå¹¶ä¸”è½¬å‘å“åº”ç»™å®¢æˆ·ç«¯ä¹‹å‰ï¼Œä¿®æ”¹æŒ‡å®šHeaderã€‚è‹¥è¯¥headerå­˜åœ¨ï¼Œåˆ™å…¶å€¼è¦†ç›–åŸæœ‰å€¼ã€‚è¯­æ³•å¦‚ä¸‹ï¼š å•ä¸ªHeaderï¼šKey Valueå¤šä¸ªHeaderï¼šä½¿ç”¨yamlç‰¹æ®Šç¬¦å· |ï¼Œæ¯å¯¹Key Valueå•ç‹¬å¤„äºä¸€è¡Œ higress.io/response-header-control-removeï¼šè¯·æ±‚åœ¨æ”¶åˆ°åç«¯æœåŠ¡å“åº”ä¹‹åå¹¶ä¸”è½¬å‘å“åº”ç»™å®¢æˆ·ç«¯ä¹‹å‰ï¼Œåˆ é™¤æŒ‡å®šHeaderã€‚è¯­æ³•å¦‚ä¸‹ï¼š å•ä¸ªHeaderï¼šKeyå¤šä¸ªHeaderï¼šé€—å·åˆ†éš” å¯¹äºè¯·æ±‚example.com/testçš„å“åº”åˆ é™¤Headerï¼šreq-cost-timeã€‚ apiVersion: networking.k8s.io/v1 kind: Ingress metadata: annotations: higress.io/response-header-control-remove: &quot;req-cost-time&quot; name: demo spec: ingressClassName: higress rules: - host: example.com http: paths: - backend: service: name: demo-service port: number: 80 path: /test pathType: Exact  ","version":"Next","tagName":"h3"},{"title":"é‡è¯•â€‹","type":1,"pageTitle":"é€šè¿‡Ingress Annotationå®ç°é«˜é˜¶æµé‡æ²»ç†","url":"/zh-cn/docs/user/annotation-use-case#é‡è¯•","content":"Higressæä¾›è·¯ç”±çº§åˆ«çš„é‡è¯•è®¾ç½®ï¼Œå¯ä»¥ä¸ºå‡ºé”™çš„è¯·æ±‚è°ƒç”¨è‡ªåŠ¨è¿›è¡Œé‡è¯•ã€‚æ‚¨å¯ä»¥æŒ‰éœ€è®¾ç½®é‡è¯•æ¡ä»¶ï¼Œä¾‹å¦‚å»ºç«‹è¿æ¥å¤±è´¥ï¼Œæˆ–è€…åç«¯æœåŠ¡ä¸å¯ç”¨ä»¥åŠå¯¹æŒ‡å®šHTTPçŠ¶æ€ç çš„å“åº”ç­‰è¿›è¡Œè¯·æ±‚é‡è¯•ã€‚ higress.io/proxy-next-upstream-triesï¼šè¯·æ±‚çš„æœ€å¤§é‡è¯•æ¬¡æ•°ã€‚é»˜è®¤3æ¬¡ã€‚higress.io/proxy-next-upstream-timeoutï¼šè¯·æ±‚é‡è¯•çš„è¶…æ—¶æ—¶é—´ï¼Œå•ä½ç§’ã€‚é»˜è®¤æœªé…ç½®è¶…æ—¶æ—¶é—´ã€‚higress.io/proxy-next-upstreamï¼šè¯·æ±‚é‡è¯•æ¡ä»¶ï¼Œé€—å·åˆ†éš”ï¼›é»˜è®¤å€¼ä¸º&quot;error,timeout&quot;ã€‚åˆæ³•å€¼å¦‚ä¸‹ï¼š errorï¼šå»ºç«‹è¿æ¥å¤±è´¥ï¼Œè¯·æ±‚å‡ºé”™5xxã€‚timeoutï¼šå»ºç«‹è¿æ¥è¶…æ—¶ï¼Œè¯·æ±‚å‡ºé”™5xxã€‚invalid_headerï¼šè¯·æ±‚å‡ºé”™5xxã€‚http_xxxï¼šé’ˆå¯¹å…·ä½“å“åº”çŠ¶æ€ç çš„æƒ…å†µè¿›è¡Œé‡è¯•ã€‚ä¾‹å¦‚http_502ï¼Œhttp_403ã€‚non_idempotentï¼šå¯¹äºéå¹‚ç­‰è¯·æ±‚å‡ºé”™æ—¶è¿›è¡Œé‡è¯•ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒHigressé’ˆå¯¹éå¹‚ç­‰POSTã€PATCHè¯·æ±‚å‡ºé”™æ—¶ä¸ä¼šè¿›è¡Œé‡è¯•ï¼Œé…ç½®non_idempotentå¯ä»¥å¼€å¯é‡è¯•ã€‚offï¼šå…³é—­é‡è¯•ã€‚ è®¾ç½®example/testè¯·æ±‚çš„æœ€å¤§é‡è¯•æ¬¡æ•°ä¸º2ï¼Œé‡è¯•è¶…æ—¶æ—¶é—´ä¸º5sï¼Œåªæœ‰åœ¨å“åº”çŠ¶æ€ç ä¸º502æ‰é‡è¯•ï¼Œå¹¶ä¸”å¼€å¯éå¹‚ç­‰é‡è¯•ã€‚ apiVersion: networking.k8s.io/v1 kind: Ingress metadata: annotations: higress.io/proxy-next-upstream-tries: &quot;2&quot; higress.io/proxy-next-upstream-timeout: &quot;5&quot; higress.io/proxy-next-upstream: &quot;http_502,non_idempotent&quot; name: demo spec: ingressClassName: higress rules: - host: example.com http: paths: - backend: service: name: demo-service port: number: 80 path: /test pathType: Exact  ","version":"Next","tagName":"h2"},{"title":"è¶…æ—¶â€‹","type":1,"pageTitle":"é€šè¿‡Ingress Annotationå®ç°é«˜é˜¶æµé‡æ²»ç†","url":"/zh-cn/docs/user/annotation-use-case#è¶…æ—¶","content":"Higressæä¾›è·¯ç”±çº§åˆ«çš„è¶…æ—¶è®¾ç½®ï¼Œä¸nginx ingressä¸åŒï¼Œæ²¡æœ‰åŒºåˆ†è¿æ¥/è¯»å†™è¶…æ—¶ï¼Œè€Œæ˜¯é¢å‘çš„æ¥å£å¤„ç†æ€»å»¶æ—¶è¿›è¡Œé…ç½®ï¼Œåœ¨æœªè¿›è¡Œé…ç½®æ—¶é»˜è®¤ä¸é™åˆ¶ï¼Œä¾‹å¦‚åç«¯æœªè¿”å›åº”ç­”ï¼Œç½‘å…³å°†æ— é™ç­‰å¾…ã€‚ è®¾ç½®è¶…æ—¶æ—¶é—´ä¸º5sï¼š apiVersion: networking.k8s.io/v1 kind: Ingress metadata: annotations: higress.io/timeout: &quot;5&quot; name: demo spec: ingressClassName: higress rules: - host: example.com http: paths: - backend: service: name: demo-service port: number: 80 path: /test pathType: Exact  ","version":"Next","tagName":"h2"},{"title":"å•æœºé™æµâ€‹","type":1,"pageTitle":"é€šè¿‡Ingress Annotationå®ç°é«˜é˜¶æµé‡æ²»ç†","url":"/zh-cn/docs/user/annotation-use-case#å•æœºé™æµ","content":"æç¤ºHigresså•†ä¸šç‰ˆå…·å¤‡å…¨å±€é™æµèƒ½åŠ›ï¼Œè¯¦æƒ…æŸ¥çœ‹å•†ä¸šç‰ˆæ–‡æ¡£ä¸­å…¨å±€é™æµä¸€èŠ‚çš„ä»‹ç» æ”¯æŒé’ˆå¯¹è·¯ç”±çº§åˆ«çš„å•æœºé™æµç­–ç•¥ï¼Œåœ¨è®¾å®šçš„æ—¶é—´å‘¨æœŸå†…ï¼Œé™åˆ¶æ¯ä¸ªç½‘å…³å‰¯æœ¬åŒ¹é…åœ¨æŸä¸ªè·¯ç”±ä¸Šçš„è¯·æ±‚æ•°é‡ä¸å¤§äºé˜ˆå€¼ã€‚è¯¥é™æµæ˜¯é’ˆå¯¹å•æœºçº§åˆ«ï¼Œå³é…ç½®çš„é˜ˆå€¼åœ¨æ¯ä¸ªç½‘å…³å®ä¾‹è¿›è¡Œæµæ§ã€‚ higress.io/route-limit-rpmï¼šè¯¥Ingresså®šä¹‰çš„è·¯ç”±åœ¨æ¯ä¸ªç½‘å…³å®ä¾‹ä¸Šæ¯åˆ†é’Ÿæœ€å¤§è¯·æ±‚æ¬¡æ•°ã€‚ç¬æ—¶æœ€å¤§è¯·æ±‚æ¬¡æ•°ä¸ºè¯¥å€¼ä¹˜ä»¥limit-burst-multiplierã€‚higress.io/route-limit-rpsï¼šè¯¥Ingresså®šä¹‰çš„è·¯ç”±åœ¨æ¯ä¸ªç½‘å…³å®ä¾‹ä¸Šæ¯ç§’æœ€å¤§è¯·æ±‚æ¬¡æ•°ã€‚ç¬æ—¶æœ€å¤§è¯·æ±‚æ¬¡æ•°ä¸ºè¯¥å€¼ä¹˜ä»¥limit-burst-multiplierã€‚higress.io/route-limit-burst-multiplierï¼šç¬æ—¶æœ€å¤§è¯·æ±‚æ¬¡æ•°çš„å› å­ï¼Œé»˜è®¤ä¸º5ã€‚ ä¾‹å¦‚ï¼š é™åˆ¶example.com/testçš„è¯·æ±‚æ¯åˆ†é’Ÿæœ€å¤§è¯·æ±‚æ•°ä¸º100ï¼Œç¬æ—¶è¯·æ±‚æ•°200ã€‚é…ç½®å¦‚ä¸‹ï¼š apiVersion: networking.k8s.io/v1 kind: Ingress metadata: annotations: higress.io/route-limit-rpm: &quot;100&quot; higress.io/route-limit-burst-multiplier: &quot;2&quot; name: demo spec: ingressClassName: mse rules: - host: example.com http: paths: - backend: service: name: demo-service port: number: 80 path: /test pathType: Exact  é™åˆ¶example.com/testçš„è¯·æ±‚æ¯ç§’æœ€å¤§è¯·æ±‚æ•°ä¸º10ï¼Œç¬æ—¶è¯·æ±‚æ•°50ã€‚é…ç½®å¦‚ä¸‹ï¼š apiVersion: networking.k8s.io/v1 kind: Ingress metadata: annotations: higress.io/route-limit-rps: &quot;10&quot; # é»˜è®¤ä¸º5 # higress.io/route-limit-burst-multiplier: &quot;5&quot; name: demo spec: ingressClassName: mse rules: - host: example.com http: paths: - backend: service: name: demo-service port: number: 80 path: /test pathType: Exact  ","version":"Next","tagName":"h2"},{"title":"é…ç½®åç«¯æœåŠ¡åè®®ï¼šHTTPSæˆ–GRPCâ€‹","type":1,"pageTitle":"é€šè¿‡Ingress Annotationå®ç°é«˜é˜¶æµé‡æ²»ç†","url":"/zh-cn/docs/user/annotation-use-case#é…ç½®åç«¯æœåŠ¡åè®®httpsæˆ–grpc","content":"Higressé»˜è®¤ä½¿ç”¨HTTPåè®®è½¬å‘è¯·æ±‚åˆ°åç«¯ä¸šåŠ¡å®¹å™¨ã€‚å½“æ‚¨çš„ä¸šåŠ¡å®¹å™¨ä¸ºHTTPSåè®®æ—¶ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨æ³¨è§£higress.io/backend-protocol: &quot;HTTPS&quot;ï¼›å½“æ‚¨çš„ä¸šåŠ¡å®¹å™¨ä¸ºGRPCæœåŠ¡æ—¶ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨æ³¨è§£higress.io/backend-protocol: &quot;GRPC&quot;ã€‚ è¯´æ˜ï¼šç›¸æ¯”Nginx Ingressçš„ä¼˜åŠ¿ï¼Œå¦‚æœæ‚¨çš„åç«¯æœåŠ¡æ‰€å±çš„K8s Serviceèµ„æºä¸­å…³äºPort Nameçš„å®šä¹‰ä¸ºgrpcæˆ–http2ï¼Œæ‚¨æ— éœ€é…ç½®æ³¨è§£higress.io/backend-protocol: &quot;GRPC&quot;ï¼ŒHigressä¼šè‡ªåŠ¨ä½¿ç”¨GRPCæˆ–è€…HTTP2ã€‚ è¯·æ±‚example.com/testè½¬å‘è‡³åç«¯æœåŠ¡ä½¿ç”¨HTTPSåè®®ã€‚ apiVersion: networking.k8s.io/v1 kind: Ingress metadata: annotations: higress.io/backend-protocol: &quot;HTTPS&quot; name: demo spec: ingressClassName: higress rules: - host: example.com http: paths: - backend: service: name: demo-service port: number: 80 path: / pathType: Exact  è¯·æ±‚example/grpcbin.GRPCBinè½¬å‘è‡³åç«¯æœåŠ¡ä½¿ç”¨GRPCåè®®ã€‚ apiVersion: networking.k8s.io/v1 kind: Ingress metadata: annotations: higress.io/backend-protocol: &quot;GRPC&quot; name: demo spec: ingressClassName: higress rules: - host: example.com http: paths: - backend: service: name: demo-service port: number: 80 path: /grpcbin.GRPCBin pathType: Prefix  ","version":"Next","tagName":"h2"},{"title":"é…ç½®åç«¯æœåŠ¡çš„è´Ÿè½½å‡è¡¡ç®—æ³•â€‹","type":1,"pageTitle":"é€šè¿‡Ingress Annotationå®ç°é«˜é˜¶æµé‡æ²»ç†","url":"/zh-cn/docs/user/annotation-use-case#é…ç½®åç«¯æœåŠ¡çš„è´Ÿè½½å‡è¡¡ç®—æ³•","content":"è´Ÿè½½å‡è¡¡å†³å®šç€ç½‘å…³åœ¨è½¬å‘è¯·æ±‚è‡³åç«¯æœåŠ¡æ—¶å¦‚ä½•é€‰æ‹©èŠ‚ç‚¹ã€‚ ","version":"Next","tagName":"h2"},{"title":"æ™®é€šè´Ÿè½½å‡è¡¡ç®—æ³•â€‹","type":1,"pageTitle":"é€šè¿‡Ingress Annotationå®ç°é«˜é˜¶æµé‡æ²»ç†","url":"/zh-cn/docs/user/annotation-use-case#æ™®é€šè´Ÿè½½å‡è¡¡ç®—æ³•","content":"higress.io/load-balanceï¼šåç«¯æœåŠ¡çš„æ™®é€šè´Ÿè½½å‡è¡¡ç®—æ³•ã€‚é»˜è®¤ä¸ºround_robinã€‚åˆæ³•å€¼å¦‚ä¸‹ï¼š round_robinï¼šåŸºäºè½®è¯¢çš„è´Ÿè½½å‡è¡¡ã€‚least_connï¼šåŸºäºæœ€å°è¯·æ±‚æ•°çš„è´Ÿè½½å‡è¡¡ã€‚randomï¼šåŸºäºéšæœºçš„è´Ÿè½½å‡è¡¡ã€‚ è®¾ç½®åç«¯æœåŠ¡demo-serviceçš„è´Ÿè½½å‡è¡¡ç®—æ³•ä¸ºleast_connã€‚ apiVersion: networking.k8s.io/v1 kind: Ingress metadata: annotations: higress.io/load-balance: &quot;least_conn&quot; name: demo spec: ingressClassName: higress rules: - host: example.com http: paths: - backend: service: name: demo-service port: number: 80 path: /order pathType: Exact  ","version":"Next","tagName":"h3"},{"title":"åŸºäºä¸€è‡´æ€§Hashçš„è´Ÿè½½å‡è¡¡ç®—æ³•â€‹","type":1,"pageTitle":"é€šè¿‡Ingress Annotationå®ç°é«˜é˜¶æµé‡æ²»ç†","url":"/zh-cn/docs/user/annotation-use-case#åŸºäºä¸€è‡´æ€§hashçš„è´Ÿè½½å‡è¡¡ç®—æ³•","content":"åŸºäºä¸€è‡´æ€§Hashçš„è´Ÿè½½å‡è¡¡ç®—æ³•å…·å¤‡è¯·æ±‚äº²å’Œæ€§ï¼Œå…·æœ‰ç›¸åŒç‰¹å¾çš„è¯·æ±‚ä¼šå§‹ç»ˆè´Ÿè½½åˆ°ç›¸åŒèŠ‚ç‚¹ä¸Šã€‚Higressæ”¯æŒåŸºäºéƒ¨åˆ†Nginx å˜é‡ã€è¯·æ±‚Headerå’Œè¯·æ±‚è·¯å¾„å‚æ•°ä½œä¸ºHash Keyã€‚ higress.io/upstream-hash-byï¼šåŸºäºä¸€è‡´Hashçš„è´Ÿè½½å‡è¡¡ç®—æ³•ã€‚Higressæ”¯æŒä»¥ä¸‹å‡ ç§å½¢å¼ï¼š æ”¯æŒé…ç½®éƒ¨åˆ†nginxå˜é‡ï¼š $request_uriï¼šè¯·æ±‚çš„Pathï¼ˆåŒ…æ‹¬è·¯å¾„å‚æ•°ï¼‰ä½œä¸ºHash Key$hostï¼šè¯·æ±‚çš„Hostä½œä¸ºHash Key$remote_addrï¼šè¯·æ±‚çš„å®¢æˆ·ç«¯IPä½œä¸ºHash Key åŸºäºè¯·æ±‚headerçš„ä¸€è‡´æ€§Hashã€‚æ‚¨åªéœ€é…ç½®ä¸º$http_headerNameã€‚åŸºäºè¯·æ±‚è·¯å¾„å‚æ•°çš„ä¸€è‡´æ€§Hashã€‚æ‚¨åªéœ€é…ç½®ä¸º$arg_varNameã€‚ åŸºäºè¯·æ±‚çš„å®¢æˆ·ç«¯IPä½œä¸ºHash Keyï¼ŒåŒä¸€ä¸ªå®¢æˆ·ç«¯IPçš„è¯·æ±‚å§‹ç»ˆè´Ÿè½½åˆ°åŒä¸€ä¸ªèŠ‚ç‚¹ã€‚ apiVersion: networking.k8s.io/v1 kind: Ingress metadata: annotations: higress.io/upstream-hash-by: &quot;$remote_addr&quot; name: demo spec: ingressClassName: higress rules: - host: example.com http: paths: - backend: service: name: demo-service port: number: 80 path: /test pathType: Exact  åŸºäºè¯·æ±‚Header x-stageä½œä¸ºHash keyï¼Œå¸¦æœ‰x-stageå¤´éƒ¨çš„è¯·æ±‚ä¸”å€¼ç›¸åŒçš„è¯·æ±‚å§‹ç»ˆè´Ÿè½½åˆ°åŒä¸€ä¸ªèŠ‚ç‚¹ã€‚ apiVersion: networking.k8s.io/v1 kind: Ingress metadata: annotations: higress.io/upstream-hash-by: &quot;$http_x-stage&quot; name: demo spec: ingressClassName: higress rules: - host: example.com http: paths: - backend: service: name: demo-service port: number: 80 path: /test pathType: Exact  åŸºäºè¯·æ±‚è·¯å¾„å‚æ•° x-stageä½œä¸ºHash keyï¼Œå¸¦æœ‰è·¯å¾„å‚æ•°x-stageçš„è¯·æ±‚ä¸”å€¼ç›¸åŒçš„è¯·æ±‚å§‹ç»ˆè´Ÿè½½åˆ°åŒä¸€ä¸ªèŠ‚ç‚¹ã€‚ apiVersion: networking.k8s.io/v1 kind: Ingress metadata: annotations: higress.io/upstream-hash-by: &quot;$arg_x-stage&quot; name: demo spec: ingressClassName: higress rules: - host: example.com http: paths: - backend: service: name: demo-service port: number: 80 path: /test pathType: Exact  ","version":"Next","tagName":"h3"},{"title":"Cookieäº²å’Œæ€§ ï¼ˆä¼šè¯ä¿æŒï¼‰â€‹","type":1,"pageTitle":"é€šè¿‡Ingress Annotationå®ç°é«˜é˜¶æµé‡æ²»ç†","url":"/zh-cn/docs/user/annotation-use-case#cookieäº²å’Œæ€§-ä¼šè¯ä¿æŒ","content":"å…·å¤‡ç›¸åŒçš„Cookieçš„è¯·æ±‚ä¼šè¢«ç½‘å…³å§‹ç»ˆè´Ÿè½½åˆ°åŒä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¹¶ä¸”å¦‚æœç¬¬ä¸€æ¬¡è®¿é—®æºå¸¦Cookieï¼ŒHigressä¼šåœ¨ç¬¬ä¸€æ¬¡å“åº”æ—¶ä¸ºå®¢æˆ·ç«¯ç”Ÿæˆä¸€ä¸ªCookieï¼Œç”¨æ¥ä¿è¯åç»­çš„è¯·æ±‚è¢«ç½‘å…³å§‹ç»ˆè´Ÿè½½åˆ°ç›¸åŒèŠ‚ç‚¹ã€‚ higress.io/affinityï¼šäº²å’Œæ€§ç§ç±»ï¼Œç›®å‰åªæ”¯æŒcookieï¼Œé»˜è®¤ä¸ºcookieã€‚higress.io/affinity-modeï¼šäº²å’Œæ€§æ¨¡å¼ï¼ŒHigressç›®å‰åªæ”¯æŒbalancedæ¨¡å¼ï¼Œé»˜è®¤ä¸ºbalancedæ¨¡å¼ã€‚higress.io/session-cookie-nameï¼šé…ç½®æŒ‡å®šCookieçš„å€¼ä½œä¸ºHash Keyï¼Œé»˜è®¤ä¸ºINGRESSCOOKIEhigress.io/session-cookie-pathï¼šå½“æŒ‡å®šCookieä¸å­˜åœ¨ï¼Œç”Ÿæˆçš„Cookieçš„Pathå€¼ï¼Œé»˜è®¤ä¸º/higress.io/session-cookie-max-ageï¼šå½“æŒ‡å®šCookieä¸å­˜åœ¨ï¼Œç”Ÿæˆçš„Cookieçš„è¿‡æœŸæ—¶é—´ï¼Œå•ä½ä¸ºç§’ï¼Œé»˜è®¤ä¸ºSessionä¼šè¯çº§åˆ«ã€‚higress.io/session-cookie-expiresï¼šå½“æŒ‡å®šCookieä¸å­˜åœ¨ï¼Œç”Ÿæˆçš„Cookieçš„è¿‡æœŸæ—¶é—´ï¼Œå•ä½ä¸ºç§’ï¼Œé»˜è®¤ä¸ºSessionä¼šè¯çº§åˆ«ã€‚ è¯´æ˜ï¼šmax-ageå’Œexpireséƒ½å¯ä»¥ç”¨æ¥æŒ‡å®šcookieè¿‡æœŸæ—¶é—´ã€‚å½“session-cookie-max-ageå’Œsession-cookie-expiresåŒæ—¶é…ç½®æ—¶ï¼ŒHigressä¼˜å…ˆé€‰å–session-cookie-max-ageä½œä¸ºè¿‡æœŸæ—¶é—´ã€‚ å¼€å¯Cookieäº²å’Œæ€§ï¼Œåˆ©ç”¨Higressçš„é»˜è®¤é…ç½®ï¼Œå³Cookieçš„åå­—ä¸ºINGRESSCOOKIEï¼ŒPathä¸º/ï¼ŒCookieçš„ç”Ÿå‘½å‘¨æœŸä¸ºSessionä¼šè¯çº§åˆ«ã€‚ apiVersion: networking.k8s.io/v1 kind: Ingress metadata: annotations: higress.io/affinity: &quot;cookie&quot; name: demo spec: ingressClassName: higress rules: - host: example.com http: paths: - backend: service: name: demo-service port: number: 80 path: /test pathType: Exact  å¼€å¯Cookieäº²å’Œæ€§ï¼ŒCookieçš„åå­—ä¸ºtestï¼ŒPathä¸º/ï¼ŒCookieçš„è¿‡æœŸæ—¶é—´ä¸º10sã€‚ apiVersion: networking.k8s.io/v1 kind: Ingress metadata: annotations: higress.io/affinity: &quot;cookie&quot; higress.io/session-cookie-name: &quot;test&quot; higress.io/session-cookie-max-age: &quot;10&quot; name: demo spec: ingressClassName: higress rules: - host: example.com http: paths: - backend: service: name: demo-service port: number: 80 path: /test pathType: Exact  ","version":"Next","tagName":"h2"},{"title":"ç½‘å…³ä¸å®¢æˆ·ç«¯åŒå‘è®¤è¯(MTLS)â€‹","type":1,"pageTitle":"é€šè¿‡Ingress Annotationå®ç°é«˜é˜¶æµé‡æ²»ç†","url":"/zh-cn/docs/user/annotation-use-case#ç½‘å…³ä¸å®¢æˆ·ç«¯åŒå‘è®¤è¯mtls","content":"å½“å¼€å¯HTTPSæ—¶ï¼Œç½‘å…³ä¸å®¢æˆ·ç«¯é»˜è®¤æ˜¯åŸºäºå•å‘TLSè®¤è¯ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢æ³¨è§£å¼€å¯åŒå‘TLSè®¤è¯ï¼Œå³è®©æœåŠ¡ç«¯åŒæ—¶æ ¡éªŒå®¢æˆ·ç«¯çš„åˆæ³•æ€§ã€‚ higress.io/auth-tls-secret: ç½‘å…³ä½¿ç”¨çš„CAè¯ä¹¦ï¼Œç”¨äºéªŒè¯MTLSæ¡æ‰‹æœŸé—´ï¼Œå®¢æˆ·ç«¯æä¾›çš„è¯ä¹¦ã€‚è¯¥æ³¨è§£ä¸»è¦åº”ç”¨äºç½‘å…³éœ€è¦éªŒè¯å®¢æˆ·ç«¯èº«ä»½çš„åœºæ™¯ã€‚secretåå­—æ ¼å¼å¿…é¡»æ˜¯ï¼š(è¯¥åŸŸåè¯ä¹¦æ‰€åœ¨çš„secretçš„åå­—)-cacert ä¾‹å¦‚: apiVersion: networking.k8s.io/v1 kind: Ingress metadata: annotations: # è¿™é‡Œçš„è¦æ±‚æ˜¯å¿…é¡»ä»¥åŸŸåä¸Šé…ç½®è¯ä¹¦secretåç§°åç¼€åŠ ä¸Š-cacert higress.io/auth-tls-secret: tls-secret-cacert name: bar namespace: default spec: ingressClassName: higress rules: - host: bar.com http: paths: - backend: service: name: bar-service port: number: 5678 path: / pathType: Prefix tls: - hosts: - bar.com secretName: tls-secret --- apiVersion: networking.k8s.io/v1 kind: Ingress metadata: name: foo namespace: default spec: ingressClassName: higress rules: - host: foo.com http: paths: - backend: service: name: foo-service port: number: 5678 path: / pathType: Prefix tls: - hosts: - foo.com secretName: tls-secret  tls-secret-cacert è¿™ä¸ª secret çš„å†…å®¹ä¸­å¿…é¡»æœ‰ cacert è¿™ä¸ªkeyï¼Œä¾‹å¦‚ï¼š apiVersion: v1 data: cacert: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURDekNDQWZPZ0F3SUJBZ0lVQ0tMSGM5SFhBbEFYNUdFR2dHVk1zVXhzUFhBd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0ZURVRNQkVHQTFVRUF3d0tSWGhoYlhCc1pTQkRRVEFlRncweU16RXlNakl3T1RNek1ESmFGdzB5TkRFeQpNakV3T1RNek1ESmFNQlV4RXpBUkJnTlZCQU1NQ2tWNFlXMXdiR1VnUTBFd2dnRWlNQTBHQ1NxR1NJYjNEUUVCCkFRVUFBNElCRHdBd2dnRUtBb0lCQVFDaW1jaWQ4VWx4VzA4a1RTcmc1UnAzTlMvSmFMQWt3bVZzeWdEanc0TUEKSjh6Q2FWWHFmU2xpbCtTRFdLcllRYUtPQ1JRWjlWdXBwODl4UnRJTkpUVmlBZUpHYzh6SDY2Sy82aUZJZ2N4ZQplczVaaDdqQXdENzZ4eEtMUjJPbkRSb0xpVlFVOGxkekVNclVHRytCOXJ1TzFsNjkxNlRjQ0dqS3VGUklQNzJCCjlJcEI0ekxZUUNLWldmZ1cxVmU0alpYTUZ0MVhUc0dWdkhCaEt0MSt5eXMrNnc3WndxMW43NysxdXcya2dmM3cKaXNCbXBzTlRPVVJSZzVvdEdYVUUxaGl3dC9KeW9PQkt1YmVyY2dwd05OYzAvNHZ6eWRHMm83UFFpTHcyallPbwppbFptYUZzVXEyclU4S0hCdWlSbVkyTXlOWEU2R0liY29sVGZRQWM2NE5EWEFnTUJBQUdqVXpCUk1CMEdBMVVkCkRnUVdCQlNOZC9vYTkyemFGWFNaRVJoRXJMSElqRE8zYWpBZkJnTlZIU01FR0RBV2dCU05kL29hOTJ6YUZYU1oKRVJoRXJMSElqRE8zYWpBUEJnTlZIUk1CQWY4RUJUQURBUUgvTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElCQVFBTwpjMDNIYWFDRHhhR0phdzlrYkJxMW1DbUVvR3pWZ0loYkhveTQ0Q0IxbGpnS0xOWHo2bnZ5bDVCdWRzWXJkT1lXCmJMMEJGdGxLbWRqeUFHemtnOThGSkpVNExTVFM1ZDNySlBkQU1lcXFOQ2R5NVh0c2l2VDlIbzh5QVBiUGFmZlkKTmozN29JVEQrdXhQbTNVMGhOTU5YSGdGdnJ4bGV6U2MyOHFWL1VxVDBWcnNJR3IyblNiaEYrR3g1WS92aTZocQp5RTJsYWJXdDQ3VlBYcTNFL2lHRWhTSmFndTdhN2xBSDhYWWlqMUtCMkU4bjlERy80R2ZDMEVpTnNXbUpzWVNjCk9tdXlmRGpXaHQ2LzlUVkh4YkNZMzZGQ08vOTcraThqUGhxVlkxRlJzUG5WRUtiRXBNemdXb3Y0UXNKeHoxS3gKdHN2eHlVRnJsaU5wUk1OQmVEODIKLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo= kind: Secret metadata: name: tls-secret-cacert namespace: default type: Opaque  ","version":"Next","tagName":"h2"},{"title":"ç½‘å…³ä¸åç«¯æœåŠ¡åŒå‘è®¤è¯ï¼ˆMTLS)â€‹","type":1,"pageTitle":"é€šè¿‡Ingress Annotationå®ç°é«˜é˜¶æµé‡æ²»ç†","url":"/zh-cn/docs/user/annotation-use-case#ç½‘å…³ä¸åç«¯æœåŠ¡åŒå‘è®¤è¯mtls","content":"é»˜è®¤æƒ…å†µä¸‹ï¼ŒHigressé»˜è®¤ä½¿ç”¨HTTPåè®®è½¬å‘è¯·æ±‚åˆ°åç«¯ä¸šåŠ¡å®¹å™¨ã€‚ä½ å¯ä»¥é€šè¿‡ä½¿ç”¨æ³¨è§£higress.io/backend-protocol: &quot;HTTPS&quot;é…ç½®Higressè®¿é—®åç«¯æœåŠ¡ä½¿ç”¨HTTPSåè®®ï¼Œä½†è¿™æ˜¯å•å‘TLSï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰Higressä¼šéªŒè¯åç«¯æœåŠ¡æä¾›çš„è¯ä¹¦ï¼Œä¸”ä¸€èˆ¬åç«¯æœåŠ¡ä½¿ç”¨çš„è¯ä¹¦éœ€è¦æ˜¯æƒå¨CAç­¾å‘çš„ã€‚å¦ä¸€ç§æ›´å®‰å…¨çš„æ¨¡å¼æ˜¯é›¶ä¿¡ä»»ï¼Œç½‘å…³ä¼šéªŒè¯åç«¯æœåŠ¡çš„è¯ä¹¦æ˜¯å¦åˆæ³•ï¼ŒåŒæ ·åç«¯æœåŠ¡ä¹Ÿä¼šéªŒè¯ç½‘å…³æä¾›çš„è¯ä¹¦æ˜¯å¦åˆæ³•ï¼Œè¿™å°±æ˜¯MTLSï¼Œç½‘å…³ä¸åç«¯æœåŠ¡è¿›è¡ŒåŒå‘è®¤è¯ã€‚ higress.io/proxy-ssl-secretï¼šç½‘å…³ä½¿ç”¨çš„å®¢æˆ·ç«¯è¯ä¹¦ï¼Œç”¨äºåç«¯æœåŠ¡å¯¹ç½‘å…³è¿›è¡Œèº«ä»½è®¤è¯ï¼Œæ ¼å¼ä¸º secretNamespace/secretNameã€‚higress.io/proxy-ssl-nameï¼šTLSæ¡æ‰‹æœŸé—´ä½¿ç”¨çš„SNIã€‚higress.io/proxy-ssl-server-nameï¼šon or offã€‚å¼€å¯æˆ–å…³é—­TLSæ¡æ‰‹æœŸé—´ä½¿ç”¨SNIã€‚ ç½‘å…³ä¸åç«¯æœåŠ¡è¿›è¡ŒåŒå‘è®¤è¯ï¼Œç½‘å…³ä½¿ç”¨çš„secret nameä¸ºgateway-certï¼Œå‘½åç©ºä¸ºdefaultã€‚ apiVersion: networking.k8s.io/v1 kind: Ingress metadata: annotations: higress.io/proxy-ssl-secret: &quot;default/gateway-cert&quot; name: demo spec: ingressClassName: higress rules: - host: example.com http: paths: - backend: service: name: demo-service port: number: 80 path: /test pathType: Exact  ","version":"Next","tagName":"h2"},{"title":"Mcp Bridge é…ç½®è¯´æ˜","type":0,"sectionRef":"#","url":"/zh-cn/docs/user/mcp-bridge","content":"","keywords":"discovery","version":"Next"},{"title":"McpBridge å­—æ®µè¯´æ˜â€‹","type":1,"pageTitle":"Mcp Bridge é…ç½®è¯´æ˜","url":"/zh-cn/docs/user/mcp-bridge#mcpbridge-å­—æ®µè¯´æ˜","content":"å­—æ®µ\tç±»å‹\tè¯´æ˜\tç¤ºä¾‹å€¼\tæ˜¯å¦å¿…å¡«registries\tRegistryConfig æ•°ç»„\tæ”¯æŒé…ç½®å¤šä¸ªä¸åŒæ³¨å†Œä¸­å¿ƒçš„æœåŠ¡æ¥æº\t[]\tå¦ ","version":"Next","tagName":"h2"},{"title":"RegistryConfig å­—æ®µè¯´æ˜â€‹","type":1,"pageTitle":"Mcp Bridge é…ç½®è¯´æ˜","url":"/zh-cn/docs/user/mcp-bridge#registryconfig-å­—æ®µè¯´æ˜","content":"å­—æ®µ\tç±»å‹\tè¯´æ˜\tç¤ºä¾‹å€¼\tæ˜¯å¦å¿…å¡«type\tå­—ç¬¦ä¸²\tæœåŠ¡å‘ç°ç±»å‹ï¼Œå¯é€‰é¡¹ï¼šnacos,nacos2,zookeeper,consul,eureka,static,dns\tnacos2\tæ˜¯ name\tå­—ç¬¦ä¸²\tè‡ªå®šä¹‰çš„æœåŠ¡æ¥æºåç§°\tmy-nacos\tæ˜¯ domain\tå­—ç¬¦ä¸²\tæœåŠ¡å‘ç°åœ°å€ï¼Œä¸€èˆ¬æ˜¯æ³¨å†Œä¸­å¿ƒåœ°å€; å½“ç±»å‹æ˜¯staticæˆ–dnsæ—¶ï¼Œè¿™ä¸ªå­—æ®µç”¨äºç›´æ¥é…ç½®åç«¯åœ°å€\t192.168.1.2\tæ˜¯ port\tæ•´æ•°\tæ³¨å†Œä¸­å¿ƒè®¿é—®ç«¯å£\t8848\tæ˜¯ zkServicesPath\tå­—ç¬¦ä¸²æ•°ç»„\tä½¿ç”¨zkæ—¶,å¡«å†™æœåŠ¡æ³¨å†Œçš„æ ¹è·¯å¾„,é»˜è®¤ç›‘å¬ /dubbo å’Œ /servicesï¼Œå‰è€…ä¸ºdubbo æœåŠ¡é»˜è®¤æ ¹è·¯å¾„ï¼Œåè€…ä¸ºSpringCloudæœåŠ¡é»˜è®¤æ ¹è·¯å¾„\t[&quot;/service-provider&quot;]\tå¦ nacosNamespaceId\tå­—ç¬¦ä¸²\tnacoså‘½åç©ºé—´id\td8ac64f3-xxxx-xxxx-xxxx-47a814ecf358\tå¦ nacosGroups\tå­—ç¬¦ä¸²æ•°ç»„\tnacosæœåŠ¡åˆ†ç»„åˆ—è¡¨\t[&quot;DEFAULT_GROUP&quot;]\tå¦ nacosAccessKey\tå­—ç¬¦ä¸²\tnacoséœ€è¦è®¤è¯æ—¶å¡«å†™çš„akä¿¡æ¯\txxxx\tå¦ nacosSecretKey\tå­—ç¬¦ä¸²\tnacoséœ€è¦è®¤è¯æ—¶å¡«å†™çš„skä¿¡æ¯\txxxx\tå¦ nacosRefreshInterval\tæ•´æ•°\tnacoséœ€è¦è®¤è¯æ—¶å¡«å†™çš„æœåŠ¡åˆ·æ–°é—´éš”çº³ç§’æ•°\t30000000000ï¼ˆ30ç§’ï¼‰\tå¦ consulDatacenter\tå­—ç¬¦ä¸²\tconsuléœ€è¦è®¤è¯æ—¶å¡«å†™çš„æ•°æ®ä¸­å¿ƒåç§°\tdc1\tå¦ consulServiceTag\tå­—ç¬¦ä¸²\tconsuléœ€è¦è®¤è¯æ—¶å¡«å†™çš„æœåŠ¡æ ‡ç­¾è¿‡æ»¤\thigress\tå¦ consulRefreshInterval\tæ•´æ•°\tconsuléœ€è¦è®¤è¯æ—¶å¡«å†™çš„æœåŠ¡åˆ·æ–°é—´éš”çº³ç§’æ•°\t30000000000ï¼ˆ30ç§’ï¼‰\tå¦ authSecretName\tå­—ç¬¦ä¸²\tæœåŠ¡å‘ç°è®¤è¯ä¿¡æ¯ Secret åç§°, å…·ä½“çœ‹ä¸‹é¢è¯´æ˜\thigress-nacos-auth\tå¦ ","version":"Next","tagName":"h2"},{"title":"authSecretName å­—æ®µè¯´æ˜â€‹","type":1,"pageTitle":"Mcp Bridge é…ç½®è¯´æ˜","url":"/zh-cn/docs/user/mcp-bridge#authsecretname-å­—æ®µè¯´æ˜","content":"æœåŠ¡å‘ç°æ¥æºè®¤è¯ä¿¡æ¯ä¿å­˜åœ¨ higress-system å‘½åç©ºé—´ä¸‹å¯¹åº” Secret ä¸‹ ï¼Œç°åœ¨æ”¯æŒ nacos å’Œ consul æœåŠ¡å‘ç°ã€‚ nacos è®¤è¯ä¿¡æ¯åŒ…å«ç”¨æˆ·åå’Œå¯†ç ï¼Œ consul è®¤è¯ä¿¡æ¯åŒ…å«è®¤è¯ tokenï¼Œ å…·ä½“ Secret é…ç½®æ ·ä¾‹å¦‚ä¸‹ï¼š ","version":"Next","tagName":"h2"},{"title":"nacos è®¤è¯â€‹","type":1,"pageTitle":"Mcp Bridge é…ç½®è¯´æ˜","url":"/zh-cn/docs/user/mcp-bridge#nacos-è®¤è¯","content":"apiVersion: v1 data: nacosPassword: aGlncmVzcw== nacosUsername: aGlncmVzcw== kind: Secret metadata: name: higress-nacos-auth namespace: higress-system type: Opaque  ","version":"Next","tagName":"h3"},{"title":"consul è®¤è¯â€‹","type":1,"pageTitle":"Mcp Bridge é…ç½®è¯´æ˜","url":"/zh-cn/docs/user/mcp-bridge#consul-è®¤è¯","content":"apiVersion: v1 data: consulToken: NGFkZDE2NjUtNTM5NC03YzU1LTIzYTUtNzA4MDZkNTFiYzQy kind: Secret metadata: name: higress-consul-auth namespace: higress-system type: Opaque  ","version":"Next","tagName":"h3"},{"title":"æ”¯æŒé…ç½®é™æ€çš„æœåŠ¡å‘ç°æ–¹å¼â€‹","type":1,"pageTitle":"Mcp Bridge é…ç½®è¯´æ˜","url":"/zh-cn/docs/user/mcp-bridge#æ”¯æŒé…ç½®é™æ€çš„æœåŠ¡å‘ç°æ–¹å¼","content":"","version":"Next","tagName":"h2"},{"title":"é€šè¿‡å›ºå®šIPå‘ç°æœåŠ¡â€‹","type":1,"pageTitle":"Mcp Bridge é…ç½®è¯´æ˜","url":"/zh-cn/docs/user/mcp-bridge#é€šè¿‡å›ºå®šipå‘ç°æœåŠ¡","content":"apiVersion: networking.higress.io/v1 kind: McpBridge metadata: name: default namespace: higress-system spec: registries: - domain: &quot;1.1.1.1:80,2.2.2.2:80&quot; name: test port: 80 type: static  ","version":"Next","tagName":"h3"},{"title":"é€šè¿‡DNSåŸŸåå‘ç°æœåŠ¡â€‹","type":1,"pageTitle":"Mcp Bridge é…ç½®è¯´æ˜","url":"/zh-cn/docs/user/mcp-bridge#é€šè¿‡dnsåŸŸåå‘ç°æœåŠ¡","content":"apiVersion: networking.higress.io/v1 kind: McpBridge metadata: name: default namespace: higress-system spec: registries: - domain: www.alibaba.com name: alibaba port: 80 type: dns  ","version":"Next","tagName":"h3"},{"title":"é€šè¿‡ OpenKruise Rollout å®ç°ç°åº¦å‘å¸ƒ","type":0,"sectionRef":"#","url":"/zh-cn/docs/user/kruise-rollout","content":"","keywords":"rollout gray","version":"Next"},{"title":"ä»€ä¹ˆæ˜¯Kruise Rolloutâ€‹","type":1,"pageTitle":"é€šè¿‡ OpenKruise Rollout å®ç°ç°åº¦å‘å¸ƒ","url":"/zh-cn/docs/user/kruise-rollout#ä»€ä¹ˆæ˜¯kruise-rollout","content":"Kruise Rollout æ˜¯é˜¿é‡Œäº‘å¼€æºçš„äº‘åŸç”Ÿåº”ç”¨è‡ªåŠ¨åŒ–ç®¡ç†å¥—ä»¶ OpenKruise åœ¨æ¸è¿›å¼äº¤ä»˜é¢†åŸŸçš„æ–°å°è¯•ï¼Œæ”¯æŒé…åˆæµé‡å’Œå®ä¾‹ç°åº¦çš„é‡‘ä¸é›€å‘å¸ƒã€è“ç»¿å‘å¸ƒã€A/B Testing å‘å¸ƒï¼Œä»¥åŠå‘å¸ƒè¿‡ç¨‹èƒ½å¤ŸåŸºäº Prometheus Metrics æŒ‡æ ‡è‡ªåŠ¨åŒ–åˆ†æ‰¹ä¸æš‚åœï¼Œå¹¶æä¾›æ—è·¯çš„æ— æ„Ÿå¯¹æ¥ã€å…¼å®¹å·²æœ‰çš„å¤šç§å·¥ä½œè´Ÿè½½ï¼ˆDeploymentã€CloneSetã€DaemonSetï¼‰ã€‚ è¿™é‡Œï¼Œç†Ÿæ‚‰ Kubernetes çš„å°ä¼™ä¼´å¯ä»¥ä¼šç–‘æƒ‘ï¼Œå®˜æ–¹çš„ Deployment å·¥ä½œè´Ÿè½½ä¸æ˜¯æœ‰æ§åˆ¶å‘å¸ƒçš„ç­–ç•¥å—ï¼Ÿæˆ‘ä»¬ä¸ºä»€ä¹ˆè¿˜éœ€è¦ Kruise Rollout å‘¢ï¼Ÿ é¦–å…ˆï¼ŒKubernetes å®˜æ–¹çš„ Deployment ä¸­å®šä¹‰å‘å¸ƒç­–ç•¥ä¸¥æ ¼ä¸Šä¸ç¬¦åˆæ¸è¿›æ€§äº¤ä»˜çš„æ€æƒ³ï¼Œå®ƒå®é™…æ˜¯æ»šåŠ¨å‘å¸ƒã€‚è™½ç„¶ Deployment å¯¹äºå‡çº§è€Œè¨€æä¾›äº† maxUnavailable å’Œ maxSurge ä¸¤ä¸ªå‚æ•°ï¼Œä½†æ˜¯æœ¬è´¨ä¸Šæ¥è®² Deployment å®ƒåªæ”¯æŒæµå¼çš„ä¸€æ¬¡æ€§å‘å¸ƒï¼Œç”¨æˆ·å¹¶ä¸èƒ½æ§åˆ¶åˆ†æ‰¹ä»¥åŠç²¾ç»†åŒ–çš„æµé‡ç­–ç•¥ã€‚æ¯”å¦‚ç”¨æˆ·æ— æ³•ä¸¥æ ¼æ§åˆ¶æ–°è€ç‰ˆæœ¬ä¹‹é—´çš„æµé‡æ¯”ä¾‹ï¼Œåªèƒ½æ ¹æ®å®é™… Pod æ•°é‡å æ¯”ä»¥åŠè°ƒç”¨ç«¯çš„è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼›ç”¨æˆ·æ— æ³•åš A/B testing ç­–ç•¥ï¼Œä¾‹å¦‚é™åˆ¶å…¬å¸å†…éƒ¨å‘˜å·¥å¯ä»¥è®¿é—®æ–°ç‰ˆæœ¬ã€‚å½“æ–°ç‰ˆæœ¬å‡ºç°é—®é¢˜ï¼Œåªèƒ½é‡æ–°æ‰§è¡Œä¸€éæ»šåŠ¨å‘å¸ƒåˆ‡å›è€ç‰ˆæœ¬ï¼Œè¿™æ ·ä¸ä»…å›æ»šé€Ÿåº¦æ…¢ï¼Œè€Œä¸”é¢‘ç¹çº¿ä¸Šå˜æ›´æœ¬èº«å°±å…·æœ‰æé«˜çš„ä¸ç¨³å®šå› ç´ ã€‚ å†è€…ï¼ŒKubernetes åªæä¾›äº†åº”ç”¨äº¤ä»˜çš„ Deployment æ§åˆ¶å™¨ï¼Œä»¥åŠé’ˆå¯¹æµé‡çš„ Ingressã€Service æŠ½è±¡ï¼Œä½†æ˜¯å¦‚ä½•å°†ä¸Šè¿°å®ç°ç»„åˆæˆå¼€ç®±å³ç”¨çš„æ¸è¿›å¼äº¤ä»˜æ–¹æ¡ˆï¼ŒKubernetes å¹¶æ²¡æœ‰å‡ºæ ‡å‡†çš„å®šä¹‰ã€‚ å‡ºäºä»¥ä¸Šé—®é¢˜å’Œè€ƒé‡ï¼Œé˜¿é‡Œäº‘å¼€å§‹å‘èµ·å¯¹æ¸è¿›å¼é¢†åŸŸçš„æ¢ç´¢ï¼Œç»“åˆå¤šå¹´æ¥å®¹å™¨åŒ–ã€äº‘åŸç”Ÿçš„æŠ€æœ¯æ²‰æ·€ï¼Œæ¨å‡ºäº†æ— ä¾µå…¥ã€å¯æ‰©å±•ã€é«˜æ˜“ç”¨çš„æ¸è¿›å¼äº¤ä»˜æ¡†æ¶ Kruise Rolloutã€‚ ","version":"Next","tagName":"h2"},{"title":"Higress & Kruise Rolloutå·¥ä½œæœºåˆ¶â€‹","type":1,"pageTitle":"é€šè¿‡ OpenKruise Rollout å®ç°ç°åº¦å‘å¸ƒ","url":"/zh-cn/docs/user/kruise-rollout#higress--kruise-rolloutå·¥ä½œæœºåˆ¶","content":"ç®€å•ä»‹ç»ä¸€ä¸‹ Higress å’Œ Kruise Rollout åœ¨ä¸€æ¬¡åº”ç”¨å‘å¸ƒè¿‡ç¨‹ä¸­çš„å·¥ä½œæœºåˆ¶ã€‚  è¿™é‡Œï¼Œå‡è®¾é›†ç¾¤ä¸­æœ‰ä¸€ä¸ª Deployment åº”ç”¨Aï¼Œé€šè¿‡ Higress ç½‘å…³å¯¹å¤–æš´éœ²æä¾›æœåŠ¡ã€‚åº”ç”¨Aç”±äºä¸šåŠ¡å‘å±•ï¼Œéœ€è¦å‘å¸ƒæ–°åŠŸèƒ½ã€‚ ç”¨æˆ·é¦–å…ˆåœ¨é›†ç¾¤ä¸­æ·»åŠ æ¸è¿›æ€§äº¤ä»˜ç­–ç•¥ï¼ˆRollout CRDèµ„æºï¼‰ï¼Œæè¿°ç›®æ ‡å·¥ä½œè´Ÿè½½çš„äº¤ä»˜ç­–ç•¥ï¼Œæ¯”å¦‚æ‰¹æ¬¡ï¼Œæ¯ä¸€æ‰¹æ¬¡çš„æµé‡æ§åˆ¶ï¼Œä»¥åŠå…³è”çš„ Service èµ„æºå’Œ Ingress èµ„æºã€‚åº”ç”¨Aå‘å¸ƒæ–°ç‰ˆæœ¬ï¼Œç”¨æˆ·ä¿®æ”¹é›†ç¾¤ä¸Šä¸­ç›®æ ‡Deploymentçš„Podæ¨¡æ¿ä¸­å®¹å™¨é•œåƒä¸ºæ–°ç‰ˆæœ¬ã€‚Kruise Rollouté€šè¿‡hookæ–¹å¼å‚ä¸åˆ°Deploymentæ»šåŠ¨å‘å¸ƒæµç¨‹ï¼Œä¿®æ”¹Deploymentçš„Pauseæ¥æš‚åœæ»šåŠ¨å‘å¸ƒè¿‡ç¨‹ã€‚æ‰§è¡Œç¬¬ä¸€æ¬¡æ‰¹æ¬¡å‘å¸ƒï¼Œæ ¹æ®Rollout CRDèµ„æºæè¿°çš„äº¤ä»˜ç­–ç•¥ï¼Œæ§åˆ¶æ–°ç‰ˆæœ¬çš„Podæ•°é‡ï¼ŒåŒæ—¶ä¸ºæ­£å¼Ingressèµ„æºç”Ÿæˆå¯¹åº”çš„ç°åº¦Ingressèµ„æºï¼Œå¹¶é…ç½®ç°åº¦æµé‡ç­–ç•¥ï¼Œæ¯”å¦‚æµé‡æƒé‡æ¯”æˆ–è€…æ ¹æ®è¯·æ±‚å†…å®¹Headerè¿›è¡Œæµé‡åˆ†å‘ã€‚Higressç›‘å¬åˆ°Ingressèµ„æºå˜åŒ–ï¼Œå®æ—¶åŠ¨æ€ä¿®æ”¹è·¯ç”±è§„åˆ™ï¼Œæ»¡è¶³ç°åº¦è§„åˆ™çš„æµé‡è¢«åˆ†å‘åˆ°æ–°ç‰ˆæœ¬ã€‚é€šè¿‡Prometheusç­‰ç›‘æ§æ‰‹æ®µè§‚å¯Ÿåº”ç”¨æµé‡çš„æŒ‡æ ‡ä¿¡æ¯ï¼ŒéªŒè¯æ–°ç‰ˆæœ¬æ˜¯å¦ç¬¦åˆé¢„æœŸã€‚ a. å¦‚æœç¬¦åˆé¢„æœŸï¼Œè§¦å‘ä¸‹ä¸€æ¬¡æ‰¹æ¬¡å‘å¸ƒï¼Œé‡å¤æ‰§è¡Œæ­¥éª¤4 b. å¦‚æœä¸ç¬¦åˆé¢„æœŸï¼Œè§¦å‘å›æ»šï¼Œæ–°å‘å¸ƒçš„Podä¸‹çº¿ï¼Œç°åº¦å·²ä¸‹çº¿çš„éƒ¨åˆ†è€ç‰ˆæœ¬çš„Podï¼ŒIngressèµ„æºè‡ªåŠ¨ä¸‹çº¿ç°åº¦è§„åˆ™ï¼ŒHigresså®æ—¶ä¿®æ”¹è·¯ç”±è§„åˆ™ï¼Œç¡®ä¿æµé‡åªè®¿é—®è€ç‰ˆæœ¬æœåŠ¡ã€‚ æ•´ä¸ª Rollout è¿‡ç¨‹ï¼Œè‡ªåŠ¨æ•´åˆDeploymentã€Serviceã€Ingressä¸€èµ·å·¥ä½œï¼Œå¹¶å‘ç”¨æˆ·å±è”½åº•å±‚èµ„æºå˜åŒ–ã€‚è¿™æ˜¯ä¸ç°æœ‰å·¥ä½œè´Ÿè½½èƒ½åŠ›çš„ä¸€ç§ååŒï¼Œå®ƒå°½é‡å¤ç”¨å·¥ä½œè´Ÿè½½çš„èƒ½åŠ›ï¼Œåˆåšåˆ°äº†é Rollout è¿‡ç¨‹çš„é›¶å…¥ä¾µã€‚ ","version":"Next","tagName":"h2"},{"title":"å®æˆ˜â€‹","type":1,"pageTitle":"é€šè¿‡ OpenKruise Rollout å®ç°ç°åº¦å‘å¸ƒ","url":"/zh-cn/docs/user/kruise-rollout#å®æˆ˜","content":"","version":"Next","tagName":"h2"},{"title":"å‰ææ¡ä»¶â€‹","type":1,"pageTitle":"é€šè¿‡ OpenKruise Rollout å®ç°ç°åº¦å‘å¸ƒ","url":"/zh-cn/docs/user/kruise-rollout#å‰ææ¡ä»¶","content":"å®‰è£…Higressï¼Œè¯·å‚é˜…å®‰è£…éƒ¨ç½²å®‰è£…Kruise Rollout helm install kruise-rollout openkruise/kruise-rollout --version 0.3.0-rc.0  å®‰è£…kubectl-kruiseå‘½ä»¤è¡Œå·¥å…·ï¼Œè¯·å‚é˜…å®‰è£…kubectl-kruise ","version":"Next","tagName":"h3"},{"title":"é‡‘ä¸é›€å‘å¸ƒâ€‹","type":1,"pageTitle":"é€šè¿‡ OpenKruise Rollout å®ç°ç°åº¦å‘å¸ƒ","url":"/zh-cn/docs/user/kruise-rollout#é‡‘ä¸é›€å‘å¸ƒ","content":"ä»€ä¹ˆæ˜¯é‡‘ä¸é›€å‘å¸ƒâ€‹ é‡‘ä¸é›€å‘å¸ƒçš„æ€æƒ³æ˜¯å°†å°‘é‡çš„è¯·æ±‚å¼•æµåˆ°æ–°ç‰ˆæœ¬ä¸Šï¼Œå› æ­¤éƒ¨ç½²æ–°ç‰ˆæœ¬æœåŠ¡åªéœ€æå°æ•°çš„æœºå™¨ã€‚éªŒè¯æ–°ç‰ˆæœ¬ç¬¦åˆé¢„æœŸåï¼Œé€æ­¥è°ƒæ•´æµé‡æƒé‡æ¯”ä¾‹ï¼Œä½¿å¾—æµé‡æ…¢æ…¢ä»è€ç‰ˆæœ¬è¿ç§»è‡³æ–°ç‰ˆæœ¬ï¼ŒæœŸé—´å¯ä»¥æ ¹æ®è®¾ç½®çš„æµé‡æ¯”ä¾‹ï¼Œå¯¹æ–°ç‰ˆæœ¬æœåŠ¡è¿›è¡Œæ‰©å®¹ï¼ŒåŒæ—¶å¯¹è€ç‰ˆæœ¬æœåŠ¡è¿›è¡Œç¼©å®¹ï¼Œä½¿å¾—åº•å±‚èµ„æºå¾—åˆ°æœ€å¤§åŒ–åˆ©ç”¨ã€‚ å¦‚å›¾ï¼ŒæŸæœåŠ¡å½“å‰ç‰ˆæœ¬ä¸ºv1ï¼Œç°åœ¨æ–°ç‰ˆæœ¬v2è¦ä¸Šçº¿ã€‚ä¸ºç¡®ä¿æµé‡åœ¨æœåŠ¡å‡çº§è¿‡ç¨‹ä¸­å¹³ç¨³æ— æŸï¼Œé‡‡ç”¨é‡‘ä¸é›€å‘å¸ƒæ–¹æ¡ˆï¼Œé€æ­¥å°†æµé‡ä»è€ç‰ˆæœ¬è¿ç§»è‡³æ–°ç‰ˆæœ¬ã€‚  åŸºäºHigress &amp; Kruise Rolloutå®è·µé‡‘ä¸é›€å‘å¸ƒâ€‹ å‡è®¾é›†ç¾¤ä¸­æœ‰ä¸€ä¸ªæœåŠ¡demoï¼Œé€šè¿‡Higressç½‘å…³å¯¹å¤–æä¾›æœåŠ¡ã€‚ apiVersion: apps/v1 kind: Deployment metadata: name: demo spec: replicas: 5 selector: matchLabels: app: demo template: metadata: labels: app: demo spec: containers: - name: main image: registry.cn-hangzhou.aliyuncs.com/mse-ingress/version:v1 imagePullPolicy: Always ports: - containerPort: 8080 --- apiVersion: v1 kind: Service metadata: name: demo spec: ports: - port: 80 targetPort: 8080 protocol: TCP name: http selector: app: demo --- apiVersion: networking.k8s.io/v1 kind: Ingress metadata: name: demo annotations: kubernetes.io/ingress.class: nginx spec: ingressClassName: higress rules: - http: paths: - backend: service: name: demo port: number: 80 path: /version pathType: Exact  ç°åœ¨ï¼ŒæœåŠ¡demoéœ€è¦å‘å¸ƒæ–°ç‰ˆæœ¬ã€‚åœ¨ä¿®æ”¹åº”ç”¨é•œåƒä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºæœåŠ¡demoå®šä¹‰é‡‘ä¸é›€å‘å¸ƒç­–ç•¥ï¼Œä»¥è¾¾åˆ°æ¸è¿›å¼å‘å¸ƒçš„æ•ˆæœã€‚ apiVersion: rollouts.kruise.io/v1alpha1 kind: Rollout metadata: name: rollouts-demo spec: objectRef: workloadRef: apiVersion: apps/v1 kind: Deployment name: demo strategy: canary: steps: - weight: 10 pause: {} replicas: 1 - weight: 30 pause: {} replicas: 2 trafficRoutings: - service: demo ingress: classType: higress name: demo  å…¶ä¸­workloadRef æ—è·¯å¼çš„é€‰æ‹©éœ€è¦ Rollout çš„ Workloadï¼Œæ­¤å¤„ä¸ºDeploymentï¼Œæ”¯æŒå…¶ä»–Workloadï¼ˆå¦‚CloneSetã€DaemonSetï¼‰ã€‚å…¶ä¸­canary.Steps å®šä¹‰äº†æ•´ä¸ª Rollout è¿‡ç¨‹ä¸€å…±åˆ†ä¸º3æ‰¹ï¼Œå…¶ä¸­ç¬¬ä¸€æ‰¹åªç°åº¦ä¸€ä¸ªæ–°ç‰ˆæœ¬ Podï¼Œå¹¶ä¸” routing 10% æµé‡åˆ°æ–°ç‰ˆæœ¬ Podï¼Œå¹¶ä¸”éœ€è¦äººå·¥ç¡®è®¤æ˜¯å¦ç»§ç»­å‘å¸ƒï¼›ç¬¬äºŒæ‰¹åªç°åº¦ä¸¤ä¸ªæ–°ç‰ˆæœ¬Podï¼Œå¹¶ä¸”routing 30%æµé‡åˆ°æ–°ç‰ˆæœ¬Podï¼Œå¹¶ä¸”éœ€è¦äººå·¥ç¡®è®¤æ˜¯å¦ç»§ç»­å‘å¸ƒï¼›æœ€åä¸€æ‰¹ï¼Œæ— éœ€å®šä¹‰ï¼Œå³å…¨é‡å‘å¸ƒã€‚å…¶ä¸­trafficRoutingsæŒ‡å‘äº†éœ€è¦æ„ŸçŸ¥æµé‡è§„åˆ™çš„èµ„æºï¼Œkruise rolloutä¼šè‡ªåŠ¨æ›´æ–°ç›¸å…³èµ„æºï¼Œå®æ—¶åå°„ç›®æ ‡æµé‡è§„åˆ™ã€‚ ä¿®æ”¹æœåŠ¡Açš„Deploymentä¸­é•œåƒä¸ºregistry.cn-hangzhou.aliyuncs.com/mse-ingress/version:v2ï¼Œè§‚å¯Ÿç›¸å…³èµ„æºå˜åŒ–ã€‚ æŸ¥çœ‹rolloutèµ„æºçŠ¶æ€ï¼Œå‘ç°å½“å‰æ‰§è¡Œå®Œç¬¬ä¸€æ‰¹å‘å¸ƒï¼Œå¹¶ä¸”å‡ºäºæš‚åœçŠ¶æ€ï¼Œéœ€è¦äººå·¥ç¡®è®¤æ‰èƒ½ç»§ç»­ä¸‹ä¸€æ‰¹æ¬¡å‘å¸ƒã€‚ æŸ¥çœ‹podçŠ¶æ€ï¼Œå‘ç°æ–°ç‰ˆæœ¬podåªæœ‰ä¸€ä¸ªï¼ŒDeploymentèµ„æºæ²¡æœ‰å…¨éƒ¨æ»šåŠ¨å‘å¸ƒã€‚ æŸ¥çœ‹Ingressçš„è§£æIP ï¼ˆå³Higressç½‘å…³å¯¹å¤–çš„å…¬ç½‘IPåœ°å€ï¼‰ã€‚ æµ‹è¯•æµé‡ï¼Œå‘ç°æœ‰10%æµé‡è®¿é—®æ–°ç‰ˆæœ¬ã€‚ ç»§ç»­ç¬¬äºŒæ‰¹æ¬¡å‘å¸ƒï¼ŒæŸ¥çœ‹å½“å‰PodçŠ¶æ€ï¼Œå‘ç°æ–°ç‰ˆæœ¬Podæœ‰ä¸¤ä¸ªã€‚ æµ‹è¯•æµé‡ï¼Œè§‚å¯Ÿæµé‡åˆ†é…æ¯”ã€‚ å‘å¸ƒæœ€åä¸€æ‰¹ï¼Œå®Œæˆå…¨é‡å‘å¸ƒã€‚ æµ‹è¯•æµé‡ï¼Œå‘ç°æµé‡å…¨éƒ¨è½¬å‘è‡³æ–°ç‰ˆæœ¬ã€‚è‡³æ­¤ï¼Œæˆ‘ä»¬é€šè¿‡å°æµé‡çš„æ–¹å¼é€æ­¥å°†æµé‡ä»è€ç‰ˆæœ¬è¿ç§»è‡³æ–°ç‰ˆæœ¬ã€‚ ","version":"Next","tagName":"h3"},{"title":"A/B Testingâ€‹","type":1,"pageTitle":"é€šè¿‡ OpenKruise Rollout å®ç°ç°åº¦å‘å¸ƒ","url":"/zh-cn/docs/user/kruise-rollout#ab-testing","content":"ä»€ä¹ˆæ˜¯A/B Testingâ€‹ ç›¸æ¯”äºåŸºäºæƒé‡æ–¹å¼çš„é‡‘ä¸é›€å‘å¸ƒï¼ŒA/Bæµ‹è¯•åŸºäºç”¨æˆ·è¯·æ±‚çš„å…ƒä¿¡æ¯å°†æµé‡è·¯ç”±åˆ°æ–°ç‰ˆæœ¬ï¼Œè¿™æ˜¯ä¸€ç§åŸºäºè¯·æ±‚å†…å®¹åŒ¹é…çš„ç°åº¦å‘å¸ƒç­–ç•¥ã€‚åªæœ‰åŒ¹é…ç‰¹å®šè§„åˆ™çš„è¯·æ±‚æ‰ä¼šè¢«å¼•æµåˆ°æ–°ç‰ˆæœ¬ï¼Œå¸¸è§çš„åšæ³•åŒ…æ‹¬åŸºäºHttp Headerå’ŒCookieã€‚åŸºäºHttp Headeræ–¹å¼çš„ä¾‹å­ï¼Œä¾‹å¦‚User-Agentçš„å€¼ä¸ºAndroidçš„è¯·æ±‚ ï¼ˆæ¥è‡ªå®‰å“ç³»ç»Ÿçš„è¯·æ±‚ï¼‰å¯ä»¥è®¿é—®æ–°ç‰ˆæœ¬ï¼Œå…¶ä»–ç³»ç»Ÿä»ç„¶è®¿é—®æ—§ç‰ˆæœ¬ã€‚åŸºäºCookieæ–¹å¼çš„ä¾‹å­ï¼ŒCookieä¸­é€šå¸¸åŒ…å«å…·æœ‰ä¸šåŠ¡è¯­ä¹‰çš„ç”¨æˆ·ä¿¡æ¯ï¼Œä¾‹å¦‚æ™®é€šç”¨æˆ·å¯ä»¥è®¿é—®æ–°ç‰ˆæœ¬ï¼ŒVIPç”¨æˆ·ä»ç„¶è®¿é—®æ—§ç‰ˆæœ¬ã€‚ å¦‚å›¾ï¼ŒæŸæœåŠ¡å½“å‰ç‰ˆæœ¬ä¸ºv1ï¼Œç°åœ¨æ–°ç‰ˆæœ¬v2è¦ä¸Šçº¿ã€‚å¸Œæœ›å®‰å“ç”¨æˆ·å¯ä»¥å°é²œæ–°åŠŸèƒ½ï¼Œå…¶ä»–ç³»ç»Ÿç”¨æˆ·ä¿æŒä¸å˜ã€‚ é€šè¿‡åœ¨ç›‘æ§å¹³å°è§‚å¯Ÿæ—§ç‰ˆæœ¬ä¸æ–°ç‰ˆæœ¬çš„æˆåŠŸç‡ã€RTå¯¹æ¯”ï¼Œå½“æ–°ç‰ˆæœ¬æ•´ä½“æœåŠ¡é¢„æœŸåï¼Œå³å¯å°†æ‰€æœ‰è¯·æ±‚åˆ‡æ¢åˆ°æ–°ç‰ˆæœ¬v2ï¼Œæœ€åä¸ºäº†èŠ‚çœèµ„æºï¼Œå¯ä»¥é€æ­¥ä¸‹çº¿åˆ°æ—§ç‰ˆæœ¬v1ã€‚ åŸºäºHigress &amp; Kruise Rolloutå®è·µA/B Testingâ€‹ æˆ‘ä»¬ä»ç„¶åˆ©ç”¨ä¸Šé¢çš„ä¾‹å­ï¼ŒæœåŠ¡Aåˆå§‹é•œåƒä¸ºv1ã€‚ç°åœ¨ï¼ŒæœåŠ¡demoéœ€è¦å‘å¸ƒæ–°ç‰ˆæœ¬ã€‚åœ¨ä¿®æ”¹åº”ç”¨é•œåƒä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºæœåŠ¡demoå®šä¹‰A/B Testing ç­–ç•¥ï¼Œä»¥è¾¾åˆ°æ¸è¿›å¼å‘å¸ƒçš„æ•ˆæœã€‚ apiVersion: rollouts.kruise.io/v1alpha1 kind: Rollout metadata: name: rollouts-header spec: objectRef: workloadRef: apiVersion: apps/v1 kind: Deployment name: demo strategy: canary: steps: - matches: - headers: - name: user-agent value: android pause: {} replicas: 1 trafficRoutings: - service: demo ingress: classType: higress name: demo  å…¶ä¸­canary.Steps å®šä¹‰äº†æ•´ä¸ª Rollout è¿‡ç¨‹ä¸€å…±åˆ†ä¸º2æ‰¹ï¼Œå…¶ä¸­ç¬¬ä¸€æ‰¹åªç°åº¦ä¸€ä¸ªæ–°ç‰ˆæœ¬ Podï¼Œå¹¶ä¸”å°†å¸¦æœ‰HTTP Header user-agent: android (å³å®‰å“ç”¨æˆ·ï¼‰çš„æµé‡routing åˆ°æ–°ç‰ˆæœ¬ Podï¼Œå¹¶ä¸”éœ€è¦äººå·¥ç¡®è®¤æ˜¯å¦ç»§ç»­å‘å¸ƒï¼›æœ€åä¸€æ‰¹ï¼Œæ— éœ€å®šä¹‰ï¼Œå³å…¨é‡å‘å¸ƒã€‚ ä¿®æ”¹æœåŠ¡Açš„Deploymentä¸­é•œåƒä¸ºregistry.cn-hangzhou.aliyuncs.com/mse-ingress/version:v2ï¼Œè§‚å¯Ÿç›¸å…³èµ„æºå˜åŒ–ã€‚ æŸ¥çœ‹rolloutèµ„æºçŠ¶æ€ï¼Œå‘ç°å½“å‰æ‰§è¡Œå®Œç¬¬ä¸€æ‰¹å‘å¸ƒï¼Œå¹¶ä¸”å‡ºäºæš‚åœçŠ¶æ€ï¼Œéœ€è¦äººå·¥ç¡®è®¤æ‰èƒ½ç»§ç»­ä¸‹ä¸€æ‰¹æ¬¡å‘å¸ƒã€‚ æŸ¥çœ‹podçŠ¶æ€ï¼Œå‘ç°æ–°ç‰ˆæœ¬podåªæœ‰ä¸€ä¸ªï¼ŒDeploymentèµ„æºæ²¡æœ‰å…¨éƒ¨æ»šåŠ¨å‘å¸ƒã€‚ æµ‹è¯•æ¥è‡ªå®‰å“çš„æµé‡æ˜¯å¦è·¯ç”±åˆ°æ–°ç‰ˆæœ¬ï¼Œéå®‰å“çš„æµé‡æ˜¯å¦è·¯ç”±åˆ°è€ç‰ˆæœ¬ã€‚ å‘å¸ƒæœ€åä¸€æ‰¹ï¼Œå®Œæˆå…¨é‡å‘å¸ƒã€‚å¹¶æµ‹è¯•æ‰€æœ‰æµé‡æ˜¯å¦è·¯ç”±åˆ°æ–°ç‰ˆæœ¬ã€‚ ","version":"Next","tagName":"h3"},{"title":"æ€»ç»“â€‹","type":1,"pageTitle":"é€šè¿‡ OpenKruise Rollout å®ç°ç°åº¦å‘å¸ƒ","url":"/zh-cn/docs/user/kruise-rollout#æ€»ç»“","content":"ç›¸æ¯”äºä¼ ç»Ÿäººå·¥æ‰‹åŠ¨æ–¹å¼ï¼ŒHigress &amp; Kruise Rolloutsæä¾›äº†æ— ä¾µå…¥ã€è‡ªåŠ¨åŒ–è¿ç»´æ–¹å¼è®©åº”ç”¨å‘å¸ƒä¸æ»‘èˆ¬é¡ºç•…ã€‚å¼€å‘è€…æ— éœ€å…³æ³¨å‘å¸ƒè¿‡ç¨‹ä¸­å¦‚ä½•è°ƒæ•´Deploymentã€Ingressã€Serviceç­‰èµ„æºï¼Œåªéœ€å£°æ˜å¹¶ç®¡ç†å‘å¸ƒç­–ç•¥Rolloutsèµ„æºå³å¯ï¼ŒåŸç”ŸDeploymentçš„æ»šåŠ¨å‘å¸ƒä¼šè‡ªåŠ¨å®ç°ä¸ºæ¸è¿›å¼äº¤ä»˜ï¼Œè®©åº”ç”¨å‘å¸ƒå¯æ‰¹æ¬¡ã€å¯ç°åº¦ã€å¯å›æ»šï¼ŒåŠ©åŠ›ä¸šåŠ¡å¿«é€Ÿè¿­ä»£å‘å±•åŒæ—¶ï¼Œä¹Ÿæé«˜äº†åº”ç”¨å‘å¸ƒçš„ç¨³å®šæ€§å’Œæ•ˆç‡é—®é¢˜ã€‚ ","version":"Next","tagName":"h2"},{"title":"è¯·æ±‚/å“åº”è½¬æ¢","type":0,"sectionRef":"#","url":"/zh-cn/docs/plugins/transformation/transformer","content":"","keywords":"higress transformer","version":"Next"},{"title":"åŠŸèƒ½è¯´æ˜â€‹","type":1,"pageTitle":"è¯·æ±‚/å“åº”è½¬æ¢","url":"/zh-cn/docs/plugins/transformation/transformer#åŠŸèƒ½è¯´æ˜","content":"transformer æ’ä»¶å¯ä»¥å¯¹è¯·æ±‚/å“åº”å¤´ã€è¯·æ±‚æŸ¥è¯¢å‚æ•°ã€è¯·æ±‚/å“åº”ä½“å‚æ•°è¿›è¡Œè½¬æ¢ï¼Œæ”¯æŒçš„è½¬æ¢æ“ä½œç±»å‹åŒ…æ‹¬åˆ é™¤ã€é‡å‘½åã€æ›´æ–°ã€æ·»åŠ ã€è¿½åŠ ã€æ˜ å°„ã€å»é‡ã€‚ ","version":"Next","tagName":"h2"},{"title":"é…ç½®å­—æ®µâ€‹","type":1,"pageTitle":"è¯·æ±‚/å“åº”è½¬æ¢","url":"/zh-cn/docs/plugins/transformation/transformer#é…ç½®å­—æ®µ","content":"åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°reqRules\tstring\té€‰å¡«ï¼ŒreqRules å’Œ respRules è‡³å°‘å¡«ä¸€ä¸ª\t-\tè¯·æ±‚è½¬æ¢å™¨é…ç½®ï¼ŒæŒ‡å®šè½¬æ¢æ“ä½œç±»å‹ä»¥åŠè¯·æ±‚å¤´ã€è¯·æ±‚æŸ¥è¯¢å‚æ•°ã€è¯·æ±‚ä½“çš„è½¬æ¢è§„åˆ™ respRules\tstring\té€‰å¡«ï¼ŒreqRules å’Œ respRules è‡³å°‘å¡«ä¸€ä¸ª\t-\tå“åº”è½¬æ¢å™¨é…ç½®ï¼ŒæŒ‡å®šè½¬æ¢æ“ä½œç±»å‹ä»¥åŠå“åº”å¤´ã€å“åº”ä½“çš„è½¬æ¢è§„åˆ™ reqRules å’Œ respRules ä¸­æ¯ä¸€é¡¹çš„é…ç½®å­—æ®µè¯´æ˜å¦‚ä¸‹ï¼š åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°operate\tstring\tå¿…å¡«ï¼Œå¯é€‰å€¼ä¸º remove, rename, replace, add, append, map, dedupe\t-\tæŒ‡å®šè½¬æ¢æ“ä½œç±»å‹ï¼Œæ”¯æŒçš„æ“ä½œç±»å‹æœ‰åˆ é™¤ (remove)ã€é‡å‘½å (rename)ã€æ›´æ–° (replace)ã€æ·»åŠ  (add)ã€è¿½åŠ  (append)ã€æ˜ å°„ (map)ã€å»é‡ (dedupe)ï¼Œå½“å­˜åœ¨å¤šé¡¹ä¸åŒç±»å‹çš„è½¬æ¢è§„åˆ™æ—¶ï¼ŒæŒ‰ç…§ä¸Šè¿°æ“ä½œç±»å‹é¡ºåºä¾æ¬¡æ‰§è¡Œ mapSource\tstring\té€‰å¡«ï¼Œå¯é€‰å€¼ä¸º headers, querys,body\t-\tä»…åœ¨ operate ä¸º map æ—¶æœ‰æ•ˆã€‚æŒ‡å®šæ˜ å°„æ¥æºï¼Œè‹¥ä¸å¡«è¯¥å­—æ®µï¼Œåˆ™é»˜è®¤æ˜ å°„æ¥æºä¸ºè‡ªèº« headers\tarray of object\té€‰å¡«\t-\tæŒ‡å®šè¯·æ±‚/å“åº”å¤´è½¬æ¢è§„åˆ™ querys\tarray of object\té€‰å¡«\t-\tæŒ‡å®šè¯·æ±‚æŸ¥è¯¢å‚æ•°è½¬æ¢è§„åˆ™ body\tarray of object\té€‰å¡«\t-\tæŒ‡å®šè¯·æ±‚/å“åº”ä½“å‚æ•°è½¬æ¢è§„åˆ™ï¼Œè¯·æ±‚ä½“è½¬æ¢å…è®¸ content-type ä¸º application/json, application/x-www-form-urlencoded, multipart/form-dataï¼›å“åº”ä½“è½¬æ¢ä»…å…è®¸ content-type ä¸º application/json headers, querys, body ä¸­æ¯ä¸€é¡¹çš„é…ç½®å­—æ®µè¯´æ˜å¦‚ä¸‹ï¼š åç§°\tæ•°æ®ç±»å‹\tå¡«å†™è¦æ±‚\té»˜è®¤å€¼\tæè¿°key\tstring\té€‰å¡«\t-\tåœ¨ operate ä¸º remove æ—¶ä½¿ç”¨ï¼Œç”¨æ³•è¯¦è§è½¬æ¢æ“ä½œç±»å‹ oldKey\tstring\té€‰å¡«\t-\tåœ¨ operate ä¸º rename æ—¶ä½¿ç”¨ï¼Œç”¨æ³•è¯¦è§è½¬æ¢æ“ä½œç±»å‹ newKey\tstring\té€‰å¡«\t-\tåœ¨ operateä¸º rename æ—¶ä½¿ç”¨ï¼Œç”¨æ³•è¯¦è§è½¬æ¢æ“ä½œç±»å‹ key\tstring\té€‰å¡«\t-\tåœ¨ operate ä¸º replace æ—¶ä½¿ç”¨ï¼Œç”¨æ³•è¯¦è§è½¬æ¢æ“ä½œç±»å‹ newValue\tstring\té€‰å¡«\t-\tåœ¨ operate ä¸º replace æ—¶ä½¿ç”¨ï¼Œç”¨æ³•è¯¦è§è½¬æ¢æ“ä½œç±»å‹ key\tstring\té€‰å¡«\t-\tåœ¨ operate ä¸º add æ—¶ä½¿ç”¨ï¼Œç”¨æ³•è¯¦è§è½¬æ¢æ“ä½œç±»å‹ value\tstring\té€‰å¡«\t-\tåœ¨ operate ä¸º addæ—¶ä½¿ç”¨ï¼Œç”¨æ³•è¯¦è§è½¬æ¢æ“ä½œç±»å‹ key\tstring\té€‰å¡«\t-\tåœ¨ operate ä¸º append æ—¶ä½¿ç”¨ï¼Œç”¨æ³•è¯¦è§è½¬æ¢æ“ä½œç±»å‹ appendValue\tstring\té€‰å¡«\t-\tåœ¨ operate ä¸º append æ—¶ä½¿ç”¨ï¼Œç”¨æ³•è¯¦è§è½¬æ¢æ“ä½œç±»å‹ fromKey\tstring\té€‰å¡«\t-\tåœ¨ operate ä¸º map æ—¶ä½¿ç”¨ï¼Œç”¨æ³•è¯¦è§è½¬æ¢æ“ä½œç±»å‹ toKey\tstring\té€‰å¡«\t-\tåœ¨ operate ä¸º map æ—¶ä½¿ç”¨ï¼Œç”¨æ³•è¯¦è§è½¬æ¢æ“ä½œç±»å‹ key\tstring\té€‰å¡«\t-\tåœ¨ operate ä¸º dedupe æ—¶ä½¿ç”¨ï¼Œç”¨æ³•è¯¦è§è½¬æ¢æ“ä½œç±»å‹ strategy\tstring\té€‰å¡«\t-\tåœ¨ operate ä¸º dedupe æ—¶ä½¿ç”¨ï¼Œç”¨æ³•è¯¦è§è½¬æ¢æ“ä½œç±»å‹ value_type\tstring\té€‰å¡«ï¼Œå¯é€‰å€¼ä¸º object, boolean, number, string\tstring\tå½“ content-type: application/json æ—¶ï¼Œè¯¥å­—æ®µæŒ‡å®šè¯·æ±‚/å“åº”ä½“å‚æ•°çš„å€¼ç±»å‹ host_pattern\tstring\té€‰å¡«\t-\tæŒ‡å®šè¯·æ±‚ä¸»æœºååŒ¹é…è§„åˆ™ï¼Œå½“è½¬æ¢æ“ä½œç±»å‹ä¸º replace, add, append æ—¶æœ‰æ•ˆ path_pattern\tstring\té€‰å¡«\t-\tæŒ‡å®šè¯·æ±‚è·¯å¾„åŒ¹é…è§„åˆ™ï¼Œå½“è½¬æ¢æ“ä½œç±»å‹ä¸º replace, add, append æ—¶æœ‰æ•ˆ æ³¨æ„ï¼š request transformer æ”¯æŒä»¥ä¸‹è½¬æ¢å¯¹è±¡ï¼šè¯·æ±‚å¤´éƒ¨ã€è¯·æ±‚æŸ¥è¯¢å‚æ•°ã€è¯·æ±‚ä½“ï¼ˆapplication/json, application/x-www-form-urlencoded, multipart/form-dataï¼‰response transformer æ”¯æŒä»¥ä¸‹è½¬æ¢å¯¹è±¡ï¼šå“åº”å¤´éƒ¨ã€å“åº”ä½“ï¼ˆapplication/jsonï¼‰æ’ä»¶æ”¯æŒåŒå‘è½¬æ¢èƒ½åŠ›ï¼Œå³å•ä¸ªæ’ä»¶èƒ½å¤Ÿå®Œæˆå¯¹è¯·æ±‚å’Œå“åº”éƒ½åšè½¬æ¢è½¬æ¢æ“ä½œç±»å‹çš„æ‰§è¡Œé¡ºåºï¼Œä¸ºé…ç½®æ–‡ä»¶ä¸­ç¼–å†™çš„é¡ºåºï¼Œå¦‚ï¼šremove â†’ rename â†’ replace â†’ add â†’ append â†’ map â†’ dedupeæˆ–è€…dedupe â†’ map â†’ append â†’ add â†’ replace â†’ rename â†’ removeç­‰å½“è½¬æ¢å¯¹è±¡ä¸º headers æ—¶ï¼Œkey ä¸åŒºåˆ†å¤§å°å†™ï¼›å½“ä¸º headers ä¸”ä¸º rename, map æ“ä½œæ—¶ï¼Œvalue ä¹Ÿä¸åŒºåˆ†å¤§å°å†™ï¼ˆå› ä¸ºæ­¤æ—¶è¯¥å­—æ®µå…·æœ‰ key å«ä¹‰ï¼‰ï¼›è€Œ querys å’Œ body çš„ key, value å­—æ®µå‡åŒºåˆ†å¤§å°å†™value_type ä»…å¯¹ content-type ä¸º application/json çš„è¯·æ±‚/å“åº”ä½“æœ‰æ•ˆhost_pattern å’Œ path_pathern æ”¯æŒ RE2 è¯­æ³•ï¼Œä»…å¯¹ replace, add, append æ“ä½œæœ‰æ•ˆï¼Œä¸”åœ¨ä¸€é¡¹è½¬æ¢è§„åˆ™ä¸­ä¸¤è€…åªèƒ½é€‰å¡«å…¶ä¸€ï¼Œè‹¥å‡å¡«å†™ï¼Œåˆ™ host_pattern ç”Ÿæ•ˆï¼Œè€Œ path_pattern å¤±æ•ˆ ","version":"Next","tagName":"h2"},{"title":"è½¬æ¢æ“ä½œç±»å‹â€‹","type":1,"pageTitle":"è¯·æ±‚/å“åº”è½¬æ¢","url":"/zh-cn/docs/plugins/transformation/transformer#è½¬æ¢æ“ä½œç±»å‹","content":"æ“ä½œç±»å‹\tkey å­—æ®µå«ä¹‰\tvalue å­—æ®µå«ä¹‰\tæè¿°åˆ é™¤ remove\tç›®æ ‡ key\tæ— éœ€è®¾ç½®\tè‹¥å­˜åœ¨æŒ‡å®šçš„ keyï¼Œåˆ™åˆ é™¤ï¼›å¦åˆ™æ— æ“ä½œ é‡å‘½å rename\tç›®æ ‡ oldKey\tæ–°çš„ key åç§° newKey\tè‹¥å­˜åœ¨æŒ‡å®šçš„ oldKey:valueï¼Œåˆ™å°†å…¶é”®åé‡å‘½åä¸º newKeyï¼Œå¾—åˆ° newKey:valueï¼›å¦åˆ™æ— æ“ä½œ æ›´æ–° replace\tç›®æ ‡ key\tæ–°çš„ value å€¼ newValue\tè‹¥å­˜åœ¨æŒ‡å®šçš„ key:valueï¼Œåˆ™å°†å…¶ value æ›´æ–°ä¸º newValueï¼Œå¾—åˆ° key:newValueï¼›å¦åˆ™æ— æ“ä½œ æ·»åŠ  add\tæ·»åŠ çš„ key\tæ·»åŠ çš„ value\tè‹¥ä¸å­˜åœ¨æŒ‡å®šçš„ key:valueï¼Œåˆ™æ·»åŠ ï¼›å¦åˆ™æ— æ“ä½œ è¿½åŠ  append\tç›®æ ‡ key\tè¿½åŠ çš„ valueå€¼ appendValue\tè‹¥å­˜åœ¨æŒ‡å®šçš„ key:valueï¼Œåˆ™è¿½åŠ  appendValue å¾—åˆ° key:[value..., appendValue]ï¼›å¦åˆ™ç›¸å½“äºæ‰§è¡Œ add æ“ä½œï¼Œå¾—åˆ° key:appendValue æ˜ å°„ map\tæ˜ å°„æ¥æº fromKey\tæ˜ å°„ç›®æ ‡ toKey\tè‹¥å­˜åœ¨æŒ‡å®šçš„ fromKey:fromValueï¼Œåˆ™å°†å…¶å€¼ fromValue æ˜ å°„ç»™ toKey çš„å€¼ï¼Œå¾—åˆ° toKey:fromValueï¼ŒåŒæ—¶ä¿ç•™ fromKey:fromValueï¼ˆæ³¨ï¼šè‹¥ toKey å·²å­˜åœ¨åˆ™å…¶å€¼ä¼šè¢«è¦†ç›–ï¼‰ï¼›å¦åˆ™æ— æ“ä½œ å»é‡ dedupe\tç›®æ ‡ key\tæŒ‡å®šå»é‡ç­–ç•¥ strategy\tstrategy å¯é€‰å€¼ä¸ºï¼šRETAIN_UNIQUE, RETAIN_LAST, RETAIN_FIRSTã€‚RETAIN_UNIQUEï¼šæŒ‰é¡ºåºä¿ç•™æ‰€æœ‰å”¯ä¸€å€¼ï¼Œå¦‚ k1:[v1,v2,v3,v3,v2,v1]ï¼Œå»é‡åå¾—åˆ° k1:[v1,v2,v3]ã€‚RETAIN_LASTï¼šä¿ç•™æœ€åä¸€ä¸ªå€¼ï¼Œå¦‚ k1:[v1,v2,v3]ï¼Œå»é‡åå¾—åˆ° k1:v3ã€‚RETAIN_FIRST (é»˜è®¤å€¼)ï¼šä¿ç•™ç¬¬ä¸€ä¸ªå€¼ï¼Œå¦‚ k1:[v1,v2,v3]ï¼Œå»é‡åå¾—åˆ° k1:v1ï¼ˆæ³¨ï¼šè‹¥å»é‡ååªå‰©ä¸‹ä¸€ä¸ªå…ƒç´  v1 æ—¶ï¼Œé”®å€¼å¯¹å˜ä¸º k1:v1, è€Œä¸æ˜¯ k1:[v1]ï¼‰ ","version":"Next","tagName":"h2"},{"title":"é…ç½®ç¤ºä¾‹â€‹","type":1,"pageTitle":"è¯·æ±‚/å“åº”è½¬æ¢","url":"/zh-cn/docs/plugins/transformation/transformer#é…ç½®ç¤ºä¾‹","content":"","version":"Next","tagName":"h2"},{"title":"è¯·æ±‚è½¬æ¢â€‹","type":1,"pageTitle":"è¯·æ±‚/å“åº”è½¬æ¢","url":"/zh-cn/docs/plugins/transformation/transformer#è¯·æ±‚è½¬æ¢","content":"è½¬æ¢è¯·æ±‚å¤´éƒ¨ reqRules: - operate: remove headers: - key: X-remove - operate: rename headers: - oldKey: X-not-renamed newKey: X-renamed - operate: replace headers: - key: X-replace newValue: replaced - operate: add headers: - key: X-add-append value: host-$1 host_pattern: ^(.*)\\.com$ - operate: append headers: - key: X-add-append appendValue: path-$1 path_pattern: ^.*?\\/(\\w+)[\\?]{0,1}.*$ - operate: map headers: - fromKey: X-add-append toKey: X-map - operate: dedupe headers: - key: X-dedupe-first strategy: RETAIN_FIRST - key: X-dedupe-last strategy: RETAIN_LAST - key: X-dedupe-unique strategy: RETAIN_UNIQUE  å‘é€è¯·æ±‚ $ curl -v console.higress.io/get -H 'host: foo.bar.com' \\ -H 'X-remove: exist' -H 'X-not-renamed:test' -H 'X-replace:not-replaced' \\ -H 'X-dedupe-first:1' -H 'X-dedupe-first:2' -H 'X-dedupe-first:3' \\ -H 'X-dedupe-last:a' -H 'X-dedupe-last:b' -H 'X-dedupe-last:c' \\ -H 'X-dedupe-unique:1' -H 'X-dedupe-unique:2' -H 'X-dedupe-unique:3' \\ -H 'X-dedupe-unique:3' -H 'X-dedupe-unique:2' -H 'X-dedupe-unique:1' # httpbin å“åº”ç»“æœ { &quot;args&quot;: {}, &quot;headers&quot;: { ... &quot;X-Add-Append&quot;: &quot;host-foo.bar,path-get&quot;, ... &quot;X-Dedupe-First&quot;: &quot;1&quot;, &quot;X-Dedupe-Last&quot;: &quot;c&quot;, &quot;X-Dedupe-Unique&quot;: &quot;1,2,3&quot;, ... &quot;X-Map&quot;: &quot;host-foo.bar,path-get&quot;, &quot;X-Renamed&quot;: &quot;test&quot;, &quot;X-Replace&quot;: &quot;replaced&quot; }, ... }  è½¬æ¢è¯·æ±‚æŸ¥è¯¢å‚æ•° reqRules: - operate: remove querys: - key: k1 - operate: rename querys: - oldKey: k2 newKey: k2-new - operate: replace querys: - key: k2-new newValue: v2-new - operate: add querys: - key: k3 value: v31-$1 path_pattern: ^.*?\\/(\\w+)[\\?]{0,1}.*$ - operate: append querys: - key: k3 appendValue: v32 - operate: map querys: - fromKey: k3 toKey: k4 - operate: dedupe querys: - key: k4 strategy: RETAIN_FIRST  å‘é€è¯·æ±‚ $ curl -v &quot;console.higress.io/get?k1=v11&amp;k1=v12&amp;k2=v2&quot; # httpbin å“åº”ç»“æœ { &quot;args&quot;: { &quot;k2-new&quot;: &quot;v2-new&quot;, &quot;k3&quot;: [ &quot;v31-get&quot;, &quot;v32&quot; ], &quot;k4&quot;: &quot;v31-get&quot; }, ... &quot;url&quot;: &quot;http://foo.bar.com/get?k2-new=v2-new&amp;k3=v31-get&amp;k3=v32&amp;k4=v31-get&quot; }  è½¬æ¢è¯·æ±‚ä½“ reqRules: - operate: remove body: - key: a1 - operate: rename body: - oldKey: a2 newKey: a2-new - operate: replace body: - key: a3 newValue: t3-new value_type: string - operate: add body: - key: a1-new value: t1-new value_type: string - operate: append body: - key: a1-new appendValue: t1-$1-append value_type: string host_pattern: ^(.*)\\.com$ - operate: map body: - fromKey: a1-new toKey: a4 - operate: dedupe body: - key: a4 strategy: RETAIN_FIRST  å‘é€è¯·æ±‚ï¼š 1. Content-Type: application/json $ curl -v -x POST console.higress.io/post -H 'host: foo.bar.com' \\ -H 'Content-Type: application/json' -d '{&quot;a1&quot;:&quot;t1&quot;,&quot;a2&quot;:&quot;t2&quot;,&quot;a3&quot;:&quot;t3&quot;}' # httpbin å“åº”ç»“æœ { ... &quot;headers&quot;: { ... &quot;Content-Type&quot;: &quot;application/json&quot;, ... }, &quot;json&quot;: { &quot;a1-new&quot;: [ &quot;t1-new&quot;, &quot;t1-foo.bar-append&quot; ], &quot;a2-new&quot;: &quot;t2&quot;, &quot;a3&quot;: &quot;t3-new&quot;, &quot;a4&quot;: &quot;t1-new&quot; }, ... }  2. Content-Type: application/x-www-form-urlencoded $ curl -v -X POST console.higress.io/post -H 'host: foo.bar.com' \\ -d 'a1=t1&amp;a2=t2&amp;a3=t3' # httpbin å“åº”ç»“æœ { ... &quot;form&quot;: { &quot;a1-new&quot;: [ &quot;t1-new&quot;, &quot;t1-foo.bar-append&quot; ], &quot;a2-new&quot;: &quot;t2&quot;, &quot;a3&quot;: &quot;t3-new&quot;, &quot;a4&quot;: &quot;t1-new&quot; }, &quot;headers&quot;: { ... &quot;Content-Type&quot;: &quot;application/x-www-form-urlencoded&quot;, ... }, ... }  3. Content-Type: multipart/form-data $ curl -v -X POST console.higress.io/post -H 'host: foo.bar.com' \\ -F a1=t1 -F a2=t2 -F a3=t3 # httpbin å“åº”ç»“æœ { ... &quot;form&quot;: { &quot;a1-new&quot;: [ &quot;t1-new&quot;, &quot;t1-foo.bar-append&quot; ], &quot;a2-new&quot;: &quot;t2&quot;, &quot;a3&quot;: &quot;t3-new&quot;, &quot;a4&quot;: &quot;t1-new&quot; }, &quot;headers&quot;: { ... &quot;Content-Type&quot;: &quot;multipart/form-data; boundary=------------------------1118b3fab5afbc4e&quot;, ... }, ... }  ","version":"Next","tagName":"h3"},{"title":"å“åº”è½¬æ¢â€‹","type":1,"pageTitle":"è¯·æ±‚/å“åº”è½¬æ¢","url":"/zh-cn/docs/plugins/transformation/transformer#å“åº”è½¬æ¢","content":"ä¸ Request Transformer ç±»ä¼¼ï¼Œåœ¨æ­¤ä»…è¯´æ˜è½¬æ¢ JSON å½¢å¼çš„è¯·æ±‚/å“åº”ä½“æ—¶çš„æ³¨æ„äº‹é¡¹ï¼š key åµŒå¥— . 1.é€šå¸¸æƒ…å†µä¸‹ï¼ŒæŒ‡å®šçš„ key ä¸­å«æœ‰ . è¡¨ç¤ºåµŒå¥—å«ä¹‰ï¼Œå¦‚ä¸‹ï¼š respRules: - operate: add body: - key: foo.bar value: value  $ curl -v console.higress.io/get # httpbin å“åº”ç»“æœ { ... &quot;foo&quot;: { &quot;bar&quot;: &quot;value&quot; }, ... }  2.å½“ä½¿ç”¨ \\. å¯¹ key ä¸­çš„ . è¿›è¡Œè½¬ä¹‰åï¼Œè¡¨ç¤ºéåµŒå¥—å«ä¹‰ï¼Œå¦‚ä¸‹ï¼š å½“ä½¿ç”¨åŒå¼•å·æ‹¬ä½å­—ç¬¦ä¸²æ—¶ä½¿ç”¨ \\\\. è¿›è¡Œè½¬ä¹‰ respRules: - operate: add body: - key: foo\\.bar value: value  $ curl -v console.higress.io/get # httpbin å“åº”ç»“æœ { ... &quot;foo.bar&quot;: &quot;value&quot;, ... }  è®¿é—®æ•°ç»„å…ƒç´  .index å¯ä»¥é€šè¿‡æ•°ç»„ä¸‹æ ‡ `array.index è®¿é—®æ•°ç»„å…ƒç´ ï¼Œä¸‹æ ‡ä» 0 å¼€å§‹ï¼š { &quot;users&quot;: [ { &quot;123&quot;: { &quot;name&quot;: &quot;zhangsan&quot;, &quot;age&quot;: 18 } }, { &quot;456&quot;: { &quot;name&quot;: &quot;lisi&quot;, &quot;age&quot;: 19 } } ] }  1.ç§»é™¤ user ç¬¬ä¸€ä¸ªå…ƒç´ ï¼š reqRules: - operate: remove body: - key: users.0  $ curl -v -X POST console.higress.io/post \\ -H 'Content-Type: application/json' \\ -d '{&quot;users&quot;:[{&quot;123&quot;:{&quot;name&quot;:&quot;zhangsan&quot;}},{&quot;456&quot;:{&quot;name&quot;:&quot;lisi&quot;}}]}' # httpbin å“åº”ç»“æœ { ... &quot;json&quot;: { &quot;users&quot;: [ { &quot;456&quot;: { &quot;name&quot;: &quot;lisi&quot; } } ] }, ... }  2.å°† users ç¬¬ä¸€ä¸ªå…ƒç´ çš„ key ä¸º 123 é‡å‘½åä¸º msg: reqRules: - operate: rename body: - oldKey: users.0.123 newKey: users.0.first  $ curl -v -X POST console.higress.io/post \\ -H 'Content-Type: application/json' \\ -d '{&quot;users&quot;:[{&quot;123&quot;:{&quot;name&quot;:&quot;zhangsan&quot;}},{&quot;456&quot;:{&quot;name&quot;:&quot;lisi&quot;}}]}' # httpbin å“åº”ç»“æœ { ... &quot;json&quot;: { &quot;users&quot;: [ { &quot;msg&quot;: { &quot;name&quot;: &quot;zhangsan&quot; } }, { &quot;456&quot;: { &quot;name&quot;: &quot;lisi&quot; } } ] }, ... }  éå†æ•°ç»„å…ƒç´  .# å¯ä»¥ä½¿ç”¨ array.# å¯¹æ•°ç»„è¿›è¡Œéå†æ“ä½œï¼š â—ï¸è¯¥æ“ä½œç›®å‰åªèƒ½ç”¨åœ¨ replace ä¸Šï¼Œè¯·å‹¿åœ¨å…¶ä»–è½¬æ¢ä¸­å°è¯•è¯¥æ“ä½œï¼Œä»¥å…é€ æˆæ— æ³•é¢„çŸ¥çš„ç»“æœ { &quot;users&quot;: [ { &quot;name&quot;: &quot;zhangsan&quot;, &quot;age&quot;: 18 }, { &quot;name&quot;: &quot;lisi&quot;, &quot;age&quot;: 19 } ] }  reqRules: - operate: replace body: - key: users.#.age newValue: 20  $ curl -v -X POST console.higress.io/post \\ -H 'Content-Type: application/json' \\ -d '{&quot;users&quot;:[{&quot;name&quot;:&quot;zhangsan&quot;,&quot;age&quot;:18},{&quot;name&quot;:&quot;lisi&quot;,&quot;age&quot;:19}]}' # httpbin å“åº”ç»“æœ { ... &quot;json&quot;: { &quot;users&quot;: [ { &quot;age&quot;: &quot;20&quot;, &quot;name&quot;: &quot;zhangsan&quot; }, { &quot;age&quot;: &quot;20&quot;, &quot;name&quot;: &quot;lisi&quot; } ] }, ... }  ","version":"Next","tagName":"h3"},{"title":"ç‰¹æ®Šç”¨æ³•â€‹","type":1,"pageTitle":"è¯·æ±‚/å“åº”è½¬æ¢","url":"/zh-cn/docs/plugins/transformation/transformer#ç‰¹æ®Šç”¨æ³•","content":"","version":"Next","tagName":"h2"},{"title":"å®ç°åŸºäº Body å‚æ•°è·¯ç”±â€‹","type":1,"pageTitle":"è¯·æ±‚/å“åº”è½¬æ¢","url":"/zh-cn/docs/plugins/transformation/transformer#å®ç°åŸºäº-body-å‚æ•°è·¯ç”±","content":"éœ€è¦æ•°æ®é¢çš„ proxy wasm ç‰ˆæœ¬å¤§äºç­‰äº 0.2.100ã€‚ ç¼–è¯‘æ—¶ï¼Œéœ€è¦å¸¦ä¸Šç‰ˆæœ¬çš„ tagï¼Œä¾‹å¦‚ï¼štinygo build -o main.wasm -scheduler=none -target=wasi -gc=custom -tags=&quot;custommalloc nottinygc_finalizer proxy_wasm_version_0_2_100&quot; ./ é…ç½®ç¤ºä¾‹ï¼š reqRules: - operate: map headers: - fromKey: userId toKey: x-user-id mapSource: body  æ­¤è§„åˆ™å°†è¯·æ±‚ body ä¸­çš„ userId è§£æå‡ºåï¼Œè®¾ç½®åˆ°è¯·æ±‚ Header x-user-id ä¸­ï¼Œè¿™æ ·å°±å¯ä»¥åŸºäº Higress è¯·æ±‚ Header åŒ¹é…è·¯ç”±çš„èƒ½åŠ›æ¥å®ç°åŸºäº Body å‚æ•°çš„è·¯ç”±äº†ã€‚ æ­¤é…ç½®åŒæ—¶æ”¯æŒ application/json å’Œ application/x-www-form-urlencoded ä¸¤ç§ç±»å‹çš„è¯·æ±‚ Bodyã€‚ ä¸¾ä¾‹æ¥è¯´ï¼š å¯¹äº application/json ç±»å‹çš„ Body curl localhost -d '{&quot;userId&quot;:12, &quot;userName&quot;:&quot;johnlanni&quot;}' -H 'content-type:application/json'  å°†ä» JSON ä¸­æå–å‡º userId å­—æ®µçš„å€¼ï¼Œè®¾ç½®åˆ° x-user-id ä¸­ï¼Œåç«¯æœåŠ¡æ”¶åˆ°çš„è¯·æ±‚å¤´å°†å¢åŠ ï¼šx-usr-id: 12ã€‚ å› ä¸ºåœ¨æ’ä»¶æ–°å¢è¿™ä¸ª Header åï¼Œç½‘å…³å°†é‡æ–°è®¡ç®—è·¯ç”±ï¼Œæ‰€ä»¥å¯ä»¥å®ç°ç½‘å…³è·¯ç”±é…ç½®æ ¹æ®è¿™ä¸ªè¯·æ±‚å¤´æ¥åŒ¹é…è·¯ç”±åˆ°ç‰¹å®šçš„ç›®æ ‡æœåŠ¡ã€‚ å¯¹äº application/x-www-form-urlencoded ç±»å‹çš„ Body curl localhost -d 'userId=12&amp;userName=johnlanni'  å°†ä» k1=v1&amp;k2=v2 è¿™æ ·çš„è¡¨å•æ ¼å¼ä¸­æå–å‡º userId å­—æ®µçš„å€¼ï¼Œè®¾ç½®åˆ° x-user-id ä¸­ï¼Œåç«¯æœåŠ¡æ”¶åˆ°çš„è¯·æ±‚å¤´å°†å¢åŠ ï¼šx-usr-id: 12ã€‚ å› ä¸ºåœ¨æ’ä»¶æ–°å¢è¿™ä¸ªHeaderåï¼Œç½‘å…³å°†é‡æ–°è®¡ç®—è·¯ç”±ï¼Œæ‰€ä»¥å¯ä»¥å®ç°ç½‘å…³è·¯ç”±é…ç½®æ ¹æ®è¿™ä¸ªè¯·æ±‚å¤´æ¥åŒ¹é…è·¯ç”±åˆ°ç‰¹å®šçš„ç›®æ ‡æœåŠ¡ã€‚ ","version":"Next","tagName":"h3"},{"title":"JSON Path æ”¯æŒâ€‹","type":1,"pageTitle":"è¯·æ±‚/å“åº”è½¬æ¢","url":"/zh-cn/docs/plugins/transformation/transformer#json-path-æ”¯æŒ","content":"å¯ä»¥æ ¹æ® GJSON Path è¯­æ³•ï¼Œä»å¤æ‚çš„ JSON ä¸­æå–å‡ºå­—æ®µã€‚ æ¯”è¾ƒå¸¸ç”¨çš„æ“ä½œä¸¾ä¾‹ï¼Œå¯¹äºä»¥ä¸‹ JSON: { &quot;name&quot;: {&quot;first&quot;: &quot;Tom&quot;, &quot;last&quot;: &quot;Anderson&quot;}, &quot;age&quot;:37, &quot;children&quot;: [&quot;Sara&quot;,&quot;Alex&quot;,&quot;Jack&quot;], &quot;fav.movie&quot;: &quot;Deer Hunter&quot;, &quot;friends&quot;: [ {&quot;first&quot;: &quot;Dale&quot;, &quot;last&quot;: &quot;Murphy&quot;, &quot;age&quot;: 44, &quot;nets&quot;: [&quot;ig&quot;, &quot;fb&quot;, &quot;tw&quot;]}, {&quot;first&quot;: &quot;Roger&quot;, &quot;last&quot;: &quot;Craig&quot;, &quot;age&quot;: 68, &quot;nets&quot;: [&quot;fb&quot;, &quot;tw&quot;]}, {&quot;first&quot;: &quot;Jane&quot;, &quot;last&quot;: &quot;Murphy&quot;, &quot;age&quot;: 47, &quot;nets&quot;: [&quot;ig&quot;, &quot;tw&quot;]} ] }  å¯ä»¥å®ç°è¿™æ ·çš„æå–: name.last &quot;Anderson&quot; name.first &quot;Tom&quot; age 37 children [&quot;Sara&quot;,&quot;Alex&quot;,&quot;Jack&quot;] children.0 &quot;Sara&quot; children.1 &quot;Alex&quot; friends.1 {&quot;first&quot;: &quot;Roger&quot;, &quot;last&quot;: &quot;Craig&quot;, &quot;age&quot;: 68} friends.1.first &quot;Roger&quot;  ç°åœ¨å¦‚æœæƒ³ä»ä¸Šé¢è¿™ä¸ª JSON æ ¼å¼çš„ body ä¸­æå–å‡º friends ä¸­ç¬¬äºŒé¡¹çš„ first å­—æ®µï¼Œæ¥è®¾ç½®åˆ° Header x-first-name ä¸­ï¼ŒåŒæ—¶æŠ½å– last å­—æ®µï¼Œæ¥è®¾ç½®åˆ° Header x-last-name ä¸­ï¼Œåˆ™å¯ä»¥ä½¿ç”¨è¿™ä»½æ’ä»¶é…ç½®ï¼š reqRules: - operate: map headers: - fromKey: friends.1.first toKey: x-first-name - fromKey: friends.1.last toKey: x-last-name mapSource: body  ","version":"Next","tagName":"h3"},{"title":"é…ç½® Ingress è½¬å‘ç»™æ³¨å†Œåœ¨ Nacos çš„æœåŠ¡","type":0,"sectionRef":"#","url":"/zh-cn/docs/user/nacos-route","content":"","keywords":"ingress higress nacos","version":"Next"},{"title":"é…ç½®æœåŠ¡æ¥æºâ€‹","type":1,"pageTitle":"é…ç½® Ingress è½¬å‘ç»™æ³¨å†Œåœ¨ Nacos çš„æœåŠ¡","url":"/zh-cn/docs/user/nacos-route#é…ç½®æœåŠ¡æ¥æº","content":"apiVersion: networking.higress.io/v1 kind: McpBridge metadata: name: default namespace: higress-system spec: registries: # å®šä¹‰ä¸€ä¸ªåä¸º â€œproductionâ€ çš„æœåŠ¡æ¥æº - name: production # æ³¨å†Œä¸­å¿ƒç±»å‹æ˜¯ Nacos 2.xï¼Œæ”¯æŒ gRPC åè®® type: nacos2 # æ³¨å†Œä¸­å¿ƒçš„è®¿é—®åœ°å€ï¼Œå¯ä»¥æ˜¯åŸŸåæˆ–è€…IP domain: 192.xxx.xx.32 # æ³¨å†Œä¸­å¿ƒçš„è®¿é—®ç«¯å£ï¼ŒNacos é»˜è®¤éƒ½æ˜¯ 8848 port: 8848 # Nacos å‘½åç©ºé—´ ID nacosNamespaceId: d8ac64f3-xxxx-xxxx-xxxx-47a814ecf358 # Nacos æœåŠ¡åˆ†ç»„ nacosGroups: - DEFAULT_GROUP # å®šä¹‰ä¸€ä¸ªåä¸º â€œuatâ€ çš„æœåŠ¡æ¥æº - name: uat # æ³¨å†Œä¸­å¿ƒç±»å‹æ˜¯ Nacos 1.xï¼Œåªæ”¯æŒ HTTP åè®® type: nacos # æ³¨å†Œä¸­å¿ƒçš„è®¿é—®åœ°å€ï¼Œå¯ä»¥æ˜¯åŸŸåæˆ–è€…IP domain: 192.xxx.xx.31 # æ³¨å†Œä¸­å¿ƒçš„è®¿é—®ç«¯å£ï¼ŒNacos é»˜è®¤éƒ½æ˜¯ 8848 port: 8848 # Nacos å‘½åç©ºé—´ ID nacosNamespaceId: 98ac6df3-xxxx-xxxx-xxxx-ab98115dfde4 # Nacos æœåŠ¡åˆ†ç»„ nacosGroups: - DEFAULT_GROUP  é€šè¿‡McpBridgeèµ„æºé…ç½®äº†ä¸¤ä¸ªæœåŠ¡æ¥æºï¼Œåˆ†åˆ«å–å â€œproductionâ€å’Œâ€œuatâ€ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ Higress å¯¹æ¥ Nacos åŒæ—¶æ”¯æŒ HTTP å’Œ gRPC ä¸¤ç§åè®®ï¼Œå»ºè®®å°† Nacos å‡çº§åˆ° 2.x ç‰ˆæœ¬ï¼Œè¿™æ ·å¯ä»¥åœ¨ä¸Šè¿°é…ç½®çš„ type ä¸­æŒ‡å®š â€œnacos2â€ ä½¿ç”¨ gRPC åè®®ï¼Œä»è€Œæ›´å¿«é€Ÿåœ°æ„ŸçŸ¥åˆ°æœåŠ¡å˜åŒ–ï¼Œå¹¶æ¶ˆè€—æ›´å°‘çš„ Nacos æœåŠ¡ç«¯èµ„æºã€‚ åŸºäº McpBridge ä¸­çš„ registries æ•°ç»„é…ç½®ï¼ŒHigress å¯ä»¥è½»æ¾å¯¹æ¥å¤šä¸ªä¸”ä¸åŒç±»å‹çš„æœåŠ¡æ¥æºï¼ˆNacos/Zookeeper/Eureka/Consul/...ï¼‰ï¼Œè¿™é‡Œå¯¹äº Nacos ç±»å‹çš„æœåŠ¡æ¥æºï¼Œæ”¯æŒé…ç½®å¤šä¸ªä¸åŒå‘½åç©ºé—´ï¼Œä»è€Œå®ç°ä¸åŒå‘½åç©ºé—´çš„å¾®æœåŠ¡å¯ä»¥å…±ç”¨ä¸€ä¸ªç½‘å…³ï¼Œé™ä½è‡ªå»ºå¾®æœåŠ¡ç½‘å…³çš„èµ„æºæˆæœ¬å¼€é”€ã€‚ ","version":"Next","tagName":"h2"},{"title":"é…ç½® Ingressâ€‹","type":1,"pageTitle":"é…ç½® Ingress è½¬å‘ç»™æ³¨å†Œåœ¨ Nacos çš„æœåŠ¡","url":"/zh-cn/docs/user/nacos-route#é…ç½®-ingress","content":"apiVersion: networking.k8s.io/v1 kind: Ingress metadata: annotations: higress.io/destination: service-provider.DEFAULT-GROUP.d8ac64f3-xxxx-xxxx-xxxx-47a814ecf358.nacos name: demo namespace: default spec: rules: - http: paths: - backend: resource: apiGroup: networking.higress.io kind: McpBridge name: default path: / pathType: Prefix  å’Œå¸¸è§çš„ Ingress åœ¨ backend ä¸­å®šä¹‰ service ä¸åŒï¼Œè¿™é‡ŒåŸºäº Ingress çš„ resource backend å°†ä¸Šé¢å®šä¹‰æœåŠ¡æ¥æºçš„ McpBridge è¿›è¡Œå…³è”ã€‚å¹¶é€šè¿‡æ³¨è§£higress.io/destinationæŒ‡å®šè·¯ç”±æœ€ç»ˆè¦è½¬å‘åˆ°çš„ç›®æ ‡æœåŠ¡ã€‚ å¯¹äº Nacos æ¥æºçš„æœåŠ¡ï¼Œè¿™é‡Œçš„ç›®æ ‡æœåŠ¡æ ¼å¼ä¸ºï¼šâ€œæœåŠ¡åç§°.æœåŠ¡åˆ†ç»„.å‘½åç©ºé—´ID.nacosâ€ï¼Œæ³¨æ„è¿™é‡Œéœ€è¦éµå¾ª DNS åŸŸåæ ¼å¼ï¼Œå› æ­¤æœåŠ¡åˆ†ç»„ä¸­çš„ä¸‹åˆ’çº¿'_'è¢«è½¬æ¢æˆäº†æ¨ªæ '-'ã€‚ ","version":"Next","tagName":"h2"},{"title":"Nginx Ingress å…¼å®¹è¯´æ˜","type":0,"sectionRef":"#","url":"/zh-cn/docs/user/nginx-ingress","content":"Nginx Ingress å…¼å®¹è¯´æ˜ TBD","keywords":"ingress nginx","version":"Next"},{"title":"ä» Nginx Ingress Controller å¹³æ»‘è¿ç§»","type":0,"sectionRef":"#","url":"/zh-cn/docs/user/nginx-ingress-migrate","content":"ä» Nginx Ingress Controller å¹³æ»‘è¿ç§» TBD","keywords":"Ingress","version":"Next"},{"title":"å¯¹æ¥ OpenSergo å®ç°å…¨é“¾è·¯ç°åº¦","type":0,"sectionRef":"#","url":"/zh-cn/docs/user/opensergo-gray","content":"å¯¹æ¥ OpenSergo å®ç°å…¨é“¾è·¯ç°åº¦ æ–‡æ¡£è®¡åˆ’æ¨å‡ºæ—¶é—´ï¼š2022.02.28","keywords":"opensergo gray","version":"Next"},{"title":"åŸºäº Sentinel å®ç°å…¥å£ç†”æ–­é™æµ","type":0,"sectionRef":"#","url":"/zh-cn/docs/user/sentinel","content":"åŸºäº Sentinel å®ç°å…¥å£ç†”æ–­é™æµ æ–‡æ¡£è®¡åˆ’æ¨å‡ºæ—¶é—´ï¼š2022.03.15","keywords":"sentinel","version":"Next"},{"title":"åŸºäº Prometheus å®ç°å…¥å£æµé‡è§‚æµ‹","type":0,"sectionRef":"#","url":"/zh-cn/docs/user/prometheus","content":"","keywords":"Higress Prometheus","version":"Next"},{"title":"ä½¿ç”¨ Higress Console çš„å†…ç½®ç›‘æ§å¥—ä»¶â€‹","type":1,"pageTitle":"åŸºäº Prometheus å®ç°å…¥å£æµé‡è§‚æµ‹","url":"/zh-cn/docs/user/prometheus#ä½¿ç”¨-higress-console-çš„å†…ç½®ç›‘æ§å¥—ä»¶","content":"Higress Console å†…ç½®äº†ä¸€å¥—åŸºäº Prometheus + Grafana çš„ç›‘æ§å¥—ä»¶ï¼Œä½†é»˜è®¤ä¸ä¼šå®‰è£…ã€‚åœ¨ä½¿ç”¨ Helm å®‰è£… Higress æ—¶ï¼Œå¯ä»¥é€šè¿‡åœ¨å‘½ä»¤è¡Œä¸­æ·»åŠ  --set higress-console.o11y.enabled=true å‚æ•°å¯ç”¨è¿™ä¸€ç›‘æ§å¥—ä»¶ã€‚ helm repo add higress.io https://higress.io/helm-charts helm install higress -n higress-system higress.io/higress --create-namespace --render-subchart-notes --set higress-console.o11y.enabled=true  æ³¨æ„ï¼šåœ¨å®‰è£…åˆ°æ ‡å‡† K8s é›†ç¾¤ï¼ˆå³æœªæŒ‡å®š global.local=true æˆ– global.kind=true å‚æ•°ï¼‰æ—¶ï¼Œç›‘æ§ç³»ç»Ÿæ‰€é…ç½®çš„ PersistentVolumeClaim é»˜è®¤ä½¿ç”¨ ReadWriteMany è®¿é—®æ¨¡å¼ã€‚å¦‚æœç›®æ ‡ K8s é›†ç¾¤ä¸æ”¯æŒè¿™ä¸€è®¿é—®æ¨¡å¼ï¼Œåˆ™å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­é¢å¤–æ·»åŠ  --set higress-console.pvc.rwxSupported=false å‚æ•°æ¥å°†è®¿é—®æ¨¡å¼åˆ‡æ¢ä¸º ReadyWriteOnceã€‚ helm repo add higress.io https://higress.io/helm-charts helm install higress -n higress-system higress.io/higress --create-namespace --render-subchart-notes --set higress-console.o11y.enabled=true --set higress-console.pvc.rwxSupported=false  å®Œæˆå®‰è£…åï¼Œåœ¨æµè§ˆå™¨ä¸­è®¿é—® Higress Consoleï¼Œç‚¹å‡»å·¦ä¾§å¯¼èˆªæ â€œç›‘æ§é¢æ¿â€ï¼Œé¡µé¢å³ä¾§å°±ä¼šå±•ç¤ºå‡ºç³»ç»Ÿå†…ç½®çš„ç›‘æ§é¢æ¿ã€‚  ","version":"Next","tagName":"h2"},{"title":"ä½¿ç”¨ç‹¬ç«‹éƒ¨ç½²çš„ç›‘æ§å¥—ä»¶â€‹","type":1,"pageTitle":"åŸºäº Prometheus å®ç°å…¥å£æµé‡è§‚æµ‹","url":"/zh-cn/docs/user/prometheus#ä½¿ç”¨ç‹¬ç«‹éƒ¨ç½²çš„ç›‘æ§å¥—ä»¶","content":"Higress çš„æ•°æ®é¢å’Œæ§åˆ¶é¢ç»„ä»¶å‡é€šè¿‡ API å¯¹å¤–æš´éœ²äº†ä¸€ç³»åˆ—çš„ Metrics æŒ‡æ ‡ã€‚åªéœ€è¦ä¸º Prometheus æ·»åŠ ç›¸åº”æŒ‡æ ‡é‡‡é›†é…ç½®ï¼Œå¹¶åœ¨ Grafana ä¸­é…ç½®ç›‘æ§é¢æ¿å°±å¯ä»¥ç›‘æ§ Higress çš„å†…éƒ¨è¿è¡Œæƒ…å†µäº†ã€‚ åœ¨æ­£å¼å¼€å§‹é…ç½®ä¹‹å‰ï¼Œè¯·å…ˆåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ Higress Consoleï¼Œå¹¶åœ¨å·¦ä¾§å¯¼èˆªæ åˆ‡æ¢è‡³â€œç›‘æ§é¢æ¿â€é¡µé¢ã€‚åœ¨æœªå®‰è£…å†…ç½®ç›‘æ§å¥—ä»¶æ—¶ï¼Œé¡µé¢ä¸Šå°±ä¼šå±•ç¤ºå‡ºå¤–ç½®ç›‘æ§é¢æ¿ URL é…ç½®é¡µé¢å’Œå¤–éƒ¨ç³»ç»Ÿçš„é…ç½®æ³•ã€‚  æŒ‰ç…§ç•Œé¢ä¸‹æ–¹ç»™å‡ºçš„æ–¹æ³•æ›´æ–° Prometheus å’Œ Grafana ä¸­çš„é…ç½®ï¼Œç„¶åæŠŠ Grafana çœ‹æ¿çš„é¡µé¢ URL å¡«å…¥ä¸Šæ–¹è¾“å…¥æ¡†ä¸­å¹¶ä¿å­˜ã€‚éšåé¡µé¢ä¼šè‡ªåŠ¨åˆ·æ–°ï¼Œå³ä¾§å°±ä¼šå‡ºç°é…ç½®å¥½çš„å¤–ç½®ç›‘æ§é¢æ¿ã€‚  å¦‚æœéœ€è¦æ›´æ–°ç›‘æ§é¢æ¿çš„ URLï¼Œåˆ™å¯ç‚¹å‡»é¡µé¢å·¦ä¸Šè§’çš„â€œé‡æ–°é…ç½®â€æŒ‰é’®ã€‚ ","version":"Next","tagName":"h2"},{"title":"Higress + Skywalking + SpringBoot é“¾è·¯è¿½è¸ªæ¢ç´¢","type":0,"sectionRef":"#","url":"/zh-cn/docs/user/skywalking-springboot","content":"","keywords":"higress higresså®˜ç½‘ äº‘åŸç”Ÿç½‘å…³","version":"Next"},{"title":"åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªä»‹ç»â€‹","type":1,"pageTitle":"Higress + Skywalking + SpringBoot é“¾è·¯è¿½è¸ªæ¢ç´¢","url":"/zh-cn/docs/user/skywalking-springboot#åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªä»‹ç»","content":"åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªï¼ˆDistributed Tracingï¼‰æ˜¯ä¸€ç§ç”¨äºè·Ÿè¸ªå’Œç›‘æ§åˆ†å¸ƒå¼ç³»ç»Ÿä¸­è¯·æ±‚çš„è·¯å¾„å’Œæ€§èƒ½çš„æŠ€æœ¯ã€‚å®ƒå¯ä»¥å¸®åŠ©å¼€å‘äººå‘˜å’Œè¿ç»´å›¢é˜Ÿåœ¨å¤æ‚çš„åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å¿«é€Ÿå®šä½å’Œè§£å†³é—®é¢˜ã€‚ åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œå¤šä¸ªæœåŠ¡ä¹‹é—´çš„äº¤äº’æ¶‰åŠåˆ°å¤æ‚çš„ç½‘ç»œé€šä¿¡å’Œæ•°æ®ä¼ è¾“ï¼Œå…¶ä¸­æ¯ä¸ªæœåŠ¡å¯èƒ½ç”±ä¸åŒçš„å›¢é˜Ÿæˆ–ç»„ç»‡è´Ÿè´£ç»´æŠ¤å’Œå¼€å‘ã€‚å› æ­¤ï¼Œåœ¨è¿™æ ·çš„ç¯å¢ƒä¸‹ï¼Œå½“ä¸€ä¸ªè¯·æ±‚è¢«å‘å‡ºå¹¶ç»è¿‡å¤šä¸ªæœåŠ¡çš„å¤„ç†åï¼Œå¦‚æœå‡ºç°äº†é—®é¢˜æˆ–é”™è¯¯ï¼Œå¾ˆéš¾å¿«é€Ÿå®šä½åˆ°æ ¹å› ã€‚åˆ†å¸ƒå¼å…¨é“¾è·¯è¿½è¸ªæŠ€æœ¯åˆ™å¯ä»¥å¸®åŠ©æˆ‘ä»¬è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå®ƒèƒ½å¤Ÿè·Ÿè¸ªå’Œè®°å½•è¯·æ±‚åœ¨ç³»ç»Ÿä¸­çš„ä¼ è¾“è¿‡ç¨‹ï¼Œå¹¶æä¾›è¯¦ç»†çš„æ€§èƒ½å’Œæ—¥å¿—ä¿¡æ¯ï¼Œä½¿å¾—å¼€å‘äººå‘˜èƒ½å¤Ÿå¿«é€Ÿè¯Šæ–­å’Œå®šä½é—®é¢˜ã€‚å¯¹äºåˆ†å¸ƒå¼ç³»ç»Ÿçš„å¯é æ€§ã€æ€§èƒ½å’Œå¯ç»´æŠ¤æ€§èµ·åˆ°äº†éå¸¸é‡è¦çš„ä½œç”¨ã€‚ åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªä¸­æœ‰ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒæœ¯è¯­ï¼š Trace: ç”¨æ¥æè¿°åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä¸€ä¸ªå®Œæ•´çš„äº‹åŠ¡ï¼ˆè¿™é‡Œçš„äº‹åŠ¡ä¸æ˜¯æŒ‡æ•°æ®åº“ä¸­çš„äº‹åŠ¡ï¼Œè€Œæ˜¯æŒ‡ä¸€ä¸ªå®Œæ•´çš„ä¸šåŠ¡æµï¼‰Span: å¯å‘½åçš„ã€è®°å½•è€—æ—¶çš„ä¸€ä¸ªå·¥ä½œæµç‰‡æ®µï¼ŒSpanä¸Šå¯è®¾ç½®å¤šä¸ªkey:valueçš„tagsï¼Œä¹Ÿå¯ä»¥è®°å½•æŸä¸ªæ—¶é—´ç‚¹çš„ç»“æ„åŒ–çš„logSpanContext: è¿½è¸ªä¿¡æ¯ä¼šä¼´éšç€æ•´ä¸ªåˆ†å¸ƒå¼äº‹åŠ¡ï¼Œä¼šé€šè¿‡ç½‘ç»œæˆ–è€…æ¶ˆæ¯æ€»çº¿æ¥ä¼ é€’åˆ°ä¸‹æ¸¸æœåŠ¡ä¸­ï¼ŒåŒ…å«äº† trace idã€span id å’Œå…¶å®ƒéœ€è¦ä¼ æ’­çš„æ•°æ® åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªé€šè¿‡åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„æ¯ä¸ªè¯·æ±‚ä¸Šæ·»åŠ å”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªtrace IDï¼‰ï¼Œä»¥åŠå¦å¤–ä¸€äº›å…³é”®çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ˆä¾‹å¦‚span IDã€çˆ¶span IDç­‰ï¼‰ï¼Œæ¥è·Ÿè¸ªè¯·æ±‚çš„æµè½¬å’Œè·¯å¾„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚å½“è¯·æ±‚é€šè¿‡ä¸åŒçš„æœåŠ¡å’Œç»„ä»¶æ—¶ï¼Œæ¯ä¸ªç»„ä»¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªspanå¹¶è®°å½•ç›¸å…³çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬è¯¥ç»„ä»¶çš„å¤„ç†æ—¶é—´ã€è°ƒç”¨çš„å…¶ä»–ç»„ä»¶ç­‰ã€‚è¿™äº›spanå°†å½¢æˆä¸€ä¸ªåˆ†å¸ƒå¼çš„é“¾è·¯ï¼Œæè¿°äº†è¯·æ±‚çš„å®Œæ•´è·¯å¾„å’Œå„ä¸ªç»„ä»¶çš„æ€§èƒ½ã€‚  ","version":"Next","tagName":"h2"},{"title":"Skywalkingä»‹ç»â€‹","type":1,"pageTitle":"Higress + Skywalking + SpringBoot é“¾è·¯è¿½è¸ªæ¢ç´¢","url":"/zh-cn/docs/user/skywalking-springboot#skywalkingä»‹ç»","content":"SkyWalkingæ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼ç³»ç»Ÿæ€§èƒ½ç›‘æ§å’Œè·Ÿè¸ªè§£å†³æ–¹æ¡ˆã€‚å®ƒä¸“ä¸ºäº‘åŸç”Ÿå’Œå¾®æœåŠ¡æ¶æ„è®¾è®¡ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘äººå‘˜å’Œè¿ç»´å›¢é˜Ÿå®æ—¶ç›‘æ§å’Œåˆ†æåˆ†å¸ƒå¼ç³»ç»Ÿçš„æ€§èƒ½å’Œé“¾è·¯è¿½è¸ªæ•°æ®ã€‚ SkyWalking é€»è¾‘ä¸Šåˆ†ä¸ºå››éƒ¨åˆ†ï¼šæ¢é’ˆï¼Œå¹³å°åç«¯ï¼Œå­˜å‚¨å’Œç”¨æˆ·ç•Œé¢ï¼š æ¢é’ˆï¼šåŸºäºä¸åŒçš„æ¥æºå¯èƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œä½†ä½œç”¨éƒ½æ˜¯æ”¶é›†æ•°æ®ï¼Œå°†æ•°æ®æ ¼å¼åŒ–ä¸º SkyWalking é€‚ç”¨çš„æ ¼å¼å¹³å°åç«¯ï¼šæ”¯æŒæ•°æ®èšåˆï¼Œæ•°æ®åˆ†æä»¥åŠé©±åŠ¨æ•°æ®æµä»æ¢é’ˆåˆ°ç”¨æˆ·ç•Œé¢çš„æµç¨‹ã€‚åˆ†æåŒ…æ‹¬ Skywalking åŸç”Ÿè¿½è¸ªå’Œæ€§èƒ½æŒ‡æ ‡ä»¥åŠç¬¬ä¸‰æ–¹æ¥æºï¼ŒåŒ…æ‹¬ Istio åŠ Envoy telemetryï¼ŒZipkin è¿½è¸ªæ ¼å¼åŒ–ç­‰å­˜å‚¨ï¼šé€šè¿‡å¼€æ”¾çš„æ’ä»¶åŒ–çš„æ¥å£å­˜æ”¾ SkyWalking æ•°æ®ï¼Œæ”¯æŒ ElasticSearchã€MySQLç­‰UIï¼šä¸€ä¸ªåŸºäºæ¥å£é«˜åº¦å®šåˆ¶åŒ–çš„Webç³»ç»Ÿï¼Œç”¨æˆ·å¯ä»¥å¯è§†åŒ–æŸ¥çœ‹å’Œç®¡ç† SkyWalking æ•°æ® æ¶æ„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š  åº”ç”¨ç¨‹åºæ¥å…¥skywalkingæ—¶ä¸»è¦æœ‰ä¸¤ç§æ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯é€šè¿‡agentæ–¹å¼æ¥å…¥ä»¥åŠé€šè¿‡SDKæ–¹å¼æ¥å…¥ã€‚skywalking å®˜æ–¹æä¾›äº†é€‚ç”¨äºå¤šç§è¯­è¨€çš„agentä¾›å¼€å‘è€…ä½¿ç”¨ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š  ","version":"Next","tagName":"h2"},{"title":"Higressé“¾è·¯è¿½è¸ªèƒ½åŠ›â€‹","type":1,"pageTitle":"Higress + Skywalking + SpringBoot é“¾è·¯è¿½è¸ªæ¢ç´¢","url":"/zh-cn/docs/user/skywalking-springboot#higressé“¾è·¯è¿½è¸ªèƒ½åŠ›","content":"Higress æ”¯æŒå¤šç§é“¾è·¯è¿½è¸ªæœåŠ¡ï¼Œè¯¦æƒ…å‚è§ envoy å®˜æ–¹æ–‡æ¡£ã€‚åœ¨ Higress 1.1 ç‰ˆæœ¬ä»¥ä¸Šï¼Œä»…éœ€è¦åœ¨ configmap ä¸­å¢åŠ ä»¥ä¸‹é…ç½®å³å¯é›†æˆskywalkingï¼Œå…¶ä¸­samplingå­—æ®µè®¾ç½®é‡‡æ ·ç‡ã€‚ data: higress: |- tracing: enable: true sampling: 100 timeout: 500 skywalking: service: skywalking-oap-server.op-system.svc.cluster.local port: 11800  ","version":"Next","tagName":"h2"},{"title":"æµ‹è¯•ç¯å¢ƒæ¶æ„â€‹","type":1,"pageTitle":"Higress + Skywalking + SpringBoot é“¾è·¯è¿½è¸ªæ¢ç´¢","url":"/zh-cn/docs/user/skywalking-springboot#æµ‹è¯•ç¯å¢ƒæ¶æ„","content":"æœ¬æ–‡ä¸­ä½¿ç”¨ 6 ä¸ª spring boot åº”ç”¨åœ¨æœ¬åœ° k8s é›†ç¾¤ä¸­æ„å»ºå¦‚ä¸‹è°ƒç”¨é“¾è·¯ï¼š  æœ¬æ¬¡æµ‹è¯•ä¸­æ¶‰åŠçš„ä»£ç å¯ä»¥åœ¨ higress-demo ä¸­è·å–ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹ç¯å¢ƒå˜é‡ä¸­remote_addrså’Œsleep_timeæ¥æŒ‡å®šspringbootç¨‹åºè¦è°ƒç”¨çš„ä¸‹æ¸¸æœåŠ¡ä»¥åŠå½“å‰æœåŠ¡ä¼‘çœ çš„æ—¶é—´ï¼Œä»è€Œåˆ›é€ ä¸åŒçš„æµ‹è¯•åœºæ™¯ã€‚ ","version":"Next","tagName":"h2"},{"title":"é“¾è·¯è¿½è¸ªç¤ºä¾‹â€‹","type":1,"pageTitle":"Higress + Skywalking + SpringBoot é“¾è·¯è¿½è¸ªæ¢ç´¢","url":"/zh-cn/docs/user/skywalking-springboot#é“¾è·¯è¿½è¸ªç¤ºä¾‹","content":"æµ‹è¯•æ—¶ï¼Œè®¾ç½®springbootæœåŠ¡çš„rtåˆ†åˆ«ä¸ºï¼š | service | rt(ms) | | :-: | :-: | | springboot-svc-1 | 100 | | springboot-svc-2-1 | 200 | | springboot-svc-2-2 | 200 | | springboot-svc-3 | 300 | | springboot-svc-4-1 | 100 | | springboot-svc-4-2 | 500 | é€šè¿‡ä»¥ä¸‹å‘½ä»¤åˆ›é€ è¯·æ±‚ç¤ºä¾‹ï¼š while :; do curl springboot.higress.io/spring-svc-1 ; done  ","version":"Next","tagName":"h2"},{"title":"è·å–å¾®æœåŠ¡è°ƒç”¨é“¾è·¯â€‹","type":1,"pageTitle":"Higress + Skywalking + SpringBoot é“¾è·¯è¿½è¸ªæ¢ç´¢","url":"/zh-cn/docs/user/skywalking-springboot#è·å–å¾®æœåŠ¡è°ƒç”¨é“¾è·¯","content":"skywalkingåŸºäºè¯·æ±‚è°ƒç”¨é“¾è·¯ç”Ÿæˆå¾®æœåŠ¡ä¹‹é—´çš„æ‹“æ‰‘å›¾ï¼Œé€šè¿‡æ‹“æ‰‘å›¾å¯ä»¥æ¸…æ™°çš„çœ‹åˆ°ç³»ç»Ÿæ¶æ„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š  ","version":"Next","tagName":"h3"},{"title":"æ’æŸ¥ç³»ç»Ÿæ€§èƒ½ç“¶é¢ˆâ€‹","type":1,"pageTitle":"Higress + Skywalking + SpringBoot é“¾è·¯è¿½è¸ªæ¢ç´¢","url":"/zh-cn/docs/user/skywalking-springboot#æ’æŸ¥ç³»ç»Ÿæ€§èƒ½ç“¶é¢ˆ","content":"å½“ç³»ç»Ÿæ•´ä½“rtè¾ƒé«˜æ—¶ï¼Œå¦‚ä½•æ’æŸ¥ç³»ç»Ÿçš„æ€§èƒ½ç“¶é¢ˆå¾€å¾€æ˜¯å¼€å‘è€…å…³å¿ƒçš„é—®é¢˜ã€‚é€šè¿‡é“¾è·¯è¿½è¸ªèƒ½å¤Ÿå¸®åŠ©å¼€å‘è€…æ’æŸ¥ç³»ç»Ÿçš„æ€§èƒ½ç“¶é¢ˆã€‚ æ ¹æ®trace idèƒ½å¤ŸæŸ¥çœ‹è¯·æ±‚çš„é“¾è·¯ï¼Œå¹¶ä¸”èƒ½å¤Ÿçœ‹åˆ°é“¾è·¯ä¸­å„èŠ‚ç‚¹è®°å½•çš„ç›¸å…³ä¿¡æ¯ï¼Œä¸‹å›¾è¾ƒä¸ºç›´è§‚çš„åæ˜ äº†è¯·æ±‚è°ƒç”¨é“¾è·¯ä¸­å„ç¯èŠ‚å“åº”æ—¶é—´çš„å¯¹æ¯”ï¼š  ä»¥ä¸‹è¡¨æ ¼åæ˜ äº†æ¯ä¸ªè¯·æ±‚è‡ªèº«å ç”¨çš„æ—¶é—´ï¼Œé€šè¿‡è¯¥è¡¨æ ¼å¯ä»¥çœ‹åˆ° springboot-svc-4-2 è€—æ—¶æœ€ä¹…ï¼Œä¸º 504 msï¼Œå¼€å‘è€…å¯ä»¥æ ¹æ®æ­¤ç»“æœå¯¹æœåŠ¡è¿›è¡Œæ€§èƒ½ä¼˜åŒ–ã€‚  ","version":"Next","tagName":"h3"},{"title":"æ’æŸ¥ç³»ç»Ÿé”™è¯¯èŠ‚ç‚¹â€‹","type":1,"pageTitle":"Higress + Skywalking + SpringBoot é“¾è·¯è¿½è¸ªæ¢ç´¢","url":"/zh-cn/docs/user/skywalking-springboot#æ’æŸ¥ç³»ç»Ÿé”™è¯¯èŠ‚ç‚¹","content":"å½“ç³»ç»Ÿä¸­è°ƒç”¨é“¾è·¯è¾ƒä¸ºå¤æ‚æ—¶ï¼Œå¦‚æœæŸä¸ªç¯èŠ‚å‡ºç°é”™è¯¯ï¼Œæ’æŸ¥é—®é¢˜å¯¹äºå¼€å‘è€…æ¥è¯´æ˜¯ä¸€ä»¶å›°éš¾çš„äº‹æƒ…ï¼Œç°åœ¨åˆ é™¤ springboot svc 4-2æ¥æ¨¡æ‹Ÿç³»ç»ŸæŸä¸€ç¯èŠ‚å‡ºç°é”™è¯¯çš„æƒ…å†µï¼Œé€šè¿‡é“¾è·¯è¿½è¸ªæ¥æ’æŸ¥é—®é¢˜ã€‚  æ­¤æ—¶é“¾è·¯è¿½è¸ªæ˜¾ç¤ºçš„è°ƒç”¨é“¾è·¯å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå…¶ä¸­çº¢è‰²åœ†åœˆè¡¨ç¤ºæœåŠ¡å‡ºç°é”™è¯¯ï¼Œå¯ä»¥çœ‹åˆ°æ­¤æ—¶é“¾è·¯ä¸­ springboot svc 1ï¼Œspringboot svc 2-1ï¼Œspringboot svc 3ï¼Œspringboot svc 4-2 çš„è°ƒç”¨éƒ½æ˜¯é”™è¯¯çš„ï¼Œè¿™äº›æœåŠ¡è°ƒç”¨é”™è¯¯éƒ½æ˜¯ç”± springboot svc 4-2 è°ƒç”¨é”™è¯¯å¼•å‘çš„è¿é”ååº”ï¼Œåªæœ‰ springboot svc 4-1 è°ƒç”¨æ˜¯æˆåŠŸçš„ã€‚ è°ƒç”¨ springboot svc 4-2 æ—¶ skywalking span ä¸­è®°å½•çš„ä¿¡æ¯å¦‚ä¸‹ï¼š  é€šè¿‡ä»¥ä¸Šä¿¡æ¯æˆ‘ä»¬èƒ½å¤ŸçŸ¥é“ springboot svc 4-2 çš„æœåŠ¡ç«¯å‡ºç°äº†é—®é¢˜ï¼Œä»è€Œèƒ½å¤Ÿç²¾å‡†åœ°å»è§£å†³é—®é¢˜ã€‚ ","version":"Next","tagName":"h3"},{"title":"åŠ å…¥Higressç¤¾åŒºâ€‹","type":1,"pageTitle":"Higress + Skywalking + SpringBoot é“¾è·¯è¿½è¸ªæ¢ç´¢","url":"/zh-cn/docs/user/skywalking-springboot#åŠ å…¥higressç¤¾åŒº","content":" ","version":"Next","tagName":"h2"},{"title":"å¿«é€Ÿå¼€å§‹","type":0,"sectionRef":"#","url":"/zh-cn/docs/user/quickstart","content":"","keywords":"Higress","version":"Next"},{"title":"ç¯å¢ƒä¸€ï¼šåœ¨ K8s ä¸­ä½¿ç”¨â€‹","type":1,"pageTitle":"å¿«é€Ÿå¼€å§‹","url":"/zh-cn/docs/user/quickstart#ç¯å¢ƒä¸€åœ¨-k8s-ä¸­ä½¿ç”¨","content":"","version":"Next","tagName":"h2"},{"title":"é˜¶æ®µä¸€ï¼šå®‰è£…â€‹","type":1,"pageTitle":"å¿«é€Ÿå¼€å§‹","url":"/zh-cn/docs/user/quickstart#é˜¶æ®µä¸€å®‰è£…","content":"åœºæ™¯ä¸€ï¼šåœ¨æ ‡å‡† K8s é›†ç¾¤ä¸­ä½¿ç”¨â€‹ Helm å®‰è£…å‘½ä»¤ helm repo add higress.io https://higress.io/helm-charts helm install higress -n higress-system higress.io/higress --create-namespace --render-subchart-notes  ä¸­å›½å¤§é™†ç”¨æˆ·å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•åŠ é€Ÿå®‰è£…ï¼š helm repo add higress.cn https://higress.cn/helm-charts helm upgrade --install higress -n higress-system higress.cn/higress --create-namespace --render-subchart-notes  è·å– Higress Gateway çš„ LoadBalancer IPï¼Œå¹¶è®°å½•ä¸‹æ¥ã€‚åç»­å¯ä»¥é€šè¿‡è¯¥ IP çš„ 80 å’Œ 443 ç«¯å£è®¿é—® Higress Gatewayã€‚ kubectl get svc -n higress-system higress-gateway -o jsonpath='{.status.loadBalancer.ingress[0].ip}'  å¤‡æ³¨ å¦‚æœ LoadBalancer IP è·å–ä¸åˆ°ï¼Œè¯´æ˜æ‚¨å½“å‰çš„ K8s é›†ç¾¤ä¸æ”¯æŒ LoadBalancer ç±»å‹çš„ Serviceï¼Œå¯ä»¥è€ƒè™‘ä»¥ä¸‹æ–¹æ¡ˆï¼š ä½¿ç”¨äº‘å‚å•†æä¾›çš„ K8s æœåŠ¡ï¼Œä¾‹å¦‚é˜¿é‡Œäº‘ ACKå‚è€ƒè¿ç»´å‚æ•°é…ç½®ï¼Œå¼€å¯higress-core.gateway.hostNetworkï¼Œè®© Higress ç›‘å¬æœ¬æœºç«¯å£ï¼Œå†é€šè¿‡å…¶ä»–è½¯/ç¡¬è´Ÿè½½å‡è¡¡å™¨è½¬å‘ç»™å›ºå®šæœºå™¨ IPï¼ˆç”Ÿäº§ä¸å»ºè®®ï¼‰ä½¿ç”¨å¼€æºçš„è´Ÿè½½å‡è¡¡æ–¹æ¡ˆ MetalLB åœºæ™¯äºŒï¼šåœ¨æœ¬åœ° K8s ç¯å¢ƒä¸­ä½¿ç”¨â€‹ ä»¥ä¸‹æ­¥éª¤é€‚ç”¨äºæ‰€æœ‰åœ¨æœ¬åœ°å¯åŠ¨ K8s é›†ç¾¤è¿›è¡ŒéªŒè¯çš„åœºæ™¯ã€‚å¦‚æœæ‚¨æœ¬åœ°å·²ç»é…ç½®å¥½äº†ä¸€ä¸ªæµ‹è¯•é›†ç¾¤ï¼Œå¯ä»¥ç›´æ¥è·³è½¬åˆ°ç¬¬ä¸‰æ­¥å®‰è£… Higressã€‚ ç¬¬ä¸€æ­¥ï¼šå®‰è£… kubectl &amp; kindâ€‹ MacOSï¼š # for Intel Macs [ $(uname -m) = x86_64 ] &amp;&amp; curl -LO &quot;https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/darwin/amd64/kubectl&quot; [ $(uname -m) = x86_64 ] &amp;&amp; curl -Lo ./kind https://kind.sigs.k8s.io/dl/v0.18.0/kind-darwin-amd64 # for Apple Silicon Macs (M1/M2) [ $(uname -m) = arm64 ] &amp;&amp; curl -LO &quot;https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/darwin/arm64/kubectl&quot; [ $(uname -m) = arm64 ] &amp;&amp; curl -Lo ./kind https://kind.sigs.k8s.io/dl/v0.18.0/kind-darwin-arm64 chmod +x ./kubectl ./kind sudo mv ./kubectl ./kind /usr/local/bin  Windows ä¸­ä½¿ç”¨ PowerShellï¼š ä¸‹è½½ kubectl v1.27.1 å’Œ kind v0.18.0ã€‚ å¦‚æœä½ æœ¬åœ°å®‰è£…äº† curl å·¥å…·ï¼Œå¯ç›´æ¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š curl.exe -LO &quot;https://dl.k8s.io/release/v1.27.1/bin/windows/amd64/kubectl.exe&quot; curl.exe -Lo kind-windows-amd64.exe https://kind.sigs.k8s.io/dl/v0.18.0/kind-windows-amd64  æ³¨ï¼šè‹¥è¦è·çŸ¥ kubectl çš„æœ€æ–°ç¨³å®šç‰ˆæœ¬ï¼ˆä¾‹å¦‚ç”¨äºè„šæœ¬ç¼–å†™ç­‰åœºæ™¯ï¼‰ï¼Œå¯æŸ¥çœ‹ https://dl.k8s.io/release/stable.txt çš„å†…å®¹. ç„¶åå°†ä¸‹è½½ä¸‹æ¥çš„ kind-windows-amd64 æˆ–è€… kind-windows-amd64.exe é‡å‘½åä¸º kind.exeï¼Œå¹¶å°† kubectl.exe å’Œ kind.exe ç§»åŠ¨åˆ° PATH ç¯å¢ƒå˜é‡æ‰€åŒ…å«çš„è·¯å¾„ä¸‹ã€‚ Linux: curl -LO &quot;https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl&quot; curl -Lo ./kind https://kind.sigs.k8s.io/dl/v0.18.0/kind-linux-amd64 chmod +x ./kubectl ./kind sudo mv ./kubectl ./kind /usr/local/bin  ç¬¬äºŒæ­¥ï¼šåˆ›å»ºå¹¶å¯ç”¨ kindâ€‹ é¦–å…ˆåˆ›å»ºä¸€ä¸ªé›†ç¾¤é…ç½®æ–‡ä»¶: cluster.conf # cluster.conf kind: Cluster apiVersion: kind.x-k8s.io/v1alpha4 # networking: # WARNING: It is _strongly_ recommended that you keep this the default # (127.0.0.1) for security reasons. However it is possible to change this. # apiServerAddress: &quot;0.0.0.0&quot; # By default the API server listens on a random open port. # You may choose a specific port but probably don't need to in most cases. # Using a random port makes it easier to spin up multiple clusters. # apiServerPort: 6443 nodes: - role: control-plane kubeadmConfigPatches: - | kind: InitConfiguration nodeRegistration: kubeletExtraArgs: node-labels: &quot;ingress-ready=true&quot; extraPortMappings: - containerPort: 80 hostPort: 80 protocol: TCP - containerPort: 443 hostPort: 443 protocol: TCP  Mac &amp; Linux ç³»ç»Ÿæ‰§è¡Œï¼š kind create cluster --name higress --config=cluster.conf kubectl config use-context kind-higress  Windows ç³»ç»Ÿæ‰§è¡Œ: kind.exe create cluster --name higress --config=cluster.conf kubectl.exe config use-context kind-higress  å¤‡æ³¨ ä¸Šè¿°é…ç½®æ˜¯ä¸ºäº†å°†æœ¬åœ°ï¼ˆ127.0.0.1ï¼‰çš„80å’Œ443ç«¯å£ç”¨äºHigressè®¿é—® ç¬¬ä¸‰æ­¥ï¼šå®‰è£… Higressâ€‹ æœ¬åœ°å®‰è£…å¼€å…³: --set global.kind=trueï¼› ä¸ºé¿å…æ­§ä¹‰ï¼Œåé¢ä¼šè°ƒæ•´å±æ€§åç§°ä¸ºï¼š--set global.local=true helm repo add higress.io https://higress.io/helm-charts helm install higress -n higress-system higress.io/higress --create-namespace --render-subchart-notes --set global.local=true --set higress-console.o11y.enabled=false  è‹¥è¦å¯ç”¨ Higress å†…ç½®çš„å¥—ä»¶ï¼Œå¯å‚é˜…å®‰è£…éƒ¨ç½²æ–‡æ¡£ã€‚ å®‰è£…å®Œæˆåï¼Œé€šè¿‡æœ¬åœ°çš„ 80 å’Œ 443 ç«¯å£å³å¯è®¿é—®æœ¬åœ°é›†ç¾¤å†…çš„ Higress Gatewayã€‚ æ³¨ï¼šå¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯æœ¬åœ°ç°å­˜çš„ K8s é›†ç¾¤ï¼Œé‚£ä¹ˆå¯èƒ½éœ€è¦å…ˆæ‰§è¡Œä¸‹æ–¹å‘½ä»¤å°† K8s é›†ç¾¤å†…çš„ç«¯å£æ˜ å°„å‡ºæ¥ï¼Œç„¶åå†å°è¯•è®¿é—®æœ¬åœ°ç«¯å£ã€‚ kubectl port-forward service/higress-gateway -n higress-system 80:80 443:443  ","version":"Next","tagName":"h3"},{"title":"é˜¶æ®µäºŒï¼šé…ç½®â€‹","type":1,"pageTitle":"å¿«é€Ÿå¼€å§‹","url":"/zh-cn/docs/user/quickstart#é˜¶æ®µäºŒé…ç½®","content":"å‡è®¾åœ¨ default å‘½åç©ºé—´ä¸‹å·²ç»éƒ¨ç½²äº†ä¸€ä¸ªåä¸º foo çš„æœåŠ¡ï¼Œè€Œæˆ‘ä»¬å¸Œæœ›åˆ›å»ºä¸€ä¸ªå¯¹åº” http://foo.bar.com/foo çš„è·¯ç”±æŒ‡å‘è¯¥æœåŠ¡ã€‚ å¦‚æœéœ€è¦çš„è¯ï¼Œå„ä½å¯ä»¥ä½¿ç”¨ä¸‹æ–¹ YAML æ¥åˆ›å»ºå¯¹åº”çš„æµ‹è¯•æœåŠ¡ã€‚ kind: Pod apiVersion: v1 metadata: name: foo-app labels: app: foo spec: containers: - name: foo-app image: higress-registry.cn-hangzhou.cr.aliyuncs.com/higress/http-echo:0.2.4-alpine args: - &quot;-text=foo&quot; --- kind: Service apiVersion: v1 metadata: name: foo-service spec: selector: app: foo ports: # Default port used by the image - port: 5678  æ–¹æ³•ä¸€ï¼šä½¿ç”¨ Higress Console è¿›è¡Œé…ç½®â€‹ ä½¿ç”¨ hgctl æ‰“å¼€æ§åˆ¶å°ï¼š hgctl dashboard console  é¦–æ¬¡è®¿é—®æ—¶éœ€è¦å…ˆåˆå§‹åŒ–ç®¡ç†å‘˜è´¦å·ã€‚  åˆå§‹åŒ–å®Œæˆåï¼Œç•Œé¢ä¼šè‡ªåŠ¨è·³è½¬è‡³ç™»å½•é¡µé¢ã€‚è¯·ä½¿ç”¨å‰é¢è®¾ç½®çš„ç”¨æˆ·åå¯†ç ç™»å½• Higress æ§åˆ¶å°ã€‚  ç‚¹å‡»å·¦ä¾§â€œåŸŸåç®¡ç†â€å¯¼èˆªæ ï¼Œç„¶åç‚¹å‡»é¡µé¢å³ä¾§çš„â€œåˆ›å»ºåŸŸåâ€æŒ‰é’®ã€‚æŒ‰ç…§ä¸‹å›¾æ‰€ç¤ºå†…å®¹å¡«å†™è¡¨å•å¹¶ç‚¹å‡»â€œç¡®å®šâ€æŒ‰é’®ã€‚  ç‚¹å‡»å·¦ä¾§â€œè·¯ç”±ç®¡ç†â€å¯¼èˆªæ ï¼Œç„¶åç‚¹å‡»é¡µé¢å³ä¾§çš„â€œåˆ›å»ºè·¯ç”±â€æŒ‰é’®ã€‚æŒ‰ç…§ä¸‹å›¾ç‰‡æ‰€ç¤ºå†…å®¹å¡«å†™è¡¨å•å¹¶ç‚¹å‡»â€œç¡®å®šâ€æŒ‰é’®ã€‚  æ–¹æ³•äºŒï¼šä½¿ç”¨ Ingress CRD è¿›è¡Œé…ç½®â€‹ ä½¿ç”¨ä¸‹æ–¹ YAML æ¥åˆ›å»ºæˆ‘ä»¬éœ€è¦çš„è·¯ç”±é…ç½®ã€‚ apiVersion: networking.k8s.io/v1 kind: Ingress metadata: name: foo spec: ingressClassName: higress rules: - host: foo.bar.com http: paths: - pathType: Prefix path: &quot;/foo&quot; backend: service: name: foo-service port: number: 5678  ","version":"Next","tagName":"h3"},{"title":"é˜¶æ®µä¸‰ï¼šè¯·æ±‚éªŒè¯â€‹","type":1,"pageTitle":"å¿«é€Ÿå¼€å§‹","url":"/zh-cn/docs/user/quickstart#é˜¶æ®µä¸‰è¯·æ±‚éªŒè¯","content":"æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼ŒéªŒè¯æµ‹è¯•è·¯ç”±å¯ä»¥æ­£å¸¸å·¥ä½œï¼š # should output &quot;foo&quot; curl http://GatewayIP/foo -H 'host: foo.bar.com'  ","version":"Next","tagName":"h3"},{"title":"ç¯å¢ƒäºŒï¼šè„±ç¦» K8s åœ¨ Docker Compose ä¸­ä½¿ç”¨â€‹","type":1,"pageTitle":"å¿«é€Ÿå¼€å§‹","url":"/zh-cn/docs/user/quickstart#ç¯å¢ƒäºŒè„±ç¦»-k8s-åœ¨-docker-compose-ä¸­ä½¿ç”¨","content":"æ³¨æ„ Standalone æ¨¡å¼æ²¡æœ‰å¤§è§„æ¨¡ç”Ÿäº§ä½¿ç”¨è¿‡ï¼Œç›®å‰ä¸»è¦ç”¨äºæœ¬åœ°éƒ¨ç½²æµ‹è¯•çš„åœºæ™¯ï¼Œå¦‚æœç”Ÿäº§éƒ¨ç½²æ›´å»ºè®®äº‘åŸç”Ÿæ¨¡å¼éƒ¨ç½² ","version":"Next","tagName":"h2"},{"title":"é˜¶æ®µä¸€ï¼šå®‰è£…â€‹","type":1,"pageTitle":"å¿«é€Ÿå¼€å§‹","url":"/zh-cn/docs/user/quickstart#é˜¶æ®µä¸€å®‰è£…-1","content":"å®‰è£…å‘½ä»¤ä¸€ï¼šä½¿ç”¨ç‹¬ç«‹éƒ¨ç½²çš„ Nacos curl -fsSL https://higress.io/standalone/get-higress.sh | bash -s -- -a -c nacos://192.168.0.1:8848 --nacos-username=nacos --nacos-password=nacos  è¯·å°† 192.168.0.1 æ›¿æ¢ä¸º Nacos æœåŠ¡å™¨çš„ IPï¼ˆå¦‚æœ Nacos éƒ¨ç½²åœ¨æœ¬æœºï¼Œè¯·ä¸è¦ä½¿ç”¨å¦‚ localhost æˆ– 127.0.0.1 çš„ Loopback åœ°å€ï¼‰ï¼Œå¹¶æŒ‰éœ€è°ƒæ•´ --nacos-username å’Œ --nacos-password çš„å–å€¼ã€‚å¦‚æœ Nacos æœåŠ¡æœªå¼€å¯è®¤è¯åŠŸèƒ½ï¼Œåˆ™å¯ä»¥ç§»é™¤è¿™ä¸¤ä¸ªå‚æ•°ã€‚ å®‰è£…å‘½ä»¤äºŒï¼šä½¿ç”¨ Higress å†…ç½® Nacos curl -fsSL https://higress.io/standalone/get-higress.sh | bash -s -- -a --use-builtin-nacos  æ³¨ï¼šWindows ç³»ç»Ÿä¸‹å¯ä»¥ä½¿ç”¨ Cygwinã€Git Bash ç­‰ç±» Unix Shell ä¸­æ‰§è¡Œä¸Šè¿°å‘½ä»¤ã€‚ ","version":"Next","tagName":"h3"},{"title":"é˜¶æ®µäºŒï¼šé…ç½®â€‹","type":1,"pageTitle":"å¿«é€Ÿå¼€å§‹","url":"/zh-cn/docs/user/quickstart#é˜¶æ®µäºŒé…ç½®-1","content":"åœ¨æµè§ˆå™¨ä¸­è¾“å…¥http://127.0.0.1:8080 è¿›å…¥ Higress æ§åˆ¶å°ã€‚é¦–æ¬¡è®¿é—®æ—¶éœ€è¦å…ˆåˆå§‹åŒ–ç®¡ç†å‘˜è´¦å·ã€‚  åˆå§‹åŒ–å®Œæˆåï¼Œç•Œé¢ä¼šè‡ªåŠ¨è·³è½¬è‡³ç™»å½•é¡µé¢ã€‚è¯·ä½¿ç”¨å‰é¢è®¾ç½®çš„ç”¨æˆ·åå¯†ç ç™»å½• Higress æ§åˆ¶å°ã€‚  ç‚¹å‡»å·¦ä¾§â€œæœåŠ¡æ¥æºâ€å¯¼èˆªæ ï¼Œç„¶åç‚¹å‡»é¡µé¢å³ä¾§çš„â€œåˆ›å»ºæœåŠ¡æ¥æºâ€æŒ‰é’®ã€‚æŒ‰ç…§ä¸‹å›¾æ‰€ç¤ºå†…å®¹å¡«å†™è¡¨å•å¹¶ç‚¹å‡»â€œç¡®å®šâ€æŒ‰é’®ã€‚  ç‚¹å‡»å·¦ä¾§â€œåŸŸåç®¡ç†â€å¯¼èˆªæ ï¼Œç„¶åç‚¹å‡»é¡µé¢å³ä¾§çš„â€œåˆ›å»ºåŸŸåâ€æŒ‰é’®ã€‚æŒ‰ç…§ä¸‹å›¾æ‰€ç¤ºå†…å®¹å¡«å†™è¡¨å•å¹¶ç‚¹å‡»â€œç¡®å®šâ€æŒ‰é’®ã€‚  ç‚¹å‡»å·¦ä¾§â€œè·¯ç”±ç®¡ç†â€å¯¼èˆªæ ï¼Œç„¶åç‚¹å‡»é¡µé¢å³ä¾§çš„â€œåˆ›å»ºè·¯ç”±â€æŒ‰é’®ã€‚æŒ‰ç…§ä¸‹å›¾ç‰‡æ‰€ç¤ºå†…å®¹å¡«å†™è¡¨å•å¹¶ç‚¹å‡»â€œç¡®å®šâ€æŒ‰é’®ã€‚  ","version":"Next","tagName":"h3"},{"title":"é˜¶æ®µä¸‰ï¼šè¯·æ±‚éªŒè¯â€‹","type":1,"pageTitle":"å¿«é€Ÿå¼€å§‹","url":"/zh-cn/docs/user/quickstart#é˜¶æ®µä¸‰è¯·æ±‚éªŒè¯-1","content":"æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼ŒéªŒè¯æµ‹è¯•è·¯ç”±å¯ä»¥æ­£å¸¸å·¥ä½œï¼š # should output a JSON object containing request data curl http://localhost/get?foo=bar -H 'host: foo.bar.com'  ","version":"Next","tagName":"h3"},{"title":"å®ç° SpringCloud æœåŠ¡å‘ç°å’Œè·¯ç”±","type":0,"sectionRef":"#","url":"/zh-cn/docs/user/spring-cloud","content":"","keywords":"SpringCloud discovery","version":"Next"},{"title":"ä½¿ç”¨ Nacos åšæ³¨å†Œä¸­å¿ƒâ€‹","type":1,"pageTitle":"å®ç° SpringCloud æœåŠ¡å‘ç°å’Œè·¯ç”±","url":"/zh-cn/docs/user/spring-cloud#ä½¿ç”¨-nacos-åšæ³¨å†Œä¸­å¿ƒ","content":"åº”ç”¨é…ç½®å…·ä½“å‚è€ƒNacos Spring Cloud å¿«é€Ÿå¼€å§‹è¿›è¡Œåº”ç”¨é…ç½® ","version":"Next","tagName":"h2"},{"title":"ä¸æŒ‡å®šå‘½åç©ºé—´â€‹","type":1,"pageTitle":"å®ç° SpringCloud æœåŠ¡å‘ç°å’Œè·¯ç”±","url":"/zh-cn/docs/user/spring-cloud#ä¸æŒ‡å®šå‘½åç©ºé—´","content":"å¦‚æœ application.properties ä¸­æ²¡æœ‰æŒ‡å®š Nacos å‘½åç©ºé—´ï¼Œä¾‹å¦‚ï¼š server.port=8080 spring.application.name=my-service spring.cloud.nacos.discovery.server-addr=127.0.0.1:8848  åˆ™ Higress çš„ McpBridge ä¸­äº¦æ— éœ€æŒ‡å®šå‘½åç©ºé—´ï¼š apiVersion: networking.higress.io/v1 kind: McpBridge metadata: name: default namespace: higress-system spec: registries: # å®šä¹‰ä¸€ä¸ªåä¸º my-nacos çš„æœåŠ¡æ¥æº - name: my-nacos # æ³¨å†Œä¸­å¿ƒç±»å‹æ˜¯ Nacos 2.xï¼Œæ”¯æŒ gRPC åè®® type: nacos2 # æ³¨å†Œä¸­å¿ƒçš„è®¿é—®åœ°å€ï¼Œå¯ä»¥æ˜¯åŸŸåæˆ–è€…IP domain: 127.0.0.1 # æ³¨å†Œä¸­å¿ƒçš„è®¿é—®ç«¯å£ï¼ŒNacos é»˜è®¤éƒ½æ˜¯ 8848 port: 8848 # Nacos æœåŠ¡åˆ†ç»„ nacosGroups: - DEFAULT_GROUP  é…ç½® Ingress è½¬å‘åˆ°è¿™ä¸ªæœåŠ¡(å‡è®¾/apiå‰ç¼€çš„è·¯ç”±éƒ½è½¬å‘ç»™è¿™ä¸ªæœåŠ¡)éœ€è¦åšå¦‚ä¸‹é…ç½®ï¼š apiVersion: networking.k8s.io/v1 kind: Ingress metadata: annotations: higress.io/destination: my-service.DEFAULT-GROUP.public.nacos name: demo namespace: default spec: rules: - http: paths: - backend: resource: apiGroup: networking.higress.io kind: McpBridge name: default path: /api pathType: Prefix  æ³¨æ„è¿™é‡Œé€šè¿‡æ³¨è§£higress.io/destinationæŒ‡å®šè·¯ç”±æœ€ç»ˆè¦è½¬å‘åˆ°çš„ç›®æ ‡æœåŠ¡ã€‚ å¯¹äº Nacos æ¥æºçš„æœåŠ¡ï¼Œè¿™é‡Œçš„ç›®æ ‡æœåŠ¡æ ¼å¼ä¸ºï¼šâ€œæœåŠ¡åç§°.æœåŠ¡åˆ†ç»„.å‘½åç©ºé—´ID.nacosâ€ï¼Œæ³¨æ„è¿™é‡Œéœ€è¦éµå¾ª DNS åŸŸåæ ¼å¼ï¼Œå› æ­¤æœåŠ¡åˆ†ç»„ä¸­çš„ä¸‹åˆ’çº¿'_'è¢«è½¬æ¢æˆäº†æ¨ªæ '-'ã€‚å‘½åç©ºé—´æœªæŒ‡å®šæ—¶ï¼Œè¿™é‡Œé»˜è®¤å€¼ä¸º&quot;public&quot;ã€‚ ","version":"Next","tagName":"h3"},{"title":"æŒ‡å®šå‘½åç©ºé—´ã€æœåŠ¡åˆ†ç»„ç­‰ä¿¡æ¯â€‹","type":1,"pageTitle":"å®ç° SpringCloud æœåŠ¡å‘ç°å’Œè·¯ç”±","url":"/zh-cn/docs/user/spring-cloud#æŒ‡å®šå‘½åç©ºé—´æœåŠ¡åˆ†ç»„ç­‰ä¿¡æ¯","content":"å¦‚æœ application.properties ä¸­æŒ‡å®šäº† Nacos å‘½åç©ºé—´ï¼ŒæœåŠ¡åˆ†ç»„ç­‰ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼š server.port=8080 spring.application.name=my-service spring.cloud.nacos.discovery.server-addr=127.0.0.1:8848 spring.cloud.nacos.discovery.namespace=d8ac64f3-xxxx-xxxx-xxxx-47a814ecf358 spring.cloud.nacos.discovery.group=custom-group  åˆ™ Higress çš„ McpBridge åšç›¸åº”é…ç½®å³å¯ apiVersion: networking.higress.io/v1 kind: McpBridge metadata: name: default namespace: higress-system spec: registries: # å®šä¹‰ä¸€ä¸ªåä¸º my-nacos çš„æœåŠ¡æ¥æº - name: my-nacos # æ³¨å†Œä¸­å¿ƒç±»å‹æ˜¯ Nacos 2.xï¼Œæ”¯æŒ gRPC åè®® type: nacos2 # æ³¨å†Œä¸­å¿ƒçš„è®¿é—®åœ°å€ï¼Œå¯ä»¥æ˜¯åŸŸåæˆ–è€…IP domain: 127.0.0.1 # æ³¨å†Œä¸­å¿ƒçš„è®¿é—®ç«¯å£ï¼ŒNacos é»˜è®¤éƒ½æ˜¯ 8848 port: 8848 # Nacos å‘½åç©ºé—´ ID nacosNamespaceId: d8ac64f3-xxxx-xxxx-xxxx-47a814ecf358 # Nacos æœåŠ¡åˆ†ç»„ nacosGroups: - custom-group  é…ç½® Ingress è½¬å‘åˆ°è¿™ä¸ªæœåŠ¡(å‡è®¾/apiå‰ç¼€çš„è·¯ç”±éƒ½è½¬å‘ç»™è¿™ä¸ªæœåŠ¡)éœ€è¦åšå¦‚ä¸‹é…ç½®ï¼š apiVersion: networking.k8s.io/v1 kind: Ingress metadata: annotations: higress.io/destination: my-service.custom-group.d8ac64f3-xxxx-xxxx-xxxx-47a814ecf358.nacos name: demo namespace: default spec: rules: - http: paths: - backend: resource: apiGroup: networking.higress.io kind: McpBridge name: default path: /api pathType: Prefix  ","version":"Next","tagName":"h3"},{"title":"ä½¿ç”¨ ZooKeeper åšæ³¨å†Œä¸­å¿ƒâ€‹","type":1,"pageTitle":"å®ç° SpringCloud æœåŠ¡å‘ç°å’Œè·¯ç”±","url":"/zh-cn/docs/user/spring-cloud#ä½¿ç”¨-zookeeper-åšæ³¨å†Œä¸­å¿ƒ","content":"ä½¿ç”¨ Zookeeper åšæ³¨å†Œä¸­å¿ƒæ—¶ï¼Œæ³¨æ„å¿…é¡»é…ç½®spring.cloud.zookeeper.discovery.preferIpAddress=trueï¼Œå¦åˆ™æ³¨å†Œåˆ°æ³¨å†Œä¸­å¿ƒä¸­åˆ°åœ°å€ä¸ºä¸»æœºåç§°ï¼Œè€Œä¸æ˜¯IPã€‚ ","version":"Next","tagName":"h2"},{"title":"ä¸æŒ‡å®šæ³¨å†Œæ ¹è·¯å¾„â€‹","type":1,"pageTitle":"å®ç° SpringCloud æœåŠ¡å‘ç°å’Œè·¯ç”±","url":"/zh-cn/docs/user/spring-cloud#ä¸æŒ‡å®šæ³¨å†Œæ ¹è·¯å¾„","content":"å¦‚æœ application.properties ä¸­æœªæŒ‡å®šæ³¨å†Œæ ¹è·¯å¾„ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼š spring.application.name=my-service spring.cloud.zookeeper.connect-string=127.0.0.1:2181 spring.cloud.zookeeper.discovery.preferIpAddress=true spring.cloud.zookeeper.discovery.enabled=true spring.cloud.zookeeper.discovery.register=true  åˆ™ Higress çš„ McpBridge ä¸­äº¦æ— éœ€æŒ‡å®šzkServicePathï¼š apiVersion: networking.higress.io/v1 kind: McpBridge metadata: name: default namespace: higress-system spec: registries: # å®šä¹‰ä¸€ä¸ªåä¸º my-zk çš„æœåŠ¡æ¥æº - name: my-zk # æ³¨å†Œä¸­å¿ƒç±»å‹æ˜¯ ZooKeeper type: zookeeper # æ³¨å†Œä¸­å¿ƒçš„è®¿é—®åœ°å€ï¼Œå¯ä»¥æ˜¯åŸŸåæˆ–è€…IP domain: 127.0.0.1 # æ³¨å†Œä¸­å¿ƒçš„è®¿é—®ç«¯å£ port: 2181  é…ç½® Ingress è½¬å‘åˆ°è¿™ä¸ªæœåŠ¡(å‡è®¾/apiå‰ç¼€çš„è·¯ç”±éƒ½è½¬å‘ç»™è¿™ä¸ªæœåŠ¡)éœ€è¦åšå¦‚ä¸‹é…ç½®ï¼š apiVersion: networking.k8s.io/v1 kind: Ingress metadata: annotations: higress.io/destination: my-service.services.zookeeper name: demo namespace: default spec: rules: - http: paths: - backend: resource: apiGroup: networking.higress.io kind: McpBridge name: default path: /api pathType: Prefix  æ³¨æ„å¯¹äº ZooKeeper æ¥æºçš„æœåŠ¡ï¼Œè¿™é‡Œçš„ç›®æ ‡æœåŠ¡æ ¼å¼ä¸ºï¼š&quot;æœåŠ¡åç§°.æœåŠ¡æ³¨å†Œæ ¹è·¯å¾„.zookeeper&quot;ï¼ŒSpringCloud åœ¨æœªæŒ‡å®šæœåŠ¡æ³¨å†Œæ ¹è·¯å¾„çš„æƒ…å†µä¸‹ï¼Œæ ¹è·¯å¾„é»˜è®¤æ˜¯&quot;services&quot; ","version":"Next","tagName":"h3"},{"title":"æŒ‡å®šæ³¨å†Œæ ¹è·¯å¾„â€‹","type":1,"pageTitle":"å®ç° SpringCloud æœåŠ¡å‘ç°å’Œè·¯ç”±","url":"/zh-cn/docs/user/spring-cloud#æŒ‡å®šæ³¨å†Œæ ¹è·¯å¾„","content":"å¦‚æœ application.properties ä¸­æŒ‡å®šäº†æ³¨å†Œæ ¹è·¯å¾„ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼š spring.application.name=my-service spring.cloud.zookeeper.connect-string=127.0.0.1:2181 spring.cloud.zookeeper.discovery.preferIpAddress=true spring.cloud.zookeeper.discovery.enabled=true spring.cloud.zookeeper.discovery.register=true spring.cloud.zookeeper.discovery.root=my-services-root  åˆ™ Higress çš„ McpBridge ä¸­äº¦éœ€æŒ‡å®šzkServicePathï¼š apiVersion: networking.higress.io/v1 kind: McpBridge metadata: name: default namespace: higress-system spec: registries: # å®šä¹‰ä¸€ä¸ªåä¸º my-zk çš„æœåŠ¡æ¥æº - name: my-zk # æ³¨å†Œä¸­å¿ƒç±»å‹æ˜¯ ZooKeeper type: zookeeper # æ³¨å†Œä¸­å¿ƒçš„è®¿é—®åœ°å€ï¼Œå¯ä»¥æ˜¯åŸŸåæˆ–è€…IP domain: 127.0.0.1 # æ³¨å†Œä¸­å¿ƒçš„è®¿é—®ç«¯å£ port: 2181 # å¯¹åº” spring.cloud.zookeeper.discovery.root é…ç½®å­—æ®µ zkServicePath: - my-services-root  é…ç½® Ingress è½¬å‘åˆ°è¿™ä¸ªæœåŠ¡(å‡è®¾/apiå‰ç¼€çš„è·¯ç”±éƒ½è½¬å‘ç»™è¿™ä¸ªæœåŠ¡)éœ€è¦åšå¦‚ä¸‹é…ç½®ï¼š apiVersion: networking.k8s.io/v1 kind: Ingress metadata: annotations: higress.io/destination: my-service.my-services-root.zookeeper name: demo namespace: default spec: rules: - http: paths: - backend: resource: apiGroup: networking.higress.io kind: McpBridge name: default path: /api pathType: Prefix  æ³¨æ„å¦‚æœ spring.cloud.zookeeper.discovery.root ä¸­åŒ…å«äº†ä¸‹åˆ’çº¿ï¼Œéœ€è¦è¢«æ›¿æ¢ä¸ºæ¨ªæ ï¼Œå› ä¸ºç›®æ ‡æœåŠ¡æ•´ä½“æ ¼å¼éœ€è¦æ»¡è¶³ DNS åŸŸåè§„èŒƒ ","version":"Next","tagName":"h3"},{"title":"å¼€å¯ WAF é˜²æŠ¤çš„æœ€ä½³å®è·µ","type":0,"sectionRef":"#","url":"/zh-cn/docs/user/waf","content":"","keywords":"higress higresså®˜ç½‘ äº‘åŸç”Ÿç½‘å…³","version":"Next"},{"title":"ç›¸å…³çŸ¥è¯†ä»‹ç»â€‹","type":1,"pageTitle":"å¼€å¯ WAF é˜²æŠ¤çš„æœ€ä½³å®è·µ","url":"/zh-cn/docs/user/waf#ç›¸å…³çŸ¥è¯†ä»‹ç»","content":"","version":"Next","tagName":"h2"},{"title":"ModSecurityâ€‹","type":1,"pageTitle":"å¼€å¯ WAF é˜²æŠ¤çš„æœ€ä½³å®è·µ","url":"/zh-cn/docs/user/waf#modsecurity","content":"ModSecurityæ˜¯ä¸€ä¸ªå¼€æºçš„è·¨å¹³å°Webåº”ç”¨ç¨‹åºé˜²ç«å¢™ï¼ˆWAFï¼‰å¼•æ“ï¼Œæ˜¯ç›®å‰ä¸–ç•Œä¸Šä½¿ç”¨æœ€å¤šçš„å¼€æºWAFäº§å“ï¼Œå…¶ä¸»è¦åŠŸèƒ½æ˜¯å¯¹ä¼ å…¥çš„ HTTP è¯·æ±‚è¿›è¡Œåˆ†æå’Œè¿‡æ»¤ï¼Œä»¥ä¾¿æ£€æµ‹å’Œé˜»æ­¢æ½œåœ¨çš„æ”»å‡»ï¼Œä¸»è¦åŒ…æ‹¬ï¼š SQL Injection (SQLi)ï¼šé˜»æ­¢SQLæ³¨å…¥Cross Site Scripting (XSS)ï¼šé˜»æ­¢è·¨ç«™è„šæœ¬æ”»å‡»Local File Inclusion (LFI)ï¼šé˜»æ­¢åˆ©ç”¨æœ¬åœ°æ–‡ä»¶åŒ…å«æ¼æ´è¿›è¡Œæ”»å‡»Remote File Inclusione(RFI)ï¼šé˜»æ­¢åˆ©ç”¨è¿œç¨‹æ–‡ä»¶åŒ…å«æ¼æ´è¿›è¡Œæ”»å‡»Remote Code Execution (RCE)ï¼šé˜»æ­¢åˆ©ç”¨è¿œç¨‹å‘½ä»¤æ‰§è¡Œæ¼æ´è¿›è¡Œæ”»å‡»PHP Code Injectiodï¼šé˜»æ­¢PHPä»£ç æ³¨å…¥HTTP Protocol Violationsï¼šé˜»æ­¢è¿åHTTPåè®®çš„æ¶æ„è®¿é—®HTTPoxyï¼šé˜»æ­¢åˆ©ç”¨è¿œç¨‹ä»£ç†æ„ŸæŸ“æ¼æ´è¿›è¡Œæ”»å‡»Shellshockï¼šé˜»æ­¢åˆ©ç”¨Shellshockæ¼æ´è¿›è¡Œæ”»å‡» ModSecurityé€šè¿‡ä¸€ä¸ªåŸºäºè§„åˆ™çš„å¼•æ“å®ç°è¿™äº›åŠŸèƒ½ï¼Œè¿™äº›è§„åˆ™å®šä¹‰äº†è¦åŒ¹é…å’Œå¤„ç†çš„æ¨¡å¼å’Œè¡Œä¸ºã€‚ ","version":"Next","tagName":"h3"},{"title":"å®‰å…¨è§„åˆ™è¯­è¨€â€‹","type":1,"pageTitle":"å¼€å¯ WAF é˜²æŠ¤çš„æœ€ä½³å®è·µ","url":"/zh-cn/docs/user/waf#å®‰å…¨è§„åˆ™è¯­è¨€","content":"ModSecurityè§„åˆ™è¯­è¨€ï¼ˆä¹Ÿç§°ä¸ºSecLangï¼‰æ˜¯ä¸€ç§åŸºäºæ­£åˆ™è¡¨è¾¾å¼å’Œæ¨¡å¼åŒ¹é…çš„é¢†åŸŸç‰¹å®šè¯­è¨€ï¼Œç”¨äºæè¿°å’Œæ£€æµ‹Webåº”ç”¨ç¨‹åºä¸­çš„å®‰å…¨äº‹ä»¶å’Œæ”»å‡»ã€‚ SecLang æ”¯æŒä»¥ä¸‹åŸºæœ¬æ¦‚å¿µå’Œè¯­æ³•ç»“æ„ï¼š äº‹åŠ¡å’Œè§„åˆ™ï¼šSecLangä¸­çš„è§„åˆ™ä»¥äº‹åŠ¡ä¸ºå•ä½ï¼Œäº‹åŠ¡åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªè§„åˆ™ã€‚è§„åˆ™å®šä¹‰äº†è¦åŒ¹é…å’Œæ£€æµ‹çš„æ¨¡å¼ï¼Œä»¥åŠåœ¨åŒ¹é…æ—¶è¦æ‰§è¡Œçš„æ“ä½œã€‚åŠ¨ä½œï¼šè§„åˆ™å¯ä»¥åŒ…å«å¤šç§åŠ¨ä½œï¼Œç”¨äºæ‰§è¡Œç‰¹å®šçš„æ“ä½œï¼Œå¦‚æ—¥å¿—è®°å½•ã€æ‹¦æˆªè¯·æ±‚ã€è®¾ç½®å˜é‡ã€ä¿®æ”¹è¯·æ±‚ç­‰ã€‚æ¡ä»¶ï¼šè§„åˆ™å¯ä»¥ä½¿ç”¨æ¡ä»¶è¯­å¥æ¥æŒ‡å®šä»…åœ¨æ»¡è¶³ç‰¹å®šæ¡ä»¶æ—¶æ‰æ‰§è¡Œçš„åŠ¨ä½œã€‚æ¡ä»¶å¯ä»¥åŸºäºè¯·æ±‚çš„å„ä¸ªæ–¹é¢ï¼Œå¦‚è¯·æ±‚æ–¹æ³•ã€URIã€è¯·æ±‚å¤´ã€è¯·æ±‚æ­£æ–‡ã€IPåœ°å€ç­‰ã€‚å˜é‡ï¼šSecLang æ”¯æŒå†…ç½®å˜é‡å’Œç”¨æˆ·å®šä¹‰çš„å˜é‡ï¼Œç”¨äºå­˜å‚¨å’Œæ“ä½œè¯·æ±‚å’Œå“åº”ä¸­çš„æ•°æ®ã€‚å˜é‡å¯ä»¥ç”¨äºè§„åˆ™åŒ¹é…ã€æ¡ä»¶åˆ¤æ–­å’ŒåŠ¨ä½œæ‰§è¡Œã€‚è¿ç®—ç¬¦ï¼šSecLang æä¾›äº†å„ç§è¿ç®—ç¬¦ï¼Œç”¨äºæ‰§è¡Œæ¨¡å¼åŒ¹é…ã€æ¯”è¾ƒå’Œé€»è¾‘æ“ä½œã€‚è¿™äº›è¿ç®—ç¬¦ç”¨äºæ„å»ºè§„åˆ™çš„æ¡ä»¶å’Œæ“ä½œã€‚ SecLang å…è®¸ç”¨æˆ·ç¼–å†™è‡ªå®šä¹‰è§„åˆ™ï¼Œä»¥æŒ‡å®šåœ¨HTTPè¯·æ±‚å’Œå“åº”ä¸­åº”è¯¥å¦‚ä½•æ£€æµ‹å’Œå¤„ç†æ½œåœ¨çš„å®‰å…¨é—®é¢˜ã€‚è§„åˆ™å¯ä»¥å®šä¹‰è¯¸å¦‚é˜»æ­¢æ¶æ„è¯·æ±‚ã€è¿‡æ»¤ç‰¹å®šçš„æ•°æ®ã€æ‹¦æˆªSQLæ³¨å…¥å’Œè·¨ç«™ç‚¹è„šæœ¬ï¼ˆXSSï¼‰ç­‰æ”»å‡»ç±»å‹çš„è¡Œä¸ºã€‚é€šè¿‡ä½¿ç”¨SecLangï¼Œç”¨æˆ·å¯ä»¥åˆ©ç”¨ModSecurityçš„å¼ºå¤§åŠŸèƒ½æ¥ä¿æŠ¤Webåº”ç”¨ç¨‹åºå…å—å„ç§å®‰å…¨å¨èƒã€‚æ›´å¤šå…³äºSecLangçš„è¯­æ³•è§„åˆ™å¯å‚è€ƒSecLangè¯­æ³•å‚è€ƒã€‚ ","version":"Next","tagName":"h3"},{"title":"OWASPæ ¸å¿ƒè§„åˆ™é›†â€‹","type":1,"pageTitle":"å¼€å¯ WAF é˜²æŠ¤çš„æœ€ä½³å®è·µ","url":"/zh-cn/docs/user/waf#owaspæ ¸å¿ƒè§„åˆ™é›†","content":"OWASP CRSï¼ˆOWASP ModSecurity Core Rule Setï¼‰æ˜¯ä¸€ä¸ªç”±OWASPï¼ˆå¼€æ”¾å¼Webåº”ç”¨å®‰å…¨é¡¹ç›®ï¼‰ç¤¾åŒºå¼€å‘å’Œç»´æŠ¤çš„ModSecurityè§„åˆ™é›†åˆã€‚å®ƒæ˜¯ä¸€å¥—é¢„å…ˆå®šä¹‰çš„è§„åˆ™ï¼Œæ—¨åœ¨æä¾›ä¿æŠ¤Webåº”ç”¨ç¨‹åºå…å—å¹¿æ³›çš„Webå®‰å…¨å¨èƒå’Œæ”»å‡»ã€‚è¿™äº›è§„åˆ™å¯ä»¥æ ¹æ®å…·ä½“çš„éœ€æ±‚è¿›è¡Œä¿®æ”¹ï¼Œä»¥é€‚åº”ä¸åŒçš„ Web åº”ç”¨ç¨‹åºçš„å®‰å…¨éœ€æ±‚ã€‚ ","version":"Next","tagName":"h3"},{"title":"WAFæ’ä»¶é˜²æŠ¤åŸç†â€‹","type":1,"pageTitle":"å¼€å¯ WAF é˜²æŠ¤çš„æœ€ä½³å®è·µ","url":"/zh-cn/docs/user/waf#wafæ’ä»¶é˜²æŠ¤åŸç†","content":"WAF æ’ä»¶åŸºäº Higress Wasm Go SDK ä»¥åŠ Coraza å®ç°ï¼Œéµå¾ª Modsecurity å®šä¹‰çš„ Phase è§„èŒƒã€‚ Phase 1: Request headersPhase 2: Request bodyPhase 3: Response headersPhase 4: Response bodyPhase 5: Logging  æ’ä»¶å†…ç½®äº†OWASP CRSä»¥æä¾›åŸºç¡€çš„é˜²æŠ¤åŠŸèƒ½ï¼Œæ”¯æŒç”¨æˆ·è‡ªå®šä¹‰é˜²æŠ¤è§„åˆ™ï¼Œå¹¶ä¸”æ”¯æŒè·¯ç”±çº§/åŸŸåçº§ç»†ç²’åº¦é˜²æŠ¤ã€‚ ","version":"Next","tagName":"h2"},{"title":"ä½¿ç”¨ç¤ºä¾‹â€‹","type":1,"pageTitle":"å¼€å¯ WAF é˜²æŠ¤çš„æœ€ä½³å®è·µ","url":"/zh-cn/docs/user/waf#ä½¿ç”¨ç¤ºä¾‹","content":"é¦–å…ˆå‡†å¤‡ä¸€ä¸ªk8sé›†ç¾¤ï¼Œå¹¶å®‰è£…Higressï¼Œå‚è€ƒHigresséƒ¨ç½²æ•™ç¨‹ã€‚ ","version":"Next","tagName":"h2"},{"title":"éƒ¨ç½²æœåŠ¡å¹¶åˆ›å»ºingressâ€‹","type":1,"pageTitle":"å¼€å¯ WAF é˜²æŠ¤çš„æœ€ä½³å®è·µ","url":"/zh-cn/docs/user/waf#éƒ¨ç½²æœåŠ¡å¹¶åˆ›å»ºingress","content":"åœ¨K8sé›†ç¾¤ä¸­applyå¦‚ä¸‹èµ„æºï¼Œä»¥éƒ¨ç½²åç«¯æœåŠ¡ä»¥åŠingressï¼š apiVersion: apps/v1 kind: Deployment metadata: name: httpbin-deployment labels: app: httpbin-deployment spec: replicas: 1 selector: matchLabels: app: httpbin-deployment template: metadata: labels: app: httpbin-deployment spec: containers: - image: kennethreitz/httpbin imagePullPolicy: IfNotPresent name: httpbin-backend ports: - name: http containerPort: 80 --- apiVersion: v1 kind: Service metadata: name: httpbin-service namespace: default labels: app: httpbin-service spec: ports: - port: 8080 name: http protocol: TCP targetPort: 80 selector: app: httpbin-deployment type: ClusterIP --- kind: Pod apiVersion: v1 metadata: name: foo-app labels: app: foo spec: containers: - name: foo-app image: higress-registry.cn-hangzhou.cr.aliyuncs.com/higress/http-echo:0.2.4-alpine args: - &quot;-text=foo&quot; --- kind: Service apiVersion: v1 metadata: name: foo-service spec: selector: app: foo ports: # Default port used by the image - port: 5678 --- apiVersion: networking.k8s.io/v1 kind: Ingress metadata: name: httpbin-ingress namespace: default spec: ingressClassName: higress rules: - http: paths: - pathType: Prefix path: &quot;/&quot; backend: service: name: httpbin-service port: number: 8080 --- apiVersion: networking.k8s.io/v1 kind: Ingress metadata: name: echo-ingress namespace: default spec: ingressClassName: higress rules: - http: paths: - pathType: Prefix path: &quot;/foo&quot; backend: service: name: foo-service port: number: 5678  è®¿é—®ä¸¤æ¡è·¯ç”±ï¼ˆ/user-agentè¢«è·¯ç”±åˆ°httpbin-serviceæœåŠ¡ï¼Œ/fooè¢«è·¯ç”±åˆ°foo-serviceï¼‰ï¼š ","version":"Next","tagName":"h3"},{"title":"å®‰è£…WAFæ’ä»¶â€‹","type":1,"pageTitle":"å¼€å¯ WAF é˜²æŠ¤çš„æœ€ä½³å®è·µ","url":"/zh-cn/docs/user/waf#å®‰è£…wafæ’ä»¶","content":"åœ¨K8sé›†ç¾¤ä¸­applyå¦‚ä¸‹èµ„æºï¼Œä»¥éƒ¨ç½²WAFæ’ä»¶ï¼š apiVersion: extensions.higress.io/v1alpha1 kind: WasmPlugin metadata: name: waf-go namespace: higress-system spec: defaultConfig: useCRS: true secRules: - &quot;SecRuleEngine On&quot; - &quot;SecDebugLogLevel 3&quot; - &quot;SecRule REQUEST_URI \\&quot;@streq /admin\\&quot; \\&quot;id:101,phase:1,t:lowercase,deny\\&quot;&quot; matchRules: - ingress: - default/echo-ingress config: secRules: - &quot;SecRuleEngine On&quot; - &quot;SecDebugLogLevel 3&quot; - &quot;SecAction \\&quot;id:102,phase:1,deny\\&quot;&quot; url: oci://higress-registry.cn-hangzhou.cr.aliyuncs.com/plugins/go-waf:1.0.1  ä¸Šè¿°é…ç½®å«ä¹‰å¦‚ä¸‹ï¼š defaultConfigä¸‹é…ç½®äº†å…¨å±€çš„é˜²æŠ¤è§„åˆ™ useCRS=trueè¡¨æ˜åŠ è½½OWASP CRSå®‰å…¨è§„åˆ™é›†secRulesä¸‹æœ‰ä¸‰æ¡è§„åˆ™ä¸ºç”¨æˆ·è‡ªå®šä¹‰çš„é˜²æŠ¤è§„åˆ™ã€‚ matchRulesä¸‹é…ç½®äº†è·¯ç”±çº§é˜²æŠ¤è§„åˆ™ï¼ˆåŸŸåçº§åŒç†ï¼‰ï¼Œå‚è€ƒHigressæ’ä»¶ä½¿ç”¨æ–‡æ¡£ ingressç”¨äºæŒ‡å®šé˜²æŠ¤è§„åˆ™ç”Ÿæ•ˆçš„è·¯ç”±ï¼Œè¿™é‡Œè®¾ç½®çš„è·¯ç”±ä¸ºdefaultå‘½åç©ºé—´ä¸‹çš„echo-ingressè·¯ç”±configä¸‹é…ç½®è·¯ç”±çº§é˜²æŠ¤è§„åˆ™ï¼Œç»“æ„ä¸defaultConfigä¸€è‡´ï¼Œåœ¨è¿™é‡Œæ²¡æœ‰åŠ è½½OWASP CRSè§„åˆ™é›†ï¼Œå¹¶ä¸”è®¾ç½®æ‹¦æˆªä¸€åˆ‡è¯·æ±‚ã€‚ ","version":"Next","tagName":"h3"},{"title":"è¯·æ±‚æ‹¦æˆªç¤ºä¾‹â€‹","type":1,"pageTitle":"å¼€å¯ WAF é˜²æŠ¤çš„æœ€ä½³å®è·µ","url":"/zh-cn/docs/user/waf#è¯·æ±‚æ‹¦æˆªç¤ºä¾‹","content":"è‡ªå®šä¹‰è§„åˆ™é˜²æŠ¤æµ‹è¯•â€‹ æµ‹è¯•æˆ‘ä»¬åœ¨å…¨å±€é˜²æŠ¤è§„åˆ™ä¸­å®šä¹‰çš„å¦‚ä¸‹è‡ªå®šä¹‰è§„åˆ™ï¼š &quot;SecRule REQUEST_URI \\&quot;@streq /admin\\&quot; \\&quot;id:101,phase:1,t:lowercase,deny\\&quot;&quot;  è¯¥æ¡è§„åˆ™ä¼šé˜»æ­¢pathä¸º/adminçš„è¯·æ±‚ï¼š ç»†ç²’åº¦ï¼ˆè·¯ç”±çº§/åŸŸåçº§ï¼‰é˜²æŠ¤æµ‹è¯•â€‹ ä»¥è·¯ç”±çº§ä¸ºä¾‹ï¼Œè®¿é—®/fooï¼Œè¯¥è¯·æ±‚å‘½ä¸­ä»¥ä¸‹è·¯ç”±çº§é˜²æŠ¤è§„åˆ™ï¼š matchRules: - ingress: - default/echo-ingress config: secRules: - &quot;SecRuleEngine On&quot; - &quot;SecDebugLogLevel 3&quot; - &quot;SecAction \\&quot;id:102,phase:1,deny\\&quot;&quot;  æ ¹æ®è¯¥é˜²æŠ¤è§„åˆ™ï¼Œè¯¥è¯·æ±‚å°†ä¼šè¢«æ‹¦æˆªï¼š å¸¸è§æ”»å‡»é˜²æŠ¤æµ‹è¯•â€‹ shellæ³¨å…¥æ”»é˜²ç¤ºä¾‹ sqlæ³¨å…¥æ”»é˜²ç¤ºä¾‹ è¿œç¨‹æ–‡ä»¶åŒ…å«ï¼ˆRFIï¼‰æ”»é˜²ç¤ºä¾‹ xssæ”»é˜²ç¤ºä¾‹ phpæ³¨å…¥æ”»é˜²ç¤ºä¾‹ ","version":"Next","tagName":"h3"},{"title":"æ•´ä½“é˜²æŠ¤èƒ½åŠ›è¯„ä¼°â€‹","type":1,"pageTitle":"å¼€å¯ WAF é˜²æŠ¤çš„æœ€ä½³å®è·µ","url":"/zh-cn/docs/user/waf#æ•´ä½“é˜²æŠ¤èƒ½åŠ›è¯„ä¼°","content":"GoTestWAFæ˜¯ä¸€æ¬¾APIå’ŒOWASPæ”»å‡»æ¨¡æ‹Ÿå·¥å…·ï¼Œæ”¯æŒåŒ…æ‹¬RESTã€GraphQLã€gRPCã€WebSocketsã€SOAPã€XMLRPCç­‰å¤šç§APIåè®®ï¼Œæ—¨åœ¨è¯„ä¼°Webåº”ç”¨å®‰å…¨è§£å†³æ–¹æ¡ˆï¼Œå¦‚APIå®‰å…¨ä»£ç†ã€Webåº”ç”¨é˜²ç«å¢™ï¼ˆWAFï¼‰ã€IPSã€APIç½‘å…³ç­‰ã€‚ è¯¥å·¥å…·ä½¿ç”¨æ”¾ç½®åœ¨HTTPè¯·æ±‚æ­£æ–‡ã€æ ‡å¤´ã€URLå‚æ•°ç­‰ä¸åŒéƒ¨åˆ†çš„ä¸åŒç¼–ç çš„æœ‰æ•ˆè´Ÿè½½ç”Ÿæˆæ¶æ„è¯·æ±‚ï¼Œæ¶µç›–äº†å¸¸è§çš„å„ç§æ”»å‡»ç±»å‹ã€‚ å¤šç§æ”»å‡»æµ‹è¯•ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå›¾ä¸­ç»“æœè¡¨æ˜WAFæ’ä»¶èƒ½å¤Ÿæœ‰æ•ˆæ£€æµ‹å„ç§æ”»å‡»ç±»å‹çš„éæ³•è¯·æ±‚ã€‚ WAFé˜²æŠ¤åŠŸèƒ½æ•´ä½“å¾—åˆ†å¦‚ä¸‹ï¼Œé«˜äºgotestwafæä¾›çš„benchmarkï¼ˆbenchmarkä¸­paranoiaè¡¨ç¤ºé˜²æŠ¤ç­‰çº§ï¼Œæ•°å€¼è¶Šå¤§ï¼Œé˜²æŠ¤ç­‰çº§è¶Šé«˜ï¼Œæ­£ç¡®æ‹¦æˆªä¸è¯¯æ‹¦æˆªçš„è¯·æ±‚æ•°å‡ä¼šå¢åŠ ï¼‰ï¼Œæµ‹è¯•ç»“æœè¡¨æ˜WAFæ’ä»¶å…·æœ‰è¾ƒå¥½çš„é˜²æŠ¤èƒ½åŠ›ã€‚ ","version":"Next","tagName":"h2"},{"title":"Wasm æ’ä»¶é•œåƒè§„èŒƒ","type":0,"sectionRef":"#","url":"/zh-cn/docs/user/wasm-image-spec","content":"","keywords":"wasm image oci","version":"Next"},{"title":"1. æ¦‚è¿°â€‹","type":1,"pageTitle":"Wasm æ’ä»¶é•œåƒè§„èŒƒ","url":"/zh-cn/docs/user/wasm-image-spec#1-æ¦‚è¿°","content":"æœ¬è§„èŒƒæ—¨åœ¨å®šä¹‰å¯¹ Higress Wasm Plugin é•œåƒçš„å†…å®¹å’Œæ„å»ºæ–¹å¼ã€‚åœ¨ç¼–å†™æ—¶ï¼Œç¬”è€…å‚è€ƒäº† Wasm Image Specificationã€‚ æ³¨æ„ï¼šæœ¬è§„èŒƒä½¿ç”¨ OCI é•œåƒæ ¼å¼ï¼Œå¹¶ä¸é™å®šæ’ä»¶åªèƒ½ä½¿ç”¨ OCI é•œåƒï¼Œå¯¹äºè‡ªå®šä¹‰æ’ä»¶å¼€å‘ï¼Œè¯·å‚è€ƒè‡ªå®šä¹‰æ’ä»¶é‡Œä»‹ç»çš„æ›´ç®€å•çš„æ–¹å¼ã€‚ OCI é•œåƒæ˜¯ç”¨æ¥è§„èŒƒæ‰€æœ‰å¹³å°æ¨å‡ºçš„é€šç”¨æ ‡å‡†æ’ä»¶ä½¿ç”¨ ","version":"Next","tagName":"h2"},{"title":"2. é•œåƒç»“æ„â€‹","type":1,"pageTitle":"Wasm æ’ä»¶é•œåƒè§„èŒƒ","url":"/zh-cn/docs/user/wasm-image-spec#2-é•œåƒç»“æ„","content":"æ¯ä¸ªé•œåƒå¿…é¡»åŸºäº scratch ä½¿ç”¨ OCI æ ¼å¼è§„èŒƒè¿›è¡Œæ„å»ºï¼Œä¸”å¯åŒ…å«ä»¥ä¸‹æ–‡ä»¶ï¼š spec.yamlï¼šå¿…è¦ã€‚æ’ä»¶çš„å…ƒæ•°æ®æ–‡ä»¶ã€‚å…¶å†…å®¹æ ¼å¼è¯·è§ç¬¬ 3 èŠ‚ã€‚README.mdï¼šå¿…è¦ã€‚æ’ä»¶çš„ç”¨æ³•è¯´æ˜æ–‡ä»¶ã€‚ä½¿ç”¨ Markdown æ ¼å¼ã€‚è¯­è¨€å¯ä½¿ç”¨è‹±æ–‡æˆ–ä¸­æ–‡ã€‚README_{lang}.mdï¼šå¯é€‰ã€‚æ’ä»¶ç”¨æ³•è¯´æ˜æ–‡ä»¶çš„ç¿»è¯‘ç‰ˆæœ¬ã€‚ä½¿ç”¨ Markdown æ ¼å¼ã€‚lang çš„å–å€¼ä¸º ZH æˆ– ENã€‚icon.pngï¼šå¯é€‰ã€‚æ’ä»¶çš„å›¾æ ‡æ–‡ä»¶ã€‚ä¹Ÿå¯ä»¥é€‰æ‹©åœ¨ spec.yaml ä¸­æŒ‡å®šå›¾æ ‡ URLã€‚äºŒè€…åŒæ—¶å­˜åœ¨æ—¶ï¼Œç³»ç»Ÿä¼šä½¿ç”¨åŒ…å†…éƒ¨çš„å›¾æ ‡æ–‡ä»¶ç”¨äºå±•ç¤ºã€‚plugin.wasmï¼šå¿…è¦ã€‚æ’ä»¶çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚ é•œåƒçš„æ¯ä¸€å±‚åªå¯åŒ…å«ä¸€ä¸ªæ–‡ä»¶ã€‚ é™¤ plugin.wasm æ‰€åœ¨å±‚å¤–ï¼Œå…¶å®ƒå±‚éœ€æ ¹æ®æ–‡ä»¶åè®¾ç½® media typeï¼š spec.yamlï¼šapplication/vnd.module.wasm.spec.v1+yaml README.mdï¼šapplication/vnd.module.wasm.doc.v1+markdownREADME_{lang}.mdï¼šapplication/vnd.module.wasm.doc.v1.{lang}+markdownicon.pngï¼šapplication/vnd.module.wasm.icon.v1+png plugin.wasm æ–‡ä»¶å¿…é¡»æ”¾ç½®äºé•œåƒçš„æœ€åä¸€å±‚ï¼Œä¸”è¯¥å±‚åº”ä½¿ç”¨ application/vnd.oci.image.layer.v1.tar+gzip ä½œä¸º media typeã€‚ ","version":"Next","tagName":"h2"},{"title":"3. å…ƒæ•°æ®æ–‡ä»¶æ ¼å¼â€‹","type":1,"pageTitle":"Wasm æ’ä»¶é•œåƒè§„èŒƒ","url":"/zh-cn/docs/user/wasm-image-spec#3-å…ƒæ•°æ®æ–‡ä»¶æ ¼å¼","content":"æœ¬èŠ‚ä»¥ basic-auth æ’ä»¶çš„å…ƒæ•°æ®ä¿¡æ¯ä¸ºä¾‹ï¼Œä»‹ç»å…ƒæ•°æ®æ–‡ä»¶ spec.yaml çš„æ ¼å¼ã€‚ apiVersion: 1.0.0 # æœ¬æ–‡ä»¶æ‰€ä½¿ç”¨çš„æ ¼å¼ç‰ˆæœ¬ã€‚ç›®å‰å›ºå®šä¸º 1.0.0 info: category: auth # æ’ä»¶ç±»å‹ã€‚å¯é€‰å€¼æœ‰ï¼šauthï¼ˆè®¤è¯é‰´æƒï¼‰ã€securityï¼ˆå®‰å…¨é˜²æŠ¤ï¼‰ã€protocolï¼ˆåè®®è½¬æ¢ï¼‰ã€flow-controlï¼ˆæµé‡æ§åˆ¶ï¼‰ã€flow-monitorï¼ˆæµé‡è§‚æµ‹ï¼‰ã€customï¼ˆè‡ªå®šä¹‰ï¼‰ name: basic-auth/v1 # æ’ä»¶åç§°ã€‚è¿™æ˜¯æ’ä»¶çš„å”¯ä¸€æ ‡è¯†ã€‚å»ºè®®åœ¨å°¾éƒ¨è¿½åŠ ç±»ä¼¼&quot;/v1&quot;çš„ç‰ˆæœ¬å·ï¼Œä»¥ä¾¿åº”å¯¹åç»­ä¸å…¼å®¹å‡çº§çš„åœºæ™¯ title: Basic Auth # æ˜¾ç¤ºåç§°ï¼Œæ”¯æŒå›½é™…åŒ– description: æœ¬æ’ä»¶å®ç°äº†åŸºäº HTTP Basic Auth æ ‡å‡†è¿›è¡Œè®¤è¯é‰´æƒçš„åŠŸèƒ½ã€‚ # åŠŸèƒ½æè¿°ï¼Œæ”¯æŒå›½é™…åŒ– x-description-i18n: # ä¸Šé¢ description å­—æ®µçš„å›½é™…åŒ–å†…å®¹ã€‚æ‰€æœ‰æ”¯æŒå›½é™…åŒ–çš„å­—æ®µå‡å¯ä½¿ç”¨&quot;x-{name}-i18n&quot;çš„æ–¹å¼æ·»åŠ å›½é™…åŒ–å†…å®¹ en-US: This plugin implements an authentication function based on HTTP Basic Auth standard. iconUrl: https://img.alicdn.com/imgextra/i1/O1CN01I7WjVs1K33EQjInid_!!6000000001107-2-tps-960-290.png # å¯é€‰ï¼Œæ’ä»¶çš„å›¾æ ‡æ–‡ä»¶ URLã€‚ version: 1.0.0 # ç‰ˆæœ¬å· contact: # è”ç³»ä¿¡æ¯ name: Higress Team url: http://higress.io/ email: admin@higress.io spec: phase: AUTHN # è¿è¡Œé˜¶æ®µã€‚å–å€¼è¯·å‚è€ƒ https://istio.io/latest/docs/reference/config/proxy_extensions/wasm-plugin/#PluginPhase priority: 0 # é˜¶æ®µå†…çš„è¿è¡Œä¼˜å…ˆçº§ã€‚å–å€¼è¯·å‚è€ƒ https://istio.io/latest/docs/reference/config/proxy_extensions/wasm-plugin/#WasmPlugin configSchema: # æ’ä»¶è¿è¡Œé…ç½®çš„æ•°æ®æ¨¡å‹ï¼Œç›®å‰ä»…æ”¯æŒä½¿ç”¨ OpenAPI 3.0.0 æ ‡å‡†ä¸­çš„ Schema æ ¼å¼è¿›è¡Œå®šä¹‰ openAPIV3Schema: # ä»¥ä¸‹å†…å®¹çš„æ•°æ®æ ¼å¼è¯·å‚è€ƒ https://openapi.apifox.cn/#schema-%E5%AF%B9%E8%B1%A1 ã€‚éƒ¨åˆ†æ˜¾ç¤ºç”¨å­—æ®µæ”¯æŒå›½é™…åŒ–ã€‚ type: object properties: consumers: type: array scope: GLOBAL # é…ç½®é¡¹ä½œç”¨èŒƒå›´ã€‚å¯é€‰å€¼ï¼šGLOBALï¼ˆå…¨å±€é…ç½®ï¼‰ã€INSTANCEï¼ˆå®ä¾‹çº§é…ç½®ï¼Œå³åœ¨å…³è”è·¯ç”±ã€åŸŸåæ—¶çš„é…ç½®ï¼‰ã€ALLï¼ˆå…¨å±€ã€å®ä¾‹çš†å¯é…ç½®ï¼‰ã€‚å¯ç©ºã€‚ç¼ºçœå€¼ä¸º INSTANCEã€‚ title: è°ƒç”¨æ–¹åˆ—è¡¨ x-title-i18n: en-US: Consumer List description: æœåŠ¡è°ƒç”¨æ–¹åˆ—è¡¨ï¼Œç”¨äºå¯¹è¯·æ±‚è¿›è¡Œè®¤è¯ x-description-i18n: en-US: List of service consumers which will be used in request authentication items: type: object properties: name: type: string title: åç§° x-title-i18n: en-US: Name description: è¯¥è°ƒç”¨æ–¹çš„åç§° x-description-i18n: en-US: The name of the consumer # æ•°æ®æ ¡éªŒåœºæ™¯å‚ç…§ JSON Schema Validation Spec å®ç° # https://json-schema.org/draft/2020-12/json-schema-validation.html # ç›®å‰æ”¯æŒä»¥ä¸‹å­—æ®µï¼š # - maximum # - minimum # - maxLength # - minLength # - pattern # - maxItems # - minItems # - required minLength: 6 # æœ€å°é•¿åº¦ï¼Œç”¨äºæ•°æ®æ ¡éªŒ maxLength: 256 # æœ€å¤§é•¿åº¦ï¼Œç”¨äºæ•°æ®æ ¡éªŒ pattern: &quot;^$&quot; # æ­£åˆ™è¡¨è¾¾å¼ï¼Œç”¨äºæ•°æ®æ ¡éªŒ example: - consumer1 credential: type: string title: è®¿é—®å‡­è¯ x-title-i18n: en-US: Credential description: è¯¥è°ƒç”¨æ–¹çš„è®¿é—®å‡­è¯ x-description-i18n: en-US: The credential of the consumer example: - admin:123456 required: - name - credential allow: type: array title: æˆæƒè®¿é—®çš„è°ƒç”¨æ–¹åˆ—è¡¨ x-title-i18n: en-US: Allowed Consumers description: å¯¹äºåŒ¹é…ä¸Šè¿°æ¡ä»¶çš„è¯·æ±‚ï¼Œå…è®¸è®¿é—®çš„è°ƒç”¨æ–¹åˆ—è¡¨ x-description-i18n: en-US: Consumers to be allowed for matched requests items: type: string example: - consumer1 required: - allow - consumers example: consumers: - name: consumer1 credential: admin:123456 - name: consumer2 credential: guest:abc allow: - consumer2  ","version":"Next","tagName":"h2"},{"title":"4. é•œåƒæ„å»ºæ–¹å¼â€‹","type":1,"pageTitle":"Wasm æ’ä»¶é•œåƒè§„èŒƒ","url":"/zh-cn/docs/user/wasm-image-spec#4-é•œåƒæ„å»ºæ–¹å¼","content":"åœ¨ Higress é¡¹ç›®ç›®å½•å†…å¯åŠ¨æ„å»ºç”¨å®¹å™¨ GO_VERSION=&quot;1.19&quot; TINYGO_VERSION=&quot;0.25.0&quot; ORAS_VERSION=&quot;1.0.0&quot; PLUGIN_NAME=&quot;hello-world&quot; BUILDER_IMAGE=&quot;higress-registry.cn-hangzhou.cr.aliyuncs.com/plugins/wasm-go-builder:go${GO_VERSION}-tinygo${TINYGO_VERSION}-oras${ORAS_VERSION}&quot; docker run -v ${PWD}:/workspace -e PLUGIN_NAME=${PLUGIN_NAME} -it --rm ${BUILDER_IMAGE} /bin/bash  åœ¨å®¹å™¨ä¸­æ„å»º Wasm æ–‡ä»¶ cd /workspace/plugins/wasm-go/extensions/${PLUGIN_NAME} go mod tidy tinygo build -o ./plugin.wasm -scheduler=none -target=wasi ./main.go  æ„å»ºå¹¶æ¨é€ OCI é•œåƒ tar czvf plugin.tar.gz plugin.wasm IMAGE_REGISTRY_SERVICE=docker.io IMAGE_REPOSITORY=&quot;${IMAGE_REGISTRY_SERVICE}/plugins/${PLUGIN_NAME}&quot; IMAGE_TAG=&quot;v0.0.1&quot; oras login ${IMAGE_REGISTRY_SERVICE} oras push ${IMAGE_REPOSITORY}:${IMAGE_TAG} \\ ./spec.yaml:application/vnd.module.wasm.spec.v1+yaml \\ ./README.md:application/vnd.module.wasm.doc.v1+markdown \\ ./README_EN.md:application/vnd.module.wasm.doc.v1.en+markdown \\ ./plugin.tar.gz:application/vnd.oci.image.layer.v1.tar+gzip  ","version":"Next","tagName":"h2"},{"title":"5. é™„å½•â€‹","type":1,"pageTitle":"Wasm æ’ä»¶é•œåƒè§„èŒƒ","url":"/zh-cn/docs/user/wasm-image-spec#5-é™„å½•","content":"","version":"Next","tagName":"h2"},{"title":"5.1 å„æ’ä»¶ç±»å‹çš„ç¼ºçœå›¾æ ‡â€‹","type":1,"pageTitle":"Wasm æ’ä»¶é•œåƒè§„èŒƒ","url":"/zh-cn/docs/user/wasm-image-spec#51-å„æ’ä»¶ç±»å‹çš„ç¼ºçœå›¾æ ‡","content":"è‡ªå®šä¹‰ï¼šhttps://img.alicdn.com/imgextra/i1/O1CN018iKKih1iVx287RltL_!!6000000004419-2-tps-42-42.pngè®¤è¯é‰´æƒï¼šhttps://img.alicdn.com/imgextra/i4/O1CN01BPFGlT1pGZ2VDLgaH_!!6000000005333-2-tps-42-42.pngæµé‡ç®¡æ§ï¼šhttps://img.alicdn.com/imgextra/i3/O1CN01bAFa9k1t1gdQcVTH0_!!6000000005842-2-tps-42-42.pngæµé‡è§‚æµ‹ï¼šhttps://img.alicdn.com/imgextra/i4/O1CN01aet3s61MoLOEEhRIo_!!6000000001481-2-tps-42-42.pngå®‰å…¨é˜²æŠ¤ï¼šhttps://img.alicdn.com/imgextra/i1/O1CN01jKT9vC1O059vNaq5u_!!6000000001642-2-tps-42-42.pngä¼ è¾“åè®®ï¼šhttps://img.alicdn.com/imgextra/i2/O1CN01xIywow1mVGuRUjbhe_!!6000000004959-2-tps-42-42.png ","version":"Next","tagName":"h3"},{"title":"ä½¿ç”¨ GO è¯­è¨€å¼€å‘ WASM æ’ä»¶","type":0,"sectionRef":"#","url":"/zh-cn/docs/user/wasm-go","content":"","keywords":"wasm","version":"Next"},{"title":"ä¸€ã€å·¥å…·å‡†å¤‡â€‹","type":1,"pageTitle":"ä½¿ç”¨ GO è¯­è¨€å¼€å‘ WASM æ’ä»¶","url":"/zh-cn/docs/user/wasm-go#ä¸€å·¥å…·å‡†å¤‡","content":"éœ€è¦å…ˆå®‰è£… Golang å’Œ TinyGo ä¸¤ä¸ªç¨‹åº ","version":"Next","tagName":"h2"},{"title":"1. Golangâ€‹","type":1,"pageTitle":"ä½¿ç”¨ GO è¯­è¨€å¼€å‘ WASM æ’ä»¶","url":"/zh-cn/docs/user/wasm-go#1-golang","content":"ï¼ˆè¦æ±‚ 1.18 ç‰ˆæœ¬ä»¥ä¸Šï¼‰ å®˜æ–¹æŒ‡å¼•é“¾æ¥ï¼šhttps://go.dev/doc/install Windowsâ€‹ ä¸‹è½½å®‰è£…æ–‡ä»¶ï¼šhttps://go.dev/dl/go1.19.windows-amd64.msiæ‰“å¼€ä¸‹è½½å¥½çš„å®‰è£…æ–‡ä»¶ç›´æ¥å®‰è£…ï¼Œé»˜è®¤ä¼šå®‰è£…åˆ° Program Files æˆ– Program Files (x86) ç›®å½•å®‰è£…å®Œæˆåï¼Œä½¿ç”¨é”®ç›˜ä¸Šçš„å¿«æ·é”®â€œWin+Râ€æ‰“å¼€è¿è¡Œçª—å£ï¼Œåœ¨è¿è¡Œçª—å£ä¸­è¾“å…¥â€œcmdâ€ç‚¹å‡»ç¡®å®šå³å¯æ‰“å¼€å‘½ä»¤çª—å£ï¼Œè¾“å…¥å‘½ä»¤ï¼šgo versionï¼Œè¾“å‡ºå½“å‰å®‰è£…çš„ç‰ˆæœ¬ï¼Œè¡¨æ˜å®‰è£…æˆåŠŸ MacOSâ€‹ ä¸‹è½½å®‰è£…æ–‡ä»¶ï¼šhttps://go.dev/dl/go1.19.darwin-amd64.pkgæ‰“å¼€ä¸‹è½½å¥½çš„å®‰è£…æ–‡ä»¶ç›´æ¥å®‰è£…ï¼Œé»˜è®¤ä¼šå®‰è£…åˆ°/usr/local/goç›®å½•æ‰“å¼€ç»ˆç«¯å‘½ä»¤è¡Œå·¥å…·ï¼Œè¾“å…¥å‘½ä»¤ï¼šgo versionï¼Œè¾“å‡ºå½“å‰å®‰è£…çš„ç‰ˆæœ¬ï¼Œè¡¨æ˜å®‰è£…æˆåŠŸ Linuxâ€‹ ä¸‹è½½å®‰è£…æ–‡ä»¶ï¼šhttps://go.dev/dl/go1.19.linux-amd64.tar.gzæ‰§è¡Œä¸‹åˆ—å‘½ä»¤è¿›è¡Œå®‰è£…ï¼š rm -rf /usr/local/go &amp;&amp; tar -C /usr/local -xzf go1.19.linux-amd64.tar.gz export PATH=$PATH:/usr/local/go/bin  æ‰§è¡Œ go versionï¼Œè¾“å‡ºå½“å‰å®‰è£…çš„ç‰ˆæœ¬ï¼Œè¡¨æ˜å®‰è£…æˆåŠŸ ","version":"Next","tagName":"h3"},{"title":"2. TinyGoâ€‹","type":1,"pageTitle":"ä½¿ç”¨ GO è¯­è¨€å¼€å‘ WASM æ’ä»¶","url":"/zh-cn/docs/user/wasm-go#2-tinygo","content":"ï¼ˆè¦æ±‚ 0.28.1 ç‰ˆæœ¬ä»¥ä¸Šï¼‰ å®˜æ–¹æŒ‡å¼•é“¾æ¥ï¼šhttps://tinygo.org/getting-started/install/ Windowsâ€‹ ä¸‹è½½å®‰è£…æ–‡ä»¶ï¼šhttps://github.com/tinygo-org/tinygo/releases/download/v0.28.1/tinygo0.28.1.windows-amd64.zipè§£å‹å®‰è£…æ–‡ä»¶åˆ°æŒ‡å®šç›®å½•å¦‚æœå®‰è£…è§£å‹åçš„ç›®å½•ä¸ºC:\\tinygoï¼Œåˆ™éœ€è¦å°†C:\\tinygo\\binæ·»åŠ åˆ°ç¯å¢ƒå˜é‡PATHä¸­ï¼Œä¾‹å¦‚é€šè¿‡åœ¨å‘½ä»¤çª—å£ä¸­è¾“å…¥ set å‘½ä»¤è®¾ç½® set PATH=%PATH%;&quot;C:\\tinygo\\bin&quot;;  åœ¨å‘½ä»¤çª—å£æ‰§è¡Œå‘½ä»¤ tinygo versionï¼Œè¾“å‡ºå½“å‰å®‰è£…çš„ç‰ˆæœ¬ï¼Œè¡¨æ˜å®‰è£…æˆåŠŸ MacOSâ€‹ ä¸‹è½½å‹ç¼©åŒ…å¹¶è§£å‹ wget https://github.com/tinygo-org/tinygo/releases/download/v0.28.1/tinygo0.28.1.darwin-amd64.tar.gz tar -zxf tinygo0.28.1.darwin-amd64.tar.gz  å¦‚æœå®‰è£…è§£å‹åçš„ç›®å½•ä¸º/tmpï¼Œåˆ™éœ€è¦å°†/tmp/tinygo/binæ·»åŠ åˆ°ç¯å¢ƒå˜é‡PATHä¸­ï¼š export PATH=/tmp/tinygo/bin:$PATH  åœ¨ç»ˆç«¯æ‰§è¡Œ tinygo versionï¼Œè¾“å‡ºå½“å‰å®‰è£…çš„ç‰ˆæœ¬ï¼Œè¡¨æ˜å®‰è£…æˆåŠŸ Linuxâ€‹ ä»¥ Ubuntu ä¸‹ amd64 æ¶æ„ä¸ºä¾‹ï¼Œå…¶ä»–ç³»ç»Ÿè¯·å‚è€ƒå®˜æ–¹æŒ‡å¼•é“¾æ¥ ä¸‹è½½ DEB æ–‡ä»¶ï¼Œå¹¶å®‰è£… wget https://github.com/tinygo-org/tinygo/releases/download/v0.28.1/tinygo_0.28.1_amd64.deb sudo dpkg -i tinygo_0.28.1_amd64.deb export PATH=$PATH:/usr/local/bin  åœ¨ç»ˆç«¯æ‰§è¡Œ tinygo versionï¼Œè¾“å‡ºå½“å‰å®‰è£…çš„ç‰ˆæœ¬ï¼Œè¡¨æ˜å®‰è£…æˆåŠŸ ","version":"Next","tagName":"h3"},{"title":"äºŒã€ç¼–å†™æ’ä»¶â€‹","type":1,"pageTitle":"ä½¿ç”¨ GO è¯­è¨€å¼€å‘ WASM æ’ä»¶","url":"/zh-cn/docs/user/wasm-go#äºŒç¼–å†™æ’ä»¶","content":"","version":"Next","tagName":"h2"},{"title":"1. åˆå§‹åŒ–å·¥ç¨‹ç›®å½•â€‹","type":1,"pageTitle":"ä½¿ç”¨ GO è¯­è¨€å¼€å‘ WASM æ’ä»¶","url":"/zh-cn/docs/user/wasm-go#1-åˆå§‹åŒ–å·¥ç¨‹ç›®å½•","content":"æ–°å»ºä¸€ä¸ªå·¥ç¨‹ç›®å½•æ–‡ä»¶ï¼Œä¾‹å¦‚wasm-demo-goåœ¨æ‰€å»ºç›®å½•ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œè¿›è¡Œ Go å·¥ç¨‹åˆå§‹åŒ– go mod init wasm-demo-go  å›½å†…ç¯å¢ƒå¯èƒ½éœ€è¦è®¾ç½®ä¸‹è½½ä¾èµ–åŒ…çš„ä»£ç† go env -w GOPROXY=https://proxy.golang.com.cn,direct  ä¸‹è½½æ„å»ºæ’ä»¶çš„ä¾èµ– go get github.com/higress-group/proxy-wasm-go-sdk go get github.com/alibaba/higress/plugins/wasm-go@main go get github.com/tidwall/gjson  ","version":"Next","tagName":"h3"},{"title":"2. ç¼–å†™ main.go æ–‡ä»¶â€‹","type":1,"pageTitle":"ä½¿ç”¨ GO è¯­è¨€å¼€å‘ WASM æ’ä»¶","url":"/zh-cn/docs/user/wasm-go#2-ç¼–å†™-maingo-æ–‡ä»¶","content":"ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•ç¤ºä¾‹ï¼Œå®ç°äº†åœ¨æ’ä»¶é…ç½®mockEnable: trueæ—¶ç›´æ¥è¿”å›hello worldåº”ç­”ï¼›æœªåšæ’ä»¶é…ç½®ï¼Œæˆ–è€…è®¾ç½®mockEnable: falseæ—¶ç»™åŸå§‹è¯·æ±‚æ·»åŠ  hello: worldè¯·æ±‚å¤´ã€‚æ›´å¤šä¾‹å­è¯·å‚è€ƒæœ¬æ–‡ç¬¬å››èŠ‚ã€‚ æ³¨æ„ï¼šåœ¨ç½‘å…³æ§åˆ¶å°ä¸­çš„æ’ä»¶é…ç½®ä¸º yaml æ ¼å¼ï¼Œä¸‹å‘ç»™æ’ä»¶æ—¶å°†è‡ªåŠ¨è½¬æ¢ä¸º json æ ¼å¼ï¼Œæ‰€ä»¥ä¾‹å­ä¸­çš„ parseConfig å¯ä»¥ç›´æ¥ä» json ä¸­è§£æé…ç½® package main import ( &quot;github.com/alibaba/higress/plugins/wasm-go/pkg/wrapper&quot; &quot;github.com/higress-group/proxy-wasm-go-sdk/proxywasm&quot; &quot;github.com/higress-group/proxy-wasm-go-sdk/proxywasm/types&quot; &quot;github.com/tidwall/gjson&quot; ) func main() { wrapper.SetCtx( // æ’ä»¶åç§° &quot;my-plugin&quot;, // ä¸ºè§£ææ’ä»¶é…ç½®ï¼Œè®¾ç½®è‡ªå®šä¹‰å‡½æ•° wrapper.ParseConfigBy(parseConfig), // ä¸ºå¤„ç†è¯·æ±‚å¤´ï¼Œè®¾ç½®è‡ªå®šä¹‰å‡½æ•° wrapper.ProcessRequestHeadersBy(onHttpRequestHeaders), ) } // è‡ªå®šä¹‰æ’ä»¶é…ç½® type MyConfig struct { mockEnable bool } // åœ¨æ§åˆ¶å°æ’ä»¶é…ç½®ä¸­å¡«å†™çš„yamlé…ç½®ä¼šè‡ªåŠ¨è½¬æ¢ä¸ºjsonï¼Œæ­¤å¤„ç›´æ¥ä»jsonè¿™ä¸ªå‚æ•°é‡Œè§£æé…ç½®å³å¯ func parseConfig(json gjson.Result, config *MyConfig, log wrapper.Log) error { // è§£æå‡ºé…ç½®ï¼Œæ›´æ–°åˆ°configä¸­ config.mockEnable = json.Get(&quot;mockEnable&quot;).Bool() return nil } func onHttpRequestHeaders(ctx wrapper.HttpContext, config MyConfig, log wrapper.Log) types.Action { proxywasm.AddHttpRequestHeader(&quot;hello&quot;, &quot;world&quot;) if config.mockEnable { proxywasm.SendHttpResponse(200, nil, []byte(&quot;hello world&quot;), -1) } return types.ActionContinue }  HTTP å¤„ç†æŒ‚è½½ç‚¹â€‹ ä¸Šé¢ç¤ºä¾‹ä»£ç ä¸­é€šè¿‡ wrapper.ProcessRequestHeadersByå°†è‡ªå®šä¹‰å‡½æ•° onHttpRequestHeadersç”¨äºHTTP è¯·æ±‚å¤´å¤„ç†é˜¶æ®µå¤„ç†è¯·æ±‚ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡ä¸‹é¢æ–¹å¼ï¼Œè®¾ç½®å…¶ä»–é˜¶æ®µçš„è‡ªå®šä¹‰å¤„ç†å‡½æ•° HTTP å¤„ç†é˜¶æ®µ\tè§¦å‘æ—¶æœº\tæŒ‚è½½æ–¹æ³•HTTP è¯·æ±‚å¤´å¤„ç†é˜¶æ®µ\tç½‘å…³æ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘é€æ¥çš„è¯·æ±‚å¤´æ•°æ®æ—¶\twrapper.ProcessRequestHeadersBy HTTP è¯·æ±‚ Body å¤„ç†é˜¶æ®µ\tç½‘å…³æ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘é€æ¥çš„è¯·æ±‚ Body æ•°æ®æ—¶\twrapper.ProcessRequestBodyBy HTTP åº”ç­”å¤´å¤„ç†é˜¶æ®µ\tç½‘å…³æ¥æ”¶åˆ°åç«¯æœåŠ¡å“åº”çš„åº”ç­”å¤´æ•°æ®æ—¶\twrapper.ProcessResponseHeadersBy HTTP åº”ç­” Body å¤„ç†é˜¶æ®µ\tç½‘å…³æ¥æ”¶åˆ°åç«¯æœåŠ¡å“åº”çš„åº”ç­” Body æ•°æ®æ—¶\twrapper.ProcessResponseBodyBy å·¥å…·æ–¹æ³•â€‹ ä¸Šé¢ç¤ºä¾‹ä»£ç ä¸­çš„ proxywasm.AddHttpRequestHeader å’Œ proxywasm.SendHttpResponseæ˜¯æ’ä»¶ SDK æä¾›çš„ä¸¤ä¸ªå·¥å…·æ–¹æ³•ï¼Œä¸»è¦çš„å·¥å…·æ–¹æ³•è§ä¸‹è¡¨ï¼š åˆ†ç±»\tæ–¹æ³•åç§°\tç”¨é€”\tå¯ä»¥ç”Ÿæ•ˆçš„ HTTP å¤„ç†é˜¶æ®µè¯·æ±‚å¤´å¤„ç†\tGetHttpRequestHeaders\tè·å–å®¢æˆ·ç«¯è¯·æ±‚çš„å…¨éƒ¨è¯·æ±‚å¤´\tHTTP è¯·æ±‚å¤´å¤„ç†é˜¶æ®µ ReplaceHttpRequestHeaders\tæ›¿æ¢å®¢æˆ·ç«¯è¯·æ±‚çš„å…¨éƒ¨è¯·æ±‚å¤´\tHTTP è¯·æ±‚å¤´å¤„ç†é˜¶æ®µ GetHttpRequestHeader\tè·å–å®¢æˆ·ç«¯è¯·æ±‚çš„æŒ‡å®šè¯·æ±‚å¤´\tHTTP è¯·æ±‚å¤´å¤„ç†é˜¶æ®µ RemoveHttpRequestHeader\tç§»é™¤å®¢æˆ·ç«¯è¯·æ±‚çš„æŒ‡å®šè¯·æ±‚å¤´\tHTTP è¯·æ±‚å¤´å¤„ç†é˜¶æ®µ ReplaceHttpRequestHeader\tæ›¿æ¢å®¢æˆ·ç«¯è¯·æ±‚çš„æŒ‡å®šè¯·æ±‚å¤´\tHTTP è¯·æ±‚å¤´å¤„ç†é˜¶æ®µ AddHttpRequestHeader\tæ–°å¢ä¸€ä¸ªå®¢æˆ·ç«¯è¯·æ±‚å¤´\tHTTP è¯·æ±‚å¤´å¤„ç†é˜¶æ®µ è¯·æ±‚ Body å¤„ç†\tGetHttpRequestBody\tè·å–å®¢æˆ·ç«¯è¯·æ±‚ Body\tHTTP è¯·æ±‚ Body å¤„ç†é˜¶æ®µ AppendHttpRequestBody\tå°†æŒ‡å®šçš„å­—èŠ‚ä¸²é™„åŠ åˆ°å®¢æˆ·ç«¯è¯·æ±‚ Body æœ«å°¾\tHTTP è¯·æ±‚ Body å¤„ç†é˜¶æ®µ PrependHttpRequestBody\tå°†æŒ‡å®šçš„å­—èŠ‚ä¸²é™„åŠ åˆ°å®¢æˆ·ç«¯è¯·æ±‚ Body çš„å¼€å¤´\tHTTP è¯·æ±‚ Body å¤„ç†é˜¶æ®µ ReplaceHttpRequestBody\tæ›¿æ¢å®¢æˆ·ç«¯è¯·æ±‚ Body\tHTTP è¯·æ±‚ Body å¤„ç†é˜¶æ®µ åº”ç­”å¤´å¤„ç†\tGetHttpResponseHeaders\tè·å–åç«¯å“åº”çš„å…¨éƒ¨åº”ç­”å¤´\tHTTP åº”ç­”å¤´å¤„ç†é˜¶æ®µ ReplaceHttpResponseHeaders\tæ›¿æ¢åç«¯å“åº”çš„å…¨éƒ¨åº”ç­”å¤´\tHTTP åº”ç­”å¤´å¤„ç†é˜¶æ®µ GetHttpResponseHeader\tè·å–åç«¯å“åº”çš„æŒ‡å®šåº”ç­”å¤´\tHTTP åº”ç­”å¤´å¤„ç†é˜¶æ®µ RemoveHttpResponseHeader\tç§»é™¤åç«¯å“åº”çš„æŒ‡å®šåº”ç­”å¤´\tHTTP åº”ç­”å¤´å¤„ç†é˜¶æ®µ ReplaceHttpResponseHeader\tæ›¿æ¢åç«¯å“åº”çš„æŒ‡å®šåº”ç­”å¤´\tHTTP åº”ç­”å¤´å¤„ç†é˜¶æ®µ AddHttpResponseHeader\tæ–°å¢ä¸€ä¸ªåç«¯å“åº”å¤´\tHTTP åº”ç­”å¤´å¤„ç†é˜¶æ®µ åº”ç­” Body å¤„ç†\tGetHttpResponseBody\tè·å–å®¢æˆ·ç«¯è¯·æ±‚ Body\tHTTP åº”ç­” Body å¤„ç†é˜¶æ®µ AppendHttpResponseBody\tå°†æŒ‡å®šçš„å­—èŠ‚ä¸²é™„åŠ åˆ°åç«¯å“åº” Body æœ«å°¾\tHTTP åº”ç­” Body å¤„ç†é˜¶æ®µ PrependHttpResponseBody\tå°†æŒ‡å®šçš„å­—èŠ‚ä¸²é™„åŠ åˆ°åç«¯å“åº” Body çš„å¼€å¤´\tHTTP åº”ç­” Body å¤„ç†é˜¶æ®µ ReplaceHttpResponseBody\tæ›¿æ¢åç«¯å“åº” Body\tHTTP åº”ç­” Body å¤„ç†é˜¶æ®µ HTTP è°ƒç”¨\tDispatchHttpCall\tå‘é€ä¸€ä¸ª HTTP è¯·æ±‚\t- GetHttpCallResponseHeaders\tè·å– DispatchHttpCall è¯·æ±‚å“åº”çš„åº”ç­”å¤´\t- GetHttpCallResponseBody\tè·å– DispatchHttpCall è¯·æ±‚å“åº”çš„åº”ç­” Body\t- GetHttpCallResponseTrailers\tè·å– DispatchHttpCall è¯·æ±‚å“åº”çš„åº”ç­” Trailer\t- ç›´æ¥å“åº”\tSendHttpResponse\tç›´æ¥è¿”å›ä¸€ä¸ªç‰¹å®šçš„ HTTP åº”ç­”\t- æµç¨‹æ¢å¤\tResumeHttpRequest\tæ¢å¤å…ˆå‰è¢«æš‚åœçš„è¯·æ±‚å¤„ç†æµç¨‹\t- ResumeHttpResponse\tæ¢å¤å…ˆå‰è¢«æš‚åœçš„åº”ç­”å¤„ç†æµç¨‹\t- ","version":"Next","tagName":"h3"},{"title":"3. ç¼–è¯‘ç”Ÿæˆ WASM æ–‡ä»¶â€‹","type":1,"pageTitle":"ä½¿ç”¨ GO è¯­è¨€å¼€å‘ WASM æ’ä»¶","url":"/zh-cn/docs/user/wasm-go#3-ç¼–è¯‘ç”Ÿæˆ-wasm-æ–‡ä»¶","content":"go mod tidy tinygo build -o main.wasm -scheduler=none -target=wasi -gc=custom -tags=&quot;custommalloc nottinygc_finalizer&quot; ./  å¦‚æœwindowsä¸‹ç¼–è¯‘å‡ºç°error: could not find wasm-opt, set the WASMOPT environment variable to override åˆ™éœ€è¦ä¸‹è½½https://github.com/WebAssembly/binaryen/ é‡Œé¢åŒ…å«äº†bin\\wasm-opt.exeå°†è¿™ä¸ªæ–‡ä»¶æ‹·è´åˆ°tinygoçš„binç›®å½•ä¸‹é‡æ–°ç¼–è¯‘å³å¯ã€‚ ç¼–è¯‘æˆåŠŸä¼šåœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶ main.wasmã€‚è¿™ä¸ªæ–‡ä»¶åœ¨ä¸‹é¢æœ¬åœ°è°ƒè¯•çš„ä¾‹å­ä¸­ä¹Ÿä¼šè¢«ç”¨åˆ°ã€‚  å¦‚æœlinux/macä¸‹ç¼–è¯‘å‡ºç°è¯¥é”™è¯¯ï¼Œä½¿ç”¨apt/brewç­‰ç³»ç»Ÿè‡ªå¸¦åŒ…ç®¡ç†å·¥å…·å®‰è£…ä¸‹binaryenå³å¯ï¼Œä¾‹å¦‚brew install binaryen è¦åœ¨Higressä¸­é…åˆWasmplugin CRDæˆ–è€…Consoleçš„UIäº¤äº’é…ç½®è¯¥æ’ä»¶ï¼Œéœ€è¦å°†è¯¥wasmæ–‡ä»¶æ‰“åŒ…æˆociæˆ–è€…dockeré•œåƒï¼Œå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡æ¡£ï¼šã€Šè‡ªå®šä¹‰æ’ä»¶ã€‹ ","version":"Next","tagName":"h3"},{"title":"ä¸‰ã€æœ¬åœ°è°ƒè¯•â€‹","type":1,"pageTitle":"ä½¿ç”¨ GO è¯­è¨€å¼€å‘ WASM æ’ä»¶","url":"/zh-cn/docs/user/wasm-go#ä¸‰æœ¬åœ°è°ƒè¯•","content":"","version":"Next","tagName":"h2"},{"title":"å·¥å…·å‡†å¤‡â€‹","type":1,"pageTitle":"ä½¿ç”¨ GO è¯­è¨€å¼€å‘ WASM æ’ä»¶","url":"/zh-cn/docs/user/wasm-go#å·¥å…·å‡†å¤‡","content":"å®‰è£…Docker ","version":"Next","tagName":"h3"},{"title":"ä½¿ç”¨ docker compose å¯åŠ¨éªŒè¯â€‹","type":1,"pageTitle":"ä½¿ç”¨ GO è¯­è¨€å¼€å‘ WASM æ’ä»¶","url":"/zh-cn/docs/user/wasm-go#ä½¿ç”¨-docker-compose-å¯åŠ¨éªŒè¯","content":"è¿›å…¥åœ¨ç¼–å†™æ’ä»¶æ—¶åˆ›å»ºçš„ç›®å½•ï¼Œä¾‹å¦‚wasm-demoç›®å½•ï¼Œç¡®è®¤è¯¥ç›®å½•ä¸‹å·²ç»ç¼–è¯‘ç”Ÿæˆäº†main.wasmæ–‡ä»¶ã€‚åœ¨ç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶docker-compose.yamlï¼Œå†…å®¹å¦‚ä¸‹ï¼š version: '3.7' services: envoy: image: higress-registry.cn-hangzhou.cr.aliyuncs.com/higress/gateway:v1.4.0-rc.1 entrypoint: /usr/local/bin/envoy # æ³¨æ„è¿™é‡Œå¯¹wasmå¼€å¯äº†debugçº§åˆ«æ—¥å¿—ï¼Œæ­£å¼éƒ¨ç½²æ—¶åˆ™é»˜è®¤infoçº§åˆ« command: -c /etc/envoy/envoy.yaml --component-log-level wasm:debug depends_on: - httpbin networks: - wasmtest ports: - &quot;10000:10000&quot; volumes: - ./envoy.yaml:/etc/envoy/envoy.yaml - ./main.wasm:/etc/envoy/main.wasm httpbin: image: kennethreitz/httpbin:latest networks: - wasmtest ports: - &quot;12345:80&quot; networks: wasmtest: {}  ç»§ç»­åœ¨è¯¥ç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶envoy.yamlï¼Œå†…å®¹å¦‚ä¸‹ï¼š admin: address: socket_address: protocol: TCP address: 0.0.0.0 port_value: 9901 static_resources: listeners: - name: listener_0 address: socket_address: protocol: TCP address: 0.0.0.0 port_value: 10000 filter_chains: - filters: - name: envoy.filters.network.http_connection_manager typed_config: &quot;@type&quot;: type.googleapis.com/envoy.extensions.filters.network.http_connection_manager.v3.HttpConnectionManager scheme_header_transformation: scheme_to_overwrite: https stat_prefix: ingress_http route_config: name: local_route virtual_hosts: - name: local_service domains: [&quot;*&quot;] routes: - match: prefix: &quot;/&quot; route: cluster: httpbin http_filters: - name: wasmdemo typed_config: &quot;@type&quot;: type.googleapis.com/udpa.type.v1.TypedStruct type_url: type.googleapis.com/envoy.extensions.filters.http.wasm.v3.Wasm value: config: name: wasmdemo vm_config: runtime: envoy.wasm.runtime.v8 code: local: filename: /etc/envoy/main.wasm configuration: &quot;@type&quot;: &quot;type.googleapis.com/google.protobuf.StringValue&quot; value: | { &quot;mockEnable&quot;: false } - name: envoy.filters.http.router clusters: - name: httpbin connect_timeout: 30s type: LOGICAL_DNS # Comment out the following line to test on v6 networks dns_lookup_family: V4_ONLY lb_policy: ROUND_ROBIN load_assignment: cluster_name: httpbin endpoints: - lb_endpoints: - endpoint: address: socket_address: address: httpbin port_value: 80  æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¯åŠ¨docker composeã€‚ docker compose up  ","version":"Next","tagName":"h3"},{"title":"åŠŸèƒ½éªŒè¯â€‹","type":1,"pageTitle":"ä½¿ç”¨ GO è¯­è¨€å¼€å‘ WASM æ’ä»¶","url":"/zh-cn/docs/user/wasm-go#åŠŸèƒ½éªŒè¯","content":"WASMåŠŸèƒ½éªŒè¯ ä½¿ç”¨curlç›´æ¥è®¿é—®httpbinï¼Œå¯ä»¥çœ‹åˆ°ä¸ç»è¿‡ç½‘å…³æ—¶çš„è¯·æ±‚å¤´å†…å®¹ï¼Œå¦‚ä¸‹ï¼š curl http://127.0.0.1:12345/get { &quot;args&quot;: {}, &quot;headers&quot;: { &quot;Accept&quot;: &quot;*/*&quot;, &quot;Host&quot;: &quot;127.0.0.1:12345&quot;, &quot;User-Agent&quot;: &quot;curl/7.79.1&quot; }, &quot;origin&quot;: &quot;172.18.0.1&quot;, &quot;url&quot;: &quot;http://127.0.0.1:12345/get&quot; }  ä½¿ç”¨curlé€šè¿‡ç½‘å…³è®¿é—®httpbinï¼Œå¯ä»¥çœ‹åˆ°ç»è¿‡ç½‘å…³å¤„ç†åçš„è¯·æ±‚å¤´çš„å†…å®¹ï¼Œå¦‚ä¸‹ï¼š curl http://127.0.0.1:10000/get { &quot;args&quot;: {}, &quot;headers&quot;: { &quot;Accept&quot;: &quot;*/*&quot;, &quot;Hello&quot;: &quot;world&quot;, &quot;Host&quot;: &quot;127.0.0.1:10000&quot;, &quot;Original-Host&quot;: &quot;127.0.0.1:10000&quot;, &quot;Req-Start-Time&quot;: &quot;1681269273896&quot;, &quot;User-Agent&quot;: &quot;curl/7.79.1&quot;, &quot;X-Envoy-Expected-Rq-Timeout-Ms&quot;: &quot;15000&quot; }, &quot;origin&quot;: &quot;172.18.0.3&quot;, &quot;url&quot;: &quot;https://127.0.0.1:10000/get&quot; }  æ­¤æ—¶ä¸Šæ–‡ç¼–å†™æ’ä»¶çš„åŠŸèƒ½å·²ç»ç”Ÿæ•ˆäº†ï¼ŒåŠ å…¥äº†hello: worldè¯·æ±‚å¤´ã€‚ æ’ä»¶é…ç½®ä¿®æ”¹éªŒè¯ ä¿®æ”¹envoy.yamlï¼Œå°†mockEnableé…ç½®ä¿®æ”¹ä¸ºtrueã€‚  configuration: &quot;@type&quot;: &quot;type.googleapis.com/google.protobuf.StringValue&quot; value: | { &quot;mockEnable&quot;: true }  ä½¿ç”¨curlé€šè¿‡ç½‘å…³è®¿é—®httpbinï¼Œå¯ä»¥çœ‹åˆ°ç»è¿‡ç½‘å…³å¤„ç†åçš„è¯·æ±‚å¤´çš„å†…å®¹ï¼Œå¦‚ä¸‹ï¼š curl http://127.0.0.1:10000/get hello world  è¯´æ˜æ’ä»¶é…ç½®ä¿®æ”¹ç”Ÿæ•ˆï¼Œå¼€å¯äº†mockåº”ç­”ç›´æ¥è¿”å›äº†hello worldã€‚ ","version":"Next","tagName":"h3"},{"title":"æ›´å¤šç¤ºä¾‹â€‹","type":1,"pageTitle":"ä½¿ç”¨ GO è¯­è¨€å¼€å‘ WASM æ’ä»¶","url":"/zh-cn/docs/user/wasm-go#æ›´å¤šç¤ºä¾‹","content":"","version":"Next","tagName":"h2"},{"title":"æ— é…ç½®æ’ä»¶â€‹","type":1,"pageTitle":"ä½¿ç”¨ GO è¯­è¨€å¼€å‘ WASM æ’ä»¶","url":"/zh-cn/docs/user/wasm-go#æ— é…ç½®æ’ä»¶","content":"æ’ä»¶æ— éœ€é…ç½®æ—¶ï¼Œç›´æ¥å®šä¹‰ç©ºç»“æ„ä½“å³å¯ package main import ( &quot;github.com/alibaba/higress/plugins/wasm-go/pkg/wrapper&quot; &quot;github.com/higress-group/proxy-wasm-go-sdk/proxywasm&quot; &quot;github.com/higress-group/proxy-wasm-go-sdk/proxywasm/types&quot; ) func main() { wrapper.SetCtx( &quot;hello-world&quot;, wrapper.ProcessRequestHeadersBy(onHttpRequestHeaders), ) } type MyConfig struct {} func onHttpRequestHeaders(ctx wrapper.HttpContext, config MyConfig, log wrapper.Log) types.Action { proxywasm.SendHttpResponse(200, nil, []byte(&quot;hello world&quot;), -1) return types.ActionContinue }  ","version":"Next","tagName":"h3"},{"title":"åœ¨æ’ä»¶ä¸­è¯·æ±‚å¤–éƒ¨æœåŠ¡â€‹","type":1,"pageTitle":"ä½¿ç”¨ GO è¯­è¨€å¼€å‘ WASM æ’ä»¶","url":"/zh-cn/docs/user/wasm-go#åœ¨æ’ä»¶ä¸­è¯·æ±‚å¤–éƒ¨æœåŠ¡","content":"ç›®å‰ä»…æ”¯æŒ http è°ƒç”¨ï¼Œæ”¯æŒè®¿é—®åœ¨ç½‘å…³æ§åˆ¶å°ä¸­è®¾ç½®äº†æœåŠ¡æ¥æºçš„ Nacosã€K8s æœåŠ¡ï¼Œä»¥åŠå›ºå®šåœ°å€æˆ– DNS æ¥æºçš„æœåŠ¡ã€‚è¯·æ³¨æ„ï¼Œæ— æ³•ç›´æ¥ä½¿ç”¨net/httpåº“ä¸­çš„ HTTP clientï¼Œå¿…é¡»ä½¿ç”¨å¦‚ä¸‹ä¾‹ä¸­å°è£…çš„ HTTP clientã€‚ ä¸‹é¢ä¾‹å­ä¸­ï¼Œåœ¨é…ç½®è§£æé˜¶æ®µè§£ææœåŠ¡ç±»å‹ï¼Œç”Ÿæˆå¯¹åº”çš„ HTTP client ï¼›åœ¨è¯·æ±‚å¤´å¤„ç†é˜¶æ®µæ ¹æ®é…ç½®çš„è¯·æ±‚è·¯å¾„è®¿é—®å¯¹åº”æœåŠ¡ï¼Œè§£æåº”ç­”å¤´ï¼Œç„¶åå†è®¾ç½®åœ¨åŸå§‹çš„è¯·æ±‚å¤´ä¸­ã€‚ package main import ( &quot;errors&quot; &quot;net/http&quot; &quot;strings&quot; &quot;github.com/alibaba/higress/plugins/wasm-go/pkg/wrapper&quot; &quot;github.com/higress-group/proxy-wasm-go-sdk/proxywasm&quot; &quot;github.com/higress-group/proxy-wasm-go-sdk/proxywasm/types&quot; &quot;github.com/tidwall/gjson&quot; ) func main() { wrapper.SetCtx( &quot;http-call&quot;, wrapper.ParseConfigBy(parseConfig), wrapper.ProcessRequestHeadersBy(onHttpRequestHeaders), ) } type MyConfig struct { // ç”¨äºå‘èµ·HTTPè°ƒç”¨client client wrapper.HttpClient // è¯·æ±‚url requestPath string // æ ¹æ®è¿™ä¸ªkeyå–å‡ºè°ƒç”¨æœåŠ¡çš„åº”ç­”å¤´å¯¹åº”å­—æ®µï¼Œå†è®¾ç½®åˆ°åŸå§‹è¯·æ±‚çš„è¯·æ±‚å¤´ï¼Œkeyä¸ºæ­¤é…ç½®é¡¹ tokenHeader string } func parseConfig(json gjson.Result, config *MyConfig, log wrapper.Log) error { config.tokenHeader = json.Get(&quot;tokenHeader&quot;).String() if config.tokenHeader == &quot;&quot; { return errors.New(&quot;missing tokenHeader in config&quot;) } config.requestPath = json.Get(&quot;requestPath&quot;).String() if config.requestPath == &quot;&quot; { return errors.New(&quot;missing requestPath in config&quot;) } serviceSource := json.Get(&quot;serviceSource&quot;).String() // å›ºå®šåœ°å€å’Œdnsç±»å‹çš„serviceNameï¼Œä¸ºæ§åˆ¶å°ä¸­åˆ›å»ºæœåŠ¡æ—¶æŒ‡å®š // nacoså’Œk8sæ¥æºçš„serviceNameï¼Œå³æœåŠ¡æ³¨å†Œæ—¶æŒ‡å®šçš„åŸå§‹åç§° serviceName := json.Get(&quot;serviceName&quot;).String() servicePort := json.Get(&quot;servicePort&quot;).Int() if serviceName == &quot;&quot; || servicePort == 0 { return errors.New(&quot;invalid service config&quot;) } switch serviceSource { case &quot;k8s&quot;: namespace := json.Get(&quot;namespace&quot;).String() config.client = wrapper.NewClusterClient(wrapper.K8sCluster{ ServiceName: serviceName, Namespace: namespace, Port: servicePort, }) return nil case &quot;nacos&quot;: namespace := json.Get(&quot;namespace&quot;).String() config.client = wrapper.NewClusterClient(wrapper.NacosCluster{ ServiceName: serviceName, NamespaceID: namespace, Port: servicePort, }) return nil case &quot;ip&quot;: config.client = wrapper.NewClusterClient(wrapper.StaticIpCluster{ ServiceName: serviceName, Port: servicePort, }) return nil case &quot;dns&quot;: domain := json.Get(&quot;domain&quot;).String() config.client = wrapper.NewClusterClient(wrapper.DnsCluster{ ServiceName: serviceName, Port: servicePort, Domain: domain, }) return nil default: return errors.New(&quot;unknown service source: &quot; + serviceSource) } } func onHttpRequestHeaders(ctx wrapper.HttpContext, config MyConfig, log wrapper.Log) types.Action { // ä½¿ç”¨clientçš„Getæ–¹æ³•å‘èµ·HTTP Getè°ƒç”¨ï¼Œæ­¤å¤„çœç•¥äº†timeoutå‚æ•°ï¼Œé»˜è®¤è¶…æ—¶æ—¶é—´500æ¯«ç§’ config.client.Get(config.requestPath, nil, // å›è°ƒå‡½æ•°ï¼Œå°†åœ¨å“åº”å¼‚æ­¥è¿”å›æ—¶è¢«æ‰§è¡Œ func(statusCode int, responseHeaders http.Header, responseBody []byte) { // è¯·æ±‚æ²¡æœ‰è¿”å›200çŠ¶æ€ç ï¼Œè¿›è¡Œå¤„ç† if statusCode != http.StatusOK { log.Errorf(&quot;http call failed, status: %d&quot;, statusCode) proxywasm.SendHttpResponse(http.StatusInternalServerError, nil, []byte(&quot;http call failed&quot;), -1) return } // æ‰“å°å“åº”çš„HTTPçŠ¶æ€ç å’Œåº”ç­”body log.Infof(&quot;get status: %d, response body: %s&quot;, statusCode, responseBody) // ä»åº”ç­”å¤´ä¸­è§£ætokenå­—æ®µè®¾ç½®åˆ°åŸå§‹è¯·æ±‚å¤´ä¸­ token := responseHeaders.Get(config.tokenHeader) if token != &quot;&quot; { proxywasm.AddHttpRequestHeader(config.tokenHeader, token) } // æ¢å¤åŸå§‹è¯·æ±‚æµç¨‹ï¼Œç»§ç»­å¾€ä¸‹å¤„ç†ï¼Œæ‰èƒ½æ­£å¸¸è½¬å‘ç»™åç«¯æœåŠ¡ proxywasm.ResumeHttpRequest() }) // éœ€è¦ç­‰å¾…å¼‚æ­¥å›è°ƒå®Œæˆï¼Œè¿”å›PauseçŠ¶æ€ï¼Œå¯ä»¥è¢«ResumeHttpRequestæ¢å¤ return types.ActionPause }  ","version":"Next","tagName":"h3"},{"title":"åœ¨æ’ä»¶ä¸­è°ƒç”¨Redisâ€‹","type":1,"pageTitle":"ä½¿ç”¨ GO è¯­è¨€å¼€å‘ WASM æ’ä»¶","url":"/zh-cn/docs/user/wasm-go#åœ¨æ’ä»¶ä¸­è°ƒç”¨redis","content":"ä½¿ç”¨å¦‚ä¸‹ç¤ºä¾‹ä»£ç å®ç°Redisé™æµæ’ä»¶ package main import ( &quot;strconv&quot; &quot;time&quot; &quot;github.com/higress-group/proxy-wasm-go-sdk/proxywasm&quot; &quot;github.com/higress-group/proxy-wasm-go-sdk/proxywasm/types&quot; &quot;github.com/tidwall/gjson&quot; &quot;github.com/tidwall/resp&quot; &quot;github.com/alibaba/higress/plugins/wasm-go/pkg/wrapper&quot; ) func main() { wrapper.SetCtx( &quot;redis-demo&quot;, wrapper.ParseConfigBy(parseConfig), wrapper.ProcessRequestHeadersBy(onHttpRequestHeaders), wrapper.ProcessResponseHeadersBy(onHttpResponseHeaders), ) } type RedisCallConfig struct { client wrapper.RedisClient qpm int } func parseConfig(json gjson.Result, config *RedisCallConfig, log wrapper.Log) error { // å¸¦æœåŠ¡ç±»å‹çš„å®Œæ•´ FQDN åç§°ï¼Œä¾‹å¦‚ my-redis.dnsã€redis.my-ns.svc.cluster.local serviceName := json.Get(&quot;serviceName&quot;).String() servicePort := json.Get(&quot;servicePort&quot;).Int() if servicePort == 0 { if strings.HasSuffix(serviceName, &quot;.static&quot;) { // é™æ€IPç±»å‹æœåŠ¡çš„é€»è¾‘ç«¯å£æ˜¯80 servicePort = 80 } else { servicePort = 6379 } } username := json.Get(&quot;username&quot;).String() password := json.Get(&quot;password&quot;).String() // å•ä½æ˜¯æ¯«ç§’ timeout := json.Get(&quot;timeout&quot;).Int() if timeout == 0 { timeout = 1000 } qpm := json.Get(&quot;qpm&quot;).Int() config.qpm = int(qpm) config.client = wrapper.NewRedisClusterClient(wrapper.FQDNCluster{ FQDN: serviceName, Port: servicePort, }) return config.client.Init(username, password, timeout) } func onHttpRequestHeaders(ctx wrapper.HttpContext, config RedisCallConfig, log wrapper.Log) types.Action { now := time.Now() minuteAligned := now.Truncate(time.Minute) timeStamp := strconv.FormatInt(minuteAligned.Unix(), 10) // å¦‚æœ redis api è¿”å›çš„ err != nilï¼Œä¸€èˆ¬æ˜¯ç”±äºç½‘å…³æ‰¾ä¸åˆ° redis åç«¯æœåŠ¡ï¼Œè¯·æ£€æŸ¥æ˜¯å¦è¯¯åˆ é™¤äº† redis åç«¯æœåŠ¡ err := config.client.Incr(timeStamp, func(response resp.Value) { if response.Error() != nil { log.Errorf(&quot;call redis error: %v&quot;, response.Error()) proxywasm.ResumeHttpRequest() } else { ctx.SetContext(&quot;timeStamp&quot;, timeStamp) ctx.SetContext(&quot;callTimeLeft&quot;, strconv.Itoa(config.qpm-response.Integer())) if response.Integer() == 1 { err := config.client.Expire(timeStamp, 60, func(response resp.Value) { if response.Error() != nil { log.Errorf(&quot;call redis error: %v&quot;, response.Error()) } proxywasm.ResumeHttpRequest() }) if err != nil { log.Errorf(&quot;Error occured while calling redis, it seems cannot find the redis cluster.&quot;) proxywasm.ResumeHttpRequest() } } else { if response.Integer() &gt; config.qpm { proxywasm.SendHttpResponse(429, [][2]string{{&quot;timeStamp&quot;, timeStamp}, {&quot;callTimeLeft&quot;, &quot;0&quot;}}, []byte(&quot;Too many requests\\n&quot;), -1) } else { proxywasm.ResumeHttpRequest() } } } }) if err != nil { // ç”±äºè°ƒç”¨rediså¤±è´¥ï¼Œæ”¾è¡Œè¯·æ±‚ï¼Œè®°å½•æ—¥å¿— log.Errorf(&quot;Error occured while calling redis, it seems cannot find the redis cluster.&quot;) return types.ActionContinue } else { // è¯·æ±‚holdä½ï¼Œç­‰å¾…redisè°ƒç”¨å®Œæˆ return types.ActionPause } } func onHttpResponseHeaders(ctx wrapper.HttpContext, config RedisCallConfig, log wrapper.Log) types.Action { if ctx.GetContext(&quot;timeStamp&quot;) != nil { proxywasm.AddHttpResponseHeader(&quot;timeStamp&quot;, ctx.GetContext(&quot;timeStamp&quot;).(string)) } if ctx.GetContext(&quot;callTimeLeft&quot;) != nil { proxywasm.AddHttpResponseHeader(&quot;callTimeLeft&quot;, ctx.GetContext(&quot;callTimeLeft&quot;).(string)) } return types.ActionContinue }  ","version":"Next","tagName":"h3"}],"options":{"languages":["en","zh"],"id":"default"}}