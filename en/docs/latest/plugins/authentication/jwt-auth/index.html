<!DOCTYPE html><html lang="en" dir="ltr" data-has-toc data-has-sidebar data-theme="dark" class="astro-bguv2lll"> <head><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"> <meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>JWT authentication | Higress官网</title><link rel="canonical" href="https://higress.cn/en/docs/latest/plugins/authentication/jwt-auth/"/><link rel="alternate" hreflang="zh-CN" href="https://higress.cn/docs/latest/plugins/authentication/jwt-auth/"/><link rel="alternate" hreflang="en" href="https://higress.cn/en/docs/latest/plugins/authentication/jwt-auth/"/><link rel="sitemap" href="/sitemap-index.xml"/><link rel="shortcut icon" href="/higress_logo.png" type="image/png"/><meta name="aplus-core" content="aplus.js"/><meta property="og:title" content="JWT authentication"/><meta property="og:type" content="article"/><meta property="og:url" content="https://higress.cn/en/docs/latest/plugins/authentication/jwt-auth/"/><meta property="og:locale" content="en"/><meta property="og:site_name" content="Higress官网"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="JWT authentication"/><meta name="baidu-site-verification" content="codeva-x6yW4DqCn3"/><meta name="msvalidate.01" content="418883CE9AE2CAD01E7FC1A7B9F20801"/><meta name="twitter:description" content="JWT authentication implements authentication and authorization based on JWT (JSON Web Token)."/><meta name="description" content="JWT authentication implements authentication and authorization based on JWT (JSON Web Token)."/><meta property="og:description" content="JWT authentication implements authentication and authorization based on JWT (JSON Web Token)."/><meta property="keywords" content="higress,jwt"/> <!--初始化SDK-->   <!-- Google tag (gtag.js) --> <script async src="https://www.googletagmanager.com/gtag/js?id=G-YHS75WKFBR"></script> <script>
	window.StarlightThemeProvider = (() => {
		const storedTheme =
			typeof localStorage !== 'undefined' && localStorage.getItem('starlight-theme');
		const theme =
			storedTheme ||
			(window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark');
		document.documentElement.dataset.theme = theme === 'light' ? 'light' : 'dark';
		return {
			updatePickers(theme = storedTheme || 'auto') {
				document.querySelectorAll('starlight-theme-select').forEach((picker) => {
					const select = picker.querySelector('select');
					if (select) select.value = theme;
					/** @type {HTMLTemplateElement | null} */
					const tmpl = document.querySelector(`#theme-icons`);
					const newIcon = tmpl && tmpl.content.querySelector('.' + theme);
					if (newIcon) {
						const oldIcon = picker.querySelector('svg.label-icon');
						if (oldIcon) {
							oldIcon.replaceChildren(...newIcon.cloneNode(true).childNodes);
						}
					}
				});
			},
		};
	})();
</script><template id="theme-icons"><svg aria-hidden="true" class="light astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M5 12a1 1 0 0 0-1-1H3a1 1 0 0 0 0 2h1a1 1 0 0 0 1-1Zm.64 5-.71.71a1 1 0 0 0 0 1.41 1 1 0 0 0 1.41 0l.71-.71A1 1 0 0 0 5.64 17ZM12 5a1 1 0 0 0 1-1V3a1 1 0 0 0-2 0v1a1 1 0 0 0 1 1Zm5.66 2.34a1 1 0 0 0 .7-.29l.71-.71a1 1 0 1 0-1.41-1.41l-.66.71a1 1 0 0 0 0 1.41 1 1 0 0 0 .66.29Zm-12-.29a1 1 0 0 0 1.41 0 1 1 0 0 0 0-1.41l-.71-.71a1.004 1.004 0 1 0-1.43 1.41l.73.71ZM21 11h-1a1 1 0 0 0 0 2h1a1 1 0 0 0 0-2Zm-2.64 6A1 1 0 0 0 17 18.36l.71.71a1 1 0 0 0 1.41 0 1 1 0 0 0 0-1.41l-.76-.66ZM12 6.5a5.5 5.5 0 1 0 5.5 5.5A5.51 5.51 0 0 0 12 6.5Zm0 9a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7Zm0 3.5a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1a1 1 0 0 0-1-1Z"/></svg> <svg aria-hidden="true" class="dark astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.64 13a1 1 0 0 0-1.05-.14 8.049 8.049 0 0 1-3.37.73 8.15 8.15 0 0 1-8.14-8.1 8.59 8.59 0 0 1 .25-2A1 1 0 0 0 8 2.36a10.14 10.14 0 1 0 14 11.69 1 1 0 0 0-.36-1.05Zm-9.5 6.69A8.14 8.14 0 0 1 7.08 5.22v.27a10.15 10.15 0 0 0 10.14 10.14 9.784 9.784 0 0 0 2.1-.22 8.11 8.11 0 0 1-7.18 4.32v-.04Z"/></svg> <svg aria-hidden="true" class="auto astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg> </template><link rel="stylesheet" href="/_astro/index.DaJt_GEk.css">
<link rel="stylesheet" href="/_astro/index.QwJMwJK-.css">
<style>.table-of-contents-wrapper ul{padding:0;list-style:none}.table-of-contents-wrapper a{--pad-inline: .5rem;display:block;border-radius:.25rem;padding-block:.25rem;padding-inline:calc(1rem * var(--depth) + var(--pad-inline)) var(--pad-inline);line-height:1.25}.table-of-contents-wrapper a[aria-current=true],.table-of-contents-wrapper a[aria-current=true]:hover,.table-of-contents-wrapper a[aria-current=true]:focus{color:var(--fallback-n,oklch(var(--n)/1))!important;background-color:var(--fallback-s,oklch(var(--s)/1))!important;border-left-style:solid;border-left-width:3px;border-left-color:var(--fallback-n,oklch(var(--n)/1));padding-left:.625rem!important;font-weight:400!important;border-radius:0!important}.table-of-contents-wrapper .isMobile a{--pad-inline: 1rem;display:flex;justify-content:space-between;gap:var(--pad-inline);border-top:1px solid var(--sl-color-gray-6);border-radius:0;padding-block:.5rem;color:var(--sl-color-text);font-size:var(--sl-text-sm);text-decoration:none;outline-offset:var(--sl-outline-offset-inside)}.table-of-contents-wrapper .isMobile:first-child>li:first-child>a{border-top:0}.table-of-contents-wrapper .isMobile a[aria-current=true],.table-of-contents-wrapper .isMobile a[aria-current=true]:hover,.table-of-contents-wrapper .isMobile a[aria-current=true]:focus{color:var(--sl-color-white);background-color:unset}.table-of-contents-wrapper .isMobile a[aria-current=true]:after{content:"";width:1rem;background-color:var(--sl-color-text-accent);-webkit-mask-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAxNCAxNCc+PHBhdGggZD0nTTEwLjkxNCA0LjIwNmEuNTgzLjU4MyAwIDAgMC0uODI4IDBMNS43NCA4LjU1NyAzLjkxNCA2LjcyNmEuNTk2LjU5NiAwIDAgMC0uODI4Ljg1N2wyLjI0IDIuMjRhLjU4My41ODMgMCAwIDAgLjgyOCAwbDQuNzYtNC43NmEuNTgzLjU4MyAwIDAgMCAwLS44NTdaJy8+PC9zdmc+Cg==);mask-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAxNCAxNCc+PHBhdGggZD0nTTEwLjkxNCA0LjIwNmEuNTgzLjU4MyAwIDAgMC0uODI4IDBMNS43NCA4LjU1NyAzLjkxNCA2LjcyNmEuNTk2LjU5NiAwIDAgMC0uODI4Ljg1N2wyLjI0IDIuMjRhLjU4My41ODMgMCAwIDAgLjgyOCAwbDQuNzYtNC43NmEuNTgzLjU4MyAwIDAgMCAwLS44NTdaJy8+PC9zdmc+Cg==);-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;flex-shrink:0}
.badge-wrapper .sl-badge{display:inline-block;border:1px solid var(--sl-color-border-badge);border-radius:.25rem;font-size:.75rem;padding:.125rem .375rem;line-height:1;color:var(--sl-color-bg-badge);overflow-wrap:anywhere;transform:scale(.83);transform-origin:0 0}.badge-wrapper .outline{outline-style:none!important;--sl-color-bg-badge: var(--fallback-wa,oklch(var(--wa)/1));--sl-color-border-badge: var(--fallback-p,oklch(var(--p)/1))}.badge-wrapper .default{--sl-color-bg-badge: var(--sl-color-accent-low);--sl-color-border-badge: var(--sl-color-accent)}.badge-wrapper .note{--sl-color-bg-badge: var(--sl-color-blue-low);--sl-color-border-badge: var(--sl-color-blue)}.badge-wrapper .danger{--sl-color-bg-badge: var(--sl-color-red-low);--sl-color-border-badge: var(--sl-color-red)}.badge-wrapper .success{--sl-color-bg-badge: var(--sl-color-green-low);--sl-color-border-badge: var(--sl-color-green)}.badge-wrapper .caution{--sl-color-bg-badge: var(--sl-color-orange-low);--sl-color-border-badge: var(--sl-color-orange)}.badge-wrapper .tip{--sl-color-bg-badge: var(--sl-color-purple-low);--sl-color-border-badge: var(--sl-color-purple)}.badge-wrapper [data-theme=light] .default{--sl-color-bg-badge: var(--sl-color-accent-high)}.badge-wrapper [data-theme=light] .note{--sl-color-bg-badge: var(--sl-color-blue-high)}.badge-wrapper [data-theme=light] .danger{--sl-color-bg-badge: var(--sl-color-red-high)}.badge-wrapper [data-theme=light] .success{--sl-color-bg-badge: var(--sl-color-green-high)}.badge-wrapper [data-theme=light] .caution{--sl-color-bg-badge: var(--sl-color-orange-high)}.badge-wrapper [data-theme=light] .tip{--sl-color-bg-badge: var(--sl-color-purple-high)}.sidebar-sublist-wrapper ul{--sl-sidebar-item-padding-inline: .5rem;list-style:none;padding:0}.sidebar-sublist-wrapper li{overflow-wrap:anywhere}.sidebar-sublist-wrapper ul ul li{margin-inline-start:var(--sl-sidebar-item-padding-inline);border-inline-start:1px solid var(--sl-color-hairline-light);padding-inline-start:var(--sl-sidebar-item-padding-inline)}.sidebar-sublist-wrapper .large{font-size:var(--sl-text-lg);font-weight:600;color:var(--sl-color-white)}.sidebar-sublist-wrapper .top-level>li+li{margin-top:.75rem}.sidebar-sublist-wrapper summary{display:flex;align-items:center;justify-content:space-between;padding:.2em var(--sl-sidebar-item-padding-inline);line-height:1.4;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none}.sidebar-sublist-wrapper summary::marker,.sidebar-sublist-wrapper summary::-webkit-details-marker{display:none}.sidebar-sublist-wrapper .caret{transition:transform .2s ease-in-out;flex-shrink:0}.sidebar-sublist-wrapper [dir=rtl] .caret{transform:rotate(180deg)}.sidebar-sublist-wrapper [open]>summary .caret{transform:rotate(90deg)}.sidebar-sublist-wrapper a{display:block;border-radius:.25rem;text-decoration:none;color:var(--sl-color-gray-2);padding:.3em var(--sl-sidebar-item-padding-inline);line-height:1.4}.sidebar-sublist-wrapper a:hover,.sidebar-sublist-wrapper a:focus{color:var(--sl-color-white)}.sidebar-sublist-wrapper [aria-current=page],.sidebar-sublist-wrapper [aria-current=page]:hover,.sidebar-sublist-wrapper [aria-current=page]:focus{color:var(--fallback-n,oklch(var(--n)/1));background-color:var(--fallback-er,oklch(var(--er)/1));border-left-style:solid;border-left-width:4px;border-left-color:var(--fallback-n,oklch(var(--n)/1));padding-left:.625rem!important}.sidebar-sublist-wrapper a>*:not(:last-child),.sidebar-sublist-wrapper .group-label>*:not(:last-child){margin-inline-end:.25em}@media (min-width: 50rem){.sidebar-sublist-wrapper .top-level>li+li{margin-top:.5rem}.sidebar-sublist-wrapper .large{font-size:var(--sl-text-base)}.sidebar-sublist-wrapper a{font-size:var(--sl-text-sm)}}
.link-icon:where(.astro-ld27styo){transition:width .3s ease}
toggle-content:where(.astro-bxjx6km4){--toggle-ml-width: 7rem;--toggle-xl-width: 7.5rem;--toggle-ml-height: 2rem;--toggle-xl-height: 2.5rem;--toggle-ml-font: .75rem;--toggle-xl-font: .85rem;--toggle-ml-switch-width: 3.5rem;--toggle-xl-switch-width: 3.75rem;--toggle-ml-switch-height: 1.5rem;--toggle-xl-switch-height: 2rem}.switch:where(.astro-bxjx6km4){width:var(--toggle-ml-width)}.switch-inner:where(.astro-bxjx6km4){width:200%;margin-left:-100%}.switch-inner:where(.astro-bxjx6km4):before,.switch-inner:where(.astro-bxjx6km4):after{display:block;float:right;width:50%;height:var(--toggle-ml-height);padding:0;line-height:var(--toggle-ml-height);font-size:var(--toggle-ml-font);box-sizing:border-box}.switch-inner:where(.astro-bxjx6km4):after{content:attr(data-on);padding-left:1.25rem}.switch-inner:where(.astro-bxjx6km4):before{content:attr(data-off);padding-right:1.25rem;text-align:right}.switch-switch:where(.astro-bxjx6km4){height:var(--toggle-ml-switch-height);width:var(--toggle-ml-switch-width);bottom:.25rem;border-radius:2rem;transition:all .3s ease-in 0s;text-align:right}.switch-switch:where(.astro-bxjx6km4):before{display:flex;content:attr(data-off);height:100%;font-size:var(--toggle-ml-font);align-items:center;justify-content:center}.switch-checkbox:where(.astro-bxjx6km4):checked+.switch-label:where(.astro-bxjx6km4) .switch-inner:where(.astro-bxjx6km4){margin-left:0}.switch-checkbox:where(.astro-bxjx6km4):checked+.switch-label:where(.astro-bxjx6km4) .switch-switch:where(.astro-bxjx6km4){right:0}.switch-checkbox:where(.astro-bxjx6km4):checked+.switch-label:where(.astro-bxjx6km4) .switch-switch:where(.astro-bxjx6km4):before{display:flex;content:attr(data-on);height:100%;font-size:var(--toggle-ml-font);align-items:center;justify-content:center}
.link-text:where(.astro-zb5a5pg4) .link-icon:where(.astro-zb5a5pg4){width:0;opacity:0;transition:transform .5s ease,width .3s ease,opacity .3s ease}.link-text:where(.astro-zb5a5pg4):hover .link-icon:where(.astro-zb5a5pg4){transform:translate(3px);opacity:1;width:8px}
</style>
<link rel="stylesheet" href="/_astro/tailwind.zDiNMQL3.css">
<link rel="stylesheet" href="/_astro/style.DmWAKxyO.css"><script type="module" src="/_astro/hoisted.s1SK7uwV.js"></script>
<script type="module" src="/_astro/page.CIklkdzg.js"></script></head> <body class="astro-bguv2lll"> <a class="skip-link-wrapper" href="#_top">Skip to content</a>  <div class="page sl-flex"> <header class="header"><span class="header-wrapper" style="--width: 100%;--height: 3.5rem;--xpadding: 1.5rem;">  <my-layout style="position: sticky; height: 3.5rem; --width: 100%;--height: 3.5rem;--xpadding: 1.5rem;" class="w-full backdrop-blur-md top-0 z-[10] bg-neutral flex justify-center"> <!-- 方便控制header宽度 --> <div class="header-content flex items-center justify-between" style="--width: 100%;--height: 3.5rem;--xpadding: 1.5rem;"> <div class="left-content h-full flex flex-1 items-center after:content-[''] after:grow after:invisible" style="--width: 100%;--height: 3.5rem;--xpadding: 1.5rem;"> <a class="no-underline flex" href="/en" style="--width: 100%;--height: 3.5rem;--xpadding: 1.5rem;"> <img class="logo" src="https://img.alicdn.com/imgextra/i1/O1CN01aIB6n51zcgTM5vhku_!!6000000006735-2-tps-156-48.png" alt="Higress-logo" style="--width: 100%;--height: 3.5rem;--xpadding: 1.5rem;"> </a> <span class="mobile-navbar-wrapper" style="--top: 3.5rem;"> <div class="mobile-navbar mobile-navbar h-full ml-4" style="--top: 3.5rem;"> <mobile-menu-button style="--top: 3.5rem;"> <button aria-expanded="false" aria-label="mobile-menu-button" style="--top: 3.5rem;"> <svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6304" width="28" height="28" style="--top: 3.5rem;"> <path d="M192.037 287.953h640.124c17.673 0 32-14.327 32-32s-14.327-32-32-32H192.037c-17.673 0-32 14.327-32 32s14.327 32 32 32zM832.161 479.169H438.553c-17.673 0-32 14.327-32 32s14.327 32 32 32h393.608c17.673 0 32-14.327 32-32s-14.327-32-32-32zM832.161 735.802H192.037c-17.673 0-32 14.327-32 32s14.327 32 32 32h640.124c17.673 0 32-14.327 32-32s-14.327-32-32-32zM319.028 351.594l-160 160 160 160z" class="fill-secondary" p-id="6305" style="--top: 3.5rem;"></path> </svg> </button> </mobile-menu-button> <div class="navbar-panel bg-secondary" style="--top: 3.5rem;"> <div class="navbar-content flex" style="--top: 3.5rem;"> <span class="mobile-nav-sublist-wrapper"> <ul class="top-level"> <li> <a href="/docs/latest/overview/what-is-higress/" class="large flex items-center"> <span>文档</span> </a> </li><li> <a href="/plugin/" class="large flex items-center"> <span>AI 插件</span> </a> </li><li> <a href="/cloud/" class="large flex items-center"> <span>企业版 Higress</span> </a> </li><li> <a href="/blog/" class="large flex items-center"> <span>博客</span> </a> </li><li> <details> <summary> <div class="group-label"> <span class="large undefined">社区</span> </div> <svg aria-hidden="true" class="caret astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-color: #818598;--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <span class="mobile-nav-sublist-wrapper"> <ul>  </ul> </span>  </details> </li><li> <a href="/docs/developers/developers_dev/" class="large flex items-center"> <span>开发者</span> </a> </li><li> <a href="http://demo.higress.io/" class="large flex items-center"> <span>控制台样例</span> </a> </li><li> <a href="/faq/wuyi-intro/" class="large flex items-center"> <span>答疑样例</span> </a> </li> </ul> </span>  </div> </div> </div> </span>   </div> <div class="center-content justify-center flex-2 h-full" style="--width: 100%;--height: 3.5rem;--xpadding: 1.5rem;"> <span class="navbar-wrapper"> <navbar-component class="navbar-component h-full"> <div class="pc-navbar pc-navbar h-full"> <span class="toggle-wrapper"> <toggle-component data-trigger="click" class="toggle-component h-full relative"> <div class="toggle-trigger relative cursor-pointer flex items-center h-full item ">  <a href="/en/docs/latest/overview/what-is-higress/" target="_self" class="toggle-text flex items-center justify-center no-underline h-full "> Latest </a>   </div>  </toggle-component> </span>  <span class="toggle-wrapper"> <toggle-component data-trigger="click" class="toggle-component h-full relative"> <div class="toggle-trigger relative cursor-pointer flex items-center h-full item ">  <a href="/en/plugin/" target="_self" class="toggle-text flex items-center justify-center no-underline h-full "> PLUGIN </a>   </div>  </toggle-component> </span>  <span class="toggle-wrapper"> <toggle-component data-trigger="click" class="toggle-component h-full relative"> <div class="toggle-trigger relative cursor-pointer flex items-center h-full item ">  <a href="/en/cloud/" target="_self" class="toggle-text flex items-center justify-center no-underline h-full "> HIGRESS CLOUD </a>   </div>  </toggle-component> </span>  <span class="toggle-wrapper"> <toggle-component data-trigger="click" class="toggle-component h-full relative"> <div class="toggle-trigger relative cursor-pointer flex items-center h-full item ">  <a href="/en/blog/" target="_self" class="toggle-text flex items-center justify-center no-underline h-full "> BLOG </a>   </div>  </toggle-component> </span>  <span class="toggle-wrapper"> <toggle-component data-trigger="hover" class="toggle-component h-full static"> <div class="toggle-trigger relative cursor-pointer flex items-center h-full item ">  <div class="toggle-text flex items-center justify-center h-full "> COMMUNITY </div>  <svg width="10" height="7" viewBox="0 0 10 7" fill="none" xmlns="http://www.w3.org/2000/svg" data-updown class="ml-2"> <path d="M8.05264 2L5.05264 5.00649L2.05264 2" stroke="#a3a6b3" stroke-width="1.25" stroke-linecap="square"></path> </svg> </div> <div class="toggle-dropdown w-fit inset-x-0 absolute t-3.5rem">  <menu-container class="menu-container dropdown-docs w-screen h-screen flex flex-col justify-start items-center"> <div class="bg-neutral p-10 w-full flex justify-center"> <div class="w-fit"> <div class="flex justify-between mb-[3.5rem]"> <div class="flex"> <!-- 社区label --> <div class="border-l border-warning flex flex-col px-7 min-w-[12rem]"> <span class="text-xs text-warning mb-2">COMMUNITY</span> <a href="https://github.com/higress-group/higress-group.github.io/issues" target="_blank" class="link-text cursor-pointer no-underline flex items-center w-fit text-neutral text-sm mt-3 astro-zb5a5pg4"> Report a doc issue  <svg version="1.1" width="8" height="8" viewBox="0 0 8 8" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="link-icon  ml-2 fill-neutral astro-zb5a5pg4"> <g transform="matrix(-1,0,0,1,16,0)" class="astro-zb5a5pg4"> <path d="M9.27237,2.16302L9.27237,6.99801Q9.27237,7.26839,9.08915,7.45161Q8.905925,7.63483,8.636183,7.6342Q8.365805,7.6342,8.183221,7.45097Q8.000636137,7.26775,8,6.99801L8,0.636183Q8,0.365805,8.183221,0.183221Q8.366441,0.000636364,8.636183,0L14.99801,0Q15.26839,0,15.451609999999999,0.183221Q15.634830000000001,0.366441,15.63419,0.636183Q15.63419,0.906561,15.45097,1.08978Q15.26775,1.273,14.99801,1.27237L10.16302,1.27237L15.825050000000001,6.93439Q16,7.10935,16,7.37972Q16,7.6501,15.825050000000001,7.82505Q15.6501,8,15.379719999999999,8Q15.10935,8,14.93439,7.82505L9.27237,2.16302Z" fill-opacity="1" class="astro-zb5a5pg4"></path> </g> </svg>  </a> <a href="/docs/developers/contributor-guide/guide_dev/" target="_self" class="link-text cursor-pointer no-underline flex items-center w-fit text-neutral text-sm mt-3 astro-zb5a5pg4"> Contribute community  <svg version="1.1" width="8" height="8" viewBox="0 0 8 8" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="link-icon  ml-2 fill-neutral astro-zb5a5pg4"> <g transform="matrix(-1,0,0,1,16,0)" class="astro-zb5a5pg4"> <path d="M9.27237,2.16302L9.27237,6.99801Q9.27237,7.26839,9.08915,7.45161Q8.905925,7.63483,8.636183,7.6342Q8.365805,7.6342,8.183221,7.45097Q8.000636137,7.26775,8,6.99801L8,0.636183Q8,0.365805,8.183221,0.183221Q8.366441,0.000636364,8.636183,0L14.99801,0Q15.26839,0,15.451609999999999,0.183221Q15.634830000000001,0.366441,15.63419,0.636183Q15.63419,0.906561,15.45097,1.08978Q15.26775,1.273,14.99801,1.27237L10.16302,1.27237L15.825050000000001,6.93439Q16,7.10935,16,7.37972Q16,7.6501,15.825050000000001,7.82505Q15.6501,8,15.379719999999999,8Q15.10935,8,14.93439,7.82505L9.27237,2.16302Z" fill-opacity="1" class="astro-zb5a5pg4"></path> </g> </svg>  </a> <a href="https://github.com/alibaba/higress/graphs/contributors" target="_blank" class="link-text cursor-pointer no-underline flex items-center w-fit text-neutral text-sm mt-3 astro-zb5a5pg4"> Contributors  <svg version="1.1" width="8" height="8" viewBox="0 0 8 8" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="link-icon  ml-2 fill-neutral astro-zb5a5pg4"> <g transform="matrix(-1,0,0,1,16,0)" class="astro-zb5a5pg4"> <path d="M9.27237,2.16302L9.27237,6.99801Q9.27237,7.26839,9.08915,7.45161Q8.905925,7.63483,8.636183,7.6342Q8.365805,7.6342,8.183221,7.45097Q8.000636137,7.26775,8,6.99801L8,0.636183Q8,0.365805,8.183221,0.183221Q8.366441,0.000636364,8.636183,0L14.99801,0Q15.26839,0,15.451609999999999,0.183221Q15.634830000000001,0.366441,15.63419,0.636183Q15.63419,0.906561,15.45097,1.08978Q15.26775,1.273,14.99801,1.27237L10.16302,1.27237L15.825050000000001,6.93439Q16,7.10935,16,7.37972Q16,7.6501,15.825050000000001,7.82505Q15.6501,8,15.379719999999999,8Q15.10935,8,14.93439,7.82505L9.27237,2.16302Z" fill-opacity="1" class="astro-zb5a5pg4"></path> </g> </svg>  </a>  </div> <!-- 事件、资源label --> <div class="border-l border-warning flex flex-col px-7 mr-10"> <span class="text-xs text-warning mb-2">Resources</span> <a href="/blog/" target="_self" class="link-text cursor-pointer no-underline flex items-center w-fit text-neutral text-sm mt-3 astro-zb5a5pg4"> Blog  <svg version="1.1" width="8" height="8" viewBox="0 0 8 8" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="link-icon  ml-2 fill-neutral astro-zb5a5pg4"> <g transform="matrix(-1,0,0,1,16,0)" class="astro-zb5a5pg4"> <path d="M9.27237,2.16302L9.27237,6.99801Q9.27237,7.26839,9.08915,7.45161Q8.905925,7.63483,8.636183,7.6342Q8.365805,7.6342,8.183221,7.45097Q8.000636137,7.26775,8,6.99801L8,0.636183Q8,0.365805,8.183221,0.183221Q8.366441,0.000636364,8.636183,0L14.99801,0Q15.26839,0,15.451609999999999,0.183221Q15.634830000000001,0.366441,15.63419,0.636183Q15.63419,0.906561,15.45097,1.08978Q15.26775,1.273,14.99801,1.27237L10.16302,1.27237L15.825050000000001,6.93439Q16,7.10935,16,7.37972Q16,7.6501,15.825050000000001,7.82505Q15.6501,8,15.379719999999999,8Q15.10935,8,14.93439,7.82505L9.27237,2.16302Z" fill-opacity="1" class="astro-zb5a5pg4"></path> </g> </svg>  </a>  </div> </div> <div class="flex" id="blog-card-container"> <div class="relative blog-card w-[16.875] h-[22.5rem] rounded-2xl p-2 flex flex-col ml-4 "> <img src="https://img.alicdn.com/imgextra/i4/O1CN01bGnAVW1pFeLFnlaQL_!!6000000005331-2-tps-508-370.png" alt="Higress case" class="rounded-lg" width="254" height="185" loading="lazy" decoding="async"> <p class="w-[15.875rem] text-lg line-clamp-2 mt-3 text-base-100"> API赋能AI，AI网关零代码解决AI幻觉问题 </p> <span class="not-content"><a class="btn rounded-3xl w-[8.5rem] h-[2.5rem] absolute bottom-2 article-button border-none text-secondary no-underline" target="_self" rel="noopener noreferrer" id="article-button" href="/blog/higress-gvr7dx_awbbpb_im44tpldqyt8c97d/?source=blog_article">READ ARTICLE</a></span> </div><div class="relative blog-card w-[16.875] h-[22.5rem] rounded-2xl p-2 flex flex-col ml-4 "> <img src="https://img.alicdn.com/imgextra/i4/O1CN01zfayJW1Lhe4kliPv9_!!6000000001331-2-tps-508-370.png" alt="Higress case" class="rounded-lg" width="254" height="185" loading="lazy" decoding="async"> <p class="w-[15.875rem] text-lg line-clamp-2 mt-3 text-base-100"> Higress 发布 v1.4，开放 AI 网关能力，增强云原生能力 </p> <span class="not-content"><a class="btn rounded-3xl w-[8.5rem] h-[2.5rem] absolute bottom-2 article-button border-none text-secondary no-underline" target="_self" rel="noopener noreferrer" id="article-button" href="/blog/higress-gvr7dx_awbbpb_picigqfume3k5lf3/?source=blog_article">READ ARTICLE</a></span> </div> </div>  </div> <!-- 联系我们 --> <div class="w-[70rem] contact-us flex items-center justify-between rounded-2xl h-9 pl-10 pr-[8.5rem]"> <span class="text-success text-xs leading-9 tracking-[0.15em]"> CONTACT US </span> <div class="flex items-center cursor-pointer"> <a target="_blank" href="https://github.com/alibaba/higress" class="mr-16 flex items-center no-underline"> <svg viewBox="0 80 1024 800" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3233" width="16" height="16"> <path d="M20.48 503.72608c0 214.4256 137.4208 396.73856 328.94976 463.6672 25.8048 6.5536 21.87264-11.8784 21.87264-24.33024v-85.07392c-148.93056 17.44896-154.86976-81.1008-164.94592-97.52576-20.23424-34.52928-67.91168-43.33568-53.69856-59.76064 33.91488-17.44896 68.48512 4.42368 108.46208 63.61088 28.95872 42.88512 85.44256 35.6352 114.15552 28.4672a138.8544 138.8544 0 0 1 38.0928-66.7648c-154.25536-27.60704-218.60352-121.77408-218.60352-233.79968 0-54.31296 17.94048-104.2432 53.0432-144.54784-22.36416-66.43712 2.08896-123.24864 5.3248-131.6864 63.81568-5.7344 130.00704 45.6704 135.168 49.68448 36.2496-9.78944 77.57824-14.9504 123.82208-14.9504 46.4896 0 88.064 5.3248 124.5184 15.23712 12.288-9.4208 73.80992-53.53472 133.12-48.128 3.15392 8.43776 27.0336 63.93856 6.02112 129.4336 35.59424 40.38656 53.69856 90.76736 53.69856 145.24416 0 112.18944-64.7168 206.4384-219.42272 233.71776a140.0832 140.0832 0 0 1 41.7792 99.9424v123.4944c0.86016 9.87136 0 19.6608 16.50688 19.6608 194.31424-65.49504 334.2336-249.15968 334.2336-465.5104C1002.57792 232.48896 782.66368 12.77952 511.5904 12.77952 240.18944 12.65664 20.48 232.40704 20.48 503.72608z" fill="currentColor" p-id="3234"></path> </svg> <span class="ml-2 mt-1 text-sm text-secondary">GitHub</span> </a> <div class="mr-16 hoverable relative"> <img class="tooltip hidden w-40 absolute bottom-9" src="https://img.alicdn.com/imgextra/i2/O1CN01V3D0Ih1ood1zSuMUJ_!!6000000005272-0-tps-472-524.jpg" alt="Higress Dingding Code"> <span class="text-neutral flex items-center"> <svg class="icon" viewBox="0 50 1024 800" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4747" width="16" height="16"> <path d="M0 0h1024v1024H0z" class="secondary-fill" fill-opacity="0" p-id="4748"></path><path d="M786.978133 481.6896c-153.770667-117.5552-327.133867-273.237333-517.188266-440.183467-14.984533-13.141333-28.2624-7.953067-34.952534 9.5232-42.8032 111.957333-1.297067 211.421867 65.774934 268.731734 67.345067 57.582933 167.492267 110.592 228.829866 138.683733 2.389333 1.092267 0.3072 4.573867-2.116266 3.515733-112.674133-49.152-191.044267-84.650667-297.3696-165.819733-11.434667-8.738133-23.04-5.3248-24.405334 11.707733-8.704 107.042133 60.484267 191.146667 137.728 219.5456 47.786667 17.6128 100.0448 27.3408 148.548267 33.109334 2.525867 0.341333 1.9456 4.027733-0.580267 4.027733-62.498133 0.2048-138.001067-14.609067-203.332266-39.458133-13.789867-5.256533-18.5344 5.632-16.418134 14.267733 11.1616 45.226667 67.652267 114.346667 157.5936 128.887467 16.827733 2.730667 34.747733 3.072 50.722134 2.628266 3.7888-0.136533 4.7104 1.9456 3.4816 4.846934 0 0-61.098667 103.6288-63.761067 108.066133-2.082133 3.447467-0.8192 6.212267 3.515733 6.212267h80.622934c3.754667 0 6.0416 2.389333 4.096 5.5296-1.877333 3.140267-107.656533 176.7424-112.64 185.0368-4.369067 7.202133 0.785067 12.731733 8.942933 6.826666 8.192-5.9392 346.180267-250.88 355.805867-257.911466 4.437333-3.208533 3.413333-7.5776-2.833067-7.5776h-72.2944c-4.744533 0-5.768533-3.140267-2.56-6.314667 3.242667-3.1744 82.090667-80.964267 110.08-110.08 29.184-30.378667 44.100267-86.050133-5.290667-123.8016" class="secondary-fill" p-id="4749"></path> </svg> <span class="ml-2 mt-1 text-sm text-secondary">DingDing</span> </span> </div> </div> </div> </div> </div> <div class="dropdown-overlay w-full flex-1 bg-neutral-900/[.4]"></div> </menu-container>    </div> </toggle-component> </span>  <span class="toggle-wrapper"> <toggle-component data-trigger="click" class="toggle-component h-full relative"> <div class="toggle-trigger relative cursor-pointer flex items-center h-full item ">  <a href="/en/docs/developers/developers_dev/" target="_self" class="toggle-text flex items-center justify-center no-underline h-full "> DEVELOPER </a>   </div>  </toggle-component> </span>  <span class="toggle-wrapper"> <toggle-component data-trigger="click" class="toggle-component h-full relative"> <div class="toggle-trigger relative cursor-pointer flex items-center h-full item ">  <a href="http://demo.higress.io/" target="_blank" class="toggle-text flex items-center justify-center no-underline h-full "> DEMO </a>   </div>  </toggle-component> </span>  <span class="toggle-wrapper"> <toggle-component data-trigger="click" class="toggle-component h-full relative"> <div class="toggle-trigger relative cursor-pointer flex items-center h-full item item-last-child">  <a href="/en/faq/wuyi-intro/" target="_self" class="toggle-text flex items-center justify-center no-underline h-full "> FAQ </a>   </div>  </toggle-component> </span>   </div> </navbar-component> </span>  </div> <div class="right-content flex flex-1 items-center md:gap-4  before:content-[''] before:grow before:invisible" style="--width: 100%;--height: 3.5rem;--xpadding: 1.5rem;"> <div class="astro-bxjx6km4"> <!-- pc --> <toggle-content class="switch float-left relative m-0 rounded-[2rem] max-md:hidden astro-bxjx6km4"> <input disabled data-switch class="switch-checkbox hidden astro-bxjx6km4" id="pc-toggle-switch" type="checkbox" checked="true"> <!-- container --> <label class="switch-label block overflow-hidden cursor-pointer rounded-[2rem]  
                bg-language
             astro-bxjx6km4" for="pc-toggle-switch"> <!-- static --> <span class="switch-inner block 
                    text-language-button
                 astro-bxjx6km4" data-on="中文" data-off="EN"></span> <!-- active --> <span class="switch-switch absolute float-right mx-1 
                    text-language-button-active
                    bg-language-button
                 astro-bxjx6km4" data-on="EN" data-off="中文"></span> </label> </toggle-content> <!-- mobile --> <div data-switch class="w-[3.5rem] h-[1.5rem] leading-[1.5rem] text-xs text-center rounded-2xl bg-gray-12 max-md:inline-block md:hidden border astro-bxjx6km4" id="pc-toggle-switch"> EN </div> </div>   <sl-doc-search data-translations="{&#34;translations&#34;:{&#34;button&#34;:{},&#34;modal&#34;:{&#34;searchBox&#34;:{},&#34;startScreen&#34;:{},&#34;errorScreen&#34;:{},&#34;footer&#34;:{},&#34;noResultsScreen&#34;:{}}}}"> <button type="button" class="DocSearch DocSearch-Button"> <span class="DocSearch-Button-Container"> <svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"> <path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path> </svg> <span class="DocSearch-Button-Placeholder"></span> </span> <span class="DocSearch-Button-Keys"></span> </button> </sl-doc-search>   </div> </div> </my-layout> </span>     <script>
function setLightMode(document) {
    const html = document.documentElement;
    html.setAttribute('data-theme', 'light');
}

setLightMode(document);

document.addEventListener('astro:before-swap', ev => {
    console.log("=======astro:before-swap=======")
    setLightMode(ev.newDocument);
});
</script></header> <nav class="sidebar" aria-label="Main"> <starlight-menu-button class="astro-jif73yzw"> <button aria-expanded="false" aria-label="Menu" aria-controls="starlight__sidebar" class="sl-flex md:sl-hidden astro-jif73yzw"> <svg aria-hidden="true" class="astro-jif73yzw astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M3 8h18a1 1 0 1 0 0-2H3a1 1 0 0 0 0 2Zm18 8H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Zm0-5H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Z"/></svg>  </button> </starlight-menu-button>    <div id="starlight__sidebar" class="sidebar-pane"> <div class="sidebar-content sl-flex"> <blog-theme> <span class="sidebar-sublist-wrapper"> <ul class="top-level"> <li> <details open> <summary> <div class="group-label"> <span class="large">Overview</span>  </div> <svg aria-hidden="true" class="caret astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <span class="sidebar-sublist-wrapper"> <ul> <li> <a href="/en/docs/latest/overview/faq/" class="flex items-center"> <span>Higress FAQ</span>   </a> </li><li> <a href="/en/docs/latest/overview/roadmap/" class="flex items-center"> <span>Roadmap</span>   </a> </li><li> <a href="/en/docs/latest/overview/terminology/" class="flex items-center"> <span>Higress Terminology</span>   </a> </li><li> <a href="/en/docs/latest/overview/what-is-higress/" class="flex items-center"> <span>What Is Higress?</span>   </a> </li> </ul> </span>  </details> </li><li> <details open> <summary> <div class="group-label"> <span class="large">User Doc</span>  </div> <svg aria-hidden="true" class="caret astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <span class="sidebar-sublist-wrapper"> <ul> <li> <a href="/en/docs/latest/user/quickstart/" class="flex items-center"> <span>Quick Start</span>   </a> </li><li> <details> <summary> <div class="group-label"> <span class="large">Reference</span>  </div> <svg aria-hidden="true" class="caret astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <span class="sidebar-sublist-wrapper"> <ul> <li> <a href="/en/docs/latest/user/configmap/" class="flex items-center"> <span>Config Map</span>   </a> </li><li> <a href="/en/docs/latest/user/annotation/" class="flex items-center"> <span>Higress Annotaion</span>   </a> </li><li> <a href="/en/docs/latest/user/annotation-use-case/" class="flex items-center"> <span>Annotation Use Case</span>   </a> </li><li> <a href="/en/docs/latest/user/configurations/" class="flex items-center"> <span>Higress Parameters Guide</span>   </a> </li><li> <a href="/en/docs/latest/user/mcp-bridge/" class="flex items-center"> <span>Mcp Bridge Configuration</span>   </a> </li><li> <a href="/en/docs/latest/user/dubbo-http2rpc/" class="flex items-center"> <span>HTTP to Dubbo</span>   </a> </li><li> <a href="/en/docs/latest/user/wasm-image-spec/" class="flex items-center"> <span>Wasm Plugin Image Specification</span>   </a> </li> </ul> </span>  </details> </li><li> <details open> <summary> <div class="group-label"> <span class="large">Plugin Doc</span>  </div> <svg aria-hidden="true" class="caret astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <span class="sidebar-sublist-wrapper"> <ul> <li> <details> <summary> <div class="group-label"> <span class="large">AI Plugins</span>  </div> <svg aria-hidden="true" class="caret astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <span class="sidebar-sublist-wrapper"> <ul> <li> <a href="/en/docs/latest/plugins/ai/ai-proxy/" class="flex items-center"> <span>AI Proxy</span>   </a> </li> </ul> </span>  </details> </li><li> <details open> <summary> <div class="group-label"> <span class="large">Authentication Plugins</span>  </div> <svg aria-hidden="true" class="caret astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <span class="sidebar-sublist-wrapper"> <ul> <li> <a href="/en/docs/latest/plugins/authentication/basic-auth/" class="flex items-center"> <span>Basic Auth</span>   </a> </li><li> <a href="/en/docs/latest/plugins/authentication/hmac-auth/" class="flex items-center"> <span>HMAC authentication</span>   </a> </li><li> <a href="/en/docs/latest/plugins/authentication/jwt-auth/" aria-current="page" class="flex items-center"> <span>JWT authentication</span>   </a> </li><li> <a href="/en/docs/latest/plugins/authentication/key-auth/" class="flex items-center"> <span>Key Authentication</span>   </a> </li> </ul> </span>  </details> </li><li> <details> <summary> <div class="group-label"> <span class="large">Transformation Plugins</span>  </div> <svg aria-hidden="true" class="caret astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <span class="sidebar-sublist-wrapper"> <ul> <li> <a href="/en/docs/latest/plugins/transformation/custom-response/" class="flex items-center"> <span>Custom response</span>   </a> </li> </ul> </span>  </details> </li><li> <details> <summary> <div class="group-label"> <span class="large">Traffic Plugins</span>  </div> <svg aria-hidden="true" class="caret astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <span class="sidebar-sublist-wrapper"> <ul> <li> <a href="/en/docs/latest/plugins/traffic/key-rate-limit/" class="flex items-center"> <span>Rate limiting based on Key</span>   </a> </li><li> <a href="/en/docs/latest/plugins/traffic/request-block/" class="flex items-center"> <span>request blocking</span>   </a> </li> </ul> </span>  </details> </li><li> <details> <summary> <div class="group-label"> <span class="large">Security Plugins</span>  </div> <svg aria-hidden="true" class="caret astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <span class="sidebar-sublist-wrapper"> <ul> <li> <a href="/en/docs/latest/plugins/security/bot-detect/" class="flex items-center"> <span>Robot Detect</span>   </a> </li> </ul> </span>  </details> </li><li> <a href="/en/docs/latest/plugins/intro/" class="flex items-center"> <span>Wasm Plugin Doc</span>   </a> </li><li> <a href="/en/docs/latest/plugins/custom/" class="flex items-center"> <span>Custom Plugin</span>   </a> </li> </ul> </span>  </details> </li><li> <details> <summary> <div class="group-label"> <span class="large">Best Practices</span>  </div> <svg aria-hidden="true" class="caret astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <span class="sidebar-sublist-wrapper"> <ul> <li> <a href="/en/docs/latest/user/wasm-go/" class="flex items-center"> <span>Developing a WASM Plugin with Golang</span>   </a> </li><li> <a href="/en/docs/latest/user/kruise-rollout/" class="flex items-center"> <span>OpenKruise Rollout</span>   </a> </li><li> <a href="/en/docs/latest/user/nacos-route/" class="flex items-center"> <span>Nacos Route</span>   </a> </li><li> <a href="/en/docs/latest/user/spring-cloud/" class="flex items-center"> <span>SpringCloud</span>   </a> </li><li> <a href="/en/docs/latest/user/dubbo/" class="flex items-center"> <span>Higress Dubbo</span>   </a> </li><li> <a href="/en/docs/latest/user/prometheus/" class="flex items-center"> <span>Request Monitoring Based on Prometheus</span>   </a> </li><li> <a href="/en/docs/latest/user/waf/" class="flex items-center"> <span>WAF</span>   </a> </li> </ul> </span>  </details> </li> </ul> </span>  </details> </li><li> <details open> <summary> <div class="group-label"> <span class="large">Ops</span>  </div> <svg aria-hidden="true" class="caret astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <span class="sidebar-sublist-wrapper"> <ul> <li> <details open> <summary> <div class="group-label"> <span class="large">Deploy</span>  </div> <svg aria-hidden="true" class="caret astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <span class="sidebar-sublist-wrapper"> <ul> <li> <a href="/en/docs/latest/ops/hgctl/" class="flex items-center"> <span>hgctl</span>   </a> </li><li> <a href="/en/docs/latest/ops/deploy-by-helm/" class="flex items-center"> <span>Deploy Higress by Helm</span>   </a> </li><li> <a href="/en/docs/latest/ops/deploy-by-docker-compose/" class="flex items-center"> <span>Deploy Higress by Docker Compose</span>   </a> </li> </ul> </span>  </details> </li><li> <a href="/en/docs/latest/ops/upgrade/" class="flex items-center"> <span>Upgrade</span>   </a> </li><li> <a href="/en/docs/latest/ops/log/" class="flex items-center"> <span>Log</span>   </a> </li> </ul> </span>  </details> </li><li> <details open> <summary> <div class="group-label"> <span class="large">Developer Guide</span>  </div> <svg aria-hidden="true" class="caret astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <span class="sidebar-sublist-wrapper"> <ul> <li> <a href="/en/docs/latest/dev/architecture/" class="flex items-center"> <span>Component Compilation Instructions</span>   </a> </li><li> <a href="/en/docs/latest/dev/code/" class="flex items-center"> <span>Code Reading Instructions</span>   </a> </li><li> <a href="/en/docs/latest/dev/customresourcedefinition/" class="flex items-center"> <span>Higress Custom CRD Development Guidelines</span>   </a> </li> </ul> </span>  </details> </li> </ul> </span>  </blog-theme>  </div> </div> </nav> <div class="main-frame">  <div class="lg:sl-flex two-column-content-wrapper"> <aside class="right-sidebar-container"> <div id="toggle-sidebar"> <span class="not-content"><a class="btn btn btn-secondary px-2 no-underline" id="toggle-btn"> <svg aria-hidden="true" class="right_caret text-lg align-middle rotate-180 astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </a></span> </div> <div class="right-sidebar"> <div class="page-sidebar-wrapper"><div class="lg:sl-hidden"><mobile-starlight-toc data-min-h="2" data-max-h="3" class="astro-doynk5tl"><nav aria-labelledby="starlight__on-this-page--mobile" class="astro-doynk5tl"><details id="starlight__mobile-toc" class="astro-doynk5tl"><summary id="starlight__on-this-page--mobile" class="sl-flex astro-doynk5tl"><div class="toggle sl-flex astro-doynk5tl">On this page<svg aria-hidden="true" class="caret astro-doynk5tl astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </div><span class="display-current astro-doynk5tl"></span></summary><div class="dropdown astro-doynk5tl"><ul class="isMobile astro-g2bywc46" style="--depth: 0;"> <li class="astro-g2bywc46" style="--depth: 0;"> <a href="#_top" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Overview</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#description" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Description</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#detailed-description" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Detailed Description</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#1-token-based-authentication" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">1. Token-based authentication</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#2-how-to-apply-the-jwt-plugin-to-protect-the-api-of-the-user-system" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">2. How to apply the JWT plugin to protect the API of the user system</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#plugin-configuration-guide" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Plugin Configuration Guide</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#configuration-fields" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Configuration Fields</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#configuration-example" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Configuration Example</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#common-error-codes" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Common Error Codes</span> </a>  </li> </ul> </div></details></nav></mobile-starlight-toc></div><div class="right-sidebar-panel sl-hidden lg:sl-block"><div class="sl-container"><starlight-toc data-min-h="2" data-max-h="3"><nav aria-labelledby="starlight__on-this-page"><div class="starlight__on-this-page"><h2 id="starlight__on-this-page" class="heading">On this page</h2><span class="table-of-contents-wrapper" style="--depth: 0;"> <ul style="--depth: 0;"> <li style="--depth: 0;"> <a href="#_top" class="py-1" style="--depth: 0;"> <span style="--depth: 0;">Overview</span> </a>  </li><li style="--depth: 0;"> <a href="#description" class="py-1" style="--depth: 0;"> <span style="--depth: 0;">Description</span> </a>  </li><li style="--depth: 0;"> <a href="#detailed-description" class="py-1" style="--depth: 0;"> <span style="--depth: 0;">Detailed Description</span> </a> <span class="table-of-contents-wrapper" style="--depth: 1;"> <ul style="--depth: 1;"> <li style="--depth: 1;"> <a href="#1-token-based-authentication" class="py-1" style="--depth: 1;"> <span style="--depth: 1;">1. Token-based authentication</span> </a>  </li><li style="--depth: 1;"> <a href="#2-how-to-apply-the-jwt-plugin-to-protect-the-api-of-the-user-system" class="py-1" style="--depth: 1;"> <span style="--depth: 1;">2. How to apply the JWT plugin to protect the API of the user system</span> </a>  </li> </ul> </span>  </li><li style="--depth: 0;"> <a href="#plugin-configuration-guide" class="py-1" style="--depth: 0;"> <span style="--depth: 0;">Plugin Configuration Guide</span> </a> <span class="table-of-contents-wrapper" style="--depth: 1;"> <ul style="--depth: 1;"> <li style="--depth: 1;"> <a href="#configuration-fields" class="py-1" style="--depth: 1;"> <span style="--depth: 1;">Configuration Fields</span> </a>  </li><li style="--depth: 1;"> <a href="#configuration-example" class="py-1" style="--depth: 1;"> <span style="--depth: 1;">Configuration Example</span> </a>  </li> </ul> </span>  </li><li style="--depth: 0;"> <a href="#common-error-codes" class="py-1" style="--depth: 0;"> <span style="--depth: 0;">Common Error Codes</span> </a>  </li> </ul> </span> <h2 class="mt-4 text-lg font-semibold leading-[var(--sl-line-height-headings)] mb-2 text-warning">Contribute</h2> <ul class="p-0 list-none"> <li> <div class="flex items-center not-content"> <svg width="1em" height="1em" viewBox="0 0 24 24" class="mr-1 text-warning" data-icon="tabler:book">  <symbol id="ai:tabler:book"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0M3 6v13m9-13v13m9-13v13"/></symbol><use xlink:href="#ai:tabler:book"></use>  </svg> <a class="link group no-underline text-warning hover:underline astro-ld27styo" href="/en/developers/contributor-guide/guide_dev/" target="_self"> Contributor Guides  </a>  </div><div class="flex items-center not-content"> <svg width="1em" height="1em" viewBox="0 0 24 24" class="mr-1 text-warning" data-icon="tabler:pencil">  <symbol id="ai:tabler:pencil"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 20h4L18.5 9.5a2.828 2.828 0 1 0-4-4L4 16zm9.5-13.5l4 4"/></symbol><use xlink:href="#ai:tabler:pencil"></use>  </svg> <a class="link group no-underline text-warning hover:underline astro-ld27styo" href="https://github.com/higress-group/higress-group.github.io/blob/develop-astro-higress/src/content/docs/latest/en/plugins/authentication/jwt-auth.md" target="_blank"> Edit this page  </a>  </div><div class="flex items-center not-content"> <svg width="1em" height="1em" viewBox="0 0 1024 1024" class="mr-1 text-warning" data-icon="ant-design:github-filled">  <symbol id="ai:ant-design:github-filled"><path fill="currentColor" d="M511.6 76.3C264.3 76.2 64 276.4 64 523.5C64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9c26.4 39.1 77.9 32.5 104 26c5.7-23.5 17.9-44.5 34.7-60.8c-140.6-25.2-199.2-111-199.2-213c0-49.5 16.3-95 48.3-131.7c-20.4-60.5 1.9-112.3 4.9-120c58.1-5.2 118.5 41.6 123.2 45.3c33-8.9 70.7-13.6 112.9-13.6c42.4 0 80.2 4.9 113.5 13.9c11.3-8.6 67.3-48.8 121.3-43.9c2.9 7.7 24.7 58.3 5.5 118c32.4 36.8 48.9 82.7 48.9 132.3c0 102.2-59 188.1-200 212.9a127.5 127.5 0 0 1 38.1 91v112.5c.8 9 0 17.9 15 17.9c177.1-59.7 304.6-227 304.6-424.1c0-247.2-200.4-447.3-447.5-447.3"/></symbol><use xlink:href="#ai:ant-design:github-filled"></use>  </svg> <a class="link group no-underline text-warning hover:underline astro-ld27styo" href="https://github.com/higress-group/higress-group.github.io/blob/develop-astro-higress/src/content/docs/latest/en/plugins/authenticatio/issues/new?title=关于文档【JWT authentication】的反馈&body=%0A%5B%E5%9C%A8%E6%AD%A4%E5%A4%84%E8%BE%93%E5%85%A5%E5%8F%8D%E9%A6%88%5D%0A%0A%0A---%0A%23%23%23%23%20%E6%96%87%E6%A1%A3%E8%AF%A6%E7%BB%86%E4%BF%A1%E6%81%AF%0A%0A%E2%9A%A0%20*%E8%AF%B7%E5%8B%BF%E7%BC%96%E8%BE%91%E6%AD%A4%E9%83%A8%E5%88%86%E3%80%82higress.io%20%E2%9E%9F%20GitHub%20%E9%97%AE%E9%A2%98%E9%93%BE%E6%8E%A5%E5%BF%85%E9%A1%BB%E5%85%B7%E6%9C%89%E6%AD%A4%E9%83%A8%E5%88%86%E3%80%82*%0A%0A*%20Version%20%20ID%3A%202bac3769-2613-f739-4796-0737c7cd8919%0A*%20Content%3A%20%5BJWT%20authentication%5D(https%3A%2F%2Fhigress.cn%2Fen%2Fdocs%2Flatest%2Fplugins%2Fauthentication%2Fjwt-auth%2F)%0A*%20Content%20Source%3A%20https%3A%2F%2Fgithub.com%2Fhigress-group%2Fhigress-group.github.io%2Fblob%2Fdevelop-astro-higress%2Fsrc%2Fcontent%2Fdocs%2Flatest%2Fen%2Fplugins%2Fauthentication%2Fjwt-auth.md%0A*%20Service%3A%20**%E7%94%A8%E6%88%B7%E6%8C%87%E5%8D%97%2F%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97%2F%E8%BF%90%E7%BB%B4%E6%8C%87%E5%8D%97**%0A" target="_blank"> Feedback this page  </a>  </div> </li> </ul><h2 class="mt-4 text-lg font-semibold leading-[var(--sl-line-height-headings)] mb-2 text-warning">Community</h2> <ul class="p-0 list-none"> <li> <div class="flex items-center not-content"> <svg width="1em" height="1em" viewBox="0 0 24 24" class="mr-1 text-warning" data-icon="basil:document-outline">  <symbol id="ai:basil:document-outline"><path fill="currentColor" d="M15.75 13a.75.75 0 0 0-.75-.75H9a.75.75 0 0 0 0 1.5h6a.75.75 0 0 0 .75-.75m0 4a.75.75 0 0 0-.75-.75H9a.75.75 0 0 0 0 1.5h6a.75.75 0 0 0 .75-.75"/><path fill="currentColor" fill-rule="evenodd" d="M7 2.25A2.75 2.75 0 0 0 4.25 5v14A2.75 2.75 0 0 0 7 21.75h10A2.75 2.75 0 0 0 19.75 19V7.968c0-.381-.124-.751-.354-1.055l-2.998-3.968a1.75 1.75 0 0 0-1.396-.695zM5.75 5c0-.69.56-1.25 1.25-1.25h7.25v4.397c0 .414.336.75.75.75h3.25V19c0 .69-.56 1.25-1.25 1.25H7c-.69 0-1.25-.56-1.25-1.25z" clip-rule="evenodd"/></symbol><use xlink:href="#ai:basil:document-outline"></use>  </svg> <a class="link group no-underline text-warning hover:underline astro-ld27styo" href="/blog/" target="_self"> Read our blog posts  </a>  </div><div class="flex items-center not-content"> <svg width="1em" height="1em" viewBox="0 0 1024 1024" class="mr-1 text-warning" data-icon="ant-design:github-filled">  <use xlink:href="#ai:ant-design:github-filled"></use>  </svg> <a class="link group no-underline text-warning hover:underline astro-ld27styo" href="https://github.com/higress-group/higress-group.github.io/tree/develop-astro-higress/src/content/docs" target="_blank"> Higress Docs on GitHub  </a>  </div> </li> </ul></div></nav></starlight-toc></div></div></div> </div> </aside> <div class="main-pane"> <div id="back-btn" class="pt-12 pl-6"> <span class="not-content"><a class="btn btn btn-secondary rounded-3xl no-underline" target="_self" rel="noopener noreferrer"> <svg aria-hidden="true" class="text-lg align-middle astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 11H9.41l3.3-3.29a1.004 1.004 0 1 0-1.42-1.42l-5 5a1 1 0 0 0-.21.33 1 1 0 0 0 0 .76 1 1 0 0 0 .21.33l5 5a1.002 1.002 0 0 0 1.639-.325 1 1 0 0 0-.219-1.095L9.41 13H17a1 1 0 0 0 0-2Z"/></svg>  <span>BACK</span> </a></span> </div>   <main data-pagefind-body lang="en" dir="ltr" class="astro-bguv2lll">    <div class="content-panel content-panel-wrapper"> <div class="sl-container"> <h1 class="page-title-wrapper" id="_top"> JWT authentication </h1>  </div> </div>  <div class="content-panel content-panel-wrapper"> <div class="sl-container"> <div class="sl-markdown-content"> <h2 id="description">Description</h2>
<p>The <code dir="auto">jwt-auth</code> plugin implements authentication and authorization based on JWT (JSON Web Token), supports parsing JWTs from URL parameters, request headers, and Cookie fields from HTTP requests, and verifies whether the token has permission to access.</p>
<p>The difference between this plugin and the JWT authentication in <code dir="auto">Security Capabilities->Authentication and Authorization</code> is that it provides additional capabilities for identifying the caller’s identity, supporting the configuration of different JWT credentials for different callers.</p>
<h2 id="detailed-description">Detailed Description</h2>
<h3 id="1-token-based-authentication">1. Token-based authentication</h3>
<h4 id="11-introduction">1.1 Introduction</h4>
<p>Many open APIs need to identify the identity of the caller and determine whether the requested resource can be returned to the caller based on this identity. Token is a mechanism used for identity verification. Based on this mechanism, the application does not need to retain the user’s authentication information or session information on the server, which can realize stateless and distributed web application authorization and provide convenience for application extension.</p>
<h4 id="12-process-description">1.2 Process Description</h4>
<p>The above figure is the business process sequence diagram when the gateway uses JWT for authentication, and the following we will describe the steps marked in the figure in detail in words:</p>
<ol>
<li>
<p>The client initiates an authentication request to the API gateway, usually carrying the end user’s username and password in the request;</p>
</li>
<li>
<p>The gateway forwards the request directly to the backend service;</p>
</li>
<li>
<p>The backend service reads the authentication information (such as the username and password) in the request for verification. After the verification is passed, it uses the private key to generate a standard token and returns it to the gateway;</p>
</li>
<li>
<p>The gateway returns the response with the token to the client, and the client needs to cache this token locally;</p>
</li>
<li>
<p>The client sends a business request to the API gateway, carrying the token in the request;</p>
</li>
<li>
<p>The gateway uses the public key set by the user to verify the token in the request. After the verification is passed, the request is passed through to the backend service;</p>
</li>
<li>
<p>The backend service processes the business and responds;</p>
</li>
<li>
<p>The gateway returns the business response to the client.</p>
</li>
</ol>
<p>In this entire process, the gateway uses the token authentication mechanism to realize the ability of users to use their own user system to authorize their API. Next, we will introduce the structured token JSON Web Token (JWT) used by the gateway to implement token authentication.</p>
<h4 id="13-jwt">1.3 JWT</h4>
<h5 id="131-introduction">1.3.1 Introduction</h5>
<p>JSON Web Token (JWT) is an open standard RFC7519 based on JSON for executing a type of claim to pass between network applications. JWT can generally be used as an independent identity verification token, which can contain user identification, user roles, and permissions information, making it easier to obtain resources from the resource server, and can also add some other necessary declarative information for other business logic, especially suitable for the login scenario of distributed sites.</p>
<h5 id="132-composition-of-jwt">1.3.2 Composition of JWT</h5>
<p><code dir="auto">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWV9.TJVA95OrM7E2cBab30RMHrHDcEfxjoYZgeFONFh7HgQ</code></p>
<p>As shown in the example above, JWT is a string consisting of three parts:</p>
<ul>
<li>Header</li>
<li>Payload</li>
<li>Signature</li>
</ul>
<p><strong>Header</strong></p>
<p>The header of the JWT carries two pieces of information:</p>
<ul>
<li>The type of the token, which is JWT</li>
<li>The algorithm used for encryption</li>
</ul>
<p>The gateway supports the following encryption algorithms:</p>
<div class="expressive-code"><link rel="stylesheet" href="/_astro/ec.1vui4.css"><script type="module" src="/_astro/ec.dy9ns.js"></script><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#e1e4e8">ES256, ES384, ES512,</span></div></div><div class="ec-line"><div class="code"><span style="--0:#e1e4e8">HS256, HS384, HS512,</span></div></div><div class="ec-line"><div class="code"><span style="--0:#e1e4e8">RS256, RS384, RS512,</span></div></div><div class="ec-line"><div class="code"><span style="--0:#e1e4e8">PS256, PS384, PS512,</span></div></div><div class="ec-line"><div class="code"><span style="--0:#e1e4e8">EdDSA</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="ES256, ES384, ES512,HS256, HS384, HS512,RS256, RS384, RS512,PS256, PS384, PS512,EdDSA"><div></div></button></div></figure></div>
<p>The complete header looks like the following JSON:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#E1E4E8">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#9ECBFF">'typ'</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">'JWT'</span><span style="--0:#E1E4E8">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#9ECBFF">'alg'</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">'HS256'</span></div></div><div class="ec-line"><div class="code"><span style="--0:#E1E4E8">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="{  &#x27;typ&#x27;: &#x27;JWT&#x27;,  &#x27;alg&#x27;: &#x27;HS256&#x27;}"><div></div></button></div></figure></div>
<p>The header is then Base64-encoded (this encoding can be symmetrically decoded), forming the first part:</p>
<p><code dir="auto">eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9</code></p>
<p><strong>Payload</strong></p>
<p>The payload is where the actual information is stored. The details are defined below:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#e1e4e8">iss: The issuer of the token. This indicates who created the token and is a string value.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#e1e4e8">sub: The subject identifier. This is the unique identifier for the end user provided by the issuer, and is no longer than 255 ASCII characters, and is case-sensitive within the issuer's scope.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#e1e4e8">aud: The audience(s) of the token, which is an array of case-sensitive strings.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#e1e4e8">exp: The expiration time of the token, after which the token will be invalidated, is an integer declaration representing the Unix timestamp in seconds.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#e1e4e8">iat: The issuance time of the token, is an integer declaration representing the Unix timestamp in seconds.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#e1e4e8">jti: The unique identifier of the token, and the value is unique for every token created by the issuer. It is usually a cryptographically random value to prevent conflicts. This component adds a random entropy that an attacker cannot obtain to the structured token, making it more difficult for the token to be guessed or replayed.</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="iss: The issuer of the token. This indicates who created the token and is a string value.sub: The subject identifier. This is the unique identifier for the end user provided by the issuer, and is no longer than 255 ASCII characters, and is case-sensitive within the issuer&#x27;s scope.aud: The audience(s) of the token, which is an array of case-sensitive strings.exp: The expiration time of the token, after which the token will be invalidated, is an integer declaration representing the Unix timestamp in seconds.iat: The issuance time of the token, is an integer declaration representing the Unix timestamp in seconds.jti: The unique identifier of the token, and the value is unique for every token created by the issuer. It is usually a cryptographically random value to prevent conflicts. This component adds a random entropy that an attacker cannot obtain to the structured token, making it more difficult for the token to be guessed or replayed."><div></div></button></div></figure></div>
<p>Custom fields for a user feature can also be added, such as the example below adding a “name” field for the user’s nickname:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#E1E4E8">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#9ECBFF">"sub"</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">"1234567890"</span><span style="--0:#E1E4E8">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#9ECBFF">"name"</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">"John Doe"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#E1E4E8">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="{  &#x22;sub&#x22;: &#x22;1234567890&#x22;,  &#x22;name&#x22;: &#x22;John Doe&#x22;}"><div></div></button></div></figure></div>
<p>The payload is then Base64-encoded, forming the second part of the JWT:</p>
<p><code dir="auto">JTdCJTBBJTIwJTIwJTIyc3ViJTIyJTNBJTIwJTIyMTIzNDU2Nzg5MCUyMiUyQyUwQSUyMCUyMCUyMm5hbWUlMjIlM0ElMjAlMjJKb2huJTIwRG9lJTIyJTBBJTdE</code></p>
<p><strong>Signature</strong></p>
<p>This part is a string that consists of the Base64-encoded header and Base64-encoded payload concatenated with a period, followed by the encryption of the resulting string using the algorithm specified in the header (where $secret represents the user’s private key).</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#F97583">var</span><span style="--0:#E1E4E8"> encodedString </span><span style="--0:#F97583">=</span><span style="--0:#E1E4E8"> </span><span style="--0:#B392F0">base64UrlEncode</span><span style="--0:#E1E4E8">(header) </span><span style="--0:#F97583">+</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">'.'</span><span style="--0:#E1E4E8"> </span><span style="--0:#F97583">+</span><span style="--0:#E1E4E8"> </span><span style="--0:#B392F0">base64UrlEncode</span><span style="--0:#E1E4E8">(payload);</span></div></div><div class="ec-line"><div class="code"><span style="--0:#F97583">var</span><span style="--0:#E1E4E8"> signature </span><span style="--0:#F97583">=</span><span style="--0:#E1E4E8"> </span><span style="--0:#B392F0">HMACSHA256</span><span style="--0:#E1E4E8">(encodedString, </span><span style="--0:#9ECBFF">'$secret'</span><span style="--0:#E1E4E8">);</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="var encodedString = base64UrlEncode(header) + &#x27;.&#x27; + base64UrlEncode(payload);var signature = HMACSHA256(encodedString, &#x27;$secret&#x27;);"><div></div></button></div></figure></div>
<p>These three parts are then concatenated using periods to form the complete JWT string as shown in the example at the beginning of this section.</p>
<h5 id="133-time-validity">1.3.3 Time validity</h5>
<p>The gateway will verify the exp field in the token. Once this field has expired, the gateway will consider the token invalid and reject the request directly. The expiration time value must be set.</p>
<h5 id="134-several-characteristics-of-jwt">1.3.4 Several Characteristics of JWT</h5>
<ol>
<li>By default, JWT is not encrypted and cannot write secret data into JWT.</li>
<li>JWT can not only be used for authentication but also for exchanging information. Using JWT effectively can reduce the number of times servers query the database.</li>
<li>The biggest drawback of JWT is that the server cannot invalidate a token during use, or change the token’s permission, because the server does not keep the session state. That is, once JWT is issued, it will always be valid before it expires, unless the server deploys additional logic.</li>
<li>JWT contains authentication information itself. Once leaked, anyone can obtain all permissions of the token. To reduce theft, the expiration time of JWT should be set relatively short. For some more important permissions, users should be authenticated again when using them.</li>
<li>To reduce theft, JWT should not be transmitted in plaintext using the HTTP protocol, and the HTTPS protocol should be used for transmission.</li>
</ol>
<h3 id="2-how-to-apply-the-jwt-plugin-to-protect-the-api-of-the-user-system">2. How to apply the JWT plugin to protect the API of the user system</h3>
<h4 id="21-generate-a-pair-of-jwk-json-web-key">2.1 Generate a pair of JWK (JSON Web Key)</h4>
<p><strong>Method 1: Generate online</strong></p>
<p>Users can generate the private and public keys used for token generation and verification on this website <a href="https://mkjwk.org" referrerpolicy="unsafe-url" rel="nofollow" target="_blank">https://mkjwk.org</a>. The private key is used for the authorization service to issue JWT, and the public key is configured into the JWT plugin for the gateway to verify the signature of the request. Note that the JWKs format configuration used by the gateway requires the public key in the figure below to be placed in the keys structure, such as: <code dir="auto">{"keys":[{"kty":"RSA","e":"AQAB",...}]}</code></p>
<p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2336348951/p135823.png" alt="" referrerpolicy="no-referrer"></p>
<p><strong>Method 2: Generate locally</strong></p>
<p>This article uses a Java example to illustrate, and users of other languages can also find relevant tools to generate key pairs. Create a new Maven project and add the following dependencies:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#E1E4E8">&#x3C;</span><span style="--0:#85E89D">dependency</span><span style="--0:#E1E4E8">></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">     </span></span><span style="--0:#E1E4E8">&#x3C;</span><span style="--0:#85E89D">groupId</span><span style="--0:#E1E4E8">>org.bitbucket.b_c&#x3C;/</span><span style="--0:#85E89D">groupId</span><span style="--0:#E1E4E8">></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">     </span></span><span style="--0:#E1E4E8">&#x3C;</span><span style="--0:#85E89D">artifactId</span><span style="--0:#E1E4E8">>jose4j&#x3C;/</span><span style="--0:#85E89D">artifactId</span><span style="--0:#E1E4E8">></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">     </span></span><span style="--0:#E1E4E8">&#x3C;</span><span style="--0:#85E89D">version</span><span style="--0:#E1E4E8">>0.7.0&#x3C;/</span><span style="--0:#85E89D">version</span><span style="--0:#E1E4E8">></span></div></div><div class="ec-line"><div class="code"><span style="--0:#E1E4E8">&#x3C;/</span><span style="--0:#85E89D">dependency</span><span style="--0:#E1E4E8">></span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="<dependency>     <groupId>org.bitbucket.b_c</groupId>     <artifactId>jose4j</artifactId>     <version>0.7.0</version></dependency>"><div></div></button></div></figure></div>
<p>Use the following code to generate a pair of RSA keys:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#E1E4E8">RsaJsonWebKey rsaJsonWebKey </span><span style="--0:#F97583">=</span><span style="--0:#E1E4E8"> RsaJwkGenerator.</span><span style="--0:#B392F0">generateJwk</span><span style="--0:#E1E4E8">(</span><span style="--0:#79B8FF">2048</span><span style="--0:#E1E4E8">);</span></div></div><div class="ec-line"><div class="code"><span style="--0:#F97583">final</span><span style="--0:#E1E4E8"> String publicKeyString </span><span style="--0:#F97583">=</span><span style="--0:#E1E4E8"> rsaJsonWebKey.</span><span style="--0:#B392F0">toJson</span><span style="--0:#E1E4E8">(JsonWebKey.OutputControlLevel.PUBLIC_ONLY);</span></div></div><div class="ec-line"><div class="code"><span style="--0:#F97583">final</span><span style="--0:#E1E4E8"> String privateKeyString </span><span style="--0:#F97583">=</span><span style="--0:#E1E4E8"> rsaJsonWebKey.</span><span style="--0:#B392F0">toJson</span><span style="--0:#E1E4E8">(JsonWebKey.OutputControlLevel.INCLUDE_PRIVATE);</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="RsaJsonWebKey rsaJsonWebKey = RsaJwkGenerator.generateJwk(2048);final String publicKeyString = rsaJsonWebKey.toJson(JsonWebKey.OutputControlLevel.PUBLIC_ONLY);final String privateKeyString = rsaJsonWebKey.toJson(JsonWebKey.OutputControlLevel.INCLUDE_PRIVATE);"><div></div></button></div></figure></div>
<h4 id="22-implement-the-token-issuance-authentication-service-using-the-private-key-in-jwk">2.2 Implement the token issuance authentication service using the private key in JWK</h4>
<p>The Keypair JSON string generated online in Section 2.1 (the first of the three boxes) or privateKeyString JSON string generated locally needs to be used as the private key to issue tokens for trusted users to access protected APIs. The specific implementation can refer to the following example. The form of issuing tokens to customers is determined by the user according to the specific business scenario. The function of issuing tokens can be deployed in the production environment and configured as a normal API for visitors to obtain through username and password, or tokens can be generated directly in the local environment and copied to designated users for use.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#F97583">import</span><span style="--0:#E1E4E8"> java.security.PrivateKey;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#F97583">import</span><span style="--0:#E1E4E8"> org.jose4j.json.JsonUtil;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#F97583">import</span><span style="--0:#E1E4E8"> org.jose4j.jwk.RsaJsonWebKey;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#F97583">import</span><span style="--0:#E1E4E8"> org.jose4j.jwk.RsaJwkGenerator;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#F97583">import</span><span style="--0:#E1E4E8"> org.jose4j.jws.AlgorithmIdentifiers;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#F97583">import</span><span style="--0:#E1E4E8"> org.jose4j.jws.JsonWebSignature;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#F97583">import</span><span style="--0:#E1E4E8"> org.jose4j.jwt.JwtClaims;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#F97583">import</span><span style="--0:#E1E4E8"> org.jose4j.jwt.NumericDate;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#F97583">import</span><span style="--0:#E1E4E8"> org.jose4j.lang.JoseException;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#F97583">public</span><span style="--0:#E1E4E8"> </span><span style="--0:#F97583">class</span><span style="--0:#E1E4E8"> </span><span style="--0:#B392F0">GenerateJwtDemo</span><span style="--0:#E1E4E8"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#F97583">public</span><span style="--0:#E1E4E8"> </span><span style="--0:#F97583">static</span><span style="--0:#E1E4E8"> </span><span style="--0:#F97583">void</span><span style="--0:#E1E4E8"> </span><span style="--0:#B392F0">main</span><span style="--0:#E1E4E8">(</span><span style="--0:#F97583">String</span><span style="--0:#E1E4E8">[] </span><span style="--0:#FFAB70">args</span><span style="--0:#E1E4E8">) </span><span style="--0:#F97583">throws</span><span style="--0:#E1E4E8"> JoseException  {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">        </span></span><span style="--0:#E1E4E8">String keyId </span><span style="--0:#F97583">=</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">"uniq_key"</span><span style="--0:#E1E4E8">;</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#99A0A6">//Use the Keypair generated in section 2.1 of this article</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">        </span></span><span style="--0:#E1E4E8">String privateKeyJson </span><span style="--0:#F97583">=</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">"{</span><span style="--0:#79B8FF">\n</span><span style="--0:#9ECBFF">"</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#F97583">+</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">"  </span><span style="--0:#79B8FF">\"</span><span style="--0:#9ECBFF">kty</span><span style="--0:#79B8FF">\"</span><span style="--0:#9ECBFF">: </span><span style="--0:#79B8FF">\"</span><span style="--0:#9ECBFF">RSA</span><span style="--0:#79B8FF">\"</span><span style="--0:#9ECBFF">,</span><span style="--0:#79B8FF">\n</span><span style="--0:#9ECBFF">"</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#F97583">+</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">"  </span><span style="--0:#79B8FF">\"</span><span style="--0:#9ECBFF">d</span><span style="--0:#79B8FF">\"</span><span style="--0:#9ECBFF">: "</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#F97583">+</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#9ECBFF">"</span><span style="--0:#79B8FF">\"</span><span style="--0:#9ECBFF">O9MJSOgcjjiVMNJ4jmBAh0mRHF_TlaVva70Imghtlgwxl8BLfcf1S8ueN1PD7xV6Cnq8YenSKsfiNOhC6yZ_fjW1syn5raWfj68eR7cjHWjLOvKjwVY33GBPNOvspNhVAFzeqfWneRTBbga53Agb6jjN0SUcZdJgnelzz5JNdOGaLzhacjH6YPJKpbuzCQYPkWtoZHDqWTzCSb4mJ3n0NRTsWy7Pm8LwG_Fd3pACl7JIY38IanPQDLoighFfo-Lriv5z3IdlhwbPnx0tk9sBwQBTRdZ8JkqqYkxUiB06phwr7mAnKEpQJ6HvhZBQ1cCnYZ_nIlrX9-I7qomrlE1UoQ</span><span style="--0:#79B8FF">\"</span><span style="--0:#9ECBFF">,</span><span style="--0:#79B8FF">\n</span><span style="--0:#9ECBFF">"</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#F97583">+</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">"  </span><span style="--0:#79B8FF">\"</span><span style="--0:#9ECBFF">e</span><span style="--0:#79B8FF">\"</span><span style="--0:#9ECBFF">: </span><span style="--0:#79B8FF">\"</span><span style="--0:#9ECBFF">AQAB</span><span style="--0:#79B8FF">\"</span><span style="--0:#9ECBFF">,</span><span style="--0:#79B8FF">\n</span><span style="--0:#9ECBFF">"</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#F97583">+</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">"  </span><span style="--0:#79B8FF">\"</span><span style="--0:#9ECBFF">alg</span><span style="--0:#79B8FF">\"</span><span style="--0:#9ECBFF">: </span><span style="--0:#79B8FF">\"</span><span style="--0:#9ECBFF">RS256</span><span style="--0:#79B8FF">\"</span><span style="--0:#9ECBFF">,</span><span style="--0:#79B8FF">\n</span><span style="--0:#9ECBFF">"</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#F97583">+</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">"  </span><span style="--0:#79B8FF">\"</span><span style="--0:#9ECBFF">n</span><span style="--0:#79B8FF">\"</span><span style="--0:#9ECBFF">: </span><span style="--0:#79B8FF">\"</span><span style="--0:#9ECBFF">vCuB8MgwPZfziMSytEbBoOEwxsG7XI3MaVMoocziP4SjzU4IuWuE_DodbOHQwb_thUru57_Efe"</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#F97583">+</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#9ECBFF">"--sfATHEa0Odv5ny3QbByqsvjyeHk6ZE4mSAV9BsHYa6GWAgEZtnDceeeDc0y76utXK2XHhC1Pysi2KG8KAzqDa099Yh7s31AyoueoMnrYTmWfEyDsQL_OAIiwgXakkS5U8QyXmWicCwXntDzkIMh8MjfPskesyli0XQD1AmCXVV3h2Opm1Amx0ggSOOiINUR5YRD6mKo49_cN-nrJWjtwSouqDdxHYP-4c7epuTcdS6kQHiQERBd1ejdpAxV4c0t0FHF7MOy9kw</span><span style="--0:#79B8FF">\"\n</span><span style="--0:#9ECBFF">"</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#F97583">+</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">"}"</span><span style="--0:#E1E4E8">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">        </span></span><span style="--0:#E1E4E8">JwtClaims claims </span><span style="--0:#F97583">=</span><span style="--0:#E1E4E8"> </span><span style="--0:#F97583">new</span><span style="--0:#E1E4E8"> </span><span style="--0:#B392F0">JwtClaims</span><span style="--0:#E1E4E8">();</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">        </span></span><span style="--0:#E1E4E8">claims.</span><span style="--0:#B392F0">setGeneratedJwtId</span><span style="--0:#E1E4E8">();</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">        </span></span><span style="--0:#E1E4E8">claims.</span><span style="--0:#B392F0">setIssuedAtToNow</span><span style="--0:#E1E4E8">();</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#99A0A6">//Expiration time must be set</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">        </span></span><span style="--0:#E1E4E8">NumericDate date </span><span style="--0:#F97583">=</span><span style="--0:#E1E4E8"> NumericDate.</span><span style="--0:#B392F0">now</span><span style="--0:#E1E4E8">();</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">        </span></span><span style="--0:#E1E4E8">date.</span><span style="--0:#B392F0">addSeconds</span><span style="--0:#E1E4E8">(</span><span style="--0:#79B8FF">120</span><span style="--0:#F97583">*</span><span style="--0:#79B8FF">60</span><span style="--0:#E1E4E8">);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">        </span></span><span style="--0:#E1E4E8">claims.</span><span style="--0:#B392F0">setExpirationTime</span><span style="--0:#E1E4E8">(date);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">        </span></span><span style="--0:#E1E4E8">claims.</span><span style="--0:#B392F0">setNotBeforeMinutesInThePast</span><span style="--0:#E1E4E8">(</span><span style="--0:#79B8FF">1</span><span style="--0:#E1E4E8">);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">        </span></span><span style="--0:#E1E4E8">claims.</span><span style="--0:#B392F0">setSubject</span><span style="--0:#E1E4E8">(</span><span style="--0:#9ECBFF">"YOUR_SUBJECT"</span><span style="--0:#E1E4E8">);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">        </span></span><span style="--0:#E1E4E8">claims.</span><span style="--0:#B392F0">setAudience</span><span style="--0:#E1E4E8">(</span><span style="--0:#9ECBFF">"YOUR_AUDIENCE"</span><span style="--0:#E1E4E8">);</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#99A0A6">//Add custom parameters, use String type for all values</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">        </span></span><span style="--0:#E1E4E8">claims.</span><span style="--0:#B392F0">setClaim</span><span style="--0:#E1E4E8">(</span><span style="--0:#9ECBFF">"userId"</span><span style="--0:#E1E4E8">, </span><span style="--0:#9ECBFF">"1213234"</span><span style="--0:#E1E4E8">);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">        </span></span><span style="--0:#E1E4E8">claims.</span><span style="--0:#B392F0">setClaim</span><span style="--0:#E1E4E8">(</span><span style="--0:#9ECBFF">"email"</span><span style="--0:#E1E4E8">, </span><span style="--0:#9ECBFF">"userEmail@youapp.com"</span><span style="--0:#E1E4E8">);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">        </span></span><span style="--0:#E1E4E8">JsonWebSignature jws </span><span style="--0:#F97583">=</span><span style="--0:#E1E4E8"> </span><span style="--0:#F97583">new</span><span style="--0:#E1E4E8"> </span><span style="--0:#B392F0">JsonWebSignature</span><span style="--0:#E1E4E8">();</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">        </span></span><span style="--0:#E1E4E8">jws.</span><span style="--0:#B392F0">setAlgorithmHeaderValue</span><span style="--0:#E1E4E8">(AlgorithmIdentifiers.RSA_USING_SHA256);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">        </span></span><span style="--0:#E1E4E8">jws.</span><span style="--0:#B392F0">setKeyIdHeaderValue</span><span style="--0:#E1E4E8">(keyId);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">        </span></span><span style="--0:#E1E4E8">jws.</span><span style="--0:#B392F0">setPayload</span><span style="--0:#E1E4E8">(claims.</span><span style="--0:#B392F0">toJson</span><span style="--0:#E1E4E8">());</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">        </span></span><span style="--0:#E1E4E8">PrivateKey privateKey </span><span style="--0:#F97583">=</span><span style="--0:#E1E4E8"> </span><span style="--0:#F97583">new</span><span style="--0:#E1E4E8"> </span><span style="--0:#B392F0">RsaJsonWebKey</span><span style="--0:#E1E4E8">(JsonUtil.</span><span style="--0:#B392F0">parseJson</span><span style="--0:#E1E4E8">(privateKeyJson)).</span><span style="--0:#B392F0">getPrivateKey</span><span style="--0:#E1E4E8">();</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">        </span></span><span style="--0:#E1E4E8">jws.</span><span style="--0:#B392F0">setKey</span><span style="--0:#E1E4E8">(privateKey);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">        </span></span><span style="--0:#E1E4E8">String jwtResult </span><span style="--0:#F97583">=</span><span style="--0:#E1E4E8"> jws.</span><span style="--0:#B392F0">getCompactSerialization</span><span style="--0:#E1E4E8">();</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">        </span></span><span style="--0:#E1E4E8">System.out.</span><span style="--0:#B392F0">println</span><span style="--0:#E1E4E8">(</span><span style="--0:#9ECBFF">"Generate Json Web token , result is "</span><span style="--0:#E1E4E8"> </span><span style="--0:#F97583">+</span><span style="--0:#E1E4E8"> jwtResult);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">    </span></span><span style="--0:#E1E4E8">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#E1E4E8">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="import java.security.PrivateKey;import org.jose4j.json.JsonUtil;import org.jose4j.jwk.RsaJsonWebKey;import org.jose4j.jwk.RsaJwkGenerator;import org.jose4j.jws.AlgorithmIdentifiers;import org.jose4j.jws.JsonWebSignature;import org.jose4j.jwt.JwtClaims;import org.jose4j.jwt.NumericDate;import org.jose4j.lang.JoseException;public class GenerateJwtDemo {    public static void main(String[] args) throws JoseException  {        String keyId = &#x22;uniq_key&#x22;;          //Use the Keypair generated in section 2.1 of this article        String privateKeyJson = &#x22;{\n&#x22;            + &#x22;  \&#x22;kty\&#x22;: \&#x22;RSA\&#x22;,\n&#x22;            + &#x22;  \&#x22;d\&#x22;: &#x22;            +            &#x22;\&#x22;O9MJSOgcjjiVMNJ4jmBAh0mRHF_TlaVva70Imghtlgwxl8BLfcf1S8ueN1PD7xV6Cnq8YenSKsfiNOhC6yZ_fjW1syn5raWfj68eR7cjHWjLOvKjwVY33GBPNOvspNhVAFzeqfWneRTBbga53Agb6jjN0SUcZdJgnelzz5JNdOGaLzhacjH6YPJKpbuzCQYPkWtoZHDqWTzCSb4mJ3n0NRTsWy7Pm8LwG_Fd3pACl7JIY38IanPQDLoighFfo-Lriv5z3IdlhwbPnx0tk9sBwQBTRdZ8JkqqYkxUiB06phwr7mAnKEpQJ6HvhZBQ1cCnYZ_nIlrX9-I7qomrlE1UoQ\&#x22;,\n&#x22;            + &#x22;  \&#x22;e\&#x22;: \&#x22;AQAB\&#x22;,\n&#x22;            + &#x22;  \&#x22;alg\&#x22;: \&#x22;RS256\&#x22;,\n&#x22;            + &#x22;  \&#x22;n\&#x22;: \&#x22;vCuB8MgwPZfziMSytEbBoOEwxsG7XI3MaVMoocziP4SjzU4IuWuE_DodbOHQwb_thUru57_Efe&#x22;            +            &#x22;--sfATHEa0Odv5ny3QbByqsvjyeHk6ZE4mSAV9BsHYa6GWAgEZtnDceeeDc0y76utXK2XHhC1Pysi2KG8KAzqDa099Yh7s31AyoueoMnrYTmWfEyDsQL_OAIiwgXakkS5U8QyXmWicCwXntDzkIMh8MjfPskesyli0XQD1AmCXVV3h2Opm1Amx0ggSOOiINUR5YRD6mKo49_cN-nrJWjtwSouqDdxHYP-4c7epuTcdS6kQHiQERBd1ejdpAxV4c0t0FHF7MOy9kw\&#x22;\n&#x22;            + &#x22;}&#x22;;        JwtClaims claims = new JwtClaims();        claims.setGeneratedJwtId();        claims.setIssuedAtToNow();        //Expiration time must be set        NumericDate date = NumericDate.now();        date.addSeconds(120*60);        claims.setExpirationTime(date);        claims.setNotBeforeMinutesInThePast(1);        claims.setSubject(&#x22;YOUR_SUBJECT&#x22;);        claims.setAudience(&#x22;YOUR_AUDIENCE&#x22;);        //Add custom parameters, use String type for all values        claims.setClaim(&#x22;userId&#x22;, &#x22;1213234&#x22;);        claims.setClaim(&#x22;email&#x22;, &#x22;userEmail@youapp.com&#x22;);        JsonWebSignature jws = new JsonWebSignature();        jws.setAlgorithmHeaderValue(AlgorithmIdentifiers.RSA_USING_SHA256);        jws.setKeyIdHeaderValue(keyId);        jws.setPayload(claims.toJson());        PrivateKey privateKey = new RsaJsonWebKey(JsonUtil.parseJson(privateKeyJson)).getPrivateKey();        jws.setKey(privateKey);        String jwtResult = jws.getCompactSerialization();        System.out.println(&#x22;Generate Json Web token , result is &#x22; + jwtResult);    }}"><div></div></button></div></figure></div>
<h2 id="plugin-configuration-guide">Plugin Configuration Guide</h2>
<h3 id="configuration-fields">Configuration Fields</h3>


























<table><thead><tr><th>Name</th><th>Data Type</th><th>Required</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code dir="auto">consumers</code></td><td>array of object</td><td>Yes</td><td>-</td><td>Configures callers of the service for authenticating requests</td></tr><tr><td><code dir="auto">_rules_</code></td><td>array of object</td><td>Optional</td><td>-</td><td>Configures access control lists for specific routes or domains for authorizing requests</td></tr></tbody></table>
<p>The configuration field descriptions for each item in consumers are as follows:</p>











































































<table><thead><tr><th>Name</th><th>Data Type</th><th>Required</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code dir="auto">name</code></td><td>string</td><td>Yes</td><td>-</td><td>Configures the name of this consumer</td></tr><tr><td><code dir="auto">jwks</code></td><td>string</td><td>Yes</td><td>-</td><td>Specifies a JSON Web Key Set, as defined in <a href="https://www.rfc-editor.org/rfc/rfc7517" referrerpolicy="unsafe-url" rel="nofollow" target="_blank">https://www.rfc-editor.org/rfc/rfc7517</a>, consisting of public keys (or symmetric keys) used to verify the signature of JWT</td></tr><tr><td><code dir="auto">issuer</code></td><td>string</td><td>Yes</td><td>-</td><td>The issuer of the JWT, which should be consistent with the iss field in the payload</td></tr><tr><td><code dir="auto">claims_to_headers</code></td><td>array of object</td><td>Optional</td><td>-</td><td>Extracts the specified fields from the JWT’s payload and sets them to the specified request headers for forwarding to the backend</td></tr><tr><td><code dir="auto">from_headers</code></td><td>array of object</td><td>Optional</td><td>{“name”:“Authorization”,“value_prefix”:“Bearer “}</td><td>Extracts the JWT from the specified request headers</td></tr><tr><td><code dir="auto">from_params</code></td><td>array of string</td><td>Optional</td><td>access_token</td><td>Extracts the JWT from the specified URL parameters</td></tr><tr><td><code dir="auto">from_cookies</code></td><td>array of string</td><td>Optional</td><td>-</td><td>Extracts the JWT from the specified cookie(s)</td></tr><tr><td><code dir="auto">clock_skew_seconds</code></td><td>number</td><td>Optional</td><td>60</td><td>The amount of clock skew, in seconds, that is allowed when verifying the exp and iat fields of the JWT</td></tr><tr><td><code dir="auto">keep_token</code></td><td>bool</td><td>Optional</td><td>true</td><td>Whether to keep the JWT when forwarding it to the backend</td></tr></tbody></table>
<p><strong>Note:</strong></p>
<ul>
<li>The default value is used only if neither <code dir="auto">from_headers</code>, <code dir="auto">from_params</code>, nor <code dir="auto">from_cookies</code> are configured.</li>
</ul>
<p>The configuration field descriptions for each item in <code dir="auto">from_headers</code> are as follows:</p>


























<table><thead><tr><th>Name</th><th>Data Type</th><th>Required</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code dir="auto">name</code></td><td>string</td><td>Yes</td><td>-</td><td>Specifies the request header to extract the JWT from</td></tr><tr><td><code dir="auto">value_prefix</code></td><td>string</td><td>Yes</td><td>-</td><td>Removes the specified prefix from the request header’s value, leaving the rest as the JWT</td></tr></tbody></table>
<p>The configuration field descriptions for each item in <code dir="auto">claims_to_headers</code> are as follows:</p>

































<table><thead><tr><th>Name</th><th>Data Type</th><th>Required</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code dir="auto">claim</code></td><td>string</td><td>Yes</td><td>-</td><td>The name of the field in the JWT payload, which must be a string or unsigned integer</td></tr><tr><td><code dir="auto">header</code></td><td>string</td><td>Yes</td><td>-</td><td>Sets the value of the specified request header to the value of the specified field in the payload, for forwarding to the backend</td></tr><tr><td><code dir="auto">override</code></td><td>bool</td><td>Optional</td><td>true</td><td>If true, overrides an existing header with the same name; if false, appends the header to the existing headers</td></tr></tbody></table>
<p>The configuration field descriptions for each item in <code dir="auto">_rules_</code> are as follows:</p>

































<table><thead><tr><th>Name</th><th>Data Type</th><th>Required</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code dir="auto">_match_route_</code></td><td>array of string</td><td>Optional, select either <code dir="auto">_match_route_</code> or <code dir="auto">_match_domain_</code></td><td>-</td><td>Configures the route names to match</td></tr><tr><td><code dir="auto">_match_domain_</code></td><td>array of string</td><td>Optional, select either <code dir="auto">_match_route_</code> or <code dir="auto">_match_domain_</code></td><td>-</td><td>Configures the domains to match</td></tr><tr><td><code dir="auto">allow</code></td><td>array of string</td><td>Required</td><td>-</td><td>Configures the consumer names allowed to access the matched requests</td></tr></tbody></table>
<p><strong>Note:</strong></p>
<ul>
<li>If the <code dir="auto">_rules_</code> field is not configured, authentication and authorization are enabled for all routes of the current gateway instance by default;</li>
<li>For authenticated and authorized requests, a <code dir="auto">X-Mse-Consumer</code> field is added to the request header to identify the caller’s name.</li>
</ul>
<h3 id="configuration-example">Configuration Example</h3>
<h4 id="enable-for-specific-routes-or-domains">Enable for Specific Routes or Domains</h4>
<p>The following configuration enables Jwt Auth authentication and authorization for specific routes or domains of the gateway. If a JWT can match multiple <code dir="auto">jwks</code>, the first matching <code dir="auto">consumer</code> is hit according to the configuration order.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#85E89D">consumers</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#E1E4E8">- </span><span style="--0:#85E89D">name</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">consumer1</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">issuer</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">abcd</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">jwks</span><span style="--0:#E1E4E8">: </span><span style="--0:#F97583">|</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">    </span></span><span style="--0:#9ECBFF">{</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">      </span></span><span style="--0:#9ECBFF">"keys": [</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">        </span></span><span style="--0:#9ECBFF">{</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">          </span></span><span style="--0:#9ECBFF">"kty": "oct",</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">          </span></span><span style="--0:#9ECBFF">"kid": "123",</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">          </span></span><span style="--0:#9ECBFF">"k": "hM0k3AbXBPpKOGg__Ql2Obcq7s60myWDpbHXzgKUQdYo7YCRp0gUqkCnbGSvZ2rGEl4YFkKqIqW7mTHdj-bcqXpNr-NOznEyMpVPOIlqG_NWVC3dydBgcsIZIdD-MR2AQceEaxriPA_VmiUCwfwL2Bhs6_i7eolXoY11EapLQtutz0BV6ZxQQ4dYUmct--7PLNb4BWJyQeWu0QfbIthnvhYllyl2dgeLTEJT58wzFz5HeNMNz8ohY5K0XaKAe5cepryqoXLhA-V-O1OjSG8lCNdKS09OY6O0fkyweKEtuDfien5tHHSsHXoAxYEHPFcSRL4bFPLZ0orTt1_4zpyfew",</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">          </span></span><span style="--0:#9ECBFF">"alg": "HS256"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">        </span></span><span style="--0:#9ECBFF">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">      </span></span><span style="--0:#9ECBFF">]</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">    </span></span><span style="--0:#9ECBFF">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#E1E4E8">- </span><span style="--0:#85E89D">name</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">consumer2</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">issuer</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">abc</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">jwks</span><span style="--0:#E1E4E8">: </span><span style="--0:#F97583">|</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">    </span></span><span style="--0:#9ECBFF">{</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">      </span></span><span style="--0:#9ECBFF">"keys": [</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">        </span></span><span style="--0:#9ECBFF">{</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">          </span></span><span style="--0:#9ECBFF">"kty": "RSA",</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">          </span></span><span style="--0:#9ECBFF">"e": "AQAB",</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">          </span></span><span style="--0:#9ECBFF">"use": "sig",</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">          </span></span><span style="--0:#9ECBFF">"kid": "123",</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">          </span></span><span style="--0:#9ECBFF">"alg": "RS256",</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">          </span></span><span style="--0:#9ECBFF">"n": "i0B67f1jggT9QJlZ_8QL9QQ56LfurrqDhpuu8BxtVcfxrYmaXaCtqTn7OfCuca7cGHdrJIjq99rz890NmYFZuvhaZ-LMt2iyiSb9LZJAeJmHf7ecguXS_-4x3hvbsrgUDi9tlg7xxbqGYcrco3anmalAFxsbswtu2PAXLtTnUo6aYwZsWA6ksq4FL3-anPNL5oZUgIp3HGyhhLTLdlQcC83jzxbguOim-0OEz-N4fniTYRivK7MlibHKrJfO3xa_6whBS07HW4Ydc37ZN3Rx9Ov3ZyV0idFblU519nUdqp_inXj1eEpynlxH60Ys_aTU2POGZh_25KXGdF_ZC_MSRw"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">        </span></span><span style="--0:#9ECBFF">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">      </span></span><span style="--0:#9ECBFF">]</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">    </span></span><span style="--0:#9ECBFF">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#99A0A6"># Use the _rules_ field for fine-grained rule configuration</span></div></div><div class="ec-line"><div class="code"><span style="--0:#85E89D">_rules_</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#99A0A6"># Rule 1: Effective when matched by route name</span></div></div><div class="ec-line"><div class="code"><span style="--0:#E1E4E8">- </span><span style="--0:#85E89D">_match_route_</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">  </span></span><span style="--0:#E1E4E8">- </span><span style="--0:#9ECBFF">route-a</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">  </span></span><span style="--0:#E1E4E8">- </span><span style="--0:#9ECBFF">route-b</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">allow</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">  </span></span><span style="--0:#E1E4E8">- </span><span style="--0:#9ECBFF">consumer1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#99A0A6"># Rule 2: Effective when matched by domain name</span></div></div><div class="ec-line"><div class="code"><span style="--0:#E1E4E8">- </span><span style="--0:#85E89D">_match_domain_</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">  </span></span><span style="--0:#E1E4E8">- </span><span style="--0:#9ECBFF">"*.example.com"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">  </span></span><span style="--0:#E1E4E8">- </span><span style="--0:#9ECBFF">test.com</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">allow</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">  </span></span><span style="--0:#E1E4E8">- </span><span style="--0:#9ECBFF">consumer2</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="consumers:- name: consumer1  issuer: abcd  jwks: |    {      &#x22;keys&#x22;: [        {          &#x22;kty&#x22;: &#x22;oct&#x22;,          &#x22;kid&#x22;: &#x22;123&#x22;,          &#x22;k&#x22;: &#x22;hM0k3AbXBPpKOGg__Ql2Obcq7s60myWDpbHXzgKUQdYo7YCRp0gUqkCnbGSvZ2rGEl4YFkKqIqW7mTHdj-bcqXpNr-NOznEyMpVPOIlqG_NWVC3dydBgcsIZIdD-MR2AQceEaxriPA_VmiUCwfwL2Bhs6_i7eolXoY11EapLQtutz0BV6ZxQQ4dYUmct--7PLNb4BWJyQeWu0QfbIthnvhYllyl2dgeLTEJT58wzFz5HeNMNz8ohY5K0XaKAe5cepryqoXLhA-V-O1OjSG8lCNdKS09OY6O0fkyweKEtuDfien5tHHSsHXoAxYEHPFcSRL4bFPLZ0orTt1_4zpyfew&#x22;,          &#x22;alg&#x22;: &#x22;HS256&#x22;        }      ]    }- name: consumer2  issuer: abc  jwks: |    {      &#x22;keys&#x22;: [        {          &#x22;kty&#x22;: &#x22;RSA&#x22;,          &#x22;e&#x22;: &#x22;AQAB&#x22;,          &#x22;use&#x22;: &#x22;sig&#x22;,          &#x22;kid&#x22;: &#x22;123&#x22;,          &#x22;alg&#x22;: &#x22;RS256&#x22;,          &#x22;n&#x22;: &#x22;i0B67f1jggT9QJlZ_8QL9QQ56LfurrqDhpuu8BxtVcfxrYmaXaCtqTn7OfCuca7cGHdrJIjq99rz890NmYFZuvhaZ-LMt2iyiSb9LZJAeJmHf7ecguXS_-4x3hvbsrgUDi9tlg7xxbqGYcrco3anmalAFxsbswtu2PAXLtTnUo6aYwZsWA6ksq4FL3-anPNL5oZUgIp3HGyhhLTLdlQcC83jzxbguOim-0OEz-N4fniTYRivK7MlibHKrJfO3xa_6whBS07HW4Ydc37ZN3Rx9Ov3ZyV0idFblU519nUdqp_inXj1eEpynlxH60Ys_aTU2POGZh_25KXGdF_ZC_MSRw&#x22;        }      ]    }# Use the _rules_ field for fine-grained rule configuration_rules_:# Rule 1: Effective when matched by route name- _match_route_:  - route-a  - route-b  allow:  - consumer1# Rule 2: Effective when matched by domain name- _match_domain_:  - &#x22;*.example.com&#x22;  - test.com  allow:  - consumer2"><div></div></button></div></figure></div>
<p>In this example, the <code dir="auto">route-a</code> and <code dir="auto">route-b</code> specified in <code dir="auto">_match_route_</code> are the names of the routes filled in when creating the gateway route. When these two routes are matched, access will be allowed for the caller with the <code dir="auto">name</code> of <code dir="auto">consumer1</code>, and other callers will not be allowed to access.</p>
<p>The <code dir="auto">*.example.com</code> and <code dir="auto">test.com</code> specified in <code dir="auto">_match_domain_</code> are used to match the domain names of the requests. When a domain name match is found, access will be allowed for the caller with the <code dir="auto">name</code> of <code dir="auto">consumer2</code>, and other callers will not be allowed to access.</p>
<h5 id="according-to-this-configuration-the-following-requests-are-allowed">According to this configuration, the following requests are allowed:</h5>
<p>Assuming the following requests will match the route-a route:</p>
<p><strong>JWT is set in URL parameter</strong></p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#B392F0">curl</span><span style="--0:#E1E4E8">  </span><span style="--0:#9ECBFF">'http://xxx.hello.com/test?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjEyMyJ9.eyJpc3MiOiJhYmNkIiwic3ViIjoidGVzdCIsImlhdCI6MTY2NTY2MDUyNywiZXhwIjoxODY1NjczODE5fQ.-vBSV0bKeDwQcuS6eeSZN9dLTUnSnZVk8eVCXdooCQ4'</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="curl  &#x27;http://xxx.hello.com/test?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjEyMyJ9.eyJpc3MiOiJhYmNkIiwic3ViIjoidGVzdCIsImlhdCI6MTY2NTY2MDUyNywiZXhwIjoxODY1NjczODE5fQ.-vBSV0bKeDwQcuS6eeSZN9dLTUnSnZVk8eVCXdooCQ4&#x27;"><div></div></button></div></figure></div>
<p><strong>JWT is set in HTTP request header</strong></p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#B392F0">curl</span><span style="--0:#E1E4E8">  </span><span style="--0:#9ECBFF">http://xxx.hello.com/test</span><span style="--0:#E1E4E8"> </span><span style="--0:#79B8FF">-H</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjEyMyJ9.eyJpc3MiOiJhYmNkIiwic3ViIjoidGVzdCIsImlhdCI6MTY2NTY2MDUyNywiZXhwIjoxODY1NjczODE5fQ.-vBSV0bKeDwQcuS6eeSZN9dLTUnSnZVk8eVCXdooCQ4'</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="curl  http://xxx.hello.com/test -H &#x27;Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjEyMyJ9.eyJpc3MiOiJhYmNkIiwic3ViIjoidGVzdCIsImlhdCI6MTY2NTY2MDUyNywiZXhwIjoxODY1NjczODE5fQ.-vBSV0bKeDwQcuS6eeSZN9dLTUnSnZVk8eVCXdooCQ4&#x27;"><div></div></button></div></figure></div>
<p>After authentication and authorization, a <code dir="auto">X-Mse-Consumer</code> field will be added in the request header with a value of <code dir="auto">consumer1</code> in this example, to identify the name of the caller.</p>
<h5 id="the-following-requests-will-be-denied">The following requests will be denied:</h5>
<p><strong>Request without JWT provided, returns 401</strong></p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#B392F0">curl</span><span style="--0:#E1E4E8">  </span><span style="--0:#9ECBFF">http://xxx.hello.com/test</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="curl  http://xxx.hello.com/test"><div></div></button></div></figure></div>
<p><strong>The consumer matched by the provided JWT in the request does not have access, returns 403</strong></p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#99A0A6"># consumer1 is not in the allow list of *.example.com</span></div></div><div class="ec-line"><div class="code"><span style="--0:#B392F0">curl</span><span style="--0:#E1E4E8">  </span><span style="--0:#9ECBFF">'http://xxx.example.com/test'</span><span style="--0:#E1E4E8"> </span><span style="--0:#79B8FF">-H</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjEyMyJ9.eyJpc3MiOiJhYmNkIiwic3ViIjoidGVzdCIsImlhdCI6MTY2NTY2MDUyNywiZXhwIjoxODY1NjczODE5fQ.-vBSV0bKeDwQcuS6eeSZN9dLTUnSnZVk8eVCXdooCQ4'</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="curl  &#x27;http://xxx.example.com/test&#x27; -H &#x27;Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjEyMyJ9.eyJpc3MiOiJhYmNkIiwic3ViIjoidGVzdCIsImlhdCI6MTY2NTY2MDUyNywiZXhwIjoxODY1NjczODE5fQ.-vBSV0bKeDwQcuS6eeSZN9dLTUnSnZVk8eVCXdooCQ4&#x27;"><div></div></button></div></figure></div>
<h4 id="enabling-at-gateway-instance-level">Enabling at Gateway Instance Level</h4>
<p>The following configuration does not specify the <code dir="auto">_rules_</code> field, so JWT authentication will be enabled at the gateway instance level:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#85E89D">consumers</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#E1E4E8">- </span><span style="--0:#85E89D">name</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">consumer1</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">issuer</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">abcd</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">jwks</span><span style="--0:#E1E4E8">: </span><span style="--0:#F97583">|</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">    </span></span><span style="--0:#9ECBFF">{</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">      </span></span><span style="--0:#9ECBFF">"keys": [</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">        </span></span><span style="--0:#9ECBFF">{</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">          </span></span><span style="--0:#9ECBFF">"kty": "oct",</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">          </span></span><span style="--0:#9ECBFF">"kid": "123",</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">          </span></span><span style="--0:#9ECBFF">"k": "hM0k3AbXBPpKOGg__Ql2Obcq7s60myWDpbHXzgKUQdYo7YCRp0gUqkCnbGSvZ2rGEl4YFkKqIqW7mTHdj-bcqXpNr-NOznEyMpVPOIlqG_NWVC3dydBgcsIZIdD-MR2AQceEaxriPA_VmiUCwfwL2Bhs6_i7eolXoY11EapLQtutz0BV6ZxQQ4dYUmct--7PLNb4BWJyQeWu0QfbIthnvhYllyl2dgeLTEJT58wzFz5HeNMNz8ohY5K0XaKAe5cepryqoXLhA-V-O1OjSG8lCNdKS09OY6O0fkyweKEtuDfien5tHHSsHXoAxYEHPFcSRL4bFPLZ0orTt1_4zpyfew",</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">          </span></span><span style="--0:#9ECBFF">"alg": "HS256"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">        </span></span><span style="--0:#9ECBFF">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">      </span></span><span style="--0:#9ECBFF">]</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">    </span></span><span style="--0:#9ECBFF">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#E1E4E8">- </span><span style="--0:#85E89D">name</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">consumer2</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">issuer</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">abc</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">jwks</span><span style="--0:#E1E4E8">: </span><span style="--0:#F97583">|</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">    </span></span><span style="--0:#9ECBFF">{</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">      </span></span><span style="--0:#9ECBFF">"keys": [</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">        </span></span><span style="--0:#9ECBFF">{</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">          </span></span><span style="--0:#9ECBFF">"kty": "RSA",</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">          </span></span><span style="--0:#9ECBFF">"e": "AQAB",</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">          </span></span><span style="--0:#9ECBFF">"use": "sig",</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">          </span></span><span style="--0:#9ECBFF">"kid": "123",</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">          </span></span><span style="--0:#9ECBFF">"alg": "RS256",</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">          </span></span><span style="--0:#9ECBFF">"n": "i0B67f1jggT9QJlZ_8QL9QQ56LfurrqDhpuu8BxtVcfxrYmaXaCtqTn7OfCuca7cGHdrJIjq99rz890NmYFZuvhaZ-LMt2iyiSb9LZJAeJmHf7ecguXS_-4x3hvbsrgUDi9tlg7xxbqGYcrco3anmalAFxsbswtu2PAXLtTnUo6aYwZsWA6ksq4FL3-anPNL5oZUgIp3HGyhhLTLdlQcC83jzxbguOim-0OEz-N4fniTYRivK7MlibHKrJfO3xa_6whBS07HW4Ydc37ZN3Rx9Ov3ZyV0idFblU519nUdqp_inXj1eEpynlxH60Ys_aTU2POGZh_25KXGdF_ZC_MSRw"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">        </span></span><span style="--0:#9ECBFF">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">      </span></span><span style="--0:#9ECBFF">]</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">    </span></span><span style="--0:#9ECBFF">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="consumers:- name: consumer1  issuer: abcd  jwks: |    {      &#x22;keys&#x22;: [        {          &#x22;kty&#x22;: &#x22;oct&#x22;,          &#x22;kid&#x22;: &#x22;123&#x22;,          &#x22;k&#x22;: &#x22;hM0k3AbXBPpKOGg__Ql2Obcq7s60myWDpbHXzgKUQdYo7YCRp0gUqkCnbGSvZ2rGEl4YFkKqIqW7mTHdj-bcqXpNr-NOznEyMpVPOIlqG_NWVC3dydBgcsIZIdD-MR2AQceEaxriPA_VmiUCwfwL2Bhs6_i7eolXoY11EapLQtutz0BV6ZxQQ4dYUmct--7PLNb4BWJyQeWu0QfbIthnvhYllyl2dgeLTEJT58wzFz5HeNMNz8ohY5K0XaKAe5cepryqoXLhA-V-O1OjSG8lCNdKS09OY6O0fkyweKEtuDfien5tHHSsHXoAxYEHPFcSRL4bFPLZ0orTt1_4zpyfew&#x22;,          &#x22;alg&#x22;: &#x22;HS256&#x22;        }      ]    }- name: consumer2  issuer: abc  jwks: |    {      &#x22;keys&#x22;: [        {          &#x22;kty&#x22;: &#x22;RSA&#x22;,          &#x22;e&#x22;: &#x22;AQAB&#x22;,          &#x22;use&#x22;: &#x22;sig&#x22;,          &#x22;kid&#x22;: &#x22;123&#x22;,          &#x22;alg&#x22;: &#x22;RS256&#x22;,          &#x22;n&#x22;: &#x22;i0B67f1jggT9QJlZ_8QL9QQ56LfurrqDhpuu8BxtVcfxrYmaXaCtqTn7OfCuca7cGHdrJIjq99rz890NmYFZuvhaZ-LMt2iyiSb9LZJAeJmHf7ecguXS_-4x3hvbsrgUDi9tlg7xxbqGYcrco3anmalAFxsbswtu2PAXLtTnUo6aYwZsWA6ksq4FL3-anPNL5oZUgIp3HGyhhLTLdlQcC83jzxbguOim-0OEz-N4fniTYRivK7MlibHKrJfO3xa_6whBS07HW4Ydc37ZN3Rx9Ov3ZyV0idFblU519nUdqp_inXj1eEpynlxH60Ys_aTU2POGZh_25KXGdF_ZC_MSRw&#x22;        }      ]    }"><div></div></button></div></figure></div>
<h2 id="common-error-codes">Common Error Codes</h2>






























<table><thead><tr><th>HTTP Status Code</th><th>Error Message</th><th>Reason Description</th></tr></thead><tbody><tr><td>401</td><td>JWT missing</td><td>The JWT is not provided in the request header.</td></tr><tr><td>401</td><td>JWT expired</td><td>The JWT has expired.</td></tr><tr><td>401</td><td>JWT verification fails</td><td>The JWT payload verification failed, such as the iss mismatch.</td></tr><tr><td>403</td><td>Access denied</td><td>Access to the current route is denied.</td></tr></tbody></table> </div> <footer class="astro-3yyafb3n"> <div class="meta sl-flex astro-3yyafb3n"> <a href="https://github.com/higress-group/higress-group.github.io/blob/develop-astro-higress/src/content/docs/latest/en/plugins/authentication/jwt-auth.md" class="sl-flex astro-eez2twj6"><svg aria-hidden="true" class="astro-eez2twj6 astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.2em;"><path d="M22 7.24a1 1 0 0 0-.29-.71l-4.24-4.24a1 1 0 0 0-1.1-.22 1 1 0 0 0-.32.22l-2.83 2.83L2.29 16.05a1 1 0 0 0-.29.71V21a1 1 0 0 0 1 1h4.24a1 1 0 0 0 .76-.29l10.87-10.93L21.71 8c.1-.1.17-.2.22-.33a1 1 0 0 0 0-.24v-.14l.07-.05ZM6.83 20H4v-2.83l9.93-9.93 2.83 2.83L6.83 20ZM18.17 8.66l-2.83-2.83 1.42-1.41 2.82 2.82-1.41 1.42Z"/></svg> Edit page</a>  </div> <div class="pagination-links-wrapper" dir="ltr"> <a href="/en/docs/latest/plugins/authentication/hmac-auth/" rel="prev"> <svg aria-hidden="true" class=" astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.5rem;"><path d="M17 11H9.41l3.3-3.29a1.004 1.004 0 1 0-1.42-1.42l-5 5a1 1 0 0 0-.21.33 1 1 0 0 0 0 .76 1 1 0 0 0 .21.33l5 5a1.002 1.002 0 0 0 1.639-.325 1 1 0 0 0-.219-1.095L9.41 13H17a1 1 0 0 0 0-2Z"/></svg>  <span> Previous <br> <span class="link-title">HMAC authentication</span> </span> </a> <a href="/en/docs/latest/plugins/authentication/key-auth/" rel="next"> <svg aria-hidden="true" class=" astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.5rem;"><path d="M17.92 11.62a1.001 1.001 0 0 0-.21-.33l-5-5a1.003 1.003 0 1 0-1.42 1.42l3.3 3.29H7a1 1 0 0 0 0 2h7.59l-3.3 3.29a1.002 1.002 0 0 0 .325 1.639 1 1 0 0 0 1.095-.219l5-5a1 1 0 0 0 .21-.33 1 1 0 0 0 0-.76Z"/></svg>  <span> Next <br> <span class="link-title">Key Authentication</span> </span> </a> </div>  </footer>  </div> </div>   </main>  </div> </div>   </div> </div>  </body></html>