import{c as l,__tla as d}from"./astro-component.m4CCZO6J.js";import{r as c,m,u as g,__tla as u}from"./constant.C1QLXgsI.js";import{__tla as h}from"./astro/assets-service.BhtN0nM5.js";let s,o,n,t,r,p,a,v=Promise.all([(()=>{try{return d}catch{}})(),(()=>{try{return u}catch{}})(),(()=>{try{return h}catch{}})()]).then(async()=>{let e;e=`<h2 id="environment-requirements">Environment Requirements</h2>
<p>Higress version must be 2.1.0 or higher.</p>
<h2 id="configuration-method-for-general-user-plugins">Configuration Method for General User Plugins</h2>
<p>To meet this requirement, you only need to add the <code dir="auto">HIGRESS_ADMIN_WASM_PLUGIN_CUSTOM_IMAGE_URL_PATTERN</code> environment variable to the Higress Console container, with the value being the format template for your custom image URL. The template can use <code dir="auto">\${name}</code> and <code dir="auto">\${version}</code> as placeholders for the plugin name and image version as needed.</p>
<p><strong>Example 1:</strong></p>
<p>After making the following configuration,</p>
<div class="expressive-code"><link rel="stylesheet" href="/_astro/ec.1vui4.css"><script type="module" src="/_astro/ec.dy9ns.js"><\/script><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#E1E4E8">HIGRESS_ADMIN_WASM_PLUGIN_CUSTOM_IMAGE_URL_PATTERN</span><span style="--0:#F97583">=</span><span style="--0:#9ECBFF">oci://hub.example.com/wasm-plugins/</span><span style="--0:#E1E4E8">\${name}</span><span style="--0:#9ECBFF">:</span><span style="--0:#E1E4E8">\${version}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="HIGRESS_ADMIN_WASM_PLUGIN_CUSTOM_IMAGE_URL_PATTERN=oci://hub.example.com/wasm-plugins/\${name}:\${version}"><div></div></button></div></figure></div>
<p>The image URL generated by Higress Console for the key-rate-limit plugin will be: <code dir="auto">oci://hub.example.com/wasm-plugins/key-rate-limit:1.0.0</code></p>
<p><strong>Example 2:</strong></p>
<p>After making the following configuration,</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#E1E4E8">HIGRESS_ADMIN_WASM_PLUGIN_CUSTOM_IMAGE_URL_PATTERN</span><span style="--0:#F97583">=</span><span style="--0:#9ECBFF">http://192.168.1.100:8080/wasm-plugins/</span><span style="--0:#E1E4E8">\${name}</span><span style="--0:#9ECBFF">.wasm</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="HIGRESS_ADMIN_WASM_PLUGIN_CUSTOM_IMAGE_URL_PATTERN=http://192.168.1.100:8080/wasm-plugins/\${name}.wasm"><div></div></button></div></figure></div>
<p>The image URL generated by Higress Console for the key-rate-limit plugin will be: <code dir="auto">http://192.168.1.100:8080/wasm-plugins/key-rate-limit.wasm</code></p>
<h3 id="configuration-method-for-helm-deployment">Configuration Method for Helm Deployment</h3>
<h4 id="1-export-current-deployment-configuration">1. Export Current Deployment Configuration</h4>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#B392F0">helm</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">get</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">values</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">higress</span><span style="--0:#E1E4E8"> </span><span style="--0:#79B8FF">-n</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">higress-system</span><span style="--0:#E1E4E8"> </span><span style="--0:#F97583">></span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">values.yaml</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="helm get values higress -n higress-system > values.yaml"><div></div></button></div></figure></div>
<h4 id="2-modify-configuration">2. Modify Configuration</h4>
<p>Add the following configuration:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#85E89D">higress-console</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">podEnvs</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85E89D">HIGRESS_ADMIN_WASM_PLUGIN_CUSTOM_IMAGE_URL_PATTERN</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">your-custom-image-url-pattern</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="higress-console:\x7F  podEnvs:\x7F    HIGRESS_ADMIN_WASM_PLUGIN_CUSTOM_IMAGE_URL_PATTERN: your-custom-image-url-pattern"><div></div></button></div></figure></div>
<h4 id="3-update-current-deployment">3. Update Current Deployment</h4>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#99A0A6"># \${higress_version} is the current deployed Higress version, for example v2.1.3</span></div></div><div class="ec-line"><div class="code"><span style="--0:#B392F0">helm</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">upgrade</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">higress</span><span style="--0:#E1E4E8"> </span><span style="--0:#79B8FF">--version</span><span style="--0:#E1E4E8"> \${higress_version} </span><span style="--0:#79B8FF">-n</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">higress-system</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">higress.io/higress</span><span style="--0:#E1E4E8"> </span><span style="--0:#79B8FF">-f</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">values.yaml</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="helm upgrade higress --version \${higress_version} -n higress-system higress.io/higress -f values.yaml"><div></div></button></div></figure></div>
<h3 id="configuration-method-for-docker-compose-deployment">Configuration Method for Docker Compose Deployment</h3>
<p>Directly modify the <code dir="auto">compose/env/console.env</code> file and add the corresponding environment variable. Note that the <code dir="auto">$</code> character in the environment variable value needs to be escaped as <code dir="auto">$$</code>, otherwise it will not take effect properly, for example:</p>
<p><strong>Example 1:</strong></p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#E1E4E8">HIGRESS_ADMIN_WASM_PLUGIN_CUSTOM_IMAGE_URL_PATTERN</span><span style="--0:#F97583">=</span><span style="--0:#9ECBFF">http://192.168.1.1:8080/plugins/</span><span style="--0:#79B8FF">$$</span><span style="--0:#E1E4E8">{</span><span style="--0:#B392F0">name}.wasm</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="HIGRESS_ADMIN_WASM_PLUGIN_CUSTOM_IMAGE_URL_PATTERN=http://192.168.1.1:8080/plugins/$\${name}.wasm"><div></div></button></div></figure></div>
<p><strong>Example 2:</strong></p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#E1E4E8">HIGRESS_ADMIN_WASM_PLUGIN_CUSTOM_IMAGE_URL_PATTERN</span><span style="--0:#F97583">=</span><span style="--0:#9ECBFF">oci://hub.example.com/wasm-plugins/</span><span style="--0:#79B8FF">$$</span><span style="--0:#E1E4E8">{</span><span style="--0:#B392F0">name}:$$</span><span style="--0:#9ECBFF">{version}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="HIGRESS_ADMIN_WASM_PLUGIN_CUSTOM_IMAGE_URL_PATTERN=oci://hub.example.com/wasm-plugins/$\${name}:$\${version}"><div></div></button></div></figure></div>
<h3 id="configuration-method-for-docker-all-in-one-deployment">Configuration Method for Docker All-in-One Deployment</h3>
<p>Add the <code dir="auto">-e</code> parameter to the docker command when starting the container to specify the environment variable. Note that the <code dir="auto">$</code> character in the environment variable value needs to be escaped as <code dir="auto">\\$</code>, otherwise it will not take effect properly, for example:</p>
<p><strong>Example 1:</strong></p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#B392F0">-e</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">HIGRESS_ADMIN_WASM_PLUGIN_CUSTOM_IMAGE_URL_PATTERN=http://192.168.1.1:8080/plugins/</span><span style="--0:#79B8FF">\\$</span><span style="--0:#9ECBFF">{name}.wasm</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="-e HIGRESS_ADMIN_WASM_PLUGIN_CUSTOM_IMAGE_URL_PATTERN=http://192.168.1.1:8080/plugins/\\\${name}.wasm"><div></div></button></div></figure></div>
<p><strong>Example 2:</strong></p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#B392F0">-e</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">HIGRESS_ADMIN_WASM_PLUGIN_CUSTOM_IMAGE_URL_PATTERN=oci://hub.example.com/wasm-plugins/</span><span style="--0:#79B8FF">\\$</span><span style="--0:#9ECBFF">{name}:</span><span style="--0:#79B8FF">\\$</span><span style="--0:#9ECBFF">{version}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="-e HIGRESS_ADMIN_WASM_PLUGIN_CUSTOM_IMAGE_URL_PATTERN=oci://hub.example.com/wasm-plugins/\\\${name}:\\\${version}"><div></div></button></div></figure></div>
<h3 id="notes">Notes</h3>
<p>The above configuration will not affect plugin configurations that have already been saved. If you need to modify the image URLs in these plugin configurations, you can make targeted modifications on the plugin configuration page of the Higress Console.</p>
<p><img src="/img/docs/ops/how-tos/builtin-plugin-url/edit-builtin-plugin-zh.png" alt="Edit a built-in plugin" referrerpolicy="no-referrer"></p>
<h2 id="configuration-for-mcp-server-plugin-addresses-generated-by-nacos-3x-integration">Configuration for MCP Server Plugin Addresses Generated by Nacos 3.x Integration</h2>
<p>After integrating with the MCP registry function of Nacos 3.x, Higress Controller will automatically generate the configuration for the mcp-server plugin for the started MCP Server. The image URL in the configuration defaults to the Higress public plugin repository. If you need to customize it, you need to modify the <code dir="auto">MCP_SERVER_WASM_IMAGE_URL</code> environment variable of Higress Controller.</p>
<h3 id="configuration-method-for-helm-deployment-1">Configuration Method for Helm Deployment</h3>
<h4 id="1-export-current-deployment-configuration-1">1. Export Current Deployment Configuration</h4>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#B392F0">helm</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">get</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">values</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">higress</span><span style="--0:#E1E4E8"> </span><span style="--0:#79B8FF">-n</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">higress-system</span><span style="--0:#E1E4E8"> </span><span style="--0:#F97583">></span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">values.yaml</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="helm get values higress -n higress-system > values.yaml"><div></div></button></div></figure></div>
<h4 id="2-modify-configuration-1">2. Modify Configuration</h4>
<p>Add the following node:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#85E89D">higress-core</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">controller</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85E89D">env</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#85E89D">MCP_SERVER_WASM_IMAGE_URL</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">your-mcp-server-image-url</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="higress-core:\x7F  controller:\x7F    env:\x7F      MCP_SERVER_WASM_IMAGE_URL: your-mcp-server-image-url"><div></div></button></div></figure></div>
<h4 id="3-update-current-deployment-1">3. Update Current Deployment</h4>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#99A0A6"># \${higress_version} is the current deployed Higress version, for example v2.1.3</span></div></div><div class="ec-line"><div class="code"><span style="--0:#B392F0">helm</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">upgrade</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">higress</span><span style="--0:#E1E4E8"> </span><span style="--0:#79B8FF">--version</span><span style="--0:#E1E4E8"> \${higress_version} </span><span style="--0:#79B8FF">-n</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">higress-system</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">higress.io/higress</span><span style="--0:#E1E4E8"> </span><span style="--0:#79B8FF">-f</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">values.yaml</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="helm upgrade higress --version \${higress_version} -n higress-system higress.io/higress -f values.yaml"><div></div></button></div></figure></div>
<h3 id="configuration-method-for-docker-compose-deployment-1">Configuration Method for Docker Compose Deployment</h3>
<p>Directly modify the <code dir="auto">compose/env/controller.env</code> file and add the corresponding environment variable. Note that the <code dir="auto">$</code> character in the environment variable value needs to be escaped as <code dir="auto">$$</code>, otherwise it will not take effect properly, for example:</p>
<p><strong>Example 1:</strong></p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#E1E4E8">MCP_SERVER_WASM_IMAGE_URL</span><span style="--0:#F97583">=</span><span style="--0:#9ECBFF">http://192.168.1.1:8080/plugins/mcp-server.wasm</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="MCP_SERVER_WASM_IMAGE_URL=http://192.168.1.1:8080/plugins/mcp-server.wasm"><div></div></button></div></figure></div>
<p><strong>Example 2:</strong></p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#E1E4E8">MCP_SERVER_WASM_IMAGE_URL</span><span style="--0:#F97583">=</span><span style="--0:#9ECBFF">oci://hub.example.com/wasm-plugins/mcp-server:0.0.1</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="MCP_SERVER_WASM_IMAGE_URL=oci://hub.example.com/wasm-plugins/mcp-server:0.0.1"><div></div></button></div></figure></div>
<h3 id="configuration-method-for-docker-all-in-one-deployment-1">Configuration Method for Docker All-in-One Deployment</h3>
<p>Add the <code dir="auto">-e</code> parameter to the docker command when starting the container to specify the environment variable. Note that the <code dir="auto">$</code> character in the environment variable value needs to be escaped as <code dir="auto">\\$</code>, otherwise it will not take effect properly, for example:</p>
<p><strong>Example 1:</strong></p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#B392F0">-e</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">MCP_SERVER_WASM_IMAGE_URL=http://192.168.1.1:8080/plugins/mcp-server.wasm</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="-e MCP_SERVER_WASM_IMAGE_URL=http://192.168.1.1:8080/plugins/mcp-server.wasm"><div></div></button></div></figure></div>
<p><strong>Example 2:</strong></p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#B392F0">-e</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">MCP_SERVER_WASM_IMAGE_URL=oci://hub.example.com/wasm-plugins/mcp-server:0.0.1</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="-e MCP_SERVER_WASM_IMAGE_URL=oci://hub.example.com/wasm-plugins/mcp-server:0.0.1"><div></div></button></div></figure></div>`,t={title:"Change the Image URLs of Built-In Wasm Plugins",keywords:["ops","config","plugin","repository","url"],description:"Introduce how to change the image URLs of built-in Wasm plugins in Higress Console",custom_edit_url:"https://github.com/higress-group/higress-group.github.io/blob/main/src/content/docs/latest/en/ops/how-tos/builtin-plugin-url.md"},n="/home/runner/work/higress-group.github.io/higress-group.github.io/src/content/docs/latest/en/ops/how-tos/builtin-plugin-url.md",a=void 0,p=function(){return`
# Change the Image URLs of Built-In Wasm Plugins

## Environment Requirements

Higress version must be 2.1.0 or higher.

## Configuration Method for General User Plugins

To meet this requirement, you only need to add the \`HIGRESS_ADMIN_WASM_PLUGIN_CUSTOM_IMAGE_URL_PATTERN\` environment variable to the Higress Console container, with the value being the format template for your custom image URL. The template can use \`\${name}\` and \`\${version}\` as placeholders for the plugin name and image version as needed.

**Example 1:**

After making the following configuration,

\`\`\`bash
HIGRESS_ADMIN_WASM_PLUGIN_CUSTOM_IMAGE_URL_PATTERN=oci://hub.example.com/wasm-plugins/\${name}:\${version}
\`\`\`

The image URL generated by Higress Console for the key-rate-limit plugin will be: \`oci://hub.example.com/wasm-plugins/key-rate-limit:1.0.0\`

**Example 2:**

After making the following configuration,

\`\`\`bash
HIGRESS_ADMIN_WASM_PLUGIN_CUSTOM_IMAGE_URL_PATTERN=http://192.168.1.100:8080/wasm-plugins/\${name}.wasm
\`\`\`

The image URL generated by Higress Console for the key-rate-limit plugin will be: \`http://192.168.1.100:8080/wasm-plugins/key-rate-limit.wasm\`

### Configuration Method for Helm Deployment

#### 1. Export Current Deployment Configuration

\`\`\`bash
helm get values higress -n higress-system > values.yaml
\`\`\`

#### 2. Modify Configuration

Add the following configuration:

\`\`\`yaml
higress-console:
  podEnvs:
    HIGRESS_ADMIN_WASM_PLUGIN_CUSTOM_IMAGE_URL_PATTERN: your-custom-image-url-pattern
\`\`\`

#### 3. Update Current Deployment

\`\`\`bash
# \${higress_version} is the current deployed Higress version, for example v2.1.3
helm upgrade higress --version \${higress_version} -n higress-system higress.io/higress -f values.yaml
\`\`\`

### Configuration Method for Docker Compose Deployment

Directly modify the \`compose/env/console.env\` file and add the corresponding environment variable. Note that the \`$\` character in the environment variable value needs to be escaped as \`$$\`, otherwise it will not take effect properly, for example:

**Example 1:**

\`\`\`bash
HIGRESS_ADMIN_WASM_PLUGIN_CUSTOM_IMAGE_URL_PATTERN=http://192.168.1.1:8080/plugins/$\${name}.wasm
\`\`\`

**Example 2:**

\`\`\`bash
HIGRESS_ADMIN_WASM_PLUGIN_CUSTOM_IMAGE_URL_PATTERN=oci://hub.example.com/wasm-plugins/$\${name}:$\${version}
\`\`\`

### Configuration Method for Docker All-in-One Deployment

Add the \`-e\` parameter to the docker command when starting the container to specify the environment variable. Note that the \`$\` character in the environment variable value needs to be escaped as \`\\$\`, otherwise it will not take effect properly, for example:

**Example 1:**

\`\`\`bash
-e HIGRESS_ADMIN_WASM_PLUGIN_CUSTOM_IMAGE_URL_PATTERN=http://192.168.1.1:8080/plugins/\\\${name}.wasm
\`\`\`

**Example 2:**

\`\`\`bash
-e HIGRESS_ADMIN_WASM_PLUGIN_CUSTOM_IMAGE_URL_PATTERN=oci://hub.example.com/wasm-plugins/\\\${name}:\\\${version}
\`\`\`

### Notes

The above configuration will not affect plugin configurations that have already been saved. If you need to modify the image URLs in these plugin configurations, you can make targeted modifications on the plugin configuration page of the Higress Console.

![Edit a built-in plugin](/img/docs/ops/how-tos/builtin-plugin-url/edit-builtin-plugin-zh.png)

## Configuration for MCP Server Plugin Addresses Generated by Nacos 3.x Integration

After integrating with the MCP registry function of Nacos 3.x, Higress Controller will automatically generate the configuration for the mcp-server plugin for the started MCP Server. The image URL in the configuration defaults to the Higress public plugin repository. If you need to customize it, you need to modify the \`MCP_SERVER_WASM_IMAGE_URL\` environment variable of Higress Controller.

### Configuration Method for Helm Deployment

#### 1. Export Current Deployment Configuration

\`\`\`bash
helm get values higress -n higress-system > values.yaml
\`\`\`

#### 2. Modify Configuration

Add the following node:

\`\`\`yaml
higress-core:
  controller:
    env:
      MCP_SERVER_WASM_IMAGE_URL: your-mcp-server-image-url 
\`\`\`

#### 3. Update Current Deployment

\`\`\`bash
# \${higress_version} is the current deployed Higress version, for example v2.1.3
helm upgrade higress --version \${higress_version} -n higress-system higress.io/higress -f values.yaml
\`\`\`

### Configuration Method for Docker Compose Deployment

Directly modify the \`compose/env/controller.env\` file and add the corresponding environment variable. Note that the \`$\` character in the environment variable value needs to be escaped as \`$$\`, otherwise it will not take effect properly, for example:

**Example 1:**

\`\`\`bash
MCP_SERVER_WASM_IMAGE_URL=http://192.168.1.1:8080/plugins/mcp-server.wasm
\`\`\`

**Example 2:**

\`\`\`bash
MCP_SERVER_WASM_IMAGE_URL=oci://hub.example.com/wasm-plugins/mcp-server:0.0.1
\`\`\`

### Configuration Method for Docker All-in-One Deployment

Add the \`-e\` parameter to the docker command when starting the container to specify the environment variable. Note that the \`$\` character in the environment variable value needs to be escaped as \`\\$\`, otherwise it will not take effect properly, for example:

**Example 1:**

\`\`\`bash
-e MCP_SERVER_WASM_IMAGE_URL=http://192.168.1.1:8080/plugins/mcp-server.wasm
\`\`\`

**Example 2:**

\`\`\`bash
-e MCP_SERVER_WASM_IMAGE_URL=oci://hub.example.com/wasm-plugins/mcp-server:0.0.1
\`\`\``},o=function(){return e},r=function(){return[{depth:2,slug:"environment-requirements",text:"Environment Requirements"},{depth:2,slug:"configuration-method-for-general-user-plugins",text:"Configuration Method for General User Plugins"},{depth:3,slug:"configuration-method-for-helm-deployment",text:"Configuration Method for Helm Deployment"},{depth:4,slug:"1-export-current-deployment-configuration",text:"1. Export Current Deployment Configuration"},{depth:4,slug:"2-modify-configuration",text:"2. Modify Configuration"},{depth:4,slug:"3-update-current-deployment",text:"3. Update Current Deployment"},{depth:3,slug:"configuration-method-for-docker-compose-deployment",text:"Configuration Method for Docker Compose Deployment"},{depth:3,slug:"configuration-method-for-docker-all-in-one-deployment",text:"Configuration Method for Docker All-in-One Deployment"},{depth:3,slug:"notes",text:"Notes"},{depth:2,slug:"configuration-for-mcp-server-plugin-addresses-generated-by-nacos-3x-integration",text:"Configuration for MCP Server Plugin Addresses Generated by Nacos 3.x Integration"},{depth:3,slug:"configuration-method-for-helm-deployment-1",text:"Configuration Method for Helm Deployment"},{depth:4,slug:"1-export-current-deployment-configuration-1",text:"1. Export Current Deployment Configuration"},{depth:4,slug:"2-modify-configuration-1",text:"2. Modify Configuration"},{depth:4,slug:"3-update-current-deployment-1",text:"3. Update Current Deployment"},{depth:3,slug:"configuration-method-for-docker-compose-deployment-1",text:"Configuration Method for Docker Compose Deployment"},{depth:3,slug:"configuration-method-for-docker-all-in-one-deployment-1",text:"Configuration Method for Docker All-in-One Deployment"}]},s=l((E,y,f)=>{const{layout:_,...i}=t;return i.file=n,i.url=a,c`${m()}${g(e)}`})});export{s as Content,v as __tla,o as compiledContent,s as default,n as file,t as frontmatter,r as getHeadings,p as rawContent,a as url};
