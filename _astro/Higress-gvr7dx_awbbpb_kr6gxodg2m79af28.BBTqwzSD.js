import{c as o,__tla as c}from"./astro-component.B3fYMMDi.js";import{r as d,m as y,u as h,__tla as u}from"./constant.Cgp6cJPa.js";import{__tla as g}from"./astro/assets-service.DmDXK_Mj.js";let s,r,a,n,p,l,t,v=Promise.all([(()=>{try{return c}catch{}})(),(()=>{try{return u}catch{}})(),(()=>{try{return g}catch{}})()]).then(async()=>{let e;e=`<p>\u4E4B\u524D\u53D1\u4E86Higress\u652F\u6301DeepSeek\u8054\u7F51\u641C\u7D22\u7684\u6587\u7AE0\uFF0C\u4F46\u91CC\u9762\u6CA1\u6709\u63D0\u4F9BStep-by-Step\u7684\u6307\u5BFC\uFF0C\u8FD9\u7BC7\u6587\u7AE0\u662F\u4E00\u4E2A\u8865\u5145\uFF0C\u5E0C\u671B\u5BF9\u60F3\u4F7F\u7528\u8FD9\u4E2A\u529F\u80FD\u7684\u670B\u53CB\u6709\u5E2E\u52A9\u3002</p>
<p>\u5B89\u88C5 Higress \u7684\u8FC7\u7A0B\u4E0D\u518D\u8D58\u8FF0\uFF0C\u8BA9\u6211\u4EEC\u76F4\u63A5\u4ECE\u4E00\u4E2A\u5B89\u88C5\u597D\u7684 Higress \u5F00\u59CB\u3002</p>
<h2 id="step0-\u914D\u7F6E-deepseek-\u7684-api-key">Step.0 \u914D\u7F6E DeepSeek \u7684 API Key</h2>
<p>\u53EF\u80FD\u4F60\u5728\u5B89\u88C5 Higress \u65F6\u6CA1\u6709\u586B\u5199 DeepSeek \u7684 API Key\uFF0C\u90A3\u4E48\u53EF\u4EE5\u5728\u8FD9\u91CC\u8FDB\u884C\u914D\u7F6E</p>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2025/png/22499/1740736214204-4b94e028-ff6a-4eac-8111-03906fec892a.png" alt="" referrerpolicy="no-referrer"></p>
<h2 id="step1-\u914D\u7F6E\u641C\u7D22\u5F15\u64CEapi\u57DF\u540D">Step.1 \u914D\u7F6E\u641C\u7D22\u5F15\u64CEAPI\u57DF\u540D</h2>
<p>\u9996\u5148\u5728 Higress \u63A7\u5236\u53F0\uFF0C\u901A\u8FC7\u521B\u5EFA\u670D\u52A1\u6765\u6E90\u65B9\u5F0F\u914D\u7F6E\u5404\u4E2A\u641C\u7D22\u5F15\u64CE\u7684\u57DF\u540D\uFF1A</p>
<p>google \u641C\u7D22 API \u7684\u57DF\u540D\u662F\uFF1Acustomsearch.googleapis.com</p>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2025/png/22499/1740734430245-0956cb9d-a6aa-42a9-866a-6f161b1f07e1.png" alt="" referrerpolicy="no-referrer"></p>
<p>bing \u641C\u7D22 API \u7684\u57DF\u540D\u662F\uFF1Aapi.bing.microsoft.com</p>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2025/png/22499/1740734553158-b7ab858d-ab01-45e8-9132-18c4f49e5778.png" alt="" referrerpolicy="no-referrer"></p>
<p>\u5938\u514B\u641C\u7D22 API \u7684\u57DF\u540D\u662F\uFF1A<font style="color:rgb(0, 0, 0);">cloud-iqs.aliyuncs.com</font></p>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2025/png/22499/1740735165804-13c57801-c8ba-4e4a-9dc1-a52872380ac6.png" alt="" referrerpolicy="no-referrer"></p>
<p>Arxiv API \u7684\u57DF\u540D\u662F\uFF1Aexport.arxiv.org</p>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2025/png/22499/1740734678281-475df306-4d5e-4d8f-81ec-f87f9e7a9041.png" alt="" referrerpolicy="no-referrer"></p>
<p>\u914D\u7F6E\u597D\u540E\uFF0C\u8FD8\u8981\u7533\u8BF7\u5BF9\u5E94\u7684 API Key\uFF0C\u8FD9\u91CC\u4EE5\u5938\u514B\u641C\u7D22\u7684 API key \u7533\u8BF7\u4E3A\u4F8B\uFF0CGoogle\u548CBing\u4E0D\u505A\u8D58\u8FF0\uFF08\u7F51\u4E0A\u8D44\u6599\u4E5F\u6BD4\u8F83\u591A\uFF09\uFF0CArxiv\u662F\u514D\u8D39\u7684\u4E0D\u9700\u8981 API Key\u3002</p>
<p>\u9996\u5148\u9700\u8981\u6709\u4E2A\u963F\u91CC\u4E91\u8D26\u53F7\uFF0C\u7136\u540E\u5728\u963F\u91CC\u4E91\u63A7\u5236\u53F0\u641C\u7D22 IQS\uFF0C\u8FDB\u5165 IQS \u7684\u63A7\u5236\u53F0\u751F\u6210 API Key \u5373\u53EF\uFF1A</p>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2025/png/22499/1740735544543-2854f5ba-2eef-432c-b30c-1b22448e11da.png" alt="" referrerpolicy="no-referrer"></p>
<p>\u5177\u4F53\u53EF\u4EE5\u67E5\u770B IQS \u7684\u6587\u6863\uFF1A<a href="https://help.aliyun.com/document_detail/2870227.html" referrerpolicy="unsafe-url" rel="nofollow" target="_blank">https://help.aliyun.com/document_detail/2870227.html</a></p>
<h2 id="step2-\u914D\u7F6Eai-search\u63D2\u4EF6">Step.2 \u914D\u7F6EAI Search\u63D2\u4EF6</h2>
<p>2.1.0 \u7248\u672C\u4E4B\u524D\u7684 Higress \u9700\u8981\u901A\u8FC7\u81EA\u5B9A\u4E49\u63D2\u4EF6\u7684\u65B9\u5F0F\uFF0C\u5BFC\u5165 AI Search \u63D2\u4EF6\uFF1A</p>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2025/png/22499/1740735889064-d6e124b8-04e2-4c1c-8942-1c1f54689de0.png" alt="" referrerpolicy="no-referrer"></p>
<p>\u6CE8\u610F\u63D2\u4EF6OCI\u955C\u50CF\u5730\u5740\u586B\u5199\uFF1Ahigress-registry.cn-hangzhou.cr.aliyuncs.com/plugins/ai-search:latest
</p>
<p>\u53EF\u4EE5\u786E\u4FDD\u4F7F\u7528\u6700\u65B0\u7248\u672C\u7684 AI Search \u63D2\u4EF6\uFF0C\u5982\u679C\u5E0C\u671B\u4F7F\u7528\u7A33\u5B9A\u7248\u672C\uFF0C\u5C06tag\u6539\u4E3A1.0.0\u5373\u53EF</p>
<p>\u6267\u884C\u9636\u6BB5\u9009\u62E9\u9ED8\u8BA4\uFF0C\u6267\u884C\u4F18\u5148\u7EA7\u586B\u5199\u5927\u4E8E100\u7684\u4EFB\u610F\u503C\u5373\u53EF\uFF08\u8FD9\u6837\u8BA9AI Search\u63D2\u4EF6\u5728\u8F6C\u53D1\u5230LLM\u4F9B\u5E94\u5546\u4E4B\u524D\u7684\u65F6\u523B\u6267\u884C\uFF0C\u5BF9prompt\u8FDB\u884C\u4FEE\u6539\uFF09</p>
<p>\u6DFB\u52A0\u5B8C\u63D2\u4EF6\u540E\uFF0C\u8FDB\u884C\u76F8\u5E94\u914D\u7F6E\uFF1A</p>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2025/png/22499/1740736716313-939845ea-1504-4771-b535-e7bfb15492f3.png" alt="" referrerpolicy="no-referrer"></p>
<p>\u914D\u7F6E\u793A\u4F8B\u5982\u4E0B\uFF1A</p>
<div class="expressive-code"><link rel="stylesheet" href="/_astro/ec.1vui4.css"><script type="module" src="/_astro/ec.dy9ns.js"><\/script><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#85E89D">needReference</span><span style="--0:#E1E4E8">: </span><span style="--0:#79B8FF">true</span><span style="--0:#E1E4E8"> </span><span style="--0:#99A0A6"># \u4E3A true \u65F6\u4F1A\u5728\u7ED3\u679C\u4E2D\u9644\u5E26\u7F51\u9875\u5F15\u7528\u4FE1\u606F</span></div></div><div class="ec-line"><div class="code"><span style="--0:#85E89D">promptTemplate</span><span style="--0:#E1E4E8">: </span><span style="--0:#F97583">|</span><span style="--0:#E1E4E8"> </span><span style="--0:#99A0A6"># \u53EF\u4EE5\u4E0D\u7528\u914D\u7F6E\u6A21\u7248\uFF0C\u4F7F\u7528\u5185\u7F6E\u7684\u4E5F\u53EF\u4EE5</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">  </span></span><span style="--0:#9ECBFF"># The following content is based on search results from the user-submitted query:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">  </span></span><span style="--0:#9ECBFF">{search_results}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">  </span></span><span style="--0:#9ECBFF">In the search results I provide, each result is formatted as [webpage X begin]...[webpage X end], where X represents the index number of each article. Please cite the context at the end of the sentences where appropriate. Use a format of citation numbe] in the answer for corresponding parts. If a sentence is derived from multiple contexts, list all relevant citation numbers, such as [3][5], and ensure not to cluster the citations at the end; instead, list them in the corresponding parts of the answer.</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">  </span></span><span style="--0:#9ECBFF">When responding, please pay attention to the following:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">  </span></span><span style="--0:#9ECBFF">- Today\u2019s date in Beijing time is: {cur_date}.</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">  </span></span><span style="--0:#9ECBFF">- Not all content from the search results is closely related to the user's question. You need to discern and filter the search results based on the question.</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">  </span></span><span style="--0:#9ECBFF">- For listing-type questions (e.g., listing all flight information), try to keep the answer to within 10 points and inform the user that they can check the search source for complete information. Prioritize providing the most comprehensive and relevantms; do not volunteer information missing from the search results unless necessary.</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">  </span></span><span style="--0:#9ECBFF">- For creative questions (e.g., writing a paper), be sure to cite relevant references in the body paragraphs, such as [3][5], rather than only at the end of the article. You need to interpret and summarize the user's topic requirements, choose the apprate format, fully utilize search results, extract crucial information, and generate answers that meet user requirements, with deep thought, creativity, and professionalism. The length of your creation should be extended as much as possible, hypothesize tser's intent for each point, providing as many angles as possible, ensuring substantial information, and detailed discussion.</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">  </span></span><span style="--0:#9ECBFF">- If the response is lengthy, try to structure the summary into paragraphs. If responding with points, try to keep it within 5 points and consolidate related content.</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">  </span></span><span style="--0:#9ECBFF">- For objective Q&#x26;A, if the answer is very short, you can appropriately add one or two related sentences to enrich the content.</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">  </span></span><span style="--0:#9ECBFF">- You need to choose a suitable and aesthetically pleasing response format based on the user\u2019s requirements and answer content to ensure high readability.</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">  </span></span><span style="--0:#9ECBFF">- Your answers should synthesize multiple relevant web pages to respond and should not repeatedly quote a single web page.</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">  </span></span><span style="--0:#9ECBFF">- Unless the user requests otherwise, respond in the same language the question was asked.</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">   </span></span><span style="--0:#9ECBFF"># The user\u2019s message is:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#9ECBFF">  </span></span><span style="--0:#9ECBFF">{question}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#85E89D">searchFrom</span><span style="--0:#E1E4E8">: </span><span style="--0:#99A0A6"># \u4E0B\u9762\u662F\u914D\u7F6E\u4E00\u4E2A\u641C\u7D22\u5F15\u64CE\u9009\u62E9\u5217\u8868\uFF0C\u53EF\u4EE5\u4EC5\u914D\u7F6E\u4F60\u9700\u8981\u7684\u5F15\u64CE\uFF0C\u4E0D\u7528\u90FD\u914D\u4E0A</span></div></div><div class="ec-line"><div class="code"><span style="--0:#E1E4E8">- </span><span style="--0:#85E89D">type</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">quark</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">apiKey</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">"your-quark-api-key"</span><span style="--0:#E1E4E8"> </span><span style="--0:#99A0A6">#  \u9700\u8981\u4FEE\u6539\u6210\u4F60\u7684key</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">serviceName</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">"quark.dns"</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">servicePort</span><span style="--0:#E1E4E8">: </span><span style="--0:#79B8FF">443</span></div></div><div class="ec-line"><div class="code"><span style="--0:#E1E4E8">- </span><span style="--0:#85E89D">type</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">google</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">apiKey</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">"your-google-api-key"</span><span style="--0:#E1E4E8"> </span><span style="--0:#99A0A6">#  \u9700\u8981\u4FEE\u6539\u6210\u4F60\u7684key</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">cx</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">"your-search-engine-id"</span><span style="--0:#E1E4E8"> </span><span style="--0:#99A0A6">#  \u9700\u8981\u4FEE\u6539\u6210\u4F60\u7684engine id</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">serviceName</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">"google.dns"</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">servicePort</span><span style="--0:#E1E4E8">: </span><span style="--0:#79B8FF">443</span></div></div><div class="ec-line"><div class="code"><span style="--0:#E1E4E8">- </span><span style="--0:#85E89D">type</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">bing</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">apiKey</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">"bing-key"</span><span style="--0:#E1E4E8"> </span><span style="--0:#99A0A6">#  \u9700\u8981\u4FEE\u6539\u6210\u4F60\u7684key</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">serviceName</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">"bing.dns"</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">servicePort</span><span style="--0:#E1E4E8">: </span><span style="--0:#79B8FF">443</span></div></div><div class="ec-line"><div class="code"><span style="--0:#E1E4E8">- </span><span style="--0:#85E89D">type</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">arxiv</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">serviceName</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">"arxiv.dns"</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">servicePort</span><span style="--0:#E1E4E8">: </span><span style="--0:#79B8FF">443</span></div></div><div class="ec-line"><div class="code"><span style="--0:#85E89D">searchRewrite</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">llmApiKey</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">"your-deepseek-api-key"</span><span style="--0:#E1E4E8"> </span><span style="--0:#99A0A6">#  \u9700\u8981\u4FEE\u6539\u6210\u4F60\u7684key</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">llmModelName</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">"deepseek-chat"</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">llmServiceName</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">"llm-deepseek.internal.dns"</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">llmServicePort</span><span style="--0:#E1E4E8">: </span><span style="--0:#79B8FF">443</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">llmUrl</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">"https://api.deepseek.com/chat/completions"</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="needReference: true # \u4E3A true \u65F6\u4F1A\u5728\u7ED3\u679C\u4E2D\u9644\u5E26\u7F51\u9875\u5F15\u7528\u4FE1\u606F\x7FpromptTemplate: | # \u53EF\u4EE5\u4E0D\u7528\u914D\u7F6E\u6A21\u7248\uFF0C\u4F7F\u7528\u5185\u7F6E\u7684\u4E5F\u53EF\u4EE5\x7F  # The following content is based on search results from the user-submitted query:\x7F  {search_results}\x7F  In the search results I provide, each result is formatted as [webpage X begin]...[webpage X end], where X represents the index number of each article. Please cite the context at the end of the sentences where appropriate. Use a format of citation numbe] in the answer for corresponding parts. If a sentence is derived from multiple contexts, list all relevant citation numbers, such as [3][5], and ensure not to cluster the citations at the end; instead, list them in the corresponding parts of the answer.\x7F  When responding, please pay attention to the following:\x7F  - Today\u2019s date in Beijing time is: {cur_date}.\x7F  - Not all content from the search results is closely related to the user&#x27;s question. You need to discern and filter the search results based on the question.\x7F  - For listing-type questions (e.g., listing all flight information), try to keep the answer to within 10 points and inform the user that they can check the search source for complete information. Prioritize providing the most comprehensive and relevantms; do not volunteer information missing from the search results unless necessary.\x7F  - For creative questions (e.g., writing a paper), be sure to cite relevant references in the body paragraphs, such as [3][5], rather than only at the end of the article. You need to interpret and summarize the user&#x27;s topic requirements, choose the apprate format, fully utilize search results, extract crucial information, and generate answers that meet user requirements, with deep thought, creativity, and professionalism. The length of your creation should be extended as much as possible, hypothesize tser&#x27;s intent for each point, providing as many angles as possible, ensuring substantial information, and detailed discussion.\x7F  - If the response is lengthy, try to structure the summary into paragraphs. If responding with points, try to keep it within 5 points and consolidate related content.\x7F  - For objective Q&#x26;A, if the answer is very short, you can appropriately add one or two related sentences to enrich the content.\x7F  - You need to choose a suitable and aesthetically pleasing response format based on the user\u2019s requirements and answer content to ensure high readability.\x7F  - Your answers should synthesize multiple relevant web pages to respond and should not repeatedly quote a single web page.\x7F  - Unless the user requests otherwise, respond in the same language the question was asked.\x7F   # The user\u2019s message is:\x7F  {question}\x7FsearchFrom: # \u4E0B\u9762\u662F\u914D\u7F6E\u4E00\u4E2A\u641C\u7D22\u5F15\u64CE\u9009\u62E9\u5217\u8868\uFF0C\u53EF\u4EE5\u4EC5\u914D\u7F6E\u4F60\u9700\u8981\u7684\u5F15\u64CE\uFF0C\u4E0D\u7528\u90FD\u914D\u4E0A\x7F- type: quark\x7F  apiKey: &#x22;your-quark-api-key&#x22; #  \u9700\u8981\u4FEE\u6539\u6210\u4F60\u7684key\x7F  serviceName: &#x22;quark.dns&#x22;\x7F  servicePort: 443\x7F- type: google\x7F  apiKey: &#x22;your-google-api-key&#x22; #  \u9700\u8981\u4FEE\u6539\u6210\u4F60\u7684key\x7F  cx: &#x22;your-search-engine-id&#x22; #  \u9700\u8981\u4FEE\u6539\u6210\u4F60\u7684engine id\x7F  serviceName: &#x22;google.dns&#x22;\x7F  servicePort: 443\x7F- type: bing\x7F  apiKey: &#x22;bing-key&#x22; #  \u9700\u8981\u4FEE\u6539\u6210\u4F60\u7684key\x7F  serviceName: &#x22;bing.dns&#x22;\x7F  servicePort: 443\x7F- type: arxiv\x7F  serviceName: &#x22;arxiv.dns&#x22;\x7F  servicePort: 443\x7FsearchRewrite:\x7F  llmApiKey: &#x22;your-deepseek-api-key&#x22; #  \u9700\u8981\u4FEE\u6539\u6210\u4F60\u7684key\x7F  llmModelName: &#x22;deepseek-chat&#x22;\x7F  llmServiceName: &#x22;llm-deepseek.internal.dns&#x22;\x7F  llmServicePort: 443\x7F  llmUrl: &#x22;https://api.deepseek.com/chat/completions&#x22;"><div></div></button></div></figure></div>
<h2 id="step3-\u76F4\u63A5\u8BF7\u6C42\u8FDB\u884C\u6D4B\u8BD5\u5427">Step.3 \u76F4\u63A5\u8BF7\u6C42\u8FDB\u884C\u6D4B\u8BD5\u5427</h2>
<p>\u4E0B\u9762\u662F\u4F7F\u7528 lobechat \u5BF9\u63A5 higress \u7684\u6548\u679C\uFF1A</p>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2025/png/22499/1740737327769-fed20b67-0a86-42e4-8479-83c7cd434f3a.png" alt="" referrerpolicy="no-referrer"></p>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2025/png/22499/1740737333903-76f8af78-8948-435b-89f4-a3ff8b7f7a03.png" alt="" referrerpolicy="no-referrer"></p>`,n={title:"\u6559\u7A0B\uFF1A\u4F7F\u7528\u5F00\u6E90Higress\u5B9E\u73B0DeepSeek\u8054\u7F51\u641C\u7D22",description:"\u6559\u7A0B\uFF1A\u4F7F\u7528\u5F00\u6E90Higress\u5B9E\u73B0DeepSeek\u8054\u7F51\u641C\u7D22",date:"2025-03-10",category:"article",keywords:["Higress"],authors:"CH3CHO"},a="/home/runner/work/higress-group.github.io/higress-group.github.io/src/content/blog/Higress-gvr7dx_awbbpb_kr6gxodg2m79af28.md",t=void 0,l=function(){return`
\u4E4B\u524D\u53D1\u4E86Higress\u652F\u6301DeepSeek\u8054\u7F51\u641C\u7D22\u7684\u6587\u7AE0\uFF0C\u4F46\u91CC\u9762\u6CA1\u6709\u63D0\u4F9BStep-by-Step\u7684\u6307\u5BFC\uFF0C\u8FD9\u7BC7\u6587\u7AE0\u662F\u4E00\u4E2A\u8865\u5145\uFF0C\u5E0C\u671B\u5BF9\u60F3\u4F7F\u7528\u8FD9\u4E2A\u529F\u80FD\u7684\u670B\u53CB\u6709\u5E2E\u52A9\u3002

\u5B89\u88C5 Higress \u7684\u8FC7\u7A0B\u4E0D\u518D\u8D58\u8FF0\uFF0C\u8BA9\u6211\u4EEC\u76F4\u63A5\u4ECE\u4E00\u4E2A\u5B89\u88C5\u597D\u7684 Higress \u5F00\u59CB\u3002

## Step.0 \u914D\u7F6E DeepSeek \u7684 API Key
\u53EF\u80FD\u4F60\u5728\u5B89\u88C5 Higress \u65F6\u6CA1\u6709\u586B\u5199 DeepSeek \u7684 API Key\uFF0C\u90A3\u4E48\u53EF\u4EE5\u5728\u8FD9\u91CC\u8FDB\u884C\u914D\u7F6E

![](https://intranetproxy.alipay.com/skylark/lark/0/2025/png/22499/1740736214204-4b94e028-ff6a-4eac-8111-03906fec892a.png)

## Step.1 \u914D\u7F6E\u641C\u7D22\u5F15\u64CEAPI\u57DF\u540D
\u9996\u5148\u5728 Higress \u63A7\u5236\u53F0\uFF0C\u901A\u8FC7\u521B\u5EFA\u670D\u52A1\u6765\u6E90\u65B9\u5F0F\u914D\u7F6E\u5404\u4E2A\u641C\u7D22\u5F15\u64CE\u7684\u57DF\u540D\uFF1A

google \u641C\u7D22 API \u7684\u57DF\u540D\u662F\uFF1Acustomsearch.googleapis.com

![](https://intranetproxy.alipay.com/skylark/lark/0/2025/png/22499/1740734430245-0956cb9d-a6aa-42a9-866a-6f161b1f07e1.png)

bing \u641C\u7D22 API \u7684\u57DF\u540D\u662F\uFF1Aapi.bing.microsoft.com

![](https://intranetproxy.alipay.com/skylark/lark/0/2025/png/22499/1740734553158-b7ab858d-ab01-45e8-9132-18c4f49e5778.png)

\u5938\u514B\u641C\u7D22 API \u7684\u57DF\u540D\u662F\uFF1A<font style="color:rgb(0, 0, 0);">cloud-iqs.aliyuncs.com</font>

![](https://intranetproxy.alipay.com/skylark/lark/0/2025/png/22499/1740735165804-13c57801-c8ba-4e4a-9dc1-a52872380ac6.png)

Arxiv API \u7684\u57DF\u540D\u662F\uFF1Aexport.arxiv.org

![](https://intranetproxy.alipay.com/skylark/lark/0/2025/png/22499/1740734678281-475df306-4d5e-4d8f-81ec-f87f9e7a9041.png)

\u914D\u7F6E\u597D\u540E\uFF0C\u8FD8\u8981\u7533\u8BF7\u5BF9\u5E94\u7684 API Key\uFF0C\u8FD9\u91CC\u4EE5\u5938\u514B\u641C\u7D22\u7684 API key \u7533\u8BF7\u4E3A\u4F8B\uFF0CGoogle\u548CBing\u4E0D\u505A\u8D58\u8FF0\uFF08\u7F51\u4E0A\u8D44\u6599\u4E5F\u6BD4\u8F83\u591A\uFF09\uFF0CArxiv\u662F\u514D\u8D39\u7684\u4E0D\u9700\u8981 API Key\u3002

\u9996\u5148\u9700\u8981\u6709\u4E2A\u963F\u91CC\u4E91\u8D26\u53F7\uFF0C\u7136\u540E\u5728\u963F\u91CC\u4E91\u63A7\u5236\u53F0\u641C\u7D22 IQS\uFF0C\u8FDB\u5165 IQS \u7684\u63A7\u5236\u53F0\u751F\u6210 API Key \u5373\u53EF\uFF1A

![](https://intranetproxy.alipay.com/skylark/lark/0/2025/png/22499/1740735544543-2854f5ba-2eef-432c-b30c-1b22448e11da.png)

\u5177\u4F53\u53EF\u4EE5\u67E5\u770B IQS \u7684\u6587\u6863\uFF1A[https://help.aliyun.com/document_detail/2870227.html](https://help.aliyun.com/document_detail/2870227.html)

## Step.2 \u914D\u7F6EAI Search\u63D2\u4EF6
2.1.0 \u7248\u672C\u4E4B\u524D\u7684 Higress \u9700\u8981\u901A\u8FC7\u81EA\u5B9A\u4E49\u63D2\u4EF6\u7684\u65B9\u5F0F\uFF0C\u5BFC\u5165 AI Search \u63D2\u4EF6\uFF1A

![](https://intranetproxy.alipay.com/skylark/lark/0/2025/png/22499/1740735889064-d6e124b8-04e2-4c1c-8942-1c1f54689de0.png)

\u6CE8\u610F\u63D2\u4EF6OCI\u955C\u50CF\u5730\u5740\u586B\u5199\uFF1Ahigress-registry.cn-hangzhou.cr.aliyuncs.com/plugins/ai-search:latest

\u53EF\u4EE5\u786E\u4FDD\u4F7F\u7528\u6700\u65B0\u7248\u672C\u7684 AI Search \u63D2\u4EF6\uFF0C\u5982\u679C\u5E0C\u671B\u4F7F\u7528\u7A33\u5B9A\u7248\u672C\uFF0C\u5C06tag\u6539\u4E3A1.0.0\u5373\u53EF

\u6267\u884C\u9636\u6BB5\u9009\u62E9\u9ED8\u8BA4\uFF0C\u6267\u884C\u4F18\u5148\u7EA7\u586B\u5199\u5927\u4E8E100\u7684\u4EFB\u610F\u503C\u5373\u53EF\uFF08\u8FD9\u6837\u8BA9AI Search\u63D2\u4EF6\u5728\u8F6C\u53D1\u5230LLM\u4F9B\u5E94\u5546\u4E4B\u524D\u7684\u65F6\u523B\u6267\u884C\uFF0C\u5BF9prompt\u8FDB\u884C\u4FEE\u6539\uFF09

\u6DFB\u52A0\u5B8C\u63D2\u4EF6\u540E\uFF0C\u8FDB\u884C\u76F8\u5E94\u914D\u7F6E\uFF1A

![](https://intranetproxy.alipay.com/skylark/lark/0/2025/png/22499/1740736716313-939845ea-1504-4771-b535-e7bfb15492f3.png)

\u914D\u7F6E\u793A\u4F8B\u5982\u4E0B\uFF1A

\`\`\`yaml
needReference: true # \u4E3A true \u65F6\u4F1A\u5728\u7ED3\u679C\u4E2D\u9644\u5E26\u7F51\u9875\u5F15\u7528\u4FE1\u606F
promptTemplate: | # \u53EF\u4EE5\u4E0D\u7528\u914D\u7F6E\u6A21\u7248\uFF0C\u4F7F\u7528\u5185\u7F6E\u7684\u4E5F\u53EF\u4EE5
  # The following content is based on search results from the user-submitted query:
  {search_results}
  In the search results I provide, each result is formatted as [webpage X begin]...[webpage X end], where X represents the index number of each article. Please cite the context at the end of the sentences where appropriate. Use a format of citation numbe] in the answer for corresponding parts. If a sentence is derived from multiple contexts, list all relevant citation numbers, such as [3][5], and ensure not to cluster the citations at the end; instead, list them in the corresponding parts of the answer.
  When responding, please pay attention to the following:
  - Today\u2019s date in Beijing time is: {cur_date}.
  - Not all content from the search results is closely related to the user's question. You need to discern and filter the search results based on the question.
  - For listing-type questions (e.g., listing all flight information), try to keep the answer to within 10 points and inform the user that they can check the search source for complete information. Prioritize providing the most comprehensive and relevantms; do not volunteer information missing from the search results unless necessary.
  - For creative questions (e.g., writing a paper), be sure to cite relevant references in the body paragraphs, such as [3][5], rather than only at the end of the article. You need to interpret and summarize the user's topic requirements, choose the apprate format, fully utilize search results, extract crucial information, and generate answers that meet user requirements, with deep thought, creativity, and professionalism. The length of your creation should be extended as much as possible, hypothesize tser's intent for each point, providing as many angles as possible, ensuring substantial information, and detailed discussion.
  - If the response is lengthy, try to structure the summary into paragraphs. If responding with points, try to keep it within 5 points and consolidate related content.
  - For objective Q&A, if the answer is very short, you can appropriately add one or two related sentences to enrich the content.
  - You need to choose a suitable and aesthetically pleasing response format based on the user\u2019s requirements and answer content to ensure high readability.
  - Your answers should synthesize multiple relevant web pages to respond and should not repeatedly quote a single web page.
  - Unless the user requests otherwise, respond in the same language the question was asked.
   # The user\u2019s message is:
  {question}
searchFrom: # \u4E0B\u9762\u662F\u914D\u7F6E\u4E00\u4E2A\u641C\u7D22\u5F15\u64CE\u9009\u62E9\u5217\u8868\uFF0C\u53EF\u4EE5\u4EC5\u914D\u7F6E\u4F60\u9700\u8981\u7684\u5F15\u64CE\uFF0C\u4E0D\u7528\u90FD\u914D\u4E0A
- type: quark
  apiKey: "your-quark-api-key" #  \u9700\u8981\u4FEE\u6539\u6210\u4F60\u7684key
  serviceName: "quark.dns"
  servicePort: 443
- type: google
  apiKey: "your-google-api-key" #  \u9700\u8981\u4FEE\u6539\u6210\u4F60\u7684key
  cx: "your-search-engine-id" #  \u9700\u8981\u4FEE\u6539\u6210\u4F60\u7684engine id
  serviceName: "google.dns"
  servicePort: 443
- type: bing
  apiKey: "bing-key" #  \u9700\u8981\u4FEE\u6539\u6210\u4F60\u7684key
  serviceName: "bing.dns"
  servicePort: 443
- type: arxiv
  serviceName: "arxiv.dns"
  servicePort: 443
searchRewrite:
  llmApiKey: "your-deepseek-api-key" #  \u9700\u8981\u4FEE\u6539\u6210\u4F60\u7684key
  llmModelName: "deepseek-chat"
  llmServiceName: "llm-deepseek.internal.dns"
  llmServicePort: 443
  llmUrl: "https://api.deepseek.com/chat/completions"
\`\`\`

## Step.3 \u76F4\u63A5\u8BF7\u6C42\u8FDB\u884C\u6D4B\u8BD5\u5427
\u4E0B\u9762\u662F\u4F7F\u7528 lobechat \u5BF9\u63A5 higress \u7684\u6548\u679C\uFF1A

![](https://intranetproxy.alipay.com/skylark/lark/0/2025/png/22499/1740737327769-fed20b67-0a86-42e4-8479-83c7cd434f3a.png)

![](https://intranetproxy.alipay.com/skylark/lark/0/2025/png/22499/1740737333903-76f8af78-8948-435b-89f4-a3ff8b7f7a03.png)




`},r=function(){return e},p=function(){return[{depth:2,slug:"step0-\u914D\u7F6E-deepseek-\u7684-api-key",text:"Step.0 \u914D\u7F6E DeepSeek \u7684 API Key"},{depth:2,slug:"step1-\u914D\u7F6E\u641C\u7D22\u5F15\u64CEapi\u57DF\u540D",text:"Step.1 \u914D\u7F6E\u641C\u7D22\u5F15\u64CEAPI\u57DF\u540D"},{depth:2,slug:"step2-\u914D\u7F6Eai-search\u63D2\u4EF6",text:"Step.2 \u914D\u7F6EAI Search\u63D2\u4EF6"},{depth:2,slug:"step3-\u76F4\u63A5\u8BF7\u6C42\u8FDB\u884C\u6D4B\u8BD5\u5427",text:"Step.3 \u76F4\u63A5\u8BF7\u6C42\u8FDB\u884C\u6D4B\u8BD5\u5427"}]},s=o((m,f,E)=>{const{layout:k,...i}=n;return i.file=a,i.url=t,d`${y()}${h(e)}`})});export{s as Content,v as __tla,r as compiledContent,s as default,a as file,n as frontmatter,p as getHeadings,l as rawContent,t as url};
