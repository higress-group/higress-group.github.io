---
interface Props {
  mode?: 'primary' | 'normal' | 'black' | 'light' | 'gray';
  width?: string;
  class?: string;
  classes?: {
    parent?: string;
  };
  type?: "button" | "submit" | "reset";
  contentAlign?: "between" | "center"
  [key: string]: any;
}

const {
  mode = 'primary', width,
  class: className = "", type = "button",
  contentAlign = "center", classes, ...rest
} = Astro.props;

const widthStyle = width ? `width: ${width};` : "";
---

<higress-button class={classes?.parent || ""} data-mode={mode}>
  <button class={`btn ${contentAlign} ${className}`} type={type} style={widthStyle} {...rest}>
    <slot />
  </button>
</higress-button>

<style>
  higress-button {
    display: inline-flex;
    vertical-align: middle;
  }

  .btn {
    display: inline-flex;
    align-items: center;
    border: none;
    cursor: pointer;
    font-size: 0.875rem;
    padding: 0.5rem 1rem;
    border-radius: 9999px; /* Capsule shape */
    transition: all 0.3s ease;
    line-height: 1.5;
    outline: none;
    &.center {
      justify-content: center;
    }
    &.between {
      justify-content: space-between;
    }
  }

  /* Primary Mode */
  higress-button[data-mode="primary"] .btn {
    background: var(--higress-primary-gradient);
    color: #ffffff;
  }

  higress-button[data-mode="primary"] .btn:hover {
    opacity: 0.9;
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(62, 92, 244, 0.4);
  }

  higress-button[data-mode="primary"] .btn:active {
    transform: translateY(0);
    box-shadow: 0 2px 6px rgba(62, 92, 244, 0.4);
  }

  /* Normal Mode */
  higress-button[data-mode="normal"] .btn {
    background: #ffffff;
    color: #000000;
    border: 1px solid transparent; /* Keeps sizing consistent if we add border later */
  }

  higress-button[data-mode="normal"] .btn:hover {
    background: #f0f0f0;
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }

  higress-button[data-mode="normal"] .btn:active {
    background: #e5e5e5;
    transform: translateY(0);
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
  }

  /* Black Mode */
  higress-button[data-mode="black"] .btn {
    background: var(--color-black);
    color: #ffffff;
  }

  higress-button[data-mode="black"] .btn:hover {
    opacity: 0.9;
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
  }

  higress-button[data-mode="black"] .btn:active {
    transform: translateY(0);
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.4);
  }

  /* Light Mode */
  higress-button[data-mode="light"] .btn {
    background: var(--color-blue-02);
    color: var(--color-black);
  }

  higress-button[data-mode="light"] .btn:hover {
    opacity: 0.9;
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }

  higress-button[data-mode="light"] .btn:active {
    transform: translateY(0);
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
  }

  /* Gray Mode */
  higress-button[data-mode="gray"] .btn {
    background: var(--color-gray-01);
    color: var(--color-black);
  }

  higress-button[data-mode="gray"] .btn:hover {
    opacity: 0.9;
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }

  higress-button[data-mode="gray"] .btn:active {
    transform: translateY(0);
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
  }
</style>

<script>
  class HigressButton extends HTMLElement {
    constructor() {
      super();
    }

    connectedCallback() {
      // Optional: Add ripple effect or other logic here if needed in the future
    }
  }

  if (!customElements.get('higress-button')) {
    customElements.define('higress-button', HigressButton);
  }
</script>
