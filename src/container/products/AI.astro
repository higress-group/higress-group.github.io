---
import ProductHeader from "./Header.astro";
import Button from "../../components/button/Button.astro";
import Section from "../common/section.astro";
import Layout from "./Layout.astro";
import { LINKS } from "@/constant";

import { useTranslations, localizeUrl } from "@/i18n/utils";

const locale = Astro.currentLocale || 'root';
const t = useTranslations(locale);
const isEn = locale === "en";

const products = [
  {
    label: t('ai.product.multi_model'),
    desc: t('ai.product.multi_model.desc'),
    link: "",
    img: "https://img.alicdn.com/imgextra/i1/O1CN01Uxoq401e7RfpOjX2N_!!6000000003824-55-tps-132-132.svg",
  },
  {
    label: t('ai.product.mcp_management'),
    desc: t('ai.product.mcp_management.desc'),
    link: "",
    img: "https://img.alicdn.com/imgextra/i2/O1CN01sIsWY91nzKojOShZk_!!6000000005160-55-tps-280-181.svg"
  },
  {
    label: t('ai.product.token_management'),
    desc: t('ai.product.token_management.desc'),
    link: "",
    img: isEn ? "https://img.alicdn.com/imgextra/i3/O1CN01aU0Wqp1qm08Mzdb3W_!!6000000005537-55-tps-256-155.svg" : "https://img.alicdn.com/imgextra/i3/O1CN01BOjI971Uh2IFz9NiT_!!6000000002548-55-tps-256-155.svg",
  },
  {
    label: t('ai.product.scalability'),
    desc: t('ai.product.scalability.desc'),
    link: "",
    img: isEn ? "https://img.alicdn.com/imgextra/i2/O1CN016ePFQY20VBkjw8uqS_!!6000000006854-55-tps-246-120.svg" : "https://img.alicdn.com/imgextra/i2/O1CN01S5ZrXp1kEDDh9LZno_!!6000000004651-55-tps-246-120.svg",
  },
];

const imgSrc = isEn ? "https://img.alicdn.com/imgextra/i3/O1CN01rZX1sk1IPq23nQKIB_!!6000000000886-55-tps-1360-776.svg" : "https://img.alicdn.com/imgextra/i4/O1CN01bLiBYH28SuiBVSqC4_!!6000000007932-55-tps-1360-776.svg";
---

<ProductHeader title={t('page.header.ai.gateway')} />
<Layout>
  <Section
    title={t('api.product.intro.title')}
    desc={t('ai.product.intro.desc')}
  >
    <div class="flex flex-col md:flex-row gap-3 w-full md:w-auto" slot="buttonGroup">
      <Button href={localizeUrl('/ai/quick-start', locale)} class="w-full md:w-59.5">
        <svg class="mr-2 w-4 h-4 fill-white" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>
        </svg>
        {t('ai.product.hero.cta.primary')}
      </Button>
      <Button href={LINKS.higressConsole} target="_blank" class="w-full md:w-59.5" mode="normal">
        {t('ai.product.hero.cta.secondary')}
        <svg class="ml-2 w-3.5 h-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
        </svg>
      </Button>
    </div>
    <!-- GitHub Stars Badge -->
    <div slot="buttonGroup" class="flex items-center justify-center md:justify-start gap-4 mt-4 w-full">
      <a href={LINKS.higressGithub} target="_blank" class="github-badge inline-flex items-center gap-2 transition-opacity hover:opacity-70">
        <svg class="w-6 h-6 fill-current text-strong" viewBox="0 0 24 24">
          <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
        </svg>
        <span class="text-sm text-strong">{t('ai.product.hero.github.star')}</span>
      </a>
      <span class="text-sm text-gray-500">{t('ai.product.hero.models_count')}</span>
    </div>
    <img slot="content" class="max-w-full" src={imgSrc} alt="AI Gateway Feature" />
  </Section>
  <Section
    title={t('api.product.advantage.title')}
    desc={t('ai.product.advantage.desc')}
  >
    <div slot="content" class="w-full">
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mt-10">
        {
          products.map(s => {
            return (
            <div class="card flex flex-col gap-3">
              <div class="card-header rounded-lg">
                <div class="flex justify-center items-center w-full h-full">
                  <img class="max-w-full max-h-full" src={s.img} alt="Feature Icon">
                </div>
              </div>
              <div class="flex flex-col gap-3">
                <div class="text-center md:text-left text-black text-lg font-normal">{s.label}</div>
                <div class="text-black text-sm leading-9">
                  {s.desc}
                </div>
                {s.link && (
                  <a href={s.link} class="detail-link text-primary text-xs inline-flex items-center gap-1">
                    <span>{t('home.sense.detail.link')}</span>
                    <svg class="detail-arrow fill-primary" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="none" version="1.1" width="8" height="8" viewBox="0 0 12 12">
                      <g transform="matrix(-1,0,0,1,24,0)">
                        <path d="M13.9085488,3.2445331L13.9085488,10.49702Q13.9085488,10.902587,13.633718,11.177418Q13.358887,11.177418,12.954274,11.151293Q12.54870754,11.451293,12.27483088,11.176462Q12.00095420511,10.90163,12,10.49702L12,0.95427454Q12,0.54870796,12.27483088,0.27483124Q12.54966176,0.0009545465,12.954274,0L22.497017,0Q22.902583999999997,0,23.177414,0.27483088Q23.452244,0.54966176,23.451292000000002,0.95427454Q23.451292000000002,1.3598411,23.17646,1.6346719Q22.901628000000002,1.909503,22.497017,1.9085487L15.2445326,1.9085487L23.737576,10.401592Q24,10.664019,24,11.069584Q24,11.475149,23.737576,11.737576Q23.475149000000002,12,23.069584,12Q22.664019,12,22.401592,11.737576L13.9085488,3.2445331Z" fill-opacity="1"/>
                      </g>
                    </svg>
                  </a>
                )}
              </div>
            </div>
            )
          })
        }
      </div>
      <div class="mt-12 pt-12 border-t border-gray-200">
        <div class="flex flex-col items-center justify-center gap-4">
          <p class="text-gray-600 text-base">{t('ai.product.integrations.supported')}</p>
          <a href="/ai-gateway/integrations/" class="detail-link inline-flex items-center text-primary font-medium text-base group">
            <span>{t('ai.product.integrations.view_directory')}</span>
            <svg class="detail-arrow ml-2 w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
          </a>
        </div>
      </div>
    </div>
  </Section>

  <!-- Version Comparison CTA Section -->
  <div class="version-comparison-section">
    <div class="version-comparison-header">
      <h3 class="version-comparison-title">{t('ai.product.version_compare.title')}</h3>
      <p class="version-comparison-subtitle">{t('ai.product.version_compare.subtitle')}</p>
    </div>
    <div class="version-cards">
      <!-- Open Source Version -->
      <div class="version-card opensource">
        <div class="version-badge opensource-badge">{t('ai.product.version_compare.opensource.badge')}</div>
        <h4 class="version-card-title">{t('ai.product.version_compare.opensource.title')}</h4>
        <p class="version-card-desc">{t('ai.product.version_compare.opensource.desc')}</p>
        <ul class="version-features">
          <li>
            <svg class="feature-icon" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>
            {t('ai.product.version_compare.opensource.feature1')}
          </li>
          <li>
            <svg class="feature-icon" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>
            {t('ai.product.version_compare.opensource.feature2')}
          </li>
          <li>
            <svg class="feature-icon" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>
            {t('ai.product.version_compare.opensource.feature3')}
          </li>
        </ul>
        <a href={LINKS.higressGithub} target="_blank" class="version-btn opensource-btn">
          <svg class="mr-2 w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
          GitHub
        </a>
      </div>
      
      <!-- Enterprise Version - Highlighted -->
      <div class="version-card enterprise">
        <div class="version-badge enterprise-badge">
          <svg class="w-3.5 h-3.5 mr-1" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
          {t('ai.product.version_compare.enterprise.badge')}
        </div>
        <h4 class="version-card-title">{t('ai.product.version_compare.enterprise.title')}</h4>
        <p class="version-card-desc">{t('ai.product.version_compare.enterprise.desc')}</p>
        <ul class="version-features">
          <li>
            <svg class="feature-icon highlight" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>
            {t('ai.product.version_compare.enterprise.feature1')}
          </li>
          <li>
            <svg class="feature-icon highlight" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>
            {t('ai.product.version_compare.enterprise.feature2')}
          </li>
          <li>
            <svg class="feature-icon highlight" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>
            {t('ai.product.version_compare.enterprise.feature3')}
          </li>
          <li>
            <svg class="feature-icon highlight" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>
            {t('ai.product.version_compare.enterprise.feature4')}
          </li>
        </ul>
        <a href={LINKS.enterprise} target="_blank" class="version-btn enterprise-btn">
          {t('ai.product.version_compare.enterprise.btn')}
          <svg class="ml-2 w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
          </svg>
        </a>
        <p class="enterprise-tip">{t('ai.product.version_compare.enterprise.tip')}</p>
      </div>
    </div>
  </div>

  <!-- Ready to Start CTA Section -->
  <div class="ready-to-start-section">
    <div class="ready-to-start-content">
      <div class="ready-icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>
        </svg>
      </div>
      <div class="ready-text">
        <h3 class="ready-title">{t('ai.product.ready_to_start.title')}</h3>
        <p class="ready-desc">{t('ai.product.ready_to_start.desc')}</p>
      </div>
      <div class="ready-actions">
        <a href={localizeUrl('/ai/quick-start', locale)} class="ready-btn primary">
          <svg class="mr-2 w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
          </svg>
          {t('ai.product.ready_to_start.btn_quickstart')}
        </a>
        <a href={LINKS.higressConsole} target="_blank" class="ready-btn secondary">
          {t('ai.product.ready_to_start.btn_demo')}
          <svg class="ml-1 w-3.5 h-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
          </svg>
        </a>
      </div>
    </div>
  </div>
</Layout>
<style>
.card {
  .card-header {
    background-image: url("https://img.alicdn.com/imgextra/i1/O1CN01L0NG3P1VgrlKrpDqR_!!6000000002683-2-tps-312-197.png");
    background-repeat: no-repeat;
    background-size: cover;
    height: 200px;
  }
}

.detail-link {
  position: relative;
  transition: all 0.3s ease;
  width: fit-content;
}

.detail-link::after {
  content: '';
  position: absolute;
  bottom: -2px;
  left: 0;
  width: 0;
  height: 1px;
  background-color: currentColor;
  transition: width 0.3s ease;
}

.detail-link:hover::after {
  width: 100%;
}

.detail-link:hover {
  opacity: 0.8;
}

.detail-arrow {
  transition: transform 0.3s ease;
}

.detail-link:hover .detail-arrow {
  transform: translateX(4px);
}


/* Ready to Start Section */
.ready-to-start-section {
  background: linear-gradient(135deg, rgba(62, 92, 244, 0.05) 0%, rgba(109, 91, 255, 0.08) 100%);
  border-radius: 1rem;
  padding: 2rem;
  margin-top: 1rem;
}

.ready-to-start-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  gap: 1.25rem;
}

@media (min-width: 768px) {
  .ready-to-start-content {
    flex-direction: row;
    text-align: left;
    gap: 2rem;
  }
}

.ready-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 64px;
  height: 64px;
  background: linear-gradient(135deg, #3E5CF4 0%, #6D5BFF 100%);
  border-radius: 1rem;
  color: white;
  flex-shrink: 0;
}

.ready-text {
  flex: 1;
}

.ready-title {
  font-size: 1.25rem;
  font-weight: 600;
  color: #1a1a1a;
  margin: 0 0 0.5rem 0;
}

.ready-desc {
  font-size: 0.9375rem;
  color: #666;
  margin: 0;
}

.ready-actions {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  flex-shrink: 0;
}

@media (min-width: 640px) {
  .ready-actions {
    flex-direction: row;
  }
}

.ready-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0.75rem 1.5rem;
  border-radius: 0.5rem;
  font-size: 0.875rem;
  font-weight: 500;
  text-decoration: none;
  transition: all 0.2s ease;
  white-space: nowrap;
}

.ready-btn.primary {
  background: linear-gradient(135deg, #3E5CF4 0%, #6D5BFF 100%);
  color: white;
}

.ready-btn.primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(62, 92, 244, 0.3);
}

.ready-btn.secondary {
  background: white;
  color: #3E5CF4;
  border: 1px solid rgba(62, 92, 244, 0.3);
}

.ready-btn.secondary:hover {
  background: rgba(62, 92, 244, 0.05);
  border-color: rgba(62, 92, 244, 0.5);
}

/* Version Comparison Section */
.version-comparison-section {
  margin-top: 3rem;
  padding: 2.5rem;
  background: linear-gradient(180deg, #f8fafc 0%, #ffffff 100%);
  border-radius: 1.5rem;
  border: 1px solid #e2e8f0;
}

.version-comparison-header {
  text-align: center;
  margin-bottom: 2rem;
}

.version-comparison-title {
  font-size: 1.75rem;
  font-weight: 700;
  color: #1a1a1a;
  margin: 0 0 0.5rem 0;
}

.version-comparison-subtitle {
  font-size: 1rem;
  color: #666;
  margin: 0;
}

.version-cards {
  display: grid;
  grid-template-columns: 1fr;
  gap: 1.5rem;
}

@media (min-width: 768px) {
  .version-cards {
    grid-template-columns: 1fr 1fr;
  }
}

.version-card {
  position: relative;
  padding: 1.75rem;
  border-radius: 1rem;
  border: 2px solid #e2e8f0;
  background: white;
  transition: all 0.3s ease;
}

.version-card.opensource:hover {
  border-color: #64748b;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
}

.version-card.enterprise {
  border-color: #3E5CF4;
  background: linear-gradient(135deg, rgba(62, 92, 244, 0.02) 0%, rgba(109, 91, 255, 0.05) 100%);
  box-shadow: 0 4px 24px rgba(62, 92, 244, 0.15);
}

.version-card.enterprise:hover {
  transform: translateY(-4px);
  box-shadow: 0 8px 32px rgba(62, 92, 244, 0.25);
}

.version-badge {
  display: inline-flex;
  align-items: center;
  padding: 0.25rem 0.75rem;
  border-radius: 9999px;
  font-size: 0.75rem;
  font-weight: 600;
  margin-bottom: 1rem;
}

.opensource-badge {
  background: #f1f5f9;
  color: #475569;
}

.enterprise-badge {
  background: linear-gradient(135deg, #3E5CF4 0%, #6D5BFF 100%);
  color: white;
}

.version-card-title {
  font-size: 1.25rem;
  font-weight: 600;
  color: #1a1a1a;
  margin: 0 0 0.5rem 0;
}

.version-card-desc {
  font-size: 0.875rem;
  color: #666;
  margin: 0 0 1.25rem 0;
  line-height: 1.5;
}

.version-features {
  list-style: none;
  padding: 0;
  margin: 0 0 1.5rem 0;
}

.version-features li {
  display: flex;
  align-items: flex-start;
  gap: 0.5rem;
  font-size: 0.875rem;
  color: #374151;
  margin-bottom: 0.75rem;
}

.feature-icon {
  width: 1.125rem;
  height: 1.125rem;
  flex-shrink: 0;
  color: #9ca3af;
  margin-top: 1px;
}

.feature-icon.highlight {
  color: #3E5CF4;
}

.version-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  padding: 0.875rem 1.5rem;
  border-radius: 0.5rem;
  font-size: 0.9375rem;
  font-weight: 600;
  text-decoration: none;
  transition: all 0.2s ease;
}

.opensource-btn {
  background: #f8fafc;
  color: #374151;
  border: 1px solid #e2e8f0;
}

.opensource-btn:hover {
  background: #f1f5f9;
  border-color: #cbd5e1;
}

.enterprise-btn {
  background: linear-gradient(135deg, #3E5CF4 0%, #6D5BFF 100%);
  color: white;
  border: none;
}

.enterprise-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 16px rgba(62, 92, 244, 0.4);
}

.enterprise-tip {
  font-size: 0.75rem;
  color: #6D5BFF;
  text-align: center;
  margin: 0.75rem 0 0 0;
  font-weight: 500;
}
</style>
