---
import type { GetStaticPathsOptions } from "astro";
import { getCollection } from "astro:content";
import { BLOG_CATEGORY } from "../../constant";
import BlogLayout from "../../container/blog/BlogLayout.astro";
import { useTranslations } from "../../i18n/utils";
const locale = Astro.currentLocale || 'root';
const t = useTranslations(locale);
const { page } = Astro.props;

export async function getStaticPaths({ paginate }: GetStaticPathsOptions) {
    const blogCategories = new Set(BLOG_CATEGORY.map((item) => item.type));
    const posts = await getCollection("blog", (item) =>
       blogCategories.has(item.data.category || ""),
    );

    const sortedPosts = posts.sort(
        (a, b) =>
            new Date(b.data.date).valueOf() - new Date(a.data.date).valueOf(),
    );
    return paginate(sortedPosts, { pageSize: 10 });
}
---

<BlogLayout title={t("blog.all.articles")} page={page} currentCategory="all" />
